"use strict";var oN=Object.create;var Ju=Object.defineProperty;var aN=Object.getOwnPropertyDescriptor;var hN=Object.getOwnPropertyNames;var lN=Object.getPrototypeOf,uN=Object.prototype.hasOwnProperty;var Pt=(i,t)=>()=>(i&&(t=i(i=0)),t);var H=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var cN=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of hN(t))!uN.call(i,r)&&r!==e&&Ju(i,r,{get:()=>t[r],enumerable:!(s=aN(t,r))||s.enumerable});return i};var rn=(i,t,e)=>(e=i!=null?oN(lN(i)):{},cN(t||!i||!i.__esModule?Ju(e,"default",{value:i,enumerable:!0}):e,i));var Sa=H(Ia=>{"use strict";Object.defineProperty(Ia,"__esModule",{value:!0});Ia.default=pN;var fN=dN(require("crypto"));function dN(i){return i&&i.__esModule?i:{default:i}}var Qr=new Uint8Array(256),Yr=Qr.length;function pN(){return Yr>Qr.length-16&&(fN.default.randomFillSync(Qr),Yr=0),Qr.slice(Yr,Yr+=16)}});var Xu=H(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.default=void 0;var _N=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;jr.default=_N});var ir=H(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.default=void 0;var mN=TN(Xu());function TN(i){return i&&i.__esModule?i:{default:i}}function gN(i){return typeof i=="string"&&mN.default.test(i)}var EN=gN;Kr.default=EN});var nr=H(zr=>{"use strict";Object.defineProperty(zr,"__esModule",{value:!0});zr.default=void 0;var kN=xN(ir());function xN(i){return i&&i.__esModule?i:{default:i}}var oi=[];for(let i=0;i<256;++i)oi.push((i+256).toString(16).substr(1));function vN(i,t=0){let e=(oi[i[t+0]]+oi[i[t+1]]+oi[i[t+2]]+oi[i[t+3]]+"-"+oi[i[t+4]]+oi[i[t+5]]+"-"+oi[i[t+6]]+oi[i[t+7]]+"-"+oi[i[t+8]]+oi[i[t+9]]+"-"+oi[i[t+10]]+oi[i[t+11]]+oi[i[t+12]]+oi[i[t+13]]+oi[i[t+14]]+oi[i[t+15]]).toLowerCase();if(!(0,kN.default)(e))throw TypeError("Stringified UUID is invalid");return e}var yN=vN;zr.default=yN});var ec=H($r=>{"use strict";Object.defineProperty($r,"__esModule",{value:!0});$r.default=void 0;var CN=tc(Sa()),NN=tc(nr());function tc(i){return i&&i.__esModule?i:{default:i}}var Zu,Oa,La=0,Pa=0;function bN(i,t,e){let s=t&&e||0,r=t||new Array(16);i=i||{};let h=i.node||Zu,l=i.clockseq!==void 0?i.clockseq:Oa;if(h==null||l==null){let b=i.random||(i.rng||CN.default)();h==null&&(h=Zu=[b[0]|1,b[1],b[2],b[3],b[4],b[5]]),l==null&&(l=Oa=(b[6]<<8|b[7])&16383)}let c=i.msecs!==void 0?i.msecs:Date.now(),f=i.nsecs!==void 0?i.nsecs:Pa+1,E=c-La+(f-Pa)/1e4;if(E<0&&i.clockseq===void 0&&(l=l+1&16383),(E<0||c>La)&&i.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");La=c,Pa=f,Oa=l,c+=122192928e5;let k=((c&268435455)*1e4+f)%4294967296;r[s++]=k>>>24&255,r[s++]=k>>>16&255,r[s++]=k>>>8&255,r[s++]=k&255;let U=c/4294967296*1e4&268435455;r[s++]=U>>>8&255,r[s++]=U&255,r[s++]=U>>>24&15|16,r[s++]=U>>>16&255,r[s++]=l>>>8|128,r[s++]=l&255;for(let b=0;b<6;++b)r[s+b]=h[b];return t||(0,NN.default)(r)}var AN=bN;$r.default=AN});var Da=H(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.default=void 0;var IN=SN(ir());function SN(i){return i&&i.__esModule?i:{default:i}}function ON(i){if(!(0,IN.default)(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var LN=ON;Jr.default=LN});var Ra=H(ds=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});ds.default=wN;ds.URL=ds.DNS=void 0;var PN=ic(nr()),DN=ic(Da());function ic(i){return i&&i.__esModule?i:{default:i}}function RN(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}var nc="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ds.DNS=nc;var sc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ds.URL=sc;function wN(i,t,e){function s(r,h,l,c){if(typeof r=="string"&&(r=RN(r)),typeof h=="string"&&(h=(0,DN.default)(h)),h.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+r.length);if(f.set(h),f.set(r,h.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,l){c=c||0;for(let E=0;E<16;++E)l[c+E]=f[E];return l}return(0,PN.default)(f)}try{s.name=i}catch{}return s.DNS=nc,s.URL=sc,s}});var rc=H(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.default=void 0;var FN=BN(require("crypto"));function BN(i){return i&&i.__esModule?i:{default:i}}function UN(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),FN.default.createHash("md5").update(i).digest()}var MN=UN;Xr.default=MN});var ac=H(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.default=void 0;var HN=oc(Ra()),GN=oc(rc());function oc(i){return i&&i.__esModule?i:{default:i}}var VN=(0,HN.default)("v3",48,GN.default),qN=VN;Zr.default=qN});var lc=H(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.default=void 0;var WN=hc(Sa()),YN=hc(nr());function hc(i){return i&&i.__esModule?i:{default:i}}function QN(i,t,e){i=i||{};let s=i.random||(i.rng||WN.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return(0,YN.default)(s)}var jN=QN;to.default=jN});var uc=H(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.default=void 0;var KN=zN(require("crypto"));function zN(i){return i&&i.__esModule?i:{default:i}}function $N(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),KN.default.createHash("sha1").update(i).digest()}var JN=$N;eo.default=JN});var fc=H(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.default=void 0;var XN=cc(Ra()),ZN=cc(uc());function cc(i){return i&&i.__esModule?i:{default:i}}var tb=(0,XN.default)("v5",80,ZN.default),eb=tb;io.default=eb});var dc=H(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.default=void 0;var ib="00000000-0000-0000-0000-000000000000";no.default=ib});var pc=H(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.default=void 0;var nb=sb(ir());function sb(i){return i&&i.__esModule?i:{default:i}}function rb(i){if(!(0,nb.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var ob=rb;so.default=ob});var _c=H(Zi=>{"use strict";Object.defineProperty(Zi,"__esModule",{value:!0});Object.defineProperty(Zi,"v1",{enumerable:!0,get:function(){return ab.default}});Object.defineProperty(Zi,"v3",{enumerable:!0,get:function(){return hb.default}});Object.defineProperty(Zi,"v4",{enumerable:!0,get:function(){return lb.default}});Object.defineProperty(Zi,"v5",{enumerable:!0,get:function(){return ub.default}});Object.defineProperty(Zi,"NIL",{enumerable:!0,get:function(){return cb.default}});Object.defineProperty(Zi,"version",{enumerable:!0,get:function(){return fb.default}});Object.defineProperty(Zi,"validate",{enumerable:!0,get:function(){return db.default}});Object.defineProperty(Zi,"stringify",{enumerable:!0,get:function(){return pb.default}});Object.defineProperty(Zi,"parse",{enumerable:!0,get:function(){return _b.default}});var ab=Cn(ec()),hb=Cn(ac()),lb=Cn(lc()),ub=Cn(fc()),cb=Cn(dc()),fb=Cn(pc()),db=Cn(ir()),pb=Cn(nr()),_b=Cn(Da());function Cn(i){return i&&i.__esModule?i:{default:i}}});var on,rA,oA,mc,aA,hA,lA,uA,cA,fA,Tc=Pt(()=>{on=rn(_c(),1),rA=on.default.v1,oA=on.default.v3,mc=on.default.v4,aA=on.default.v5,hA=on.default.NIL,lA=on.default.version,uA=on.default.validate,cA=on.default.stringify,fA=on.default.parse});function gc(i){return(typeof i=="number"||typeof i=="string"&&mb.indexOf(i.slice(-1))===-1)&&i!==""&&!isNaN(i)}var mb,Ec=Pt(()=>{"use strict";mb=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var et,Ti=Pt(()=>{"use strict";Ec();et=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,s){return t.substr(e,s)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return gc(t)}static substringCount(t,e){let s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(s,"gi"))||[]).length}static lastWord(t){let e=t.split(""),s=[];for(let r=e.length;r>=0&&e[r]!=" ";r--)s.push(e[r]);return s.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return et.breakByNewLine(et.normalizeLineEndings(t)).forEach(r=>{r.trim().length>0&&e.push(r)}),e.join(`
`)}static replaceAllInString(t,e,s){return t.replace(new RegExp(e,"g"),s)}static getTrimmedMatch(t,e,s){let r=t.exec(e);if(r==null||r.length<s)return null;let h=r[s].trim();return h.length==0?null:h}static assertMatchIs(t,e,s,r){let h=et.getTrimmedMatch(t,e,s);return h!=null&&h==r}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=et.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=et.breakByNewLine(t);return e.length==0?"":e[0]}}});var xc=H((TA,kc)=>{"use strict";kc.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${i}" at line ${this.yylineno} (offset ${this.offset})`)}}});var yc=H((gA,vc)=>{"use strict";vc.exports={T_COMMENT:function(){for(;this.offset<this.size;){let i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let i=this.input(),t=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),i==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(i=this.input(),i==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var Nc=H((EA,Cc)=>{"use strict";Cc.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let i=this.input();if(i=="<"){if(i=this.ahead(1),i=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(i=this._input[this.offset+4],i===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var Ic=H((kA,Ac)=>{"use strict";var ro=10,bc="2147483648";process.arch=="x64"&&(ro=19,bc="9223372036854775808");Ac.exports={consume_NUM:function(){let i=this.yytext[0],t=i===".";if(i==="0")if(i=this.input(),i==="x"||i==="X"){if(i=this.input(),i!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if(i=this.input(),i!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){let e=i;if(i=this.input(),i==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(i==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(i==="e"||i==="E"){if(e==="_"){this.unput(1);break}let s=2;if(i=this.input(),(i==="+"||i==="-")&&(s=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?s:s-1);break}if(!this.is_NUM()){i&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<ro-1?this.tok.T_LNUMBER:this.yytext.length<ro||this.yytext.length==ro&&this.yytext<bc?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER}}});var Oc=H((xA,Sc)=>{"use strict";Sc.exports={matchST_LOOKING_FOR_PROPERTY:function(){let i=this.input();if(i==="-"){if(i=this.input(),i===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),i=this.input(),i==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}}}});var Pc=H((vA,Lc)=>{"use strict";Lc.exports={matchST_IN_SCRIPTING:function(){let i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),i=this._input[this.offset],(i===`
`||i==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!(i===" "||i==="	"||i===`
`||i==="\r")){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var wc=H((yA,Rc)=>{"use strict";var Qn=[`
`,"\r"],Dc=[`
`,"\r",";"],Tb=Dc.concat(["	"," ",",","]",")","/","=","!"]);Rc.exports={T_CONSTANT_ENCAPSED_STRING:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let s=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,Qn.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,e=this.offset-i,this.offset=i,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else{if(i=='"')break;if(i=="$"){if(i=this.input(),i=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if(i=this.input(),i=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(i,t){let e=this._input[i-2];if(!Qn.includes(e))return!1;let s=!1,r=!1,h=0,l=this._input[i-1];if(this.version>=703){for(;l==="	"||l===" ";)l===" "?s=!0:l==="	"&&(r=!0),l=this._input[i+h],h++;if(i=i+h,Qn.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){let c=this._input[i-1+this.heredoc_label.length];if((this.version>=703?Tb:Dc).includes(c)){if(t){if(this.consume(h),s&&r)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=h,this.heredoc_label.indentation_uses_spaces=s,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let i=this.offset+1;for(;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!Qn.includes(this._input[i-1]))for(;!Qn.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let i=this._input[this.offset-1];for(;this.offset<this.size;)if(Qn.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),Qn.includes(i)||(i=this.input())),Qn.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}i&&this.unput(1)}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var Bc=H((CA,Fc)=>{"use strict";Fc.exports={T_STRING:function(){let i=this.yytext.toLowerCase(),t=this.keywords[i];if(typeof t!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,i==="b"||i==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,s=this.input();for(;s==" ";)s=this.input();let r=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();let h=s.slice(0,-1).toLowerCase();r=h!=="extends"&&h!=="implements"}return this.unput(this.offset-e),r?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let i=this._input[this.offset-1],t=this.tokenTerminals[i];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),s=this.castKeywords[e];if(typeof s=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return s}return this.unput(this.offset-i),"("},"=":function(){let i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var Mc=H((NA,Uc)=>{"use strict";var gb=";:,.\\[]()|^&+-/*=%!~$<>?@";Uc.exports={is_NUM:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){let i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){let i=this._input[this.offset-1];return gb.indexOf(i)!==-1},is_WHITESPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95}}});var Gc=H((bA,Hc)=>{"use strict";var ci=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};ci.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};ci.prototype.input=function(){let i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""};ci.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};ci.prototype.tryMatch=function(i){return i===this.ahead(i.length)};ci.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()};ci.prototype.ahead=function(i){let t=this._input.substring(this.offset,this.offset+i);return t[t.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(t+=`
`),t};ci.prototype.consume=function(i){for(let t=0;t<i;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};ci.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};ci.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this};ci.prototype.appendToken=function(i,t){return this.tokens.push([i,t]),this};ci.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i};ci.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this};ci.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};ci.prototype.next=function(){let i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(i=this.tokens.shift(),typeof i[1]=="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=i;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return i};[xc(),yc(),Nc(),Ic(),Oc(),Pc(),wc(),Bc(),Mc()].forEach(function(i){for(let t in i)ci.prototype[t]=i[t]});Hc.exports=ci});var wa=H((AA,Vc)=>{"use strict";var Eb=function(i,t,e){this.line=i,this.column=t,this.offset=e};Vc.exports=Eb});var Wc=H((IA,qc)=>{"use strict";qc.exports={read_array:function(){let i=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(t=!0,i="]");let s=[];return this.next().token!==i&&(s=this.read_array_pair_list(t)),this.expect(i),this.next(),e(t,s)},read_array_pair_list:function(i){let t=this;return this.read_list(function(){return t.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!i&&this.token===")"||i&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,s=null,r=!1,h=!1;if(this.token==="&")this.next(),r=!0,s=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),h=!0,s=this.read_expr();else{let l=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=l,this.token==="&"?(this.next(),r=!0,s=this.read_variable(!0,!1)):s=this.read_expr()):s=l}return t(e,s,r,h)}}});var Qc=H((SA,Yc)=>{"use strict";Yc.exports={read_class_declaration_statement:function(i){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let s=this.node("identifier"),r=this.text();this.next(),s=s(r);let h=this.read_extends_from(),l=this.read_implements_list();this.expect("{");let c=this.next().read_class_body(!0,!1),f=t(s,h,l,c,e);return i&&(f.attrGroups=i),f},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(i,t){let e=[],s=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let l=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(l);continue}this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list());let r=this.position(),h=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let l=this.read_constant_list(h,s);this.expect(";")&&this.next(),e=e.concat(l);continue}if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),h[0]=null,h[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,h,s,r)),s=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE))){let l=this.read_variable_list(h,s);s=[],this.expect(";"),this.next(),e=e.concat(l)}else this.error([this.tok.T_CONST,...i?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(i,t){let e=this.node("propertystatement"),s=this.read_list(function(){let h=this.node("property"),l=!1;this.token===this.tok.T_READ_ONLY&&(l=!0,this.next());let[c,f]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let E=this.node("identifier"),k=this.text().substring(1);return this.next(),E=E(k),this.token===";"||this.token===","?h(E,null,l,c,f,t||[]):this.token==="="?h(E,this.next().read_expr(),l,c,f,t||[]):(this.expect([",",";","="]),h(E,null,c,f,t||[]))},",");return e(null,s,i)},read_constant_list:function(i,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),s=this.read_list(function(){let h=this.node("constant"),l=null,c=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){l=this.node("identifier");let f=this.text();this.next(),l=l(f)}else this.expect("IDENTIFIER");return this.expect("=")&&(c=this.next().read_expr()),h(l,c)},",");return e(null,s,i,t||[])},read_member_flags:function(i){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,s=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,s=0;break;case this.tok.T_PROTECTED:e=0,s=1;break;case this.tok.T_PRIVATE:e=0,s=2;break;case this.tok.T_STATIC:e=1,s=1;break;case this.tok.T_ABSTRACT:e=2,s=1;break;case this.tok.T_FINAL:e=2,s=2;break}i&&(e==0&&s==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),s=-1):e==2&&s==1&&(this.error(),s=-1)),t[e]!==-1?this.error():s!==-1&&(t[e]=s)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let i=!1;this.token==="?"&&(i=!0,this.next());let t=this.read_types();if(i&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[i,t]},read_interface_declaration_statement:function(i){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_interface_extends_list();this.expect("{");let h=this.next().read_interface_body();return t(e,r,h,i||[])},read_interface_body:function(){let i=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let s=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let r=this.read_constant_list(s,t);this.expect(";")&&this.next(),i=i.concat(r),t=[]}else if(this.token===this.tok.T_FUNCTION){let r=this.read_function_declaration(2,s,t,e);r.parseFlags(s),i.push(r),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){let i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let s=this.next().read_class_body(!0,!1);return i(t,s)},read_trait_use_statement:function(){let i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(t,e)},read_trait_use_alias:function(){let i=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return i("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let s=null,r=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){r=this.node("identifier");let h=this.text();this.next(),r=r(h)}else s===!1&&this.expect(this.tok.T_STRING);return i("traitalias",t,e,r,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),i("traitalias",t,e,null,null)}}});var Kc=H((OA,jc)=>{"use strict";jc.exports={read_comment:function(){let i=this.text(),t=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=s,t},read_doc_comment:function(){let i=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),i=i(e),i.offset=t,this.prev=s,i}}});var $c=H((LA,zc)=>{"use strict";zc.exports={read_expr:function(i){let t=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),t("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return t("bin","|",i,this.next().read_expr());if(this.token==="&")return t("bin","&",i,this.next().read_expr());if(this.token==="^")return t("bin","^",i,this.next().read_expr());if(this.token===".")return t("bin",".",i,this.next().read_expr());if(this.token==="+")return t("bin","+",i,this.next().read_expr());if(this.token==="-")return t("bin","-",i,this.next().read_expr());if(this.token==="*")return t("bin","*",i,this.next().read_expr());if(this.token==="/")return t("bin","/",i,this.next().read_expr());if(this.token==="%")return t("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",i,this.next().read_expr());if(this.token==="<")return t("bin","<",i,this.next().read_expr());if(this.token===">")return t("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=t("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return t("bin","??",i,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",i,e,this.read_expr())}else t.destroy(i);return i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let i=null;switch(this.token){case this.tok.T_ISSET:{i=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_EMPTY:{i=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{i=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr());break}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){let i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){let i,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let s=null,r=this.innerList;i=this.node("list"),r||(s=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let h=this.read_array_pair_list(!1);this.expect(")")&&this.next();let l=!1;for(let c=0;c<h.length;c++)if(h[c]!==null&&h[c].kind!=="noop"){l=!0;break}return l||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),r?i(h,!1):(this.innerList=!1,this.expect("=")?s(i(h,!1),this.next().read_expr(),"="):i(h,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let s=this.node("throw"),r=this.next().read_expr();return s(r)}case this.tok.T_EXIT:{let s=this.lexer.yytext.toLowerCase()==="die";i=this.node("exit"),this.next();let r=this.read_exit_expr();return i(r,s)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let s=null,r=null;return i=this.node("yield"),this.next().is("EXPR")&&(s=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(r=s,s=this.next().read_expr())),i(s,r)}case this.tok.T_YIELD_FROM:return i=this.node("yieldfrom"),t=this.next().read_expr(),i(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let s=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(s),this.next()}}if(this.is("VARIABLE")){i=this.node(),t=this.read_variable(!1,!1);let s=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return s&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,t):i("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return s&&this.error("VARIABLE"),this.next(),i("post","+",t);case this.tok.T_DEC:return s&&this.error("VARIABLE"),this.next(),i("post","-",t);default:i.destroy(t)}}else if(this.is("SCALAR")){if(i=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let s=this.convertToList(t);t.loc&&(s.loc=t.loc);let r=this.next().read_expr();return i("assign",s,r,"=")}else i.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(i){let t=i.items.map(s=>(s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=this.convertToList(s.value)),s)),e=this.node("list")(t,!0);return i.loc&&(e.loc=i.loc),i.leadingComments&&(e.leadingComments=i.leadingComments),i.trailingComments&&(e.trailingComments=i.trailingComments),e},read_assignref:function(i,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),i("assignref",t,e)},read_inline_function:function(i,t){if(this.token===this.tok.T_FUNCTION){let E=this.read_function(!0,i,t);return E.attrGroups=t,E}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let s=this.is_reference();this.expect("(")&&this.next();let r=this.read_parameter_list();this.expect(")")&&this.next();let h=!1,l=null;this.token===":"&&(this.next().token==="?"&&(h=!0,this.next()),l=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let c=this.read_expr(),f=e(r,s,c,l,h,!!i);return f.attrGroups=t,f},read_match_expression:function(){let i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),i(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute(){let i=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(i,t)},read_attr_list(){let i=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());i.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){let i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[],e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let r=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let h=this.read_extends_from(),l=this.read_implements_list(),c=null;this.expect("{")&&(c=this.next().read_class_body(!0,!1));let f=r(null,h,l,c,[0,0,0]);return f.attrGroups=e,i(f,t)}let s=this.read_new_class_name();for(;this.token==="[";){let r=this.node("offsetlookup"),h=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),s=r(s,h)}return this.token==="("&&(t=this.read_argument_list()),i(s,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else if(this.token==="(")i=this.node("call")(i,this.read_argument_list());else return i;return i}}});var Xc=H((PA,Jc)=>{"use strict";Jc.exports={read_enum_declaration_statement:function(i){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_enum_value_type(),h=this.read_implements_list();this.expect("{");let l=this.next().read_class_body(!1,!0),c=t(e,r,h,l);return i&&(c.attrGroups=i),c},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let i=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let s=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(t,s)}}});var tf=H((DA,Zc)=>{"use strict";Zc.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(i,t,e,s){let r=this.read_function_declaration(i?1:t?2:0,t&&t[1]===1,e||[],s);return t&&t[2]==1?(r.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(r.body=this.read_code_block(!1),r.loc&&r.body.loc&&(r.loc.end=r.body.loc.end)),!i&&t&&r.parseFlags(t)),r},read_function_declaration:function(i,t,e,s){let r="function";i===1?r="closure":i===2&&(r="method");let h=this.node(r);this.expect(this.tok.T_FUNCTION)&&this.next();let l=this.is_reference(),c=!1,f=[],E=null,k=!1;if(i!==1){let y=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(c=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(c=this.text()),this.next()),c=y(c)}this.expect("(")&&this.next();let U=this.read_parameter_list(c.name==="__construct");this.expect(")")&&this.next(),i===1&&(f=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(k=!0,this.next()),E=this.read_types());let b=y=>(y.attrGroups=e||[],s&&y.loc&&(y.loc.start=s,y.loc.source&&(y.loc.source=this.lexer._input.substr(y.loc.start.offset,y.loc.end.offset-y.loc.start.offset))),y);return b(i===1?h(U,l,f,E,k,t):h(c,U,l,E,k))},read_lexical_vars:function(){let i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){let t=[];for(;this.token!=this.EOF;)if(t.push(i()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let i=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),i(t,!1)},read_parameter_list:function(i){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(i);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(i){let t=this.node("parameter"),e=null,s=null,r=null,h=!1,l=!1,c=[];this.token===this.tok.T_ATTRIBUTE&&(c=this.read_attr_list());let f=this.read_promoted();this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),h=!0),r=this.read_types(),h&&!r&&this.raiseError("Expecting a type definition combined with nullable operator");let E=this.is_reference(),k=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let b=this.text().substring(1);this.next(),e=e(b)}this.token=="="&&(s=this.next().read_expr());let U=t(e,r,s,E,k,l,h,f);return c&&(U.attrGroups=c),U},read_types(){let i="unset",t="union",e="intersection",s=[],r=i,h=this.read_type();if(!h)return null;for(s.push(h);this.token==="|"||this.version>=801&&this.token==="&";){let l=this.peek();if(l===this.tok.T_ELLIPSIS||l===this.tok.T_VARIABLE)break;r===i?r=this.token==="|"?t:e:(r===t&&this.token!=="|"||r===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),s.push(this.read_type())}return s.length===1?s[0]:r===e?this.node("intersectiontype")(s):this.node("uniontype")(s)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){let i=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";i&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(i=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),i("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?i("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}}});var nf=H((RA,ef)=>{"use strict";ef.exports={read_if:function(){let i=this.node("if"),t=this.next().read_if_expr(),e=null,s=null,r=!1;if(this.token===":"){r=!0,this.next(),e=this.node("block");let h=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}h.push(this.read_inner_statement())}e=e(null,h),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?s=this.read_if():this.token===this.tok.T_ELSE&&(s=this.next().read_statement());return i(t,e,s,r)},read_if_expr:function(){this.expect("(")&&this.next();let i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){let i=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let s=this.node("block"),r=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}r.push(this.read_inner_statement())}return t(e,s(null,r),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let i=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return i(null,t)}}});var rf=H((wA,sf)=>{"use strict";sf.exports={read_while:function(){let i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,s=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(s=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),i(t,e,s)},read_do:function(){let i=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(t,e)},read_for:function(){let i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],s=[],r=null,h=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(s=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOR)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach:function(){let i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,s=null,r=null,h=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),s=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=s,s=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOREACH)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let i=this.token==="[",t=this.node("list");this.next(),!i&&this.expect("(")&&this.next();let e=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),t(e,i)}else return this.read_variable(!1,!1)}}});var af=H((FA,of)=>{"use strict";of.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var lf=H((BA,hf)=>{"use strict";hf.exports={read_namespace:function(){let i=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(i){let t=this.node(),e,s=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,s=s.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(s.toLowerCase()==="parent")return t("parentreference",s);if(s.toLowerCase()==="self")return t("selfreference",s)}return t("name",s,e)},read_use_statement:function(){let i=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let s=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(s===null),this.expect("}")&&this.next()),i=i(e,s,t),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){let t=this.node("useitem"),e=null;i&&(e=this.read_use_type());let s=this.read_namespace_name(),r=this.read_use_alias();return t(s.name,r,e)},read_use_declarations:function(i){let t=[this.read_use_declaration(i)];for(;this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(i))}return t},read_use_alias:function(){let i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),i=t(e)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var ff=H((UA,cf)=>{"use strict";var uf={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};cf.exports={resolve_special_chars:function(i,t){return t?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,s,r)=>uf[s]?uf[s]:s[0]==="x"||s[0]==="X"?String.fromCodePoint(parseInt(s.substr(1),16)):s[0]==="u"?String.fromCodePoint(parseInt(r,16)):String.fromCodePoint(parseInt(s,8))):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,t,e,s){if(t===0)return i;this.check_heredoc_indentation_level(i,t,e,s);let r=e?" ":"	",h=new RegExp(`\\n${r}{${t}}`,"g"),l=new RegExp(`^${r}{${t}}`);return s&&(i=i.replace(l,"")),i.replace(h,`
`)},check_heredoc_indentation_level:function(i,t,e,s){let r=i.length,h=0,l=0,c=!0,f=e?" ":"	",E=!1;if(!s){if(h=i.indexOf(`
`),h===-1)return;h++}for(;h<r;)c?i[h]===f?l++:E=!0:c=!1,i[h]!==`
`&&E&&l<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):E=!1,i[h]===`
`&&(c=!0,l=0),h++},read_dereferencable_scalar:function(){let i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),s=0;(e[0]==="b"||e[0]==="B")&&(s=1);let r=e[s]==='"';this.next();let h=this.resolve_special_chars(e.substring(s+1,e.length-1),r);t=t(r,h,s===1,e),this.token===this.tok.T_DOUBLE_COLON?i=this.read_static_getter(t):i=t}break;case this.tok.T_ARRAY:i=this.read_array();break;case"[":i=this.read_array();break}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let i,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return i=this.text(),this.next(),e(i,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));let s=i[i.length-1];s===`
`?i[i.length-2]==="\r"?i=i.substring(0,i.length-2):i=i.substring(0,i.length-1):s==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let r=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),r,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(i){let t,e,s=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=s(i,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=s(i,e)),t},read_encapsed_string_item:function(i){let t=this.node("encapsedpart"),e=null,s=!1,r=this.node(),h,l,c;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let f=this.text();this.next(),r=r("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(f,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):f,!1,f)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",s=!0,c=null,this.next().token===this.tok.T_STRING_VARNAME){c=this.node("variable");let f=this.text();this.next(),r.destroy(),this.token==="["?(c=c(f,!1),l=this.node("offsetlookup"),h=this.next().read_expr(),this.expect("]")&&this.next(),r=l(c,h)):r=c(f,!1)}else r=r("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",r.destroy(),r=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",r.destroy(),r=this.read_simple_variable(),this.token==="["&&(l=this.node("offsetlookup"),h=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),r=l(r,h)),this.token===this.tok.T_OBJECT_OPERATOR){l=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let f=this.node("identifier");c=this.text(),this.next(),r=l(r,f(c))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let f=this.text();this.next(),r.destroy(),r=r("string",!1,f,!1,f)}return this.lexer.heredoc_label.first_encaps_node=!1,t(r,e,s)},read_encapsed_string:function(i,t=!1){let e=this.lexer.yylloc.first_offset,s=this.node("encapsed");this.next();let r=this.lexer.yylloc.prev_offset-(t?1:0),h=[],l=null;for(i==="`"?l=this.ast.encapsed.TYPE_SHELL:i==='"'?l=this.ast.encapsed.TYPE_STRING:l=this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)h.push(this.read_encapsed_string_item(!0));if(h.length>0&&h[h.length-1].kind==="encapsedpart"&&h[h.length-1].expression.kind==="string"){let f=h[h.length-1].expression,E=f.value[f.value.length-1];E===`
`?f.value[f.value.length-2]==="\r"?f.value=f.value.substring(0,f.value.length-2):f.value=f.value.substring(0,f.value.length-1):E==="\r"&&(f.value=f.value.substring(0,f.value.length-1))}this.expect(i)&&this.next();let c=this.lexer._input.substring(l==="heredoc"?e:r-1,this.lexer.yylloc.first_offset);return s=s(h,c,l),i===this.tok.T_END_HEREDOC&&(s.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),s},get_magic_constant:function(){let i=this.node("magic"),t=this.text();return this.next(),i(t.toUpperCase(),t)}}});var pf=H((MA,df)=>{"use strict";df.exports={read_top_statements:function(){let i=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_top_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let i=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let i=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?i(t,this.next().read_expr()):i(t,null)},",",!1)},read_declare_list:function(){let i=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=null;if(this.expect("=")&&(r=this.next().read_expr()),i.push(t(e,r)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=i,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let i=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_GLOBAL:{let i=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),i(t)}case this.tok.T_STATIC:{let i=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(i);let s=this.next().read_expr();return this.expectEndOfStatement(s),t("expressionstatement",s)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let i=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",s=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),i(s,e)}case this.tok.T_INLINE_HTML:{let i=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let s=this.node("inline");return this.next(),s(i,e?t+i:i)}case this.tok.T_UNSET:{let i=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),i(t)}case this.tok.T_DECLARE:{let i=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let s=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return i(s,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let i=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),i(t)}case";":return this.next(),null;case this.tok.T_STRING:{let i=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),s=this.node("identifier");if(this.next().token===":")return s=s(e),this.next(),i("label",s);s.destroy(),i.destroy(),this.lexer.tokens.push(t);let r=this.node("expressionstatement"),h=this.next().read_expr();return this.expectEndOfStatement(h),r(h)}case this.tok.T_GOTO:{let i=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return i(t)}default:{let i=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),i(t)}}},read_code_block:function(i){let t=this.node("block");this.expect("{")&&this.next();let e=i?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var mf=H((HA,_f)=>{"use strict";_f.exports={read_switch:function(){let i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",s=this.read_switch_case_list();return i(t,s,e)},read_switch_case_list:function(){let i=null,t=this.node("block"),e=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)e.push(this.read_case_list(i));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(i){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let s=this.node("block"),r=[];for(;this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)r.push(this.read_inner_statement());return t(e,s(null,r))}}});var gf=H((GA,Tf)=>{"use strict";Tf.exports={read_try:function(){this.expect(this.tok.T_TRY);let i=this.node("try"),t=null,e=[],s=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let r=this.node("catch");this.next().expect("(")&&this.next();let h=this.read_list(this.read_namespace_name,"|",!1),l=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(l=this.read_variable(!0,!1)),this.expect(")"),e.push(r(this.next().read_statement(),h,l))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),i(s,e,t)}}});var kf=H((VA,Ef)=>{"use strict";Ef.exports={read_short_form:function(i){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(i,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(i.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(i,t,e){let s=[];if(this.token==t&&(e&&s.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{let r=i.apply(this,[]);if(r&&s.push(r),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(i))s.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=i);)s.push(this.text())}return s},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){let t=this.node("byref");this.next(),t=t(null);let e=i();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let i=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?i(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var vf=H((qA,xf)=>{"use strict";xf.exports={read_variable:function(i,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let s=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(s.kind)===-1){let r=s.name.toLowerCase();r==="true"?e=s.destroy(e("boolean",!0,s.name)):r==="false"?e=s.destroy(e("boolean",!1,s.name)):r==="null"?e=s.destroy(e("nullkeyword",s.name)):(e.destroy(s),e=s)}else e.destroy(s),e=s}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,i,t)},read_static_getter:function(i,t){let e=this.node("staticlookup"),s,r;return this.next().is([this.tok.T_VARIABLE,"$"])?s=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(s=this.node("identifier"),r=this.text(),this.next(),s=s(r)):this.token==="{"?(s=this.node("literal"),r=this.next().read_expr(),this.expect("}")&&this.next(),s=s("literal",r,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),s=this.node("identifier"),r=this.text(),this.next(),s=s(r)),e(i,s)},read_what:function(i=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(i,t,e){let s,r;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":{let l=this.token==="[";s=this.node("offsetlookup"),this.next(),r=!1,e?(r=this.read_encaps_var_offset(),this.expect(l?"]":"}")&&this.next()):(l?this.token!=="]":this.token!=="}")?(r=this.read_expr(),this.expect(l?"]":"}")&&this.next()):this.next(),i=s(i,r);break}case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),s=this.node("staticlookup"),i=s(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{s=this.node("propertylookup"),i=s(i,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{s=this.node("nullsafepropertylookup"),i=s(i,this.read_what());break}default:break t}return i},read_encaps_var_offset:function(){let i=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),i=i("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),i=i("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),i=i("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),i=i("identifier",t)}return i},read_reference_variable:function(i){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let s=this.node();if(this.token=="{"&&!i)e=this.next().read_expr(),this.expect("}")&&this.next(),t=s("offsetlookup",t,e);else{s.destroy();break}}return t},read_simple_variable:function(){let i=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),i=i(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),i=i(e,!0);break}case"$":i=i(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),i=i(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),i=i(t,!1)}return i}}});var Cf=H((WA,yf)=>{"use strict";var kb=wa();function Ba(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}var ai=function(i,t){this.lexer=i,this.ast=t,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(s){return[s,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};ai.prototype.getTokenName=function(i){return Ba(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"};ai.prototype.parse=function(i,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),s=[];for(this.next();this.token!=this.EOF;)s.push(this.read_start());s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let r=e(s,this._errors,this._docs,this._tokens);if(this.debug){let h=this.ast.checkNodes();if(h.length>0)throw h.forEach(function(l){l.position&&console.log("Node at line "+l.position.line+", column "+l.position.column),console.log(l.stack.join(`
`))}),new Error("Some nodes are not closed")}return r};ai.prototype.raiseError=function(i,t,e,s){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let h=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw h.lineNumber=this.lexer.yylloc.first_line,h.fileName=this.filename,h.columnNumber=this.lexer.yylloc.first_column,h}let r=this.ast.prepare("error",null,this)(i,s,this.lexer.yylloc.first_line,e);return this._errors.push(r),r};ai.prototype.error=function(i){let t="Parse Error : syntax error",e=this.getTokenName(this.token),s="";if(this.token!==this.EOF){if(Ba(this.token)){let r=this.text();r.length>10&&(r=r.substring(0,7)+"..."),e="'"+r+"' ("+e+")"}t+=", unexpected "+e}return i&&!Array.isArray(i)&&((Ba(i)||i.length===1)&&(s=", expecting "+this.getTokenName(i)),t+=s),this.raiseError(t,s,i,e)};ai.prototype.position=function(){return new kb(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};ai.prototype.node=function(i){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(t)));let e=this.ast.prepare(i,t,this);return e.postBuild=function(s){if(this._docIndex<this._docs.length)if(this._lastNode){let r=this.prev[2],h=this._docIndex;for(;h<this._docs.length&&!(this._docs[h].offset>r);h++);h>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,h)),this._docIndex=h)}else this.token===this.EOF&&(s.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=s}.bind(this),e}return this.ast.prepare(i,null,this)};ai.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var Fa=["parser.next","parser.node","parser.showlog"];ai.prototype.showlog=function(){let i=new Error().stack.split(`
`),t;for(let e=2;e<i.length;e++){t=i[e].trim();let s=!1;for(let r=0;r<Fa.length;r++)if(t.substring(3,3+Fa[r].length)===Fa[r]){s=!0;break}if(!s)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};ai.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0};ai.prototype.text=function(){return this.lexer.yytext};ai.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};ai.prototype.peek=function(){let i=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(i),t};ai.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let i=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?i=[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:i=[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};ai.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)};[Wc(),Qc(),Kc(),$c(),Xc(),tf(),nf(),rf(),af(),lf(),ff(),pf(),mf(),gf(),kf(),vf()].forEach(function(i){for(let t in i){if(Object.prototype.hasOwnProperty.call(ai.prototype,t))throw new Error("Function "+t+" is already defined - collision");ai.prototype[t]=i[t]}});yf.exports=ai});var bf=H((YA,Nf)=>{"use strict";var xb={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE",239:"T_ENUM",240:"T_READ_ONLY",241:"T_NAME_RELATIVE",242:"T_NAME_QUALIFIED",243:"T_NAME_FULLY_QUALIFIED"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243}};Nf.exports=Object.freeze(xb)});var If=H((QA,Af)=>{"use strict";var vb=function(i,t,e){this.source=i,this.start=t,this.end=e};Af.exports=vb});var Ge=H((jA,Sf)=>{"use strict";var sr=function(t,e,s){this.kind=t,e&&(this.leadingComments=e),s&&(this.loc=s)};sr.prototype.setTrailingComments=function(i){this.trailingComments=i};sr.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i};sr.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this};sr.extends=function(i,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=i,t};Sf.exports=sr});var ce=H((KA,Pf)=>{"use strict";var Of=Ge(),Lf="expression";Pf.exports=Of.extends(Lf,function(t,e,s){Of.apply(this,[t||Lf,e,s])})});var Ff=H((zA,wf)=>{"use strict";var Df=ce(),Rf="array";wf.exports=Df.extends(Rf,function(t,e,s,r){Df.apply(this,[Rf,s,r]),this.items=e,this.shortForm=t})});var Hf=H(($A,Mf)=>{"use strict";var Bf=ce(),Uf="arrowfunc";Mf.exports=Bf.extends(Uf,function(t,e,s,r,h,l,c,f){Bf.apply(this,[Uf,c,f]),this.arguments=t,this.byref=e,this.body=s,this.type=r,this.nullable=h,this.isStatic=l||!1})});var Wf=H((JA,qf)=>{"use strict";var Gf=ce(),Vf="assign";qf.exports=Gf.extends(Vf,function(t,e,s,r,h){Gf.apply(this,[Vf,r,h]),this.left=t,this.right=e,this.operator=s})});var Kf=H((XA,jf)=>{"use strict";var Yf=ce(),Qf="assignref";jf.exports=Yf.extends(Qf,function(t,e,s,r){Yf.apply(this,[Qf,s,r]),this.left=t,this.right=e})});var Xf=H((ZA,Jf)=>{"use strict";var zf=Ge(),$f="attribute";Jf.exports=zf.extends($f,function(t,e,s,r){zf.apply(this,[$f,s,r]),this.name=t,this.args=e})});var id=H((tI,ed)=>{"use strict";var Zf=Ge(),td="attrgroup";ed.exports=Zf.extends(td,function(t,e,s){Zf.apply(this,[td,e,s]),this.attrs=t||[]})});var ps=H((eI,rd)=>{"use strict";var nd=ce(),sd="operation";rd.exports=nd.extends(sd,function(t,e,s){nd.apply(this,[t||sd,e,s])})});var ld=H((iI,hd)=>{"use strict";var od=ps(),ad="bin";hd.exports=od.extends(ad,function(t,e,s,r,h){od.apply(this,[ad,r,h]),this.type=t,this.left=e,this.right=s})});var me=H((nI,fd)=>{"use strict";var ud=Ge(),cd="statement";fd.exports=ud.extends(cd,function(t,e,s){ud.apply(this,[t||cd,e,s])})});var rr=H((sI,_d)=>{"use strict";var dd=me(),pd="block";_d.exports=dd.extends(pd,function(t,e,s,r){dd.apply(this,[t||pd,s,r]),this.children=e.filter(Boolean)})});var Nn=H((rI,gd)=>{"use strict";var md=ce(),Td="literal";gd.exports=md.extends(Td,function(t,e,s,r,h){md.apply(this,[t||Td,r,h]),this.value=e,s&&(this.raw=s)})});var vd=H((oI,xd)=>{"use strict";var Ed=Nn(),kd="boolean";xd.exports=Ed.extends(kd,function(t,e,s,r){Ed.apply(this,[kd,t,e,s,r])})});var bd=H((aI,Nd)=>{"use strict";var yd=me(),Cd="break";Nd.exports=yd.extends(Cd,function(t,e,s){yd.apply(this,[Cd,e,s]),this.level=t})});var Od=H((hI,Sd)=>{"use strict";var Ad=ce(),Id="byref";Sd.exports=Ad.extends(Id,function(t,e,s){Ad.apply(this,[Id,e,s]),this.what=t})});var Rd=H((lI,Dd)=>{"use strict";var Ld=ce(),Pd="call";Dd.exports=Ld.extends(Pd,function(t,e,s,r){Ld.apply(this,[Pd,s,r]),this.what=t,this.arguments=e})});var Ud=H((uI,Bd)=>{"use strict";var wd=me(),Fd="case";Bd.exports=wd.extends(Fd,function(t,e,s,r){wd.apply(this,[Fd,s,r]),this.test=t,this.body=e})});var Vd=H((cI,Gd)=>{"use strict";var Md=ps(),Hd="cast";Gd.exports=Md.extends(Hd,function(t,e,s,r,h){Md.apply(this,[Hd,r,h]),this.type=t,this.raw=e,this.expr=s})});var Qd=H((fI,Yd)=>{"use strict";var qd=me(),Wd="catch";Yd.exports=qd.extends(Wd,function(t,e,s,r,h){qd.apply(this,[Wd,r,h]),this.body=t,this.what=e,this.variable=s})});var an=H((dI,$d)=>{"use strict";var jd=me(),Kd="declaration",yb="",Cb="public",Nb="protected",bb="private",zd=jd.extends(Kd,function(t,e,s,r){jd.apply(this,[t||Kd,s,r]),this.name=e});zd.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.kind!=="class"&&(i[0]===-1?this.visibility=yb:i[0]===null?this.visibility=null:i[0]===0?this.visibility=Cb:i[0]===1?this.visibility=Nb:i[0]===2&&(this.visibility=bb),this.isStatic=i[1]===1)};$d.exports=zd});var tp=H((pI,Zd)=>{"use strict";var Jd=an(),Xd="class";Zd.exports=Jd.extends(Xd,function(t,e,s,r,h,l,c){Jd.apply(this,[Xd,t,l,c]),this.isAnonymous=!t,this.extends=e,this.implements=s,this.body=r,this.attrGroups=[],this.parseFlags(h)})});var Ua=H((_I,np)=>{"use strict";var ep=me(),ip="constantstatement";np.exports=ep.extends(ip,function(t,e,s,r){ep.apply(this,[t||ip,s,r]),this.constants=e})});var hp=H((mI,ap)=>{"use strict";var sp=Ua(),rp="classconstant",Ab="",Ib="public",Sb="protected",Ob="private",op=sp.extends(rp,function(t,e,s,r,h,l){sp.apply(this,[t||rp,e,h,l]),this.parseFlags(s),this.attrGroups=r});op.prototype.parseFlags=function(i){i[0]===-1?this.visibility=Ab:i[0]===null?this.visibility=null:i[0]===0?this.visibility=Ib:i[0]===1?this.visibility=Sb:i[0]===2&&(this.visibility=Ob)};ap.exports=op});var fp=H((TI,cp)=>{"use strict";var lp=ce(),up="clone";cp.exports=lp.extends(up,function(t,e,s){lp.apply(this,[up,e,s]),this.what=t})});var mp=H((gI,_p)=>{"use strict";var dp=ce(),pp="closure";_p.exports=dp.extends(pp,function(t,e,s,r,h,l,c,f){dp.apply(this,[pp,c,f]),this.uses=s,this.arguments=t,this.byref=e,this.type=r,this.nullable=h,this.isStatic=l||!1,this.body=null,this.attrGroups=[]})});var oo=H((EI,gp)=>{"use strict";var Tp=Ge();gp.exports=Tp.extends("comment",function(t,e,s,r){Tp.apply(this,[t,s,r]),this.value=e})});var vp=H((kI,xp)=>{"use strict";var Ep=oo(),kp="commentblock";xp.exports=Ep.extends(kp,function(t,e,s){Ep.apply(this,[kp,t,e,s])})});var bp=H((xI,Np)=>{"use strict";var yp=oo(),Cp="commentline";Np.exports=yp.extends(Cp,function(t,e,s){yp.apply(this,[Cp,t,e,s])})});var Op=H((vI,Sp)=>{"use strict";var Ap=Ge(),Ip="constant";Sp.exports=Ap.extends(Ip,function(t,e,s,r){Ap.apply(this,[Ip,s,r]),this.name=t,this.value=e})});var Rp=H((yI,Dp)=>{"use strict";var Lp=me(),Pp="continue";Dp.exports=Lp.extends(Pp,function(t,e,s){Lp.apply(this,[Pp,e,s]),this.level=t})});var Up=H((CI,Bp)=>{"use strict";var wp=rr(),Fp="declare",ao=wp.extends(Fp,function(t,e,s,r,h){wp.apply(this,[Fp,e,r,h]),this.directives=t,this.mode=s});ao.MODE_SHORT="short";ao.MODE_BLOCK="block";ao.MODE_NONE="none";Bp.exports=ao});var Vp=H((NI,Gp)=>{"use strict";var Mp=Ge(),Hp="declaredirective";Gp.exports=Mp.extends(Hp,function(t,e,s,r){Mp.apply(this,[Hp,s,r]),this.key=t,this.value=e})});var Qp=H((bI,Yp)=>{"use strict";var qp=me(),Wp="do";Yp.exports=qp.extends(Wp,function(t,e,s,r){qp.apply(this,[Wp,s,r]),this.test=t,this.body=e})});var $p=H((AI,zp)=>{"use strict";var jp=me(),Kp="echo";zp.exports=jp.extends(Kp,function(t,e,s,r){jp.apply(this,[Kp,s,r]),this.shortForm=e,this.expressions=t})});var t_=H((II,Zp)=>{"use strict";var Jp=ce(),Xp="empty";Zp.exports=Jp.extends(Xp,function(t,e,s){Jp.apply(this,[Xp,e,s]),this.expression=t})});var s_=H((SI,n_)=>{"use strict";var e_=Nn(),i_="encapsed",or=e_.extends(i_,function(t,e,s,r,h){e_.apply(this,[i_,t,e,r,h]),this.type=s});or.TYPE_STRING="string";or.TYPE_SHELL="shell";or.TYPE_HEREDOC="heredoc";or.TYPE_OFFSET="offset";n_.exports=or});var h_=H((OI,a_)=>{"use strict";var r_=ce(),o_="encapsedpart";a_.exports=r_.extends(o_,function(t,e,s,r,h){r_.apply(this,[o_,r,h]),this.expression=t,this.syntax=e,this.curly=s})});var f_=H((LI,c_)=>{"use strict";var l_=ce(),u_="entry";c_.exports=l_.extends(u_,function(t,e,s,r,h,l){l_.apply(this,[u_,h,l]),this.key=t,this.value=e,this.byRef=s,this.unpack=r})});var m_=H((PI,__)=>{"use strict";var d_=an(),p_="enum";__.exports=d_.extends(p_,function(t,e,s,r,h,l){d_.apply(this,[p_,t,h,l]),this.valueType=e,this.implements=s,this.body=r,this.attrGroups=[]})});var k_=H((DI,E_)=>{"use strict";var T_=Ge(),g_="enumcase";E_.exports=T_.extends(g_,function(t,e,s,r){T_.apply(this,[g_,s,r]),this.name=t,this.value=e})});var C_=H((RI,y_)=>{"use strict";var x_=Ge(),v_="error";y_.exports=x_.extends(v_,function(t,e,s,r,h,l){x_.apply(this,[v_,h,l]),this.message=t,this.token=e,this.line=s,this.expected=r})});var I_=H((wI,A_)=>{"use strict";var N_=ce(),b_="eval";A_.exports=N_.extends(b_,function(t,e,s){N_.apply(this,[b_,e,s]),this.source=t})});var P_=H((FI,L_)=>{"use strict";var S_=ce(),O_="exit";L_.exports=S_.extends(O_,function(t,e,s,r){S_.apply(this,[O_,s,r]),this.expression=t,this.useDie=e})});var F_=H((BI,w_)=>{"use strict";var D_=me(),R_="expressionstatement";w_.exports=D_.extends(R_,function(t,e,s){D_.apply(this,[R_,e,s]),this.expression=t})});var H_=H((UI,M_)=>{"use strict";var B_=me(),U_="for";M_.exports=B_.extends(U_,function(t,e,s,r,h,l,c){B_.apply(this,[U_,l,c]),this.init=t,this.test=e,this.increment=s,this.shortForm=h,this.body=r})});var W_=H((MI,q_)=>{"use strict";var G_=me(),V_="foreach";q_.exports=G_.extends(V_,function(t,e,s,r,h,l,c){G_.apply(this,[V_,l,c]),this.source=t,this.key=e,this.value=s,this.shortForm=h,this.body=r})});var Ma=H((HI,j_)=>{"use strict";var Y_=an(),Q_="function";j_.exports=Y_.extends(Q_,function(t,e,s,r,h,l,c){Y_.apply(this,[Q_,t,l,c]),this.arguments=e,this.byref=s,this.type=r,this.nullable=h,this.body=null,this.attrGroups=[]})});var J_=H((GI,$_)=>{"use strict";var K_=me(),z_="global";$_.exports=K_.extends(z_,function(t,e,s){K_.apply(this,[z_,e,s]),this.items=t})});var em=H((VI,tm)=>{"use strict";var X_=me(),Z_="goto";tm.exports=X_.extends(Z_,function(t,e,s){X_.apply(this,[Z_,e,s]),this.label=t})});var rm=H((qI,sm)=>{"use strict";var im=me(),nm="halt";sm.exports=im.extends(nm,function(t,e,s){im.apply(this,[nm,e,s]),this.after=t})});var lm=H((WI,hm)=>{"use strict";var om=Ge(),am="identifier",Lb=om.extends(am,function(t,e,s){om.apply(this,[am,e,s]),this.name=t});hm.exports=Lb});var dm=H((YI,fm)=>{"use strict";var um=me(),cm="if";fm.exports=um.extends(cm,function(t,e,s,r,h,l){um.apply(this,[cm,h,l]),this.test=t,this.body=e,this.alternate=s,this.shortForm=r})});var Tm=H((QI,mm)=>{"use strict";var pm=ce(),_m="include";mm.exports=pm.extends(_m,function(t,e,s,r,h){pm.apply(this,[_m,r,h]),this.once=t,this.require=e,this.target=s})});var xm=H((jI,km)=>{"use strict";var gm=Nn(),Em="inline";km.exports=gm.extends(Em,function(t,e,s,r){gm.apply(this,[Em,t,e,s,r])})});var Nm=H((KI,Cm)=>{"use strict";var vm=an(),ym="interface";Cm.exports=vm.extends(ym,function(t,e,s,r,h,l){vm.apply(this,[ym,t,h,l]),this.extends=e,this.body=s,this.attrGroups=r})});var Sm=H((zI,Im)=>{"use strict";var bm=an(),Am="intersectiontype";Im.exports=bm.extends(Am,function(t,e,s){bm.apply(this,[Am,null,e,s]),this.types=t})});var Dm=H(($I,Pm)=>{"use strict";var Om=ce(),Lm="isset";Pm.exports=Om.extends(Lm,function(t,e,s){Om.apply(this,[Lm,e,s]),this.variables=t})});var Bm=H((JI,Fm)=>{"use strict";var Rm=me(),wm="label";Fm.exports=Rm.extends(wm,function(t,e,s){Rm.apply(this,[wm,e,s]),this.name=t})});var Gm=H((XI,Hm)=>{"use strict";var Um=ce(),Mm="list";Hm.exports=Um.extends(Mm,function(t,e,s,r){Um.apply(this,[Mm,s,r]),this.items=t,this.shortForm=e})});var Fs=H((ZI,Wm)=>{"use strict";var Vm=ce(),qm="lookup";Wm.exports=Vm.extends(qm,function(t,e,s,r,h){Vm.apply(this,[t||qm,r,h]),this.what=e,this.offset=s})});var Km=H((tS,jm)=>{"use strict";var Ym=Nn(),Qm="magic";jm.exports=Ym.extends(Qm,function(t,e,s,r){Ym.apply(this,[Qm,t,e,s,r])})});var Xm=H((eS,Jm)=>{"use strict";var zm=ce(),$m="match";Jm.exports=zm.extends($m,function(t,e,s,r){zm.apply(this,[$m,s,r]),this.cond=t,this.arms=e})});var iT=H((iS,eT)=>{"use strict";var Zm=ce(),tT="matcharm";eT.exports=Zm.extends(tT,function(t,e,s,r){Zm.apply(this,[tT,s,r]),this.conds=t,this.body=e})});var oT=H((nS,rT)=>{"use strict";var nT=Ma(),sT="method";rT.exports=nT.extends(sT,function(){nT.apply(this,arguments),this.kind=sT})});var _s=H((sS,lT)=>{"use strict";var aT=Ge(),hT="reference",Pb=aT.extends(hT,function(t,e,s){aT.apply(this,[t||hT,e,s])});lT.exports=Pb});var dT=H((rS,fT)=>{"use strict";var uT=_s(),cT="name",ar=uT.extends(cT,function(t,e,s,r){uT.apply(this,[cT,s,r]),this.name=t.replace(/\\$/,""),this.resolution=e});ar.UNQUALIFIED_NAME="uqn";ar.QUALIFIED_NAME="qn";ar.FULL_QUALIFIED_NAME="fqn";ar.RELATIVE_NAME="rn";fT.exports=ar});var TT=H((oS,mT)=>{"use strict";var pT=rr(),_T="namespace";mT.exports=pT.extends(_T,function(t,e,s,r,h){pT.apply(this,[_T,e,r,h]),this.name=t,this.withBrackets=s||!1})});var xT=H((aS,kT)=>{"use strict";var gT=ce(),ET="namedargument";kT.exports=gT.extends(ET,function(t,e,s,r){gT.apply(this,[ET,s,r]),this.name=t,this.value=e})});var NT=H((hS,CT)=>{"use strict";var vT=ce(),yT="new";CT.exports=vT.extends(yT,function(t,e,s,r){vT.apply(this,[yT,s,r]),this.what=t,this.arguments=e})});var ST=H((lS,IT)=>{"use strict";var bT=Ge(),AT="noop";IT.exports=bT.extends(AT,function(t,e){bT.apply(this,[AT,t,e])})});var DT=H((uS,PT)=>{"use strict";var OT=Nn(),LT="nowdoc";PT.exports=OT.extends(LT,function(t,e,s,r,h){OT.apply(this,[LT,t,e,r,h]),this.label=s})});var BT=H((cS,FT)=>{"use strict";var RT=Ge(),wT="nullkeyword";FT.exports=RT.extends(wT,function(t,e,s){RT.apply(this,[wT,e,s]),this.raw=t})});var GT=H((fS,HT)=>{"use strict";var UT=Fs(),MT="nullsafepropertylookup";HT.exports=UT.extends(MT,function(t,e,s,r){UT.apply(this,[MT,t,e,s,r])})});var YT=H((dS,WT)=>{"use strict";var VT=Nn(),qT="number";WT.exports=VT.extends(qT,function(t,e,s,r){VT.apply(this,[qT,t,e,s,r])})});var zT=H((pS,KT)=>{"use strict";var QT=Fs(),jT="offsetlookup";KT.exports=QT.extends(jT,function(t,e,s,r){QT.apply(this,[jT,t,e,s,r])})});var ZT=H((_S,XT)=>{"use strict";var $T=an(),JT="parameter";XT.exports=$T.extends(JT,function(t,e,s,r,h,l,c,f,E,k){$T.apply(this,[JT,t,E,k]),this.value=s,this.type=e,this.byref=r,this.variadic=h,this.readonly=l,this.nullable=c,this.flags=f||0,this.attrGroups=[]})});var ng=H((mS,ig)=>{"use strict";var tg=_s(),eg="parentreference",Db=tg.extends(eg,function(t,e,s){tg.apply(this,[eg,e,s]),this.raw=t});ig.exports=Db});var ag=H((TS,og)=>{"use strict";var sg=ps(),rg="post";og.exports=sg.extends(rg,function(t,e,s,r){sg.apply(this,[rg,s,r]),this.type=t,this.what=e})});var cg=H((gS,ug)=>{"use strict";var hg=ps(),lg="pre";ug.exports=hg.extends(lg,function(t,e,s,r){hg.apply(this,[lg,s,r]),this.type=t,this.what=e})});var _g=H((ES,pg)=>{"use strict";var fg=ce(),dg="print";pg.exports=fg.extends(dg,function(t,e,s){fg.apply(this,[dg,e,s]),this.expression=t})});var Eg=H((kS,gg)=>{"use strict";var mg=rr(),Tg="program";gg.exports=mg.extends(Tg,function(t,e,s,r,h,l){mg.apply(this,[Tg,t,h,l]),this.errors=e,s&&(this.comments=s),r&&(this.tokens=r)})});var yg=H((xS,vg)=>{"use strict";var kg=me(),xg="property";vg.exports=kg.extends(xg,function(t,e,s,r,h,l,c,f){kg.apply(this,[xg,c,f]),this.name=t,this.value=e,this.readonly=s,this.nullable=r,this.type=h,this.attrGroups=l})});var Ag=H((vS,bg)=>{"use strict";var Cg=Fs(),Ng="propertylookup";bg.exports=Cg.extends(Ng,function(t,e,s,r){Cg.apply(this,[Ng,t,e,s,r])})});var Pg=H((yS,Lg)=>{"use strict";var Ig=me(),Sg="propertystatement",Rb="",wb="public",Fb="protected",Bb="private",Og=Ig.extends(Sg,function(t,e,s,r,h){Ig.apply(this,[Sg,r,h]),this.properties=e,this.parseFlags(s)});Og.prototype.parseFlags=function(i){i[0]===-1?this.visibility=Rb:i[0]===null?this.visibility=null:i[0]===0?this.visibility=wb:i[0]===1?this.visibility=Fb:i[0]===2&&(this.visibility=Bb),this.isStatic=i[1]===1};Lg.exports=Og});var Fg=H((CS,wg)=>{"use strict";var Dg=ce(),Rg="retif";wg.exports=Dg.extends(Rg,function(t,e,s,r,h){Dg.apply(this,[Rg,r,h]),this.test=t,this.trueExpr=e,this.falseExpr=s})});var Hg=H((NS,Mg)=>{"use strict";var Bg=me(),Ug="return";Mg.exports=Bg.extends(Ug,function(t,e,s){Bg.apply(this,[Ug,e,s]),this.expr=t})});var Wg=H((bS,qg)=>{"use strict";var Gg=_s(),Vg="selfreference",Ub=Gg.extends(Vg,function(t,e,s){Gg.apply(this,[Vg,e,s]),this.raw=t});qg.exports=Ub});var Kg=H((AS,jg)=>{"use strict";var Yg=ce(),Qg="silent";jg.exports=Yg.extends(Qg,function(t,e,s){Yg.apply(this,[Qg,e,s]),this.expr=t})});var Xg=H((IS,Jg)=>{"use strict";var zg=me(),$g="static";Jg.exports=zg.extends($g,function(t,e,s){zg.apply(this,[$g,e,s]),this.variables=t})});var iE=H((SS,eE)=>{"use strict";var Zg=Ge(),tE="staticvariable";eE.exports=Zg.extends(tE,function(t,e,s,r){Zg.apply(this,[tE,s,r]),this.variable=t,this.defaultValue=e})});var oE=H((OS,rE)=>{"use strict";var nE=Fs(),sE="staticlookup";rE.exports=nE.extends(sE,function(t,e,s,r){nE.apply(this,[sE,t,e,s,r])})});var uE=H((LS,lE)=>{"use strict";var aE=_s(),hE="staticreference",Mb=aE.extends(hE,function(t,e,s){aE.apply(this,[hE,e,s]),this.raw=t});lE.exports=Mb});var pE=H((PS,dE)=>{"use strict";var cE=Nn(),fE="string";dE.exports=cE.extends(fE,function(t,e,s,r,h,l){cE.apply(this,[fE,e,r,h,l]),this.unicode=s,this.isDoubleQuote=t})});var gE=H((DS,TE)=>{"use strict";var _E=me(),mE="switch";TE.exports=_E.extends(mE,function(t,e,s,r,h){_E.apply(this,[mE,r,h]),this.test=t,this.body=e,this.shortForm=s})});var vE=H((RS,xE)=>{"use strict";var EE=me(),kE="throw";xE.exports=EE.extends(kE,function(t,e,s){EE.apply(this,[kE,e,s]),this.what=t})});var bE=H((wS,NE)=>{"use strict";var yE=an(),CE="trait";NE.exports=yE.extends(CE,function(t,e,s,r){yE.apply(this,[CE,t,s,r]),this.body=e})});var OE=H((FS,SE)=>{"use strict";var AE=Ge(),IE="traitalias",Hb="",Gb="public",Vb="protected",qb="private";SE.exports=AE.extends(IE,function(t,e,s,r,h,l){AE.apply(this,[IE,h,l]),this.trait=t,this.method=e,this.as=s,this.visibility=Hb,r&&(r[0]===0?this.visibility=Gb:r[0]===1?this.visibility=Vb:r[0]===2&&(this.visibility=qb))})});var RE=H((BS,DE)=>{"use strict";var LE=Ge(),PE="traitprecedence";DE.exports=LE.extends(PE,function(t,e,s,r,h){LE.apply(this,[PE,r,h]),this.trait=t,this.method=e,this.instead=s})});var UE=H((US,BE)=>{"use strict";var wE=Ge(),FE="traituse";BE.exports=wE.extends(FE,function(t,e,s,r){wE.apply(this,[FE,s,r]),this.traits=t,this.adaptations=e})});var VE=H((MS,GE)=>{"use strict";var ME=me(),HE="try";GE.exports=ME.extends(HE,function(t,e,s,r,h){ME.apply(this,[HE,r,h]),this.body=t,this.catches=e,this.always=s})});var jE=H((HS,QE)=>{"use strict";var qE=_s(),WE="typereference",YE=qE.extends(WE,function(t,e,s,r){qE.apply(this,[WE,s,r]),this.name=t,this.raw=e});YE.types=["int","float","string","bool","object","array","callable","iterable","void","static"];QE.exports=YE});var JE=H((GS,$E)=>{"use strict";var KE=ps(),zE="unary";$E.exports=KE.extends(zE,function(t,e,s,r){KE.apply(this,[zE,s,r]),this.type=t,this.what=e})});var ek=H((VS,tk)=>{"use strict";var XE=an(),ZE="uniontype";tk.exports=XE.extends(ZE,function(t,e,s){XE.apply(this,[ZE,null,e,s]),this.types=t})});var rk=H((qS,sk)=>{"use strict";var ik=me(),nk="unset";sk.exports=ik.extends(nk,function(t,e,s){ik.apply(this,[nk,e,s]),this.variables=t})});var lk=H((WS,hk)=>{"use strict";var ok=me(),ak="usegroup";hk.exports=ok.extends(ak,function(t,e,s,r,h){ok.apply(this,[ak,r,h]),this.name=t,this.type=e,this.items=s})});var dk=H((YS,fk)=>{"use strict";var uk=me(),ck="useitem",Ha=uk.extends(ck,function(t,e,s,r,h){uk.apply(this,[ck,r,h]),this.name=t,this.alias=e,this.type=s});Ha.TYPE_CONST="const";Ha.TYPE_FUNCTION="function";fk.exports=Ha});var Tk=H((QS,mk)=>{"use strict";var pk=ce(),_k="variable";mk.exports=pk.extends(_k,function(t,e,s,r){pk.apply(this,[_k,s,r]),this.name=t,this.curly=e||!1})});var xk=H((jS,kk)=>{"use strict";var gk=ce(),Ek="variadic";kk.exports=gk.extends(Ek,function(t,e,s){gk.apply(this,[Ek,e,s]),this.what=t})});var Nk=H((KS,Ck)=>{"use strict";var vk=Ge(),yk="variadicplaceholder";Ck.exports=vk.extends(yk,function(t,e){vk.apply(this,[yk,t,e])})});var Sk=H((zS,Ik)=>{"use strict";var bk=me(),Ak="while";Ik.exports=bk.extends(Ak,function(t,e,s,r,h){bk.apply(this,[Ak,r,h]),this.test=t,this.body=e,this.shortForm=s})});var Dk=H(($S,Pk)=>{"use strict";var Ok=ce(),Lk="yield";Pk.exports=Ok.extends(Lk,function(t,e,s,r){Ok.apply(this,[Lk,s,r]),this.value=t,this.key=e})});var Bk=H((JS,Fk)=>{"use strict";var Rk=ce(),wk="yieldfrom";Fk.exports=Rk.extends(wk,function(t,e,s){Rk.apply(this,[wk,e,s]),this.value=t})});var Mk=H((XS,Uk)=>{"use strict";var Wb=If(),Yb=wa(),fi=function(i,t){this.withPositions=i,this.withSource=t};fi.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,t){i.forEach(function(e){fi.precedence[e]=t+1})});fi.prototype.isRightAssociative=function(i){return i==="**"||i==="??"};fi.prototype.swapLocations=function(i,t,e,s){this.withPositions&&(i.loc.start=t.loc.start,i.loc.end=e.loc.end,this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};fi.prototype.resolveLocations=function(i,t,e,s){this.withPositions&&(i.loc.start.offset>t.loc.start.offset&&(i.loc.start=t.loc.start),i.loc.end.offset<e.loc.end.offset&&(i.loc.end=e.loc.end),this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};fi.prototype.resolvePrecedence=function(i,t){let e,s,r;return i.kind==="call"?this.resolveLocations(i,i.what,i,t):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,t):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(s=fi.precedence[i.type],r=fi.precedence[i.right.type],s&&r&&r<=s&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(e=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e)):i.right.kind==="retif"&&(s=fi.precedence[i.type],r=fi.precedence["?"],s&&r&&r<=s&&(e=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e))):(i.kind==="silent"||i.kind==="cast")&&i.expr&&!i.expr.parenthesizedExpression?i.expr.kind==="bin"?(e=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.expr.kind==="retif"&&(e=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(e=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.what.kind==="retif"&&(e=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(e=i.falseExpr,i.falseExpr=e.test,this.swapLocations(i,i.test,i.falseExpr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(s=fi.precedence["="],r=fi.precedence[i.right.type],s&&r&&r<s&&(e=i.right,i.right=i.right.left,e.left=i,this.swapLocations(e,e.left,i.right,t),i=e)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,t),i};fi.prototype.prepare=function(i,t,e){let s=null;(this.withPositions||this.withSource)&&(s=e.position());let r=this,h=function(){let l=null,c=Array.prototype.slice.call(arguments);if(c.push(t),r.withPositions||r.withSource){let k=null;r.withSource&&(k=e.lexer._input.substring(s.offset,e.prev[2])),l=new Wb(k,s,new Yb(e.prev[0],e.prev[1],e.prev[2])),c.push(l)}i||(i=c.shift());let f=r[i];if(typeof f!="function")throw new Error('Undefined node "'+i+'"');let E=Object.create(f.prototype);return f.apply(E,c),h.instance=E,h.trailingComments&&(E.trailingComments=h.trailingComments),typeof h.postBuild=="function"&&h.postBuild(E),e.debug&&delete r.stack[h.stackUid],r.resolvePrecedence(E,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:s,stack:new Error().stack.split(`
`).slice(3,5)},h.stackUid=this.stackUid),h.setTrailingComments=function(l){h.instance?h.instance.setTrailingComments(l):h.trailingComments=l},h.destroy=function(l){t&&(l?l.leadingComments?l.leadingComments=t.concat(l.leadingComments):l.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete r.stack[h.stackUid]},h};fi.prototype.checkNodes=function(){let i=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,i.push(this.stack[t]));return this.stack={},i};[Ff(),Hf(),Wf(),Kf(),Xf(),id(),ld(),rr(),vd(),bd(),Od(),Rd(),Ud(),Vd(),Qd(),tp(),hp(),fp(),mp(),oo(),vp(),bp(),Op(),Ua(),Rp(),an(),Up(),Vp(),Qp(),$p(),t_(),s_(),h_(),f_(),m_(),k_(),C_(),I_(),P_(),ce(),F_(),H_(),W_(),Ma(),J_(),em(),rm(),lm(),dm(),Tm(),xm(),Nm(),Sm(),Dm(),Bm(),Gm(),Nn(),Fs(),Km(),Xm(),iT(),oT(),dT(),TT(),xT(),NT(),Ge(),ST(),DT(),BT(),GT(),YT(),zT(),ps(),ZT(),ng(),ag(),cg(),_g(),Eg(),yg(),Ag(),Pg(),_s(),Fg(),Hg(),Wg(),Kg(),me(),Xg(),iE(),oE(),uE(),pE(),gE(),vE(),bE(),OE(),RE(),UE(),VE(),jE(),JE(),ek(),rk(),lk(),dk(),Tk(),xk(),Nk(),Sk(),Dk(),Bk()].forEach(function(i){fi.prototype[i.kind]=i});Uk.exports=fi});var qa=H((ZS,bn)=>{"use strict";var Hk=Gc(),Gk=Cf(),Vk=bf(),qk=Mk();function Ga(i,t){let e=Object.keys(i),s=e.length;for(;s--;){let r=e[s],h=i[r];h===null?delete t[r]:typeof h=="function"?t[r]=h.bind(t):Array.isArray(h)?t[r]=Array.isArray(t[r])?t[r].concat(h):h:typeof h=="object"?t[r]=typeof t[r]=="object"?Ga(h,t[r]):h:t[r]=h}return t}var vi=function(i){if(typeof this=="function")return new this(i);if(this.tokens=Vk,this.lexer=new Hk(this),this.ast=new qk,this.parser=new Gk(this.lexer,this.ast),i&&typeof i=="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){let t=i.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+i.parser.version);i.parser.version=t}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Ga(i,this),this.lexer.version=this.parser.version}},Va=function(i){return typeof i.write=="function"?i.toString():i};vi.create=function(i){return new vi(i)};vi.parseEval=function(i,t){return new vi(t).parseEval(i)};vi.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=Va(i),this.parser.parse(i,"eval")};vi.parseCode=function(i,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new vi(e).parseCode(i,t)};vi.prototype.parseCode=function(i,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=Va(i),this.parser.parse(i,t)};vi.tokenGetAll=function(i,t){return new vi(t).tokenGetAll(i)};vi.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=Va(i);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(i);let s=this.lexer.lex()||t,r=[];for(;s!=t;){let h=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,s)&&(h=[e[s],h,this.lexer.yylloc.first_line]),r.push(h),s=this.lexer.lex()||t}return r};bn.exports=vi;bn.exports.tokens=Vk;bn.exports.lexer=Hk;bn.exports.AST=qk;bn.exports.parser=Gk;bn.exports.combine=Ga;bn.exports.Engine=vi;bn.exports.default=vi});var ho,Wk=Pt(()=>{"use strict";ho=class{static pad(t,e,s){let r="";for(let h=0;h<e-1;h++)r+=`
`;return r+=" ".repeat(s),r+=t,r}}});var Yk,lo,Qk=Pt(()=>{"use strict";Yk=rn(qa());Wk();lo=class{constructor(t){this.directive=t}parse(){var s,r,h,l,c,f;let t=new Yk.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),e=ho.pad(this.directive.directiveParameters,(h=(r=(s=this.directive.directiveParametersPosition)==null?void 0:s.start)==null?void 0:r.line)!=null?h:0,(f=(c=(l=this.directive.directiveParametersPosition)==null?void 0:l.start)==null?void 0:c.char)!=null?f:0);return t.parseEval(e)}}});var jk,uo,hn,Kk=Pt(()=>{"use strict";jk=rn(qa()),uo=class{static isValid(t,e=!0){let s=new jk.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?s.parseEval(t):s.parseCode(t,"test.php")}catch(r){return r instanceof SyntaxError&&(uo.lastError=r),!1}return uo.lastError=null,!0}},hn=uo;hn.lastError=null});function zk(){return et.replaceAllInString(mc(),"-","_")}var hr,co,De,ms,fo,An,Te,In,wi,po,_t,Ts,yi,Wi,lr,Yi,gi,jn,Kn,_o,zn,ur,cr,fr,gs,Es,Me=Pt(()=>{"use strict";Tc();Ti();Qk();Kk();hr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=zk()}},co=class{constructor(){this.startPosition=null;this.endPosition=null}},De=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=zk()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,s;return t+((s=(e=this.startPosition)==null?void 0:e.index)!=null?s:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},ms=class extends De{constructor(){super(...arguments);this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1}},fo=class extends De{constructor(){super(...arguments);this.name="";this.inlineName=""}},An=class extends De{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return!0;return!1}getParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return this.parameters[s];return null}getParametersExcept(e){return this.parameters.filter(s=>!e.includes(s.realName))}},Te=class extends De{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=et.replaceAllInString(this.content,"@{","{");return e=et.replaceAllInString(e,"@@","@"),e}},In=class extends De{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},wi=class extends De{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1}hasValidPhp(){return this.cachedHasValidPhp==null&&(this.cachedHasValidPhp=hn.isValid(this.sourceContent,!1),this.cachedPhpLastError=hn.lastError),this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},po=class extends wi{},_t=class extends De{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){return this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null&&(this.cachedHasValidPhp=hn.isValid(this.getPhpContent()),this.cachedPhpLastError=hn.lastError),this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){let e=[];for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r.parent==this){if(r==this.isClosedBy)break;e.push(r)}}return e}php(){return new lo(this)}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof _t&&r.refId==this.isClosedBy.refId)break;e.push(r)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof _t&&r.directiveName==e)return r}return null}findFirstDirectChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof _t&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId)return r}return null}findDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof _t&&r.directiveName==e&&s.push(r)}),s}findDirectChildDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof _t&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId&&s.push(r)}),s}clone(){let e=new _t;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition;let s=this.getParser();return s!=null&&e.withParser(s),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},Ts=class extends De{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},yi=class extends _t{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof _t?this.logicBranches[0].head.parent:null}},Wi=class extends De{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},lr=class extends De{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},Yi=class extends De{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},gi=class extends De{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1}hasValidPhp(){return this.cachedHasValidPhp==null&&(this.cachedHasValidPhp=hn.isValid(this.content),this.cachedPhpLastError=hn.lastError),this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},jn=class extends gi{},Kn=class extends gi{},_o=class extends De{},zn=class extends De{constructor(){super(...arguments);this.tokenLength=0}},ur=class extends De{},cr=class extends De{},fr=class extends De{},gs=class extends De{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},Es=class extends De{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var xt,ks=Pt(()=>{"use strict";xt=class{};xt.Verbatim="verbatim",xt.EndVerbatim="endverbatim",xt.Php="php",xt.EndPhp="endphp",xt.If="if",xt.ElseIf="elseif",xt.Else="else",xt.Unless="unless",xt.ForElse="forelse",xt.EndForElse="endforelse",xt.Switch="switch",xt.EndSwitch="endswitch",xt.Default="default",xt.Case="case"});var Ve,dr=Pt(()=>{"use strict";Me();Ve=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(s=>{if(!(s instanceof _t))return;let r=s;r.directiveName.toLowerCase().startsWith("end")||e.set(r.directiveName.toLowerCase(),1)}),t.forEach(s=>{if(!(s instanceof _t))return;let r=s;if(r.directiveName.toLowerCase().startsWith("unless")){let h=r.directiveName.substring(6);h.length>0&&(this.speculativeConditions.set(r.directiveName,1),this.speculativeEndIfs.set("end"+h,1))}if(this.speculativeEndIfs.has(r.directiveName)&&(r.isClosingDirective=!0),r.directiveName.toLowerCase().startsWith("else")){let h=r.directiveName.substring(4);h!="if"&&h.length>0&&this.speculativeConditions.set(h,1)}if(r.directiveName.toLowerCase().startsWith("end")){let h=r.directiveName.substring(3).toLowerCase();e.has(h)&&(this.possibleClosingNode.set(r.directiveName.toLowerCase(),1),r.isClosingDirective=!0)}})}};Ve.possibleClosingNode=new Map,Ve.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],Ve.customIfs=new Map,Ve.speculativeConditions=new Map,Ve.speculativeEndIfs=new Map});var mo,$k=Pt(()=>{"use strict";Me();ks();dr();mo=class{static getNewName(t){if(t.name==xt.Unless)return xt.If;if(Ve.isSpeculativeEndIf(t.directiveName))return xt.If;if(Ve.isSpeculativeCondition(t.name))return xt.If;if(Ve.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,xt.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,xt.If):xt.If}return t.directiveName=="auth"?xt.If:t.name}static rewrite(t){let e=[];return t.forEach(s=>{if(s instanceof _t)if(Ve.shouldRewrite(s)){let r=s.clone();r.name=this.getNewName(s),e.push(r)}else e.push(s);else e.push(s)}),e}}});function Ci(i){return i.length==0?null:i[0].startPosition}var Bs=Pt(()=>{"use strict"});function Jk(i,t){let e=new Set(i),s=new Set(t),r=new Set([...e].filter(h=>s.has(h)));return Array.from(r)}var Xk=Pt(()=>{"use strict"});var tx=H(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});var Zk=function(){function i(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return i.hashStr=function(t,e){return e===void 0&&(e=!1),this.onePassHasher.start().appendStr(t).end(e)},i.hashAsciiStr=function(t,e){return e===void 0&&(e=!1),this.onePassHasher.start().appendAsciiStr(t).end(e)},i._hex=function(t){var e=i.hexChars,s=i.hexOut,r,h,l,c;for(c=0;c<4;c+=1)for(h=c*8,r=t[c],l=0;l<8;l+=2)s[h+1+l]=e.charAt(r&15),r>>>=4,s[h+0+l]=e.charAt(r&15),r>>>=4;return s.join("")},i._md5cycle=function(t,e){var s=t[0],r=t[1],h=t[2],l=t[3];s+=(r&h|~r&l)+e[0]-680876936|0,s=(s<<7|s>>>25)+r|0,l+=(s&r|~s&h)+e[1]-389564586|0,l=(l<<12|l>>>20)+s|0,h+=(l&s|~l&r)+e[2]+606105819|0,h=(h<<17|h>>>15)+l|0,r+=(h&l|~h&s)+e[3]-1044525330|0,r=(r<<22|r>>>10)+h|0,s+=(r&h|~r&l)+e[4]-176418897|0,s=(s<<7|s>>>25)+r|0,l+=(s&r|~s&h)+e[5]+1200080426|0,l=(l<<12|l>>>20)+s|0,h+=(l&s|~l&r)+e[6]-1473231341|0,h=(h<<17|h>>>15)+l|0,r+=(h&l|~h&s)+e[7]-45705983|0,r=(r<<22|r>>>10)+h|0,s+=(r&h|~r&l)+e[8]+1770035416|0,s=(s<<7|s>>>25)+r|0,l+=(s&r|~s&h)+e[9]-1958414417|0,l=(l<<12|l>>>20)+s|0,h+=(l&s|~l&r)+e[10]-42063|0,h=(h<<17|h>>>15)+l|0,r+=(h&l|~h&s)+e[11]-1990404162|0,r=(r<<22|r>>>10)+h|0,s+=(r&h|~r&l)+e[12]+1804603682|0,s=(s<<7|s>>>25)+r|0,l+=(s&r|~s&h)+e[13]-40341101|0,l=(l<<12|l>>>20)+s|0,h+=(l&s|~l&r)+e[14]-1502002290|0,h=(h<<17|h>>>15)+l|0,r+=(h&l|~h&s)+e[15]+1236535329|0,r=(r<<22|r>>>10)+h|0,s+=(r&l|h&~l)+e[1]-165796510|0,s=(s<<5|s>>>27)+r|0,l+=(s&h|r&~h)+e[6]-1069501632|0,l=(l<<9|l>>>23)+s|0,h+=(l&r|s&~r)+e[11]+643717713|0,h=(h<<14|h>>>18)+l|0,r+=(h&s|l&~s)+e[0]-373897302|0,r=(r<<20|r>>>12)+h|0,s+=(r&l|h&~l)+e[5]-701558691|0,s=(s<<5|s>>>27)+r|0,l+=(s&h|r&~h)+e[10]+38016083|0,l=(l<<9|l>>>23)+s|0,h+=(l&r|s&~r)+e[15]-660478335|0,h=(h<<14|h>>>18)+l|0,r+=(h&s|l&~s)+e[4]-405537848|0,r=(r<<20|r>>>12)+h|0,s+=(r&l|h&~l)+e[9]+568446438|0,s=(s<<5|s>>>27)+r|0,l+=(s&h|r&~h)+e[14]-1019803690|0,l=(l<<9|l>>>23)+s|0,h+=(l&r|s&~r)+e[3]-187363961|0,h=(h<<14|h>>>18)+l|0,r+=(h&s|l&~s)+e[8]+1163531501|0,r=(r<<20|r>>>12)+h|0,s+=(r&l|h&~l)+e[13]-1444681467|0,s=(s<<5|s>>>27)+r|0,l+=(s&h|r&~h)+e[2]-51403784|0,l=(l<<9|l>>>23)+s|0,h+=(l&r|s&~r)+e[7]+1735328473|0,h=(h<<14|h>>>18)+l|0,r+=(h&s|l&~s)+e[12]-1926607734|0,r=(r<<20|r>>>12)+h|0,s+=(r^h^l)+e[5]-378558|0,s=(s<<4|s>>>28)+r|0,l+=(s^r^h)+e[8]-2022574463|0,l=(l<<11|l>>>21)+s|0,h+=(l^s^r)+e[11]+1839030562|0,h=(h<<16|h>>>16)+l|0,r+=(h^l^s)+e[14]-35309556|0,r=(r<<23|r>>>9)+h|0,s+=(r^h^l)+e[1]-1530992060|0,s=(s<<4|s>>>28)+r|0,l+=(s^r^h)+e[4]+1272893353|0,l=(l<<11|l>>>21)+s|0,h+=(l^s^r)+e[7]-155497632|0,h=(h<<16|h>>>16)+l|0,r+=(h^l^s)+e[10]-1094730640|0,r=(r<<23|r>>>9)+h|0,s+=(r^h^l)+e[13]+681279174|0,s=(s<<4|s>>>28)+r|0,l+=(s^r^h)+e[0]-358537222|0,l=(l<<11|l>>>21)+s|0,h+=(l^s^r)+e[3]-722521979|0,h=(h<<16|h>>>16)+l|0,r+=(h^l^s)+e[6]+76029189|0,r=(r<<23|r>>>9)+h|0,s+=(r^h^l)+e[9]-640364487|0,s=(s<<4|s>>>28)+r|0,l+=(s^r^h)+e[12]-421815835|0,l=(l<<11|l>>>21)+s|0,h+=(l^s^r)+e[15]+530742520|0,h=(h<<16|h>>>16)+l|0,r+=(h^l^s)+e[2]-995338651|0,r=(r<<23|r>>>9)+h|0,s+=(h^(r|~l))+e[0]-198630844|0,s=(s<<6|s>>>26)+r|0,l+=(r^(s|~h))+e[7]+1126891415|0,l=(l<<10|l>>>22)+s|0,h+=(s^(l|~r))+e[14]-1416354905|0,h=(h<<15|h>>>17)+l|0,r+=(l^(h|~s))+e[5]-57434055|0,r=(r<<21|r>>>11)+h|0,s+=(h^(r|~l))+e[12]+1700485571|0,s=(s<<6|s>>>26)+r|0,l+=(r^(s|~h))+e[3]-1894986606|0,l=(l<<10|l>>>22)+s|0,h+=(s^(l|~r))+e[10]-1051523|0,h=(h<<15|h>>>17)+l|0,r+=(l^(h|~s))+e[1]-2054922799|0,r=(r<<21|r>>>11)+h|0,s+=(h^(r|~l))+e[8]+1873313359|0,s=(s<<6|s>>>26)+r|0,l+=(r^(s|~h))+e[15]-30611744|0,l=(l<<10|l>>>22)+s|0,h+=(s^(l|~r))+e[6]-1560198380|0,h=(h<<15|h>>>17)+l|0,r+=(l^(h|~s))+e[13]+1309151649|0,r=(r<<21|r>>>11)+h|0,s+=(h^(r|~l))+e[4]-145523070|0,s=(s<<6|s>>>26)+r|0,l+=(r^(s|~h))+e[11]-1120210379|0,l=(l<<10|l>>>22)+s|0,h+=(s^(l|~r))+e[2]+718787259|0,h=(h<<15|h>>>17)+l|0,r+=(l^(h|~s))+e[9]-343485551|0,r=(r<<21|r>>>11)+h|0,t[0]=s+t[0]|0,t[1]=r+t[1]|0,t[2]=h+t[2]|0,t[3]=l+t[3]|0},i.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(i.stateIdentity),this},i.prototype.appendStr=function(t){var e=this._buffer8,s=this._buffer32,r=this._bufferLength,h,l;for(l=0;l<t.length;l+=1){if(h=t.charCodeAt(l),h<128)e[r++]=h;else if(h<2048)e[r++]=(h>>>6)+192,e[r++]=h&63|128;else if(h<55296||h>56319)e[r++]=(h>>>12)+224,e[r++]=h>>>6&63|128,e[r++]=h&63|128;else{if(h=(h-55296)*1024+(t.charCodeAt(++l)-56320)+65536,h>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");e[r++]=(h>>>18)+240,e[r++]=h>>>12&63|128,e[r++]=h>>>6&63|128,e[r++]=h&63|128}r>=64&&(this._dataLength+=64,i._md5cycle(this._state,s),r-=64,s[0]=s[16])}return this._bufferLength=r,this},i.prototype.appendAsciiStr=function(t){for(var e=this._buffer8,s=this._buffer32,r=this._bufferLength,h,l=0;;){for(h=Math.min(t.length-l,64-r);h--;)e[r++]=t.charCodeAt(l++);if(r<64)break;this._dataLength+=64,i._md5cycle(this._state,s),r=0}return this._bufferLength=r,this},i.prototype.appendByteArray=function(t){for(var e=this._buffer8,s=this._buffer32,r=this._bufferLength,h,l=0;;){for(h=Math.min(t.length-l,64-r);h--;)e[r++]=t[l++];if(r<64)break;this._dataLength+=64,i._md5cycle(this._state,s),r=0}return this._bufferLength=r,this},i.prototype.getState=function(){var t=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[t[0],t[1],t[2],t[3]]}},i.prototype.setState=function(t){var e=t.buffer,s=t.state,r=this._state,h;for(this._dataLength=t.length,this._bufferLength=t.buflen,r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3],h=0;h<e.length;h+=1)this._buffer8[h]=e.charCodeAt(h)},i.prototype.end=function(t){t===void 0&&(t=!1);var e=this._bufferLength,s=this._buffer8,r=this._buffer32,h=(e>>2)+1;this._dataLength+=e;var l=this._dataLength*8;if(s[e]=128,s[e+1]=s[e+2]=s[e+3]=0,r.set(i.buffer32Identity.subarray(h),h),e>55&&(i._md5cycle(this._state,r),r.set(i.buffer32Identity)),l<=4294967295)r[14]=l;else{var c=l.toString(16).match(/(.*?)(.{0,8})$/);if(c===null)return;var f=parseInt(c[2],16),E=parseInt(c[1],16)||0;r[14]=f,r[15]=E}return i._md5cycle(this._state,r),t?this._state:i._hex(this._state)},i.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),i.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),i.hexChars="0123456789abcdef",i.hexOut=[],i.onePassHasher=new i,i}();Wa.Md5=Zk;if(Zk.hashStr("hello")!=="5d41402abc4b2a76b9719d911017c592")throw new Error("Md5 self test failed.")});var ex,Ie,Ya=Pt(()=>{"use strict";ex=rn(tx()),Ie=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,s,r,h;let t="";return this.node!=null&&(t=((s=(e=this.node.endPosition)==null?void 0:e.offset)!=null?s:0).toString()+"|"+((h=(r=this.node.startPosition)==null?void 0:r.offset)!=null?h:0).toString()+"|"),ex.Md5.hashStr(t+"|"+this.errorCode)}static makeSyntaxError(t,e,s,r){r==null&&(r=0);let h=new Ie;return h.errorCode=t,h.node=e,h.message=s,h.level=r,h}}});var Ht,Qa=Pt(()=>{"use strict";Ht=class{};Ht.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Ht.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Ht.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Ht.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Ht.TYPE_UNCLOSED_COMMENT="BLADE_005",Ht.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Ht.TYPE_UNCLOSED_VERBATIM="BLADE_008",Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Ht.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Ht.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var Qi,Us,ix=Pt(()=>{"use strict";Ya();Qa();Me();ks();Qi=class{static isConditionalStructure(t){if(!(t instanceof _t))return!1;let e=t,s=e.name;return s==xt.If||s==xt.ElseIf||s==xt.Else}static requiresClose(t){let e=t.name;return e==xt.ElseIf||e==xt.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==xt.If||t==xt.ElseIf?Qi.conditionClosingPairs:[]}static findClosestStructurePair(t,e,s){let r=[],h=t.length,l=new Map;r.push({node:e,index:s});for(let c=0;c<h;c+=1){let f=t[c];if(f instanceof _t){let E=f.name;if(f.isClosingDirective&&E==xt.If){l.set(c,c);continue}else if(E==xt.ElseIf||E==xt.Else){l.set(c,c);continue}}}for(;r.length>0;){let c=r.pop();if(c==null)continue;if(c.node._conditionParserAbandonPairing)break;let f=c.node,E=Qi.getValidClosingPairs(f.name),k=c.index,U=!1;for(let b=k;b<h;b++){let y=t[b];if(y instanceof _t&&Qi.isConditionalStructure(y)){if(Qi.requiresClose(y)){if(b==h-1){U=!1;break}r.push(c),r.push({node:y,index:b+1}),U=!0;break}if(f.isClosedBy!=null)continue;let R=y.name,G=!1;if(y.ref==0&&(y.isClosingDirective&&R==xt.If||E.includes(R))&&(G=!0),y.refId==f.refId&&(G=!1),G){l.delete(b),f.isClosedBy=y,y.isOpenedBy=f,y.ref+=1,U=!0;break}}}if(!U&&f instanceof _t){let b=f.name;(b==xt.ElseIf||b==xt.Else)&&f.isOpenedBy==null&&(f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0),f.isClosedBy==null&&Qi.requiresClose(f)&&(f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let s=t[e];s instanceof _t&&Qi.isConditionalStructure(s)&&Qi.requiresClose(s)&&Qi.findClosestStructurePair(t,s,e+1)}return t.forEach(e=>{if(e instanceof _t&&Qi.isConditionalStructure(e)){let s=e.name;if((s==xt.ElseIf||s==xt.Else)&&e.isOpenedBy==null){e.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&Qi.requiresClose(e)){e.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},Us=Qi;Us.conditionClosingPairs=["elseif","else"]});var To,nx=Pt(()=>{"use strict";Sn();Bs();Me();ks();To=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof _t&&r.name.toLowerCase()==xt.ForElse&&r.directiveName.toLowerCase()!=xt.EndForElse?s.push(this.createForElseNode(r,e)):s.push(r)}),s}static createForElseNode(t,e){var f,E,k,U,b,y,R,G,X,ct,dt,z,J,at,B,j,pt,rt,Ft,Bt,Dt,Mt,Et,Rt,le,Tt,mt,ne,At,Vt,ae,A,P,Z,ht;let s=new Yi;s.withParser(e),s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.constructedFrom=t;let r=t.findFirstDirectChildDirectiveOfType("empty");if(r==null){s.tailNode=t.children.pop(),s.truthNodes=t.children;let Ot=((E=(f=t.startPosition)==null?void 0:f.index)!=null?E:0)-1,$=((b=(U=(k=t.isClosedBy)==null?void 0:k.startPosition)==null?void 0:U.index)!=null?b:0)-1,F=$-Ot,W=((R=(y=t.endPosition)==null?void 0:y.index)!=null?R:0)+1,M=((ct=(X=(G=t.isClosedBy)==null?void 0:G.startPosition)==null?void 0:X.index)!=null?ct:0)-1,tt=M-W;s.truthDocumentContent=e.getText(Ot,$),s.truthDocumentOffset={start:Ot,end:$,length:F},s.truthInnerContent=e.getText(W,M),s.truthInnerOffset={start:W,end:M,length:tt}}else{let Ot=t.children,$=[],F=[];s.elseNode=r;for(let zt=0;zt<Ot.length;zt++){let Ct=Ot[zt];if(Ct.refId==r.refId){F=Ot.slice(zt+1);break}else $.push(Ct)}s.truthNodes=$,F.length>0&&(s.tailNode=F.pop()),s.falseNodes=F;let W=((z=(dt=t.startPosition)==null?void 0:dt.index)!=null?z:0)-1,M=((at=(J=r.startPosition)==null?void 0:J.index)!=null?at:0)-1,tt=M-W,it=((j=(B=t.endPosition)==null?void 0:B.index)!=null?j:0)+1,K=((rt=(pt=r.startPosition)==null?void 0:pt.index)!=null?rt:0)-1,Y=K-it;s.truthDocumentContent=e.getText(W,M),s.truthDocumentOffset={start:W,end:M,length:tt},s.truthInnerContent=e.getText(it,K),s.truthInnerOffset={start:it,end:K,length:Y};let q=((Bt=(Ft=r.startPosition)==null?void 0:Ft.index)!=null?Bt:0)-1,gt=((Et=(Mt=(Dt=t.isClosedBy)==null?void 0:Dt.startPosition)==null?void 0:Mt.index)!=null?Et:0)-1,Kt=gt-q,qt=((le=(Rt=r.endPosition)==null?void 0:Rt.index)!=null?le:0)+1,kt=((ne=(mt=(Tt=t.isClosedBy)==null?void 0:Tt.startPosition)==null?void 0:mt.index)!=null?ne:0)-1,Lt=kt-qt;s.falseDocumentContent=e.getText(q,gt),s.falseDocumentOffset={start:q,end:gt,length:Kt},s.falseInnerContent=e.getText(qt,kt),s.falseInnerOffset={start:qt,end:kt,length:Lt}}s.truthDocument=be.childFromText(e.getNodeText(s.truthNodes),Ci(s.truthNodes)),s.falseDocument=be.childFromText(e.getNodeText(s.falseNodes),Ci(s.falseNodes));let h=((Vt=(At=t.startPosition)==null?void 0:At.index)!=null?Vt:0)-1,l=(ht=(A=(ae=t.isClosedBy)==null?void 0:ae.endPosition)==null?void 0:A.index)!=null?ht:0-((Z=(P=t.startPosition)==null?void 0:P.index)!=null?Z:0),c=l-h;return s.nodeContent=e.getText(h,l),s.documentContent=e.getText(h,l),s.offset={start:h,end:l,length:c},s}}});var go,sx=Pt(()=>{"use strict";Sn();Bs();Me();dr();go=class{static analyze(t,e){let s=[];return t.forEach(r=>{if(r instanceof _t&&r.isClosedBy!=null){let h=r.findFirstChildDirectiveOfType("else");h!=null&&h.isClosedBy==null?s.push(this.convertToConditionalNode(r,h,e)):s.push(r)}else s.push(r)}),s}static convertToConditionalNode(t,e,s){var Mt,Et,Rt,le,Tt,mt,ne,At,Vt,ae,A,P,Z,ht,Ot,$,F,W,M,tt,it,K,Y,q,gt,Kt;let r=new yi,h=t.getFinalClosingDirective(),l=t.children,c=[],f=[],E=l.pop();r.withParser(s),r.parent=t.parent,r.startPosition=t.startPosition,r.endPosition=h.endPosition,r.constructedFrom=t;let k=((Et=(Mt=t.startPosition)==null?void 0:Mt.index)!=null?Et:0)-1,U=(mt=(Rt=h==null?void 0:h.endPosition)==null?void 0:Rt.index)!=null?mt:0-((Tt=(le=t.startPosition)==null?void 0:le.index)!=null?Tt:0),b=k+U;r.nodeContent=s.getText(k,U),r.offset={start:k,end:b,length:U};for(let qt=0;qt<l.length;qt++){let kt=l[qt];if(kt instanceof _t&&kt.refId==e.refId){f=l.slice(qt+1);break}else c.push(kt)}let y=new Ts,R=new Ts;y.withParser(s),R.withParser(s),t.isClosedBy=e,e.isOpenedBy=t,E.isOpenedBy=e,e.isClosedBy=E;let G=[...c],X=[...f];c.push(e),y.head=t,y.nodes=c,y.index=t.index;let ct=(At=(ne=t.endPosition)==null?void 0:ne.index)!=null?At:0,dt=((A=(ae=(Vt=t.isClosedBy)==null?void 0:Vt.startPosition)==null?void 0:ae.index)!=null?A:0)-1,z=dt-ct,J=((Z=(P=t.startPosition)==null?void 0:P.index)!=null?Z:0)-1,at=(($=(Ot=(ht=t.isClosedBy)==null?void 0:ht.startPosition)==null?void 0:Ot.index)!=null?$:0)-1,B=at-J;y.innerContent=s.getText(ct,dt),y.documentContent=s.getText(J,at),y.innerOffset={start:ct,end:dt,length:z},y.offset={start:J,end:at,length:B},f.push(E),R.head=e,R.nodes=f,R.index=e.index;let j=(W=(F=e.endPosition)==null?void 0:F.index)!=null?W:0,pt=((it=(tt=(M=e.isClosedBy)==null?void 0:M.startPosition)==null?void 0:tt.index)!=null?it:0)-1,rt=pt-j,Ft=((Y=(K=e.startPosition)==null?void 0:K.index)!=null?Y:0)-1,Bt=((Kt=(gt=(q=e.isClosedBy)==null?void 0:q.startPosition)==null?void 0:gt.index)!=null?Kt:0)-1,Dt=Bt-Ft;return R.innerContent=s.getText(j,pt),R.documentContent=s.getText(Ft,Bt),R.innerOffset={start:j,end:pt,length:rt},R.offset={start:Ft,end:Bt,length:Dt},r.chain=[t.index,e.index],r.logicBranches.push(y),r.logicBranches.push(R),y.startPosition=y.nodes[0].startPosition,y.endPosition=y.nodes[y.nodes.length-1].startPosition,y.childDocument=be.childFromText(s.getNodeText(G),Ci(G)),R.childDocument=be.childFromText(s.getNodeText(X),Ci(X)),R.startPosition=R.nodes[0].startPosition,R.endPosition=R.nodes[R.nodes.length-1].startPosition,Ve.registerSpeculativeCondition(t.directiveName),r}}});var Eo,rx=Pt(()=>{"use strict";Sn();Bs();Me();ks();Eo=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof _t&&r.directiveName.toLowerCase()==xt.Switch?s.push(this.createSwitchNode(r,e)):s.push(r)}),s}static createSwitchNode(t,e){var E,k,U,b,y,R,G,X,ct,dt,z,J,at,B,j,pt,rt,Ft,Bt,Dt,Mt,Et,Rt,le,Tt,mt,ne,At,Vt,ae,A,P;let s=new Wi,r=t.children;s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.parent=t.parent,s.withParser(e),s.constructedFrom=t;let h=[];for(let Z=0;Z<r.length;Z++){let ht=r[Z];if(ht instanceof _t&&ht.name==xt.Switch&&(Z+=ht.children.length),ht instanceof _t&&ht.name==xt.Case){let Ot=this.collectUntil(t,r.slice(Z+1),[xt.Case,xt.Default,xt.EndSwitch]),$=new lr;if($.parent=ht.parent,s.cases.length==0&&h.length>0){if($.leadingNodes=h,h.length>0){let Y=h[0],q=h[h.length-1],gt=(k=(E=Y.startPosition)==null?void 0:E.index)!=null?k:0,Kt=((b=(U=q.endPosition)==null?void 0:U.index)!=null?b:0)+1,qt=e.getText(gt,Kt);$.leadingDocument=be.childFromText(qt,Y.startPosition)}h=[]}if($.refId=ht.refId,$.index=ht.index,$.startPosition=ht.startPosition,$.endPosition=ht.endPosition,$.order=s.cases.length,$.head=ht,$.isDefault=!1,$.children=Ot.children,$.withParser(e),$.isClosedBy=Ot.brokeOn,ht.isClosedBy=Ot.brokeOn,$.children.length>0){let Y=$.children[$.children.length-1];Y instanceof _t&&Y==t.isClosedBy&&$.children.pop()}$.childDocument=be.childFromText(e.getNodeText($.children),Ci($.children)),Ot.brokeOn!=null&&($.endPosition=Ot.brokeOn.startPosition);let F=((R=(y=$.startPosition)==null?void 0:y.index)!=null?R:0)-1,W=((ct=(X=(G=$.isClosedBy)==null?void 0:G.startPosition)==null?void 0:X.index)!=null?ct:0)-1,M=W-F,tt=((z=(dt=ht.endPosition)==null?void 0:dt.index)!=null?z:0)+1,it=((B=(at=(J=$.isClosedBy)==null?void 0:J.startPosition)==null?void 0:at.index)!=null?B:0)-1,K=it-tt;$.documentContent=e.getText(F,W),$.innerContent=e.getText(tt,it),$.offset={start:F,end:W,length:M},$.innerOffset={start:tt,end:it,length:K},s.cases.push($)}else if(ht instanceof _t&&ht.name==xt.Default){let Ot=r.slice(Z+1),$=new lr;$.parent=ht.parent,$.refId=ht.refId,$.index=ht.index,$.startPosition=ht.startPosition,$.endPosition=t.startPosition,$.order=s.cases.length,$.head=ht,$.isDefault=!0,$.children=Ot,$.withParser(e),$.isClosedBy=t.isClosedBy,ht.isClosedBy=t.isClosedBy;let F=[...$.children],W=F[F.length-1];W instanceof _t&&W.refId==((j=t.isClosedBy)==null?void 0:j.refId)&&F.pop();let M=((rt=(pt=$.startPosition)==null?void 0:pt.index)!=null?rt:0)-1,tt=((Dt=(Bt=(Ft=$.isClosedBy)==null?void 0:Ft.startPosition)==null?void 0:Bt.index)!=null?Dt:0)-1,it=tt-M,K=((Et=(Mt=ht.endPosition)==null?void 0:Mt.index)!=null?Et:0)+1,Y=((Tt=(le=(Rt=$.isClosedBy)==null?void 0:Rt.startPosition)==null?void 0:le.index)!=null?Tt:0)-1,q=Y-K;$.documentContent=e.getText(M,tt),$.innerContent=e.getText(K,Y),$.offset={start:M,end:tt,length:it},$.innerOffset={start:K,end:Y,length:q},$.childDocument=be.childFromText(e.getNodeText(F),Ci(F)),s.cases.push($);break}else h.push(ht)}if(s.cases.length>0){let Z=s.cases[s.cases.length-1];Z.children.length>0&&(s.tail=Z.children.pop())}if(s.cases.length==0){let Z=[...t.children];Z.length>0&&Z[Z.length-1]==t.isClosedBy&&Z.pop(),t.childrenDocument=be.childFromText(e.getNodeText(Z),Ci(Z))}let l=((ne=(mt=t.startPosition)==null?void 0:mt.index)!=null?ne:0)-1,c=(P=(Vt=(At=t.isClosedBy)==null?void 0:At.endPosition)==null?void 0:Vt.index)!=null?P:0-((A=(ae=t.startPosition)==null?void 0:ae.index)!=null?A:0),f=l+c;if(s.nodeContent=e.getText(l,c),s.offset={start:l,end:f,length:c},s.cases.length>0){let Z=s.cases[s.cases.length-1];Z.isClosedBy==null&&(Z.isClosedBy=t.isClosedBy)}return s}static collectUntil(t,e,s){var l;let r=[],h=null;for(let c=0;c<e.length;c++){let f=e[c];if(f instanceof _t&&s.includes(f.name)&&((l=f.parent)==null?void 0:l.refId)==t.refId){h=f;break}r.push(f)}return{children:r,brokeOn:h}}}});var ja,pr,ox=Pt(()=>{"use strict";Sn();Bs();Me();ks();Xk();ix();nx();dr();sx();rx();ja=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.stackCount=0}buildCloseIndex(t){var e,s,r;t.forEach(h=>{var E,k,U,b,y,R,G,X;if(!(h instanceof _t))return;let l=h;if(l.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let c=l.name;((E=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:E.has(c))==!1&&((k=this.closingDirectiveIndex.get(this.stackCount))==null||k.set(c,[]),(U=this.closingDirectiveIndexCount.get(this.stackCount))==null||U.set(c,0)),(y=(b=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:b.get(c))==null||y.push(h);let f=(G=(R=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:R.get(c))!=null?G:0;(X=this.closingDirectiveIndexCount.get(this.stackCount))==null||X.set(c,f+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((s=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?s:[])),(r=this.closingDirectiveIndex.get(this.stackCount))==null||r.forEach((h,l)=>{var E,k,U,b,y;let c=h.length;if(c==0)return;let f=h[c-1];for(let R=0;R<c;R++){let G=t[R];if(G instanceof _t){if(G.index>=f.index)break;let X=G.name;if(G.isClosingDirective==!1&&X==l){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((E=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:E.has(l))==!1&&((k=this.openDirectiveIndexCount.get(this.stackCount))==null||k.set(l,0));let ct=(b=(U=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:U.get(l))!=null?b:0;(y=this.openDirectiveIndexCount.get(this.stackCount))==null||y.set(l,ct+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),s=this.closingDirectiveNames.get(this.stackCount);return Jk(e,s)}return[]}associate(t,e,s=null){var l;this.document=e;let r=[],h=[{documentNodes:t,parent:s}];for(;h.length>0;){let c=h.pop();if(c==null)continue;let f=c.documentNodes;this.parentNode=c.parent,this.stackCount+=1,this.buildCloseIndex(f),f=Us.pairConditionals(f),f.forEach(b=>{if(b instanceof _t&&Ve.canClose(b)){if(Us.isConditionalStructure(b))return;let y=this.getScanForList(b);this.findClosingPair(f,b,y)}});let E=f.length;for(let b=0;b<E;b++){let y=f[b];if(y instanceof _t&&y.isClosedBy!=null)for(let R=b+1;R<E;R++){let G=f[R];if(G.index>y.isClosedBy.index)break;if(G.parent=y,y.children.push(G),G instanceof _t&&G.index==y.index){G.parent=y;break}}}f.forEach(b=>{if(b instanceof _t&&b.children.length>0){let y=[],R=[];b.children.forEach(G=>{if(G.parent!=null&&G.parent.index==b.index){let X=G.refId;if(!R.includes(X))G.parent=b,y.push(G),R.push(X);else return}}),h.push({documentNodes:y,parent:b})}});let k=[];f.forEach(b=>{var y;this.parentNode==null?b.parent==null&&k.push(b):((y=b.parent)==null?void 0:y.refId)==this.parentNode.refId&&k.push(b)}),k=this.reduceConditions(k,e),k=Eo.associate(k,e),k=To.associate(k,e),k=go.analyze(k,e),k=this.cleanNodes(k);let U=new Map;f.forEach(b=>{var y,R,G,X;if(b instanceof _t&&b.isClosedBy!=null&&this.document!=null){let ct=this.document.getText((R=(y=b.endPosition)==null?void 0:y.index)!=null?R:0,((X=(G=b.isClosedBy.startPosition)==null?void 0:G.index)!=null?X:0)-1);b.documentContent=ct,(b.name=="php"||b.name=="verbatim")&&b.innerContent.trim().length==0&&(b.innerContent=b.documentContent)}});for(let b=0;b<k.length;b++){let y=k[b],R=(l=y.refId)!=null?l:"";U.set(R,1)}if(this.parentNode!=null&&this.parentNode instanceof _t&&(this.parentNode.children=this.cleanNodes(k),this.parentNode.parent!=null&&this.parentNode.parent instanceof _t)){let b=this.parentNode.parent.children,y=[];b.forEach(R=>{var G;U.has((G=R.refId)!=null?G:"")==!1&&y.push(R)}),this.parentNode.parent.children=this.cleanNodes(y)}this.stackCount<=1&&(r=this.cleanNodes(k))}return r}cleanNodes(t){let e=[],s=[];for(let r=0;r<t.length;r++){let h=t[r],l=h.refId;if(s.includes(l))break;e.push(h),s.push(l)}return e}reduceConditions(t,e){var r,h,l,c,f,E,k,U,b,y,R,G,X,ct,dt,z,J;let s=[];for(let at=0;at<t.length;at++){let B=t[at];if(B instanceof _t&&B.isClosingDirective==!1&&B.isClosedBy!=null)if(B.name==xt.If){let pt=new yi,rt=B.getFinalClosingDirective();pt.withParser(e),pt.index=B.index,pt.chain.push(B.index),pt.startPosition=B.startPosition,pt.endPosition=rt.endPosition,pt.constructedFrom=B;let Ft=((h=(r=B.startPosition)==null?void 0:r.index)!=null?h:0)-1,Bt=(E=(l=rt==null?void 0:rt.endPosition)==null?void 0:l.index)!=null?E:0-((f=(c=B.startPosition)==null?void 0:c.index)!=null?f:0),Dt=Ft+Bt;pt.nodeContent=e.getText(Ft,Bt),pt.offset={start:Ft,end:Dt,length:Bt},this.parentNode!=null&&(pt.parent=this.parentNode);let Mt=null,Et=!0,Rt=0;for(;Et;){if(Rt+=1,Rt>ja.ForceBreakLimit){Et=!1;break}if(B instanceof _t){let le=this.findEndOfBranch(t.slice(at+1),B,at),Tt=new Ts;Tt.withParser(e);let mt=le.tail;Tt.head=B,Tt.tail=mt,Tt.nodes=this.cleanNodes(B.children);let ne=[...Tt.nodes],At=ne[ne.length-1];At instanceof _t&&At.refId==((k=B.isClosedBy)==null?void 0:k.refId)&&ne.pop();let Vt=(b=(U=B.endPosition)==null?void 0:U.index)!=null?b:0,ae=((G=(R=(y=B.isClosedBy)==null?void 0:y.startPosition)==null?void 0:R.index)!=null?G:0)-1,A=ae-Vt,P=((ct=(X=B.startPosition)==null?void 0:X.index)!=null?ct:0)-1,Z=((J=(z=(dt=B.isClosedBy)==null?void 0:dt.startPosition)==null?void 0:z.index)!=null?J:0)-1,ht=Z-P;if(Tt.innerContent=e.getText(Vt,ae),Tt.documentContent=e.getText(P,Z),Tt.innerOffset={start:Vt,end:ae,length:A},Tt.offset={start:P,end:Z,length:ht},Tt.childDocument=be.childFromText(e.getNodeText(ne),Ci(ne)),mt==null&&(mt=Tt.head.isClosedBy),mt!=null&&mt.startPosition!=null&&(Tt.startPosition=mt.startPosition),mt!=null&&(Tt.index=mt.index),Tt.nodes.length>0){let Ot=Tt.nodes[Tt.nodes.length-1];Ot.endPosition!=null&&(Tt.endPosition=Ot.endPosition)}else mt!=null&&mt.endPosition!=null&&(Tt.endPosition=mt.endPosition);if(this.createdExecutionBranches.push(Tt),pt.logicBranches.push(Tt),(mt==null?void 0:mt.isClosingDirective)&&mt.name==xt.If){Mt=le.offset,Et=!1;break}else mt!=null&&pt.chain.push(mt.index),at=le.offset,mt instanceof _t&&(B=mt)}else Et=!1}if(s.push(pt),Mt!=null&&Mt==t.length)break}else s.push(B);else s.push(B)}return s}findEndOfBranch(t,e,s){let r=[],h=s,l=null;for(let c=0;c<t.length;c++){let f=t[c];if(f instanceof _t&&f.isOpenedBy!=null&&f.isOpenedBy==e){l=f;break}else r.push(f)}return{children:r,tail:l,offset:h}}findClosingPair(t,e,s){let r=t.length,h=0;for(let l=0;l<r;l++){let c=t[l];if(!(c instanceof _t)||c.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(c.startPosition))continue;let f=c;if(f.isClosingDirective&&f.isOpenedBy!=null||!f.isClosingDirective&&f.isClosedBy!=null)continue;let E=f.name;if(!f.isClosingDirective&&s.includes(E)){h+=1;continue}if(s.includes(E)&&h>0){h-=1;continue}if(h==0&&s.includes(E)){f.isOpenedBy=e,e.isClosedBy=f;break}}}},pr=ja;pr.ForceBreakLimit=1e5});var ko,ax=Pt(()=>{"use strict";Me();ko=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof _t))return;let s=e;s.getImmediateChildren().forEach(r=>{let h="*unknown",l=0;r instanceof Te?h="*literal":r instanceof Kn?h="*entities_echo":r instanceof jn?h="*escaped_echo":r instanceof gi?h="*echo":r instanceof _o?h="*verbatim":r instanceof _t&&(h=r.directiveName),s.childTypeCounts.has(h)==!1&&s.childTypeCounts.set(h,0);let c=s.childTypeCounts.get(h),f=c+1;s.childTypeCounts.set(h,f),r.parentTypeIndex=f,r.parentIndex=l,l+=1})})}}});var xo,lx=Pt(()=>{"use strict";Me();xo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var r,h,l,c,f;let e=(h=(r=t.endPosition)==null?void 0:r.index)!=null?h:0,s=(f=(c=(l=t.isClosedBy)==null?void 0:l.startPosition)==null?void 0:c.index)!=null?f:0;return this.fragmentsParser.getFragmentsBetween(e,s).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let s=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(s=="script"||s=="style")){let r=this.fragmentsParser.getClosingFragmentAfter(e);if(r==null)return;e.endPosition!=null&&r.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,r.startPosition).forEach(l=>{(l instanceof yi||l instanceof Yi||l instanceof An||l instanceof Wi||l instanceof _t&&l.isClosedBy!=null)&&(e.containsStructures=!0),s=="style"?l.isInStyleTag=!0:l.isInScriptTag=!0})}}),t.forEach(e=>{var l,c,f,E,k,U;if(e instanceof Te||e.startPosition==null)return;e instanceof _t&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let s=this.fragmentsParser.getFragmentContaining(e.startPosition);if(s==null)return;if(e.fragment=s,e.startPosition.index-((c=(l=s.startPosition)==null?void 0:l.index)!=null?c:0)<=3){e.fragmentPosition=0;return}if(s.parameters.length==0){e.fragmentPosition=2;return}let h=!1;for(let b=0;b<s.parameters.length;b++){let y=s.parameters[b];if(((E=(f=y.startPosition)==null?void 0:f.index)!=null?E:0)<e.startPosition.index&&((U=(k=y.endPosition)==null?void 0:k.index)!=null?U:0)>e.startPosition.index){e.fragmentPosition=1,h=!0;break}}h||(e.fragmentPosition=2)}))}}});var vo,ux=Pt(()=>{"use strict";Me();Ti();vo=class{static analyze(t){t.forEach(e=>{if(e instanceof gi){let s=!1,r=!1;if(e.nextNode==null)s=!0;else if(e.nextNode instanceof Te){let h=et.getFirstLine(e.nextNode.content);et.trimLeft(h," 	").startsWith(`
`)==!1&&h.trim().length>0&&(s=!0)}if(e.prevNode==null)r=!0;else if(e.prevNode instanceof Te){let h=et.getLastLine(e.prevNode.content);et.trimRight(h," 	").endsWith(`
`)==!1&&h.trim().length>0&&(r=!0)}e.isInlineEcho=s&&r}})}}});var yo,cx=Pt(()=>{"use strict";Me();Ti();yo=class{static analyze(t){t.forEach(e=>{var s,r;if(e instanceof wi){if(((s=e.startPosition)==null?void 0:s.line)!=((r=e.endPosition)==null?void 0:r.line))return;let h=!1,l=!1;if(e.nextNode==null)h=!0;else if(e.nextNode instanceof Te){let c=et.getFirstLine(e.nextNode.content);et.trimLeft(c," 	").startsWith(`
`)==!1&&c.trim().length>0&&(h=!0)}if(e.prevNode==null)l=!0;else if(e.prevNode instanceof Te){let c=et.getLastLine(e.prevNode.content);et.trimRight(c," 	").endsWith(`
`)==!1&&c.trim().length>0&&(l=!0)}e.isInline=h&&l}})}}});var ln,fx=Pt(()=>{"use strict";un();Ti();ln=class{static findRightBeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let l=e[h];if(et.ctypeSpace(l)&&(r=!0),r&&(et.ctypeAlpha(l)||et.ctypeDigit(l)))return null;if(et.ctypePunct(l)||l==nt.String_Terminator_SingleQuote||l==nt.String_Terminator_DoubleQuote)return l}return null}static findRightNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let l=e[h];if((et.ctypeSpace(l)||et.ctypePunct(l)&&l!=nt.Punctuation_Underscore)&&(r=!0),r&&(et.ctypeAlpha(l)||et.ctypeDigit(l)))return h+1}return null}static findLeftNeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-2;h>=0;h--){let l=e[h];if(et.ctypeSpace(l)&&(r=!0),r&&(et.ctypeAlpha(l)||et.ctypeDigit(l)))return null;if(et.ctypePunct(l))return l}return null}static findLeftNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-1;h>=0;h--){let l=e[h];if((et.ctypeSpace(l)||et.ctypePunct(l)&&l!=nt.Punctuation_Underscore)&&(r=!0),r&&(et.ctypeAlpha(l)||et.ctypeDigit(l)))return h+1}return null}static scanWordAt(t,e,s=4){if(e=e.replace("	"," ".repeat(s)),t<0||t>e.length)return null;let r=[],h=[];for(let l=t-1;l>=0;l--){let c=e[l];if(et.ctypePunct(c)&&c!=nt.Punctuation_Underscore||et.ctypeSpace(c))break;r.push(c)}for(let l=t;l<e.length;l++){let c=e[l];if(et.ctypePunct(c)&&c!=nt.Punctuation_Underscore||et.ctypeSpace(c))break;h.push(c)}return r.reverse().join("")+h.join("")}}});var cn,Ka=Pt(()=>{"use strict";cn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new cn;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,s=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+s}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function Ni(i){return i==null?!1:i=='"'||i=="'"}var Ms=Pt(()=>{"use strict"});function Hs(i){for(let t=i.getCurrentIndex()+1;t<i.inputLength();t++){let e=i.getChar(t);if(!et.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var za=Pt(()=>{"use strict";Ti()});function On(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()!=nt.NewLine);i.incrementIndex());}var _r=Pt(()=>{"use strict";un()});function Ln(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex())if(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()==nt.Punctuation_Asterisk&&i.getNext()==nt.Punctuation_ForwardSlash){t&&i.pushChar(nt.Punctuation_ForwardSlash),i.incrementIndex(),i.checkCurrentOffsets();break}}var mr=Pt(()=>{"use strict";un()});function $n(i){let t=i.getCurrent();for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=nt.String_EscapeCharacter));i.incrementIndex());}function xs(i){let t=i.getCurrent(),e=[];for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=nt.String_EscapeCharacter));i.incrementIndex())e.push(i.getCurrent());return{value:e.join(""),endedOn:i.getCurrentIndex()}}var Gs=Pt(()=>{"use strict";un()});function Vs(i){let t=i.getCurrentIndex()+i.getSeedOffset(),e=0,s=0;for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex()){if(i.checkCurrentOffsets(),Ni(i.getCurrent())){$n(i);continue}if(i.getCurrent()==nt.Punctuation_ForwardSlash&&i.getNext()==nt.Punctuation_Asterisk){Ln(i,!1);continue}if(i.getCurrent()==nt.Punctuation_ForwardSlash&&i.getNext()==nt.Punctuation_ForwardSlash){On(i,!1);continue}if(i.getCurrent()==nt.LeftParen){s+=1;continue}if(i.getCurrent()==nt.RightParen){if(s>0){s-=1;continue}e=i.getCurrentIndex()+i.getSeedOffset()+1;break}if(i.getCurrent()==null)break}let r=i.getContentSubstring(t,e-t);return{start:t,end:e,content:r}}var $a=Pt(()=>{"use strict";un();Ms();_r();mr();Gs()});var Co,dx=Pt(()=>{"use strict";Me();Ti();un();Ms();za();$a();_r();mr();Gs();Co=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,s){let r=new _t,h=this.getComponentOffset();r.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),r.directiveName=t.trim(),r.name=t.trim(),t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.document.positionFromOffset(h+e,h+e),c=this.document.positionFromOffset(h+s,h+s);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index,E=r.endPosition.index-r.startPosition.index,k=f+E;r.sourceContent=this.document.getContentSubstring(f,E),r.offset={start:f,end:k,length:E}}return r}getComponentOffset(){var t,e,s;return((s=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?s:0)+3}makeDirectiveWithParameters(t,e,s,r){var k,U;let h=this.makeDirective(t,e,s),l=this.getComponentOffset();h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let c=r.content.trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1),c=c.trim(),h.hasJsonParameters=c.startsWith("{")&&c.endsWith("}"));let f=this.document.positionFromOffset(r.start+l,r.start+l),E=this.document.positionFromOffset(r.end+l,r.end+l);if(h.startPosition=(U=(k=h.namePosition)==null?void 0:k.start)!=null?U:null,h.endPosition=E,h.directiveParametersPosition={start:f,end:E},h.startPosition!=null&&h.endPosition!=null){let b=h.startPosition.index,y=h.endPosition.index-h.startPosition.index,R=b+y;h.sourceContent=this.document.getContentSubstring(b,y),h.offset={start:b,end:R,length:y}}return h}prepare(t){return this.content=et.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,s="",r=0,h=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==nt.Punctuation_ForwardSlash&&this.next==nt.Punctuation_Asterisk){Ln(this,!0);continue}if(this.cur==nt.Punctuation_ForwardSlash&&this.next==nt.Punctuation_ForwardSlash){On(this,!0);continue}if(this.cur==nt.NewLine){r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}else if(this.next==null){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}let l=Hs(this);if(this.cur!=nt.LeftParen&&l.didFind&&et.ctypePunct(l.char)&&l.char!=nt.LeftParen&&l.char!=nt.Punctuation_Minus){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}if(et.ctypeSpace(this.cur)){let c=Hs(this);if(c.didFind&&c.char==nt.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[],this.currentIndex=c.index,this.checkCurrentOffsets();let f=Vs(this);h=this.makeDirectiveWithParameters(s,t,r,f);break}else{r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}}else if(this.cur==nt.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[];let c=Vs(this);h=this.makeDirectiveWithParameters(s,t,r,c);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return h}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(et.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),s=new gi;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==nt.RightBrace&&this.next==nt.RightBrace){let r=this.currentIndex+1;s.startPosition=this.document.positionFromOffset(t+e,t+e),s.endPosition=this.document.positionFromOffset(r+e,r+e),s.withParser(this.document);let h=s.startPosition.index-5,l=s.endPosition.index-s.startPosition.index+3,c=h+l;s.sourceContent=this.content.substr(h,l),s.offset={start:h,end:c,length:l},s.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return s}parse(t){var f;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),s=!1,r=-1,h=-1,l=-1,c='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==nt.LeftBrace&&this.next==nt.LeftBrace){this.currentIndex+=2;let E=this.scanToEndOfBladeEcho(this.currentIndex);if(E!=null){let k=new ms;k.type=1,k.startPosition=E.startPosition,k.endPosition=E.endPosition,k.inlineEcho=E,k.type=3,t.hasParameters=!0,t.parameters.push(k),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==nt.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=nt.Punctuation_Equals){let E=this.scanToEndOfDirective();if(E!=null){let k=new ms;k.type=1,k.startPosition=E.startPosition,k.endPosition=E.endPosition,k.name=E.directiveName,k.directive=E,t.hasParameters=!0,t.parameters.push(k);continue}}if(this.hasFoundName){if(et.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let E=new ms,k=this.getComponentOffset();E.type=2,E.name=this.currentContent.join("");let U=this.currentIndex+k-E.name.length;E.startPosition=this.document.positionFromCursor(U,U),E.endPosition=this.document.positionFromCursor(this.currentIndex+k,this.currentIndex+k),E.namePosition={start:E.startPosition,end:E.endPosition},t.parameters.push(E),t.hasParameters=!0,this.currentContent=[];continue}continue}else s||(s=!0,r=this.currentIndex);if(this.cur==nt.Punctuation_Equals&&Ni(this.next)){c=this.next,h=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),l=this.currentIndex;let E=xs(this),k=new ms;k.withParser(e),k.name=this.currentContent.join(""),k.value=E.value;let U=t.relativeOffset(r+3),b=t.relativeOffset(h+3),y=t.relativeOffset(l+3),R=t.relativeOffset(E.endedOn+3);k.namePosition={start:e.positionFromOffset(U,U),end:e.positionFromOffset(b,b)},k.valuePosition={start:e.positionFromOffset(y,y),end:e.positionFromOffset(R,R)},k.terminatorStyle=c,k.wrappedValue=c+k.value+c,k.content=k.name+"="+k.wrappedValue,k.realName=k.name,k.realName.startsWith(":")&&(k.isExpression=!0,k.realName=k.realName.substring(1),k.realName.startsWith(":")&&(k.isExpression=!1,k.realName=k.realName.substring(1),k.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(k),this.currentContent=[],s=!1,r=-1,h=-1,l=-1,c='"';continue}}else if((et.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!et.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let E=0;E<t.parameters.length;E++){let k=t.parameters[E];if(k.type==3&&((f=k.inlineEcho)==null?void 0:f.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),s=new fo,r=t.relativeOffset(this.nameStartsOn+3),h=t.relativeOffset(this.nameEndsOn+3);if(s.withParser(e),s.name=this.name,t.isClosingTag&&(s.name=t.innerContent.trim().substring(1)),s.name.includes(":")){let l=s.name.split(":");s.name=l[0],s.inlineName=l.slice(1).join(":")}return s.startPosition=e.positionFromOffset(r,r),s.endPosition=e.positionFromOffset(h,h),s}}});var No,px=Pt(()=>{"use strict";Me();Ka();Ti();un();Ms();_r();mr();Gs();No=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let s=0;s<this.fragments.length;s++){let r=this.fragments[s];if(r.isClosingFragment&&!r.isSelfClosing&&r.name.toLowerCase()==e&&r.index>t.index)return r}return null}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,h=c.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let c=null,f=null,E=null,k=null;for(let U of this.documentOffsets.keys()){if(U>=t){k!=null&&t>k?(c=E,f=k):(c=this.documentOffsets.get(U),f=U);break}E=this.documentOffsets.get(U),k=U}c==null&&(c=E,f=k),c!=null?(h=t-(f!=null?f:0),r=c.line,t<=(f!=null?f:0)?(r=c.line,h=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let l=new cn;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=h,l}getFragments(){return this.fragments}getFragmentsBetween(t,e){let s=[];return this.fragments.forEach(r=>{var c,f,E,k;let h=(f=(c=r.startPosition)==null?void 0:c.index)!=null?f:0,l=(k=(E=r.endPosition)==null?void 0:E.index)!=null?k:0;h>t&&l<e&&s.push(r)}),s}getFragmentContaining(t){var e,s,r,h;for(let l=0;l<this.fragments.length;l++){let c=this.fragments[l];if(((s=(e=c.startPosition)==null?void 0:e.index)!=null?s:0)<t.index&&((h=(r=c.endPosition)==null?void 0:r.index)!=null?h:0)>t.index)return c}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=et.split(et.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],s=[];e.forEach(r=>{var l;let h=(l=r.index)!=null?l:0;for(let c=0;c<this.nodeIndex.length;c++){let f=this.nodeIndex[c];if(h>=f.start&&h<=f.end)return}s.push(h)}),this.fragmentStartIndex=s}setIndexRanges(t){return this.nodeIndex=t,this}fetchAt(t,e){return this.content.substr(t,e)}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}parse(t){if(this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let h=0;h<this.fragmentStartIndex.length;h++){let l=this.fragmentStartIndex[h];if(this.resetIntermediateState(),this.seedOffset=l,this.currentChunkOffset=l,this.parseIntermediateText(),this.isScript){let c=!1;for(let f=h+1;f<this.fragmentStartIndex.length;f++){let E=this.fragmentStartIndex[f];if(this.fetchAt(E,8).toLowerCase()=="<\/script"){h=f-1,this.isScript=!1,c=!0;break}}if(!c)break}}let s=0,r=0;return this.fragments.forEach(h=>{let l=h.name.toLowerCase();(l=="script"||l=="style")&&(h.embeddedIndex=r,this.embeddedIndexedFragments.set(r,h),r+=1),h.index=s,this.indexedFragments.set(s,h),s+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Ni(this.cur)&&$n(this),this.cur==nt.Punctuation_ForwardSlash&&this.next==nt.Punctuation_ForwardSlash){On(this,!0);continue}if(this.cur==nt.Punctuation_ForwardSlash&&this.next==nt.Punctuation_Asterisk){Ln(this,!0);continue}if(this.cur==nt.Punctuation_QuestionMark&&this.next==nt.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],s=[],r=!1,h=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),et.ctypeSpace(this.cur)&&(r=!0),this.next==nt.Punctuation_LessThan){let l=1;this.cur==nt.Punctuation_ForwardSlash&&(l=2);let c=this.fetchAt(this.currentChunkOffset+l,5);if(c.toLowerCase()=="<?php"||c.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==nt.Punctuation_LessThan||this.next==null&&this.cur!=nt.Punctuation_GreaterThan)break;if(!r&&this.cur==nt.Punctuation_LessThan&&this.next==nt.Punctuation_ForwardSlash&&(h=!0),!r&&this.cur!=nt.Punctuation_LessThan&&this.cur!=nt.Punctuation_ForwardSlash&&this.cur!=nt.Punctuation_GreaterThan&&s.push(this.cur),Ni(this.cur)){let l=this.currentIndex;$n(this);let c=new co;c.startPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(c);continue}if(this.cur==nt.Punctuation_ForwardSlash&&this.next==nt.Punctuation_GreaterThan){let l=new hr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),l.parameters=e,l.isSelfClosing=!0,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1);break}if(this.cur==nt.Punctuation_GreaterThan){let l=new hr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),l.parameters=e,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1),l.name.toLowerCase()=="script"&&l.isClosingFragment==!1&&(this.isScript=!0);break}}}}});var Tr,Ja=Pt(()=>{"use strict";Tr=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var bo,Xa=Pt(()=>{"use strict";bo=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function _x(){return jb}var jb,mx=Pt(()=>{"use strict";Ja();Xa();jb={ignoreDirectives:[...Tr,...bo],directives:[],customIfs:[]}});var yt,nt,un=Pt(()=>{"use strict";$k();ox();ax();lx();ux();cx();dr();Sn();fx();Ya();Qa();Bs();Me();Ka();Ti();ks();dx();px();mx();Ms();za();$a();_r();mr();Gs();yt=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.unclosedRegionErrors=[Ht.TYPE_UNEXPECTED_END_OF_INPUT,Ht.TYPE_UNCLOSED_PHP_DIRECTIVE,Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_VERBATIM,Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_FOR_DIRECTIVE,Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new Co(this),this.fragmentsParser=new No,this.fragmentsAnalyzer=new xo(this,this.fragmentsParser),this.parserOptions=_x()}withParserOptions(t){return this.parserOptions=t,this}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}isStartingPhp(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!et.ctypeAlpha(this.next)?!1:this.cur==yt.AtChar&&this.next!=null&&this.prev!=yt.AtChar}isClosingComponent(){return this.cur==yt.Punctuation_GreaterThan&&this.prev!=yt.Punctuation_Minus&&this.prev!=yt.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==yt.Punctuation_Minus||this.peekRelative(3)==yt.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==yt.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==yt.Punctuation_Minus||this.peekRelative(2)==yt.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=yt.AtChar)&&this.next==yt.Punctuation_Exclamation&&this.cur==yt.LeftBrace&&this.peek(2)==yt.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=yt.AtChar)&&this.next==yt.LeftBrace&&this.cur==yt.LeftBrace&&this.next==yt.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}processInputText(t){var U;this.originalContent=t,this.content=et.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],s=e.length,r=this.seedStartLine,h=null,l=0,c=0;for(let b=0;b<s;b++){let y=e[b],R=(U=y.index)!=null?U:0,G=R;h!=null?G=R-h:G=G+1,this.documentOffsets.set(R,{char:G,line:r});let X=0,ct=0;b==0?(ct=G-1,X=0):(X=c+1,ct=R),this.lineIndex.set(r,{char:G,line:r,startIndex:X,endIndex:ct}),this.lastDocumentOffsetKey=R,this.maxLine=r,r+=1,h=R,c=ct,l=X}this.maxLine+=1;let f=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],E=0,k=!1;return f.forEach(b=>{let y=b[0],R=this.content.indexOf(y,E),G=this.content.substr(R,10);if(G.startsWith("@@")||G.startsWith("@{{")){E=this.content.indexOf(y,E),k=!0;return}let X=this.content.indexOf(y,E);if(k&&E==X){E=X;return}let ct=3,dt=!1,z=!1,J=[],at=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(j=>{J.push(j.toLowerCase()),j.length>ct&&(ct=j.length)}),ct+=5,dt=!0),this.parserOptions.directives.length>0&&(ct=3,this.parserOptions.directives.forEach(j=>{at.push(j.toLowerCase()),j.length>ct&&(ct=j.length)}),ct+=5,dt=!1,z=!0);let B=this.fetchAt(X,ct);if(B.startsWith("@{")==!1){let j=B.substring(0,1),pt=B.substring(1,2);if(j=="@"&&et.ctypeAlpha(pt))if(z){let rt=this.breakPreFetch(B).toLowerCase();at.includes(rt)&&this.bladeStartIndex.push(X)}else if(dt){let rt=this.breakPreFetch(B).toLowerCase();J.includes(rt)||this.bladeStartIndex.push(X)}else this.bladeStartIndex.push(X);else j!="@"&&this.bladeStartIndex.push(X)}this.bladeStartPositionIndex.set(X,1),E=X+2,k=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let r=et.replaceAllInString(et.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return r.startsWith("@")&&(r=r.substring(1)),r.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof _t&&(this.lastNode.directiveName==xt.Verbatim||this.lastNode.directiveName==xt.Php))}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Ht.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Ht.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Ht.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:ln.findLeftNeighboringNextPunctuation(t.char,s,e)}punctuationLeftAtCursor(t,e,s=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),s)}punctuationRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:ln.findRightBeighboringNextPunctuation(t.char,s,e)}punctuationRightAtCursor(t,e,s=4){return this.punctuationRightAt(this.positionFromCursor(t,e),s)}wordRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=ln.findRightNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:ln.scanWordAt(r,s,e)}wordRightAtCursor(t,e,s=4){return this.wordRightAt(this.positionFromCursor(t,e),s)}wordLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=ln.findLeftNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:ln.scanWordAt(r,s,e)}wordLeftAtCursor(t,e,s=4){return this.wordLeftAt(this.positionFromCursor(t,e),s)}wordAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:ln.scanWordAt(t.char,s,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?et.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,s=4){return this.wordAt(this.positionFromCursor(t,e),s)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var h;let e=new Map,s=t-3,r=t+3;s<1&&(s=1),r>this.maxLine&&(r=this.maxLine);for(let l=s;l<=r;l++)e.set(l,(h=this.getLineText(l))!=null?h:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let s=this.lineIndex.get(t-1);if(s!=null){let r=s.endIndex+1;return{end:this.inputLen-1,start:r}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}positionFromCursor(t,e){if(t==this.maxLine){let r=this.lineIndex.get(t-1);if(r!=null){let h=r.endIndex+1,l=h+(e-1),c=new cn;return c.offset=l,c.line=t,c.char=e,c.index=l,c}return null}let s=this.lineIndex.get(t);if(s!=null){let r=new cn;return r.offset=s.startIndex+(e-1),r.line=s.line,r.char=e,r.index=s.startIndex+(e-1),r}return null}parse(t){if(Ve.customIfs.clear(),this.parserOptions.customIfs.forEach(c=>{Ve.customIfs.set(c,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,s=e-1;if(e==0&&!this.isVerbatim){let c=new Te;c.withParser(this),c.content=this.prepareLiteralContent(this.content),c.startPosition=this.positionFromOffset(0,0),c.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(c)}else for(let c=0;c<e;c+=1){let f=this.bladeStartIndex[c];if(this.seedOffset=f,c==0&&f>0&&!this.isVerbatim){let k=new Te;k.withParser(this),k.content=this.prepareLiteralContent(this.content.substr(0,f)),k.content.length>0&&(k.startPosition=this.positionFromOffset(0,0),k.endPosition=this.positionFromOffset(f,f-1),this.nodes.push(k))}if(f<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=f,this.resetIntermediateState(),this.parseIntermediateText(),this.isVerbatim){let k=!1;for(let U=c+1;U<this.bladeStartIndex.length;U++){let b=this.bladeStartIndex[U];if(this.fetchAt(b,12)=="@endverbatim"){c=U-1,this.isVerbatim=!1,k=!0;break}}if(k)continue}if(this.isPhpNode){let k=!1;for(let U=c+1;U<this.bladeStartIndex.length;U++){let b=this.bladeStartIndex[U];if(this.fetchAt(b,7)=="@endphp"){c=U-1,this.isPhpNode=!1,k=!0;break}}if(k)continue}if(this.lastNode instanceof In||this.lastNode instanceof wi){let k=-1;for(let U=c;U<this.bladeStartIndex.length;U++){let b=this.bladeStartIndex[U];if(b>this.lastBladeEndIndex){k=b;break}}if(k!=-1){let U=1;this.lastNode instanceof wi&&(U=0);let b=this.lastBladeEndIndex+U,y=this.content.substr(this.lastBladeEndIndex+U,k-this.lastBladeEndIndex-U),R=k-1,G=new Te;G.withParser(this),G.startPosition=this.positionFromOffset(b,b),G.endPosition=this.positionFromOffset(R,R),G.content=y,this.nodes.push(G),this.lastNode=G,this.lastBladeEndIndex=R;continue}}this.lastNode instanceof An&&(f-=2);let E=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(E=!0):E=!0,E){if(c+1<e){let k=this.bladeStartIndex[c+1],U=1;this.lastNode instanceof wi&&(U=0);let b=this.lastBladeEndIndex+U;if(k<b)if(this.lastBladeEndIndex>k)c+2<e&&(k=this.bladeStartIndex[c+2]);else continue;if(this.shouldSkipForward())for(let y=c;y<this.bladeStartIndex.length;y++){let R=this.bladeStartIndex[y];if(R>this.lastBladeEndIndex){k=R;break}}if(c+1==s&&k<=this.lastBladeEndIndex){if(this.isVerbatim)break;let y=this.currentChunkOffset,R=this.content.substr(b),G=new Te;G.withParser(this),G.content=this.prepareLiteralContent(R),G.content.length>0&&(G.startPosition=this.positionFromOffset(y,y),G.endPosition=this.positionFromOffset(k,k-1),this.nodes.push(G));break}else{let y=k-this.lastBladeEndIndex-1;if(y==0||this.isVerbatim)continue;let R=this.content.substr(b,y),G=new Te;G.withParser(this),G.content=this.prepareLiteralContent(R),G.content.length>0&&(G.startPosition=this.positionFromOffset(b,b),G.endPosition=this.positionFromOffset(k,k-1),this.nodes.push(G))}continue}if(c!==s&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(f,f).isBefore(this.lastNode.endPosition)){if(c+1<e){if(this.bladeStartIndex[c+1]<this.lastNode.endPosition.offset)continue}else if(c+1!=s)continue}if(c==s){let k=this.currentIndex+f;if(k<this.inputLen&&!this.isVerbatim){let U=new Te;U.withParser(this),U.content=this.prepareLiteralContent(this.content.substr(k)),U.content.length>0&&(U.startPosition=this.positionFromOffset(k,k),U.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(U));break}}}}let r=0;this.nodes.forEach(c=>{c.index=r,r+=1});let h=null;for(let c=0;c<this.nodes.length;c++){let f=this.nodes[c],E=null;c+1<this.nodes.length&&(E=this.nodes[c+1]),f.prevNode=h,f.nextNode=E,h=f}Ve.determineCandidates(this.nodes),this.nodes=mo.rewrite(this.nodes);let l=new pr;return this.renderNodes=l.associate(this.nodes,this),vo.analyze(this.nodes),yo.analyze(this.nodes),this.nodes.forEach(c=>{if(c instanceof _t){let f=c,E=f.directiveName.toLowerCase();if(f.isClosedBy!=null){let k=f.getImmediateChildren();for(let U=0;U<k.length;U++){let b=k[U];if(b instanceof _t&&b!=f.isClosedBy&&b.isClosedBy!=null){f.containsChildStructures=!0;break}else if(b instanceof yi||b instanceof Wi||b instanceof Yi){f.containsChildStructures=!0;break}}}E=="switch"&&f.isClosedBy==null||E=="endswitch"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_SWITCH,f,"Unclosed switch control structure",0)):E=="php"?f.hasDirectiveParameters==!1&&f.isClosedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_PHP_DIRECTIVE,f,"Unclosed @php directive",0)):E=="endphp"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,f,"Unpaired @endphp directive",0)):E=="verbatim"&&f.isClosedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_VERBATIM,f,"Unclosed @verbatim directive",0)):E=="endverbatim"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,f,"Unpaired @endverbatim directive",0)):E=="for"&&f.isClosedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_FOR_DIRECTIVE,f,"Unclosed @for directive",0)):E=="for"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,f,"Unpaired @endfor directive",0)):E=="forelse"?(f.isClosedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,f,"Unclosed @forelse directive",0)),f.findFirstDirectChildDirectiveOfType("empty")==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,f,"@forelse missing @empty directive",1))):E=="endforelse"&&f.isOpenedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,f,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(c=>{var f,E,k,U,b,y,R,G,X,ct,dt,z;c instanceof yi?(c.fragment=(E=(f=c.constructedFrom)==null?void 0:f.fragment)!=null?E:null,c.fragmentPosition=(U=(k=c.constructedFrom)==null?void 0:k.fragmentPosition)!=null?U:3):c instanceof Yi?(c.fragment=(y=(b=c.constructedFrom)==null?void 0:b.fragment)!=null?y:null,c.fragmentPosition=(G=(R=c.constructedFrom)==null?void 0:R.fragmentPosition)!=null?G:3):c instanceof Wi&&(c.fragment=(ct=(X=c.constructedFrom)==null?void 0:X.fragment)!=null?ct:null,c.fragmentPosition=(z=(dt=c.constructedFrom)==null?void 0:dt.fragmentPosition)!=null?z:3)}),ko.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var s,r,h,l;e instanceof Te||t.push({start:(r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0,end:(l=(h=e.endPosition)==null?void 0:h.index)!=null?l:0})}),t}createChildDocuments(t){t.forEach(e=>{var s,r,h,l,c,f,E,k;if(e instanceof _t&&e.isClosedBy!=null){let U=e.isClosedBy,b=((r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0)-1,y=((l=(h=U.endPosition)==null?void 0:h.index)!=null?l:0)-b;e.nodeContent=this.content.substr(b,y);let R=(f=(c=e.endPosition)==null?void 0:c.index)!=null?f:0,G=((k=(E=U.startPosition)==null?void 0:E.index)!=null?k:0)-1-R,X=this.content.substr(R,G);e.childrenDocument=be.childFromText(X,Ci(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=et.split(et.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}parseIntermediateText(){this.currentContent=[],this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,t=!0;break}if(this.isStartingClosingComponentTag()){let e=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(e,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],t=!0;break}if(this.isStartingOpeningComponentTag()){let e=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(e,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,t=!0;break}if(this.isStartingEscapedEcho()){let e=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(e),this.currentContent=[],this.currentIndex+=3,t=!0;break}if(this.isStartingBladeNodeStructure()){let e=this.peek(2),s=this.peek(3);if(e==yt.Punctuation_Minus&&s==yt.Punctuation_Minus){let r=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(r),this.currentContent=[],this.currentIndex+=4,t=!0;break}else if(e==yt.LeftBrace){let r=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(r+1),this.currentContent=[],this.currentIndex+=3,t=!0;break}else{let r=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(r+1),this.currentContent=[],this.currentIndex+=2,t=!0;break}}}return t}peek(t){if(t==this.charLen){let e=et.split(et.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,e.forEach(s=>{this.chars.push(s),this.charLen+=1})}return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Ni(this.cur)&&$n(this),this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,On(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Ln(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_QuestionMark&&this.next==yt.Punctuation_GreaterThan||this.next==null){let s=new wi;e&&(s=new po),s.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),s.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let r=s.startPosition.index,h=s.endPosition.index-s.startPosition.index+1;s.sourceContent=this.content.substr(r,h),this.nodes.push(s),this.lastNode=s;break}}}scanToEndOfComponentTag(t,e){let s=!1,r=!1,h=-1,l=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!s&&(s=!0,h=this.currentIndex),et.ctypeSpace(this.cur)&&!r&&(r=!0,l=this.currentIndex),Ni(this.cur)){this.shouldIgnoreStructures=!0,$n(this),this.shouldIgnoreStructures=!1;continue}let f=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!f)&&(c=!0,h!=-1?(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2)):l!=-1&&(this.currentIndex=l-2,this.currentContent=this.currentContent.slice(0,l-2))),f||c){let E=new An;E.withParser(this),E.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),E.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let k=E.startPosition.index,U=E.endPosition.index-E.startPosition.index+1,b=k+U;E.sourceContent=this.content.substr(k,U),E.isClosingTag=e,E.isSelfClosing=this.prev==yt.Punctuation_ForwardSlash,E.offset={start:k,end:b,length:U};let y=3;E.isSelfClosing&&(y+=1),E.innerContent=this.content.substr(E.startPosition.index+3,E.endPosition.index-E.startPosition.index-y),c&&E.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,E,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(E),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=E,this.nodes.push(E);break}}}scanToEndOfEscapedEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,r=this.currentIndex),et.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.Punctuation_Exclamation&&this.next==yt.Punctuation_Exclamation&&this.peekRelative(2)==yt.RightBrace||l){let c=this.currentIndex+2,f=new jn;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let E=f.startPosition.index,k=f.endPosition.index-f.startPosition.index+1,U=E+k;f.sourceContent=this.content.substr(E,k),f.offset={start:E,end:U,length:k},l&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var c,f,E,k,U,b,y,R,G;let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,r=this.currentIndex),et.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),this.next==null&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.Punctuation_Minus&&this.next==yt.Punctuation_Minus||this.next==null){let X=this.peekRelative(2),ct=this.peekRelative(3);if(X==yt.RightBrace&&ct==yt.RightBrace||this.next==null){let dt=this.currentIndex+3,z=new In;z.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),z.endPosition=this.positionFromOffset(dt+this.seedOffset,dt+this.seedOffset),z.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(dt-4+this.seedOffset,dt-4+this.seedOffset)},z.withParser(this);let J=z.startPosition.index,at=z.endPosition.index-z.startPosition.index+1,B=J+at;z.sourceContent=this.content.substr(J,at),z.offset={start:J,end:B,length:at},l&&z.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_COMMENT,z,"Unexpected end of input while parsing comment",0)),z.innerContent=this.content.substr((E=(f=(c=z.innerContentPosition)==null?void 0:c.start)==null?void 0:f.index)!=null?E:0,((b=(U=(k=z.innerContentPosition)==null?void 0:k.end)==null?void 0:U.index)!=null?b:0)-((G=(R=(y=z.innerContentPosition)==null?void 0:y.start)==null?void 0:R.index)!=null?G:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=z,this.nodes.push(z);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,r=this.currentIndex),et.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),Ni(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let f=xs(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(c),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.RightBrace&&this.next==yt.RightBrace&&this.peekRelative(2)==yt.RightBrace||l){let c=this.currentIndex+1,f=new Kn;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let E=f.startPosition.index-1,k=f.endPosition.index-f.startPosition.index+3,U=E+k;f.sourceContent=this.content.substr(E,k),f.offset={start:E,end:U,length:k},l&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,r=this.currentIndex),et.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),Ni(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let f=xs(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(c),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.RightBrace&&this.next==yt.RightBrace||l){let c=this.currentIndex+1,f=new gi;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let E=f.startPosition.index-1,k=f.endPosition.index-f.startPosition.index+2,U=E+k;f.sourceContent=this.content.substr(E,k),f.offset={start:E,end:U,length:k},l&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,s){let r=new _t;if(r.withParser(this),t==xt.Verbatim)this.isVerbatim=!0;else if(t==xt.Php)this.isPhpNode=!0;else if((t==xt.EndVerbatim||t==xt.EndPhp)&&this.nodes[this.nodes.length-1]instanceof Te){let E=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof _t){let k=this.nodes[this.nodes.length-1];(k.directiveName==xt.Verbatim||k.directiveName==xt.Php)&&(k.innerContent=E.content)}}r.directiveName=t.trim(),r.name=t.trim();let h=r.name.toLowerCase();h=="endcan"||h=="endcannot"||h=="endauth"||h=="endguest"||h=="endenv"||h=="endproduction"?(r.name="if",r.isClosingDirective=!0):t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),c=this.positionFromOffset(this.seedOffset+s,this.seedOffset+s);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index-1,E=r.endPosition.index-r.startPosition.index+1,k=f+E;r.sourceContent=this.content.substr(f,E),r.offset={start:f,end:k,length:E}}return r}makeDirectiveWithParameters(t,e,s,r){var E,k;let h=this.makeDirective(t.trim(),e,s);this.isPhpNode&&t==xt.Php&&(this.isPhpNode=!1),h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let l=r.content.trim();l.startsWith("(")&&l.endsWith(")")&&(l=l.substring(1),l=l.substring(0,l.length-1),l=l.trim(),h.hasJsonParameters=l.startsWith("{")&&l.endsWith("}"));let c=this.positionFromOffset(r.start,r.start),f=this.positionFromOffset(r.end,r.end);if(h.startPosition=(k=(E=h.namePosition)==null?void 0:E.start)!=null?k:null,h.endPosition=f,h.directiveParametersPosition={start:c,end:f},h.startPosition!=null&&h.endPosition!=null){let U=h.startPosition.index-1,b=h.endPosition.index-h.startPosition.index+1,y=U+b;h.sourceContent=this.content.substr(U,b),h.offset={start:U,end:y,length:b}}return h}scanToEndOfDirective(){let t=this.currentIndex,e="",s=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Ln(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,On(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.NewLine){s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let r=Hs(this);if(this.cur!=yt.LeftParen&&r.didFind&&et.ctypePunct(r.char)&&r.char!=yt.LeftParen&&r.char!=yt.Punctuation_Minus){let h=0,l=!1;et.ctypeSpace(this.cur)?(h=1,l=!0):this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let c=this.makeDirective(e.trim(),t,s-h);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-h,l&&(this.currentIndex-=1);break}if(et.ctypeSpace(this.cur)){let h=Hs(this);if(h.didFind&&h.char==yt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=h.index,this.checkCurrentOffsets();let l=Vs(this),c=this.makeDirectiveWithParameters(e.trim(),t,s,l);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let l=this.makeDirective(e.trim(),t,s);this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==yt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let h=Vs(this),l=this.makeDirectiveWithParameters(e.trim(),t,s,h);this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(s=>{s instanceof Te?e+=s.content:s instanceof Yi||s instanceof Wi||s instanceof yi?e+=s.nodeContent:e+=s.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let s=[];return this.nodes.forEach(r=>{var h,l,c,f;((l=(h=r.startPosition)==null?void 0:h.offset)!=null?l:0)>t.offset&&((f=(c=r.endPosition)==null?void 0:c.offset)!=null?f:0)<e.offset&&s.push(r)}),s}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,h=c.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let c=null,f=null,E=null,k=null;for(let U of this.documentOffsets.keys()){if(U>=t){k!=null&&t>k?(c=E,f=k):(c=this.documentOffsets.get(U),f=U);break}E=this.documentOffsets.get(U),k=U}c==null&&(c=E,f=k),c!=null?(h=t-(f!=null?f:0),r=c.line,t<=(f!=null?f:0)?(r=c.line,h=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let l=new cn;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=h,l}},nt=yt;nt.K_CHAR="char",nt.K_LINE="line",nt.NewLine=`
`,nt.AtChar="@",nt.Punctuation_Colon=":",nt.Punctuation_QuestionMark="?",nt.LeftParen="(",nt.RightParen=")",nt.LeftBrace="{",nt.RightBrace="}",nt.String_Terminator_DoubleQuote='"',nt.String_Terminator_SingleQuote="'",nt.Punctuation_LessThan="<",nt.Punctuation_GreaterThan=">",nt.Punctuation_Equals="=",nt.Punctuation_Exclamation="!",nt.LeftBracket="[",nt.RightBracket="]",nt.Punctuation_Comma=",",nt.Punctuation_Minus="-",nt.Punctuation_Asterisk="*",nt.Punctuation_ForwardSlash="/",nt.Punctuation_Underscore="_",nt.String_EscapeCharacter="\\"});var qe,Za=Pt(()=>{"use strict";Me();qe=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!qe.isLiteralType(r)&&r.startPosition!=null&&r.startPosition.index>t.index)return r}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let s=null;for(let r=0;r<e.length;r++){let h=e[r];if(!qe.isLiteralType(h)&&h.startPosition!=null){if(h.startPosition.index>t.index)break;s=h}}return s}static findNodeAtPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!qe.isLiteralType(r)&&r.startPosition!=null&&r.endPosition!=null&&t.index>=r.startPosition.index&&t.index<=r.endPosition.index)return r}return null}static isLiteralType(t){return t instanceof Te}static findNodesBeforePosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];if(!qe.isLiteralType(h)&&h.startPosition!=null&&h.endPosition!=null){if(h.startPosition.index>t.index)break;s.push(h)}}return s}static findNodesAfterPosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];qe.isLiteralType(h)||h.startPosition!=null&&h.startPosition.index>t.index&&s.push(h)}return s}}});var Ao,Tx=Pt(()=>{"use strict";Za();Ao=class{constructor(t){this.doc=t}getNodeAt(t,e){return qe.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return qe.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return qe.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return qe.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return qe.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,s=4){return this.doc.getParser().wordLeftAtCursor(t,e,s)}wordRightAt(t,e,s=4){return this.doc.getParser().wordRightAtCursor(t,e,s)}wordAt(t,e,s=4){return this.doc.getParser().wordAtCursor(t,e,s)}punctuationLeftAt(t,e,s=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,s)}punctuationRightAt(t,e,s=4){return this.doc.getParser().punctuationRightAtCursor(t,e,s)}}});var Io,gx=Pt(()=>{"use strict";Io=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(s=>{s.getErrors().forEach(r=>{t.includes(r.hash())==!1&&(t.push(r.hash()),e.push(r))})}),this.doc.getParser().getErrors().forEach(s=>{t.includes(s.hash())==!1&&(t.push(s.hash()),e.push(s))}),e}}});var So,Ex=Pt(()=>{"use strict";Me();Za();So=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let s=0;s<e.length;s++){let r=e[s];if(r instanceof _t&&r.directiveName==t)return r}return null}getNodeAt(t){return qe.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return qe.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return qe.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return qe.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return qe.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof In&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Te&&t.push(e)}),t}}});var Oo,kx=Pt(()=>{"use strict";Me();Ti();un();Ms();Gs();Oo=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new De;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=et.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!et.ctypeSpace(this.cur)){if(Ni(this.cur)){let s=this.cur,r=xs(this);this.pushChar(s),this.currentContent=this.currentContent.concat(r.value.split("")),this.pushChar(s),this.currentIndex=r.endedOn;continue}if(this.cur==nt.LeftBracket){this.checkCurrentContent(),this.tokens.push(new zn);continue}else if(this.cur==nt.RightBracket)this.checkCurrentContent(),this.tokens.push(new ur);else if(this.cur==nt.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new cr),this.currentContent=[];else if(this.cur==nt.Punctuation_Equals&&this.next==nt.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new fr);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,s)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=s==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof zn){let r=this.findEndOfArray(t.slice(e));return e+=r.length,r.shift(),r.pop(),this.createArray(r)}return null}createArray(t){let e=new Es;this.createdArrays.push(e);for(let s=0;s<t.length;s++){let r=t[s],h=null;if(s+1<t.length&&(h=t[s+1]),h instanceof cr||h==null){let l=new gs;l.value=r,e.elements.push(l),s+=1;continue}else if(h instanceof fr){let l=t[s+2];if(l instanceof zn){let c=this.findEndOfArray(t.slice(s+2)),f=new gs;s+=c.length+1,c.shift(),c.pop(),f.key=r,f.value=this.createArray(c),e.elements.push(f);continue}else{let c=new gs;c.key=r,c.value=l,e.elements.push(c),s+=3;continue}}else if(r instanceof zn){let l=this.findEndOfArray(t.slice(s)),c=new gs;s+=l.length,l.shift(),l.pop(),c.value=this.createArray(l);continue}}return e}findEndOfArray(t){let e=[],s=0;for(let r=0;r<t.length;r++){let h=t[r];if(e.push(h),h instanceof zn){s+=1;continue}else if(h instanceof ur){if(s-=1,s<=0)break;continue}}return e}}});var Lo,xx=Pt(()=>{"use strict";Lo=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var vs,vx=Pt(()=>{"use strict";Me();xx();vs=class{static print(t,e,s){let r=new Lo(e,s);if(r.append("[").newLine(),t.elements.length>0){let h="";r.indent(),t.elements.forEach(l=>{t.maxKeyLength>0&&l.key!=null&&(h=" ".repeat(t.maxKeyLength-l.key.sourceContent.length)),l.key!=null?(r.append(l.key.sourceContent+h).append(" => "),l.value!=null&&(l.value instanceof Es?r.append(vs.print(l.value,e,s+1)):r.append(l.value.sourceContent))):l.value!=null&&(l.value instanceof Es?r.append(vs.print(l.value,e,s+1)):r.append(l.value.sourceContent)),r.appendNoRepeat(",").newLine(),l.isLast||r.indent()})}return s>1&&r.outdent(),r.append("]"),r.getContents()}}});var gr,yx=Pt(()=>{"use strict";Ti();gr=class{static printComment(t,e,s){if(t.isMultiline()){let r=et.breakByNewLine(t.innerContent.trim()),h=[];r.forEach(f=>{h.push(" ".repeat(e+s)+f.trim())});let l=h.join(`
`),c=`{{--
`;return c+=l,c+=`
`+" ".repeat(s)+"--}}",c}return"{{-- "+t.innerContent.trim()+" --}}"}}});var Po,Cx=Pt(()=>{"use strict";Ti();Po=class{static printDirective(t,e,s,r){let h="@"+t.directiveName.trim();if(t.hasDirectiveParameters){let l=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&r&&t.hasValidJson()){let c=t.getPhpContent().trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1));let f=r(c);l="("+f+")"}}else if(e.formatDirectivePhpParameters&&s!=null&&t.hasValidPhp()){let c=t.getPhpContent().trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1));let f=s("<?php "+c);f=et.replaceAllInString(f,`
`," "),t.directiveName.toLowerCase()=="forelse"&&(f=f.substring(9),f=f.substring(0,f.length-14)),l="("+f+")"}h+=" ".repeat(e.spacesAfterDirective)+l}return h}}});var ys,Nx=Pt(()=>{"use strict";Me();Ti();ys=class{static printEcho(t,e){let s="{{ ",r=" }}";t instanceof jn?(s="{!! ",r=" !!}"):t instanceof Kn&&(s="{{{ ",r=" }}}");let h=s,l=t.content.trim();if(e!=null&&t.hasValidPhp()){let c=e("<?php "+l);c=et.replaceAllInString(c,`
`," "),l=c}return h+=l+r,h}}});var fn,bx=Pt(()=>{"use strict";Ti();fn=class{static indentRelative(t,e){let s=et.breakByNewLine(t),r=[];for(let c=0;c<s.length;c++)if(s[c].trim().length>0){r=s.slice(c);break}for(let c=r.length-1;c>=0&&r[c].trim().length==0;c--)r.pop();let h=-1,l="";for(let c=0;c<r.length;c++){let f=r[c],E=f.trimLeft(),k=f.length-E.length;(c==0||k<h)&&(h=k,l=f)}if(h>=0){let c=" ".repeat(e);for(let f=0;f<r.length;f++){let E=r[f];if(E.trim().length==0){r[f]="";continue}let k=E.substring(h);if(f==0){r[f]=E.trimLeft();continue}else r[f]=c+k}}return r.join(`
`)}static shiftIndent(t,e,s=!1){let r=et.breakByNewLine(t.trim()),h=[];for(let l=0;l<r.length;l++){if(l==0&&s){h.push(r[l]);continue}let c=r[l];h.push(" ".repeat(e)+c)}return h.join(`
`)}static shiftClean(t,e){let s=et.breakByNewLine(t),r=[],h=" ".repeat(e),l=!1;return s.forEach(c=>{c.trim().length>0&&(l=!0),l&&r.push(h+c)}),r.join(`
`)}static inferIndentLevel(t,e,s){let r=0,h=-1;for(let l=0;l<t.length;l++){let c=t[l];if(c.includes(e)){let f=c.trimLeft();r=c.length-f.length,h=l;break}}if(h>0)for(let l=h-1;l>=0;l--){let c=t[l],f=c.trim(),E=c.trimLeft(),k=c.length-f.length;if(E.length!=0&&k!=r&&k<r){let U=r-k;return{targetLevel:r,referenceLevel:k,sourceTabSize:U}}}return{targetLevel:r,referenceLevel:r,sourceTabSize:s}}static indent(t,e,s){let r=fn.inferIndentLevel(t,e,s);return" ".repeat(r.targetLevel)}}});var Do,Ax=Pt(()=>{"use strict";Me();kx();Ti();Sn();vx();yx();Cx();Nx();bx();Do=class{constructor(t){this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}setParentTransformer(t){return this.parentTransformer=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(s=>{s instanceof Te?e+=s.getOutputContent():s instanceof wi?e+=s.sourceContent:s instanceof _t&&s.directiveName=="verbatim"&&(e+=s.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t){return Po.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter)}makeSlug(t){t<=2&&(t=7);let e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length;for(let l=0;l<t-1;l++)e+=s.charAt(Math.floor(Math.random()*r));let h="B"+e+"B";return this.slugs.includes(h)?this.makeSlug(t+1):(this.slugs.push(h),h)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let s=this.open(e),r=this.close(e);return`
`+s+r+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((s,r)=>{let h=this.open(r),l=this.indentLevel(h),c=s.sourceContent;this.phpTagFormatter!=null&&s.hasValidPhp()&&(c=this.phpTagFormatter(c),c=fn.shiftIndent(c,l,!0)),e=e.replace(h,c)}),this.dynamicElementPhpNodes.forEach((s,r)=>{e=et.replaceAllInString(e,r,this.printInlinePhp(s))}),this.inlinePhpNodes.forEach((s,r)=>{e=e.replace(r,this.printInlinePhp(s))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e),e=et.replaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let s=!0,r=!0,h=0,l=0,c=0,f=!0;for(let E=0;E<e.length;E++){let k=e[E];k instanceof gi&&k.isInlineEcho?(s=!1,h+=1,l+=1):k instanceof Te?(c+=1,k.content.trim().length>0&&(r=!1)):l+=1}return h==0&&(f=!0),l>0&&s==!0?!1:(r==!1&&l==0&&(f=!0),r==!0&&l==0&&(f=!0),f)}preparePairedDirective(t){var l;let e=this.makeSlug(t.sourceContent.length),s=t.directiveName.toLowerCase(),r=(l=t.childrenDocument)==null?void 0:l.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){let c="",f=`${this.open(e)}
`;return s=="php"||s=="verbatim"?(c=this.makeSlug(15),f+=this.pair(c)):this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1?(c=this.makeSlug(15),f+=this.pair(c,r)):f+=r,f+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(c)),this.virtualStructureClose.push(this.close(c)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:r,slug:e,directive:t,virtualElementSlug:c,isInline:!1}),f}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let h=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:r,slug:h,directive:t,virtualElementSlug:"",isInline:!0}),h+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var s,r,h,l,c,f,E,k,U;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let dt=this.makeSlug((r=(s=t.constructedFrom)==null?void 0:s.sourceContent.length)!=null?r:0),z=this.makeSlug((l=(h=t.elseNode)==null?void 0:h.sourceContent.length)!=null?l:0),J=(c=t.truthDocument)==null?void 0:c.document.transform().setParentTransformer(this).toStructure(),at=(f=t.falseDocument)==null?void 0:f.document.transform().setParentTransformer(this).toStructure(),B={truthDoc:J,falseDoc:at,forElse:t,truthClose:this.close(dt),emptyOpen:this.open(z),pairClose:this.close(z),truthSlug:dt,falseSlug:z},j=this.open(dt);return j+=J,j+=B.truthClose,j+=`
`+B.emptyOpen+`
`,j+=at+"",j+=B.pairClose,this.registerForElseWithEmpty(B),j}let b=t.constructedFrom,y=(E=t.truthDocument)==null?void 0:E.document.transform().setParentTransformer(this).toStructure(),R=this.makeSlug(b.sourceContent.length),G=this.makeSlug((U=(k=b.isClosedBy)==null?void 0:k.sourceContent.length)!=null?U:0),X={truthDoc:y,falseDoc:"",forElse:t,truthSlug:R,falseSlug:"",pairClose:this.close(G),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push(X);let ct=this.open(R);return ct+=y,ct+=this.close(R),ct}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,s){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,s):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:s}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let s=this.makeSlug(10),r=this.makeSlug(10),h={node:t,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(r)};return this.registerVirtualComment(h),h.pairOpen+`
`+h.virtualElement+`
`+h.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var s,r;if(t.isClosingTag)return((s=t.name)==null?void 0:s.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((r=t.name)==null?void 0:r.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let h=t.name.inlineName;h.startsWith(":")&&(h=h.substring(1)),e+='slot name="'+h+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(h=>{var l,c;if(h.type==0)if(h.isExpression){let f=this.makeSlug(h.content.length);this.registerExpressionParameter(f,h),e+=f+" "}else e+=h.content+" ";else if(h.type==2)e+=h.name+" ";else if(h.type==1){let f=this.makeSlug((c=(l=h.directive)==null?void 0:l.sourceContent.length)!=null?c:0);this.registerDirectiveParameter(f,h),e+=f+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let s=[],r="";t.cases.forEach((b,y)=>{var z,J;let R=b.head,G=(z=b.childDocument)==null?void 0:z.document.transform().setParentTransformer(this).toStructure(),X=this.makeSlug(R.sourceContent.length),ct=this.makeSlug(5),dt={case:b,slug:X,doc:G,virtualOpen:this.selfClosing(ct),virtualClose:this.close(ct),pairOpen:this.open(X),pairClose:this.close(X),isFirst:y==0,isLast:y==t.cases.length-1,leadingClose:"",leadingOpen:""};if(b.leadingDocument!=null){let at=this.makeSlug(25);dt.leadingOpen=this.open(at),dt.leadingClose=this.close(at),r+=`
`+b.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}r+=dt.pairOpen,((J=b.head)==null?void 0:J.directiveName)=="default"&&(r+=dt.virtualOpen),r+=G,r+=dt.pairClose,s.push(dt)});let h=s[0].pairOpen,l=s[s.length-1].pairClose,c=this.makeSlug(10),f=this.open(c),E=this.close(c),k={switchNode:t,pairOpen:h,pairClose:l,structures:s,virtualSwitchClose:E,virtualSwitchOpen:f},U=`
`+f+`
`+r+`
`+E;return this.registerSwitchStatement(k),U}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}prepareConditions(t){if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.chain.length==1&&t.constructedFrom!=null){let f=t.constructedFrom.clone();return f.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(f)}let s=[],r="";t.logicBranches.forEach((f,E)=>{var G,X,ct,dt;let k=f.head,U=(G=f.childDocument)==null?void 0:G.document.transform().setParentTransformer(this).toStructure(),b=this.makeSlug(k.sourceContent.length),y=this.makeSlug(10),R={branch:f,slug:b,doc:U,pairOpen:this.open(b),pairClose:this.close(b),virtualOpen:this.open(y),virtualClose:this.close(y),isFirst:E==0,isLast:E==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(((X=f.head)==null?void 0:X.directiveName)=="else"){r+=`
`+R.pairOpen;let z=this.makeSlug(25);f.head.containsChildStructures==!1&&f.head.containsAnyFragments==!1?(R.virtualBreakOpen=this.open(z),R.virtualBreakClose=this.close(z),r+=R.virtualBreakOpen+`
`,r+=U,r+=`
`+R.virtualBreakClose+`
`+R.pairClose):(R.virtualBreakOpen=this.selfClosing(z),r+=R.virtualBreakOpen+`
`,r+=U,r+=`
`+R.pairClose)}else if(((ct=f.head)==null?void 0:ct.containsAnyFragments)==!1&&((dt=f.head)==null?void 0:dt.containsChildStructures)==!1){let z=this.makeSlug(25);R.virtualBreakOpen=this.open(z),R.virtualBreakClose=this.close(z),r+=R.pairOpen,r+=`
`+R.virtualBreakOpen,r+=U,r+=`
`+R.virtualBreakClose,r+=R.pairClose}else r+=R.pairOpen,r+=`
`,r+=U,r+=`
`,r+=R.pairClose;s.push(R)});let h=s[0].pairOpen,l=s[s.length-1].pairClose,c={pairOpen:h,pairClose:l,structures:s,condition:t};return this.registerCondition(c),r}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),e+" "}toStructure(){let t="";this.doc.getRenderNodes().forEach(s=>{s instanceof Te?t+=s.content:s instanceof Wi?s.cases.length>0?t+=this.prepareSwitch(s):t+=this.preparePairedDirective(s.constructedFrom):s instanceof yi?t+=this.prepareConditions(s):s instanceof _t?t+=this.prepareDirective(s):s instanceof gi?t+=this.prepareEcho(s):s instanceof Yi?t+=this.prepareForElse(s):s instanceof In?t+=this.prepareComment(s):s instanceof An?t+=this.prepareComponent(s):s instanceof wi&&(t+=this.preparePhpBlock(s))});let e=this.doc.getParser().getFragmentsContainingStructures();if(e.length>0){let s=be.fromText(t);e.forEach(r=>{var b,y,R,G,X,ct,dt,z;let h=this.doc.getParser().getText(((y=(b=r.start.endPosition)==null?void 0:b.offset)!=null?y:0)+1,(G=(R=r.end.startPosition)==null?void 0:R.offset)!=null?G:0),l=s.getParser().getFragmentsParser().getEmbeddedFragment(r.start.embeddedIndex),c=s.getParser().getFragmentsParser().getClosingFragmentAfter(l),f=s.getParser().getText(((ct=(X=l.endPosition)==null?void 0:X.offset)!=null?ct:0)+1,(z=(dt=c==null?void 0:c.startPosition)==null?void 0:dt.offset)!=null?z:0),E=this.makeSlug(16),k=r.start.name.toLowerCase()=="script",U=E;k?U="//"+E:U="/*"+E+"*/",t=t.replace(f,U),this.registerEmbeddedDocument(E,h,k)})}return t}withOptions(t){return this.transformOptions=t,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((s,r)=>{let h=this.selfClosing(r),l=this.printDirective(s);e=e.replace(h,l)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((s,r)=>{e=e.replace(r,this.printDirective(s))}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((s,r)=>{let h=ys.printEcho(s,this.phpFormatter);e=et.replaceAllInString(e,r,h)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((s,r)=>{let h=this.printDirective(s);e=et.replaceAllInString(e,r,h)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let s=t.trim();return s.startsWith("<?php")==!1&&(s="<?php "+s),s=this.blockPhpFormatter(s),e&&(s=`
`+s+`
`),s}transformPairedDirectives(t){let e=t;return this.pairedDirectives.forEach((s,r)=>{var f;let h=s.directive;if(s.virtualElementSlug.length>0){let E=this.open(s.virtualElementSlug),k=this.close(s.virtualElementSlug);this.virtualStructureOpens.push(E),this.removeLines.push(E),this.removeLines.push(k)}let l=this.open(r),c=this.close(r);if(h.directiveName.trim().toLowerCase()=="php"){let E=this.open(s.virtualElementSlug),k=this.indentLevel(E),U=s.directive.sourceContent,b=fn.shiftIndent(this.transformBlockPhp(h.innerContent,!0),k,!0);e=e.replace(l,U),e=e.replace(E,b)}else if(h.directiveName.trim().toLowerCase()=="verbatim"){let E=s.directive.sourceContent+`
`+fn.shiftClean(h.innerContent,this.transformOptions.tabSize);e=e.replace(l,E)}else e=e.replace(l,this.printDirective(s.directive));e=e.replace(c,(f=s.directive.isClosedBy)==null?void 0:f.sourceContent)}),this.inlineDirectives.forEach((s,r)=>{e=et.replaceAllInString(e,r,s.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(s=>{var E;let r=s.forElse.constructedFrom,h=this.open(s.truthSlug),l=this.close(s.truthSlug),c=this.printDirective(r),f=(E=r.isClosedBy)==null?void 0:E.sourceContent;e=e.replace(h,c),e=e.replace(l,f)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(s=>{var c,f;let r=this.open(s.truthSlug),h=s.forElse.constructedFrom,l=this.printDirective(h);e=e.replace(r,l),e=e.replace(s.pairClose,(c=h.isClosedBy)==null?void 0:c.sourceContent),e=e.replace(s.emptyOpen,(f=s.forElse.elseNode)==null?void 0:f.sourceContent),this.removeLines.push(s.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,ys.printEcho(s,this.phpFormatter))}),this.spanEchos.forEach((s,r)=>{e=e.replace(r,ys.printEcho(s,this.phpFormatter))}),e}transformConditions(t){let e=t;return this.conditions.forEach(s=>{s.structures.forEach(r=>{let h=r.branch.head;if(r.virtualBreakOpen.length>0&&this.removeLines.push(r.virtualBreakOpen),r.virtualBreakClose.length>0&&(e=e.replace(r.virtualBreakClose,r.virtualBreakClose+`
`),this.removeLines.push(r.virtualBreakClose)),this.virtualStructureOpens.push(r.virtualOpen),this.removeLines.push(r.virtualOpen),this.removeLines.push(r.virtualClose),!r.isLast)this.removeLines.push(r.pairClose),e=e.replace(r.pairOpen,this.printDirective(h));else{e=e.replace(r.pairOpen,this.printDirective(h));let l=h.isClosedBy;e=e.replace(r.pairClose,this.printDirective(l))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(s=>{let r=s.switchNode.constructedFrom;e=e.replace(s.virtualSwitchOpen,this.printDirective(r));let h=r.isClosedBy;e=e.replace(s.virtualSwitchClose,h.sourceContent),s.structures.forEach(l=>{let c=l.case.head;this.removeLines.push(l.virtualClose),this.removeLines.push(l.virtualOpen),l.isLast?(e=e.replace(l.pairOpen,this.printDirective(c)),this.removeLines.push(l.pairClose)):l.isFirst?(this.removeLines.push(l.pairClose),e=e.replace(l.pairOpen,this.printDirective(c))):(this.removeLines.push(l.pairClose),e=e.replace(l.pairOpen,this.printDirective(c)))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((s,r)=>{let h=this.close(r),l=this.open(r);this.removeLines.push(h);let c=s.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters&&this.phpFormatter!=null&&s.hasValidPhp()){let f=s.getPhpContent().trim();f.startsWith("(")&&f.endsWith(")")&&(f=f.substring(1),f=f.substring(0,f.length-1));let E=this.phpFormatter("<?php "+f);E=et.replaceAllInString(E,`
`," ");let k=new Oo,U=k.parse(E),b=this.indentLevel(l);U!=null&&(E=vs.print(U,this.transformOptions.tabSize,1),b>0&&(E=et.removeEmptyNewLines(fn.shiftIndent(E,b,!0))),c="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+E+")")}}catch{c=s.sourceContent}e=e.replace(l,c)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((s,r)=>{let h=this.close(r),l=this.open(r);this.removeLines.push(h),e=e.replace(l,s.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,gr.printComment(s,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let s=this.structureLines[e];if(s.includes(t)){let r=s.trimLeft();return s.length-r.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(s=>{let r=s.node;e=e.replace(s.pairOpen,gr.printComment(r,this.transformOptions.tabSize,this.indentLevel(s.pairOpen))),this.removeLines.push(s.pairClose),this.removeLines.push(s.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((s,r)=>{e=et.replaceAllInString(e,r,s.nodeContent)}),e}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((s,r)=>{e=et.replaceAllInString(e,r,s.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((s,r)=>{e=et.replaceAllInString(e,r,s.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((s,r)=>{let h=s.directive;e=e.replace(r,this.printDirective(h))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((s,r)=>{e=e.replace(r,s.content)}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((s,r)=>{e=e.replace(r,ys.printEcho(s,this.phpFormatter))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((s,r)=>{e=e.replace(r,this.printDirective(s))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((s,r)=>{let h="",l=0;s.isScript?h="//"+r:h="/*"+r+"*/",l=this.indentLevel(h),e.includes(h)&&(e=e.replace(h,fn.indentRelative(s.content,l)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(s=>{e=e.replace(s,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],s=et.breakByNewLine(t),r=!1;for(let h=0;h<s.length;h++){let l=s[h].trim();if(r){if(l.length==0)continue;r=!1}else r=this.shouldCleanAfter(l);if(this.shouldCleanLine(l))for(let c=e.length-1;c>0&&e[c].trim().length==0;c--)e.pop();if(!this.removeLines.includes(l)){let c=s[h];this.removeLines.forEach(f=>{c.includes(f)&&(c=c.replace(f,""))}),e.push(c)}}return e.join(`
`)}reflowSlugs(t){let e=t;return this.slugs.forEach(s=>{let r=this.open(s),h=this.close(s),l=this.selfClosing(s),c="/<"+s+"(.*?)>/gms",f="/</"+s+"(.*?)>/gms",E="/<"+s+"(.*?)/>/gms";e=e.replace(c,r),e=e.replace(f,h),e=e.replace(E,l)}),e}fromStructure(t){let e=this.reflowSlugs(t);this.structureLines=et.breakByNewLine(e);let s=this.transformInlineDirectives(e);return s=this.transformContentDirectives(s),s=this.transformDynamicEcho(s),s=this.transformPairedDirectives(s),s=this.transformForElseWithEmpty(s),s=this.transformForElseWithNoEmpty(s),s=this.transformDynamicElementForElse(s),s=this.transformInlineEcho(s),s=this.transformConditions(s),s=this.transformDynamicElementConditions(s),s=this.transformSwitchStatements(s),s=this.transformDynamicElementSwitch(s),s=this.transformBreaks(s),s=this.transformProps(s),s=this.transformComments(s),s=this.transformVirtualComments(s),s=this.transformDirectiveParameters(s),s=this.transformExpressionParameters(s),s=this.transformDynamicDirectives(s),s=this.cleanVirtualStructures(s),s=this.removeVirtualStructures(s),s=this.transformEmbeddedEcho(s),s=this.transformEmbeddedDirectives(s),s=this.transformExtractedDocuments(s),s=this.transformPhpBlock(s),s}}});var be,Sn=Pt(()=>{"use strict";un();Tx();gx();Ex();Ax();be=class{constructor(){this.documentParser=new nt;this.transformer=null;this.cursor=new Ao(this);this.nodes=new So(this);this.errors=new Io(this)}static fromText(t,e=null){let s=new be;return e!=null&&s.getParser().setSeedPosition(e),s.loadString(t)}static childFromText(t,e=null){let s=be.fromText(t,e);return{renderNodes:s.getRenderNodes(),content:t,document:s}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new Do(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});function Ix(i){let t=zb(i);if(t==null||Er.existsSync(t)==!1)return th;let e=Er.readFileSync(t,{encoding:"utf8"});try{let s=JSON.parse(e),r=Tr,h=0,l=4,c=!0,f=!0,E=[],k=[];return typeof s.ignoreDirectives!="undefined"&&s.ignoreDirectives!==null&&(r=s.ignoreDirectives),typeof s.spacesAfterDirective!="undefined"&&s.spacesAfterDirective!==null&&(h=s.spacesAfterDirective),typeof s.tabSize!="undefined"&&s.tabSize!==null&&(l=s.tabSize),typeof s.formatDirectivePhpParameters!="undefined"&&s.formatDirectivePhpParameters!==null&&(c=s.formatDirectivePhpParameters),typeof s.formatDirectiveJsonParameters!="undefined"&&s.formatDirectiveJsonParameters!==null&&(f=s.formatDirectiveJsonParameters),typeof s.customIfs!="undefined"&&s.customIfs!==null&&(E=s.customIfs),typeof s.directives!="undefined"&&s.directives!==null&&(k=s.directives),{ignoreDirectives:r,spacesAfterDirective:h,tabSize:l,formatDirectivePhpParameters:c,formatDirectiveJsonParameters:f,customIfs:E,directives:k}}catch(s){console.log(s)}return th}function zb(i){let t=Cs.dirname(i);t=="."&&(t=process.cwd());let e=t.split(Cs.sep);for(;e.length>0;){let s=e.join(Cs.sep),r=Cs.join(s,Kb);if(Er.existsSync(r))return r;e.pop()}return null}var Er,Cs,Kb,th,Sx=Pt(()=>{"use strict";Er=rn(require("fs")),Cs=rn(require("path"));Xa();Ja();Kb=".blade.format.json",th={ignoreDirectives:[...Tr,...bo],spacesAfterDirective:0,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,customIfs:[],directives:[]}});var Ro,Ox=Pt(()=>{"use strict";Ro=class{static printError(t,e){var c,f;let s=t.message+`

`,r=(f=(c=t.node)==null?void 0:c.startPosition)==null?void 0:f.line,h=r;e.forEach((E,k)=>{h=k});let l=h.toString().length;return e.forEach((E,k)=>{let U=k.toString(),b="",y=0;y=l-U.length,r==k?b=" >"+"0".repeat(y)+U+"| ":b="  "+"0".repeat(y)+U+"| ",s+=b+E+`
`}),s}}});var wo,Lx=Pt(()=>{"use strict";Sn();wo=class{constructor(){this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null}withTransformOptions(t){return this.transformOptions=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(be.fromText(t))}formatDocument(t){if(this.preFormatter!=null){let r=this.preFormatter(t);if(r!=null)return r}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let e=t.transform().toStructure(),s=this.htmlFormatter(e);return t.transform().fromStructure(s)}}});var Dx=H((Fo,Px)=>{(function(i,t){typeof Fo=="object"&&typeof Px<"u"?t(Fo,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((i=typeof globalThis<"u"?globalThis:i||self).prettierPlugins=i.prettierPlugins||{},i.prettierPlugins.php={}),i.prettier)})(Fo,function(i,t){"use strict";function e(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var s=e(t),r={matchST_ATTRIBUTE:function(){var n=0,o=this.input();if(this.is_WHITESPACE()){do o=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(o){case"]":return n===0?this.popState():n--,"]";case"(":case")":case":":case"=":return this.consume_TOKEN();case"[":return n++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":if(this._input[this.offset]==="/")return this.T_COMMENT();if(this._input[this.offset]==="*")return this.input(),this.T_DOC_COMMENT()}if(this.is_LABEL_START()||o==="\\"){for(;this.offset<this.size;){var a=this.input();if(!this.is_LABEL()&&a!=="\\"){a&&this.unput(1);break}}return this.tok.T_STRING}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(o,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};r.matchST_ATTRIBUTE;var h={T_COMMENT:function(){for(;this.offset<this.size;){var n=this.input();if(n===`
`||n==="\r")return this.tok.T_COMMENT;if(n==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(n==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var n=this.input(),o=this.tok.T_COMMENT;if(n==="*"){if(n=this.input(),this.is_WHITESPACE()&&(o=this.tok.T_DOC_COMMENT),n==="/")return o;this.unput(1)}for(;this.offset<this.size;)if((n=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return o}};h.T_COMMENT,h.T_DOC_COMMENT;var l={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var n=this.input();if(n=="<"){if((n=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((n=this._input[this.offset+4])===" "||n==="	"||n===`
`||n==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&n=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};l.nextINITIAL,l.matchINITIAL;var c={consume_NUM:function(){var n=this.yytext[0],o=n===".";if(n==="0")if((n=this.input())==="x"||n==="X"){if((n=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(n?2:1)}else if(n==="b"||n==="B"){if((n=this.input())!=="_"&&n==="0"||n==="1")return this.consume_BNUM();this.unput(n?2:1)}else this.is_NUM()||n&&this.unput(1);for(;this.offset<this.size;){var a=n;if((n=this.input())==="_"){if(a==="_"){this.unput(2);break}if(a==="."){this.unput(1);break}if(a==="e"||a==="E"){this.unput(2);break}}else{if(n==="."){if(o){this.unput(1);break}if(a==="_"){this.unput(2);break}o=!0;continue}if(n==="e"||n==="E"){if(a==="_"){this.unput(1);break}var u=2;if((n=this.input())!=="+"&&n!=="-"||(u=3,n=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(n?u:u-1);break}}if(!this.is_NUM()){n&&this.unput(1);break}}return o?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_HEX()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_NUM()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var n;this.offset<this.size;)if((n=this.input())!=="0"&&n!=="1"&&n!=="_"){n&&this.unput(1);break}return this.tok.T_LNUMBER}};c.consume_NUM,c.consume_HNUM,c.consume_LNUM,c.consume_BNUM;var f={matchST_LOOKING_FOR_PROPERTY:function(){var n=this.input();if(n==="-"){if((n=this.input())===">")return this.tok.T_OBJECT_OPERATOR;n&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),n&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var n=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(n=this.input())==="["||n==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else n&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var n=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(n==="]")return this.popState(),"]";if(n==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||n==="\\"||n==="'"||n==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(n==="["||n==="{"||n==="}"||n==='"'||n==="`"||this.is_TOKEN())return n;throw new Error("Unexpected terminal")}};f.matchST_LOOKING_FOR_PROPERTY,f.matchST_LOOKING_FOR_VARNAME,f.matchST_VAR_OFFSET;var E={matchST_IN_SCRIPTING:function(){var n=this.input();switch(n){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this._input[this.offset]==="["?(this.input(),this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var o=this._input[this.offset];return o!==`
`&&o!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(n=this._input[this.offset])!==`
`&&n!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(n==="."){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+n+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var n=this.input();if(n!==" "&&n!=="	"&&n!==`
`&&n!=="\r"){n&&this.unput(1);break}}return this.tok.T_WHITESPACE}};E.matchST_IN_SCRIPTING,E.T_WHITESPACE;var k=[`
`,"\r"],U=[`
`,"\r",";"],b=U.concat(["	"," ",",","]",")","/","=","!"]),y={T_CONSTANT_ENCAPSED_STRING:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else if(n=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var n=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var o=this._input[this.offset-1];if(o==="'"||o==='"'?this.offset++:o=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var u=this._input.substring(a,this.offset-1);if((!o||o===this._input[this.offset-1])&&(o&&this.offset++,k.includes(this._input[this.offset-1])))return this.heredoc_label.label=u,this.heredoc_label.length=u.length,this.heredoc_label.finished=!1,a=this.offset-n,this.offset=n,this.consume(a),o==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=n,!1},ST_DOUBLE_QUOTES:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else{if(n=='"')break;if(n=="$"){if((n=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if(n=="{"){if((n=this.input())=="$"){this.unput(2);break}n&&this.unput(1)}}if(n=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var o=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(o=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-o),this.unput(this.yytext.length-o),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(n,o){var a=this._input[n-2];if(!k.includes(a))return!1;var u=!1,d=!1,T=0,N=this._input[n-1];if(this.version>=703){for(;N==="	"||N===" ";)N===" "?u=!0:N==="	"&&(d=!0),N=this._input[n+T],T++;if(n+=T,k.includes(this._input[n-1]))return!1}if(this._input.substring(n-1,n-1+this.heredoc_label.length)===this.heredoc_label.label){var _=this._input[n-1+this.heredoc_label.length];if((this.version>=703?b:U).includes(_)){if(o){if(this.consume(T),u&&d)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=T,this.heredoc_label.indentation_uses_spaces=u,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var n=this.offset+1;n<this._input.length;){if(this.isDOC_MATCH(n,!1))return;if(!k.includes(this._input[n-1]))for(;!k.includes(this._input[n++])&&n<this._input.length;);n++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var n=this._input[this.offset-1];this.offset<this.size;)if(k.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(n==="\\"&&(n=this.input(),k.includes(n)||(n=this.input())),k.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var n=this.input();if(n=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(n==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else n&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==="`")return this.popState(),"`";for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}continue}if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==='"')return this.popState(),'"';for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}n&&this.unput(1)}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};y.T_CONSTANT_ENCAPSED_STRING,y.is_HEREDOC,y.ST_DOUBLE_QUOTES,y.isDOC_MATCH,y.prematch_ENDOFDOC,y.matchST_NOWDOC,y.matchST_HEREDOC,y.consume_VARIABLE,y.matchST_BACKQUOTE,y.matchST_DOUBLE_QUOTES;var R={T_STRING:function(){var n=this.yytext.toLowerCase(),o=this.keywords[n];if(typeof o!="number"){if(n==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),o=this.tok.T_YIELD_FROM):o=this.tok.T_YIELD;else if(o=this.tok.T_STRING,n==="b"||n==="B"){var a=this.input(1);if(a==='"')return this.ST_DOUBLE_QUOTES();if(a==="'")return this.T_CONSTANT_ENCAPSED_STRING();a&&this.unput(1)}}return o},consume_TOKEN:function(){var n=this._input[this.offset-1],o=this.tokenTerminals[n];return o?o.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var n=this._input[this.offset];return n===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):n==="-"?(this.input(),this.tok.T_DEC):n==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var n=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var o=this.yytext.length;this.consume_LABEL();var a=this.yytext.substring(o-1).toLowerCase(),u=this.castKeywords[a];if(typeof u=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return u}return this.unput(this.offset-n),"("},"=":function(){var n=this._input[this.offset];return n===">"?(this.input(),this.tok.T_DOUBLE_ARROW):n==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var n=this._input[this.offset];return n==="+"?(this.input(),this.tok.T_INC):n==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var n=this._input[this.offset];return n==="<"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):n==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):n==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):n===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):n===">"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_MUL_EQUAL):n==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_CONCAT_EQUAL):n==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_AND_EQUAL):n==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_OR_EQUAL):n==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};R.T_STRING,R.consume_TOKEN,R.tokenTerminals;var G={is_NUM:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n===95},is_NUM_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58},is_LABEL:function(){var n=this._input.charCodeAt(this.offset-1);return n>96&&n<123||n>64&&n<91||n===95||n>47&&n<58||n>126},is_LABEL_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>64&&n<91||n>96&&n<123||n===95||n>126},consume_LABEL:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_LABEL()){n&&this.unput(1);break}}return this},is_TOKEN:function(){var n=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(n)!==-1},is_WHITESPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"||n===`
`||n==="\r"},is_TABSPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_TABSPACE()){n&&this.unput(1);break}}return this},is_HEX:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n>64&&n<71||n>96&&n<103||n===95}};G.is_NUM,G.is_NUM_START,G.is_LABEL,G.is_LABEL_START,G.consume_LABEL,G.is_TOKEN,G.is_WHITESPACE,G.is_TABSPACE,G.consume_TABSPACE,G.is_HEX;var X=function(n){this.engine=n,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=800,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};X.prototype.setInput=function(n){return this._input=n,this.size=n.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},X.prototype.input=function(){var n=this._input[this.offset];return n?(this.yytext+=n,this.offset++,n==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),n===`
`||n==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,n):""},X.prototype.unput=function(n){if(n===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,n++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(n>0)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var o=0;o<this.yytext.length;o++){var a=this.yytext[o];a==="\r"?(a=this.yytext[++o],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,a!==`
`&&(a==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):a===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},X.prototype.tryMatch=function(n){return n===this.ahead(n.length)},X.prototype.tryMatchCaseless=function(n){return n===this.ahead(n.length).toLowerCase()},X.prototype.ahead=function(n){var o=this._input.substring(this.offset,this.offset+n);return o[o.length-1]==="\r"&&this._input[this.offset+n+1]===`
`&&(o+=`
`),o},X.prototype.consume=function(n){for(var o=0;o<n;o++){var a=this._input[this.offset];if(!a)break;this.yytext+=a,this.offset++,a==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,o++),a===`
`||a==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},X.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},X.prototype.setState=function(n){return this.yytext=n.yytext,this.offset=n.offset,this.yylineno=n.yylineno,this.yyprevcol=n.yyprevcol,this.yylloc=n.yylloc,n.heredoc_label&&(this.heredoc_label=n.heredoc_label),this},X.prototype.appendToken=function(n,o){return this.tokens.push([n,o]),this},X.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var n=this.next()||this.lex();if(!this.all_tokens){for(;n===this.tok.T_WHITESPACE||!this.comment_tokens&&(n===this.tok.T_COMMENT||n===this.tok.T_DOC_COMMENT)||n===this.tok.T_OPEN_TAG;)n=this.next()||this.lex();if(n==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(n===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),n},X.prototype.begin=function(n){if(this.conditionStack.push(n),this.curCondition=n,this.stateCb=this["match"+n],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+n+'"');return this},X.prototype.popState=function(){var n=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return n},X.prototype.next=function(){var n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(typeof(n=this.tokens.shift())[1]=="object"?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var o=n;o=typeof o=="number"?this.engine.tokens.values[o]:'"'+o+'"';var a=new Error(o+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(a.stack)}return n},[r,h,l,c,f,E,y,R,G].forEach(function(n){for(var o in n)X.prototype[o]=n[o]});var ct=X,dt=function(n,o,a){this.line=n,this.column=o,this.offset=a},z={read_array:function(){var n=null,o=!1,a=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),n=")"):(o=!0,n="]");var u=[];return this.next().token!==n&&(u=this.read_array_pair_list(o)),this.expect(n),this.next(),a(o,u)},read_array_pair_list:function(n){var o=this;return this.read_list(function(){return o.read_array_pair(n)},",",!0)},read_array_pair:function(n){if(!(!n&&this.token===")"||n&&this.token==="]")){if(this.token===",")return this.node("noop")();var o=this.node("entry"),a=null,u=null,d=!1,T=!1;if(this.token==="&")this.next(),d=!0,u=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),T=!0,u=this.read_expr();else{var N=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),a=N,this.token==="&"?(this.next(),d=!0,u=this.read_variable(!0,!1)):u=this.read_expr()):u=N}return o(a,u,d,T)}}};function J(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function at(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function B(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?at(Object(a),!0).forEach(function(u){J(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function j(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(a)))){var d=[],T=!0,N=!1,_=void 0;try{for(var I,S=a[Symbol.iterator]();!(T=(I=S.next()).done)&&(d.push(I.value),!u||d.length!==u);T=!0);}catch(x){N=!0,_=x}finally{try{T||S.return==null||S.return()}finally{if(N)throw _}}return d}}(n,o)||rt(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function pt(n){return function(o){if(Array.isArray(o))return Ft(o)}(n)||function(o){if(typeof Symbol<"u"&&Symbol.iterator in Object(o))return Array.from(o)}(n)||rt(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rt(n,o){if(n){if(typeof n=="string")return Ft(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(a):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ft(n,o):void 0}}function Ft(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function Bt(n){if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(n=rt(n))){var o=0,a=function(){};return{s:a,n:function(){return o>=n.length?{done:!0}:{done:!1,value:n[o++]}},e:function(_){throw _},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var u,d,T=!0,N=!1;return{s:function(){u=n[Symbol.iterator]()},n:function(){var _=u.next();return T=_.done,_},e:function(_){N=!0,d=_},f:function(){try{T||u.return==null||u.return()}finally{if(N)throw d}}}}z.read_array,z.read_array_pair_list,z.read_array_pair;var Dt={read_class_declaration_statement:function(n){var o=this.node("class"),a=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var u=this.node("identifier"),d=this.text();this.next(),u=u(d);var T=this.read_extends_from(),N=this.read_implements_list();this.expect("{");var _=o(u,T,N,this.next().read_class_body(),a);return n&&(_.attrGroups=n),_},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(){for(var n=[],o=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE){this.token===this.tok.T_ATTRIBUTE&&(o=this.read_attr_list());var a=this.position(),u=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),u[0]=null,u[1]=0),this.token===this.tok.T_FUNCTION)n.push(this.read_function(!1,u,o,a)),o=[];else if(this.token===this.tok.T_VARIABLE||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE)){var d=this.read_variable_list(u,o);o=[],this.expect(";"),this.next(),n=n.concat(d)}else this.error([this.tok.T_CONST,this.tok.T_VARIABLE,this.tok.T_FUNCTION]),this.next();else{var T=this.read_constant_list(u,o);this.expect(";")&&this.next(),n=n.concat(T)}}else n=n.concat(this.read_trait_use_statement());else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}"),this.next(),n},read_variable_list:function(n,o){var a=this.node("propertystatement"),u=this.read_list(function(){var d=this.node("property"),T=j(this.read_optional_type(),2),N=T[0],_=T[1];this.expect(this.tok.T_VARIABLE);var I=this.node("identifier"),S=this.text().substring(1);return this.next(),I=I(S),this.token===";"||this.token===","?d(I,null,N,_,o||[]):this.token==="="?d(I,this.next().read_expr(),N,_,o||[]):(this.expect([",",";","="]),d(I,null,N,_,o||[]))},",");return a(null,u,n)},read_constant_list:function(n,o){this.expect(this.tok.T_CONST)&&this.next();var a=this.node("classconstant"),u=this.read_list(function(){var d=this.node("constant"),T=null,N=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){T=this.node("identifier");var _=this.text();this.next(),T=T(_)}else this.expect("IDENTIFIER");return this.expect("=")&&(N=this.next().read_expr()),d(T,N)},",");return a(null,u,n,o||[])},read_member_flags:function(n){var o=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var a=0,u=0;do{switch(this.token){case this.tok.T_PUBLIC:a=0,u=0;break;case this.tok.T_PROTECTED:a=0,u=1;break;case this.tok.T_PRIVATE:a=0,u=2;break;case this.tok.T_STATIC:a=1,u=1;break;case this.tok.T_ABSTRACT:a=2,u=1;break;case this.tok.T_FINAL:a=2,u=2}n&&(a==0&&u==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),u=-1):a==2&&u==1&&(this.error(),u=-1)),o[a]!==-1?this.error():u!==-1&&(o[a]=u)}while(this.next().is("T_MEMBER_FLAGS"))}return o[1]==-1&&(o[1]=0),o[2]==-1&&(o[2]=0),o},read_optional_type:function(){var n=!1;this.token==="?"&&(n=!0,this.next());var o=this.read_types();if(n&&!o&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!o)return[!1,null];if(this.token==="|"){o=[o];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}o.push(a)}while(this.token==="|")}return[n,o]},read_interface_declaration_statement:function(n){var o=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),u=this.text();this.next(),a=a(u);var d=this.read_interface_extends_list();return this.expect("{"),o(a,d,this.next().read_interface_body(),n||[])},read_interface_body:function(){for(var n=[],o=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var a=this.position();o=this.read_attr_list();var u=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var d=this.read_constant_list(u,o);this.expect(";")&&this.next(),n=n.concat(d),o=[]}else if(this.token===this.tok.T_FUNCTION){var T=this.read_function_declaration(2,u,o,a);T.parseFlags(u),n.push(T),this.expect(";")&&this.next(),o=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}")&&this.next(),n},read_trait_declaration_statement:function(){var n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("{"),n(o,this.next().read_class_body())},read_trait_use_statement:function(){var n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var o=[this.read_namespace_name()],a=null;this.token===",";)o.push(this.next().read_namespace_name());if(this.token==="{"){for(a=[];this.next().token!==this.EOF&&this.token!=="}";)a.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(o,a)},read_trait_use_alias:function(){var n,o=this.node(),a=null;if(this.is("IDENTIFIER")){n=this.node("identifier");var u=this.text();this.next(),n=n(u)}else if(n=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){a=n,n=this.node("identifier");var d=this.text();this.next(),n=n(d)}else this.expect(this.tok.T_STRING);else n=n.name;if(this.token===this.tok.T_INSTEADOF)return o("traitprecedence",a,n,this.next().read_name_list());if(this.token===this.tok.T_AS){var T=null,N=null;if(this.next().is("T_MEMBER_FLAGS")&&(T=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){N=this.node("identifier");var _=this.text();this.next(),N=N(_)}else T===!1&&this.expect(this.tok.T_STRING);return o("traitalias",a,n,N,T)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),o("traitalias",a,n,null,null)}};Dt.read_class_declaration_statement,Dt.read_class_modifiers,Dt.read_class_modifier,Dt.read_class_body,Dt.read_variable_list,Dt.read_constant_list,Dt.read_member_flags,Dt.read_optional_type,Dt.read_interface_declaration_statement,Dt.read_interface_body,Dt.read_trait_declaration_statement,Dt.read_trait_use_statement,Dt.read_trait_use_alias;var Mt={read_comment:function(){var n=this.text(),o=this.ast.prepare(n.substring(0,2)==="/*"?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,u=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(o=o(n)).offset=a,this.prev=u,o},read_doc_comment:function(){var n=this.ast.prepare("commentblock",null,this),o=this.lexer.yylloc.first_offset,a=this.text(),u=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(n=n(a)).offset=o,this.prev=u,n}};Mt.read_comment,Mt.read_doc_comment;var Et={read_expr:function(n){var o=this.node();if(this.token==="@")return n||(n=this.next().read_expr()),o("silent",n);if(n||(n=this.read_expr_item()),this.token==="|")return o("bin","|",n,this.next().read_expr());if(this.token==="&")return o("bin","&",n,this.next().read_expr());if(this.token==="^")return o("bin","^",n,this.next().read_expr());if(this.token===".")return o("bin",".",n,this.next().read_expr());if(this.token==="+")return o("bin","+",n,this.next().read_expr());if(this.token==="-")return o("bin","-",n,this.next().read_expr());if(this.token==="*")return o("bin","*",n,this.next().read_expr());if(this.token==="/")return o("bin","/",n,this.next().read_expr());if(this.token==="%")return o("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return o("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return o("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return o("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return o("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return o("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return o("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return o("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return o("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return o("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return o("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return o("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return o("bin","!=",n,this.next().read_expr());if(this.token==="<")return o("bin","<",n,this.next().read_expr());if(this.token===">")return o("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return o("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return o("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return o("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=o("bin","instanceof",n,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return o("bin","??",n,this.next().read_expr());if(this.token==="?"){var a=null;return this.next().token!==":"&&(a=this.read_expr()),this.expect(":")&&this.next(),o("retif",n,a,this.read_expr())}return o.destroy(n),n},read_expr_cast:function(n){return this.node("cast")(n,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var n=null;switch(this.token){case this.tok.T_ISSET:n=this.node("isset"),this.next().expect("(")&&this.next();var o=this.read_isset_variables();this.expect(")")&&this.next(),n=n(o);break;case this.tok.T_EMPTY:n=this.node("empty"),this.next().expect("(")&&this.next();var a=this.read_expr();this.expect(")")&&this.next(),n=n(a);break;case this.tok.T_INCLUDE:n=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:n=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:n=this.node("eval"),this.next().expect("(")&&this.next();var u=this.read_expr();this.expect(")")&&this.next(),n=n(u);break;case this.tok.T_REQUIRE:n=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:n=this.node("include")(!0,!0,this.next().read_expr())}return n},read_optional_expr:function(n){return this.token!==n?this.read_expr():null},read_exit_expr:function(){var n=null;return this.token==="("&&(this.next(),n=this.read_optional_expr(")"),this.expect(")")&&this.next()),n},read_expr_item:function(){var n,o,a=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(o=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(o);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var u=null,d=this.innerList;n=this.node("list"),d||(u=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var T=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var N=!1,_=0;_<T.length;_++)if(T[_]!==null&&T[_].kind!=="noop"){N=!0;break}return N||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),d?n(T,!1):(this.innerList=!1,this.expect("=")?u(n(T,!1),this.next().read_expr(),"="):n(T,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var I=this.lexer.yytext.toLowerCase()==="die";return n=this.node("exit"),this.next(),n(this.read_exit_expr(),I);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var S=null,x=null;return n=this.node("yield"),this.next().is("EXPR")&&(S=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(x=S,S=this.next().read_expr())),n(S,x);case this.tok.T_YIELD_FROM:return(n=this.node("yieldfrom"))(o=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,a);case this.tok.T_STATIC:var Gt=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],a);this.lexer.tokens.push(Gt),this.next()}if(this.is("VARIABLE")){n=this.node();var Yt=(o=this.read_variable(!1,!1)).kind==="identifier"||o.kind==="staticlookup"&&o.offset.kind==="identifier";switch(this.token){case"=":return Yt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(n,o):n("assign",o,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"??=");case this.tok.T_INC:return Yt&&this.error("VARIABLE"),this.next(),n("post","+",o);case this.tok.T_DEC:return Yt&&this.error("VARIABLE"),this.next(),n("post","-",o);default:n.destroy(o)}}else{if(this.is("SCALAR")){if(n=this.node(),(o=this.read_scalar()).kind==="array"&&o.shortForm&&this.token==="="){var oe=this.convertToList(o);return o.loc&&(oe.loc=o.loc),n("assign",oe,this.next().read_expr(),"=")}return n.destroy(o),this.handleDereferencable(o)}this.error("EXPR"),this.next()}return o},convertToList:function(n){var o=this,a=n.items.map(function(d){return d.value&&d.value.kind==="array"&&d.value.shortForm&&(d.value=o.convertToList(d.value)),d}),u=this.node("list")(a,!0);return n.loc&&(u.loc=n.loc),n.leadingComments&&(u.leadingComments=n.leadingComments),n.trailingComments&&(u.trailingComments=n.trailingComments),u},read_assignref:function(n,o){var a;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),a=this.read_new_expr()):a=this.read_variable(!1,!1),n("assignref",o,a)},read_inline_function:function(n,o){if(this.token===this.tok.T_FUNCTION){var a=this.read_function(!0,n,o);return a.attrGroups=o,a}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var u=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var d=this.is_reference();this.expect("(")&&this.next();var T=this.read_parameter_list();this.expect(")")&&this.next();var N=!1,_=null;this.token===":"&&(this.next().token==="?"&&(N=!0,this.next()),_=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var I=u(T,d,this.read_expr(),_,N,!!n);return I.attrGroups=o,I},read_match_expression:function(){var n=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var o,a;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),a=this.read_match_arms(),this.expect("}")&&this.next(),n(o,a)},read_match_arms:function(){var n=this;return this.read_list(function(){return n.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var n=[];if(this.token===this.tok.T_DEFAULT)n=null,this.next();else for(n.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),n;n.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),n},read_attribute(){var n=this.text(),o=[];return this.next(),this.token==="("&&(o=this.read_argument_list()),this.node("attribute")(n,o)},read_attr_list(){var n=[];if(this.token===this.tok.T_ATTRIBUTE)do{var o=this.node("attrgroup")([]);for(this.next(),o.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&o.attrs.push(this.read_attribute());n.push(o),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return n},read_new_expr:function(){var n=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var o=[],a=this.read_attr_list();if(this.token===this.tok.T_CLASS){var u=this.node("class");this.next().token==="("&&(o=this.read_argument_list());var d=this.read_extends_from(),T=this.read_implements_list(),N=null;this.expect("{")&&(N=this.next().read_class_body());var _=u(null,d,T,N,[0,0,0]);return _.attrGroups=a,n(_,o)}var I=this.read_new_class_name();return this.token==="("&&(o=this.read_argument_list()),n(I,o)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var n=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(n=this.read_static_getter(n)),n}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(n){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)n=this.recursive_variable_chain_scan(n,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")n=this.read_dereferencable(n);else{if(this.token!=="(")return n;n=this.node("call")(n,this.read_argument_list())}return n}};Et.read_expr,Et.read_expr_cast,Et.read_isset_variable,Et.read_isset_variables,Et.read_internal_functions_in_yacc,Et.read_optional_expr,Et.read_exit_expr,Et.read_expr_item,Et.convertToList,Et.read_assignref,Et.read_inline_function,Et.read_match_expression,Et.read_match_arms,Et.read_match_arm,Et.read_match_arm_conds,Et.read_attribute,Et.read_attr_list,Et.read_new_expr,Et.read_new_class_name,Et.handleDereferencable;var Rt={is_reference:function(){return this.token=="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(n,o,a,u){var d=this.read_function_declaration(n?1:o?2:0,o&&o[1]===1,a||[],u);return o&&o[2]==1?(d.parseFlags(o),this.expect(";")&&this.next()):(this.expect("{")&&(d.body=this.read_code_block(!1),d.loc&&d.body.loc&&(d.loc.end=d.body.loc.end)),!n&&o&&d.parseFlags(o)),d},read_function_declaration:function(n,o,a,u){var d=this,T="function";n===1?T="closure":n===2&&(T="method");var N=this.node(T);this.expect(this.tok.T_FUNCTION)&&this.next();var _=this.is_reference(),I=!1,S=[],x=null,Gt=!1;if(n!==1){var Yt=this.node("identifier");n===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(I=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(I=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(I=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(I=this.text()),this.next()),I=Yt(I)}this.expect("(")&&this.next();var oe=this.read_parameter_list();this.expect(")")&&this.next(),n===1&&(S=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(Gt=!0,this.next()),x=this.read_types());var ge=function(wt){return wt.attrGroups=a||[],u&&wt.loc&&(wt.loc.start=u,wt.loc.source&&(wt.loc.source=d.lexer._input.substr(wt.loc.start.offset,wt.loc.end.offset-wt.loc.start.offset))),wt};return ge(n===1?N(oe,_,S,x,Gt,o):N(I,oe,_,x,Gt))},read_lexical_vars:function(){var n=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),n=this.read_lexical_var_list(),this.expect(")")&&this.next()),n},read_list_with_dangling_comma:function(n){for(var o=[];this.token!=this.EOF;){if(o.push(n()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return o}return o},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var n=this.node("variable");this.expect(this.tok.T_VARIABLE);var o=this.text().substring(1);return this.next(),n(o,!1)},read_parameter_list:function(){return this.token!=")"?this.read_list_with_dangling_comma(this.read_parameter.bind(this)):[]},read_parameter:function(){var n,o=this.node("parameter"),a=null,u=null,d=!1,T=[];this.token===this.tok.T_ATTRIBUTE&&(T=this.read_attr_list());var N=this.read_promoted();this.token==="?"&&(this.next(),d=!0),n=this.read_types(),d&&!n&&this.raiseError("Expecting a type definition combined with nullable operator");var _=this.is_reference(),I=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){a=this.node("identifier");var S=this.text().substring(1);this.next(),a=a(S)}this.token=="="&&(u=this.next().read_expr());var x=o(a,n,u,_,I,d,N);return T&&(x.attrGroups=T),x},read_types(){var n=[],o=this.node("uniontype"),a=this.read_type();if(!a)return null;for(n.push(a);this.token==="|";)this.next(),a=this.read_type(),n.push(a);return n.length===1?n[0]:o(n)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var n=[];return this.expect("(")&&this.next(),this.token!==")"&&(n=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),n},read_non_empty_argument_list:function(){var n=!1;return this.read_function_list(function(){var o=this.read_argument();return o&&(n&&this.raiseError("Unexpected argument after a variadic argument"),o.kind==="variadic"&&(n=!0)),o}.bind(this),",")},read_argument:function(){if(this.token===this.tok.T_ELLIPSIS)return this.node("variadic")(this.next().read_expr());if(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token)){var n=this.lexer.getState(),o=this.lexer.lex();if(this.lexer.setState(n),o===":")return this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())}return this.read_expr()},read_type:function(){var n=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var o=this.text();return this.next(),n("typereference",o.toLowerCase(),o)}if(this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var a=this.text(),u=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(a.toLowerCase())>-1?n("typereference",a.toLowerCase(),a):(this.lexer.tokens.push(u),this.next(),n.destroy(),this.read_namespace_name())}return this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NS_SEPARATOR?(n.destroy(),this.read_namespace_name()):(n.destroy(),null)}};Rt.is_reference,Rt.is_variadic,Rt.read_function,Rt.read_function_declaration,Rt.read_lexical_vars,Rt.read_list_with_dangling_comma,Rt.read_lexical_var_list,Rt.read_lexical_var,Rt.read_parameter_list,Rt.read_parameter,Rt.read_types,Rt.read_promoted,Rt.read_argument_list,Rt.read_non_empty_argument_list,Rt.read_argument,Rt.read_type;var le={read_if:function(){var n=this.node("if"),o=this.next().read_if_expr(),a=null,u=null,d=!1;if(this.token===":"){d=!0,this.next(),a=this.node("block");for(var T=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){u=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){u=this.read_else_short();break}T.push(this.read_inner_statement())}a=a(null,T),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else a=this.read_statement(),this.token===this.tok.T_ELSEIF?u=this.read_if():this.token===this.tok.T_ELSE&&(u=this.next().read_statement());return n(o,a,u,d)},read_if_expr:function(){this.expect("(")&&this.next();var n=this.read_expr();return this.expect(")")&&this.next(),n},read_elseif_short:function(){var n=null,o=this.node("if"),a=this.next().read_if_expr();this.expect(":")&&this.next();for(var u=this.node("block"),d=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}d.push(this.read_inner_statement())}return o(a,u(null,d),n,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var n=this.node("block"),o=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)o.push(this.read_inner_statement());return n(null,o)}};le.read_if,le.read_if_expr,le.read_elseif_short,le.read_else_short;var Tt={read_while:function(){var n=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var o,a=null,u=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(u=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),n(o,a,u)},read_do:function(){var n=this.node("do");this.expect(this.tok.T_DO)&&this.next();var o,a=null;return o=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),a=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(a,o)},read_for:function(){var n=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var o=[],a=[],u=[],d=null,T=!1;return this.expect("(")&&this.next(),this.token!==";"?(o=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(u=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOR)):d=this.read_statement(),n(o,a,u,d,T)},read_foreach:function(){var n=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var o,a=null,u=null,d=null,T=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),u=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=u,u=this.next().read_foreach_variable())),a&&a.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOREACH)):d=this.read_statement(),n(o,a,u,d,T)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var n=this.token==="[",o=this.node("list");this.next(),!n&&this.expect("(")&&this.next();var a=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),o(a,n)}return this.read_variable(!1,!1)}};Tt.read_while,Tt.read_do,Tt.read_for,Tt.read_foreach,Tt.read_foreach_variable;var mt={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};mt.read_start;var ne={read_namespace:function(){var n,o,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),o=this.token=="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=o,this.token==";"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect(this.EOF),a(o.name,n,!1)):this.token=="{"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect("}")&&this.next(),n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),a(o.name,n,!0)):this.token==="("?(o.resolution=this.ast.reference.RELATIVE_NAME,o.name=o.name.substring(1),a.destroy(),this.node("call")(o,this.read_argument_list())):(this.error(["{",";"]),this.currentNamespace=o,n=this.read_top_statements(),this.expect(this.EOF),a(o,n,!1))},read_namespace_name:function(n){var o=this.node(),a=!1;this.token===this.tok.T_NAMESPACE&&(this.next().expect(this.tok.T_NS_SEPARATOR)&&this.next(),a=!0);var u=this.read_list(this.tok.T_STRING,this.tok.T_NS_SEPARATOR,!0);if(!a&&u.length===1&&(n||this.token!=="(")){if(u[0].toLowerCase()==="parent")return o("parentreference",u[0]);if(u[0].toLowerCase()==="self")return o("selfreference",u[0])}return o("name",u,a)},read_use_statement:function(){var n=this.node("usegroup"),o=[],a=null;this.expect(this.tok.T_USE)&&this.next();var u=this.read_use_type();return o.push(this.read_use_declaration(!1)),this.token===","?o=o.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(a=o[0].name,o=this.next().read_use_declarations(u===null),this.expect("}")&&this.next()),n=n(a,u,o),this.expect(";")&&this.next(),n},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(n){var o=this.node("useitem"),a=null;n&&(a=this.read_use_type());var u=this.read_namespace_name(),d=this.read_use_alias();return o(u.name,d,a)},read_use_declarations:function(n){for(var o=[this.read_use_declaration(n)];this.token===",";){if(this.next(),n){if(this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;o.push(this.read_use_declaration(n))}return o},read_use_alias:function(){var n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var o=this.node("identifier"),a=this.text();this.next(),n=o(a)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};ne.read_namespace,ne.read_namespace_name,ne.read_use_statement,ne.read_class_name_reference,ne.read_use_declaration,ne.read_use_declarations,ne.read_use_alias,ne.read_use_type;var At={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},Vt={resolve_special_chars:function(n,o){return o?n.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(a,u,d){return At[u]?At[u]:u[0]==="x"||u[0]==="X"?String.fromCodePoint(parseInt(u.substr(1),16)):u[0]==="u"?String.fromCodePoint(parseInt(d,16)):String.fromCodePoint(parseInt(u,8))}):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(n,o,a,u){if(o===0)return n;this.check_heredoc_indentation_level(n,o,a,u);var d=a?" ":"	",T=new RegExp("\\n".concat(d,"{").concat(o,"}"),"g"),N=new RegExp("^".concat(d,"{").concat(o,"}"));return u&&(n=n.replace(N,"")),n.replace(T,`
`)},check_heredoc_indentation_level:function(n,o,a,u){var d=n.length,T=0,N=0,_=!0,I=a?" ":"	",S=!1;if(!u){if((T=n.indexOf(`
`))===-1)return;T++}for(;T<d;)_?n[T]===I?N++:S=!0:_=!1,n[T]!==`
`&&S&&N<o?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(o,")")):S=!1,n[T]===`
`&&(_=!0,N=0),T++},read_dereferencable_scalar:function(){var n=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var o=this.node("string"),a=this.text(),u=0;a[0]!=="b"&&a[0]!=="B"||(u=1);var d=a[u]==='"';this.next(),o=o(d,this.resolve_special_chars(a.substring(u+1,a.length-1),d),u===1,a),n=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(o):o;break;case this.tok.T_ARRAY:case"[":n=this.read_array()}return n},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var n,o;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var a=this.node("number");return n=this.text(),this.next(),a(n,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var u=this.lexer.yylloc.first_offset;o=this.node("nowdoc"),n=this.next().text(),this.lexer.heredoc_label.indentation>0&&(n=n.substring(0,n.length-this.lexer.heredoc_label.indentation));var d=n[n.length-1];d===`
`?n=n[n.length-2]==="\r"?n.substring(0,n.length-2):n.substring(0,n.length-1):d==="\r"&&(n=n.substring(0,n.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var T=this.lexer._input.substring(u,this.lexer.yylloc.first_offset);return o=o(this.remove_heredoc_leading_whitespace_chars(n,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),T,this.lexer.heredoc_label.label)}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var N=this.error("SCALAR");return this.next(),N}},read_dereferencable:function(n){var o,a,u=this.node("offsetlookup");return this.token==="["?(a=this.next().read_expr(),this.expect("]")&&this.next(),o=u(n,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(o=u(n,a=this.read_encapsed_string_item(!1))),o},read_encapsed_string_item:function(n){var o,a,u,d=this.node("encapsedpart"),T=null,N=!1,_=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var I=this.text();this.next(),_=_("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(I,n),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):I,!1,I)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(T="simple",N=!0,u=null,this.next().token===this.tok.T_STRING_VARNAME){u=this.node("variable");var S=this.text();this.next(),this.token==="["?(u=u(S,!1),a=this.node("offsetlookup"),o=this.next().read_expr(),this.expect("]")&&this.next(),_=a(u,o)):_=u(S,!1)}else _=_("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)T="complex",_.destroy(),_=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(T="simple",_.destroy(),_=this.read_simple_variable(),this.token==="["&&(a=this.node("offsetlookup"),o=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),_=a(_,o)),this.token===this.tok.T_OBJECT_OPERATOR){a=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var x=this.node("identifier");u=this.text(),this.next(),_=a(_,x(u))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var Gt=this.text();this.next(),_.destroy(),_=_("string",!1,Gt,!1,Gt)}return this.lexer.heredoc_label.first_encaps_node=!1,d(_,T,N)},read_encapsed_string:function(n){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=this.lexer.yylloc.first_offset,u=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(o?1:0),T=[],N=null;for(N=n==="`"?this.ast.encapsed.TYPE_SHELL:n==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==n&&this.token!==this.EOF;)T.push(this.read_encapsed_string_item(!0));if(T.length>0&&T[T.length-1].kind==="encapsedpart"&&T[T.length-1].expression.kind==="string"){var _=T[T.length-1].expression,I=_.value[_.value.length-1];I===`
`?_.value[_.value.length-2]==="\r"?_.value=_.value.substring(0,_.value.length-2):_.value=_.value.substring(0,_.value.length-1):I==="\r"&&(_.value=_.value.substring(0,_.value.length-1))}this.expect(n)&&this.next();var S=this.lexer._input.substring(N==="heredoc"?a:d-1,this.lexer.yylloc.first_offset);return u=u(T,S,N),n===this.tok.T_END_HEREDOC&&(u.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),u},get_magic_constant:function(){var n=this.node("magic"),o=this.text();return this.next(),n(o.toUpperCase(),o)}};Vt.resolve_special_chars,Vt.remove_heredoc_leading_whitespace_chars,Vt.check_heredoc_indentation_level,Vt.read_dereferencable_scalar,Vt.read_scalar,Vt.read_dereferencable,Vt.read_encapsed_string_item,Vt.read_encapsed_string,Vt.get_magic_constant;var ae={read_top_statements:function(){for(var n=[];this.token!==this.EOF&&this.token!=="}";){var o=this.read_top_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_top_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,n);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(n);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(n);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var o=this.node("constantstatement"),a=this.next().read_const_list();return this.expectEndOfStatement(),o(null,a);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var u=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,u(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var n=[];this.token!=this.EOF&&this.token!=="}";){var o=this.read_inner_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var n=this.node("constant"),o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("=")?n(o,this.next().read_expr()):n(o,null)},",",!1)},read_declare_list:function(){for(var n=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var o=this.node("declaredirective"),a=this.node("identifier"),u=this.text();this.next(),a=a(u);var d=null;if(this.expect("=")&&(d=this.next().read_expr()),n.push(o(a,d)),this.token!==",")break;this.next()}return n},read_inner_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var o=this.read_function(!1,!1);return o.attrGroups=n,o;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var a=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),a=a(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),a;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var n=this.node("return");this.next();var o=this.read_optional_expr(";");return this.expectEndOfStatement(),n(o);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var a=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var u=this.read_optional_expr(";");return this.expectEndOfStatement(),a(u);case this.tok.T_GLOBAL:var d=this.node("global"),T=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),d(T);case this.tok.T_STATIC:var N=[this.token,this.lexer.getState()],_=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(N);var I=this.next().read_expr();return this.expectEndOfStatement(I),_("expressionstatement",I)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var S=this.read_variable_declarations();return this.expectEndOfStatement(),_("static",S);case this.tok.T_ECHO:var x=this.node("echo"),Gt=this.text(),Yt=Gt==="<?="||Gt==="<%=",oe=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),x(oe,Yt);case this.tok.T_INLINE_HTML:var ge=this.text(),wt=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,pe=wt==="\r"||wt===`
`;pe&&wt===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(wt=`\r
`);var ie=this.node("inline");return this.next(),ie(ge,pe?wt+ge:ge);case this.tok.T_UNSET:var we=this.node("unset");this.next().expect("(")&&this.next();var Pe=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),we(Pe);case this.tok.T_DECLARE:var _e,Zt=this.node("declare"),Ce=[];this.next().expect("(")&&this.next();var Ue=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),_e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect("}")&&this.next(),_e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),_e=this.ast.declare.MODE_NONE;return Zt(Ue,Ce,_e);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var qn=this.node("throw"),mi=this.next().read_expr();return this.expectEndOfStatement(),qn(mi);case";":return this.next(),null;case this.tok.T_STRING:var Pi=this.node(),as=[this.token,this.lexer.getState()],hs=this.text(),Gi=this.node("identifier");if(this.next().token===":")return Gi=Gi(hs),this.next(),Pi("label",Gi);Gi.destroy(),Pi.destroy(),this.lexer.tokens.push(as);var xn=this.node("expressionstatement"),Di=this.next().read_expr();return this.expectEndOfStatement(Di),xn(Di);case this.tok.T_GOTO:var ls=this.node("goto"),Ri=null;if(this.next().expect(this.tok.T_STRING)){Ri=this.node("identifier");var Wn=this.text();this.next(),Ri=Ri(Wn),this.expectEndOfStatement()}return ls(Ri);default:var Vi=this.node("expressionstatement"),vn=this.read_expr();return this.expectEndOfStatement(vn),Vi(vn)}},read_code_block:function(n){var o=this.node("block");this.expect("{")&&this.next();var a=n?this.read_top_statements():this.read_inner_statements();return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect("}")&&this.next(),o(null,a)}};ae.read_top_statements,ae.read_top_statement,ae.read_inner_statements,ae.read_const_list,ae.read_declare_list,ae.read_inner_statement,ae.read_statement,ae.read_code_block;var A={read_switch:function(){var n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var o=this.read_expr();this.expect(")")&&this.next();var a=this.token===":";return n(o,this.read_switch_case_list(),a)},read_switch_case_list:function(){var n=null,o=this.node("block"),a=[];for(this.token==="{"?n="}":this.token===":"?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==n;)a.push(this.read_case_list(n));return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),o(null,a)},read_case_list:function(n){var o=this.node("case"),a=null;this.token===this.tok.T_CASE?a=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var u=this.node("block"),d=[];this.token!==this.EOF&&this.token!==n&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)d.push(this.read_inner_statement());return o(a,u(null,d))}};A.read_switch,A.read_switch_case_list,A.read_case_list;var P={read_try:function(){this.expect(this.tok.T_TRY);for(var n=this.node("try"),o=null,a=[],u=this.next().read_statement();this.token===this.tok.T_CATCH;){var d=this.node("catch");this.next().expect("(")&&this.next();var T=this.read_list(this.read_namespace_name,"|",!1),N=null;this.token===this.tok.T_VARIABLE&&(N=this.read_variable(!0,!1)),this.expect(")"),a.push(d(this.next().read_statement(),T,N))}return this.token===this.tok.T_FINALLY&&(o=this.next().read_statement()),n(u,a,o)}};P.read_try;var Z={read_short_form:function(n){var o=this.node("block"),a=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)a.push(this.read_inner_statement());return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),o(null,a)},read_function_list:function(n,o){var a=[];do{if(this.token==o&&this.version>=703&&a.length>0){a.push(this.node("noop")());break}if(a.push(n.apply(this,[])),this.token!=o||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return a},read_list:function(n,o,a){var u=[];if(this.token==o&&(a&&u.push(typeof n=="function"?this.node("noop")():null),this.next()),typeof n=="function")do{var d=n.apply(this,[]);if(d&&u.push(d),this.token!=o)break}while(this.next().token!=this.EOF);else{if(!this.expect(n))return[];for(u.push(this.text());this.next().token!=this.EOF&&this.token==o&&this.next().token==n;)u.push(this.text())}return u},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){var o=this.node("byref");this.next(),o=o(null);var a=n();return a&&(this.ast.swapLocations(a,o,a,this),a.byref=!0),a},read_variable_declarations:function(){return this.read_list(function(){var n=this.node("staticvariable"),o=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var a=this.text().substring(1);this.next(),o=o(a,!1)}else o=o("#ERR",!1);return this.token==="="?n(o,this.next().read_expr()):o},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};Z.read_short_form,Z.read_function_list,Z.read_list,Z.read_name_list,Z.read_byref,Z.read_variable_declarations,Z.read_extends_from,Z.read_interface_extends_list,Z.read_implements_list;var ht={read_variable:function(n,o){var a;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,n,o));if(this.is([this.tok.T_VARIABLE,"$"]))a=this.read_reference_variable(o);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE])){a=this.node();var u=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(u.kind)===-1){var d=u.name.toLowerCase();d==="true"?a=u.destroy(a("boolean",!0,u.name)):d==="false"?a=u.destroy(a("boolean",!1,u.name)):d==="null"?a=u.destroy(a("nullkeyword",u.name)):(a.destroy(u),a=u)}else a.destroy(u),a=u}else if(this.token===this.tok.T_STATIC){a=this.node("staticreference");var T=this.text();this.next(),a=a(T)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(a=this.read_static_getter(a,o)),this.recursive_variable_chain_scan(a,n,o)},read_static_getter:function(n,o){var a,u,d=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?a=this.read_reference_variable(o):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(a=this.node("identifier"),u=this.text(),this.next(),a=a(u)):this.token==="{"?(a=this.node("literal"),u=this.next().read_expr(),this.expect("}")&&this.next(),a=a("literal",u,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),a=this.node("identifier"),u=this.text(),this.next(),a=a(u)),d(n,a)},read_what:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=null,a=null;switch(this.next().token){case this.tok.T_STRING:o=this.node("identifier"),a=this.text(),this.next(),o=o(a),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:o=this.node("variable"),a=this.text().substring(1),this.next(),o=o(a,!1);break;case"$":o=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(a=this.next().read_expr(),this.expect("}")&&this.next(),o=o("variable",a,!0)):o=o("variable",a=this.read_expr(),!1);break;case"{":o=this.node("encapsedpart"),a=this.next().read_expr(),this.expect("}")&&this.next(),o=o(a,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),o=this.node("identifier"),a=this.text(),this.next(),o=o(a)}return o},recursive_variable_chain_scan:function(n,o,a){var u,d;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(o)return n;n=this.node("call")(n,this.read_argument_list());break;case"[":case"{":var T=this.token==="[";u=this.node("offsetlookup"),this.next(),d=!1,a?(d=this.read_encaps_var_offset(),this.expect(T?"]":"}")&&this.next()):(T?this.token!=="]":this.token!=="}")?(d=this.read_expr(),this.expect(T?"]":"}")&&this.next()):this.next(),n=u(n,d);break;case this.tok.T_DOUBLE_COLON:n.kind==="staticlookup"&&n.offset.kind==="identifier"&&this.error(),n=(u=this.node("staticlookup"))(n,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:n=(u=this.node("propertylookup"))(n,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:n=(u=this.node("nullsafepropertylookup"))(n,this.read_what());break;default:break t}return n},read_encaps_var_offset:function(){var n=this.node();if(this.token===this.tok.T_STRING){var o=this.text();this.next(),n=n("identifier",o)}else if(this.token===this.tok.T_NUM_STRING){var a=this.text();this.next(),n=n("number",a,null)}else if(this.token==="-"){this.next();var u=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),n=n("number",u,null)}else if(this.token===this.tok.T_VARIABLE){var d=this.text().substring(1);this.next(),n=n("variable",d,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var T=this.text();this.next(),n=n("identifier",T)}return n},read_reference_variable:function(n){for(var o,a=this.read_simple_variable();this.token!=this.EOF;){var u=this.node();if(this.token!="{"||n){u.destroy();break}o=this.next().read_expr(),this.expect("}")&&this.next(),a=u("offsetlookup",a,o)}return a},read_simple_variable:function(){var n,o=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)n=this.text().substring(1),this.next(),o=o(n,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var a=this.next().read_expr();this.expect("}")&&this.next(),o=o(a,!0);break;case"$":o=o(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:n=this.text().substring(1);var u=this.node("variable");this.next(),o=o(u(n,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),n=this.text(),this.next(),o=o(n,!1)}return o}};function Ot(n){return n!="."&&n!=","&&!isNaN(parseFloat(n))&&isFinite(n)}ht.read_variable,ht.read_static_getter,ht.read_what,ht.recursive_variable_chain_scan,ht.read_encaps_var_offset,ht.read_reference_variable,ht.read_simple_variable;var $=function(n,o){this.lexer=n,this.ast=o,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=800,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var a=function(u){return[u,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(a)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(a)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(a)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(a)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(a)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a))}};$.prototype.getTokenName=function(n){return Ot(n)?n==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[n]:"'"+n+"'"},$.prototype.parse=function(n,o){this._errors=[],this.filename=o||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(n),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var a=this.node("program"),u=[];for(this.next();this.token!=this.EOF;)u.push(this.read_start());u.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&u.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var d=a(u,this._errors,this._docs,this._tokens);if(this.debug){var T=this.ast.checkNodes();if(T.length>0)throw T.forEach(function(N){N.position&&console.log("Node at line "+N.position.line+", column "+N.position.column),console.log(N.stack.join(`
`))}),new Error("Some nodes are not closed")}return d},$.prototype.raiseError=function(n,o,a,u){if(n+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var d=new SyntaxError(n,this.filename,this.lexer.yylloc.first_line);throw d.lineNumber=this.lexer.yylloc.first_line,d.fileName=this.filename,d.columnNumber=this.lexer.yylloc.first_column,d}var T=this.ast.prepare("error",null,this)(n,u,this.lexer.yylloc.first_line,a);return this._errors.push(T),T},$.prototype.error=function(n){var o="Parse Error : syntax error",a=this.getTokenName(this.token),u="";if(this.token!==this.EOF){if(Ot(this.token)){var d=this.text();d.length>10&&(d=d.substring(0,7)+"..."),a="'"+d+"' ("+a+")"}o+=", unexpected "+a}return n&&!Array.isArray(n)&&((Ot(n)||n.length===1)&&(u=", expecting "+this.getTokenName(n)),o+=u),this.raiseError(o,u,n,a)},$.prototype.position=function(){return new dt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},$.prototype.node=function(n){if(this.extractDoc){var o=null;this._docIndex<this._docs.length&&(o=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(o)));var a=this.ast.prepare(n,o,this);return a.postBuild=function(u){if(this._docIndex<this._docs.length)if(this._lastNode){for(var d=this.prev[2],T=this._docIndex;T<this._docs.length&&!(this._docs[T].offset>d);T++);T>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,T)),this._docIndex=T)}else this.token===this.EOF&&(u.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=u}.bind(this),a}return this.ast.prepare(n,null,this)},$.prototype.expectEndOfStatement=function(n){if(this.token===";")n&&this.lexer.yytext===";"&&n.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var F=["parser.next","parser.node","parser.showlog"];$.prototype.showlog=function(){for(var n,o=new Error().stack.split(`
`),a=2;a<o.length;a++){n=o[a].trim();for(var u=!1,d=0;d<F.length;d++)if(n.substring(3,3+F[d].length)===F[d]){u=!0;break}if(!u)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+n),this},$.prototype.expect=function(n){if(Array.isArray(n)){if(n.indexOf(this.token)===-1)return this.error(n),!1}else if(this.token!=n)return this.error(n),!1;return!0},$.prototype.text=function(){return this.lexer.yytext},$.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},$.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var n=this.lexer.yytext;if(n=this.lexer.engine.tokens.values.hasOwnProperty(this.token)?[this.lexer.engine.tokens.values[this.token],n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(n),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},$.prototype.is=function(n){return Array.isArray(n)?n.indexOf(this.token)!==-1:this.entries[n].has(this.token)},[z,Dt,Mt,Et,Rt,le,Tt,mt,ne,Vt,ae,A,P,Z,ht].forEach(function(n){for(var o in n){if($.prototype.hasOwnProperty(o))throw new Error("Function "+o+" is already defined - collision");$.prototype[o]=n[o]}});var W=$,M={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238}},tt=function(n,o,a){this.source=n,this.start=o,this.end=a},it=function(n,o,a){this.kind=n,o&&(this.leadingComments=o),a&&(this.loc=a)};it.prototype.setTrailingComments=function(n){this.trailingComments=n},it.prototype.destroy=function(n){if(!n)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(n.leadingComments?n.leadingComments=Array.concat(this.leadingComments,n.leadingComments):n.leadingComments=this.leadingComments),this.trailingComments&&(n.trailingComments?n.trailingComments=Array.concat(this.trailingComments,n.trailingComments):n.trailingComments=this.trailingComments),n},it.prototype.includeToken=function(n){return this.loc&&(this.loc.end&&(this.loc.end.line=n.lexer.yylloc.last_line,this.loc.end.column=n.lexer.yylloc.last_column,this.loc.end.offset=n.lexer.offset),n.ast.withSource&&(this.loc.source=n.lexer._input.substring(this.loc.start.offset,n.lexer.offset))),this},it.extends=function(n,o){return o.prototype=Object.create(this.prototype),o.extends=this.extends,o.prototype.constructor=o,o.kind=n,o};var K=it,Y="expression",q=K.extends(Y,function(n,o,a){K.apply(this,[n||Y,o,a])}),gt="array",Kt=q.extends(gt,function(n,o,a,u){q.apply(this,[gt,a,u]),this.items=o,this.shortForm=n}),qt="arrowfunc",kt=q.extends(qt,function(n,o,a,u,d,T,N,_){q.apply(this,[qt,N,_]),this.arguments=n,this.byref=o,this.body=a,this.type=u,this.nullable=d,this.isStatic=T||!1}),Lt="assign",zt=q.extends(Lt,function(n,o,a,u,d){q.apply(this,[Lt,u,d]),this.left=n,this.right=o,this.operator=a}),Ct="assignref",We=q.extends(Ct,function(n,o,a,u){q.apply(this,[Ct,a,u]),this.left=n,this.right=o}),pi="attribute",Xe=K.extends(pi,function(n,o,a,u){K.apply(this,[pi,a,u]),this.name=n,this.args=o}),Re="attrgroup",Ye=K.extends(Re,function(n,o,a){K.apply(this,[Re,o,a]),this.attrs=n||[]}),Ui="operation",Qe=q.extends(Ui,function(n,o,a){q.apply(this,[n||Ui,o,a])}),Jn=Qe.extends("bin",function(n,o,a,u,d){Qe.apply(this,["bin",u,d]),this.type=n,this.left=o,this.right=a}),ut="statement",Nt=K.extends(ut,function(n,o,a){K.apply(this,[n||ut,o,a])}),Xn="block",je=Nt.extends(Xn,function(n,o,a,u){Nt.apply(this,[n||Xn,a,u]),this.children=o.filter(Boolean)}),Pn="literal",xe=q.extends(Pn,function(n,o,a,u,d){q.apply(this,[n||Pn,u,d]),this.value=o,a&&(this.raw=a)}),Si="boolean",m=xe.extends(Si,function(n,o,a,u){xe.apply(this,[Si,n,o,a,u])}),O="break",D=Nt.extends(O,function(n,o,a){Nt.apply(this,[O,o,a]),this.level=n}),L="byref",p=q.extends(L,function(n,o,a){q.apply(this,[L,o,a]),this.what=n}),g="call",C=q.extends(g,function(n,o,a,u){q.apply(this,[g,a,u]),this.what=n,this.arguments=o}),w="case",V=Nt.extends(w,function(n,o,a,u){Nt.apply(this,[w,a,u]),this.test=n,this.body=o}),Q="cast",ot=Qe.extends(Q,function(n,o,a,u,d){Qe.apply(this,[Q,u,d]),this.type=n,this.raw=o,this.expr=a}),bt="catch",Wt=Nt.extends(bt,function(n,o,a,u,d){Nt.apply(this,[bt,u,d]),this.body=n,this.what=o,this.variable=a}),$t="declaration",re=Nt.extends($t,function(n,o,a,u){Nt.apply(this,[n||$t,a,u]),this.name=o});re.prototype.parseFlags=function(n){this.isAbstract=n[2]===1,this.isFinal=n[2]===2,this.kind!=="class"&&(n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1)};var Qt=re,ue="class",Ke=Qt.extends(ue,function(n,o,a,u,d,T,N){Qt.apply(this,[ue,n,T,N]),this.isAnonymous=!n,this.extends=o,this.implements=a,this.body=u,this.attrGroups=[],this.parseFlags(d)}),fe="constantstatement",ti=Nt.extends(fe,function(n,o,a,u){Nt.apply(this,[n||fe,a,u]),this.constants=o}),Mi="classconstant",hi=ti.extends(Mi,function(n,o,a,u,d,T){ti.apply(this,[n||Mi,o,d,T]),this.parseFlags(a),this.attrGroups=u});hi.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private")};var Dn=hi,Se="clone",Zn=q.extends(Se,function(n,o,a){q.apply(this,[Se,o,a]),this.what=n}),tn="closure",Rn=q.extends(tn,function(n,o,a,u,d,T,N,_){q.apply(this,[tn,N,_]),this.uses=a,this.arguments=n,this.byref=o,this.type=u,this.nullable=d,this.isStatic=T||!1,this.body=null,this.attrGroups=[]}),ts=K.extends("comment",function(n,o,a,u){K.apply(this,[n,a,u]),this.value=o}),kr="commentblock",qo=ts.extends(kr,function(n,o,a){ts.apply(this,[kr,n,o,a])}),Ys="commentline",Jt=ts.extends(Ys,function(n,o,a){ts.apply(this,[Ys,n,o,a])}),ze="constant",es=K.extends(ze,function(n,o,a,u){K.apply(this,[ze,a,u]),this.name=n,this.value=o}),Qs="continue",Wo=Nt.extends(Qs,function(n,o,a){Nt.apply(this,[Qs,o,a]),this.level=n}),is="declare",Tn=je.extends(is,function(n,o,a,u,d){je.apply(this,[is,o,u,d]),this.directives=n,this.mode=a});Tn.MODE_SHORT="short",Tn.MODE_BLOCK="block",Tn.MODE_NONE="none";var Ut=Tn,ve="declaredirective",Ze=K.extends(ve,function(n,o,a,u){K.apply(this,[ve,a,u]),this.key=n,this.value=o}),ye=Nt.extends("do",function(n,o,a,u){Nt.apply(this,["do",a,u]),this.test=n,this.body=o}),ei="echo",en=Nt.extends(ei,function(n,o,a,u){Nt.apply(this,[ei,a,u]),this.shortForm=o,this.expressions=n}),ii="empty",gn=q.extends(ii,function(n,o,a){q.apply(this,[ii,o,a]),this.expression=n}),li="encapsed",ni=xe.extends(li,function(n,o,a,u,d){xe.apply(this,[li,n,o,u,d]),this.type=a});ni.TYPE_STRING="string",ni.TYPE_SHELL="shell",ni.TYPE_HEREDOC="heredoc",ni.TYPE_OFFSET="offset";var Be=ni,ui="encapsedpart",xr=q.extends(ui,function(n,o,a,u,d){q.apply(this,[ui,u,d]),this.expression=n,this.syntax=o,this.curly=a}),He="entry",bs=q.extends(He,function(n,o,a,u,d,T){q.apply(this,[He,d,T]),this.key=n,this.value=o,this.byRef=a,this.unpack=u}),wn="error",Ki=K.extends(wn,function(n,o,a,u,d,T){K.apply(this,[wn,d,T]),this.message=n,this.token=o,this.line=a,this.expected=u}),ns="eval",Fn=q.extends(ns,function(n,o,a){q.apply(this,[ns,o,a]),this.source=n}),ch="exit",sv=q.extends(ch,function(n,o,a,u){q.apply(this,[ch,a,u]),this.expression=n,this.useDie=o}),fh="expressionstatement",rv=Nt.extends(fh,function(n,o,a){Nt.apply(this,[fh,o,a]),this.expression=n}),ov=Nt.extends("for",function(n,o,a,u,d,T,N){Nt.apply(this,["for",T,N]),this.init=n,this.test=o,this.increment=a,this.shortForm=d,this.body=u}),dh="foreach",av=Nt.extends(dh,function(n,o,a,u,d,T,N){Nt.apply(this,[dh,T,N]),this.source=n,this.key=o,this.value=a,this.shortForm=d,this.body=u}),ph="function",Yo=Qt.extends(ph,function(n,o,a,u,d,T,N){Qt.apply(this,[ph,n,T,N]),this.arguments=o,this.byref=a,this.type=u,this.nullable=d,this.body=null,this.attrGroups=[]}),_h="global",hv=Nt.extends(_h,function(n,o,a){Nt.apply(this,[_h,o,a]),this.items=n}),mh="goto",lv=Nt.extends(mh,function(n,o,a){Nt.apply(this,[mh,o,a]),this.label=n}),Th="halt",uv=Nt.extends(Th,function(n,o,a){Nt.apply(this,[Th,o,a]),this.after=n}),gh="identifier",cv=K.extends(gh,function(n,o,a){K.apply(this,[gh,o,a]),this.name=n}),fv=Nt.extends("if",function(n,o,a,u,d,T){Nt.apply(this,["if",d,T]),this.test=n,this.body=o,this.alternate=a,this.shortForm=u}),Eh="include",dv=q.extends(Eh,function(n,o,a,u,d){q.apply(this,[Eh,u,d]),this.once=n,this.require=o,this.target=a}),kh="inline",pv=xe.extends(kh,function(n,o,a,u){xe.apply(this,[kh,n,o,a,u])}),xh="interface",_v=Qt.extends(xh,function(n,o,a,u,d,T){Qt.apply(this,[xh,n,d,T]),this.extends=o,this.body=a,this.attrGroups=u}),vh="isset",mv=q.extends(vh,function(n,o,a){q.apply(this,[vh,o,a]),this.variables=n}),yh="label",Tv=Nt.extends(yh,function(n,o,a){Nt.apply(this,[yh,o,a]),this.name=n}),Ch="list",gv=q.extends(Ch,function(n,o,a,u){q.apply(this,[Ch,a,u]),this.items=n,this.shortForm=o}),Nh="lookup",En=q.extends(Nh,function(n,o,a,u,d){q.apply(this,[n||Nh,u,d]),this.what=o,this.offset=a}),bh="magic",Ev=xe.extends(bh,function(n,o,a,u){xe.apply(this,[bh,n,o,a,u])}),Ah="match",kv=q.extends(Ah,function(n,o,a,u){q.apply(this,[Ah,a,u]),this.cond=n,this.arms=o}),Ih="matcharm",xv=q.extends(Ih,function(n,o,a,u){q.apply(this,[Ih,a,u]),this.conds=n,this.body=o}),Sh="method",vv=Yo.extends(Sh,function(){Yo.apply(this,arguments),this.kind=Sh}),Oh="reference",zi=K.extends(Oh,function(n,o,a){K.apply(this,[n||Oh,o,a])}),Lh="name",js=zi.extends(Lh,function n(o,a,u,d){zi.apply(this,[Lh,u,d]),a?this.resolution=n.RELATIVE_NAME:o.length===1?this.resolution=n.UNQUALIFIED_NAME:o[0]?this.resolution=n.QUALIFIED_NAME:this.resolution=n.FULL_QUALIFIED_NAME,this.name=o.join("\\")});js.UNQUALIFIED_NAME="uqn",js.QUALIFIED_NAME="qn",js.FULL_QUALIFIED_NAME="fqn",js.RELATIVE_NAME="rn";var yv=js,Ph="namespace",Cv=je.extends(Ph,function(n,o,a,u,d){je.apply(this,[Ph,o,u,d]),this.name=n,this.withBrackets=a||!1}),Dh="namedargument",Nv=q.extends(Dh,function(n,o,a,u){q.apply(this,[Dh,a,u]),this.name=n,this.value=o}),bv=q.extends("new",function(n,o,a,u){q.apply(this,["new",a,u]),this.what=n,this.arguments=o}),Rh="noop",Av=K.extends(Rh,function(n,o){K.apply(this,[Rh,n,o])}),wh="nowdoc",Iv=xe.extends(wh,function(n,o,a,u,d){xe.apply(this,[wh,n,o,u,d]),this.label=a}),Fh="nullkeyword",Sv=K.extends(Fh,function(n,o,a){K.apply(this,[Fh,o,a]),this.raw=n}),Bh="nullsafepropertylookup",Ov=En.extends(Bh,function(n,o,a,u){En.apply(this,[Bh,n,o,a,u])}),Uh="number",Lv=xe.extends(Uh,function(n,o,a,u){xe.apply(this,[Uh,n,o,a,u])}),Mh="offsetlookup",Pv=En.extends(Mh,function(n,o,a,u){En.apply(this,[Mh,n,o,a,u])}),Hh="parameter",Dv=Qt.extends(Hh,function(n,o,a,u,d,T,N,_,I){Qt.apply(this,[Hh,n,_,I]),this.value=a,this.type=o,this.byref=u,this.variadic=d,this.nullable=T,this.flags=N||0,this.attrGroups=[]}),Gh="parentreference",Rv=zi.extends(Gh,function(n,o,a){zi.apply(this,[Gh,o,a]),this.raw=n}),Vh="post",wv=Qe.extends(Vh,function(n,o,a,u){Qe.apply(this,[Vh,a,u]),this.type=n,this.what=o}),Fv=Qe.extends("pre",function(n,o,a,u){Qe.apply(this,["pre",a,u]),this.type=n,this.what=o}),qh="print",Bv=q.extends(qh,function(n,o,a){q.apply(this,[qh,o,a]),this.expression=n}),Wh="program",Uv=je.extends(Wh,function(n,o,a,u,d,T){je.apply(this,[Wh,n,d,T]),this.errors=o,a&&(this.comments=a),u&&(this.tokens=u)}),Yh="property",Mv=Nt.extends(Yh,function(n,o,a,u,d,T,N){Nt.apply(this,[Yh,T,N]),this.name=n,this.value=o,this.nullable=a,this.type=u,this.attrGroups=d}),Qh="propertylookup",Hv=En.extends(Qh,function(n,o,a,u){En.apply(this,[Qh,n,o,a,u])}),jh="propertystatement",Kh=Nt.extends(jh,function(n,o,a,u,d){Nt.apply(this,[jh,u,d]),this.properties=o,this.parseFlags(a)});Kh.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1};var Gv=Kh,zh="retif",Vv=q.extends(zh,function(n,o,a,u,d){q.apply(this,[zh,u,d]),this.test=n,this.trueExpr=o,this.falseExpr=a}),$h="return",qv=Nt.extends($h,function(n,o,a){Nt.apply(this,[$h,o,a]),this.expr=n}),Jh="selfreference",Wv=zi.extends(Jh,function(n,o,a){zi.apply(this,[Jh,o,a]),this.raw=n}),Xh="silent",Yv=q.extends(Xh,function(n,o,a){q.apply(this,[Xh,o,a]),this.expr=n}),Zh="static",Qv=Nt.extends(Zh,function(n,o,a){Nt.apply(this,[Zh,o,a]),this.variables=n}),tl="staticvariable",jv=K.extends(tl,function(n,o,a,u){K.apply(this,[tl,a,u]),this.variable=n,this.defaultValue=o}),el="staticlookup",Kv=En.extends(el,function(n,o,a,u){En.apply(this,[el,n,o,a,u])}),il="staticreference",zv=zi.extends(il,function(n,o,a){zi.apply(this,[il,o,a]),this.raw=n}),nl="string",$v=xe.extends(nl,function(n,o,a,u,d,T){xe.apply(this,[nl,o,u,d,T]),this.unicode=a,this.isDoubleQuote=n}),sl="switch",Jv=Nt.extends(sl,function(n,o,a,u,d){Nt.apply(this,[sl,u,d]),this.test=n,this.body=o,this.shortForm=a}),rl="throw",Xv=Nt.extends(rl,function(n,o,a){Nt.apply(this,[rl,o,a]),this.what=n}),ol="trait",Zv=Qt.extends(ol,function(n,o,a,u){Qt.apply(this,[ol,n,a,u]),this.body=o}),al="traitalias",ty=K.extends(al,function(n,o,a,u,d,T){K.apply(this,[al,d,T]),this.trait=n,this.method=o,this.as=a,this.visibility="",u&&(u[0]===0?this.visibility="public":u[0]===1?this.visibility="protected":u[0]===2&&(this.visibility="private"))}),hl="traitprecedence",ey=K.extends(hl,function(n,o,a,u,d){K.apply(this,[hl,u,d]),this.trait=n,this.method=o,this.instead=a}),ll="traituse",iy=K.extends(ll,function(n,o,a,u){K.apply(this,[ll,a,u]),this.traits=n,this.adaptations=o}),ny=Nt.extends("try",function(n,o,a,u,d){Nt.apply(this,["try",u,d]),this.body=n,this.catches=o,this.always=a}),ul="typereference",cl=zi.extends(ul,function(n,o,a,u){zi.apply(this,[ul,a,u]),this.name=n,this.raw=o});cl.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var sy=cl,fl="unary",ry=Qe.extends(fl,function(n,o,a,u){Qe.apply(this,[fl,a,u]),this.type=n,this.what=o}),dl="uniontype",oy=Qt.extends(dl,function(n,o,a){Qt.apply(this,[dl,null,o,a]),this.types=n}),pl="unset",ay=Nt.extends(pl,function(n,o,a){Nt.apply(this,[pl,o,a]),this.variables=n}),_l="usegroup",hy=Nt.extends(_l,function(n,o,a,u,d){Nt.apply(this,[_l,u,d]),this.name=n,this.type=o,this.items=a}),ml="useitem",Qo=Nt.extends(ml,function(n,o,a,u,d){Nt.apply(this,[ml,u,d]),this.name=n,this.alias=o,this.type=a});Qo.TYPE_CONST="const",Qo.TYPE_FUNCTION="function";var ly=Qo,Tl="variable",uy=q.extends(Tl,function(n,o,a,u){q.apply(this,[Tl,a,u]),this.name=n,this.curly=o||!1}),gl="variadic",cy=q.extends(gl,function(n,o,a){q.apply(this,[gl,o,a]),this.what=n}),El="while",fy=Nt.extends(El,function(n,o,a,u,d){Nt.apply(this,[El,u,d]),this.test=n,this.body=o,this.shortForm=a}),kl="yield",dy=q.extends(kl,function(n,o,a,u){q.apply(this,[kl,a,u]),this.value=n,this.key=o}),xl="yieldfrom",py=q.extends(xl,function(n,o,a){q.apply(this,[xl,o,a]),this.value=n}),Ee=function(n,o){this.withPositions=n,this.withSource=o};Ee.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,o){n.forEach(function(a){Ee.precedence[a]=o+1})}),Ee.prototype.isRightAssociative=function(n){return n==="**"||n==="??"},Ee.prototype.swapLocations=function(n,o,a,u){this.withPositions&&(n.loc.start=o.loc.start,n.loc.end=a.loc.end,this.withSource&&(n.loc.source=u.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ee.prototype.resolveLocations=function(n,o,a,u){this.withPositions&&(n.loc.start.offset>o.loc.start.offset&&(n.loc.start=o.loc.start),n.loc.end.offset<a.loc.end.offset&&(n.loc.end=a.loc.end),this.withSource&&(n.loc.source=u.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ee.prototype.resolvePrecedence=function(n,o){var a,u,d;return n.kind==="call"?this.resolveLocations(n,n.what,n,o):n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"&&n.offset?this.resolveLocations(n,n.what,n.offset,o):n.kind==="bin"?n.right&&!n.right.parenthesizedExpression&&(n.right.kind==="bin"?(u=Ee.precedence[n.type],d=Ee.precedence[n.right.type],u&&d&&d<=u&&(n.type!==n.right.type||!this.isRightAssociative(n.type))&&(a=n.right,n.right=n.right.left,this.swapLocations(n,n.left,n.right,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a)):n.right.kind==="retif"&&(u=Ee.precedence[n.type],d=Ee.precedence["?"],u&&d&&d<=u&&(a=n.right,n.right=n.right.test,this.swapLocations(n,n.left,n.right,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a))):n.kind!=="silent"&&n.kind!=="cast"||!n.expr||n.expr.parenthesizedExpression?n.kind==="unary"?n.what&&!n.what.parenthesizedExpression&&(n.what.kind==="bin"?(a=n.what,n.what=n.what.left,this.swapLocations(n,n,n.what,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.what.kind==="retif"&&(a=n.what,n.what=n.what.test,this.swapLocations(n,n,n.what,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a)):n.kind==="retif"?n.falseExpr&&n.falseExpr.kind==="retif"&&!n.falseExpr.parenthesizedExpression&&(a=n.falseExpr,n.falseExpr=a.test,this.swapLocations(n,n.test,n.falseExpr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a):n.kind==="assign"?n.right&&n.right.kind==="bin"&&!n.right.parenthesizedExpression&&(u=Ee.precedence["="],d=Ee.precedence[n.right.type],u&&d&&d<u&&(a=n.right,n.right=n.right.left,a.left=n,this.swapLocations(a,a.left,n.right,o),n=a)):n.kind==="expressionstatement"&&this.swapLocations(n,n.expression,n,o):n.expr.kind==="bin"?(a=n.expr,n.expr=n.expr.left,this.swapLocations(n,n,n.expr,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.expr.kind==="retif"&&(a=n.expr,n.expr=n.expr.test,this.swapLocations(n,n,n.expr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a),n},Ee.prototype.prepare=function(n,o,a){var u=null;(this.withPositions||this.withSource)&&(u=a.position());var d=this,T=function N(){var _=null,I=Array.prototype.slice.call(arguments);if(I.push(o),d.withPositions||d.withSource){var S=null;d.withSource&&(S=a.lexer._input.substring(u.offset,a.prev[2])),_=new tt(S,u,new dt(a.prev[0],a.prev[1],a.prev[2])),I.push(_)}n||(n=I.shift());var x=d[n];if(typeof x!="function")throw new Error('Undefined node "'+n+'"');var Gt=Object.create(x.prototype);return x.apply(Gt,I),N.instance=Gt,N.trailingComments&&(Gt.trailingComments=N.trailingComments),typeof N.postBuild=="function"&&N.postBuild(Gt),a.debug&&delete Ee.stack[N.stackUid],d.resolvePrecedence(Gt,a)};return a.debug&&(Ee.stack||(Ee.stack={},Ee.stackUid=1),Ee.stack[++Ee.stackUid]={position:u,stack:new Error().stack.split(`
`).slice(3,5)},T.stackUid=Ee.stackUid),T.setTrailingComments=function(N){T.instance?T.instance.setTrailingComments(N):T.trailingComments=N},T.destroy=function(N){o&&(N?N.leadingComments?N.leadingComments=o.concat(N.leadingComments):N.leadingComments=o:a._docIndex=a._docs.length-o.length),a.debug&&delete Ee.stack[T.stackUid]},T},Ee.prototype.checkNodes=function(){var n=[];for(var o in Ee.stack)Ee.stack.hasOwnProperty(o)&&n.push(Ee.stack[o]);return Ee.stack={},n},[Kt,kt,zt,We,Xe,Ye,Jn,je,m,D,p,C,V,ot,Wt,Ke,Dn,Zn,Rn,ts,qo,Jt,es,ti,Wo,Qt,Ut,Ze,ye,en,gn,Be,xr,bs,Ki,Fn,sv,q,rv,ov,av,Yo,hv,lv,uv,cv,fv,dv,pv,_v,mv,Tv,gv,xe,En,Ev,kv,xv,vv,yv,Cv,Nv,bv,K,Av,Iv,Sv,Ov,Lv,Pv,Qe,Dv,Rv,wv,Fv,Bv,Uv,Mv,Hv,Gv,zi,Vv,qv,Wv,Yv,Nt,Qv,jv,Kv,zv,$v,Jv,Xv,Zv,ty,ey,iy,ny,sy,ry,oy,ay,hy,ly,uy,cy,fy,dy,py].forEach(function(n){Ee.prototype[n.kind]=n});var vl=Ee;function jo(n,o){for(var a=Object.keys(n),u=a.length;u--;){var d=a[u],T=n[d];T===null?delete o[d]:typeof T=="function"?o[d]=T.bind(o):Array.isArray(T)?o[d]=Array.isArray(o[d])?o[d].concat(T):T:o[d]=typeof T=="object"&&typeof o[d]=="object"?jo(T,o[d]):T}return o}var Oi=function(n){if(typeof this=="function")return new this(n);if(this.tokens=M,this.lexer=new ct(this),this.ast=new vl,this.parser=new W(this.lexer,this.ast),n&&typeof n=="object"){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if(typeof n.parser.version=="string"){var o=n.parser.version.split(".");if(o=100*parseInt(o[0])+parseInt(o[1]),isNaN(o))throw new Error("Bad version number : "+n.parser.version);n.parser.version=o}else if(typeof n.parser.version!="number")throw new Error("Expecting a number for version");if(n.parser.version<500||n.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}jo(n,this),this.lexer.version=this.parser.version}},Ko=function(n){return typeof n.write=="function"?n.toString():n};Oi.create=function(n){return new Oi(n)},Oi.parseEval=function(n,o){return new Oi(o).parseEval(n)},Oi.prototype.parseEval=function(n){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,n=Ko(n),this.parser.parse(n,"eval")},Oi.parseCode=function(n,o,a){return typeof o!="object"||a||(a=o,o="unknown"),new Oi(a).parseCode(n,o)},Oi.prototype.parseCode=function(n,o){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=Ko(n),this.parser.parse(n,o)},Oi.tokenGetAll=function(n,o){return new Oi(o).tokenGetAll(n)},Oi.prototype.tokenGetAll=function(n){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,n=Ko(n);var o=this.lexer.EOF,a=this.tokens.values;this.lexer.setInput(n);for(var u=this.lexer.lex()||o,d=[];u!=o;){var T=this.lexer.yytext;a.hasOwnProperty(u)&&(T=[a[u],T,this.lexer.yylloc.first_line]),d.push(T),u=this.lexer.lex()||o}return d};var ss=Oi,_y=M,my=ct,Ty=vl,gy=W,Ey=jo,ky=Oi;ss.tokens=_y,ss.lexer=my,ss.AST=Ty,ss.parser=gy,ss.combine=Ey,ss.default=ky;var yl=function(n,o,a){var u=a&&a.parentParser==="markdown";if(!n&&u)return"";n=n.replace(/\?>\r?\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var d,T=new ss({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),N=n.indexOf("<?php")!==-1,_=u&&!N;try{d=_?T.parseEval(n):T.parseCode(n)}catch(I){throw I instanceof SyntaxError&&"lineNumber"in I&&(I.loc={start:{line:I.lineNumber,column:I.columnNumber}},delete I.lineNumber,delete I.columnNumber),I}return d.extra={parseAsEval:_},d.comments.forEach(function(I){I.value[I.value.length-1]==="\r"&&(I.value=I.value.slice(0,-1),I.loc.end.offset=I.loc.end.offset-1),I.value[I.value.length-1]===`
`&&(I.value=I.value.slice(0,-1),I.loc.end.offset=I.loc.end.offset-1)}),d},As=s.default.util,xy=As.hasNewline,vy=As.skipEverythingButNewLine,yy=As.skipNewline,Cy=As.isNextLineEmpty,Ny=As.isPreviousLineEmpty,by=As.getNextNonSpaceNonCommentCharacterIndex,Ay=s.default.version;function zo(n,o){return parseInt(Ay[0])>1?n[o]:n}var Cl={};function $o(n){return Cl[n]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(n,o){n.forEach(function(a){Cl[a]=o})});var Nl=["==","!=","===","!==","<>","<=>"],vr=["*","/","%"],Jo=[">>","<<"];function bl(n){return["block","program","namespace","class","interface","trait","traituse","declare"].includes(n.kind)}function Al(n){var o=n.body;return o?(o.kind==="block"&&(o=o.children),o[0]):null}function Bn(n){var o=n.children||n.body||n.adaptations;return Array.isArray(o)?o:null}function Il(n){var o=n.getParentNode();return o?Bn(o):null}function yr(n){return n.length>0?n[n.length-1]:null}function Xo(n){var o=n.getValue();if(o.kind==="program"){var a=Bn(o);return!(!a||a.length===0)&&a[0].kind==="inline"}if(o.kind==="switch"){if(!o.body)return!1;var u=Bn(o.body);if(u.length===0)return!1;var d=j(u,1)[0];if(!d.body)return!1;var T=Bn(d.body);return T.length!==0&&T[0].kind==="inline"}var N=Al(o);return!!N&&N.kind==="inline"}var Sl=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(n,o){return n[o.toLowerCase()]=o,n},{}),se={printNumber:function(n){return n.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:$o,isBitwiseOperator:function(n){return!!Jo[n]||n==="|"||n==="^"||n==="&"},shouldFlatten:function(n,o){return $o(o)===$o(n)&&n!=="**"&&(!Nl.includes(n)||!Nl.includes(o))&&!(o==="%"&&vr.includes(n)||n==="%"&&vr.includes(o))&&(o===n||!vr.includes(o)||!vr.includes(n))&&(!Jo.includes(n)||!Jo.includes(o))},nodeHasStatement:bl,getNodeListProperty:Bn,getParentNodeListProperty:Il,getLast:yr,getPenultimate:function(n){return n.length>1?n[n.length-2]:null},isLastStatement:function(n){var o=Il(n);if(!o)return!0;var a=n.getValue();return o[o.length-1]===a},getBodyFirstChild:Al,lineShouldEndWithSemicolon:function(n){var o=n.getValue(),a=n.getParentNode();if(!a)return!1;if(["for","foreach","while","do","if","switch"].includes(a.kind)&&o.kind!=="block"&&o.kind!=="if"&&(a.body===o||a.alternate===o))return!0;if(!bl(a)||o.kind==="echo"&&o.shortForm)return!1;if(o.kind==="traituse")return!o.adaptations;if(o.kind==="method"&&o.isAbstract)return!0;if(o.kind==="method"){var u=n.getParentNode();if(u&&u.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","global","static","echo","unset","return","break","continue","throw"].includes(o.kind)},fileShouldEndWithHardline:function(n){var o=n.getValue(),a=o.kind==="program",u=o.children&&yr(o.children);if(!a||u&&["halt","inline"].includes(u.kind))return!1;if(u&&(u.kind==="declare"||u.kind==="namespace")){var d=u.children.length>0&&yr(u.children);if(d&&["halt","inline"].includes(d.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(n){var o=n.replace(/^\\/,"");return o.indexOf("\\")!==-1?o:n},hasDanglingComments:function(n){return n.comments&&n.comments.some(function(o){return!o.leading&&!o.trailing})},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},docShouldHaveTrailingNewline:function n(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=o.getNode(a),d=o.getNode(a+1),T=o.getNode(a+2);if(!d)return!1;if(T&&["call","new","echo"].includes(T.kind)&&!["call","array"].includes(d.kind)||d.kind==="parameter"){var N=T.arguments.length-1,_=T.arguments.indexOf(d);return _!==N}if(T&&T.kind==="for"){var I=T.init.indexOf(d);if(I!==-1)return I!==T.init.length-1;var S=T.test.indexOf(d);if(S!==-1)return S!==T.test.length-1;var x=T.increment.indexOf(d);if(x!==-1)return x!==T.increment.length-1}if(d.kind==="bin")return d.left===u||n(o,a+1);if(d.kind==="case"&&d.test===u)return!0;if(d.kind==="staticvariable"){var Gt=T.variables.length-1,Yt=T.variables.indexOf(d);return Yt!==Gt}if(d.kind==="entry"){if(d.key===u)return!0;var oe=T.items.length-1,ge=T.items.indexOf(d);return ge!==oe}if(["call","new"].includes(d.kind)){var wt=d.arguments.length-1,pe=d.arguments.indexOf(u);return pe!==wt}if(d.kind==="echo"){var ie=d.expressions.length-1,we=d.expressions.indexOf(u);return we!==ie}if(d.kind==="array"){var Pe=d.items.length-1,_e=d.items.indexOf(u);return _e!==Pe}return d.kind==="retif"&&n(o,a+1)},isLookupNode:function(n){return n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"},isFirstChildrenInlineNode:Xo,shouldPrintHardLineAfterStartInControlStructure:function(n){var o=n.getValue();return!["try","catch"].includes(o.kind)&&Xo(n)},shouldPrintHardLineBeforeEndInControlStructure:function(n){var o=n.getValue();if(["try","catch"].includes(o.kind))return!0;if(o.kind==="switch"){var a=Bn(o.body);if(a.length===0)return!0;var u=yr(a);if(!u.body)return!0;var d=Bn(u.body);return d.length===0||d[0].kind!=="inline"}return!Xo(n)},getAlignment:function(n){var o=n.split(`
`).pop();return o.length-o.trimLeft().length+1},isProgramLikeNode:function(n){return["program","declare","namespace"].includes(n.kind)},isReferenceLikeNode:function(n){return["name","parentreference","selfreference","staticreference"].includes(n.kind)},getNodeKindIncludingLogical:function(n){return n.kind==="bin"&&["||","&&"].includes(n.type)?"logical":n.kind},useDoubleQuote:function(n,o){if(n.isDoubleQuote===o.singleQuote){var a=n.raw.slice(n.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return n.isDoubleQuote?a:!a}return n.isDoubleQuote},hasEmptyBody:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",a=n.getValue();return a[o]&&a[o].children&&a[o].children.length===0&&(!a[o].comments||a[o].comments.length===0)},isNextLineEmptyAfterNamespace:function(n,o,a){var u=a(o);return u=vy(n,u),u=yy(n,u),xy(n,u)},shouldPrintHardlineBeforeTrailingComma:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"||n.kind==="entry"&&(n.value.kind==="nowdoc"||n.value.kind==="encapsed"&&n.value.type==="heredoc")},isDocNode:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"},getAncestorNode:function(n,o){var a=function(u,d){for(var T,N=[].concat(d),_=-1;T=u.getParentNode(++_);)if(N.indexOf(T.kind)!==-1)return _;return-1}(n,o);return a===-1?null:n.getParentNode(a)},getNextNode:function(n,o){var a=n.getParentNode(),u=Bn(a);if(!u)return null;var d=u.indexOf(o);return d===-1?null:a.children[d+1]},normalizeMagicMethodName:function(n){var o=n.toLowerCase();return Sl[o]?Sl[o]:n},isPreviousLineEmpty:function(n,o,a){return Ny(n,o,zo(a,"locStart"))},isNextLineEmpty:function(n,o,a){return Cy(n,o,zo(a,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(n,o,a){return by(n,o,zo(a,"locEnd"))}},Is=s.default.util,$i=Is.addLeadingComment,ki=Is.addDanglingComment,Ji=Is.addTrailingComment,Iy=Is.skipNewline,Cr=Is.hasNewline,Sy=Is.hasNewlineInRange,rs=s.default.doc.builders,Un=rs.concat,Ol=rs.join,Oy=rs.indent,nn=rs.hardline,Ll=rs.cursor,Pl=rs.lineSuffix,Ly=rs.breakParent,Ks=se.getNextNonSpaceNonCommentCharacterIndex,Py=se.isNextLineEmpty,Dy=se.isPreviousLineEmpty,Ry=se.isLookupNode;function Nr(n,o){var a=n.children;a.length===0?ki(n,o):$i(a[0],o)}function Zo(n,o){n.kind==="block"?Nr(n,o):$i(n,o)}function Dl(n,o,a,u,d,T){var N=Ks(n,d,T),_=n.charAt(N);return o&&o.kind==="identifier"&&a&&(a.kind==="function"||a.kind==="method")&&_===")"?(Ji(a,d),!0):!(!a||a.kind!=="function"&&a.kind!=="method"||!u||u.kind!=="block")&&(Nr(u,d),!0)}function ta(n,o,a,u,d,T){if(!a||a.kind!=="if"||!u)return!1;var N=Ks(n,d,T);return n.charAt(N)===")"?(Ji(o,d),!0):o===a.body&&u===a.alternate?(ki(a,d),!0):u.kind==="if"?(Zo(u.body,d),!0):a.body===u&&($i(u,d),!0)}function ea(n,o,a){if(n&&["class","interface","trait"].includes(n.kind)){if(o&&n.extends){if(Array.isArray(n.extends)){if(n.extends.some(function(u){if(o&&o===u)return ki(o,a),!0}))return!0}else if(o===n.extends)return ki(o,a),!0}if(o&&n.implements&&n.implements.some(function(u){if(o&&o===u)return ki(o,a),!0}))return!0;if(!(n.body&&n.body.length>0))return ki(n,a),!0}return!!(o&&o.kind==="class"&&o.isAnonymous&&o.leadingComments&&a.kind==="commentblock")}function ia(n,o,a,u,d){if(o&&(o.kind==="function"||o.kind==="method")){for(var T=0,N=0;N<o.arguments.length;N++)T=d.locEnd(o.arguments[N])>T?d.locEnd(o.arguments[N]):T;var _=o.body&&d.locStart(u)>T&&d.locEnd(u)<d.locStart(o.body),I=Ks(n,u,d);if(o.type&&_&&n.charAt(I)!==")")return d.locEnd(u)<d.locStart(o.type)?(ki(o.type,u),!0):(Ji(o.type,u),!0)}return!1}function na(n,o,a,u,d){return!(!a||!["function","method","parameter"].includes(a.kind))&&o.kind==="typereference"&&u.kind==="identifier"&&(Ji(o,d),!0)}function Rl(n,o){return!(!n||!["label","goto"].includes(n.kind))&&(Ji(n,o),!0)}function sa(n,o,a,u){return a&&a.kind==="inline"?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.includes(u)||a.leadingComments.push(u),!0):!(n||a||!o||o.kind!=="inline")&&(ki(o,u),!0)}function wl(n,o,a){return!(!n||n.kind!=="try"||!o)&&(o.kind==="block"?(Nr(o,a),!0):o.kind==="try"?(Zo(o.always,a),!0):o.kind==="catch"&&(Zo(o.body,a),!0))}function Fl(n,o,a,u){return a||o||!n||n.kind!=="namespace"||n.withBrackets?!(o||!n||n.kind!=="namespace"||n.withBrackets)&&(ki(n,u),!0):(Ji(n,u),!0)}function Bl(n,o,a,u){return!(!n||n.kind!=="declare")&&(!o||o.kind!=="noop")&&(a&&n.directives[0]!==a?!(!a||!o)&&($i(a,u),!0):(n.mode==="none"?Ji(n,u):ki(n,u),!0))}function ra(n,o,a,u,d,T){if(!a||a.kind!=="while"||!u)return!1;var N=Ks(n,d,T);return n.charAt(N)===")"?(Ji(o,d),!0):u.kind==="block"&&(Nr(u,d),!0)}function oa(n,o){return n.getValue().printed=!0,o.printer.printComment(n,o)}function Ul(n,o,a){return n.getNode()===o.cursorNode&&n.getValue()?Un([Ll,a,Ll]):a}var te={handleOwnLineComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return Dl(o,u,d,T,n,a)||function(N,_,I){return N&&Ry(N)&&_&&["identifier","variable","encapsed"].includes(_.kind)?($i(N,I),!0):!1}(d,T,n)||ta(o,u,d,T,n,a)||ra(o,u,d,T,n,a)||wl(d,T,n)||ea(d,T,n)||na(o,u,d,T,n)||ia(o,d,T,n,a)||function(N,_,I,S){return!I&&N&&(N.kind==="for"||N.kind==="foreach")?(N.body&&N.body.kind!=="block"?$i(I,S):$i(N,S),!0):!1}(d,0,T,n)||sa(d,u,T,n)||Bl(d,u,T,n)},handleEndOfLineComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return function(N,_,I,S,x){return!_&&!S&&I&&I.kind==="array"?(Ji(I,x),!0):!1}(0,u,d,T,n)||function(N,_,I,S,x){return I&&I.kind==="return"&&!I.expr?(Ji(I,x),!0):!1}(0,0,d,0,n)||Dl(o,u,d,T,n,a)||function(N,_,I,S,x,Gt){var Yt=_&&!Sy(x,Gt.locEnd(_),Gt.locStart(S));return(!_||!Yt)&&N&&N.kind==="retif"&&I?($i(I,S),!0):!1}(d,u,T,n,o,a)||ta(o,u,d,T,n,a)||ra(o,u,d,T,n,a)||wl(d,T,n)||ea(d,T,n)||na(o,u,d,T,n)||ia(o,d,T,n,a)||function(N,_){return N&&N.kind==="entry"?($i(N,_),!0):!1}(d,n)||function(N,_,I){return _&&_.kind==="call"&&N&&_.what===N&&_.arguments.length>0?($i(_.arguments[0],I),!0):!1}(u,d,n)||function(N,_,I){if(N&&N.kind==="assign"&&_){var S=N.loc.start.offset+N.loc.source.indexOf("=");if(I.loc.start.offset>S)return $i(_,I),!0}return!1}(d,T,n)||sa(d,u,T,n)||Fl(d,u,T,n)||Bl(d,u,T,n)||Rl(d,n)},handleRemainingComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return ta(o,u,d,T,n,a)||ra(o,u,d,T,n,a)||function(N,_,I,S){var x=Ks(N,I,S);return N.charAt(x)!==")"?!1:_&&(_.kind==="function"||_.kind==="closure"||_.kind==="method"||_.kind==="call"||_.kind==="new")&&_.arguments.length===0?(ki(_,I),!0):!1}(o,d,n,a)||ea(d,T,n)||function(N,_,I){return N&&N.kind==="traituse"&&N.adaptations&&!N.adaptations.length?(ki(N,I),!0):!1}(d,0,n)||na(o,u,d,T,n)||ia(o,d,T,n,a)||Rl(d,n)||function(N,_,I,S){return _&&_.kind==="halt"?(ki(_,S),!0):N&&N.kind==="halt"?(ki(N,S),!0):!1}(u,d,0,n)||function(N,_){return N&&(N.kind==="continue"||N.kind==="break")&&!N.label?(Ji(N,_),!0):!1}(d,n)||sa(d,u,T,n)||Fl(d,u,T,n)},getCommentChildNodes:function(n){return typeof n!="object"?[]:function(o){return Object.keys(o).filter(function(a){return a!=="kind"&&a!=="loc"&&a!=="errors"&&a!=="extra"&&a!=="comments"&&a!=="leadingComments"&&a!=="enclosingNode"&&a!=="precedingNode"&&a!=="followingNode"}).map(function(a){return o[a]})}(n)},canAttachComment:function(n){return n.kind&&n.kind!=="commentblock"&&n.kind!=="commentline"},isBlockComment:function(n){return n.kind==="commentblock"},printDanglingComments:function(n,o,a,u){var d=[],T=n.getValue();return T&&T.comments?(n.each(function(N){var _=N.getValue();!_||_.leading||_.trailing||u&&!u(_)||d.push(oa(N,o))},"comments"),d.length===0?"":a?Ol(nn,d):Oy(Un([nn,Ol(nn,d)]))):""},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},hasLeadingOwnLineComment:function(n,o,a){return o.comments&&o.comments.some(function(u){return u.leading&&Cr(n,a.locEnd(u))})},printComments:function(n,o){var a=[];return n.forEach(function(u,d,T){u.printed=!0;var N=T.length===d+1;a.push(u.value),N||a.push(nn),Py(o.originalText,u,o)&&!N&&a.push(nn)}),Un(a)},printAllComments:function(n,o,a,u){var d=n.getValue(),T=o(n),N=d&&d.comments;if(!N||N.length===0)return Ul(n,a,T);var _=[],I=[u?";":"",T];return n.each(function(S){var x=S.getValue(),Gt=x.leading,Yt=x.trailing;if(Gt){var oe=function(wt,pe,ie){var we=wt.getValue(),Pe=oa(wt,ie);if(!Pe)return"";var _e=ie.printer.isBlockComment&&ie.printer.isBlockComment(we);return Un(_e?[Pe,Cr(ie.originalText,ie.locEnd(we))?nn:" "]:[Pe,nn])}(S,0,a);if(!oe)return;_.push(oe);var ge=a.originalText;Cr(ge,Iy(ge,a.locEnd(x)))&&_.push(nn)}else Yt&&I.push(function(wt,pe,ie){var we=wt.getValue(),Pe=oa(wt,ie);if(!Pe)return"";var _e=ie.printer.isBlockComment&&ie.printer.isBlockComment(we);if(Cr(ie.originalText,ie.locStart(we),{backwards:!0})){var Zt=Dy(ie.originalText,we,ie);return Pl(Un([nn,Zt?nn:"",Pe]))}return Un(_e?[" ",Pe]:[Pl(Un([" ",Pe])),_e?"":Ly])}(S,0,a))},"comments"),Ul(n,a,Un(_.concat(I)))}};function Ml(){}Ml.strictEqual=function(){};var wy=Ml,Hl=se.getPrecedence,Fy=se.shouldFlatten,By=se.isBitwiseOperator,Gl=function(n){var o=n.getParentNode();if(!o)return!1;var a=n.getName(),u=n.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(o.kind))return!1;switch(u.kind){case"pre":case"post":if(o.kind==="unary")return u.kind==="pre"&&(u.type==="+"&&o.type==="+"||u.type==="-"&&o.type==="-");case"unary":switch(o.kind){case"unary":return u.type===o.type&&(u.type==="+"||u.type==="-");case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;case"bin":return o.type==="**"&&a==="left";default:return!1}case"bin":switch(o.kind){case"assign":case"retif":return["and","xor","or"].includes(u.type);case"silent":case"cast":return u.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"staticlookup":case"offsetlookup":return a==="what"&&o.what===u;case"bin":var d=o.type,T=Hl(d),N=u.type,_=Hl(N);return T>_||d==="||"&&N==="&&"||(T===_&&a==="right"?(wy.strictEqual(o.right,u),!0):T===_&&!Fy(d,N)||(T<_&&N==="%"?d==="+"||d==="-":!!By(d)));default:return!1}case"propertylookup":case"staticlookup":switch(o.kind){case"call":return a==="what"&&o.what===u&&u.parenthesizedExpression;default:return!1}case"clone":case"new":switch(o.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;default:return!1}case"yield":switch(o.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;case"retif":return o.test===u;default:return!(!u.key&&!u.value)}case"assign":return(o.kind!=="for"||!o.init.includes(u)&&!o.increment.includes(u))&&o.kind!=="assign"&&o.kind!=="static"&&!["if","do","while","foreach","switch"].includes(o.kind)&&o.kind!=="silent"&&o.kind!=="call";case"retif":switch(o.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(a==="test"&&!o.trueExpr);case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;default:return!1}case"closure":switch(o.kind){case"call":return a==="what"&&o.what===u;case"propertylookup":return!0;default:return!1}case"silence":case"cast":return u.parenthesizedExpression;case"string":case"array":switch(o.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(u.kind)||o.kind!=="offsetlookup")&&a==="what"&&o.what===u;default:return!1}case"print":case"include":return o.kind==="bin"}return!1},_i=s.default.doc.builders,Vl=_i.breakParent,v=_i.concat,$e=_i.join,de=_i.line,Uy=_i.lineSuffix,vt=_i.group,Ss=_i.conditionalGroup,St=_i.indent,My=_i.dedent,Mn=_i.ifBreak,ft=_i.hardline,Xt=_i.softline,Os=_i.literalline,Hy=_i.align,Gy=_i.dedentToRoot,Hn=s.default.doc.utils.willBreak,aa=s.default.util,Vy=aa.isNextLineEmptyAfterIndex,qy=aa.hasNewline,ql=aa.hasNewlineInRange,Gn=se.getLast,Wy=se.getPenultimate,Wl=se.isLastStatement,Yy=se.lineShouldEndWithSemicolon,Qy=se.printNumber,Yl=se.shouldFlatten,Ql=se.maybeStripLeadingSlashFromUse,jy=se.fileShouldEndWithHardline,Li=se.hasDanglingComments,jl=se.hasLeadingComment,Kl=se.hasTrailingComment,zl=se.docShouldHaveTrailingNewline,xi=se.isLookupNode,ha=se.isFirstChildrenInlineNode,Ky=se.shouldPrintHardLineAfterStartInControlStructure,zy=se.shouldPrintHardLineBeforeEndInControlStructure,$y=se.getAlignment,la=se.isProgramLikeNode,Ls=se.getNodeKindIncludingLogical,Jy=se.useDoubleQuote,$l=se.hasEmptyBody,Xy=se.isNextLineEmptyAfterNamespace,Jl=se.shouldPrintHardlineBeforeTrailingComma,ua=se.isDocNode,ca=se.getAncestorNode,fa=se.isReferenceLikeNode,Zy=se.getNextNode,tC=se.normalizeMagicMethodName,eC=se.getNextNonSpaceNonCommentCharacterIndex,os=se.isNextLineEmpty;function Ps(n,o){return parseFloat(n)>=parseFloat(o)}function br(n,o){return!!n.trailingCommaPHP&&Ps(n.phpVersion,o)}function da(n){switch(n.braceStyle){case"1tbs":return!1;case"psr-2":default:return!0}}function pa(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return v([u?"?":"","->",n.call(a,"offset")])}function Xl(n,o,a){return pa(n,o,a,!0)}function Zl(n,o,a){var u=n.getValue(),d=!["variable","identifier"].includes(u.offset.kind);return v(["::",d?"{":"",n.call(a,"offset"),d?"}":""])}function tu(n,o,a){var u=n.getValue(),d=u.offset&&u.offset.kind==="number"||ca(n,"encapsed");return v(["[",u.offset?vt(v([St(v([d?"":Xt,n.call(a,"offset")])),d?"":Xt])):"","]"])}function eu(n){return n.kind==="array"&&(n.items.length>0||n.comments)||n.kind==="function"||n.kind==="method"||n.kind==="closure"}function iC(n){var o=Gn(n),a=Wy(n);return!jl(o)&&!Kl(o)&&eu(o)&&(!a||a.kind!==o.kind)}function nC(n){if(n.length!==2)return!1;var o=j(n,2),a=o[0],u=o[1];return!(a.comments&&a.comments.length||a.kind!=="function"&&a.kind!=="method"&&a.kind!=="closure"||u.kind==="retif"||eu(u))}function sn(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",d=n.getValue()[u];if(d.length===0)return v(["(",te.printDanglingComments(n,o,!0),")"]);var T=!1,N=!1,_=d.length-1,I=n.map(function(_e,Zt){var Ce=_e.getNode(),Ue=[a(_e)];return Zt===_||(os(o.originalText,Ce,o)?(Zt===0&&(N=!0),T=!0,Ue.push(",",ft,ft)):Ue.push(",",de)),v(Ue)},u),S=n.getValue(),x=Gn(d),Gt=br(o,"7.3")&&["call","new","unset","isset"].includes(S.kind)||br(o,"8.0")&&["function","closure","method","arrowfunc"].includes(S.kind)?St(v([x&&Jl(x)?ft:"",","])):"";function Yt(){return vt(v(["(",St(v([de,v(I)])),Gt,de,")"]),{shouldBreak:!0})}var oe=nC(d),ge=iC(d);if(oe||ge){var wt,pe=(oe?I.slice(1).some(Hn):I.slice(0,-1).some(Hn))||T,ie=0;n.each(function(_e){oe&&ie===0&&(wt=[v([_e.call(function(Zt){return a(Zt,{expandFirstArg:!0})}),I.length>1?",":"",N?ft:de,N?ft:""])].concat(I.slice(1))),ge&&ie===d.length-1&&(wt=I.slice(0,-1).concat(_e.call(function(Zt){return a(Zt,{expandLastArg:!0})}))),ie++},u);var we=I.some(Hn),Pe=v(["(",v(wt),")"]);return v([we?Vl:"",Ss([we?Mn(Yt(),Pe):Pe,v(oe?["(",vt(wt[0],{shouldBreak:!0}),v(wt.slice(1)),")"]:["(",v(I.slice(0,-1)),vt(Gn(wt),{shouldBreak:!0}),")"]),vt(v(["(",St(v([de,v(I)])),Mn(Gt),de,")"]),{shouldBreak:!0})],{shouldBreak:pe})])}return vt(v(["(",St(v([Xt,v(I)])),Mn(Gt),Xt,")"]),{shouldBreak:I.some(Hn)||T})}function iu(n){return n.kind==="array"&&n.items.length!==0}function zs(n){return n.right.kind==="array"&&n.right.items.length!==0}function nu(n,o,a){var u=n.getValue();switch(u.kind){case"propertylookup":return pa(n,o,a);case"nullsafepropertylookup":return Xl(n,o,a);case"staticlookup":return Zl(n,0,a);case"offsetlookup":return tu(n,0,a);default:return"Have not implemented lookup kind ".concat(u.kind," yet.")}}function su(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.opening,u=a===void 0||a;if(n.type==="heredoc")return u?"<<<".concat(n.label):n.label;var d={string:'"',shell:"`"};return d[n.type]?d[n.type]:"Unimplemented encapsed type ".concat(n.type)}function sC(n,o,a){var u=[],d=[];return n.each(function(T){u.push(v(d)),u.push(vt(a(T))),d=[",",de],T.getValue()&&os(o.originalText,T.getValue(),o)&&d.push(Xt)},"items"),v(u)}function rC(n,o){if(o.length===0)return n;var a=0;return o.reduce(function(u,d){var T=d.start,N=d.end,_=d.alignment,I=d.before,S=d.after,x=v([I||"",v(n.slice(T,N)),S||""]),Gt=u.concat(n.slice(a,T),_?Gy(vt(v([Hy(new Array(_).join(" "),x)]))):vt(x),N===n.length-1?n.slice(N):"");return a=N,Gt},[])}function $s(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",d=n.getValue(),T=n.getParentNode(),N=-1,_=[],I=[];n.map(function(_e,Zt){var Ce=_e.getValue(),Ue=Ce.kind==="inline",qn=a(_e),mi=d[u],Pi=mi[Zt+1],as=!Wl(_e)&&!Ue&&(Pi&&Pi.kind==="case"?!ha(n):Pi&&Pi.kind!=="inline"),hs=v([qn,as?ft:"",as&&os(o.originalText,Ce,o)?ft:""]),Gi=Zt===0,xn=mi.length-1===Zt,Di=d.kind==="block"&&T&&["function","closure","method","try","catch"].includes(T.kind),ls=Di&&Gi?"":" ";if(Ue||!Ue&&xn&&N>=0){var Ri=N;if(Ue&&(N=Zt),Ue&&!Gi||!Ue&&xn){var Wn=(Ue?Ri:N)+1,Vi=xn&&!Ue?Zt+1:Zt,vn=mi[Ue?Ri:N],Pr=vn?$y(vn.raw):"",Js=Vi-Wn>1,Xs=Js?Di&&!vn||la(d)&&Wn===0?"":ft:"",Yn=Js&&Ce.kind!=="halt"?Di&&xn?"":ft:"";Js&&(ls=""),I.push({start:Wn,end:Vi,alignment:Pr,before:Xs,after:Yn})}}if(Ue){var us=Pi&&Pi.kind==="echo"&&Pi.shortForm?"<?=":"<?php",Dr=Ce.leadingComments&&Ce.leadingComments.length?v([Gi&&d.kind!=="namespace"&&!Di?"<?php":"",d.kind!=="namespace"&&Di?"":ft,te.printComments(Ce.leadingComments,o),ft,"?>"]):la(d)&&Gi&&d.kind!=="namespace"?"":v([ls,"?>"]),yn=n.getNode(Zt+1),cs=yn&&yn.children&&yn.children.length,ga=Ce.comments&&Ce.comments.length?v([us,ft,cs?te.printComments(Ce.comments,o):"",ft,cs?"?>":""]):la(d)&&xn?"":v([us," "]);hs=v([Dr,hs,ga])}_.push(hs)},u);var S=rC(_,I);if(d.kind==="program"&&!d.extra.parseAsEval){var x=[],Gt=j(d.children,1),Yt=Gt[0],oe=!Yt||Yt.kind!=="inline";if(oe){var ge=o.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),wt=v([ge&&ge[2]&&ge[2].includes(`
`)?v([ft,ge[2].split(`
`).length>2?ft:""]):" ",d.comments?te.printComments(d.comments,o):""]),pe=Yt&&Yt.kind==="echo"&&Yt.shortForm;x.push(v([pe?"<?=":"<?php",wt]))}x.push(v(S));var ie=o.originalText.trim().endsWith("?>");if(ie){var we=Gn(d.children),Pe=we?v([ql(o.originalText.trimEnd(),o.locEnd(we),o.locEnd(d))?ft:" ",os(o.originalText,we,o)?ft:""]):d.comments?ft:"";x.push(Uy(v([Pe,"?>"])))}return v(x)}return v(S)}function ru(n,o,a,u){return v(n.map(function(d){var T=[];return T.push(a(d)),Wl(d)||(T.push(ft),os(o.originalText,d.getValue(),o)&&T.push(ft)),v(T)},u))}function Hi(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",N=n.getValue(),_=Li(N[u])?v([ft,n.call(function(S){return te.printDanglingComments(S,o,!0)},u),ft]):d,I=Array.isArray(N[u])?vt(v([$e(",",n.map(function(S){var x=a(S);return Li(S.getValue())?v([ft,te.printDanglingComments(S,o,!0),ft,x]):v([T,x])},u))])):v([T,n.call(a,u)]);return St(v([_,u,Hn(_)?St(I):I]))}function Vn(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=u.inline,T=d!==void 0&&d,N=[];return n.getValue().attrGroups?(n.each(function(_){var I=["#["];N.length>0&&N.push(T?" ":ft),I.push(Mn(Xt)),_.each(function(S){var x=S.getValue();I.length>2&&I.push(",",Mn(Xt," "));var Gt=[x.name];x.args.length>0&&Gt.push(sn(S,o,a,"args")),I.push(vt(v(Gt)))},"attrs"),N.push(vt(v([St(v(I)),Mn(Xt),"]",Xt,T?" ":""])))},"attrGroups"),N.length===0?[]:[v([].concat(N,[T?"":ft]))]):[]}function kn(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",d=n.getValue();if(!d[u])return";";var T=n.call(a,u);return v([d.shortForm?":":" {",St(v([d[u].kind!=="block"||d[u].children&&d[u].children.length>0||d[u].comments&&d[u].comments.length>0?v([Ky(n)?d.kind==="switch"?" ":"":ft,T]):""])),d.kind==="if"&&u==="body"?"":v([zy(n)?ft:"",d.shortForm?v(["end",d.kind,";"]):"}"])])}function Ar(n,o,a,u,d,T,N){if(!u)return o;var _=_a(n,u,d,T,N);return vt(v([o,a,_]))}function _a(n,o,a,u,d){var T=u?"&":"";if(te.hasLeadingOwnLineComment(d.originalText,o,d))return St(v([ft,T,a]));var N=o.kind==="cast"?o.expr:o;return N.kind==="bin"&&!zs(N)||N.kind==="retif"&&(!N.trueExpr&&!iu(N.falseExpr)||N.test.kind==="bin"&&!zs(N.test))||(n.kind==="variable"||n.kind==="string"||xi(n))&&(N.kind==="string"&&!ou(N)||function _(I){return!!xi(I)&&(!(I.what.kind!=="variable"&&!fa(I.what))||_(I.what))}(N))?vt(St(v([de,T,a]))):v([" ",T,a])}function ou(n){return n.raw.includes(`
`)}function Ir(n,o,a){return(n.kind==="string"||n.kind==="encapsed"&&(n.type==="string"||n.type==="shell"))&&ou(n)&&!qy(o,a.locStart(n),{backwards:!0})}var oC=function(n,o,a){var u=n.getValue();if(!u)return"";if(typeof u=="string")return u;var d=function(_,I,S){var x=_.getValue();switch(x.kind){case"program":return vt(v([$s(_,I,S),te.printDanglingComments(_,I,!0,function(st){return!st.printed})]));case"expressionstatement":return _.call(S,"expression");case"block":return v([$s(_,I,S),te.printDanglingComments(_,I,!0)]);case"declare":var Gt=function(st){return $e(", ",st.map(function(It){return v([S(It)])},"directives"))};if(["block","short"].includes(x.mode))return v(["declare(",Gt(_),")",x.mode==="block"?" {":":",x.children.length>0?St(v([ft,$s(_,I,S)])):"",te.printDanglingComments(_,I),ft,x.mode==="block"?"}":"enddeclare;"]);var Yt=Zy(_,x);return v(["declare(",Gt(_),")",Yt&&Yt.kind==="inline"?"":";"]);case"declaredirective":return v([_.call(S,"key"),"=",_.call(S,"value")]);case"namespace":return v(["namespace ",x.name&&typeof x.name=="string"?v([x.name,x.withBrackets?" ":""]):"",x.withBrackets?"{":";",Li(x)?v([" ",te.printDanglingComments(_,I,!0)]):"",x.children.length>0?x.withBrackets?St(v([ft,$s(_,I,S)])):v([x.children[0].kind==="inline"?"":v([ft,Xy(I.originalText,x,I.locStart)?ft:""]),$s(_,I,S)]):"",x.withBrackets?v([ft,"}"]):""]);case"usegroup":return vt(v(["use ",x.type?v([x.type," "]):"",St(v([x.name?v([Ql(x.name),"\\{",Xt]):"",$e(v([",",de]),_.map(function(st){return v([S(st)])},"items"))])),x.name?v([Mn(br(I,"7.2")?",":""),Xt,"}"]):""]));case"useitem":return v([x.type?v([x.type," "]):"",Ql(x.name),Li(x)?v([" ",te.printDanglingComments(_,I,!0)]):"",x.alias?v([" as ",_.call(S,"alias")]):""]);case"class":case"interface":case"trait":return function(st,It,jt){var lt=st.getValue(),Ne=lt.kind==="class"&&lt.isAnonymous,si=Vn(st,It,jt,{inline:Ne}),Fe=Ne?[]:pt(si);lt.isFinal&&Fe.push("final "),lt.isAbstract&&Fe.push("abstract "),Fe.push(Ne?"":lt.kind),lt.name&&Fe.push(" ",st.call(jt,"name")),lt.extends&&lt.implements?Fe.push(Ss([v([Hi(st,It,jt,"extends"),Hi(st,It,jt,"implements")]),v([Hi(st,It,jt,"extends"),Hi(st,It,jt,"implements"," ",ft)]),v([Hi(st,It,jt,"extends",ft," "),Hi(st,It,jt,"implements",ft,lt.implements.length>1?ft:" ")])],{shouldBreak:Li(lt.extends)})):(lt.extends&&Fe.push(Ss([Hi(st,It,jt,"extends"),Hi(st,It,jt,"extends"," ",ft),Hi(st,It,jt,"extends",ft,lt.extends.length>1?ft:" ")])),lt.implements&&Fe.push(Ss([Hi(st,It,jt,"implements"),Hi(st,It,jt,"implements"," ",ft),Hi(st,It,jt,"implements",ft,lt.implements.length>1?ft:" ")])));var he=vt(v([vt(v(Fe)),da(It)?Ne?de:ft:" "])),Oe=lt.body&&lt.body.length===0&&!Li(lt),ri=v(["{",St(v([Oe?"":ft,ru(st,It,jt,"body")])),te.printDanglingComments(st,It,!0),Ne&&Oe?Xt:ft,"}"]);return v([he,ri])}(_,I,S);case"traitprecedence":return v([_.call(S,"trait"),"::",_.call(S,"method")," insteadof ",$e(", ",_.map(S,"instead"))]);case"traitalias":return v([x.trait?v([_.call(S,"trait"),"::"]):"",x.method?_.call(S,"method"):""," as ",$e(" ",[].concat(pt(x.visibility?[x.visibility]:[]),pt(x.as?[_.call(S,"as")]:[])))]);case"traituse":return vt(v(["use ",St(vt($e(v([",",de]),_.map(S,"traits")))),x.adaptations?v([" {",x.adaptations.length>0?v([St(v([ft,ru(_,I,S,"adaptations")])),ft]):Li(x)?v([de,te.printDanglingComments(_,I,!0),de]):"","}"]):""]));case"function":case"closure":case"method":return function(st,It,jt){var lt=st.getValue(),Ne=pt(Vn(st,It,jt,{inline:lt.kind==="closure"}));lt.isFinal&&Ne.push("final "),lt.isAbstract&&Ne.push("abstract "),lt.visibility&&Ne.push(lt.visibility," "),lt.isStatic&&Ne.push("static "),Ne.push("function "),lt.byref&&Ne.push("&"),lt.name&&Ne.push(st.call(jt,"name")),Ne.push(sn(st,It,jt)),lt.uses&&lt.uses.length>0&&Ne.push(vt(v([" use ",sn(st,It,jt,"uses")]))),lt.type&&Ne.push(v([": ",Li(lt.type)?v([st.call(function(Oe){return te.printDanglingComments(Oe,It,!0)},"type")," "]):"",lt.nullable?"?":"",st.call(jt,"type")]));var si=v(Ne);if(!lt.body)return si;var Fe=lt.kind==="closure",he=v(["{",St(v([$l(st)?"":ft,st.call(jt,"body")])),Fe&&$l(st)?"":ft,"}"]);return Fe?v([si," ",he]):lt.arguments.length===0?v([si,da(It)?ft:" ",he]):Ne.some(Hn)?v([si," ",he]):Ss([v([si,da(It)?ft:" ",he]),v([si," ",he])])}(_,I,S);case"arrowfunc":return v([].concat(pt(Vn(_,I,S,{inline:!0})),[x.isStatic?"static ":"","fn",sn(_,I,S),x.type?v([": ",x.nullable?"?":"",_.call(S,"type")]):""," => ",_.call(S,"body")]));case"parameter":var oe="";x.flags===1?oe="public ":x.flags===2?oe="protected ":x.flags===4&&(oe="private ");var ge=v([].concat(pt(Vn(_,I,S,{inline:!0})),[oe,x.nullable?"?":"",x.type?v([_.call(S,"type")," "]):"",x.byref?"&":"",x.variadic?"...":"","$",_.call(S,"name")]));return x.value?vt(v([ge,Li(x)?" ":"",te.printDanglingComments(_,I,!0),v([" =",_a(x.name,x.value,_.call(S,"value"),!1,I)])])):ge;case"variadic":return v(["...",_.call(S,"what")]);case"property":return vt(v([x.type?v([x.nullable?"?":"",_.call(S,"type")," "]):"","$",_.call(S,"name"),x.value?v([" =",_a(x.name,x.value,_.call(S,"value"),!1,I)]):""]));case"propertystatement":var wt=[];_.map(function(st){return wt.push.apply(wt,pt(Vn(st,I,S)))},"properties");var pe,ie=_.map(function(st){return S(st)},"properties"),we=x.properties.some(function(st){return st.value});ie.length!==1||x.properties[0].comments?ie.length>0&&(pe=St(ie[0])):pe=j(ie,1)[0];var Pe=x.visibility||x.visibility===null;return vt(v([].concat(wt,[Pe?v([x.visibility===null?"var":x.visibility,""]):"",x.isStatic?v([Pe?" ":"","static"]):"",pe?v([" ",pe]):"",St(v(ie.slice(1).map(function(st){return v([",",we?ft:de,st])})))])));case"if":var _e=[],Zt=kn(_,I,S,"body"),Ce=vt(v(["if (",vt(v([St(v([Xt,_.call(S,"test")])),Xt])),")",Zt]));if(_e.push(Ce,ha(_)||!x.body?"":ft),x.alternate){_e.push(x.shortForm?"":"} ");var Ue=Kl(x.body)&&x.body.comments.some(function(st){return st.trailing&&!te.isBlockComment(st)})||function(st){if(!st.comments)return!1;var It=Gn(st.comments.filter(function(jt){return!jt.leading&&!jt.trailing}));return It&&!te.isBlockComment(It)}(x),qn=!Ue;_e.push(qn?"":ft),Li(x)&&_e.push(os(I.originalText,x.body,I)?ft:"",te.printDanglingComments(_,I,!0),Ue?ft:" "),_e.push("else",vt(x.alternate.kind==="if"?_.call(S,"alternate"):kn(_,I,S,"alternate")))}else _e.push(x.body?x.shortForm?"endif;":"}":"");return v(_e);case"do":return v(["do",kn(_,I,S,"body")," while (",vt(v([St(v([Xt,_.call(S,"test")])),Xt])),")"]);case"while":case"switch":return vt(v([x.kind," (",vt(v([St(v([Xt,_.call(S,"test")])),Xt])),")",kn(_,I,S,"body")]));case"for":var mi=kn(_,I,S,"body"),Pi=te.printDanglingComments(_,I,!0),as=Pi?v([Pi,Xt]):"";return x.init.length||x.test.length||x.increment.length?v([as,vt(v(["for (",vt(v([St(v([Xt,vt(v([$e(v([",",de]),_.map(S,"init"))])),";",de,vt(v([$e(v([",",de]),_.map(S,"test"))])),";",de,vt($e(v([",",de]),_.map(S,"increment")))])),Xt])),")",mi]))]):v([as,vt(v(["for (;;)",mi]))]);case"foreach":var hs=kn(_,I,S,"body"),Gi=te.printDanglingComments(_,I,!0),xn=Gi?v([Gi,Xt]):"";return v([xn,vt(v(["foreach (",vt(v([St(v([Xt,_.call(S,"source"),de,"as ",vt(x.key?St($e(v([" =>",de]),[_.call(S,"key"),_.call(S,"value")])):_.call(S,"value"))])),Xt])),")",hs]))]);case"try":var Di=[];return Di.push("try",kn(_,I,S,"body")),x.catches&&Di.push(v(_.map(S,"catches"))),x.always&&Di.push(" finally",kn(_,I,S,"always")),v(Di);case"catch":return v([" catch",x.what?v([" (",$e(" | ",_.map(S,"what")),x.variable?v([" ",_.call(S,"variable")]):"",")"]):"",kn(_,I,S,"body")]);case"case":return v([x.test?v(["case ",x.test.comments?St(_.call(S,"test")):_.call(S,"test"),":"]):"default:",x.body&&x.body.children&&x.body.children.length?St(v([ha(_)?"":ft,_.call(S,"body")])):""]);case"break":case"continue":return x.level&&x.level.kind==="number"&&x.level.value!=="1"?v(["".concat(x.kind," "),_.call(S,"level")]):x.kind;case"call":return x.arguments.length===1&&Ir(x.arguments[0],I.originalText,I)?v([_.call(S,"what"),v(["(",$e(", ",_.map(S,"arguments")),")"])]):xi(x.what)?function(st,It,jt){var lt=[];function Ne(ee){var Le=It.originalText,Je=eC(Le,ee,It);return Le.charAt(Je)===")"?Vy(Le,Je+1,It):os(Le,ee,It)}function si(ee){var Le=ee.getValue();if(Le.kind!=="call"||!xi(Le.what)&&Le.what.kind!=="call")if(xi(Le)){var Je=null;Je=Le.kind==="propertylookup"?pa(ee,It,jt):Le.kind==="nullsafepropertylookup"?Xl(ee,It,jt):Le.kind==="staticlookup"?Zl(ee,It,jt):tu(ee,It,jt),lt.unshift({node:Le,needsParens:Gl(ee),printed:te.printAllComments(ee,function(){return Je},It)}),ee.call(function(er){return si(er)},"what")}else lt.unshift({node:Le,printed:ee.call(jt)});else lt.unshift({node:Le,printed:v([te.printAllComments(ee,function(){return v([sn(ee,It,jt)])},It),Ne(Le)?ft:""])}),ee.call(function(er){return si(er)},"what")}var Fe=st.getValue();lt.unshift({node:Fe,printed:sn(st,It,jt)}),st.call(function(ee){return si(ee)},"what");for(var he=0;he<lt.length;++he)lt[he].node.kind==="call"&&lt[he-1]&&["propertylookup","staticlookup"].includes(lt[he-1].node.kind)&&lt[he-1].needsParens&&(lt[0].printed=v(["(",lt[0].printed]),lt[he-1].printed=v([lt[he-1].printed,")"]));for(var Oe=[],ri=[lt[0]],Ae=1;Ae<lt.length&&(lt[Ae].node.kind==="call"||xi(lt[Ae].node)&&lt[Ae].node.offset&&lt[Ae].node.offset.kind==="number");++Ae)ri.push(lt[Ae]);if(lt[0].node.kind!=="call")for(;Ae+1<lt.length&&xi(lt[Ae].node)&&xi(lt[Ae+1].node);++Ae)ri.push(lt[Ae]);Oe.push(ri),ri=[];for(var ws=!1;Ae<lt.length;++Ae){if(ws&&xi(lt[Ae].node)){if(lt[Ae].node.kind==="offsetlookup"&&lt[Ae].node.offset&&lt[Ae].node.offset.kind==="number"){ri.push(lt[Ae]);continue}Oe.push(ri),ri=[],ws=!1}lt[Ae].node.kind==="call"&&(ws=!0),ri.push(lt[Ae]),lt[Ae].node.comments&&te.hasTrailingComment(lt[Ae].node)&&(Oe.push(ri),ri=[],ws=!1)}ri.length>0&&Oe.push(ri);function Ca(ee){var Le=ee[1].length&&ee[1][0].node.kind==="offsetlookup";if(ee[0].length===1){var Je=ee[0][0].node;return Je.kind==="variable"&&(Je.name==="this"||Na&&er(Je.name))||fa(Je)}function er(rN){return rN.length<It.tabWidth}var Aa=Gn(ee[0]).node;return xi(Aa)&&(Aa.offset.kind==="identifier"||Aa.offset.kind==="variable")&&Le}var Na=st.getParentNode().kind==="expressionstatement",Vr=Oe.length>=2&&!Oe[1][0].node.comments&&Ca(Oe);function qr(ee){for(var Le=[],Je=0;Je<ee.length;Je++)ee[Je+1]&&ee[Je+1].needsParens?(Le.push("(",ee[Je].printed,ee[Je+1].printed,")"),Je++):Le.push(ee[Je].printed);return v(Le)}function iN(ee){return ee.length===0?"":St(vt(v([ft,$e(ft,ee.map(qr))])))}var Yu=Oe.map(qr),ba=v(Yu),Wr=Vr?3:2,Qu=Oe.slice(0,Wr).reduce(function(ee,Le){return ee.concat(Le)},[]),ju=Qu.slice(1,-1).some(function(ee){return te.hasLeadingComment(ee.node)})||Qu.slice(0,-1).some(function(ee){return te.hasTrailingComment(ee.node)})||Oe[Wr]&&te.hasLeadingComment(Oe[Wr][0].node),nN=ca(st,"encapsed");if(Oe.length<=Wr&&!ju||nN)return vt(ba);var Ku=Gn(Vr?Oe.slice(1,2)[0]:Oe[0]).node,zu=Ku.kind!=="call"&&Ne(Ku),$u=v([qr(Oe[0]),Vr?v(Oe.slice(1,2).map(qr)):"",zu?ft:"",iN(Oe.slice(Vr?2:1))]),sN=lt.filter(function(ee){return ee.node.kind==="call"}).length;return ju||sN>=3||Yu.slice(0,-1).some(Hn)?vt($u):v([Hn(ba)||zu?Vl:"",Ss([ba,$u])])}(_,I,S):v([_.call(S,"what"),sn(_,I,S)]);case"new":var ls=x.what&&x.what.kind==="class"&&x.what.isAnonymous;if(!ls&&x.arguments.length===1&&Ir(x.arguments[0],I.originalText,I))return v(["new "].concat(pt(_.call(Vn,"what")),[_.call(S,"what"),"(",$e(", ",_.map(S,"arguments")),")"]));var Ri=[];if(Ri.push("new "),ls)Ri.push.apply(Ri,[x.what.leadingComments&&x.what.leadingComments[0].kind==="commentblock"?v([te.printComments(x.what.leadingComments,I)," "]):""].concat(pt(_.call(function(st,It,jt){return Vn(st,It,jt,{inline:!0})},"what")),["class",x.arguments.length>0?v([" ",sn(_,I,S)]):"",vt(_.call(S,"what"))]));else{var Wn=v([_.call(S,"what"),sn(_,I,S)]);Ri.push(jl(x.what)?St(Wn):Wn)}return v(Ri);case"clone":return v(["clone ",x.what.comments?St(_.call(S,"what")):_.call(S,"what")]);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var Vi,vn=_.getParentNode(),Pr=0;do Vi=_.getParentNode(Pr),Pr++;while(Vi&&xi(Vi));var Js=ca(_,"encapsed")||Vi&&(Vi.kind==="new"||Vi.kind==="assign"&&Vi.left.kind!=="variable")||x.kind==="offsetlookup"||(fa(x.what)||x.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(x.offset.kind)&&vn&&!xi(vn);return v([_.call(S,"what"),Js?nu(_,I,S):vt(St(v([Xt,nu(_,I,S)])))]);case"exit":return vt(v([x.useDie?"die":"exit","(",x.expression?Ir(x.expression,I.originalText,I)?_.call(S,"expression"):v([St(v([Xt,_.call(S,"expression")])),Xt]):te.printDanglingComments(_,I),")"]));case"global":return vt(v(["global ",St(v([$e(v([",",de]),_.map(S,"items"))]))]));case"include":return v([x.require?"require":"include",x.once?"_once":""," ",x.target.comments?St(_.call(S,"target")):_.call(S,"target")]);case"label":return v([_.call(S,"name"),":"]);case"goto":return v(["goto ",_.call(S,"label")]);case"throw":return v(["throw ",x.what.comments?St(_.call(S,"what")):_.call(S,"what")]);case"silent":return v(["@",_.call(S,"expr")]);case"halt":return v([Li(x)?v([te.printDanglingComments(_,I,!0),ft]):"","__halt_compiler();",x.after]);case"eval":return vt(v(["eval(",Ir(x.source,I.originalText,I)?_.call(S,"source"):v([St(v([Xt,_.call(S,"source")])),Xt]),")"]));case"echo":var Xs,Yn=_.map(function(st){return S(st)},"expressions");return Yn.length!==1||x.expressions[0].comments?Yn.length>0&&(Xs=ua(x.expressions[0])||x.expressions[0].comments?St(Yn[0]):My(Yn[0])):Xs=j(Yn,1)[0],vt(v([x.shortForm?"":"echo ",Xs||"",St(v(Yn.slice(1).map(function(st){return v([",",de,st])})))]));case"print":return v(["print ",x.expression.comments?St(_.call(S,"expression")):_.call(S,"expression")]);case"return":var us=[];if(us.push("return"),x.expr){var Dr=_.call(S,"expr");us.push(" ",x.expr.comments?St(Dr):Dr)}return Li(x)&&us.push(" ",te.printDanglingComments(_,I,!0)),v(us);case"isset":case"unset":return vt(v([x.kind,sn(_,I,S,"variables")]));case"empty":return vt(v(["empty(",St(v([Xt,_.call(S,"expression")])),Xt,")"]));case"variable":var yn=_.getParentNode(),cs=_.getParentNode(1),ga=yn.kind==="assign"?"":x.byref?"&":"",UC=yn.kind==="encapsedpart"&&yn.syntax==="simple"&&yn.curly||cs&&yn.kind==="offsetlookup"&&cs.kind==="encapsedpart"&&cs.syntax==="simple"&&cs.curly?"":"$",MC=x.curly?"{":"",HC=x.curly?"}":"";return v([ga,UC,MC,_.call(S,"name"),HC]);case"constantstatement":case"classconstant":var Rr,GC=Vn(_,I,S),Zs=_.map(function(st){return S(st)},"constants");return Zs.length!==1||x.constants[0].comments?Zs.length>0&&(Rr=St(Zs[0])):Rr=j(Zs,1)[0],vt(v([].concat(pt(GC),[x.visibility?v([x.visibility," "]):"","const",Rr?v([" ",Rr]):"",St(v(Zs.slice(1).map(function(st){return v([",",ft,st])})))])));case"constant":return Ar(x.name,_.call(S,"name")," =",x.value,_.call(S,"value"),!1,I);case"static":var wr,tr=_.map(function(st){return S(st)},"variables"),VC=x.variables.some(function(st){return st.defaultValue});return tr.length!==1||x.variables[0].comments?tr.length>0&&(wr=St(tr[0])):wr=j(tr,1)[0],vt(v(["static",wr?v([" ",wr]):"",St(v(tr.slice(1).map(function(st){return v([",",VC?ft:de,st])})))]));case"staticvariable":return Ar(x.variable,_.call(S,"variable")," =",x.defaultValue,_.call(S,"defaultValue"),!1,I);case"list":case"array":var Su=x.kind==="array"&&Ps(I.phpVersion,"5.4")||x.kind==="list"&&(x.shortForm||Ps(I.phpVersion,"7.1")),Ea=Su?"[":v([x.kind,"("]),ka=Su?"]":")";if(x.items.length===0)return Li(x)?vt(v([Ea,te.printDanglingComments(_,I),Xt,ka])):v([Ea,ka]);var Fr=Gn(x.items),Ou=Fr&&Fr.kind==="noop",Br=j(x.items.filter(function(st){return st.kind!=="noop"}).sort(function(st,It){return I.locStart(st)-I.locStart(It)}),1)[0],qC=!(!Br||!Br.key)&&Br&&ql(I.originalText,I.locStart(x),I.locStart(Br));return vt(v([Ea,St(v([Xt,sC(_,I,S)])),Ou?",":"",Mn(!Ou&&br(I,"5.0")?v([Fr&&Jl(Fr)?ft:"",","]):""),te.printDanglingComments(_,I,!0),Xt,ka]),{shouldBreak:qC});case"entry":var Lu=x.byRef?"&":"",WC=x.unpack?"...":"";return x.key?Ar(x.key,_.call(S,"key")," =>",x.value,_.call(S,"value"),Lu,I):v([Lu,WC,_.call(S,"value")]);case"yield":var Pu=v([x.key?v([_.call(S,"key")," => "]):"",_.call(S,"value")]);return v(["yield",x.key||x.value?" ":"",x.value&&x.value.comments?St(Pu):Pu]);case"yieldfrom":return v(["yield from ",x.value.comments?St(_.call(S,"value")):_.call(S,"value")]);case"unary":return v([x.type,_.call(S,"what")]);case"pre":return v([x.type+x.type,_.call(S,"what")]);case"post":return v([_.call(S,"what"),x.type+x.type]);case"cast":return v(["(",x.type,") ",x.expr.comments?St(_.call(S,"expr")):_.call(S,"expr")]);case"assignref":case"assign":var Du=x.kind==="assignref";return Ar(x.left,_.call(S,"left"),v([" ",Du?"=":x.operator]),x.right,_.call(S,"right"),Du,I);case"bin":var qi=_.getParentNode(),Ru=_.getParentNode(1),wu=x!==qi.body&&(qi.kind==="if"||qi.kind==="while"||qi.kind==="switch"||qi.kind==="do"),Rs=function st(It,jt,lt,Ne,si){var Fe=[],he=It.getValue();if(he.kind==="bin"){Yl(he.type,he.left.type)?Fe=Fe.concat(It.call(function(Na){return st(Na,jt,lt,!0,si)},"left")):Fe.push(It.call(jt,"left"));var Oe=zs(he),ri=v(Oe?[he.type," ",It.call(jt,"right")]:[he.type,de,It.call(jt,"right")]),Ae=It.getParentNode(),ws=!(si&&["||","&&"].includes(he.type))&&Ls(Ae)!==Ls(he)&&Ls(he.left)!==Ls(he)&&Ls(he.right)!==Ls(he),Ca=ua(he.left)||he.left.kind==="bin"&&ua(he.left.right);Fe.push(Ca?"":" ",ws?vt(ri):ri),Ne&&he.comments&&(Fe=te.printAllComments(It,function(){return v(Fe)},lt))}else Fe.push(It.call(jt));return Fe}(_,S,I,!1,wu);if(wu)return v(Rs);if(qi.kind==="unary"||xi(qi)&&qi.kind!=="offsetlookup")return vt(v([St(v([Xt,v(Rs)])),Xt]));var YC=x!==qi.body&&qi.kind==="for"||qi.kind==="retif"&&Ru&&Ru.kind!=="return",QC=["assign","property","constant","staticvariable","entry"].includes(qi.kind),jC=x.left.kind==="bin"&&Yl(x.type,x.left.type);if(YC||zs(x)&&!jC||!zs(x)&&QC)return vt(v(Rs));var KC=v(Rs.slice(1));return vt(v([Rs.length>0?Rs[0]:"",St(KC)]));case"retif":var Ur,Mr=[],Hr=_.getParentNode(),Fu=0;do Ur=_.getParentNode(Fu),Fu++;while(Ur&&Ur.kind==="retif");var Bu=Ur||Hr,Uu=x.falseExpr.kind==="bin"?St(_.call(S,"falseExpr")):_.call(S,"falseExpr"),zC=v([x.trueExpr?de:" ","?",x.trueExpr?v([" ",x.trueExpr.kind==="bin"?St(_.call(S,"trueExpr")):_.call(S,"trueExpr"),de]):"",":",x.trueExpr?v([" ",Uu]):v([iu(x.falseExpr)?" ":de,Uu])]);Mr.push(zC);var Mu=function(st){return Hr===Bu?vt(st):st},Hu=_.getParentNode(1),fs=Hr.kind==="cast"&&Hu?Hu:Hr,$C=["propertylookup","staticlookup"].includes(fs.kind),xa=_.call(S,"test");if(!x.trueExpr){var Gu=v([xa,fs.kind==="bin"||["print","echo","return","include"].includes(Bu.kind)?St(v(Mr)):v(Mr)]);return fs.kind==="call"&&fs.what===x||fs.kind==="unary"||xi(fs)&&fs.kind!=="offsetlookup"?vt(v([St(v([Xt,Gu])),Xt])):Mu(Gu)}return Mu(v([x.test.kind==="retif"?St(xa):xa,St(v(Mr)),$C?Xt:""]));case"boolean":return x.value?"true":"false";case"number":return Qy(x.value);case"string":if(_.getParentNode().kind==="encapsedpart"){var Vu=_.getParentNode(1),va=0,JC=Ps(I.phpVersion,"7.3"),qu=Os;if(Vu.type==="heredoc"){qu=JC?ft:Os;var Gr=Vu.raw.split(/\r?\n/g);(va=Gr[Gr.length-1].search(/\S/))===-1&&(va=Gr[Gr.length-2].search(/\S/))}return $e(qu,x.raw.split(/\r?\n/g).map(function(st,It){return It>0||x.loc.start.column===0?st.substring(va):st}))}var Wu=Jy(x,I)?'"':"'",Xi=x.raw;return x.raw[0]==="b"&&(Xi=Xi.slice(1)),['"',"'"].includes(Xi[0])&&(Xi=Xi.substr(1)),['"',"'"].includes(Xi[Xi.length-1])&&(Xi=Xi.substr(0,Xi.length-1)),v([x.raw[0]==="b"?"b":"",Wu,$e(Os,Xi.split(/\r?\n/g)),Wu]);case"uniontype":return vt(v(_.map(function(st,It){return v(It===0?[_.call(S)]:["|",_.call(S)])},"types")));case"encapsedpart":var XC=x.syntax==="simple"&&x.curly||x.syntax==="complex"?v([x.curly?"$":"","{"]):"",ZC=x.syntax==="simple"&&x.curly||x.syntax==="complex"?"}":"";return v([XC,_.call(S,"expression"),ZC]);case"encapsed":switch(x.type){case"string":case"shell":case"heredoc":var tN=Ps(I.phpVersion,"7.3")?ft:Os;return v([su(x),x.type==="heredoc"?tN:"",v(_.map(S,"value")),su(x,{opening:!1}),x.type==="heredoc"&&zl(_)?ft:""]);default:return"Have not implemented kind ".concat(x.type," yet.")}case"inline":return $e(Os,x.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(/\r?\n/g));case"magic":return x.value;case"nowdoc":var ya=Ps(I.phpVersion,"7.3")?ft:Os;return v(["<<<'",x.label,"'",ya,$e(ya,x.value.split(/\r?\n/g)),ya,x.label,zl(_)?ft:""]);case"name":return v([x.resolution==="rn"?"namespace\\":"",x.name]);case"literal":return _.call(S,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return x.name;case"nullkeyword":return"null";case"identifier":return _.getParentNode().kind==="method"&&(x.name=tC(x.name)),_.call(S,"name");case"match":var eN=_.map(function(st,It){var jt=st.getValue().conds===null?"default":v(st.map(function(Ne,si){return vt(v(si>0?[",",de,S(Ne)]:[S(Ne)]))},"conds")),lt=st.call(S,"body");return v(It>0?[", ",de,jt," => ",lt]:[de,jt," => ",lt])},"arms");return vt(v(["match (",vt(v([Xt,St(v([_.call(S,"cond")])),Xt])),") {",St(v(eN))," ",Xt,"}"]));case"noop":return x.comments?te.printComments(_.getValue().comments,I):"";case"namedargument":return v([x.name,": ",_.call(S,"value")]);case"error":default:return"Have not implemented kind ".concat(x.kind," yet.")}}(n,o,a),T=[],N=Gl(n);return N&&T.unshift("("),T.push(d),N&&T.push(")"),Yy(n)&&T.push(";"),jy(n)&&T.push(ft),v(T)},aC=function(n,o){if(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"].forEach(function(u){delete o[u]}),n.kind==="string"&&delete o.isDoubleQuote,["array","list"].includes(n.kind)&&delete o.shortForm,n.kind==="inline"){if(n.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;o.value=o.value.replace(/\r\n?|\n/g,"")}if((n.kind==="continue"||n.kind==="break")&&n.level){var a=o.level;a.kind==="number"&&(o.level=a.value==="1"?null:a)}if(n.kind==="block"&&n.children.length===1&&n.children[0].kind==="block")for(;o.children[0].kind==="block";)o.children=o.children[0].children;if(n.kind==="number"&&(o.value=se.printNumber(n.value)),["foreach","for","if","while","do"].includes(n.kind)&&(n.body&&n.body.kind!=="block"?o.body={kind:"block",children:[o.body]}:o.body=o.body?o.body:null,n.alternate&&n.alternate.kind!=="block"?o.alternate={kind:"block",children:[o.alternate]}:o.alternate=o.alternate?o.alternate:null),n.kind==="usegroup"&&typeof n.name=="string"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="useitem"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="method"&&n.name.kind==="identifier"&&(o.name.name=se.normalizeMagicMethodName(o.name.name)),n.kind==="noop")return null},ma="PHP",hC={phpVersion:{since:"0.13.0",category:ma,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"}]},trailingCommaPHP:{since:"0.0.0",category:ma,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:ma,type:"choice",default:"psr-2",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"Use PSR-2 brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},lC=function(n,o,a,u){if(a!=="length"&&a!=="prototype"&&a!=="arguments"&&a!=="caller"){var d=Object.getOwnPropertyDescriptor(n,a),T=Object.getOwnPropertyDescriptor(o,a);!uC(d,T)&&u||Object.defineProperty(n,a,T)}},uC=function(n,o){return n===void 0||n.configurable||n.writable===o.writable&&n.enumerable===o.enumerable&&n.configurable===o.configurable&&(n.writable||n.value===o.value)},cC=function(n,o){var a=Object.getPrototypeOf(o);a!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,a)},fC=function(n,o){return"/* Wrapped ".concat(n,`*/
`).concat(o)},dC=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),pC=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),_C=function(n,o,a){var u=a===""?"":"with ".concat(a.trim(),"() "),d=fC.bind(null,u,o.toString());Object.defineProperty(d,"name",pC),Object.defineProperty(n,"toString",B(B({},dC),{},{value:d}))},mC=function(n,o){var a,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=u.ignoreNonConfigurable,T=d!==void 0&&d,N=n.name,_=Bt(Reflect.ownKeys(o));try{for(_.s();!(a=_.n()).done;){var I=a.value;lC(n,o,I,T)}}catch(S){_.e(S)}finally{_.f()}return cC(n,o),_C(n,o,N),n},Sr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function au(n){return n&&n.default||n}var Or,TC=function(){var n={};return n.promise=new Promise(function(o,a){n.resolve=o,n.reject=a}),n},hu=function(n,o){return n(o={exports:{}},o.exports),o.exports}(function(n,o){var a=Sr&&Sr.__awaiter||function(N,_,I,S){return new(I||(I=Promise))(function(x,Gt){function Yt(wt){try{ge(S.next(wt))}catch(pe){Gt(pe)}}function oe(wt){try{ge(S.throw(wt))}catch(pe){Gt(pe)}}function ge(wt){wt.done?x(wt.value):new I(function(pe){pe(wt.value)}).then(Yt,oe)}ge((S=S.apply(N,_||[])).next())})},u=Sr&&Sr.__importDefault||function(N){return N&&N.__esModule?N:{default:N}};Object.defineProperty(o,"__esModule",{value:!0});var d=u(TC);function T(N){var _,I,S,x=this,Gt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",Yt=function(){return a(x,void 0,void 0,regeneratorRuntime.mark(function wt(){var pe,ie,we,Pe,_e=this;return regeneratorRuntime.wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:if(_===void 0){Zt.next=2;break}return Zt.abrupt("return");case 2:pe=function(Ce){return a(_e,void 0,void 0,regeneratorRuntime.mark(function Ue(){var qn;return regeneratorRuntime.wrap(function(mi){for(;;)switch(mi.prev=mi.next){case 0:if(S=d.default(),!((qn=Ce[1][Gt]-Date.now())<=0)){mi.next=6;break}return N.delete(Ce[0]),S.resolve(),mi.abrupt("return");case 6:return _=Ce[0],typeof(I=setTimeout(function(){N.delete(Ce[0]),S&&S.resolve()},qn)).unref=="function"&&I.unref(),mi.abrupt("return",S.promise);case 10:case"end":return mi.stop()}},Ue)}))},Zt.prev=3,ie=Bt(N),Zt.prev=5,ie.s();case 7:if((we=ie.n()).done){Zt.next=13;break}return Pe=we.value,Zt.next=11,pe(Pe);case 11:Zt.next=7;break;case 13:Zt.next=18;break;case 15:Zt.prev=15,Zt.t0=Zt.catch(5),ie.e(Zt.t0);case 18:return Zt.prev=18,ie.f(),Zt.finish(18);case 21:Zt.next=25;break;case 23:Zt.prev=23,Zt.t1=Zt.catch(3);case 25:_=void 0;case 26:case"end":return Zt.stop()}},wt,null,[[3,23],[5,15,18,21]])}))},oe=function(){_=void 0,I!==void 0&&(clearTimeout(I),I=void 0),S!==void 0&&(S.reject(void 0),S=void 0)},ge=N.set.bind(N);return N.set=function(wt,pe){N.has(wt)&&N.delete(wt);var ie=ge(wt,pe);return _&&_===wt&&oe(),Yt(),ie},Yt(),N}o.default=T,n.exports=T,n.exports.default=T});(Or=hu)&&Or.__esModule&&Object.prototype.hasOwnProperty.call(Or,"default")&&Or.default;var gC=hu,Ta=new WeakMap,lu=new WeakMap,Lr=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.cacheKey,u=o.cache,d=u===void 0?new Map:u,T=o.maxAge;typeof T=="number"&&gC(d);var N=function(){for(var _=arguments.length,I=new Array(_),S=0;S<_;S++)I[S]=arguments[S];var x=a?a(I):I[0],Gt=d.get(x);if(Gt)return Gt.data;var Yt=n.apply(this,I);return d.set(x,{data:Yt,maxAge:T?Date.now()+T:Number.POSITIVE_INFINITY}),Yt};return mC(N,n,{ignoreNonConfigurable:!0}),lu.set(N,d),N};Lr.decorator=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(o,a,u){var d=o[a];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete u.value,delete u.writable,u.get=function(){if(!Ta.has(this)){var T=Lr(d,n);return Ta.set(this,T),T}return Ta.get(this)}}},Lr.clear=function(n){var o=lu.get(n);if(!o)throw new TypeError("Can't clear a function that was not memoized!");if(typeof o.clear!="function")throw new TypeError("The cache Map can't be cleared!");o.clear()};var uu=/@prettier|@format/,cu=Lr(function(n){var o=yl(n),a=j(o.children,1)[0],u=j(o.comments.filter(function(d){return d.kind==="commentblock"}),1)[0];if(a&&u&&u.loc.start.line<a.loc.start.line)return u}),EC=function(n){if(!uu.test(n))return!1;var o=cu(n);if(o){var a=o.value;return uu.test(a)}return!1},kC=function(n){var o=cu(n);if(o){var a=o.loc,u=a.start.offset,d=a.end.offset,T=n.substring(0,u),N=n.substring(d);return"".concat(T).concat(function(Gt,Yt){var oe=Gt.split(/\r?\n/g);if(oe.length===1){var ge=j(/\/*\*\*(.*)\*\//.exec(oe[0]),2)[1];oe=["/**"," * ".concat(ge.trim())," */"]}var wt=oe.findIndex(function(pe){return/@\S/.test(pe)})||1;return oe.splice(wt,0," * @format"),oe.join(function(pe){var ie=pe.indexOf(`
`);return ie>=0&&pe.charAt(ie-1)==="\r"?`\r
`:`
`}(Yt))}(o.value,n)).concat(N)}var _="<?php";if(!n.startsWith(_))return n;var I=_.length,S=n.substring(0,I),x=n.substring(I);return"".concat(S,`
/** 
 * @format 
 */
`).concat(x)},fu="programming",du="text.html.php",pu="application/x-httpd-php",_u="#4F5D95",mu=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],Tu=[".php",".php_cs",".php_cs.dist","Phakefile"],gu=["php"],Eu=["inc"],xC={name:"PHP",type:fu,tmScope:du,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:pu,color:_u,extensions:mu,filenames:Tu,interpreters:gu,aliases:Eu,languageId:272},vC=Object.freeze({__proto__:null,name:"PHP",type:fu,tmScope:du,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:pu,color:_u,extensions:mu,filenames:Tu,interpreters:gu,aliases:Eu,languageId:272,default:xC}),ku="HTML+PHP",xu="markup",vu="text.html.php",yu="HTML",Cu=[".phtml"],Nu="application/x-httpd-php",yC={name:ku,type:xu,tmScope:vu,group:yu,extensions:Cu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Nu,languageId:151},CC=Object.freeze({__proto__:null,name:ku,type:xu,tmScope:vu,group:yu,extensions:Cu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Nu,languageId:151,default:yC}),NC=au(vC),bC=au(CC),bu=s.default.doc.builders,AC=bu.join,IC=bu.hardline,SC=EC,OC=kC;function Au(n,o){var a=o.extend,u=o.override,d={};for(var T in n)d[T==="languageId"?"linguistLanguageId":T]=n[T];if(a)for(var N in a)d[N]=(d[N]||[]).concat(a[N]);for(var _ in u)d[_]=u[_];return d}var LC=[Au(NC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Au(bC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Iu=function(n){return function(o){return o.loc&&o.loc[n]&&o.loc[n].offset}},PC={php:{parse:yl,astFormat:"php",locStart:Iu("start"),locEnd:Iu("end"),hasPragma:SC}},Ds={languages:LC,printers:{php:{print:oC,insertPragma:OC,massageAstNode:aC,getCommentChildNodes:te.getCommentChildNodes,canAttachComment:te.canAttachComment,isBlockComment:te.isBlockComment,handleComments:{ownLine:te.handleOwnLineComment,endOfLine:te.handleEndOfLineComment,remaining:te.handleRemainingComment},willPrintOwnComments(n){var o=n.getValue();return o&&o.kind==="noop"},printComment(n){var o=n.getValue();switch(o.kind){case"commentblock":if(!o.value.includes(`
`))return o.value;var a=o.value.split(/\r?\n/g);return a.slice(1,a.length-1).every(function(u){return u.trim()[0]==="*"})?AC(IC,a.map(function(u,d){return(d>0?" ":"")+(d<a.length-1?u.trim():u.trimLeft())})):o.value;case"commentline":return o.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(o)))}},hasPrettierIgnore(n){var o=function(d){return d.value.includes("prettier-ignore")&&!d.value.includes("prettier-ignore-start")&&!d.value.includes("prettier-ignore-end")},a=n.getParentNode(),u=n.getNode();return u&&u.kind!=="classconstant"&&u.comments&&u.comments.length>0&&u.comments.some(o)||u&&u.kind==="constant"&&a&&a.kind==="classconstant"&&a.comments&&a.comments.length>0&&a.comments.some(o)}}},parsers:PC,options:hC,defaultOptions:{tabWidth:4}},DC=Ds.languages,RC=Ds.printers,wC=Ds.parsers,FC=Ds.options,BC=Ds.defaultOptions;i.default=Ds,i.defaultOptions=BC,i.languages=DC,i.options=FC,i.parsers=wC,i.printers=RC,Object.defineProperty(i,"__esModule",{value:!0})})});var wx=H((Rx,eh)=>{(function(i){if(typeof Rx=="object"&&typeof eh<"u")eh.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=i()}})(function(){var i,t,e;return function(){function s(r,h,l){function c(k,U){if(!h[k]){if(!r[k]){var b=typeof require=="function"&&require;if(!U&&b)return b(k,!0);if(f)return f(k,!0);var y=new Error("Cannot find module '"+k+"'");throw y.code="MODULE_NOT_FOUND",y}var R=h[k]={exports:{}};r[k][0].call(R.exports,function(G){var X=r[k][1][G];return c(X||G)},R,R.exports,s,r,h,l)}return h[k].exports}for(var f=typeof require=="function"&&require,E=0;E<l.length;E++)c(l[E]);return c}return s}()({1:[function(s,r,h){let l=s("./utils"),c=function(){"use strict";let f=l.stringToArray,E=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],k=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],U=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],b=["Thousand","Million","Billion","Trillion"];function y(F,W){var M=function(it,K,Y){var q="";if(it<=19)q=(K?" and ":"")+(Y?k[it]:E[it]);else if(it<100){let Kt=Math.floor(it/10),qt=it%10;q=(K?" and ":"")+U[Kt-2],qt>0?q+="-"+M(qt,!1,Y):Y&&(q=q.substring(0,q.length-1)+"ieth")}else if(it<1e3){let Kt=Math.floor(it/100),qt=it%100;q=(K?", ":"")+E[Kt]+" Hundred",qt>0?q+=M(qt,!0,Y):Y&&(q+="th")}else{var gt=Math.floor(Math.log10(it)/3);gt>b.length&&(gt=b.length);let Kt=Math.pow(10,gt*3),qt=Math.floor(it/Kt),kt=it-qt*Kt;q=(K?", ":"")+M(qt,!1,!1)+" "+b[gt-1],kt>0?q+=M(kt,!0,Y):Y&&(q+="th")}return q},tt=M(F,!1,W);return tt}let R={};E.forEach(function(F,W){R[F.toLowerCase()]=W}),k.forEach(function(F,W){R[F.toLowerCase()]=W}),U.forEach(function(F,W){let M=F.toLowerCase();R[M]=(W+2)*10,R[M.substring(0,F.length-1)+"ieth"]=R[M]}),R.hundredth=100,b.forEach(function(F,W){let M=F.toLowerCase(),tt=Math.pow(10,(W+1)*3);R[M]=tt,R[M+"th"]=tt});function G(F){let M=F.split(/,\s|\sand\s|[\s\\-]/).map(K=>R[K]),tt=[0];return M.forEach(K=>{if(K<100){let Y=tt.pop();Y>=1e3&&(tt.push(Y),Y=0),tt.push(Y+K)}else tt.push(tt.pop()*K)}),tt.reduce((K,Y)=>K+Y,0)}let X=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],ct={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function dt(F){for(var W=0;W<X.length;W++){let M=X[W];if(F>=M[0])return M[1]+dt(F-M[0])}return""}function z(F){for(var W=0,M=1,tt=F.length-1;tt>=0;tt--){let it=F[tt],K=ct[it];K<M?W-=K:(M=K,W+=K)}return W}function J(F,W){for(var M=[],tt=W.charCodeAt(0);F>0;)M.unshift(String.fromCharCode((F-1)%26+tt)),F=Math.floor((F-1)/26);return M.join("")}function at(F,W){for(var M=W.charCodeAt(0),tt=0,it=0;it<F.length;it++)tt+=(F.charCodeAt(F.length-it-1)-M+1)*Math.pow(26,it);return tt}function B(F,W){if(typeof F>"u")return;F=Math.floor(F);let M=Bt(W);return rt(F,M)}let j={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},pt={UPPER:"upper",LOWER:"lower",TITLE:"title"};function rt(F,W){let M,tt=F<0;switch(F=Math.abs(F),W.primary){case j.LETTERS:M=J(F,W.case===pt.UPPER?"A":"a");break;case j.ROMAN:M=dt(F),W.case===pt.UPPER&&(M=M.toUpperCase());break;case j.WORDS:M=y(F,W.ordinal),W.case===pt.UPPER?M=M.toUpperCase():W.case===pt.LOWER&&(M=M.toLowerCase());break;case j.DECIMAL:M=""+F;var it=W.mandatoryDigits-M.length;if(it>0){var K=new Array(it+1).join("0");M=K+M}if(W.zeroCode!==48&&(M=f(M).map(Kt=>String.fromCodePoint(Kt.codePointAt(0)+W.zeroCode-48)).join("")),W.regular){let Kt=Math.floor((M.length-1)/W.groupingSeparators.position);for(let qt=Kt;qt>0;qt--){let kt=M.length-qt*W.groupingSeparators.position;M=M.substr(0,kt)+W.groupingSeparators.character+M.substr(kt)}}else W.groupingSeparators.reverse().forEach(Kt=>{let qt=M.length-Kt.position;M=M.substr(0,qt)+Kt.character+M.substr(qt)});if(W.ordinal){var Y={1:"st",2:"nd",3:"rd"},q=M[M.length-1],gt=Y[q];(!gt||M.length>1&&M[M.length-2]==="1")&&(gt="th"),M=M+gt}break;case j.SEQUENCE:throw{code:"D3130",value:W.token}}return tt&&(M="-"+M),M}let Ft=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Bt(F){let W={type:"integer",primary:j.DECIMAL,case:pt.LOWER,ordinal:!1},M,tt,it=F.lastIndexOf(";");switch(it===-1?M=F:(M=F.substring(0,it),tt=F.substring(it+1),tt[0]==="o"&&(W.ordinal=!0)),M){case"A":W.case=pt.UPPER;case"a":W.primary=j.LETTERS;break;case"I":W.case=pt.UPPER;case"i":W.primary=j.ROMAN;break;case"W":W.case=pt.UPPER,W.primary=j.WORDS;break;case"Ww":W.case=pt.TITLE,W.primary=j.WORDS;break;case"w":W.primary=j.WORDS;break;default:{let K=null,Y=0,q=0,gt=[],Kt=0;if(f(M).map(kt=>kt.codePointAt(0)).reverse().forEach(kt=>{let Lt=!1;for(let zt=0;zt<Ft.length;zt++){let Ct=Ft[zt];if(kt>=Ct&&kt<=Ct+9){if(Lt=!0,Y++,Kt++,K===null)K=Ct;else if(Ct!==K)throw{code:"D3131"};break}}Lt||(kt===35?(Kt++,q++):gt.push({position:Kt,character:String.fromCodePoint(kt)}))}),Y>0){W.primary=j.DECIMAL,W.zeroCode=K,W.mandatoryDigits=Y,W.optionalDigits=q;let Lt=function(zt){if(zt.length===0)return 0;let Ct=zt[0].character;for(let Re=1;Re<zt.length;Re++)if(zt[Re].character!==Ct)return 0;let We=zt.map(Re=>Re.position),pi=function(Re,Ye){return Ye===0?Re:pi(Ye,Re%Ye)},Xe=We.reduce(pi);for(let Re=1;Re<=We.length;Re++)if(We.indexOf(Re*Xe)===-1)return 0;return Xe}(gt);Lt>0?(W.regular=!0,W.groupingSeparators={position:Lt,character:gt[0].character}):(W.regular=!1,W.groupingSeparators=gt)}else W.primary=j.SEQUENCE,W.token=M}}return W}let Dt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Mt(F){var W=[];let M={type:"datetime",parts:W},tt=function(Lt,zt){if(zt>Lt){let Ct=F.substring(Lt,zt);Ct=Ct.split("]]").join("]"),W.push({type:"literal",value:Ct})}};for(var it=0,K=0;K<F.length;){if(F.charAt(K)==="["){if(F.charAt(K+1)==="["){tt(it,K),W.push({type:"literal",value:"["}),K+=2,it=K;continue}if(tt(it,K),it=K,K=F.indexOf("]",it),K===-1)throw{code:"D3135"};let Lt=F.substring(it+1,K);Lt=Lt.split(/\s+/).join("");var Y={type:"marker",component:Lt.charAt(0)},q=Lt.lastIndexOf(","),gt;if(q!==-1){let zt=Lt.substring(q+1),Ct=zt.indexOf("-"),We,pi,Xe=function(Ye){if(!(typeof Ye>"u"||Ye==="*"))return parseInt(Ye)};Ct===-1?We=zt:(We=zt.substring(0,Ct),pi=zt.substring(Ct+1));let Re={min:Xe(We),max:Xe(pi)};Y.width=Re,gt=Lt.substring(1,q)}else gt=Lt.substring(1);if(gt.length===1)Y.presentation1=gt;else if(gt.length>1){var Kt=gt.charAt(gt.length-1);"atco".indexOf(Kt)!==-1?(Y.presentation2=Kt,Kt==="o"&&(Y.ordinal=!0),Y.presentation1=gt.substring(0,gt.length-1)):Y.presentation1=gt}else Y.presentation1=Dt[Y.component];if(typeof Y.presentation1>"u")throw{code:"D3132",value:Y.component};if(Y.presentation1[0]==="n")Y.names=pt.LOWER;else if(Y.presentation1[0]==="N")Y.presentation1[1]==="n"?Y.names=pt.TITLE:Y.names=pt.UPPER;else if("YMDdFWwXxHhmsf".indexOf(Y.component)!==-1){var qt=Y.presentation1;if(Y.presentation2&&(qt+=";"+Y.presentation2),Y.integerFormat=Bt(qt),Y.width&&Y.width.min!==void 0&&Y.integerFormat.mandatoryDigits<Y.width.min&&(Y.integerFormat.mandatoryDigits=Y.width.min),"YMD".indexOf(Y.component)!==-1)if(Y.n=-1,Y.width&&Y.width.max!==void 0)Y.n=Y.width.max,Y.integerFormat.mandatoryDigits=Y.n;else{var kt=Y.integerFormat.mandatoryDigits+Y.integerFormat.optionalDigits;kt>=2&&(Y.n=kt)}}(Y.component==="Z"||Y.component==="z")&&(Y.integerFormat=Bt(Y.presentation1)),W.push(Y),it=K+1}K++}return tt(it,K),M}let Et=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Rt=["January","February","March","April","May","June","July","August","September","October","November","December"],le=1e3*60*60*24,Tt=function(F){let W=Date.UTC(F.year,F.month);var M=new Date(W).getUTCDay();return M===0&&(M=7),M>4?W+(8-M)*le:W-(M-1)*le},mt=function(F,W){return{year:F,month:W,nextMonth:function(){return W===11?mt(F+1,0):mt(F,W+1)},previousMonth:function(){return W===0?mt(F-1,11):mt(F,W-1)},nextYear:function(){return mt(F+1,W)},previousYear:function(){return mt(F-1,W)}}},ne=function(F,W){return(W-F)/(le*7)+1},At=(F,W)=>{let M;switch(W){case"Y":M=F.getUTCFullYear();break;case"M":M=F.getUTCMonth()+1;break;case"D":M=F.getUTCDate();break;case"d":{let tt=Date.UTC(F.getUTCFullYear(),F.getUTCMonth(),F.getUTCDate()),it=Date.UTC(F.getUTCFullYear(),0);M=(tt-it)/le+1;break}case"F":M=F.getUTCDay(),M===0&&(M=7);break;case"W":{let tt=mt(F.getUTCFullYear(),0),it=Tt(tt),K=Date.UTC(tt.year,F.getUTCMonth(),F.getUTCDate()),Y=ne(it,K);if(Y>52){let q=Tt(tt.nextYear());K>=q&&(Y=1)}else if(Y<1){let q=Tt(tt.previousYear());Y=ne(q,K)}M=Math.floor(Y);break}case"w":{let tt=mt(F.getUTCFullYear(),F.getUTCMonth()),it=Tt(tt),K=Date.UTC(tt.year,tt.month,F.getUTCDate()),Y=ne(it,K);if(Y>4){let q=Tt(tt.nextMonth());K>=q&&(Y=1)}else if(Y<1){let q=Tt(tt.previousMonth());Y=ne(q,K)}M=Math.floor(Y);break}case"X":{let tt=mt(F.getUTCFullYear(),0),it=Tt(tt),K=Tt(tt.nextYear()),Y=F.getTime();Y<it?M=tt.year-1:Y>=K?M=tt.year+1:M=tt.year;break}case"x":{let tt=mt(F.getUTCFullYear(),F.getUTCMonth()),it=Tt(tt),K=tt.nextMonth(),Y=Tt(K),q=F.getTime();q<it?M=tt.previousMonth().month+1:q>=Y?M=K.month+1:M=tt.month+1;break}case"H":M=F.getUTCHours();break;case"h":M=F.getUTCHours(),M=M%12,M===0&&(M=12);break;case"P":M=F.getUTCHours()>=12?"pm":"am";break;case"m":M=F.getUTCMinutes();break;case"s":M=F.getUTCSeconds();break;case"f":M=F.getUTCMilliseconds();break;case"Z":case"z":break;case"C":M="ISO";break;case"E":M="ISO";break}return M},Vt=null;function ae(F,W,M){var tt=0,it=0;if(typeof M<"u"){let qt=parseInt(M);tt=Math.floor(qt/100),it=qt%100}var K=function(qt,kt){var Lt=At(qt,kt.component);if("YMDdFWwXxHhms".indexOf(kt.component)!==-1)if(kt.component==="Y"&&kt.n!==-1&&(Lt=Lt%Math.pow(10,kt.n)),kt.names){if(kt.component==="M"||kt.component==="x")Lt=Rt[Lt-1];else if(kt.component==="F")Lt=Et[Lt];else throw{code:"D3133",value:kt.component};kt.names===pt.UPPER?Lt=Lt.toUpperCase():kt.names===pt.LOWER&&(Lt=Lt.toLowerCase()),kt.width&&Lt.length>kt.width.max&&(Lt=Lt.substring(0,kt.width.max))}else Lt=rt(Lt,kt.integerFormat);else if(kt.component==="f")Lt=rt(Lt,kt.integerFormat);else if(kt.component==="Z"||kt.component==="z"){let zt=tt*100+it;if(kt.integerFormat.regular)Lt=rt(zt,kt.integerFormat);else{let Ct=kt.integerFormat.mandatoryDigits;if(Ct===1||Ct===2)Lt=rt(tt,kt.integerFormat),it!==0&&(Lt+=":"+B(it,"00"));else if(Ct===3||Ct===4)Lt=rt(zt,kt.integerFormat);else throw{code:"D3134",value:Ct}}zt>=0&&(Lt="+"+Lt),kt.component==="z"&&(Lt="GMT"+Lt),zt===0&&kt.presentation2==="t"&&(Lt="Z")}return Lt};let Y;typeof W>"u"?(Vt===null&&(Vt=Mt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),Y=Vt):Y=Mt(W);let q=(60*tt+it)*60*1e3,gt=new Date(F+q),Kt="";return Y.parts.forEach(function(qt){qt.type==="literal"?Kt+=qt.value:Kt+=K(gt,qt)}),Kt}function A(F){var W={};if(F.type==="datetime")W.type="datetime",W.parts=F.parts.map(function(M){var tt={};if(M.type==="literal")tt.regex=M.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(M.component==="Z"||M.component==="z"){let K;Array.isArray(M.integerFormat.groupingSeparators)||(K=M.integerFormat.groupingSeparators),tt.regex="",M.component==="z"&&(tt.regex="GMT"),tt.regex+="[-+][0-9]+",K&&(tt.regex+=K.character+"[0-9]+"),tt.parse=function(Y){M.component==="z"&&(Y=Y.substring(3));let q=0,gt=0;return K?(q=Number.parseInt(Y.substring(0,Y.indexOf(K.character))),gt=Number.parseInt(Y.substring(Y.indexOf(K.character)+1))):Y.length-1<=2?q=Number.parseInt(Y):(q=Number.parseInt(Y.substring(0,3)),gt=Number.parseInt(Y.substring(3))),q*60+gt}}else if(M.integerFormat)M.integerFormat.n=M.n,tt=A(M.integerFormat);else{tt.regex="[a-zA-Z]+";var it={};if(M.component==="M"||M.component==="x")Rt.forEach(function(K,Y){M.width&&M.width.max?it[K.substring(0,M.width.max)]=Y+1:it[K]=Y+1});else if(M.component==="F")Et.forEach(function(K,Y){Y>0&&(M.width&&M.width.max?it[K.substring(0,M.width.max)]=Y:it[K]=Y)});else if(M.component==="P")it={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:M.component};tt.parse=function(K){return it[K]}}return tt.component=M.component,tt});else{W.type="integer";let M=F.case===pt.UPPER,tt;switch(F.n&&F.n>0?F.optionalDigits===0?tt=`{${F.n}}`:tt=`{${F.n-F.optionalDigits},${F.n}}`:tt="+",F.primary){case j.LETTERS:W.regex=M?"[A-Z]+":"[a-z]+",W.parse=function(it){return at(it,M?"A":"a")};break;case j.ROMAN:W.regex=M?"[MDCLXVI]+":"[mdclxvi]+",W.parse=function(it){return z(M?it:it.toUpperCase())};break;case j.WORDS:W.regex="(?:"+Object.keys(R).concat("and","[\\-, ]").join("|")+")+",W.parse=function(it){return G(it.toLowerCase())};break;case j.DECIMAL:W.regex=`[0-9]${tt}`,F.ordinal&&(W.regex+="(?:th|st|nd|rd)"),W.parse=function(it){let K=it;return F.ordinal&&(K=it.substring(0,it.length-2)),F.regular?K=K.split(",").join(""):F.groupingSeparators.forEach(Y=>{K=K.split(Y.character).join("")}),F.zeroCode!==48&&(K=K.split("").map(Y=>String.fromCodePoint(Y.codePointAt(0)-F.zeroCode+48)).join("")),parseInt(K)};break;case j.SEQUENCE:throw{code:"D3130",value:F.token}}}return W}function P(F,W){if(typeof F>"u")return;let M=Bt(W);return A(M).parse(F)}function Z(F,W){let M=Mt(W),tt=A(M),it="^"+tt.parts.map(gt=>"("+gt.regex+")").join("")+"$";var Y=new RegExp(it,"i").exec(F);if(Y!==null){let Ct={};for(let m=1;m<Y.length;m++){let O=tt.parts[m-1];O.parse&&(Ct[O.component]=O.parse(Y[m]))}if(Object.getOwnPropertyNames(Ct).length===0)return;let We=0,pi=m=>{We<<=1,We+=m?1:0},Xe=m=>!(~m&We)&&!!(m&We);"YXMxWwdD".split("").forEach(m=>pi(Ct[m]));let Ye=!Xe(161)&&Xe(130),Ui=Xe(84),Qe=!Ui&&Xe(72);We=0,"PHhmsf".split("").forEach(m=>pi(Ct[m]));let ut=!Xe(23)&&Xe(47),je=(Ye?"YD":Ui?"XxwF":Qe?"XWF":"YMD")+(ut?"Phmsf":"Hmsf"),Pn=this.environment.timestamp,xe=!1,Si=!1;if(je.split("").forEach(m=>{if(typeof Ct[m]>"u")xe?(Ct[m]="MDd".indexOf(m)!==-1?1:0,Si=!0):Ct[m]=At(Pn,m);else if(xe=!0,Si)throw{code:"D3136"}}),Ct.M>0?Ct.M-=1:Ct.M=0,Ye){let m=Date.UTC(Ct.Y,0),O=(Ct.d-1)*1e3*60*60*24,D=new Date(m+O);Ct.M=D.getUTCMonth(),Ct.D=D.getUTCDate()}if(Ui)throw{code:"D3136"};if(Qe)throw{code:"D3136"};ut&&(Ct.H=Ct.h===12?0:Ct.h,Ct.P===1&&(Ct.H+=12));var q=Date.UTC(Ct.Y,Ct.M,Ct.D,Ct.H,Ct.m,Ct.s,Ct.f);return(Ct.Z||Ct.z)&&(q-=(Ct.Z||Ct.z)*60*1e3),q}}var ht=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function Ot(F,W){if(!(typeof F>"u"))if(typeof W>"u"){if(!ht.test(F))throw{stack:new Error().stack,code:"D3110",value:F};return Date.parse(F)}else return Z.call(this,F,W)}function $(F,W,M){if(!(typeof F>"u"))return ae.call(this,F,W,M)}return{formatInteger:B,parseInteger:P,fromMillis:$,toMillis:Ot}}();r.exports=c},{"./utils":6}],2:[function(s,r,h){(function(l){(function(){var c=s("./utils");let f=(()=>{"use strict";var E=c.isNumeric,k=c.isArrayOfStrings,U=c.isArrayOfNumbers,b=c.createSequence,y=c.isSequence,R=c.isFunction,G=c.isLambda,X=c.isIterable,ct=c.getFunctionArity,dt=c.isDeepEqual,z=c.stringToArray;function J(p){if(!(typeof p>"u")){var g=0;return p.forEach(function(C){g+=C}),g}}function at(p){return typeof p>"u"?0:p.length}function B(p){if(!(typeof p>"u"||p.length===0))return Math.max.apply(Math,p)}function j(p){if(!(typeof p>"u"||p.length===0))return Math.min.apply(Math,p)}function pt(p){if(!(typeof p>"u"||p.length===0)){var g=0;return p.forEach(function(C){g+=C}),g/p.length}}function rt(p,g=!1){if(!(typeof p>"u")){var C;if(typeof p=="string")C=p;else if(R(p))C="";else{if(typeof p=="number"&&!isFinite(p))throw{code:"D3001",value:p,stack:new Error().stack};var w=g?2:0;Array.isArray(p)&&p.outerWrapper&&(p=p[0]),C=JSON.stringify(p,function(V,Q){return typeof Q<"u"&&Q!==null&&Q.toPrecision&&E(Q)?Number(Q.toPrecision(15)):Q&&R(Q)?"":Q},w)}return C}}function Ft(p,g,C){if(!(typeof p>"u")){var w=z(p),V=w.length;if(V+g<0&&(g=0),typeof C<"u"){if(C<=0)return"";var Q=g>=0?g+C:V+g+C;return w.slice(g,Q).join("")}return w.slice(g).join("")}}function Bt(p,g){if(!(typeof p>"u")){var C=p.indexOf(g);return C>-1?p.substr(0,C):p}}function Dt(p,g){if(!(typeof p>"u")){var C=p.indexOf(g);return C>-1?p.substr(C+g.length):p}}function Mt(p){if(!(typeof p>"u"))return p.toLowerCase()}function Et(p){if(!(typeof p>"u"))return p.toUpperCase()}function Rt(p){if(!(typeof p>"u"))return z(p).length}function le(p){if(!(typeof p>"u")){var g=p.replace(/[ \t\n\r]+/gm," ");return g.charAt(0)===" "&&(g=g.substring(1)),g.charAt(g.length-1)===" "&&(g=g.substring(0,g.length-1)),g}}function Tt(p,g,C){if(!(typeof p>"u")){(typeof C>"u"||C.length===0)&&(C=" ");var w,V=Math.abs(g)-Rt(p);if(V>0){var Q=new Array(V+1).join(C);C.length>1&&(Q=Ft(Q,0,V)),g>0?w=p+Q:w=Q+p}else w=p;return w}}function*mt(p,g){var C=p.apply(this,[g]);if(X(C)&&(C=yield*C),C&&!(typeof C.start=="number"||C.end==="number"||Array.isArray(C.groups)||R(C.next)))throw{code:"T1010",stack:new Error().stack};return C}function*ne(p,g){if(!(typeof p>"u")){var C;if(typeof g=="string")C=p.indexOf(g)!==-1;else{var w=yield*mt(g,p);C=typeof w<"u"}return C}}function*At(p,g,C){if(!(typeof p>"u")){if(C<0)throw{stack:new Error().stack,value:C,code:"D3040",index:3};var w=b();if(typeof C>"u"||C>0){var V=0,Q=yield*mt(g,p);if(typeof Q<"u")for(;typeof Q<"u"&&(typeof C>"u"||V<C);)w.push({match:Q.match,index:Q.start,groups:Q.groups}),Q=yield*mt(Q.next),V++}return w}}function*Vt(p,g,C,w){if(!(typeof p>"u")){var V=this;if(g==="")throw{code:"D3010",stack:new Error().stack,value:g,index:2};if(w<0)throw{code:"D3011",stack:new Error().stack,value:w,index:4};var Q;typeof C=="string"?Q=function(ue){for(var Ke="",fe=0,ti=C.indexOf("$",fe);ti!==-1&&fe<C.length;){Ke+=C.substring(fe,ti),fe=ti+1;var Mi=C.charAt(fe);if(Mi==="$")Ke+="$",fe++;else if(Mi==="0")Ke+=ue.match,fe++;else{var hi;if(ue.groups.length===0?hi=1:hi=Math.floor(Math.log(ue.groups.length)*Math.LOG10E)+1,ti=parseInt(C.substring(fe,fe+hi),10),hi>1&&ti>ue.groups.length&&(ti=parseInt(C.substring(fe,fe+hi-1),10)),isNaN(ti))Ke+="$";else{if(ue.groups.length>0){var Dn=ue.groups[ti-1];typeof Dn<"u"&&(Ke+=Dn)}fe+=ti.toString().length}}ti=C.indexOf("$",fe)}return Ke+=C.substring(fe),Ke}:Q=C;var ot="",bt=0;if(typeof w>"u"||w>0){var Wt=0;if(typeof g=="string"){for(var $t=p.indexOf(g,bt);$t!==-1&&(typeof w>"u"||Wt<w);)ot+=p.substring(bt,$t),ot+=C,bt=$t+g.length,Wt++,$t=p.indexOf(g,bt);ot+=p.substring(bt)}else{var re=yield*mt(g,p);if(typeof re<"u"){for(;typeof re<"u"&&(typeof w>"u"||Wt<w);){ot+=p.substring(bt,re.start);var Qt=Q.apply(V,[re]);if(X(Qt)&&(Qt=yield*Qt),typeof Qt=="string")ot+=Qt;else throw{code:"D3012",stack:new Error().stack,value:Qt};bt=re.start+re.match.length,Wt++,re=yield*mt(re.next)}ot+=p.substring(bt)}else ot=p}}else ot=p;return ot}}function ae(p){if(!(typeof p>"u")){var g=typeof window<"u"?window.btoa:function(C){return new l.Buffer.from(C,"binary").toString("base64")};return g(p)}}function A(p){if(!(typeof p>"u")){var g=typeof window<"u"?window.atob:function(C){return new l.Buffer.from(C,"base64").toString("binary")};return g(p)}}function P(p){if(!(typeof p>"u")){var g;try{g=encodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrlComponent"}}return g}}function Z(p){if(!(typeof p>"u")){var g;try{g=encodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrl"}}return g}}function ht(p){if(!(typeof p>"u")){var g;try{g=decodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrlComponent"}}return g}}function Ot(p){if(!(typeof p>"u")){var g;try{g=decodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrl"}}return g}}function*$(p,g,C){if(!(typeof p>"u")){if(C<0)throw{code:"D3020",stack:new Error().stack,value:C,index:3};var w=[];if(typeof C>"u"||C>0)if(typeof g=="string")w=p.split(g,C);else{var V=0,Q=yield*mt(g,p);if(typeof Q<"u"){for(var ot=0;typeof Q<"u"&&(typeof C>"u"||V<C);)w.push(p.substring(ot,Q.start)),ot=Q.end,Q=yield*mt(Q.next),V++;(typeof C>"u"||V<C)&&w.push(p.substring(ot))}else w.push(p)}return w}}function F(p,g){if(!(typeof p>"u"))return typeof g>"u"&&(g=""),p.join(g)}function W(p,g,C){if(!(typeof p>"u")){var w={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},V=w;typeof C<"u"&&Object.keys(C).forEach(function(Ut){V[Ut]=C[Ut]});for(var Q=[],ot=V["zero-digit"].charCodeAt(0),bt=ot;bt<ot+10;bt++)Q.push(String.fromCharCode(bt));var Wt=Q.concat([V["decimal-separator"],V["exponent-separator"],V["grouping-separator"],V.digit,V["pattern-separator"]]),$t=g.split(V["pattern-separator"]);if($t.length>2)throw{code:"D3080",stack:new Error().stack};var re=function(Ut){var ve=function(){for(var Be,ui=0;ui<Ut.length;ui++)if(Be=Ut.charAt(ui),Wt.indexOf(Be)!==-1&&Be!==V["exponent-separator"])return Ut.substring(0,ui)}(),Ze=function(){for(var Be,ui=Ut.length-1;ui>=0;ui--)if(Be=Ut.charAt(ui),Wt.indexOf(Be)!==-1&&Be!==V["exponent-separator"])return Ut.substring(ui+1)}(),ye=Ut.substring(ve.length,Ut.length-Ze.length),ei,en,ii,gn,li=Ut.indexOf(V["exponent-separator"],ve.length);li===-1||li>Ut.length-Ze.length?(ei=ye,en=void 0):(ei=ye.substring(0,li),en=ye.substring(li+1));var ni=ei.indexOf(V["decimal-separator"]);return ni===-1?(ii=ei,gn=Ze):(ii=ei.substring(0,ni),gn=ei.substring(ni+1)),{prefix:ve,suffix:Ze,activePart:ye,mantissaPart:ei,exponentPart:en,integerPart:ii,fractionalPart:gn,subpicture:Ut}},Qt=function(Ut){var ve,Ze,ye=Ut.subpicture,ei=ye.indexOf(V["decimal-separator"]);ei!==ye.lastIndexOf(V["decimal-separator"])&&(ve="D3081"),ye.indexOf(V.percent)!==ye.lastIndexOf(V.percent)&&(ve="D3082"),ye.indexOf(V["per-mille"])!==ye.lastIndexOf(V["per-mille"])&&(ve="D3083"),ye.indexOf(V.percent)!==-1&&ye.indexOf(V["per-mille"])!==-1&&(ve="D3084");var en=!1;for(Ze=0;Ze<Ut.mantissaPart.length;Ze++){var ii=Ut.mantissaPart.charAt(Ze);if(Q.indexOf(ii)!==-1||ii===V.digit){en=!0;break}}en||(ve="D3085");var gn=Ut.activePart.split("").map(function(Be){return Wt.indexOf(Be)===-1?"p":"a"}).join("");gn.indexOf("p")!==-1&&(ve="D3086"),ei!==-1?(ye.charAt(ei-1)===V["grouping-separator"]||ye.charAt(ei+1)===V["grouping-separator"])&&(ve="D3087"):Ut.integerPart.charAt(Ut.integerPart.length-1)===V["grouping-separator"]&&(ve="D3088"),ye.indexOf(V["grouping-separator"]+V["grouping-separator"])!==-1&&(ve="D3089");var li=Ut.integerPart.indexOf(V.digit);li!==-1&&Ut.integerPart.substring(0,li).split("").filter(function(Be){return Q.indexOf(Be)>-1}).length>0&&(ve="D3090"),li=Ut.fractionalPart.lastIndexOf(V.digit),li!==-1&&Ut.fractionalPart.substring(li).split("").filter(function(Be){return Q.indexOf(Be)>-1}).length>0&&(ve="D3091");var ni=typeof Ut.exponentPart=="string";if(ni&&Ut.exponentPart.length>0&&(ye.indexOf(V.percent)!==-1||ye.indexOf(V["per-mille"])!==-1)&&(ve="D3092"),ni&&(Ut.exponentPart.length===0||Ut.exponentPart.split("").filter(function(Be){return Q.indexOf(Be)===-1}).length>0)&&(ve="D3093"),ve)throw{code:ve,stack:new Error().stack}},ue=function(Ut){var ve=function(He,bs){for(var wn=[],Ki=He.indexOf(V["grouping-separator"]);Ki!==-1;){var ns=(bs?He.substring(0,Ki):He.substring(Ki)).split("").filter(function(Fn){return Q.indexOf(Fn)!==-1||Fn===V.digit}).length;wn.push(ns),Ki=Ut.integerPart.indexOf(V["grouping-separator"],Ki+1)}return wn},Ze=ve(Ut.integerPart),ye=function(He){if(He.length===0)return 0;for(var bs=function(ns,Fn){return Fn===0?ns:bs(Fn,ns%Fn)},wn=He.reduce(bs),Ki=1;Ki<=He.length;Ki++)if(He.indexOf(Ki*wn)===-1)return 0;return wn},ei=ye(Ze),en=ve(Ut.fractionalPart,!0),ii=Ut.integerPart.split("").filter(function(He){return Q.indexOf(He)!==-1}).length,gn=ii,li=Ut.fractionalPart.split(""),ni=li.filter(function(He){return Q.indexOf(He)!==-1}).length,Be=li.filter(function(He){return Q.indexOf(He)!==-1||He===V.digit}).length,ui=typeof Ut.exponentPart=="string";ii===0&&Be===0&&(ui?(ni=1,Be=1):ii=1),ui&&ii===0&&Ut.integerPart.indexOf(V.digit)!==-1&&(ii=1),ii===0&&ni===0&&(ni=1);var xr=0;return ui&&(xr=Ut.exponentPart.split("").filter(function(He){return Q.indexOf(He)!==-1}).length),{integerPartGroupingPositions:Ze,regularGrouping:ei,minimumIntegerPartSize:ii,scalingFactor:gn,prefix:Ut.prefix,fractionalPartGroupingPositions:en,minimumFactionalPartSize:ni,maximumFactionalPartSize:Be,minimumExponentSize:xr,suffix:Ut.suffix,picture:Ut.subpicture}},Ke=$t.map(re);Ke.forEach(Qt);var fe=Ke.map(ue),ti=V["minus-sign"],Mi=V["zero-digit"],hi=V["decimal-separator"],Dn=V["grouping-separator"];fe.length===1&&(fe.push(JSON.parse(JSON.stringify(fe[0]))),fe[1].prefix=ti+fe[1].prefix);var Se;p>=0?Se=fe[0]:Se=fe[1];var Zn;Se.picture.indexOf(V.percent)!==-1?Zn=p*100:Se.picture.indexOf(V["per-mille"])!==-1?Zn=p*1e3:Zn=p;var tn,Rn;if(Se.minimumExponentSize===0)tn=Zn;else{var ts=Math.pow(10,Se.scalingFactor),kr=Math.pow(10,Se.scalingFactor-1);for(tn=Zn,Rn=0;tn<kr;)tn*=10,Rn-=1;for(;tn>ts;)tn/=10,Rn+=1}var qo=q(tn,Se.maximumFactionalPartSize),Ys=function(Ut,ve){var Ze=Math.abs(Ut).toFixed(ve);return Mi!=="0"&&(Ze=Ze.split("").map(function(ye){return ye>="0"&&ye<="9"?Q[ye.charCodeAt(0)-48]:ye}).join("")),Ze},Jt=Ys(qo,Se.maximumFactionalPartSize),ze=Jt.indexOf(".");for(ze===-1?Jt=Jt+hi:Jt=Jt.replace(".",hi);Jt.charAt(0)===Mi;)Jt=Jt.substring(1);for(;Jt.charAt(Jt.length-1)===Mi;)Jt=Jt.substring(0,Jt.length-1);ze=Jt.indexOf(hi);var es=Se.minimumIntegerPartSize-ze,Qs=Se.minimumFactionalPartSize-(Jt.length-ze-1);if(Jt=(es>0?new Array(es+1).join(Mi):"")+Jt,Jt=Jt+(Qs>0?new Array(Qs+1).join(Mi):""),ze=Jt.indexOf(hi),Se.regularGrouping>0)for(var Wo=Math.floor((ze-1)/Se.regularGrouping),is=1;is<=Wo;is++)Jt=[Jt.slice(0,ze-is*Se.regularGrouping),Dn,Jt.slice(ze-is*Se.regularGrouping)].join("");else Se.integerPartGroupingPositions.forEach(function(Ut){Jt=[Jt.slice(0,ze-Ut),Dn,Jt.slice(ze-Ut)].join(""),ze++});if(ze=Jt.indexOf(hi),Se.fractionalPartGroupingPositions.forEach(function(Ut){Jt=[Jt.slice(0,Ut+ze+1),Dn,Jt.slice(Ut+ze+1)].join("")}),ze=Jt.indexOf(hi),(Se.picture.indexOf(hi)===-1||ze===Jt.length-1)&&(Jt=Jt.substring(0,Jt.length-1)),typeof Rn<"u"){var Tn=Ys(Rn,0);es=Se.minimumExponentSize-Tn.length,es>0&&(Tn=new Array(es+1).join(Mi)+Tn),Jt=Jt+V["exponent-separator"]+(Rn<0?ti:"")+Tn}return Jt=Se.prefix+Jt+Se.suffix,Jt}}function M(p,g){if(!(typeof p>"u")){if(p=q(p),typeof g>"u"?g=10:g=q(g),g<2||g>36)throw{code:"D3100",stack:new Error().stack,value:g};var C=p.toString(g);return C}}function tt(p){var g;if(!(typeof p>"u")){if(typeof p=="number")g=p;else if(typeof p=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(p)&&!isNaN(parseFloat(p))&&isFinite(p))g=parseFloat(p);else if(p===!0)g=1;else if(p===!1)g=0;else throw{code:"D3030",value:p,stack:new Error().stack,index:1};return g}}function it(p){var g;if(!(typeof p>"u"))return g=Math.abs(p),g}function K(p){var g;if(!(typeof p>"u"))return g=Math.floor(p),g}function Y(p){var g;if(!(typeof p>"u"))return g=Math.ceil(p),g}function q(p,g){var C;if(!(typeof p>"u")){if(g){var w=p.toString().split("e");p=+(w[0]+"e"+(w[1]?+w[1]+g:g))}C=Math.round(p);var V=C-p;return Math.abs(V)===.5&&Math.abs(C%2)===1&&(C=C-1),g&&(w=C.toString().split("e"),C=+(w[0]+"e"+(w[1]?+w[1]-g:-g))),Object.is(C,-0)&&(C=0),C}}function gt(p){var g;if(!(typeof p>"u")){if(p<0)throw{stack:new Error().stack,code:"D3060",index:1,value:p};return g=Math.sqrt(p),g}}function Kt(p,g){var C;if(!(typeof p>"u")){if(C=Math.pow(p,g),!isFinite(C))throw{stack:new Error().stack,code:"D3061",index:1,value:p,exp:g};return C}}function qt(){return Math.random()}function kt(p){if(!(typeof p>"u")){var g=!1;if(Array.isArray(p)){if(p.length===1)g=kt(p[0]);else if(p.length>1){var C=p.filter(function(w){return kt(w)});g=C.length>0}}else typeof p=="string"?p.length>0&&(g=!0):E(p)?p!==0&&(g=!0):p!==null&&typeof p=="object"?Object.keys(p).length>0&&(g=!0):typeof p=="boolean"&&p===!0&&(g=!0);return g}}function Lt(p){if(!(typeof p>"u"))return!kt(p)}function zt(p,g,C,w){var V=[g],Q=ct(p);return Q>=2&&V.push(C),Q>=3&&V.push(w),V}function*Ct(p,g){if(!(typeof p>"u")){for(var C=b(),w=0;w<p.length;w++){var V=zt(g,p[w],w,p),Q=yield*g.apply(this,V);typeof Q<"u"&&C.push(Q)}return C}}function*We(p,g){if(!(typeof p>"u")){for(var C=b(),w=0;w<p.length;w++){var V=p[w],Q=zt(g,V,w,p),ot=yield*g.apply(this,Q);kt(ot)&&C.push(V)}return C}}function*pi(p,g){if(!(typeof p>"u")){for(var C=!1,w,V=0;V<p.length;V++){var Q=p[V],ot=!0;if(typeof g<"u"){var bt=zt(g,Q,V,p),Wt=yield*g.apply(this,bt);ot=kt(Wt)}if(ot)if(!C)w=Q,C=!0;else throw{stack:new Error().stack,code:"D3138",index:V}}if(!C)throw{stack:new Error().stack,code:"D3139"};return w}}function Xe(){for(var p=[],g=Array.prototype.slice.call(arguments),C=Math.min.apply(Math,g.map(function(Q){return Array.isArray(Q)?Q.length:0})),w=0;w<C;w++){var V=g.map(Q=>Q[w]);p.push(V)}return p}function*Re(p,g,C){if(!(typeof p>"u")){var w,V=ct(g);if(V<2)throw{stack:new Error().stack,code:"D3050",index:1};var Q;for(typeof C>"u"&&p.length>0?(w=p[0],Q=1):(w=C,Q=0);Q<p.length;){var ot=[w,p[Q]];V>=3&&ot.push(Q),V>=4&&ot.push(p),w=yield*g.apply(this,ot),Q++}return w}}function Ye(p){var g=b();if(Array.isArray(p)){var C={};p.forEach(function(w){var V=Ye(w);V.forEach(function(Q){C[Q]=!0})}),g=Ye(C)}else p!==null&&typeof p=="object"&&!G(p)&&Object.keys(p).forEach(w=>g.push(w));return g}function Ui(p,g){var C;if(Array.isArray(p)){C=b();for(var w=0;w<p.length;w++){var V=Ui(p[w],g);typeof V<"u"&&(Array.isArray(V)?V.forEach(Q=>C.push(Q)):C.push(V))}}else p!==null&&typeof p=="object"&&(C=p[g]);return C}function Qe(p,g){return typeof p>"u"?g:typeof g>"u"?p:(Array.isArray(p)||(p=b(p)),Array.isArray(g)||(g=[g]),p.concat(g))}function Jn(p){return!(typeof p>"u")}function ut(p){var g=b();if(Array.isArray(p))p.forEach(function(V){g=Qe(g,ut(V))});else if(p!==null&&typeof p=="object"&&!G(p))for(var C in p){var w={};w[C]=p[C],g.push(w)}else g=p;return g}function Nt(p){if(!(typeof p>"u")){var g={};return p.forEach(function(C){for(var w in C)g[w]=C[w]}),g}}function Xn(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var g=p.length,C=new Array(g),w=0;w<g;w++)C[g-w-1]=p[w];return C}}function*je(p,g){var C=b();for(var w in p){var V=zt(g,p[w],w,p),Q=yield*g.apply(this,V);typeof Q<"u"&&C.push(Q)}return C}function Pn(p){throw{code:"D3137",stack:new Error().stack,message:p||"$error() function evaluated"}}function xe(p,g){if(!p)throw{code:"D3141",stack:new Error().stack,message:g||"$assert() statement failed"}}function Si(p){if(p!==void 0)return p===null?"null":E(p)?"number":typeof p=="string"?"string":typeof p=="boolean"?"boolean":Array.isArray(p)?"array":R(p)?"function":"object"}function*m(p,g){if(!(typeof p>"u")){if(p.length<=1)return p;var C;if(typeof g>"u"){if(!U(p)&&!k(p))throw{stack:new Error().stack,code:"D3070",index:1};C=function*(ot,bt){return ot>bt}}else C=g;var w=function*(ot,bt){var Wt=function*(re,Qt,ue){Qt.length===0?Array.prototype.push.apply(re,ue):ue.length===0?Array.prototype.push.apply(re,Qt):(yield*C(Qt[0],ue[0]))?(re.push(ue[0]),yield*Wt(re,Qt,ue.slice(1))):(re.push(Qt[0]),yield*Wt(re,Qt.slice(1),ue))},$t=[];return yield*Wt($t,ot,bt),$t},V=function*(ot){if(!Array.isArray(ot)||ot.length<=1)return ot;var bt=Math.floor(ot.length/2),Wt=ot.slice(0,bt),$t=ot.slice(bt);return Wt=yield*V(Wt),$t=yield*V($t),yield*w(Wt,$t)},Q=yield*V(p);return Q}}function O(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var g=new Array(p.length),C=0;C<p.length;C++){var w=Math.floor(Math.random()*(C+1));C!==w&&(g[C]=g[w]),g[w]=p[C]}return g}}function D(p){if(!(typeof p>"u")){if(!Array.isArray(p)||p.length<=1)return p;for(var g=y(p)?b():[],C=0;C<p.length;C++){for(var w=p[C],V=!1,Q=0;Q<g.length;Q++)if(dt(w,g[Q])){V=!0;break}V||g.push(w)}return g}}function*L(p,g){var C={};for(var w in p){var V=p[w],Q=zt(g,V,w,p),ot=yield*g.apply(this,Q);kt(ot)&&(C[w]=V)}return Object.keys(C).length===0&&(C=void 0),C}return{sum:J,count:at,max:B,min:j,average:pt,string:rt,substring:Ft,substringBefore:Bt,substringAfter:Dt,lowercase:Mt,uppercase:Et,length:Rt,trim:le,pad:Tt,match:At,contains:ne,replace:Vt,split:$,join:F,formatNumber:W,formatBase:M,number:tt,floor:K,ceil:Y,round:q,abs:it,sqrt:gt,power:Kt,random:qt,boolean:kt,not:Lt,map:Ct,zip:Xe,filter:We,single:pi,foldLeft:Re,sift:L,keys:Ye,lookup:Ui,append:Qe,exists:Jn,spread:ut,merge:Nt,reverse:Xn,each:je,error:Pn,assert:xe,type:Si,sort:m,shuffle:O,distinct:D,base64encode:ae,base64decode:A,encodeUrlComponent:P,encodeUrl:Z,decodeUrlComponent:ht,decodeUrl:Ot}})();r.exports=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(s,r,h){var l=s("./datetime"),c=s("./functions"),f=s("./utils"),E=s("./parser"),k=s("./signature"),U=function(){"use strict";var b=f.isNumeric,y=f.isArrayOfStrings,R=f.isArrayOfNumbers,G=f.createSequence,X=f.isSequence,ct=f.isFunction,dt=f.isLambda,z=f.isIterable,J=f.getFunctionArity,at=f.isDeepEqual,B=je(null);function*j(m,O,D){var L,p=D.lookup("__evaluate_entry");switch(p&&p(m,O,D),m.type){case"path":L=yield*pt(m,O,D);break;case"binary":L=yield*Et(m,O,D);break;case"unary":L=yield*Rt(m,O,D);break;case"name":L=le(m,O,D);break;case"string":case"number":case"value":L=Tt(m,O,D);break;case"wildcard":L=mt(m,O,D);break;case"descendant":L=At(m,O,D);break;case"parent":L=D.lookup(m.slot.label);break;case"condition":L=yield*it(m,O,D);break;case"block":L=yield*K(m,O,D);break;case"bind":L=yield*tt(m,O,D);break;case"regex":L=Y(m,O,D);break;case"function":L=yield*Lt(m,O,D);break;case"variable":L=q(m,O,D);break;case"lambda":L=We(m,O,D);break;case"partial":L=yield*pi(m,O,D);break;case"apply":L=yield*kt(m,O,D);break;case"transform":L=Kt(m,O,D);break}if(D.async&&(typeof L>"u"||L===null||typeof L.then!="function")&&(L=Promise.resolve(L)),D.async&&typeof L.then=="function"&&m.nextFunction&&typeof L[m.nextFunction]=="function"||(L=yield L),Object.prototype.hasOwnProperty.call(m,"predicate"))for(var g=0;g<m.predicate.length;g++)L=yield*Mt(m.predicate[g].expr,L,D);m.type!=="path"&&Object.prototype.hasOwnProperty.call(m,"group")&&(L=yield*F(m.group,L,D));var C=D.lookup("__evaluate_exit");return C&&C(m,O,D,L),L&&X(L)&&!L.tupleStream&&(m.keepArray&&(L.keepSingleton=!0),L.length===0?L=void 0:L.length===1&&(L=L.keepSingleton?L:L[0])),L}function*pt(m,O,D){var L;Array.isArray(O)&&m.steps[0].type!=="variable"?L=O:L=G(O);for(var p,g=!1,C=void 0,w=0;w<m.steps.length;w++){var V=m.steps[w];if(V.tuple&&(g=!0),w===0&&V.consarray?p=yield*j(V,L,D):g?C=yield*Dt(V,L,C,D):p=yield*Ft(V,L,D,w===m.steps.length-1),!g&&(typeof p>"u"||p.length===0))break;typeof V.focus>"u"&&(L=p)}if(g)if(m.tuple)p=C;else for(p=G(),w=0;w<C.length;w++)p.push(C[w]["@"]);return m.keepSingletonArray&&(Array.isArray(p)&&p.cons&&!p.sequence&&(p=G(p)),p.keepSingleton=!0),m.hasOwnProperty("group")&&(p=yield*F(m.group,g?C:p,D)),p}function rt(m,O){var D=je(m);for(let L in O)D.bind(L,O[L]);return D}function*Ft(m,O,D,L){var p;if(m.type==="sort")return p=yield*gt(m,O,D),m.stages&&(p=yield*Bt(m.stages,p,D)),p;p=G();for(var g=0;g<O.length;g++){var C=yield*j(m,O[g],D);if(m.stages)for(var w=0;w<m.stages.length;w++)C=yield*Mt(m.stages[w].expr,C,D);typeof C<"u"&&p.push(C)}var V=G();return L&&p.length===1&&Array.isArray(p[0])&&!X(p[0])?V=p[0]:p.forEach(function(Q){!Array.isArray(Q)||Q.cons?V.push(Q):Q.forEach(ot=>V.push(ot))}),V}function*Bt(m,O,D){for(var L=O,p=0;p<m.length;p++){var g=m[p];switch(g.type){case"filter":L=yield*Mt(g.expr,L,D);break;case"index":for(var C=0;C<L.length;C++){var w=L[C];w[g.value]=C}break}}return L}function*Dt(m,O,D,L){var p;if(m.type==="sort"){if(D)p=yield*gt(m,D,L);else{var g=yield*gt(m,O,L);p=G(),p.tupleStream=!0;for(var C=0;C<g.length;C++){var w={"@":g[C]};w[m.index]=C,p.push(w)}}return m.stages&&(p=yield*Bt(m.stages,p,L)),p}p=G(),p.tupleStream=!0;var V=L;D===void 0&&(D=O.map(Wt=>({"@":Wt})));for(var Q=0;Q<D.length;Q++){V=rt(L,D[Q]);var ot=yield*j(m,D[Q]["@"],V);if(typeof ot<"u"){Array.isArray(ot)||(ot=[ot]);for(var bt=0;bt<ot.length;bt++)w={},Object.assign(w,D[Q]),ot.tupleStream?Object.assign(w,ot[bt]):(m.focus?(w[m.focus]=ot[bt],w["@"]=D[Q]["@"]):w["@"]=ot[bt],m.index&&(w[m.index]=bt),m.ancestor&&(w[m.ancestor.label]=D[Q]["@"])),p.push(w)}}return m.stages&&(p=yield*Bt(m.stages,p,L)),p}function*Mt(m,O,D){var L=G();if(O&&O.tupleStream&&(L.tupleStream=!0),Array.isArray(O)||(O=G(O)),m.type==="number"){var p=Math.floor(m.value);p<0&&(p=O.length+p);var g=O[p];typeof g<"u"&&(Array.isArray(g)?L=g:L.push(g))}else for(p=0;p<O.length;p++){var g=O[p],C=g,w=D;O.tupleStream&&(C=g["@"],w=rt(D,g));var V=yield*j(m,C,w);b(V)&&(V=[V]),R(V)?V.forEach(function(ot){var bt=Math.floor(ot);bt<0&&(bt=O.length+bt),bt===p&&L.push(g)}):c.boolean(V)&&L.push(g)}return L}function*Et(m,O,D){var L,p=yield*j(m.lhs,O,D),g=m.value,C=function*(){return yield*j(m.rhs,O,D)};if(g==="and"||g==="or")try{return yield*ht(p,C,g)}catch(V){throw V.position=m.position,V.token=g,V}var w=yield*C();try{switch(g){case"+":case"-":case"*":case"/":case"%":L=ae(p,w,g);break;case"=":case"!=":L=A(p,w,g);break;case"<":case"<=":case">":case">=":L=P(p,w,g);break;case"&":L=$(p,w);break;case"..":L=M(p,w);break;case"in":L=Z(p,w);break}}catch(V){throw V.position=m.position,V.token=g,V}return L}function*Rt(m,O,D){var L;switch(m.value){case"-":if(L=yield*j(m.expression,O,D),typeof L>"u")L=void 0;else if(b(L))L=-L;else throw{code:"D1002",stack:new Error().stack,position:m.position,token:m.value,value:L};break;case"[":L=[];for(var p=0;p<m.expressions.length;p++){var g=m.expressions[p],C=yield*j(g,O,D);typeof C<"u"&&(g.value==="["?L.push(C):L=c.append(L,C))}m.consarray&&Object.defineProperty(L,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":L=yield*F(m,O,D);break}return L}function le(m,O,D){return c.lookup(O,m.value)}function Tt(m){return m.value}function mt(m,O){var D=G();return Array.isArray(O)&&O.outerWrapper&&O.length>0&&(O=O[0]),O!==null&&typeof O=="object"&&Object.keys(O).forEach(function(L){var p=O[L];Array.isArray(p)?(p=ne(p),D=c.append(D,p)):D.push(p)}),D}function ne(m,O){return typeof O>"u"&&(O=[]),Array.isArray(m)?m.forEach(function(D){ne(D,O)}):O.push(m),O}function At(m,O){var D,L=G();return typeof O<"u"&&(Vt(O,L),L.length===1?D=L[0]:D=L),D}function Vt(m,O){Array.isArray(m)||O.push(m),Array.isArray(m)?m.forEach(function(D){Vt(D,O)}):m!==null&&typeof m=="object"&&Object.keys(m).forEach(function(D){Vt(m[D],O)})}function ae(m,O,D){var L;if(typeof m<"u"&&!b(m))throw{code:"T2001",stack:new Error().stack,value:m};if(typeof O<"u"&&!b(O))throw{code:"T2002",stack:new Error().stack,value:O};if(typeof m>"u"||typeof O>"u")return L;switch(D){case"+":L=m+O;break;case"-":L=m-O;break;case"*":L=m*O;break;case"/":L=m/O;break;case"%":L=m%O;break}return L}function A(m,O,D){var L,p=typeof m,g=typeof O;if(p==="undefined"||g==="undefined")return!1;switch(D){case"=":L=at(m,O);break;case"!=":L=!at(m,O);break}return L}function P(m,O,D){var L,p=typeof m,g=typeof O,C=p==="undefined"||p==="string"||p==="number",w=g==="undefined"||g==="string"||g==="number";if(!C||!w)throw{code:"T2010",stack:new Error().stack,value:p==="string"||p==="number"?O:m};if(!(p==="undefined"||g==="undefined")){if(p!==g)throw{code:"T2009",stack:new Error().stack,value:m,value2:O};switch(D){case"<":L=m<O;break;case"<=":L=m<=O;break;case">":L=m>O;break;case">=":L=m>=O;break}return L}}function Z(m,O){var D=!1;if(typeof m>"u"||typeof O>"u")return!1;Array.isArray(O)||(O=[O]);for(var L=0;L<O.length;L++)if(O[L]===m){D=!0;break}return D}function*ht(m,O,D){var L,p=Ot(m);switch(D){case"and":L=p&&Ot(yield*O());break;case"or":L=p||Ot(yield*O());break}return L}function Ot(m){var O=c.boolean(m);return typeof O>"u"?!1:O}function $(m,O){var D,L="",p="";return typeof m<"u"&&(L=c.string(m)),typeof O<"u"&&(p=c.string(O)),D=L.concat(p),D}function*F(m,O,D){var L={},p={},g=!!(O&&O.tupleStream);Array.isArray(O)||(O=G(O)),O.length===0&&O.push(void 0);for(var C=0;C<O.length;C++)for(var w=O[C],V=g?rt(D,w):D,Q=0;Q<m.lhs.length;Q++){var ot=m.lhs[Q],bt=yield*j(ot[0],g?w["@"]:w,V);if(typeof bt!="string"&&bt!==void 0)throw{code:"T1003",stack:new Error().stack,position:m.position,value:bt};if(bt!==void 0){var Wt={data:w,exprIndex:Q};if(p.hasOwnProperty(bt)){if(p[bt].exprIndex!==Q)throw{code:"D1009",stack:new Error().stack,position:m.position,value:bt};p[bt].data=c.append(p[bt].data,w)}else p[bt]=Wt}}for(bt in p){Wt=p[bt];var $t=Wt.data,V=D;if(g){var re=W(Wt.data);$t=re["@"],delete re["@"],V=rt(D,re)}var Qt=yield*j(m.lhs[Wt.exprIndex][1],$t,V);typeof Qt<"u"&&(L[bt]=Qt)}return L}function W(m){if(!Array.isArray(m))return m;var O={};Object.assign(O,m[0]);for(var D=1;D<m.length;D++)for(let L in m[D])O[L]=c.append(O[L],m[D][L]);return O}function M(m,O){var D;if(typeof m<"u"&&!Number.isInteger(m))throw{code:"T2003",stack:new Error().stack,value:m};if(typeof O<"u"&&!Number.isInteger(O))throw{code:"T2004",stack:new Error().stack,value:O};if(typeof m>"u"||typeof O>"u"||m>O)return D;var L=O-m+1;if(L>1e7)throw{code:"D2014",stack:new Error().stack,value:L};D=new Array(L);for(var p=m,g=0;p<=O;p++,g++)D[g]=p;return D.sequence=!0,D}function*tt(m,O,D){var L=yield*j(m.rhs,O,D);return D.bind(m.lhs.value,L),L}function*it(m,O,D){var L,p=yield*j(m.condition,O,D);return c.boolean(p)?L=yield*j(m.then,O,D):typeof m.else<"u"&&(L=yield*j(m.else,O,D)),L}function*K(m,O,D){for(var L,p=je(D),g=0;g<m.expressions.length;g++)L=yield*j(m.expressions[g],O,p);return L}function Y(m){var O=new Si.RegexEngine(m.value),D=function(L,p){var g;O.lastIndex=p||0;var C=O.exec(L);if(C!==null){if(g={match:C[0],start:C.index,end:C.index+C[0].length,groups:[]},C.length>1)for(var w=1;w<C.length;w++)g.groups.push(C[w]);g.next=function(){if(!(O.lastIndex>=L.length)){var V=D(L,O.lastIndex);if(V&&V.match==="")throw{code:"D1004",stack:new Error().stack,position:m.position,value:m.value.source};return V}}}return g};return D}function q(m,O,D){var L;return m.value===""?L=O&&O.outerWrapper?O[0]:O:L=D.lookup(m.value),L}function*gt(m,O,D){var L,p=O,g=!!O.tupleStream,C=function*(V,Q){for(var ot=0,bt=0;ot===0&&bt<m.terms.length;bt++){var Wt=m.terms[bt],$t=V,re=D;g&&($t=V["@"],re=rt(D,V));var Qt=yield*j(Wt.expression,$t,re);$t=Q,re=D,g&&($t=Q["@"],re=rt(D,Q));var ue=yield*j(Wt.expression,$t,re),Ke=typeof Qt,fe=typeof ue;if(Ke==="undefined"){ot=fe==="undefined"?0:1;continue}if(fe==="undefined"){ot=-1;continue}if(!(Ke==="string"||Ke==="number")||!(fe==="string"||fe==="number"))throw{code:"T2008",stack:new Error().stack,position:m.position,value:Ke==="string"||Ke==="number"?ue:Qt};if(Ke!==fe)throw{code:"T2007",stack:new Error().stack,position:m.position,value:Qt,value2:ue};Qt!==ue&&(Qt<ue?ot=-1:ot=1,Wt.descending===!0&&(ot=-ot))}return ot===1},w={environment:D,input:O};return L=yield*c.sort.apply(w,[p,C]),L}function Kt(m,O,D){var L=function*(p){if(!(typeof p>"u")){var g=D.lookup("clone");if(!ct(g))throw{code:"T2013",stack:new Error().stack,position:m.position};var C=yield*zt(g,[p],null,D),w=yield*j(m.pattern,C,D);if(typeof w<"u"){Array.isArray(w)||(w=[w]);for(var V=0;V<w.length;V++){var Q=w[V],ot=yield*j(m.update,Q,D),bt=typeof ot;if(bt!=="undefined"){if(bt!=="object"||ot===null||Array.isArray(ot))throw{code:"T2011",stack:new Error().stack,position:m.update.position,value:ot};for(var Wt in ot)Q[Wt]=ot[Wt]}if(typeof m.delete<"u"){var $t=yield*j(m.delete,Q,D);if(typeof $t<"u"){var re=$t;if(Array.isArray($t)||($t=[$t]),!y($t))throw{code:"T2012",stack:new Error().stack,position:m.delete.position,value:re};for(var Qt=0;Qt<$t.length;Qt++)typeof Q=="object"&&Q!==null&&delete Q[$t[Qt]]}}}}return C}};return ut(L,"<(oa):o>")}var qt=E("function($f, $g) { function($x){ $g($f($x)) } }");function*kt(m,O,D){var L,p=yield*j(m.lhs,O,D);if(m.rhs.type==="function")L=yield*Lt(m.rhs,O,D,{context:p});else{var g=yield*j(m.rhs,O,D);if(!ct(g))throw{code:"T2006",stack:new Error().stack,position:m.position,value:g};if(ct(p)){var C=yield*j(qt,null,D);L=yield*zt(C,[p,g],null,D)}else L=yield*zt(g,[p],null,D)}return L}function*Lt(m,O,D,L){var p,g=yield*j(m.procedure,O,D);if(typeof g>"u"&&m.procedure.type==="path"&&D.lookup(m.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:m.position,token:m.procedure.steps[0].value};var C=[];typeof L<"u"&&C.push(L.context);for(var w=0;w<m.arguments.length;w++){let Q=yield*j(m.arguments[w],O,D);if(ct(Q)){let ot=function*(...bt){return yield*zt(Q,bt,null,D)};ot.arity=J(Q),C.push(ot)}else C.push(Q)}var V=m.procedure.type==="path"?m.procedure.steps[0].value:m.procedure.value;try{typeof g=="object"&&(g.token=V,g.position=m.position),p=yield*zt(g,C,O,D)}catch(Q){throw Q.position||(Q.position=m.position),Q.token||(Q.token=V),Q}return p}function*zt(m,O,D,L){var p;for(p=yield*Ct(m,O,D,L);dt(p)&&p.thunk===!0;){var g=yield*j(p.body.procedure,p.input,p.environment);p.body.procedure.type==="variable"&&(g.token=p.body.procedure.value),g.position=p.body.procedure.position;for(var C=[],w=0;w<p.body.arguments.length;w++)C.push(yield*j(p.body.arguments[w],p.input,p.environment));p=yield*Ct(g,C,D,L)}return p}function*Ct(m,O,D,L){var p;try{var g=O;if(m&&(g=Xe(m.signature,O,D)),dt(m))p=yield*Re(m,g);else if(m&&m._jsonata_function===!0){var C={environment:L,input:D};p=m.implementation.apply(C,g),z(p)&&(p=yield*p)}else if(typeof m=="function")p=m.apply(D,g),z(p)&&(p=yield*p);else throw{code:"T1006",stack:new Error().stack}}catch(w){throw m&&(typeof w.token>"u"&&typeof m.token<"u"&&(w.token=m.token),w.position=m.position),w}return p}function We(m,O,D){var L={_jsonata_lambda:!0,input:O,environment:D,arguments:m.arguments,signature:m.signature,body:m.body};return m.thunk===!0&&(L.thunk=!0),L.apply=function*(p,g){return yield*zt(L,g,O,p.environment)},L}function*pi(m,O,D){for(var L,p=[],g=0;g<m.arguments.length;g++){var C=m.arguments[g];C.type==="operator"&&C.value==="?"?p.push(C):p.push(yield*j(C,O,D))}var w=yield*j(m.procedure,O,D);if(typeof w>"u"&&m.procedure.type==="path"&&D.lookup(m.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:m.position,token:m.procedure.steps[0].value};if(dt(w))L=Ye(w,p);else if(w&&w._jsonata_function===!0)L=Ui(w.implementation,p);else if(typeof w=="function")L=Ui(w,p);else throw{code:"T1008",stack:new Error().stack,position:m.position,token:m.procedure.type==="path"?m.procedure.steps[0].value:m.procedure.value};return L}function Xe(m,O,D){if(typeof m>"u")return O;var L=m.validate(O,D);return L}function*Re(m,O){var D,L=je(m.environment);return m.arguments.forEach(function(p,g){L.bind(p.value,O[g])}),typeof m.body=="function"?D=yield*Qe(m.body,L):D=yield*j(m.body,m.input,L),D}function Ye(m,O){var D=je(m.environment),L=[];m.arguments.forEach(function(g,C){var w=O[C];w&&w.type==="operator"&&w.value==="?"?L.push(g):D.bind(g.value,w)});var p={_jsonata_lambda:!0,input:m.input,environment:D,arguments:L,body:m.body};return p}function Ui(m,O){var D=Jn(m);D=D.map(function(C){return"$"+C.trim()});var L="function("+D.join(", ")+"){ _ }",p=E(L);p.body=m;var g=Ye(p,O);return g}function*Qe(m,O){var D=Jn(m),L=D.map(function(C){return O.lookup(C.trim())}),p={environment:O},g=m.apply(p,L);return z(g)&&(g=yield*g),g}function Jn(m){var O=m.toString(),D=/\(([^)]*)\)/.exec(O)[1],L=D.split(",");return L}function ut(m,O){var D={_jsonata_function:!0,implementation:m};return typeof O<"u"&&(D.signature=k(O)),D}function*Nt(m,O){if(!(typeof m>"u")){var D=this.input;typeof O<"u"&&(D=O,Array.isArray(D)&&!X(D)&&(D=G(D),D.outerWrapper=!0));try{var L=E(m,!1)}catch(g){throw xe(g),{stack:new Error().stack,code:"D3120",value:g.message,error:g}}try{var p=yield*j(L,D,this.environment)}catch(g){throw xe(g),{stack:new Error().stack,code:"D3121",value:g.message,error:g}}return p}}function Xn(m){if(!(typeof m>"u"))return JSON.parse(c.string(m))}function je(m){var O={};return{bind:function(D,L){O[D]=L},lookup:function(D){var L;return O.hasOwnProperty(D)?L=O[D]:m&&(L=m.lookup(D)),L},timestamp:m?m.timestamp:null,async:m?m.async:!1,global:m?m.global:{ancestry:[null]}}}B.bind("sum",ut(c.sum,"<a<n>:n>")),B.bind("count",ut(c.count,"<a:n>")),B.bind("max",ut(c.max,"<a<n>:n>")),B.bind("min",ut(c.min,"<a<n>:n>")),B.bind("average",ut(c.average,"<a<n>:n>")),B.bind("string",ut(c.string,"<x-b?:s>")),B.bind("substring",ut(c.substring,"<s-nn?:s>")),B.bind("substringBefore",ut(c.substringBefore,"<s-s:s>")),B.bind("substringAfter",ut(c.substringAfter,"<s-s:s>")),B.bind("lowercase",ut(c.lowercase,"<s-:s>")),B.bind("uppercase",ut(c.uppercase,"<s-:s>")),B.bind("length",ut(c.length,"<s-:n>")),B.bind("trim",ut(c.trim,"<s-:s>")),B.bind("pad",ut(c.pad,"<s-ns?:s>")),B.bind("match",ut(c.match,"<s-f<s:o>n?:a<o>>")),B.bind("contains",ut(c.contains,"<s-(sf):b>")),B.bind("replace",ut(c.replace,"<s-(sf)(sf)n?:s>")),B.bind("split",ut(c.split,"<s-(sf)n?:a<s>>")),B.bind("join",ut(c.join,"<a<s>s?:s>")),B.bind("formatNumber",ut(c.formatNumber,"<n-so?:s>")),B.bind("formatBase",ut(c.formatBase,"<n-n?:s>")),B.bind("formatInteger",ut(l.formatInteger,"<n-s:s>")),B.bind("parseInteger",ut(l.parseInteger,"<s-s:n>")),B.bind("number",ut(c.number,"<(nsb)-:n>")),B.bind("floor",ut(c.floor,"<n-:n>")),B.bind("ceil",ut(c.ceil,"<n-:n>")),B.bind("round",ut(c.round,"<n-n?:n>")),B.bind("abs",ut(c.abs,"<n-:n>")),B.bind("sqrt",ut(c.sqrt,"<n-:n>")),B.bind("power",ut(c.power,"<n-n:n>")),B.bind("random",ut(c.random,"<:n>")),B.bind("boolean",ut(c.boolean,"<x-:b>")),B.bind("not",ut(c.not,"<x-:b>")),B.bind("map",ut(c.map,"<af>")),B.bind("zip",ut(c.zip,"<a+>")),B.bind("filter",ut(c.filter,"<af>")),B.bind("single",ut(c.single,"<af?>")),B.bind("reduce",ut(c.foldLeft,"<afj?:j>")),B.bind("sift",ut(c.sift,"<o-f?:o>")),B.bind("keys",ut(c.keys,"<x-:a<s>>")),B.bind("lookup",ut(c.lookup,"<x-s:x>")),B.bind("append",ut(c.append,"<xx:a>")),B.bind("exists",ut(c.exists,"<x:b>")),B.bind("spread",ut(c.spread,"<x-:a<o>>")),B.bind("merge",ut(c.merge,"<a<o>:o>")),B.bind("reverse",ut(c.reverse,"<a:a>")),B.bind("each",ut(c.each,"<o-f:a>")),B.bind("error",ut(c.error,"<s?:x>")),B.bind("assert",ut(c.assert,"<bs?:x>")),B.bind("type",ut(c.type,"<x:s>")),B.bind("sort",ut(c.sort,"<af?:a>")),B.bind("shuffle",ut(c.shuffle,"<a:a>")),B.bind("distinct",ut(c.distinct,"<x:x>")),B.bind("base64encode",ut(c.base64encode,"<s-:s>")),B.bind("base64decode",ut(c.base64decode,"<s-:s>")),B.bind("encodeUrlComponent",ut(c.encodeUrlComponent,"<s-:s>")),B.bind("encodeUrl",ut(c.encodeUrl,"<s-:s>")),B.bind("decodeUrlComponent",ut(c.decodeUrlComponent,"<s-:s>")),B.bind("decodeUrl",ut(c.decodeUrl,"<s-:s>")),B.bind("eval",ut(Nt,"<sx?:x>")),B.bind("toMillis",ut(l.toMillis,"<s-s?:n>")),B.bind("fromMillis",ut(l.fromMillis,"<n-s?s?:s>")),B.bind("clone",ut(Xn,"<(oa)-:o>"));var Pn={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function xe(m){var O=Pn[m.code];if(typeof O<"u"){var D=O.replace(/\{\{\{([^}]+)}}}/g,function(){return m[arguments[1]]});D=D.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(m[arguments[1]])}),m.message=D}}function Si(m,O){var D,L;try{D=E(m,O&&O.recover),L=D.errors,delete D.errors}catch(C){throw xe(C),C}var p=je(B),g=new Date;return p.bind("now",ut(function(C,w){return l.fromMillis(g.getTime(),C,w)},"<s?s?:s>")),p.bind("millis",ut(function(){return g.getTime()},"<:n>")),O&&O.RegexEngine?Si.RegexEngine=O.RegexEngine:Si.RegexEngine=RegExp,{evaluate:function(C,w,V){if(typeof L<"u"){var Q={code:"S0500",position:0};throw xe(Q),Q}if(typeof w<"u"){var ot;ot=je(p);for(var bt in w)ot.bind(bt,w[bt])}else ot=p;ot.bind("$",C),g=new Date,ot.timestamp=g,Array.isArray(C)&&!X(C)&&(C=G(C),C.outerWrapper=!0);var Wt,$t;if(typeof V=="function"){ot.async=!0;var re=function(ue){xe(ue),V(ue,null)},Qt=function(ue){Wt=$t.next(ue),Wt.done?V(null,Wt.value):Wt.value.then(Qt).catch(re)};$t=j(D,C,ot),Wt=$t.next(),Wt.value.then(Qt).catch(re)}else try{for($t=j(D,C,ot),Wt=$t.next();!Wt.done;)Wt=$t.next(Wt.value);return Wt.value}catch(ue){throw xe(ue),ue}},assign:function(C,w){p.bind(C,w)},registerFunction:function(C,w,V){var Q=ut(w,V);p.bind(C,Q)},ast:function(){return D},errors:function(){return L}}}return Si.parser=E,Si}();r.exports=U},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(s,r,h){var l=s("./signature");let c=(()=>{"use strict";var f={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},E={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},k=function(b){var y=0,R=b.length,G=function(dt,z){var J={type:dt,value:z,position:y};return J},X=function(){for(var dt=y,z=0,J,at;y<R;){var B=b.charAt(y);if(B==="/"&&b.charAt(y-1)!=="\\"&&z===0){if(J=b.substring(dt,y),J==="")throw{code:"S0301",stack:new Error().stack,position:y};for(y++,B=b.charAt(y),dt=y;B==="i"||B==="m";)y++,B=b.charAt(y);return at=b.substring(dt,y)+"g",new RegExp(J,at)}(B==="("||B==="["||B==="{")&&b.charAt(y-1)!=="\\"&&z++,(B===")"||B==="]"||B==="}")&&b.charAt(y-1)!=="\\"&&z--,y++}throw{code:"S0302",stack:new Error().stack,position:y}},ct=function(dt){if(y>=R)return null;for(var z=b.charAt(y);y<R&&` 	
\r\v`.indexOf(z)>-1;)y++,z=b.charAt(y);if(z==="/"&&b.charAt(y+1)==="*"){var J=y;for(y+=2,z=b.charAt(y);!(z==="*"&&b.charAt(y+1)==="/");)if(z=b.charAt(++y),y>=R)throw{code:"S0106",stack:new Error().stack,position:J};return y+=2,z=b.charAt(y),ct(dt)}if(dt!==!0&&z==="/")return y++,G("regex",X());if(z==="."&&b.charAt(y+1)===".")return y+=2,G("operator","..");if(z===":"&&b.charAt(y+1)==="=")return y+=2,G("operator",":=");if(z==="!"&&b.charAt(y+1)==="=")return y+=2,G("operator","!=");if(z===">"&&b.charAt(y+1)==="=")return y+=2,G("operator",">=");if(z==="<"&&b.charAt(y+1)==="=")return y+=2,G("operator","<=");if(z==="*"&&b.charAt(y+1)==="*")return y+=2,G("operator","**");if(z==="~"&&b.charAt(y+1)===">")return y+=2,G("operator","~>");if(Object.prototype.hasOwnProperty.call(f,z))return y++,G("operator",z);if(z==='"'||z==="'"){var at=z;y++;for(var B="";y<R;){if(z=b.charAt(y),z==="\\")if(y++,z=b.charAt(y),Object.prototype.hasOwnProperty.call(E,z))B+=E[z];else if(z==="u"){var j=b.substr(y+1,4);if(/^[0-9a-fA-F]+$/.test(j)){var pt=parseInt(j,16);B+=String.fromCharCode(pt),y+=4}else throw{code:"S0104",stack:new Error().stack,position:y}}else throw{code:"S0103",stack:new Error().stack,position:y,token:z};else{if(z===at)return y++,G("string",B);B+=z}y++}throw{code:"S0101",stack:new Error().stack,position:y}}var rt=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,Ft=rt.exec(b.substring(y));if(Ft!==null){var Bt=parseFloat(Ft[0]);if(!isNaN(Bt)&&isFinite(Bt))return y+=Ft[0].length,G("number",Bt);throw{code:"S0102",stack:new Error().stack,position:y,token:Ft[0]}}var Dt;if(z==="`"){y++;var Mt=b.indexOf("`",y);if(Mt!==-1)return Dt=b.substring(y,Mt),y=Mt+1,G("name",Dt);throw y=R,{code:"S0105",stack:new Error().stack,position:y}}for(var Et=y,Rt;;)if(Rt=b.charAt(Et),Et===R||` 	
\r\v`.indexOf(Rt)>-1||Object.prototype.hasOwnProperty.call(f,Rt)){if(b.charAt(y)==="$")return Dt=b.substring(y+1,Et),y=Et,G("variable",Dt);switch(Dt=b.substring(y,Et),y=Et,Dt){case"or":case"in":case"and":return G("operator",Dt);case"true":return G("value",!0);case"false":return G("value",!1);case"null":return G("value",null);default:return y===R&&Dt===""?null:G("name",Dt)}}else Et++};return ct},U=function(b,y){var R,G,X={},ct=[],dt=function(){var A=[];R.id!=="(end)"&&A.push({type:R.type,value:R.value,position:R.position});for(var P=G();P!==null;)A.push(P),P=G();return A},z={nud:function(){var A={code:"S0211",token:this.value,position:this.position};if(y)return A.remaining=dt(),A.type="error",ct.push(A),A;throw A.stack=new Error().stack,A}},J=function(A,P){var Z=X[A];return P=P||0,Z?P>=Z.lbp&&(Z.lbp=P):(Z=Object.create(z),Z.id=Z.value=A,Z.lbp=P,X[A]=Z),Z},at=function(A){if(y){A.remaining=dt(),ct.push(A);var P=X["(error)"];return R=Object.create(P),R.error=A,R.type="(error)",R}else throw A.stack=new Error().stack,A},B=function(A,P){if(A&&R.id!==A){var Z;R.id==="(end)"?Z="S0203":Z="S0202";var ht={code:Z,position:R.position,token:R.value,value:A};return at(ht)}var Ot=G(P);if(Ot===null)return R=X["(end)"],R.position=b.length,R;var $=Ot.value,F=Ot.type,W;switch(F){case"name":case"variable":W=X["(name)"];break;case"operator":if(W=X[$],!W)return at({code:"S0204",stack:new Error().stack,position:Ot.position,token:$});break;case"string":case"number":case"value":W=X["(literal)"];break;case"regex":F="regex",W=X["(regex)"];break;default:return at({code:"S0205",stack:new Error().stack,position:Ot.position,token:$})}return R=Object.create(W),R.value=$,R.type=F,R.position=Ot.position,R},j=function(A){var P,Z=R;for(B(null,!0),P=Z.nud();A<R.lbp;)Z=R,B(),P=Z.led(P);return P},pt=function(A){var P=J(A,0);P.nud=function(){return this}},rt=function(A,P,Z){var ht=P||f[A],Ot=J(A,ht);return Ot.led=Z||function($){return this.lhs=$,this.rhs=j(ht),this.type="binary",this},Ot},Ft=function(A,P,Z){var ht=J(A,P);return ht.led=Z,ht},Bt=function(A,P){var Z=J(A);return Z.nud=P||function(){return this.expression=j(70),this.type="unary",this},Z};pt("(end)"),pt("(name)"),pt("(literal)"),pt("(regex)"),J(":"),J(";"),J(","),J(")"),J("]"),J("}"),J(".."),rt("."),rt("+"),rt("-"),rt("*"),rt("/"),rt("%"),rt("="),rt("<"),rt(">"),rt("!="),rt("<="),rt(">="),rt("&"),rt("and"),rt("or"),rt("in"),pt("and"),pt("or"),pt("in"),Bt("-"),rt("~>"),Ft("(error)",10,function(A){return this.lhs=A,this.error=R.error,this.remaining=dt(),this.type="error",this}),Bt("*",function(){return this.type="wildcard",this}),Bt("**",function(){return this.type="descendant",this}),Bt("%",function(){return this.type="parent",this}),rt("(",f["("],function(A){if(this.procedure=A,this.type="function",this.arguments=[],R.id!==")")for(;R.type==="operator"&&R.id==="?"?(this.type="partial",this.arguments.push(R),B("?")):this.arguments.push(j(0)),R.id===",";)B(",");if(B(")",!0),A.type==="name"&&(A.value==="function"||A.value==="\u03BB")){if(this.arguments.forEach(function($,F){if($.type!=="variable")return at({code:"S0208",stack:new Error().stack,position:$.position,token:$.value,value:F+1})}),this.type="lambda",R.id==="<"){for(var P=R.position,Z=1,ht="<";Z>0&&R.id!=="{"&&R.id!=="(end)";){var Ot=B();Ot.id===">"?Z--:Ot.id==="<"&&Z++,ht+=Ot.value}B(">");try{this.signature=l(ht)}catch($){return $.position=P+$.offset,at($)}}B("{"),this.body=j(0),B("}")}return this}),Bt("(",function(){for(var A=[];R.id!==")"&&(A.push(j(0)),R.id===";");)B(";");return B(")",!0),this.type="block",this.expressions=A,this}),Bt("[",function(){var A=[];if(R.id!=="]")for(;;){var P=j(0);if(R.id===".."){var Z={type:"binary",value:"..",position:R.position,lhs:P};B(".."),Z.rhs=j(0),P=Z}if(A.push(P),R.id!==",")break;B(",")}return B("]",!0),this.expressions=A,this.type="unary",this}),rt("[",f["["],function(A){if(R.id==="]"){for(var P=A;P&&P.type==="binary"&&P.value==="[";)P=P.lhs;return P.keepArray=!0,B("]"),A}else return this.lhs=A,this.rhs=j(f["]"]),this.type="binary",B("]",!0),this}),rt("^",f["^"],function(A){B("(");for(var P=[];;){var Z={descending:!1};if(R.id==="<"?B("<"):R.id===">"&&(Z.descending=!0,B(">")),Z.expression=j(0),P.push(Z),R.id!==",")break;B(",")}return B(")"),this.lhs=A,this.rhs=P,this.type="binary",this});var Dt=function(A){var P=[];if(R.id!=="}")for(;;){var Z=j(0);B(":");var ht=j(0);if(P.push([Z,ht]),R.id!==",")break;B(",")}return B("}",!0),typeof A>"u"?(this.lhs=P,this.type="unary"):(this.lhs=A,this.rhs=P,this.type="binary"),this};Bt("{",Dt),rt("{",f["{"],Dt),Ft(":=",f[":="],function(A){return A.type!=="variable"?at({code:"S0212",stack:new Error().stack,position:A.position,token:A.value}):(this.lhs=A,this.rhs=j(f[":="]-1),this.type="binary",this)}),rt("@",f["@"],function(A){return this.lhs=A,this.rhs=j(f["@"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),rt("#",f["#"],function(A){return this.lhs=A,this.rhs=j(f["#"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),rt("?",f["?"],function(A){return this.type="condition",this.condition=A,this.then=j(0),R.id===":"&&(B(":"),this.else=j(0)),this}),Bt("|",function(){return this.type="transform",this.pattern=j(0),B("|"),this.update=j(0),R.id===","&&(B(","),this.delete=j(0)),B("|"),this});var Mt=function(A){var P;if(A.type==="function"&&!A.predicate){var Z={type:"lambda",thunk:!0,arguments:[],position:A.position};Z.body=A,P=Z}else if(A.type==="condition")A.then=Mt(A.then),typeof A.else<"u"&&(A.else=Mt(A.else)),P=A;else if(A.type==="block"){var ht=A.expressions.length;ht>0&&(A.expressions[ht-1]=Mt(A.expressions[ht-1])),P=A}else P=A;return P},Et=0,Rt=0,le=[],Tt=function(A,P){switch(A.type){case"name":case"wildcard":P.level--,P.level===0&&(typeof A.ancestor>"u"||(le[P.index].slot.label=A.ancestor.label),A.ancestor=P,A.tuple=!0);break;case"parent":P.level++;break;case"block":A.expressions.length>0&&(A.tuple=!0,P=Tt(A.expressions[A.expressions.length-1],P));break;case"path":A.tuple=!0;var Z=A.steps.length-1;for(P=Tt(A.steps[Z--],P);P.level>0&&Z>=0;)P=Tt(A.steps[Z--],P);break;default:throw{code:"S0217",token:A.type,position:A.position}}return P},mt=function(A,P){if(typeof P.seekingParent<"u"||P.type==="parent"){var Z=typeof P.seekingParent<"u"?P.seekingParent:[];P.type==="parent"&&Z.push(P.slot),typeof A.seekingParent>"u"?A.seekingParent=Z:Array.prototype.push.apply(A.seekingParent,Z)}},ne=function(A){var P=A.steps.length-1,Z=A.steps[P],ht=typeof Z.seekingParent<"u"?Z.seekingParent:[];Z.type==="parent"&&ht.push(Z.slot);for(var Ot=0;Ot<ht.length;Ot++){var $=ht[Ot];for(P=A.steps.length-2;$.level>0;){if(P<0){typeof A.seekingParent>"u"?A.seekingParent=[$]:A.seekingParent.push($);break}for(var F=A.steps[P--];P>=0&&F.focus&&A.steps[P].focus;)F=A.steps[P--];$=Tt(F,$)}}},At=function(A){var P;switch(A.type){case"binary":switch(A.value){case".":var Z=At(A.lhs);Z.type==="path"?P=Z:P={type:"path",steps:[Z]},Z.type==="parent"&&(P.seekingParent=[Z.slot]);var ht=At(A.rhs);ht.type==="function"&&ht.procedure.type==="path"&&ht.procedure.steps.length===1&&ht.procedure.steps[0].type==="name"&&P.steps[P.steps.length-1].type==="function"&&(P.steps[P.steps.length-1].nextFunction=ht.procedure.steps[0].value),ht.type==="path"?Array.prototype.push.apply(P.steps,ht.steps):(typeof ht.predicate<"u"&&(ht.stages=ht.predicate,delete ht.predicate),P.steps.push(ht)),P.steps.filter(function(q){if(q.type==="number"||q.type==="value")throw{code:"S0213",stack:new Error().stack,position:q.position,value:q.value};return q.type==="string"}).forEach(function(q){q.type="name"}),P.steps.filter(function(q){return q.keepArray===!0}).length>0&&(P.keepSingletonArray=!0);var Ot=P.steps[0];Ot.type==="unary"&&Ot.value==="["&&(Ot.consarray=!0);var $=P.steps[P.steps.length-1];$.type==="unary"&&$.value==="["&&($.consarray=!0),ne(P);break;case"[":P=At(A.lhs);var F=P,W="predicate";if(P.type==="path"&&(F=P.steps[P.steps.length-1],W="stages"),typeof F.group<"u")throw{code:"S0209",stack:new Error().stack,position:A.position};typeof F[W]>"u"&&(F[W]=[]);var M=At(A.rhs);typeof M.seekingParent<"u"&&(M.seekingParent.forEach(q=>{q.level===1?Tt(F,q):q.level--}),mt(F,M)),F[W].push({type:"filter",expr:M,position:A.position});break;case"{":if(P=At(A.lhs),typeof P.group<"u")throw{code:"S0210",stack:new Error().stack,position:A.position};P.group={lhs:A.rhs.map(function(q){return[At(q[0]),At(q[1])]}),position:A.position};break;case"^":P=At(A.lhs),P.type!=="path"&&(P={type:"path",steps:[P]});var tt={type:"sort",position:A.position};tt.terms=A.rhs.map(function(q){var gt=At(q.expression);return mt(tt,gt),{descending:q.descending,expression:gt}}),P.steps.push(tt),ne(P);break;case":=":P={type:"bind",value:A.value,position:A.position},P.lhs=At(A.lhs),P.rhs=At(A.rhs),mt(P,P.rhs);break;case"@":if(P=At(A.lhs),F=P,P.type==="path"&&(F=P.steps[P.steps.length-1]),typeof F.stages<"u"||typeof F.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:A.position};if(F.type==="sort")throw{code:"S0216",stack:new Error().stack,position:A.position};A.keepArray&&(F.keepArray=!0),F.focus=A.rhs.value,F.tuple=!0;break;case"#":P=At(A.lhs),F=P,P.type==="path"?F=P.steps[P.steps.length-1]:(P={type:"path",steps:[P]},typeof F.predicate<"u"&&(F.stages=F.predicate,delete F.predicate)),typeof F.stages>"u"?F.index=A.rhs.value:F.stages.push({type:"index",value:A.rhs.value,position:A.position}),F.tuple=!0;break;case"~>":P={type:"apply",value:A.value,position:A.position},P.lhs=At(A.lhs),P.rhs=At(A.rhs);break;default:P={type:A.type,value:A.value,position:A.position},P.lhs=At(A.lhs),P.rhs=At(A.rhs),mt(P,P.lhs),mt(P,P.rhs)}break;case"unary":P={type:A.type,value:A.value,position:A.position},A.value==="["?P.expressions=A.expressions.map(function(q){var gt=At(q);return mt(P,gt),gt}):A.value==="{"?P.lhs=A.lhs.map(function(q){var gt=At(q[0]);mt(P,gt);var Kt=At(q[1]);return mt(P,Kt),[gt,Kt]}):(P.expression=At(A.expression),A.value==="-"&&P.expression.type==="number"?(P=P.expression,P.value=-P.value):mt(P,P.expression));break;case"function":case"partial":P={type:A.type,name:A.name,value:A.value,position:A.position},P.arguments=A.arguments.map(function(q){var gt=At(q);return mt(P,gt),gt}),P.procedure=At(A.procedure);break;case"lambda":P={type:A.type,arguments:A.arguments,signature:A.signature,position:A.position};var it=At(A.body);P.body=Mt(it);break;case"condition":P={type:A.type,position:A.position},P.condition=At(A.condition),mt(P,P.condition),P.then=At(A.then),mt(P,P.then),typeof A.else<"u"&&(P.else=At(A.else),mt(P,P.else));break;case"transform":P={type:A.type,position:A.position},P.pattern=At(A.pattern),P.update=At(A.update),typeof A.delete<"u"&&(P.delete=At(A.delete));break;case"block":P={type:A.type,position:A.position},P.expressions=A.expressions.map(function(q){var gt=At(q);return mt(P,gt),(gt.consarray||gt.type==="path"&&gt.steps[0].consarray)&&(P.consarray=!0),gt});break;case"name":P={type:"path",steps:[A]},A.keepArray&&(P.keepSingletonArray=!0);break;case"parent":P={type:"parent",slot:{label:"!"+Et++,level:1,index:Rt++}},le.push(P);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":P=A;break;case"operator":if(A.value==="and"||A.value==="or"||A.value==="in")A.type="name",P=At(A);else if(A.value==="?")P=A;else throw{code:"S0201",stack:new Error().stack,position:A.position,token:A.value};break;case"error":P=A,A.lhs&&(P=At(A.lhs));break;default:var K="S0206";A.id==="(end)"&&(K="S0207");var Y={code:K,position:A.position,token:A.value};if(y)return ct.push(Y),{type:"error",error:Y};throw Y.stack=new Error().stack,Y}return A.keepArray&&(P.keepArray=!0),P};G=k(b),B();var Vt=j(0);if(R.id!=="(end)"){var ae={code:"S0201",position:R.position,token:R.value};at(ae)}if(Vt=At(Vt),Vt.type==="parent"||typeof Vt.seekingParent<"u")throw{code:"S0217",token:Vt.type,position:Vt.position};return ct.length>0&&(Vt.errors=ct),Vt};return U})();r.exports=c},{"./signature":5}],5:[function(s,r,h){var l=s("./utils");let c=(()=>{"use strict";var f={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function E(k){for(var U=1,b=[],y={},R=y;U<k.length;){var G=k.charAt(U);if(G===":")break;var X=function(){b.push(y),R=y,y={}},ct=function(rt,Ft,Bt,Dt){for(var Mt=1,Et=Ft;Et<rt.length;)if(Et++,G=rt.charAt(Et),G===Dt){if(Mt--,Mt===0)break}else G===Bt&&Mt++;return Et};switch(G){case"s":case"n":case"b":case"l":case"o":y.regex="["+G+"m]",y.type=G,X();break;case"a":y.regex="[asnblfom]",y.type=G,y.array=!0,X();break;case"f":y.regex="f",y.type=G,X();break;case"j":y.regex="[asnblom]",y.type=G,X();break;case"x":y.regex="[asnblfom]",y.type=G,X();break;case"-":R.context=!0,R.contextRegex=new RegExp(R.regex),R.regex+="?";break;case"?":case"+":R.regex+=G;break;case"(":var dt=ct(k,U,"(",")"),z=k.substring(U+1,dt);if(z.indexOf("<")===-1)y.regex="["+z+"m]";else throw{code:"S0402",stack:new Error().stack,value:z,offset:U};y.type="("+z+")",U=dt,X();break;case"<":if(R.type==="a"||R.type==="f"){var J=ct(k,U,"<",">");R.subtype=k.substring(U+1,J),U=J}else throw{code:"S0401",stack:new Error().stack,value:R.type,offset:U};break}U++}var at="^"+b.map(function(rt){return"("+rt.regex+")"}).join("")+"$",B=new RegExp(at),j=function(rt){var Ft;if(l.isFunction(rt))Ft="f";else{var Bt=typeof rt;switch(Bt){case"string":Ft="s";break;case"number":Ft="n";break;case"boolean":Ft="b";break;case"object":rt===null?Ft="l":Array.isArray(rt)?Ft="a":Ft="o";break;case"undefined":default:Ft="m"}}return Ft},pt=function(rt,Ft){for(var Bt="^",Dt=0,Mt=0;Mt<b.length;Mt++){Bt+=b[Mt].regex;var Et=Ft.match(Bt);if(Et===null)throw{code:"T0410",stack:new Error().stack,value:rt[Dt],index:Dt+1};Dt=Et[0].length}throw{code:"T0410",stack:new Error().stack,value:rt[Dt],index:Dt+1}};return{definition:k,validate:function(rt,Ft){var Bt="";rt.forEach(function(Rt){Bt+=j(Rt)});var Dt=B.exec(Bt);if(Dt){var Mt=[],Et=0;return b.forEach(function(Rt,le){var Tt=rt[Et],mt=Dt[le+1];if(mt==="")if(Rt.context&&Rt.contextRegex){var ne=j(Ft);if(Rt.contextRegex.test(ne))Mt.push(Ft);else throw{code:"T0411",stack:new Error().stack,value:Ft,index:Et+1}}else Mt.push(Tt),Et++;else mt.split("").forEach(function(At){if(Rt.type==="a"){if(At==="m")Tt=void 0;else{Tt=rt[Et];var Vt=!0;if(typeof Rt.subtype<"u"){if(At!=="a"&&mt!==Rt.subtype)Vt=!1;else if(At==="a"&&Tt.length>0){var ae=j(Tt[0]);if(ae!==Rt.subtype.charAt(0))Vt=!1;else{var A=Tt.filter(function(P){return j(P)!==ae});Vt=A.length===0}}}if(!Vt)throw{code:"T0412",stack:new Error().stack,value:Tt,index:Et+1,type:f[Rt.subtype]};At!=="a"&&(Tt=[Tt])}Mt.push(Tt),Et++}else Mt.push(Tt),Et++})}),Mt}pt(rt,Bt)}}}return E})();r.exports=c},{"./utils":6}],6:[function(s,r,h){let l=(()=>{"use strict";function c(J){var at=!1;if(typeof J=="number"&&(at=!isNaN(J),at&&!isFinite(J)))throw{code:"D1001",value:J,stack:new Error().stack};return at}function f(J){var at=!1;return Array.isArray(J)&&(at=J.filter(function(B){return typeof B!="string"}).length===0),at}function E(J){var at=!1;return Array.isArray(J)&&(at=J.filter(function(B){return!c(B)}).length===0),at}function k(){var J=[];return J.sequence=!0,arguments.length===1&&J.push(arguments[0]),J}function U(J){return J.sequence===!0&&Array.isArray(J)}function b(J){return J&&(J._jsonata_function===!0||J._jsonata_lambda===!0)||typeof J=="function"}function y(J){var at=typeof J.arity=="number"?J.arity:typeof J.implementation=="function"?J.implementation.length:typeof J.length=="number"?J.length:J.arguments.length;return at}function R(J){return J&&J._jsonata_lambda===!0}var G=typeof Symbol=="function"?Symbol:{},X=G.iterator||"@@iterator";function ct(J){return typeof J=="object"&&J!==null&&X in J&&"next"in J&&typeof J.next=="function"}function dt(J,at){if(J===at)return!0;if(typeof J=="object"&&typeof at=="object"&&J!==null&&at!==null){if(Array.isArray(J)&&Array.isArray(at)){if(J.length!==at.length)return!1;for(var B=0;B<J.length;B++)if(!dt(J[B],at[B]))return!1;return!0}var j=Object.getOwnPropertyNames(J),pt=Object.getOwnPropertyNames(at);if(j.length!==pt.length)return!1;for(j=j.sort(),pt=pt.sort(),B=0;B<j.length;B++)if(j[B]!==pt[B])return!1;for(B=0;B<j.length;B++){var rt=j[B];if(!dt(J[rt],at[rt]))return!1}return!0}return!1}function z(J){var at=[];for(let B of J)at.push(B);return at}return{isNumeric:c,isArrayOfStrings:f,isArrayOfNumbers:E,createSequence:k,isSequence:U,isFunction:b,isLambda:R,isIterable:ct,getFunctionArity:y,isDeepEqual:dt,stringToArray:z}})();r.exports=l},{}]},{},[3])(3)})});var ih=H(dn=>{"use strict";var $b=dn&&dn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(dn,"__esModule",{value:!0});dn.locEnd=dn.locStart=dn.parse=void 0;var Jb=$b(wx()),Xb=i=>{try{let t=[],e=i.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let r of e){let h=r.index;if(h===void 0)continue;let l=r[1];!l||t.push({position:h,value:l.trim()})}let s=(0,Jb.default)(i).ast();return Object.assign(Object.assign({},s),{jsonataComments:t})}catch(t){let e=t,r=["code","position","token"].filter(l=>e[l]!==void 0).map(l=>`${l}: ${e[l]}`),h=[e.message,...r].join(", ");throw new Error(h)}};dn.parse=Xb;var Zb=i=>i.position;dn.locStart=Zb;var t0=()=>0;dn.locEnd=t0});var Hx=H(mn=>{"use strict";var e0=mn&&mn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),i0=mn&&mn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),n0=mn&&mn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&e0(t,i,e);return i0(t,i),t};Object.defineProperty(mn,"__esModule",{value:!0});mn.print=void 0;var s0=n0(require("prettier")),Fx=[],Bo=-1,r0=(i,t,e)=>{var s,r;let h=i.getValue();"jsonataComments"in h&&(Bo=-1,Fx=h.jsonataComments);let l=(r=h.type==="path"?(s=h.steps[0])===null||s===void 0?void 0:s.position:h.position)!==null&&r!==void 0?r:Bo,c=Fx.filter(k=>k.position>Bo&&k.position<l);Bo=l;let f=c.map(a0),E=o0(h,i,t,e);return f.length>0?ke([f,E]):E};mn.print=r0;var o0=(i,...t)=>{if(i.type==="binary")return h0(i,...t);if(i.type==="function")return Bx(i,...t);if(i.type==="partial")return Bx(i,...t);if(i.type==="variable")return d0(i,...t);if(i.type==="wildcard")return _0(i,...t);if(i.type==="descendant")return m0(i,...t);if(i.type==="operator")return p0(i,...t);if(i.type==="number")return u0(i,...t);if(i.type==="string")return c0(i,...t);if(i.type==="name")return l0(i,...t);if(i.type==="filter")return T0(i,...t);if(i.type==="bind")return g0(i,...t);if(i.type==="lambda")return E0(i,...t);if(i.type==="condition")return k0(i,...t);if(i.type==="value")return x0(i,...t);if(i.type==="block")return y0(i,...t);if(i.type==="path")return f0(i,...t);if(i.type==="apply")return C0(i,...t);if(i.type==="sort")return N0(i,...t);if(i.type==="unary")return A0(i,...t);if(i.type==="parent")return P0(i,...t);if(i.type==="regex")return R0(i,...t);throw new Error(`Unknown node type: ${i.type}`)},{group:ke,indent:Ei,join:qs,line:pn,hardline:Ns,breakParent:nh,softline:_n}=s0.doc.builders,a0=i=>ke(["/* ",i.value," */",Ns]),h0=(i,t,e,s)=>i.value===".."?ke([s("lhs"),Ei([_n,i.value,s("rhs")])]):ke([s("lhs"),Ei([pn,i.value," ",s("rhs")])]),l0=(i,t,e,s)=>ke([w0(i.value),Ii(i,t,e,s),Fi(i),Bi(i),Uo(i,t,e,s),bi(i,t,e,s),Ai(i)]),u0=(i,t,e,s)=>ke([JSON.stringify(i.value),Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),c0=(i,t,e,s)=>ke([JSON.stringify(i.value),Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),f0=(i,t,e,s)=>{let r=i.steps.flatMap((h,l)=>l===0?s(["steps",l]):h.type==="sort"?Ei(["^",s(["steps",l])]):Ei([_n,".",s(["steps",l])]));return ke([...r,Ii(i,t,e,s)])},Bx=(i,t,e,s)=>ke([s("procedure"),"(",Ux(i,t,e,s),")",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),Ux=(i,t,e,s)=>{var r;if(!(!((r=i.arguments)===null||r===void 0)&&r.length))return"";if(i.arguments.length===1)return s(["arguments",0]);let h=qs([",",pn],t.map(s,"arguments"));return[Ei([_n,h]),_n]},d0=(i,t,e,s)=>ke(["$",i.value,Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i),Uo(i,t,e,s)]),p0=i=>i.value,_0=i=>i.value,m0=i=>i.value,T0=(i,t,e,s)=>ke(["[",Ei([_n,s("expr")]),_n,"]"]),g0=(i,t,e,s)=>ke([s("lhs")," ",i.value," ",s("rhs")]),E0=(i,t,e,s)=>i.thunk?s("body"):ke(["function(",Ux(i,t,e,s),") {",Ei([pn,s("body")]),pn,"}",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),k0=(i,t,e,s)=>{let r=t.getParentNode(),l=r?.type==="condition"?[Ns,nh]:pn;return ke([s("condition"),Ei([l,"? ",s("then")]),i.else?Ei([l,": ",s("else")]):""])},x0=(i,t,e,s)=>ke([v0(i,t,e,s),Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),v0=i=>i.value===null?"null":i.value===!1?"false":i.value===!0?"true":JSON.stringify(i.value),y0=(i,t,e,s)=>{if(i.expressions.length===0)return ke(["()",bi(i,t,e,s),Ai(i)]);if(i.expressions.length===1)return ke(["(",s(["expressions",0]),")",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i),Uo(i,t,e,s)]);let r=qs([";",Ns],t.map(s,"expressions"));return ke(["(",Ei([Ns,r]),Ns,")",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)])},C0=(i,t,e,s)=>ke([s("lhs"),Ei([pn,i.value," ",s("rhs")])]),N0=(i,t,e,s)=>{let r=i.terms.map((l,c)=>[b0(l),s(["terms",c,"expression"])]),h=qs([",",pn],r);return ke(["(",Ei([_n,h]),_n,")"])},b0=i=>i.descending?">":"<",A0=(i,t,e,s)=>{if(i.value==="{")return I0(i,t,e,s);if(i.value==="[")return O0(i,t,e,s);if(i.value==="-")return L0(i,t,e,s);throw new Error("Unhandled unary node "+i.value)},I0=(i,t,e,s)=>ke(["{",S0(i,t,e,s),"}",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)]),S0=(i,t,e,s)=>{if(i.lhs.length===0)return"";let r=i.lhs.map((f,E)=>ke([s(["lhs",E,0]),": ",s(["lhs",E,1])])),l=i.lhs.some(f=>Mx(f[1]))?[Ns,nh]:pn,c=qs([",",l],r);return[Ei([l,c]),l]},Mx=i=>{if(i.type!=="unary")return!1;if(i.value==="["||i.value==="{")return!0},O0=(i,t,e,s)=>{let r=qs([",",pn],t.map(s,"expressions"));return ke(["[",Ei([_n,r]),_n,"]",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)])},L0=(i,t,e,s)=>ke(["-",s("expression")]),P0=(i,t,e,s)=>ke(["%",Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i),Uo(i,t,e,s)]),D0=["i","m"],R0=(i,t,e,s)=>{let r=D0.filter(h=>i.value.flags.includes(h)).join("");return ke([`/${i.value.source}/${r}`,Ii(i,t,e,s),Fi(i),Bi(i),bi(i,t,e,s),Ai(i)])},Fi=i=>i.focus?"@$"+i.focus:"",Bi=i=>i.index?"#$"+i.index:"",bi=(i,t,e,s)=>i.predicate?t.map(s,"predicate"):"",Uo=(i,t,e,s)=>i.stages?t.map(s,"stages"):"",Ai=i=>i.keepArray?"[]":"",Ii=(i,t,e,s)=>{if(i.group===void 0)return"";if(i.group.lhs.length===0)return"{}";let r=i.group.lhs.map((f,E)=>ke([s(["group","lhs",E,0]),": ",s(["group","lhs",E,1])])),l=i.group.lhs.some(f=>Mx(f[1]))?[Ns,nh]:pn,c=qs([",",l],r);return ke(["{",Ei([l,c]),l,"}"])},w0=i=>i.startsWith("`")&&i.endsWith("`")?i:i.startsWith('"')&&i.endsWith('"')?`\`${i.slice(1,-1)}\``:/\s/.test(i)?`\`${i}\``:["null","false","true"].includes(i)?`\`${i}\``:/^\d+/.test(i)?`\`${i}\``:/[^a-zA-Z_[\]\d]/.test(i)?`\`${i}\``:i});var Gx=H(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.printers=di.parsers=di.languages=di.AST_FORMAT_NAME=di.AST_PARSER_NAME=void 0;var sh=ih(),F0=Hx();di.AST_PARSER_NAME="JSONata";di.AST_FORMAT_NAME="JSONataASTNode";di.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[di.AST_PARSER_NAME]}];di.parsers={[di.AST_PARSER_NAME]:{astFormat:di.AST_FORMAT_NAME,parse:sh.parse,locStart:sh.locStart,locEnd:sh.locEnd}};di.printers={[di.AST_FORMAT_NAME]:{print:F0.print}}});var Yx=H(ji=>{"use strict";var B0=ji&&ji.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),U0=ji&&ji.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),qx=ji&&ji.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&B0(t,i,e);return U0(t,i),t};Object.defineProperty(ji,"__esModule",{value:!0});ji.serializeJsonata=ji.formatJsonata=void 0;var Ws=qx(Gx()),Mo=qx(require("prettier")),Vx=ih();function M0(i,t){return Wx(),Mo.format(i,Object.assign({parser:Ws.AST_PARSER_NAME,plugins:[Ws],printWidth:150,tabWidth:2,useTabs:!1},t))}ji.formatJsonata=M0;function H0(i,t){let e=G0(i);return Wx(),Mo.format("ignore text input",Object.assign({parser:Ws.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}ji.serializeJsonata=H0;var G0=i=>Object.assign(Object.assign({},Ws),{parsers:{[Ws.AST_PARSER_NAME]:{astFormat:Ws.AST_FORMAT_NAME,parse:()=>i,locStart:Vx.locStart,locEnd:Vx.locEnd}}});function Wx(){"clearConfigCache"in Mo&&Mo.clearConfigCache()}});function Qx(i){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete i[t]}),i}function zx(){return oh}function $x(i){return(0,Kx.formatJsonata)(i,{printWidth:20})}function Go(i){oh=Qx(Object.assign({},i,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:i.plugins})),rh=Qx(Object.assign({},i,{parser:"php",plugins:[jx.default]}))}function Jx(i){return Ho.default.format(i,oh)}function ah(i){let t=Ho.default.format(i,rh).trim();return t=t.substring(5),i.endsWith(";")==!1&&t.endsWith(";")&&(t=t.substring(0,t.length-1)),t.trim()}function Xx(i){return Ho.default.format(i,rh).trim().trim()}var Ho,QP,jx,Kx,rh,oh,hh=Pt(()=>{"use strict";Ho=rn(require("prettier")),QP=rn(Zx()),jx=rn(Dx()),Kx=rn(Yx())});var Vo,tv=Pt(()=>{"use strict";Ox();Lx();hh();Vo=class extends wo{constructor(t,e){super(),Go(t),this.withHtmlFormatter(Jx).withPhpFormatter(ah).withBlockPhpFormatter(ah).withPhpTagFormatter(Xx).withJsonFormatter($x).withTransformOptions(e).withPreFormatter(s=>{var r,h,l;if(s.errors.hasStructureErrors()){let c=s.errors.getFirstStructureError(),f=s.getLinesAround((l=(h=(r=c.node)==null?void 0:r.startPosition)==null?void 0:h.line)!=null?l:1),E=Ro.printError(c,f);throw new SyntaxError(E)}return null})}}});var Zx=H((iD,nv)=>{Sn();Sx();tv();hh();var ev,lh,iv,uh=null,V0={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(i,t,e){Go(e),ev=e,uh=Ix(__dirname),lh=uh,iv=uh,lh.tabSize=zx().tabWidth;let s=new be;return s.getParser().withParserOptions(iv),s.loadString(i)},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(i){let t=i.stack[0];return new Vo(ev,lh).formatDocument(t)}}},defaultOptions:{tabWidth:4}};nv.exports=V0});module.exports=Zx();
