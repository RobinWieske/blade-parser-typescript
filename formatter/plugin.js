"use strict";var cN=Object.create;var Bc=Object.defineProperty;var fN=Object.getOwnPropertyDescriptor;var dN=Object.getOwnPropertyNames;var pN=Object.getPrototypeOf,_N=Object.prototype.hasOwnProperty;var St=(i,t)=>()=>(i&&(t=i(i=0)),t);var H=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var mN=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of dN(t))!_N.call(i,r)&&r!==e&&Bc(i,r,{get:()=>t[r],enumerable:!(s=fN(t,r))||s.enumerable});return i};var Xi=(i,t,e)=>(e=i!=null?cN(pN(i)):{},mN(t||!i||!i.__esModule?Bc(e,"default",{value:i,enumerable:!0}):e,i));function Mc(i){return(typeof i=="number"||typeof i=="string"&&gN.indexOf(i.slice(-1))===-1)&&i!==""&&!isNaN(i)}var gN,Uc=St(()=>{"use strict";gN=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var Y,je=St(()=>{"use strict";Uc();Y=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,s){return t.substr(e,s)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return Mc(t)}static substringCount(t,e){let s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(s,"gi"))||[]).length}static lastWord(t){let e=t.split(""),s=[];for(let r=e.length;r>=0&&e[r]!=" ";r--)s.push(e[r]);return s.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return Y.breakByNewLine(Y.normalizeLineEndings(t)).forEach(r=>{r.trim().length>0&&e.push(r)}),e.join(`
`)}static replaceAllInString(t,e,s){return t.replace(new RegExp(e,"g"),s)}static getTrimmedMatch(t,e,s){let r=t.exec(e);if(r==null||r.length<s)return null;let h=r[s].trim();return h.length==0?null:h}static assertMatchIs(t,e,s,r){let h=Y.getTrimmedMatch(t,e,s);return h!=null&&h==r}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=Y.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=Y.breakByNewLine(t);return e.length==0?"":e[0]}static collapse(t){let e=Y.breakByNewLine(t),s="";for(let r=0;r<e.length;r++){let h=e[r].trim();if(r+1<e.length){let l=e[r+1].trim();if(l.length>0&&Y.ctypePunct(l[0])){let c=l[0];s+=h,(c=="?"||c==":"||c=="&")&&(s+=" ")}else s+=h+" "}else s+=h}return s.trimRight()}static makeSlug(t){t<=2&&(t=7);let e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length;for(let h=0;h<t-1;h++)e+=s.charAt(Math.floor(Math.random()*r));return"B"+e+"B"}static replaceWithFillerExceptNewlines(t){return t.replace(/./g,s=>s===`
`?s:"P")}}});function ze(i){return i==null?!1:i=='"'||i=="'"}var bn=St(()=>{"use strict"});function ns(i){let t=i.getCurrent();for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=Z.String_EscapeCharacter));i.incrementIndex());}function Di(i){let t=i.getCurrent(),e=[];for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=Z.String_EscapeCharacter));i.incrementIndex())e.push(i.getCurrent());return{value:e.join(""),endedOn:i.getCurrentIndex()}}var Nn=St(()=>{"use strict";un()});var ss,za=St(()=>{"use strict";je();bn();Nn();ss=class{constructor(){this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.strings=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}static fromText(t){return new ss().remove(t)}getStrings(){return this.strings}remove(t){for(this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ze(this.cur)){let s=Di(this);if(this.strings.push(s.value),this.currentIndex=s.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}let e=[];for(let s=0;s<this.currentContent.length;s++){let r=this.currentContent[s];if(s==0&&r=="@"){e.push(r);continue}if(r!="."&&Y.ctypePunct(r))break;e.push(r)}return e.join("")}}});var $a=H(Ka=>{"use strict";Object.defineProperty(Ka,"__esModule",{value:!0});Ka.default=xN;var TN=kN(require("crypto"));function kN(i){return i&&i.__esModule?i:{default:i}}var ao=new Uint8Array(256),oo=ao.length;function xN(){return oo>ao.length-16&&(TN.default.randomFillSync(ao),oo=0),ao.slice(oo,oo+=16)}});var Hc=H(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.default=void 0;var EN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;ho.default=EN});var _r=H(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.default=void 0;var vN=yN(Hc());function yN(i){return i&&i.__esModule?i:{default:i}}function CN(i){return typeof i=="string"&&vN.default.test(i)}var bN=CN;lo.default=bN});var mr=H(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.default=void 0;var NN=AN(_r());function AN(i){return i&&i.__esModule?i:{default:i}}var Ti=[];for(let i=0;i<256;++i)Ti.push((i+256).toString(16).substr(1));function IN(i,t=0){let e=(Ti[i[t+0]]+Ti[i[t+1]]+Ti[i[t+2]]+Ti[i[t+3]]+"-"+Ti[i[t+4]]+Ti[i[t+5]]+"-"+Ti[i[t+6]]+Ti[i[t+7]]+"-"+Ti[i[t+8]]+Ti[i[t+9]]+"-"+Ti[i[t+10]]+Ti[i[t+11]]+Ti[i[t+12]]+Ti[i[t+13]]+Ti[i[t+14]]+Ti[i[t+15]]).toLowerCase();if(!(0,NN.default)(e))throw TypeError("Stringified UUID is invalid");return e}var SN=IN;uo.default=SN});var Wc=H(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var ON=Gc($a()),LN=Gc(mr());function Gc(i){return i&&i.__esModule?i:{default:i}}var Vc,Ja,Xa=0,Za=0;function PN(i,t,e){let s=t&&e||0,r=t||new Array(16);i=i||{};let h=i.node||Vc,l=i.clockseq!==void 0?i.clockseq:Ja;if(h==null||l==null){let C=i.random||(i.rng||ON.default)();h==null&&(h=Vc=[C[0]|1,C[1],C[2],C[3],C[4],C[5]]),l==null&&(l=Ja=(C[6]<<8|C[7])&16383)}let c=i.msecs!==void 0?i.msecs:Date.now(),f=i.nsecs!==void 0?i.nsecs:Za+1,m=c-Xa+(f-Za)/1e4;if(m<0&&i.clockseq===void 0&&(l=l+1&16383),(m<0||c>Xa)&&i.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Xa=c,Za=f,Ja=l,c+=122192928e5;let g=((c&268435455)*1e4+f)%4294967296;r[s++]=g>>>24&255,r[s++]=g>>>16&255,r[s++]=g>>>8&255,r[s++]=g&255;let b=c/4294967296*1e4&268435455;r[s++]=b>>>8&255,r[s++]=b&255,r[s++]=b>>>24&15|16,r[s++]=b>>>16&255,r[s++]=l>>>8|128,r[s++]=l&255;for(let C=0;C<6;++C)r[s+C]=h[C];return t||(0,LN.default)(r)}var DN=PN;co.default=DN});var th=H(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.default=void 0;var RN=wN(_r());function wN(i){return i&&i.__esModule?i:{default:i}}function FN(i){if(!(0,RN.default)(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var BN=FN;fo.default=BN});var eh=H(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.default=VN;ks.URL=ks.DNS=void 0;var MN=qc(mr()),UN=qc(th());function qc(i){return i&&i.__esModule?i:{default:i}}function HN(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}var Yc="6ba7b810-9dad-11d1-80b4-00c04fd430c8";ks.DNS=Yc;var Qc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";ks.URL=Qc;function VN(i,t,e){function s(r,h,l,c){if(typeof r=="string"&&(r=HN(r)),typeof h=="string"&&(h=(0,UN.default)(h)),h.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+r.length);if(f.set(h),f.set(r,h.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,l){c=c||0;for(let m=0;m<16;++m)l[c+m]=f[m];return l}return(0,MN.default)(f)}try{s.name=i}catch{}return s.DNS=Yc,s.URL=Qc,s}});var jc=H(po=>{"use strict";Object.defineProperty(po,"__esModule",{value:!0});po.default=void 0;var GN=WN(require("crypto"));function WN(i){return i&&i.__esModule?i:{default:i}}function qN(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),GN.default.createHash("md5").update(i).digest()}var YN=qN;po.default=YN});var Kc=H(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.default=void 0;var QN=zc(eh()),jN=zc(jc());function zc(i){return i&&i.__esModule?i:{default:i}}var zN=(0,QN.default)("v3",48,jN.default),KN=zN;_o.default=KN});var Jc=H(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.default=void 0;var $N=$c($a()),JN=$c(mr());function $c(i){return i&&i.__esModule?i:{default:i}}function XN(i,t,e){i=i||{};let s=i.random||(i.rng||$N.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return(0,JN.default)(s)}var ZN=XN;mo.default=ZN});var Xc=H(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.default=void 0;var tA=eA(require("crypto"));function eA(i){return i&&i.__esModule?i:{default:i}}function iA(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),tA.default.createHash("sha1").update(i).digest()}var nA=iA;go.default=nA});var tf=H(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.default=void 0;var sA=Zc(eh()),rA=Zc(Xc());function Zc(i){return i&&i.__esModule?i:{default:i}}var oA=(0,sA.default)("v5",80,rA.default),aA=oA;To.default=aA});var ef=H(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.default=void 0;var hA="00000000-0000-0000-0000-000000000000";ko.default=hA});var nf=H(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.default=void 0;var lA=uA(_r());function uA(i){return i&&i.__esModule?i:{default:i}}function cA(i){if(!(0,lA.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var fA=cA;xo.default=fA});var sf=H(Tn=>{"use strict";Object.defineProperty(Tn,"__esModule",{value:!0});Object.defineProperty(Tn,"v1",{enumerable:!0,get:function(){return dA.default}});Object.defineProperty(Tn,"v3",{enumerable:!0,get:function(){return pA.default}});Object.defineProperty(Tn,"v4",{enumerable:!0,get:function(){return _A.default}});Object.defineProperty(Tn,"v5",{enumerable:!0,get:function(){return mA.default}});Object.defineProperty(Tn,"NIL",{enumerable:!0,get:function(){return gA.default}});Object.defineProperty(Tn,"version",{enumerable:!0,get:function(){return TA.default}});Object.defineProperty(Tn,"validate",{enumerable:!0,get:function(){return kA.default}});Object.defineProperty(Tn,"stringify",{enumerable:!0,get:function(){return xA.default}});Object.defineProperty(Tn,"parse",{enumerable:!0,get:function(){return EA.default}});var dA=Wn(Wc()),pA=Wn(Kc()),_A=Wn(Jc()),mA=Wn(tf()),gA=Wn(ef()),TA=Wn(nf()),kA=Wn(_r()),xA=Wn(mr()),EA=Wn(th());function Wn(i){return i&&i.__esModule?i:{default:i}}});var An,CS,bS,rf,NS,AS,IS,SS,OS,LS,of=St(()=>{An=Xi(sf(),1),CS=An.default.v1,bS=An.default.v3,rf=An.default.v4,NS=An.default.v5,AS=An.default.NIL,IS=An.default.version,SS=An.default.validate,OS=An.default.stringify,LS=An.default.parse});function af(){return Y.replaceAllInString(rf(),"-","_")}var gr,Eo,He,xs,vo,Ni,Zt,Zi,ri,yo,dt,Es,ki,Ri,Tr,wi,Ie,rs,os,Co,kr,as,xr,Qs,Er,vs,ys,Fe=St(()=>{"use strict";of();je();gr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=af()}},Eo=class{constructor(){this.startPosition=null;this.endPosition=null}},He=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=af()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,s;return t+((s=(e=this.startPosition)==null?void 0:e.index)!=null?s:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},xs=class extends He{constructor(){super(...arguments);this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1}},vo=class extends He{constructor(){super(...arguments);this.name="";this.inlineName=""}},Ni=class extends He{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return!0;return!1}getParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return this.parameters[s];return null}getParametersExcept(e){return this.parameters.filter(s=>!e.includes(s.realName))}},Zt=class extends He{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=Y.replaceAllInString(this.content,"@{","{");return e=Y.replaceAllInString(e,"@@","@"),e}},Zi=class extends He{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},ri=class extends He{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.sourceContent,!1),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},yo=class extends ri{},dt=class extends He{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.overrideParams=null;this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){var e;if(this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.getPhpContent(),!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){var s;let e=[];for(let r=0;r<this.children.length;r++){let h=this.children[r];if(((s=h.parent)==null?void 0:s.refId)==this.refId){if(h==this.isClosedBy)break;e.push(h)}}return e}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof dt&&r.refId==this.isClosedBy.refId)break;e.push(r)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof dt&&r.directiveName==e)return r}return null}findFirstDirectChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof dt&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId)return r}return null}findDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof dt&&r.directiveName==e&&s.push(r)}),s}findDirectChildDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof dt&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId&&s.push(r)}),s}clone(){let e=new dt;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition,e.overrideParams=this.overrideParams;let s=this.getParser();return s!=null&&e.withParser(s),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},Es=class extends He{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},ki=class extends dt{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof dt?this.logicBranches[0].head.parent:null}},Ri=class extends He{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},Tr=class extends He{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},wi=class extends He{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},Ie=class extends He{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.content,!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},rs=class extends Ie{},os=class extends Ie{},Co=class extends He{},kr=class extends He{},as=class extends He{constructor(){super(...arguments);this.tokenLength=0}},xr=class extends He{},Qs=class extends He{},Er=class extends He{},vs=class extends He{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},ys=class extends He{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var At,Cs=St(()=>{"use strict";At=class{};At.Verbatim="verbatim",At.EndVerbatim="endverbatim",At.Php="php",At.EndPhp="endphp",At.If="if",At.ElseIf="elseif",At.Else="else",At.Unless="unless",At.ForElse="forelse",At.EndForElse="endforelse",At.Switch="switch",At.EndSwitch="endswitch",At.Default="default",At.Case="case"});var Xe,vr=St(()=>{"use strict";Fe();Xe=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(s=>{if(!(s instanceof dt))return;let r=s;r.directiveName.toLowerCase().startsWith("end")||e.set(r.directiveName.toLowerCase(),1)}),t.forEach(s=>{if(!(s instanceof dt))return;let r=s;if(r.directiveName.toLowerCase().startsWith("unless")){let h=r.directiveName.substring(6);h.length>0&&(this.speculativeConditions.set(r.directiveName,1),this.speculativeEndIfs.set("end"+h,1))}if(this.speculativeEndIfs.has(r.directiveName)&&(r.isClosingDirective=!0),r.directiveName.toLowerCase().startsWith("else")){let h=r.directiveName.substring(4);h!="if"&&h.length>0&&this.speculativeConditions.set(h,1)}if(r.directiveName.toLowerCase().startsWith("end")){let h=r.directiveName.substring(3).toLowerCase();e.has(h)&&(this.possibleClosingNode.set(r.directiveName.toLowerCase(),1),r.isClosingDirective=!0)}})}};Xe.possibleClosingNode=new Map,Xe.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],Xe.customIfs=new Map,Xe.speculativeConditions=new Map,Xe.speculativeEndIfs=new Map});var bo,hf=St(()=>{"use strict";Fe();Cs();vr();bo=class{static getNewName(t){if(t.name==At.Unless)return At.If;if(Xe.isSpeculativeEndIf(t.directiveName))return At.If;if(Xe.alwaysRewrite.includes(t.name))return At.If;if(Xe.isSpeculativeCondition(t.name))return At.If;if(Xe.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,At.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,At.If):At.If}return t.directiveName=="auth"?At.If:t.name}static rewrite(t){let e=[];return t.forEach(s=>{if(s instanceof dt)if(Xe.shouldRewrite(s)){let r=s.clone();r.name=this.getNewName(s),e.push(r)}else e.push(s);else e.push(s)}),e}}});function qi(i){return i.length==0?null:i[0].startPosition}var js=St(()=>{"use strict"});function lf(i,t){let e=new Set(i),s=new Set(t),r=new Set([...e].filter(h=>s.has(h)));return Array.from(r)}var uf=St(()=>{"use strict"});var Me,ih=St(()=>{"use strict";Me=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,s,r,h;let t="";return this.node!=null&&(t=((s=(e=this.node.endPosition)==null?void 0:e.offset)!=null?s:0).toString()+"|"+((h=(r=this.node.startPosition)==null?void 0:r.offset)!=null?h:0).toString()+"|"),t+"|"+this.errorCode}static makeSyntaxError(t,e,s,r){r==null&&(r=0);let h=new Me;return h.errorCode=t,h.node=e,h.message=s,h.level=r,h}}});var Yt,nh=St(()=>{"use strict";Yt=class{};Yt.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Yt.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Yt.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Yt.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Yt.TYPE_UNCLOSED_COMMENT="BLADE_005",Yt.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Yt.TYPE_UNCLOSED_VERBATIM="BLADE_008",Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Yt.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Yt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var cn,zs,cf=St(()=>{"use strict";ih();nh();Fe();Cs();cn=class{static isConditionalStructure(t){if(!(t instanceof dt))return!1;let e=t,s=e.name;return s==At.If||s==At.ElseIf||s==At.Else}static requiresClose(t){let e=t.name;return e==At.ElseIf||e==At.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==At.If||t==At.ElseIf?cn.conditionClosingPairs:[]}static findClosestStructurePair(t,e,s){let r=[],h=t.length,l=new Map;r.push({node:e,index:s});for(let c=0;c<h;c+=1){let f=t[c];if(f instanceof dt){let m=f.name;if(f.isClosingDirective&&m==At.If){l.set(c,c);continue}else if(m==At.ElseIf||m==At.Else){l.set(c,c);continue}}}for(;r.length>0;){let c=r.pop();if(c==null)continue;if(c.node._conditionParserAbandonPairing)break;let f=c.node,m=cn.getValidClosingPairs(f.name),g=c.index,b=!1;for(let C=g;C<h;C++){let E=t[C];if(E instanceof dt&&cn.isConditionalStructure(E)){if(cn.requiresClose(E)){if(C==h-1){b=!1;break}r.push(c),r.push({node:E,index:C+1}),b=!0;break}if(f.isClosedBy!=null)continue;let O=E.name,w=!1;if(E.ref==0&&(E.isClosingDirective&&O==At.If||m.includes(O))&&(w=!0),E.refId==f.refId&&(w=!1),w){l.delete(C),f.isClosedBy=E,E.isOpenedBy=f,E.ref+=1,b=!0;break}}}if(!b&&f instanceof dt){let C=f.name;(C==At.ElseIf||C==At.Else)&&f.isOpenedBy==null&&(f.pushError(Me.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0),f.isClosedBy==null&&cn.requiresClose(f)&&(f.pushError(Me.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let s=t[e];s instanceof dt&&cn.isConditionalStructure(s)&&cn.requiresClose(s)&&cn.findClosestStructurePair(t,s,e+1)}return t.forEach(e=>{if(e instanceof dt&&cn.isConditionalStructure(e)){let s=e.name;if((s==At.ElseIf||s==At.Else)&&e.isOpenedBy==null){e.pushError(Me.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&cn.requiresClose(e)){e.pushError(Me.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},zs=cn;zs.conditionClosingPairs=["elseif","else"]});var No,ff=St(()=>{"use strict";In();js();Fe();Cs();No=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof dt&&r.name.toLowerCase()==At.ForElse&&r.directiveName.toLowerCase()!=At.EndForElse?s.push(this.createForElseNode(r,e)):s.push(r)}),s}static createForElseNode(t,e){var f,m,g,b,C,E,O,w,G,rt,lt,K,z,at,B,q,_t,it,vt,Mt,Wt,Ut,bt,se,Qt,yt,ut,ce,It,oe,de,L,D,X,mt;let s=new wi;s.withParser(e),s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.constructedFrom=t;let r=t.findFirstDirectChildDirectiveOfType("empty");if(r==null){s.tailNode=t.children.pop(),s.truthNodes=t.children;let Ht=((m=(f=t.startPosition)==null?void 0:f.index)!=null?m:0)-1,tt=((C=(b=(g=t.isClosedBy)==null?void 0:g.startPosition)==null?void 0:b.index)!=null?C:0)-1,M=tt-Ht,W=((O=(E=t.endPosition)==null?void 0:E.index)!=null?O:0)+1,U=((rt=(G=(w=t.isClosedBy)==null?void 0:w.startPosition)==null?void 0:G.index)!=null?rt:0)-1,J=U-W;s.truthDocumentContent=e.getText(Ht,tt),s.truthDocumentOffset={start:Ht,end:tt,length:M},s.truthInnerContent=e.getText(W,U),s.truthInnerOffset={start:W,end:U,length:J}}else{let Ht=t.children,tt=[],M=[];s.elseNode=r;for(let $t=0;$t<Ht.length;$t++){let Pt=Ht[$t];if(Pt.refId==r.refId){M=Ht.slice($t+1);break}else tt.push(Pt)}s.truthNodes=tt,M.length>0&&(s.tailNode=M.pop()),s.falseNodes=M;let W=((K=(lt=t.startPosition)==null?void 0:lt.index)!=null?K:0)-1,U=((at=(z=r.startPosition)==null?void 0:z.index)!=null?at:0)-1,J=U-W,ot=((q=(B=t.endPosition)==null?void 0:B.index)!=null?q:0)+1,et=((it=(_t=r.startPosition)==null?void 0:_t.index)!=null?it:0)-1,Q=et-ot;s.truthDocumentContent=e.getText(W,U),s.truthDocumentOffset={start:W,end:U,length:J},s.truthInnerContent=e.getText(ot,et),s.truthInnerOffset={start:ot,end:et,length:Q};let ht=((Mt=(vt=r.startPosition)==null?void 0:vt.index)!=null?Mt:0)-1,xt=((bt=(Ut=(Wt=t.isClosedBy)==null?void 0:Wt.startPosition)==null?void 0:Ut.index)!=null?bt:0)-1,Kt=xt-ht,pt=((Qt=(se=r.endPosition)==null?void 0:se.index)!=null?Qt:0)+1,Nt=((ce=(ut=(yt=t.isClosedBy)==null?void 0:yt.startPosition)==null?void 0:ut.index)!=null?ce:0)-1,$=Nt-pt;s.falseDocumentContent=e.getText(ht,xt),s.falseDocumentOffset={start:ht,end:xt,length:Kt},s.falseInnerContent=e.getText(pt,Nt),s.falseInnerOffset={start:pt,end:Nt,length:$}}s.truthDocument=Se.childFromText(e.getNodeText(s.truthNodes),e,qi(s.truthNodes)),s.falseDocument=Se.childFromText(e.getNodeText(s.falseNodes),e,qi(s.falseNodes));let h=((oe=(It=t.startPosition)==null?void 0:It.index)!=null?oe:0)-1,l=(mt=(L=(de=t.isClosedBy)==null?void 0:de.endPosition)==null?void 0:L.index)!=null?mt:0-((X=(D=t.startPosition)==null?void 0:D.index)!=null?X:0),c=l-h;return s.nodeContent=e.getText(h,l),s.documentContent=e.getText(h,l),s.offset={start:h,end:l,length:c},s}}});var Ao,df=St(()=>{"use strict";In();js();Fe();vr();Ao=class{static analyze(t,e){let s=[];return t.forEach(r=>{if(r instanceof dt&&r.isClosedBy!=null){let h=r.findFirstChildDirectiveOfType("else");h!=null&&h.isClosedBy==null?s.push(this.convertToConditionalNode(r,h,e)):s.push(r)}else s.push(r)}),s}static convertToConditionalNode(t,e,s){var Ut,bt,se,Qt,yt,ut,ce,It,oe,de,L,D,X,mt,Ht,tt,M,W,U,J,ot,et,Q,ht,xt,Kt;let r=new ki,h=t.getFinalClosingDirective(),l=t.children,c=[],f=[],m=l.pop();r.withParser(s),r.parent=t.parent,r.startPosition=t.startPosition,r.endPosition=h.endPosition,r.constructedFrom=t;let g=((bt=(Ut=t.startPosition)==null?void 0:Ut.index)!=null?bt:0)-1,b=(ut=(se=h==null?void 0:h.endPosition)==null?void 0:se.index)!=null?ut:0-((yt=(Qt=t.startPosition)==null?void 0:Qt.index)!=null?yt:0),C=g+b;r.nodeContent=s.getText(g,b),r.offset={start:g,end:C,length:b};for(let pt=0;pt<l.length;pt++){let Nt=l[pt];if(Nt instanceof dt&&Nt.refId==e.refId){f=l.slice(pt+1);break}else c.push(Nt)}let E=new Es,O=new Es;E.withParser(s),O.withParser(s),t.isClosedBy=e,e.isOpenedBy=t,m.isOpenedBy=e,e.isClosedBy=m;let w=[...c],G=[...f];c.push(e),E.head=t,E.nodes=c,E.index=t.index;let rt=(It=(ce=t.endPosition)==null?void 0:ce.index)!=null?It:0,lt=((L=(de=(oe=t.isClosedBy)==null?void 0:oe.startPosition)==null?void 0:de.index)!=null?L:0)-1,K=lt-rt,z=((X=(D=t.startPosition)==null?void 0:D.index)!=null?X:0)-1,at=((tt=(Ht=(mt=t.isClosedBy)==null?void 0:mt.startPosition)==null?void 0:Ht.index)!=null?tt:0)-1,B=at-z;E.innerContent=s.getText(rt,lt),E.documentContent=s.getText(z,at),E.innerOffset={start:rt,end:lt,length:K},E.offset={start:z,end:at,length:B},f.push(m),O.head=e,O.nodes=f,O.index=e.index;let q=(W=(M=e.endPosition)==null?void 0:M.index)!=null?W:0,_t=((ot=(J=(U=e.isClosedBy)==null?void 0:U.startPosition)==null?void 0:J.index)!=null?ot:0)-1,it=_t-q,vt=((Q=(et=e.startPosition)==null?void 0:et.index)!=null?Q:0)-1,Mt=((Kt=(xt=(ht=e.isClosedBy)==null?void 0:ht.startPosition)==null?void 0:xt.index)!=null?Kt:0)-1,Wt=Mt-vt;return O.innerContent=s.getText(q,_t),O.documentContent=s.getText(vt,Mt),O.innerOffset={start:q,end:_t,length:it},O.offset={start:vt,end:Mt,length:Wt},r.chain=[t.index,e.index],r.logicBranches.push(E),r.logicBranches.push(O),E.startPosition=E.nodes[0].startPosition,E.endPosition=E.nodes[E.nodes.length-1].startPosition,E.childDocument=Se.childFromText(s.getNodeText(w),s,qi(w)),O.childDocument=Se.childFromText(s.getNodeText(G),s,qi(G)),O.startPosition=O.nodes[0].startPosition,O.endPosition=O.nodes[O.nodes.length-1].startPosition,Xe.registerSpeculativeCondition(t.directiveName),r}}});var Io,pf=St(()=>{"use strict";In();js();Fe();Cs();Io=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof dt&&r.directiveName.toLowerCase()==At.Switch?s.push(this.createSwitchNode(r,e)):s.push(r)}),s}static createSwitchNode(t,e){var m,g,b,C,E,O,w,G,rt,lt,K,z,at,B,q,_t,it,vt,Mt,Wt,Ut,bt,se,Qt,yt,ut,ce,It,oe,de,L,D;let s=new Ri,r=t.children;s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.parent=t.parent,s.withParser(e),s.constructedFrom=t;let h=[];for(let X=0;X<r.length;X++){let mt=r[X];if(mt instanceof dt&&mt.name==At.Switch&&(X+=mt.children.length),mt instanceof dt&&mt.name==At.Case){let Ht=this.collectUntil(t,r.slice(X+1),[At.Case,At.Default,At.EndSwitch]),tt=new Tr;if(tt.parent=mt.parent,s.cases.length==0&&h.length>0){if(tt.leadingNodes=h,h.length>0){let Q=h[0],ht=h[h.length-1],xt=(g=(m=Q.startPosition)==null?void 0:m.index)!=null?g:0,Kt=((C=(b=ht.endPosition)==null?void 0:b.index)!=null?C:0)+1,pt=e.getText(xt,Kt);tt.leadingDocument=Se.childFromText(pt,e,Q.startPosition)}h=[]}if(tt.refId=mt.refId,tt.index=mt.index,tt.startPosition=mt.startPosition,tt.endPosition=mt.endPosition,tt.order=s.cases.length,tt.head=mt,tt.isDefault=!1,tt.children=Ht.children,tt.withParser(e),tt.isClosedBy=Ht.brokeOn,mt.isClosedBy=Ht.brokeOn,tt.children.length>0){let Q=tt.children[tt.children.length-1];Q instanceof dt&&Q==t.isClosedBy&&tt.children.pop()}tt.childDocument=Se.childFromText(e.getNodeText(tt.children),e,qi(tt.children)),Ht.brokeOn!=null&&(tt.endPosition=Ht.brokeOn.startPosition);let M=((O=(E=tt.startPosition)==null?void 0:E.index)!=null?O:0)-1,W=((rt=(G=(w=tt.isClosedBy)==null?void 0:w.startPosition)==null?void 0:G.index)!=null?rt:0)-1,U=W-M,J=((K=(lt=mt.endPosition)==null?void 0:lt.index)!=null?K:0)+1,ot=((B=(at=(z=tt.isClosedBy)==null?void 0:z.startPosition)==null?void 0:at.index)!=null?B:0)-1,et=ot-J;tt.documentContent=e.getText(M,W),tt.innerContent=e.getText(J,ot),tt.offset={start:M,end:W,length:U},tt.innerOffset={start:J,end:ot,length:et},s.cases.push(tt)}else if(mt instanceof dt&&mt.name==At.Default){let Ht=r.slice(X+1),tt=new Tr;tt.parent=mt.parent,tt.refId=mt.refId,tt.index=mt.index,tt.startPosition=mt.startPosition,tt.endPosition=t.startPosition,tt.order=s.cases.length,tt.head=mt,tt.isDefault=!0,tt.children=Ht,tt.withParser(e),tt.isClosedBy=t.isClosedBy,mt.isClosedBy=t.isClosedBy;let M=[...tt.children],W=M[M.length-1];W instanceof dt&&W.refId==((q=t.isClosedBy)==null?void 0:q.refId)&&M.pop();let U=((it=(_t=tt.startPosition)==null?void 0:_t.index)!=null?it:0)-1,J=((Wt=(Mt=(vt=tt.isClosedBy)==null?void 0:vt.startPosition)==null?void 0:Mt.index)!=null?Wt:0)-1,ot=J-U,et=((bt=(Ut=mt.endPosition)==null?void 0:Ut.index)!=null?bt:0)+1,Q=((yt=(Qt=(se=tt.isClosedBy)==null?void 0:se.startPosition)==null?void 0:Qt.index)!=null?yt:0)-1,ht=Q-et;tt.documentContent=e.getText(U,J),tt.innerContent=e.getText(et,Q),tt.offset={start:U,end:J,length:ot},tt.innerOffset={start:et,end:Q,length:ht},tt.childDocument=Se.childFromText(e.getNodeText(M),e,qi(M)),s.cases.push(tt);break}else h.push(mt)}if(s.cases.length>0){let X=s.cases[s.cases.length-1];X.children.length>0&&(s.tail=X.children.pop())}if(s.cases.length==0){let X=[...t.children];X.length>0&&X[X.length-1]==t.isClosedBy&&X.pop(),t.childrenDocument=Se.childFromText(e.getNodeText(X),e,qi(X))}let l=((ce=(ut=t.startPosition)==null?void 0:ut.index)!=null?ce:0)-1,c=(D=(oe=(It=t.isClosedBy)==null?void 0:It.endPosition)==null?void 0:oe.index)!=null?D:0-((L=(de=t.startPosition)==null?void 0:de.index)!=null?L:0),f=l+c;if(s.nodeContent=e.getText(l,c),s.offset={start:l,end:f,length:c},s.cases.length>0){let X=s.cases[s.cases.length-1];X.isClosedBy==null&&(X.isClosedBy=t.isClosedBy)}return s}static collectUntil(t,e,s){var l;let r=[],h=null;for(let c=0;c<e.length;c++){let f=e[c];if(f instanceof dt&&s.includes(f.name)&&((l=f.parent)==null?void 0:l.refId)==t.refId){h=f;break}r.push(f)}return{children:r,brokeOn:h}}}});var sh,yr,_f=St(()=>{"use strict";In();js();Fe();Cs();uf();cf();ff();vr();df();pf();sh=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.stackCount=0}buildCloseIndex(t){var e,s,r;t.forEach(h=>{var m,g,b,C,E,O,w,G;if(!(h instanceof dt))return;let l=h;if(l.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let c=l.name;((m=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:m.has(c))==!1&&((g=this.closingDirectiveIndex.get(this.stackCount))==null||g.set(c,[]),(b=this.closingDirectiveIndexCount.get(this.stackCount))==null||b.set(c,0)),(E=(C=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:C.get(c))==null||E.push(h);let f=(w=(O=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:O.get(c))!=null?w:0;(G=this.closingDirectiveIndexCount.get(this.stackCount))==null||G.set(c,f+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((s=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?s:[])),(r=this.closingDirectiveIndex.get(this.stackCount))==null||r.forEach((h,l)=>{var m,g,b,C,E;let c=h.length;if(c==0)return;let f=h[c-1];for(let O=0;O<c;O++){let w=t[O];if(w instanceof dt){if(w.index>=f.index)break;let G=w.name;if(w.isClosingDirective==!1&&G==l){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((m=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:m.has(l))==!1&&((g=this.openDirectiveIndexCount.get(this.stackCount))==null||g.set(l,0));let rt=(C=(b=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:b.get(l))!=null?C:0;(E=this.openDirectiveIndexCount.get(this.stackCount))==null||E.set(l,rt+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),s=this.closingDirectiveNames.get(this.stackCount);return lf(e,s)}return[]}associate(t,e,s=null){var l;this.document=e;let r=[],h=[{documentNodes:t,parent:s}];for(;h.length>0;){let c=h.pop();if(c==null)continue;let f=c.documentNodes;this.parentNode=c.parent,this.stackCount+=1,this.buildCloseIndex(f),f=zs.pairConditionals(f),f.forEach(C=>{if(C instanceof dt&&Xe.canClose(C)){if(zs.isConditionalStructure(C))return;let E=this.getScanForList(C);this.findClosingPair(f,C,E)}});let m=f.length;for(let C=0;C<m;C++){let E=f[C];if(E instanceof dt&&E.isClosedBy!=null)for(let O=C+1;O<m;O++){let w=f[O];if(w.index>E.isClosedBy.index)break;if(w.parent=E,E.children.push(w),w instanceof dt&&w.index==E.index){w.parent=E;break}}}f.forEach(C=>{if(C instanceof dt&&C.children.length>0){let E=[],O=[];C.children.forEach(w=>{if(w.parent!=null&&w.parent.index==C.index){let G=w.refId;if(!O.includes(G))w.parent=C,E.push(w),O.push(G);else return}}),h.push({documentNodes:E,parent:C})}});let g=[];f.forEach(C=>{var E;this.parentNode==null?C.parent==null&&g.push(C):((E=C.parent)==null?void 0:E.refId)==this.parentNode.refId&&g.push(C)}),g=this.reduceConditions(g,e),g=Io.associate(g,e),g=No.associate(g,e),g=Ao.analyze(g,e),g=this.cleanNodes(g);let b=new Map;f.forEach(C=>{var E,O,w,G;if(C instanceof dt&&C.isClosedBy!=null&&this.document!=null){let rt=this.document.getText((O=(E=C.endPosition)==null?void 0:E.index)!=null?O:0,((G=(w=C.isClosedBy.startPosition)==null?void 0:w.index)!=null?G:0)-1);C.documentContent=rt,(C.name=="php"||C.name=="verbatim")&&C.innerContent.trim().length==0&&(C.innerContent=C.documentContent)}});for(let C=0;C<g.length;C++){let E=g[C],O=(l=E.refId)!=null?l:"";b.set(O,1)}if(this.parentNode!=null&&this.parentNode instanceof dt&&(this.parentNode.children=this.cleanNodes(g),this.parentNode.parent!=null&&this.parentNode.parent instanceof dt)){let C=this.parentNode.parent.children,E=[];C.forEach(O=>{var w;b.has((w=O.refId)!=null?w:"")==!1&&E.push(O)}),this.parentNode.parent.children=this.cleanNodes(E)}this.stackCount<=1&&(r=this.cleanNodes(g))}return r}cleanNodes(t){let e=[],s=[];for(let r=0;r<t.length;r++){let h=t[r],l=h.refId;if(s.includes(l))break;e.push(h),s.push(l)}return e}reduceConditions(t,e){var r,h,l,c,f,m,g,b,C,E,O,w,G,rt,lt,K,z;let s=[];for(let at=0;at<t.length;at++){let B=t[at];if(B instanceof dt&&B.isClosingDirective==!1&&B.isClosedBy!=null)if(B.name==At.If){let _t=new ki,it=B.getFinalClosingDirective();_t.withParser(e),_t.index=B.index,_t.chain.push(B.index),_t.startPosition=B.startPosition,_t.endPosition=it.endPosition,_t.constructedFrom=B;let vt=((h=(r=B.startPosition)==null?void 0:r.index)!=null?h:0)-1,Mt=(m=(l=it==null?void 0:it.endPosition)==null?void 0:l.index)!=null?m:0-((f=(c=B.startPosition)==null?void 0:c.index)!=null?f:0),Wt=vt+Mt;_t.nodeContent=e.getText(vt,Mt),_t.offset={start:vt,end:Wt,length:Mt},this.parentNode!=null&&(_t.parent=this.parentNode);let Ut=null,bt=!0,se=0;for(;bt;){if(se+=1,se>sh.ForceBreakLimit){bt=!1;break}if(B instanceof dt){let Qt=this.findEndOfBranch(t.slice(at+1),B,at),yt=new Es;yt.withParser(e);let ut=Qt.tail;yt.head=B,yt.tail=ut,yt.nodes=this.cleanNodes(B.children);let ce=[...yt.nodes],It=ce[ce.length-1];It instanceof dt&&It.refId==((g=B.isClosedBy)==null?void 0:g.refId)&&ce.pop();let oe=(C=(b=B.endPosition)==null?void 0:b.index)!=null?C:0,de=((w=(O=(E=B.isClosedBy)==null?void 0:E.startPosition)==null?void 0:O.index)!=null?w:0)-1,L=de-oe,D=((rt=(G=B.startPosition)==null?void 0:G.index)!=null?rt:0)-1,X=((z=(K=(lt=B.isClosedBy)==null?void 0:lt.startPosition)==null?void 0:K.index)!=null?z:0)-1,mt=X-D;if(yt.innerContent=e.getText(oe,de),yt.documentContent=e.getText(D,X),yt.innerOffset={start:oe,end:de,length:L},yt.offset={start:D,end:X,length:mt},yt.childDocument=Se.childFromText(e.getNodeText(ce),e,qi(ce)),ut==null&&(ut=yt.head.isClosedBy),ut!=null&&ut.startPosition!=null&&(yt.startPosition=ut.startPosition),ut!=null&&(yt.index=ut.index),yt.nodes.length>0){let Ht=yt.nodes[yt.nodes.length-1];Ht.endPosition!=null&&(yt.endPosition=Ht.endPosition)}else ut!=null&&ut.endPosition!=null&&(yt.endPosition=ut.endPosition);if(this.createdExecutionBranches.push(yt),_t.logicBranches.push(yt),(ut==null?void 0:ut.isClosingDirective)&&ut.name==At.If){Ut=Qt.offset,bt=!1;break}else ut!=null&&_t.chain.push(ut.index),at=Qt.offset,ut instanceof dt&&(B=ut)}else bt=!1}if(s.push(_t),Ut!=null&&Ut==t.length)break}else s.push(B);else s.push(B)}return s}findEndOfBranch(t,e,s){let r=[],h=s,l=null;for(let c=0;c<t.length;c++){let f=t[c];if(f instanceof dt&&f.isOpenedBy!=null&&f.isOpenedBy==e){l=f;break}else r.push(f)}return{children:r,tail:l,offset:h}}findClosingPair(t,e,s){let r=t.length,h=0;for(let l=0;l<r;l++){let c=t[l];if(!(c instanceof dt)||c.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(c.startPosition))continue;let f=c;if(f.isClosingDirective&&f.isOpenedBy!=null||!f.isClosingDirective&&f.isClosedBy!=null)continue;let m=f.name;if(!f.isClosingDirective&&s.includes(m)){h+=1;continue}if(s.includes(m)&&h>0){h-=1;continue}if(h==0&&s.includes(m)){f.isOpenedBy=e,e.isClosedBy=f;break}}}},yr=sh;yr.ForceBreakLimit=1e5});var So,mf=St(()=>{"use strict";Fe();So=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof dt))return;let s=e;s.getImmediateChildren().forEach(r=>{let h="*unknown",l=0;r instanceof Zt?h="*literal":r instanceof os?h="*entities_echo":r instanceof rs?h="*escaped_echo":r instanceof Ie?h="*echo":r instanceof Co?h="*verbatim":r instanceof dt&&(h=r.directiveName),s.childTypeCounts.has(h)==!1&&s.childTypeCounts.set(h,0);let c=s.childTypeCounts.get(h),f=c+1;s.childTypeCounts.set(h,f),r.parentTypeIndex=f,r.parentIndex=l,l+=1})})}}});var Oo,Tf=St(()=>{"use strict";Fe();Oo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var r,h,l,c,f;let e=(h=(r=t.endPosition)==null?void 0:r.index)!=null?h:0,s=(f=(c=(l=t.isClosedBy)==null?void 0:l.startPosition)==null?void 0:c.index)!=null?f:0;return this.fragmentsParser.getFragmentsBetween(e,s).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let s=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(s=="script"||s=="style")){let r=this.fragmentsParser.getClosingFragmentAfter(e);if(r==null)return;e.endPosition!=null&&r.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,r.startPosition).forEach(l=>{(l instanceof ki||l instanceof wi||l instanceof Ni||l instanceof Ri||l instanceof dt&&l.isClosedBy!=null)&&(e.containsStructures=!0),s=="style"?l.isInStyleTag=!0:l.isInScriptTag=!0})}}),t.forEach(e=>{var l,c,f,m,g,b;if(e instanceof Zt||e.startPosition==null)return;e instanceof dt&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let s=this.fragmentsParser.getFragmentContaining(e.startPosition);if(s==null)return;if(e.fragment=s,e.startPosition.index-((c=(l=s.startPosition)==null?void 0:l.index)!=null?c:0)<=3){e.fragmentPosition=0;return}if(s.parameters.length==0){e.fragmentPosition=2;return}let h=!1;for(let C=0;C<s.parameters.length;C++){let E=s.parameters[C];if(((m=(f=E.startPosition)==null?void 0:f.index)!=null?m:0)<e.startPosition.index&&((b=(g=E.endPosition)==null?void 0:g.index)!=null?b:0)>e.startPosition.index){e.fragmentPosition=1,h=!0;break}}h||(e.fragmentPosition=2)}))}}});var Lo,kf=St(()=>{"use strict";Fe();je();Lo=class{static analyze(t){t.forEach(e=>{var s,r,h,l;if(e instanceof Ie){let c=!1,f=!1;if(e.nextNode==null)c=!0;else if(e.nextNode instanceof Zt){let m=Y.getFirstLine(e.nextNode.content);(Y.trimLeft(m," 	").startsWith(`
`)==!1&&m.trim().length>0||e.nextNode.nextNode instanceof Ie&&((s=e.nextNode.nextNode.startPosition)==null?void 0:s.line)==((r=e.endPosition)==null?void 0:r.line))&&(c=!0)}else e.nextNode instanceof Ie&&(c=!0);if(e.prevNode==null)f=!0;else if(e.prevNode instanceof Zt){let m=Y.getLastLine(e.prevNode.content);(Y.trimRight(m," 	").endsWith(`
`)==!1&&m.trim().length>0||e.prevNode.prevNode instanceof Ie&&((h=e.prevNode.prevNode.endPosition)==null?void 0:h.line)==((l=e.startPosition)==null?void 0:l.line))&&(f=!0)}else e.prevNode instanceof Ie&&(f=!0);e.isInlineEcho=c||f}})}}});var Po,xf=St(()=>{"use strict";Fe();je();Po=class{static analyze(t){t.forEach(e=>{var s,r;if(e instanceof ri){if(((s=e.startPosition)==null?void 0:s.line)!=((r=e.endPosition)==null?void 0:r.line))return;let h=!1,l=!1;if(e.nextNode==null)h=!0;else if(e.nextNode instanceof Zt){let c=Y.getFirstLine(e.nextNode.content);Y.trimLeft(c," 	").startsWith(`
`)==!1&&c.trim().length>0&&(h=!0)}if(e.prevNode==null)l=!0;else if(e.prevNode instanceof Zt){let c=Y.getLastLine(e.prevNode.content);Y.trimRight(c," 	").endsWith(`
`)==!1&&c.trim().length>0&&(l=!0)}e.isInline=h&&l}})}}});var Sn,Ef=St(()=>{"use strict";un();je();Sn=class{static findRightBeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let l=e[h];if(Y.ctypeSpace(l)&&(r=!0),r&&(Y.ctypeAlpha(l)||Y.ctypeDigit(l)))return null;if(Y.ctypePunct(l)||l==Z.String_Terminator_SingleQuote||l==Z.String_Terminator_DoubleQuote)return l}return null}static findRightNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let l=e[h];if((Y.ctypeSpace(l)||Y.ctypePunct(l)&&l!=Z.Punctuation_Underscore)&&(r=!0),r&&(Y.ctypeAlpha(l)||Y.ctypeDigit(l)))return h+1}return null}static findLeftNeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-2;h>=0;h--){let l=e[h];if(Y.ctypeSpace(l)&&(r=!0),r&&(Y.ctypeAlpha(l)||Y.ctypeDigit(l)))return null;if(Y.ctypePunct(l))return l}return null}static findLeftNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-1;h>=0;h--){let l=e[h];if((Y.ctypeSpace(l)||Y.ctypePunct(l)&&l!=Z.Punctuation_Underscore)&&(r=!0),r&&(Y.ctypeAlpha(l)||Y.ctypeDigit(l)))return h+1}return null}static scanWordAt(t,e,s=4){if(e=e.replace("	"," ".repeat(s)),t<0||t>e.length)return null;let r=[],h=[];for(let l=t-1;l>=0;l--){let c=e[l];if(Y.ctypePunct(c)&&c!=Z.Punctuation_Underscore||Y.ctypeSpace(c))break;r.push(c)}for(let l=t;l<e.length;l++){let c=e[l];if(Y.ctypePunct(c)&&c!=Z.Punctuation_Underscore||Y.ctypeSpace(c))break;h.push(c)}return r.reverse().join("")+h.join("")}}});var On,rh=St(()=>{"use strict";On=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new On;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,s=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+s}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function Ks(i){for(let t=i.getCurrentIndex()+1;t<i.inputLength();t++){let e=i.getChar(t);if(!Y.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var oh=St(()=>{"use strict";je()});function tn(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()!=Z.NewLine);i.incrementIndex());}var bs=St(()=>{"use strict";un()});function en(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex())if(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()==Z.Punctuation_Asterisk&&i.getNext()==Z.Punctuation_ForwardSlash){t&&i.pushChar(Z.Punctuation_ForwardSlash),i.incrementIndex(),i.checkCurrentOffsets();break}}var Ns=St(()=>{"use strict";un()});function $s(i){let t=i.getCurrentIndex()+i.getSeedOffset(),e=i.getCurrentIndex(),s=0,r=0,h=!1;for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex()){if(i.checkCurrentOffsets(),ze(i.getCurrent())){let c=i.getCurrent(),f=i.getCurrentIndex();ns(i),i.getNext()===null&&i.getCurrent()!==c&&i.updateIndex(f+1);continue}if(i.getCurrent()==Z.Punctuation_ForwardSlash&&i.getNext()==Z.Punctuation_Asterisk){en(i,!1);continue}if(i.getCurrent()==Z.Punctuation_ForwardSlash&&i.getNext()==Z.Punctuation_ForwardSlash){tn(i,!1);continue}if(i.getCurrent()==Z.LeftParen){r+=1;continue}if(i.getCurrent()==Z.RightParen){if(r>0){r-=1;continue}s=i.getCurrentIndex()+i.getSeedOffset()+1,h=!0;break}if(i.getCurrent()==null)break}let l=i.getContentSubstring(t,s-t);return h||i.updateIndex(e-1),{start:t,end:s,content:l,foundEnd:h}}var ah=St(()=>{"use strict";un();bn();bs();Ns();Nn()});var Do,yf=St(()=>{"use strict";Fe();je();un();bn();oh();ah();bs();Ns();Nn();Do=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,s){let r=new dt,h=this.getComponentOffset();r.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),r.directiveName=t.trim(),r.name=t.trim(),t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.document.positionFromOffset(h+e,h+e),c=this.document.positionFromOffset(h+s,h+s);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index,m=r.endPosition.index-r.startPosition.index,g=f+m;r.sourceContent=this.document.getContentSubstring(f,m),r.offset={start:f,end:g,length:m}}return r}getComponentOffset(){var t,e,s;return((s=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?s:0)+3}makeDirectiveWithParameters(t,e,s,r){var g,b;let h=this.makeDirective(t,e,s),l=this.getComponentOffset();h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let c=r.content.trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1),c=c.trim(),h.hasJsonParameters=c.startsWith("{")&&c.endsWith("}"));let f=this.document.positionFromOffset(r.start+l,r.start+l),m=this.document.positionFromOffset(r.end+l,r.end+l);if(h.startPosition=(b=(g=h.namePosition)==null?void 0:g.start)!=null?b:null,h.endPosition=m,h.directiveParametersPosition={start:f,end:m},h.startPosition!=null&&h.endPosition!=null){let C=h.startPosition.index,E=h.endPosition.index-h.startPosition.index,O=C+E;h.sourceContent=this.document.getContentSubstring(C,E),h.offset={start:C,end:O,length:E}}return h}prepare(t){return this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,s="",r=0,h=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_Asterisk){en(this,!0);continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_ForwardSlash){tn(this,!0);continue}if(this.cur==Z.NewLine){r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}else if(this.next==null){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}let l=Ks(this);if(this.cur!=Z.LeftParen&&l.didFind&&Y.ctypePunct(l.char)&&l.char!=Z.LeftParen&&l.char!=Z.Punctuation_Minus){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}if(Y.ctypeSpace(this.cur)){let c=Ks(this);if(c.didFind&&c.char==Z.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[],this.currentIndex=c.index,this.checkCurrentOffsets();let f=$s(this);h=this.makeDirectiveWithParameters(s,t,r,f);break}else{r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}}else if(this.cur==Z.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[];let c=$s(this);h=this.makeDirectiveWithParameters(s,t,r,c);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return h}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(Y.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),s=new Ie;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Z.RightBrace&&this.next==Z.RightBrace){let r=this.currentIndex+1;s.startPosition=this.document.positionFromOffset(t+e,t+e),s.endPosition=this.document.positionFromOffset(r+e,r+e),s.withParser(this.document);let h=s.startPosition.index-5,l=s.endPosition.index-s.startPosition.index+3,c=h+l;s.sourceContent=this.content.substr(h,l),s.offset={start:h,end:c,length:l},s.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return s}parse(t){var f;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),s=!1,r=-1,h=-1,l=-1,c='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==Z.LeftBrace&&this.next==Z.LeftBrace){this.currentIndex+=2;let m=this.scanToEndOfBladeEcho(this.currentIndex);if(m!=null){let g=new xs;g.type=1,g.startPosition=m.startPosition,g.endPosition=m.endPosition,g.inlineEcho=m,g.type=3,t.hasParameters=!0,t.parameters.push(g),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==Z.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=Z.Punctuation_Equals){let m=this.scanToEndOfDirective();if(m!=null){let g=new xs;g.type=1,g.startPosition=m.startPosition,g.endPosition=m.endPosition,g.name=m.directiveName,g.directive=m,t.hasParameters=!0,t.parameters.push(g);continue}}if(this.hasFoundName){if(Y.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let m=new xs,g=this.getComponentOffset();m.type=2,this.next==null&&!Y.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),m.name=this.currentContent.join("");let b=this.currentIndex+g-m.name.length;m.startPosition=this.document.positionFromCursor(b,b),m.endPosition=this.document.positionFromCursor(this.currentIndex+g,this.currentIndex+g),m.namePosition={start:m.startPosition,end:m.endPosition},t.parameters.push(m),t.hasParameters=!0,this.currentContent=[];continue}continue}else s||(s=!0,r=this.currentIndex);if(this.cur==Z.Punctuation_Equals&&ze(this.next)){c=this.next,h=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),l=this.currentIndex;let m=Di(this),g=new xs;g.withParser(e),g.name=this.currentContent.join(""),g.value=m.value;let b=t.relativeOffset(r+3),C=t.relativeOffset(h+3),E=t.relativeOffset(l+3),O=t.relativeOffset(m.endedOn+3);g.namePosition={start:e.positionFromOffset(b,b),end:e.positionFromOffset(C,C)},g.valuePosition={start:e.positionFromOffset(E,E),end:e.positionFromOffset(O,O)},g.terminatorStyle=c,g.wrappedValue=c+g.value+c,g.content=g.name+"="+g.wrappedValue,g.realName=g.name,g.realName.startsWith(":")&&(g.isExpression=!0,g.realName=g.realName.substring(1),g.realName.startsWith(":")&&(g.isExpression=!1,g.realName=g.realName.substring(1),g.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(g),this.currentContent=[],s=!1,r=-1,h=-1,l=-1,c='"';continue}}else if((Y.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!Y.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let m=0;m<t.parameters.length;m++){let g=t.parameters[m];if(g.type==3&&((f=g.inlineEcho)==null?void 0:f.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),s=new vo,r=t.relativeOffset(this.nameStartsOn+3),h=t.relativeOffset(this.nameEndsOn+3);if(s.withParser(e),s.name=this.name,t.isClosingTag&&(s.name=t.innerContent.trim().substring(1)),s.name.includes(":")){let l=s.name.split(":");s.name=l[0],s.inlineName=l.slice(1).join(":")}return s.startPosition=e.positionFromOffset(r,r),s.endPosition=e.positionFromOffset(h,h),s}}});var Ro,Cf=St(()=>{"use strict";Fe();rh();je();un();bn();bs();Ns();Nn();Ro=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let s=0;s<this.fragments.length;s++){let r=this.fragments[s];if(r.isClosingFragment&&!r.isSelfClosing&&r.name.toLowerCase()==e&&r.index>t.index)return r}return null}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,h=c.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let c=null,f=null,m=null,g=null;for(let b of this.documentOffsets.keys()){if(b>=t){g!=null&&t>g?(c=m,f=g):(c=this.documentOffsets.get(b),f=b);break}m=this.documentOffsets.get(b),g=b}c==null&&(c=m,f=g),c!=null?(h=t-(f!=null?f:0),r=c.line,t<=(f!=null?f:0)?(r=c.line,h=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let l=new On;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=h,l}getFragments(){return this.fragments}getFragmentsBetween(t,e){let s=[];return this.fragments.forEach(r=>{var c,f,m,g;let h=(f=(c=r.startPosition)==null?void 0:c.index)!=null?f:0,l=(g=(m=r.endPosition)==null?void 0:m.index)!=null?g:0;h>t&&l<e&&s.push(r)}),s}getFragmentContaining(t){var e,s,r,h;for(let l=0;l<this.fragments.length;l++){let c=this.fragments[l];if(((s=(e=c.startPosition)==null?void 0:e.index)!=null?s:0)<t.index&&((h=(r=c.endPosition)==null?void 0:r.index)!=null?h:0)>t.index)return c}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=Y.split(Y.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],s=[];e.forEach(r=>{var l;let h=(l=r.index)!=null?l:0;for(let c=0;c<this.nodeIndex.length;c++){let f=this.nodeIndex[c];if(h>=f.start&&h<=f.end)return}s.push(h)}),this.fragmentStartIndex=s}setIndexRanges(t){return this.nodeIndex=t,this}fetchAt(t,e){return this.content.substr(t,e)}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}parse(t){if(this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let h=0;h<this.fragmentStartIndex.length;h++){let l=this.fragmentStartIndex[h];if(this.resetIntermediateState(),this.seedOffset=l,this.currentChunkOffset=l,this.parseIntermediateText(),this.isScript){let c=!1;for(let f=h+1;f<this.fragmentStartIndex.length;f++){let m=this.fragmentStartIndex[f];if(this.fetchAt(m,8).toLowerCase()=="<\/script"){h=f-1,this.isScript=!1,c=!0;break}}if(!c)break}}let s=0,r=0;return this.fragments.forEach(h=>{let l=h.name.toLowerCase();(l=="script"||l=="style")&&(h.embeddedIndex=r,this.embeddedIndexedFragments.set(r,h),r+=1),h.index=s,this.indexedFragments.set(s,h),s+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ze(this.cur)&&ns(this),this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_ForwardSlash){tn(this,!0);continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_Asterisk){en(this,!0);continue}if(this.cur==Z.Punctuation_QuestionMark&&this.next==Z.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],s=[],r=!1,h=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)&&(r=!0),this.next==Z.Punctuation_LessThan){let l=1;this.cur==Z.Punctuation_ForwardSlash&&(l=2);let c=this.fetchAt(this.currentChunkOffset+l,5);if(c.toLowerCase()=="<?php"||c.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==Z.Punctuation_LessThan||this.next==null&&this.cur!=Z.Punctuation_GreaterThan)break;if(!r&&this.cur==Z.Punctuation_LessThan&&this.next==Z.Punctuation_ForwardSlash&&(h=!0),!r&&this.cur!=Z.Punctuation_LessThan&&this.cur!=Z.Punctuation_ForwardSlash&&this.cur!=Z.Punctuation_GreaterThan&&s.push(this.cur),ze(this.cur)){let l=this.currentIndex;ns(this);let c=new Eo;c.startPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(c);continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_GreaterThan){let l=new gr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),l.parameters=e,l.isSelfClosing=!0,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1);break}if(this.cur==Z.Punctuation_GreaterThan){let l=new gr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),l.parameters=e,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1),l.name.toLowerCase()=="script"&&l.isClosingFragment==!1&&(this.isScript=!0);break}}}}});var Cr,hh=St(()=>{"use strict";Cr=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var wo,lh=St(()=>{"use strict";wo=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function bf(){return vA}var vA,Nf=St(()=>{"use strict";hh();lh();vA={ignoreDirectives:[...Cr,...wo],directives:[],customIfs:[]}});var Fo,Af=St(()=>{"use strict";Fe();je();Fo=class{static transform(t,e){let s=e;return t.forEach(r=>{r instanceof Ie?s=s.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof dt&&r.hasDirectiveParameters?s=s.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof ri&&(s=s.replace(r.sourceContent,Y.replaceWithFillerExceptNewlines(r.sourceContent)))}),s}static transformContent(t){return t.replace(/>/g,"B").replace(/</g,"B")}}});var Ot,Z,un=St(()=>{"use strict";za();hf();_f();mf();Tf();kf();xf();vr();In();Ef();ih();nh();js();Fe();rh();je();Cs();yf();Cf();Nf();bn();oh();ah();bs();Ns();Nn();Af();Ot=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.parsingOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.phpValidator=null;this.unclosedRegionErrors=[Yt.TYPE_UNEXPECTED_END_OF_INPUT,Yt.TYPE_UNCLOSED_PHP_DIRECTIVE,Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_VERBATIM,Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_FOR_DIRECTIVE,Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new Do(this),this.fragmentsParser=new Ro,this.fragmentsAnalyzer=new Oo(this,this.fragmentsParser),this.parserOptions=bf()}withPhpValidator(t){return this.phpValidator=t,this}getPhpValidator(){return this.phpValidator}withParserOptions(t){return this.parserOptions=t,this}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}isStartingPhp(){return this.cur==Ot.Punctuation_LessThan&&this.next==Ot.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==Ot.Punctuation_LessThan&&this.next==Ot.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!Y.ctypeAlpha(this.next)?!1:this.cur==Ot.AtChar&&this.next!=null&&this.prev!=Ot.AtChar}isClosingComponent(){return this.cur==Ot.Punctuation_GreaterThan&&this.prev!=Ot.Punctuation_Minus&&this.prev!=Ot.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==Ot.Punctuation_LessThan&&this.next==Ot.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==Ot.Punctuation_Minus||this.peekRelative(3)==Ot.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==Ot.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==Ot.Punctuation_Minus||this.peekRelative(2)==Ot.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=Ot.AtChar)&&this.next==Ot.Punctuation_Exclamation&&this.cur==Ot.LeftBrace&&this.peek(2)==Ot.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=Ot.AtChar)&&this.next==Ot.LeftBrace&&this.cur==Ot.LeftBrace&&this.next==Ot.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}endsWithTld(t){return/\.[a-z]{2,63}$/i.test(t)}processInputText(t){var b;this.originalContent=t,this.content=Y.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],s=e.length,r=this.seedStartLine,h=null,l=0,c=0;for(let C=0;C<s;C++){let E=e[C],O=(b=E.index)!=null?b:0,w=O;h!=null?w=O-h:w=w+1,this.documentOffsets.set(O,{char:w,line:r});let G=0,rt=0;C==0?(rt=w-1,G=0):(G=c+1,rt=O),this.lineIndex.set(r,{char:w,line:r,startIndex:G,endIndex:rt}),this.lastDocumentOffsetKey=O,this.maxLine=r,r+=1,h=O,c=rt,l=G}this.maxLine+=1;let f=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],m=0,g=!1;return f.forEach(C=>{let E=C[0],O=this.content.indexOf(E,m),w=this.content.substr(O,10);if(w.startsWith("@@")||w.startsWith("@{{")){m=this.content.indexOf(E,m),g=!0;return}let G=this.content.indexOf(E,m);if(g&&m==G){m=G;return}let rt=3,lt=!1,K=!1,z=[],at=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(q=>{z.push(q.toLowerCase()),q.length>rt&&(rt=q.length)}),rt+=5,lt=!0),this.parserOptions.directives.length>0&&(rt=3,this.parserOptions.directives.forEach(q=>{at.push(q.toLowerCase()),q.length>rt&&(rt=q.length)}),rt+=5,lt=!1,K=!0);let B=this.fetchAt(G,rt);if(B.includes(".")){let q=B;B.includes(`
`)&&(q=Y.breakByNewLine(q)[0]);let _t=ss.fromText(q);if(_t.includes(".")&&this.endsWithTld(_t))return}if(B.startsWith("@{")==!1){let q=B.substring(0,1),_t=B.substring(1,2);if(q=="@"&&Y.ctypeAlpha(_t))if(K){let it=this.breakPreFetch(B).toLowerCase();at.includes(it)&&this.bladeStartIndex.push(G)}else if(lt){let it=this.breakPreFetch(B).toLowerCase();z.includes(it)||this.bladeStartIndex.push(G)}else this.bladeStartIndex.push(G);else q!="@"&&this.bladeStartIndex.push(G)}this.bladeStartPositionIndex.set(G,1),m=G+2,g=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let r=Y.replaceAllInString(Y.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return r.startsWith("@")&&(r=r.substring(1)),r.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof dt&&(this.lastNode.directiveName==At.Verbatim||this.lastNode.directiveName==At.Php))}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Yt.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Yt.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Yt.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Sn.findLeftNeighboringNextPunctuation(t.char,s,e)}punctuationLeftAtCursor(t,e,s=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),s)}punctuationRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Sn.findRightBeighboringNextPunctuation(t.char,s,e)}punctuationRightAtCursor(t,e,s=4){return this.punctuationRightAt(this.positionFromCursor(t,e),s)}wordRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=Sn.findRightNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:Sn.scanWordAt(r,s,e)}wordRightAtCursor(t,e,s=4){return this.wordRightAt(this.positionFromCursor(t,e),s)}wordLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=Sn.findLeftNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:Sn.scanWordAt(r,s,e)}wordLeftAtCursor(t,e,s=4){return this.wordLeftAt(this.positionFromCursor(t,e),s)}wordAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Sn.scanWordAt(t.char,s,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?Y.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,s=4){return this.wordAt(this.positionFromCursor(t,e),s)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var h;let e=new Map,s=t-3,r=t+3;s<1&&(s=1),r>this.maxLine&&(r=this.maxLine);for(let l=s;l<=r;l++)e.set(l,(h=this.getLineText(l))!=null?h:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let s=this.lineIndex.get(t-1);if(s!=null){let r=s.endIndex+1;return{end:this.inputLen-1,start:r}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}positionFromCursor(t,e){if(t==this.maxLine){let r=this.lineIndex.get(t-1);if(r!=null){let h=r.endIndex+1,l=h+(e-1),c=new On;return c.offset=l,c.line=t,c.char=e,c.index=l,c}return null}let s=this.lineIndex.get(t);if(s!=null){let r=new On;return r.offset=s.startIndex+(e-1),r.line=s.line,r.char=e,r.index=s.startIndex+(e-1),r}return null}parse(t){if(Xe.customIfs.clear(),this.parserOptions.customIfs.forEach(c=>{Xe.customIfs.set(c,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,s=e-1;if(e==0&&!this.isVerbatim){let c=new Zt;c.withParser(this),c.content=this.prepareLiteralContent(this.content),c.startPosition=this.positionFromOffset(0,0),c.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(c)}else for(let c=0;c<e;c+=1){let f=this.bladeStartIndex[c];if(this.seedOffset=f,c==0&&f>0&&!this.isVerbatim){let g=new Zt;g.withParser(this),g.content=this.prepareLiteralContent(this.content.substr(0,f)),g.content.length>0&&(g.startPosition=this.positionFromOffset(0,0),g.endPosition=this.positionFromOffset(f,f-1),this.nodes.push(g))}if(f<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=f,this.parsingOffset=f,this.resetIntermediateState(),this.parseIntermediateText(f),this.isVerbatim){let g=!1;for(let b=c+1;b<this.bladeStartIndex.length;b++){let C=this.bladeStartIndex[b];if(this.fetchAt(C,12)=="@endverbatim"){c=b-1,this.isVerbatim=!1,g=!0;break}}if(g)continue}if(this.isPhpNode){let g=!1;for(let b=c+1;b<this.bladeStartIndex.length;b++){let C=this.bladeStartIndex[b];if(this.fetchAt(C,7)=="@endphp"){c=b-1,this.isPhpNode=!1,g=!0;break}}if(g)continue}if(this.lastNode instanceof Zi||this.lastNode instanceof ri){let g=-1;for(let b=c;b<this.bladeStartIndex.length;b++){let C=this.bladeStartIndex[b];if(C>this.lastBladeEndIndex){g=C;break}}if(g!=-1){let b=1;this.lastNode instanceof ri&&(b=0);let C=this.lastBladeEndIndex+b,E=this.content.substr(this.lastBladeEndIndex+b,g-this.lastBladeEndIndex-b),O=g-1,w=new Zt;w.withParser(this),w.startPosition=this.positionFromOffset(C,C),w.endPosition=this.positionFromOffset(O,O),w.content=E,this.nodes.push(w),this.lastNode=w,this.lastBladeEndIndex=O;continue}}this.lastNode instanceof Ni&&(f-=2);let m=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(m=!0):m=!0,m){if(c+1<e){let g=this.bladeStartIndex[c+1],b=1;this.lastNode instanceof ri&&(b=0);let C=this.lastBladeEndIndex+b;if(g<C)if(this.lastBladeEndIndex>g)c+2<e&&(g=this.bladeStartIndex[c+2]);else continue;if(this.shouldSkipForward())for(let E=c;E<this.bladeStartIndex.length;E++){let O=this.bladeStartIndex[E];if(O>this.lastBladeEndIndex){g=O;break}}if(c+1==s&&g<=this.lastBladeEndIndex){if(this.isVerbatim)break;let E=this.currentChunkOffset,O=this.content.substr(C),w=new Zt;w.withParser(this),w.content=this.prepareLiteralContent(O),w.content.length>0&&(w.startPosition=this.positionFromOffset(E,E),w.endPosition=this.positionFromOffset(g,g-1),this.nodes.push(w));break}else{let E=g-this.lastBladeEndIndex-1;if(E<0&&this.lastNode instanceof Ni){let G=!0;for(let rt=c;rt<this.bladeStartIndex.length;rt++){let lt=this.bladeStartIndex[rt];if(lt>this.lastBladeEndIndex){g=lt,G=!1;break}}if(G){let rt=this.currentIndex+f;if(rt<this.inputLen&&!this.isVerbatim){let lt=new Zt;lt.withParser(this),lt.content=this.prepareLiteralContent(this.content.substr(rt)),lt.content.length>0&&(lt.startPosition=this.positionFromOffset(rt,rt),lt.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(lt));break}}}if(E==0||this.isVerbatim)continue;let O=this.content.substr(C,E),w=new Zt;w.withParser(this),w.content=this.prepareLiteralContent(O),w.content.length>0&&(w.startPosition=this.positionFromOffset(C,C),w.endPosition=this.positionFromOffset(g,g-1),this.nodes.push(w))}continue}if(c!==s&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(f,f).isBefore(this.lastNode.endPosition)){if(c+1<e){if(this.bladeStartIndex[c+1]<this.lastNode.endPosition.offset)continue}else if(c+1!=s)continue}if(c==s){let g=this.currentIndex+f;if(g<this.inputLen&&!this.isVerbatim){let b=new Zt;b.withParser(this),b.content=this.prepareLiteralContent(this.content.substr(g)),b.content.length>0&&(b.startPosition=this.positionFromOffset(g,g),b.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(b));break}}}}let r=0;this.nodes.forEach(c=>{c.index=r,r+=1});let h=null;for(let c=0;c<this.nodes.length;c++){let f=this.nodes[c],m=null;c+1<this.nodes.length&&(m=this.nodes[c+1]),f.prevNode=h,f.nextNode=m,h=f}Xe.determineCandidates(this.nodes),this.nodes=bo.rewrite(this.nodes);let l=new yr;return this.renderNodes=l.associate(this.nodes,this),Lo.analyze(this.nodes),Po.analyze(this.nodes),this.nodes.forEach(c=>{if(c instanceof dt){let f=c,m=f.directiveName.toLowerCase();if(f.isClosedBy!=null){let g=f.getImmediateChildren();for(let b=0;b<g.length;b++){let C=g[b];if(C instanceof dt&&C!=f.isClosedBy&&C.isClosedBy!=null){f.containsChildStructures=!0;break}else if(C instanceof ki||C instanceof Ri||C instanceof wi){f.containsChildStructures=!0;break}}}m=="switch"&&f.isClosedBy==null||m=="endswitch"&&f.isOpenedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_SWITCH,f,"Unclosed switch control structure",0)):m=="php"?f.hasDirectiveParameters==!1&&f.isClosedBy==null&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNCLOSED_PHP_DIRECTIVE,f,"Unclosed @php directive",0)):m=="endphp"&&f.isOpenedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,f,"Unpaired @endphp directive",0)):m=="verbatim"&&f.isClosedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_UNCLOSED_VERBATIM,f,"Unclosed @verbatim directive",0)):m=="endverbatim"&&f.isOpenedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,f,"Unpaired @endverbatim directive",0)):m=="for"&&f.isClosedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_UNCLOSED_FOR_DIRECTIVE,f,"Unclosed @for directive",0)):m=="for"&&f.isClosingDirective==!0&&f.isOpenedBy==null?f.pushError(Me.makeSyntaxError(Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,f,"Unpaired @endfor directive",0)):m=="forelse"?(f.isClosedBy==null&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,f,"Unclosed @forelse directive",0)),f.findFirstDirectChildDirectiveOfType("empty")==null&&f.pushError(Me.makeSyntaxError(Yt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,f,"@forelse missing @empty directive",1))):m=="endforelse"&&f.isOpenedBy==null&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,f,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(Fo.transform(this.nodes,this.content)),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(c=>{var f,m,g,b,C,E,O,w,G,rt,lt,K;c instanceof ki?(c.fragment=(m=(f=c.constructedFrom)==null?void 0:f.fragment)!=null?m:null,c.fragmentPosition=(b=(g=c.constructedFrom)==null?void 0:g.fragmentPosition)!=null?b:3):c instanceof wi?(c.fragment=(E=(C=c.constructedFrom)==null?void 0:C.fragment)!=null?E:null,c.fragmentPosition=(w=(O=c.constructedFrom)==null?void 0:O.fragmentPosition)!=null?w:3):c instanceof Ri&&(c.fragment=(rt=(G=c.constructedFrom)==null?void 0:G.fragment)!=null?rt:null,c.fragmentPosition=(K=(lt=c.constructedFrom)==null?void 0:lt.fragmentPosition)!=null?K:3)}),So.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var s,r,h,l;e instanceof Zt||t.push({start:(r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0,end:(l=(h=e.endPosition)==null?void 0:h.index)!=null?l:0})}),t}createChildDocuments(t){t.forEach(e=>{var s,r,h,l,c,f,m,g;if(e instanceof dt&&e.isClosedBy!=null){let b=e.isClosedBy,C=((r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0)-1,E=((l=(h=b.endPosition)==null?void 0:h.index)!=null?l:0)-C;e.nodeContent=this.content.substr(C,E);let O=(f=(c=e.endPosition)==null?void 0:c.index)!=null?f:0,w=((g=(m=b.startPosition)==null?void 0:m.index)!=null?g:0)-1-O,G=this.content.substr(O,w);e.childrenDocument=Se.childFromText(G,this,qi(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}let t=Math.ceil(this.currentIndex/5);t>0&&(this.currentChunkOffset=this.parsingOffset+this.chunkSize*t),this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}parseIntermediateText(t){this.currentContent=[],this.chars=this.content.substring(t).split(""),this.charLen=this.chars.length;let e=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,e=!0;break}if(this.isStartingClosingComponentTag()){let s=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],e=!0;break}if(this.isStartingOpeningComponentTag()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingEscapedEcho()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(s),this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingBladeNodeStructure()){let s=this.peek(2),r=this.peek(3);if(s==Ot.Punctuation_Minus&&r==Ot.Punctuation_Minus){let h=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(h),this.currentContent=[],this.currentIndex+=4,e=!0;break}else if(s==Ot.LeftBrace){let h=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(h+1),this.currentContent=[],this.currentIndex+=3,e=!0;break}else{let h=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(h+1),this.currentContent=[],this.currentIndex+=2,e=!0;break}}}return e}peek(t){return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ze(this.cur)&&ns(this),this.cur==Ot.Punctuation_ForwardSlash&&this.next==Ot.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,tn(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ot.Punctuation_ForwardSlash&&this.next==Ot.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,en(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ot.Punctuation_QuestionMark&&this.next==Ot.Punctuation_GreaterThan||this.next==null){let s=new ri;e&&(s=new yo),s.withParser(this),s.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),s.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let r=s.startPosition.index,h=s.endPosition.index-s.startPosition.index+1;s.sourceContent=this.content.substr(r,h),this.nodes.push(s),this.lastNode=s;break}}}scanToEndOfComponentTag(t,e){let s=!1,r=!1,h=-1,l=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.NewLine&&!s&&(s=!0,h=this.currentIndex),Y.ctypeSpace(this.cur)&&!r&&(r=!0,l=this.currentIndex),ze(this.cur)){this.shouldIgnoreStructures=!0,ns(this),this.shouldIgnoreStructures=!1;continue}let f=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!f)&&(c=!0,h!=-1?(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2)):l!=-1&&(this.currentIndex=l-2,this.currentContent=this.currentContent.slice(0,l-2))),f||c){let m=new Ni;m.withParser(this),m.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),m.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let g=m.startPosition.index,b=m.endPosition.index-m.startPosition.index+1,C=g+b;m.sourceContent=this.content.substr(g,b),m.isClosingTag=e,m.isSelfClosing=this.prev==Ot.Punctuation_ForwardSlash,m.offset={start:g,end:C,length:b};let E=3;m.isSelfClosing&&(E+=1),m.innerContent=this.content.substr(m.startPosition.index+3,m.endPosition.index-m.startPosition.index-E),c&&m.pushError(Me.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,m,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(m),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=m,this.nodes.push(m);break}}}scanToEndOfEscapedEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==Ot.Punctuation_Exclamation&&this.next==Ot.Punctuation_Exclamation&&this.peekRelative(2)==Ot.RightBrace||l){let c=this.currentIndex+2,f=new rs;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let m=f.startPosition.index,g=f.endPosition.index-f.startPosition.index+1,b=m+g;f.sourceContent=this.content.substr(m,g),f.offset={start:m,end:b,length:g},l&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var c,f,m,g,b,C,E,O,w;let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),this.next==null&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==Ot.Punctuation_Minus&&this.next==Ot.Punctuation_Minus||this.next==null){let G=this.peekRelative(2),rt=this.peekRelative(3);if(G==Ot.RightBrace&&rt==Ot.RightBrace||this.next==null){let lt=this.currentIndex+3,K=new Zi;K.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),K.endPosition=this.positionFromOffset(lt+this.seedOffset,lt+this.seedOffset),K.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(lt-4+this.seedOffset,lt-4+this.seedOffset)},K.withParser(this);let z=K.startPosition.index,at=K.endPosition.index-K.startPosition.index+1,B=z+at;K.sourceContent=this.content.substr(z,at),K.offset={start:z,end:B,length:at},l&&K.pushError(Me.makeSyntaxError(Yt.TYPE_UNCLOSED_COMMENT,K,"Unexpected end of input while parsing comment",0)),K.innerContent=this.content.substr((m=(f=(c=K.innerContentPosition)==null?void 0:c.start)==null?void 0:f.index)!=null?m:0,((C=(b=(g=K.innerContentPosition)==null?void 0:g.end)==null?void 0:b.index)!=null?C:0)-((w=(O=(E=K.innerContentPosition)==null?void 0:E.start)==null?void 0:O.index)!=null?w:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=K,this.nodes.push(K);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),ze(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let f=Di(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(c),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==Ot.RightBrace&&this.next==Ot.RightBrace&&this.peekRelative(2)==Ot.RightBrace||l){let c=this.currentIndex+1,f=new os;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let m=f.startPosition.index-1,g=f.endPosition.index-f.startPosition.index+3,b=m+g;f.sourceContent=this.content.substr(m,g),f.offset={start:m,end:b,length:g},l&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,s=!1,r=-1,h=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),ze(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let f=Di(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(c),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==Ot.RightBrace&&this.next==Ot.RightBrace||l){let c=this.currentIndex+1,f=new Ie;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),f.withParser(this);let m=f.startPosition.index-1,g=f.endPosition.index-f.startPosition.index+2,b=m+g;f.sourceContent=this.content.substr(m,g),f.offset={start:m,end:b,length:g},l&&f.pushError(Me.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,s){let r=new dt;if(r.withParser(this),t==At.Verbatim)this.isVerbatim=!0;else if(t==At.Php)this.isPhpNode=!0;else if((t==At.EndVerbatim||t==At.EndPhp)&&this.nodes[this.nodes.length-1]instanceof Zt){let m=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof dt){let g=this.nodes[this.nodes.length-1];(g.directiveName==At.Verbatim||g.directiveName==At.Php)&&(g.innerContent=m.content)}}r.directiveName=t.trim(),r.name=t.trim();let h=r.name.toLowerCase();h=="endcan"||h=="endcannot"||h=="endauth"||h=="endguest"||h=="endenv"||h=="endproduction"?(r.name="if",r.isClosingDirective=!0):t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),c=this.positionFromOffset(this.seedOffset+s,this.seedOffset+s);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index-1,m=r.endPosition.index-r.startPosition.index+1,g=f+m;r.sourceContent=this.content.substr(f,m),r.offset={start:f,end:g,length:m}}return r}makeDirectiveWithParameters(t,e,s,r){var m,g;let h=this.makeDirective(t.trim(),e,s);this.isPhpNode&&t==At.Php&&(this.isPhpNode=!1),h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let l=r.content.trim();l.startsWith("(")&&l.endsWith(")")&&(l=l.substring(1),l=l.substring(0,l.length-1),l=l.trim(),h.hasJsonParameters=l.startsWith("{")&&l.endsWith("}"));let c=this.positionFromOffset(r.start,r.start),f=this.positionFromOffset(r.end,r.end);if(h.startPosition=(g=(m=h.namePosition)==null?void 0:m.start)!=null?g:null,h.endPosition=f,h.directiveParametersPosition={start:c,end:f},h.startPosition!=null&&h.endPosition!=null){let b=h.startPosition.index-1,C=h.endPosition.index-h.startPosition.index+1,E=b+C;h.sourceContent=this.content.substr(b,C),h.offset={start:b,end:E,length:C}}return h}scanToEndOfDirective(){let t=this.currentIndex,e="",s=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ot.Punctuation_ForwardSlash&&this.next==Ot.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,en(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ot.Punctuation_ForwardSlash&&this.next==Ot.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,tn(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ot.NewLine){s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let r=Ks(this);if(this.cur!=Ot.LeftParen&&r.didFind&&Y.ctypePunct(r.char)&&r.char!=Ot.LeftParen&&r.char!=Ot.Punctuation_Minus){let h=0,l=!1;Y.ctypeSpace(this.cur)?(h=1,l=!0):this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let c=this.makeDirective(e.trim(),t,s-h);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-h,l&&(this.currentIndex-=1);break}if(Y.ctypeSpace(this.cur)){let h=Ks(this);if(h.didFind&&h.char==Ot.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=h.index,this.checkCurrentOffsets();let l=$s(this),c;l.foundEnd?c=this.makeDirectiveWithParameters(e.trim(),t,s,l):c=this.makeDirective(e.trim(),t,s),this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let l=this.makeDirective(e.trim(),t,s);this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==Ot.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let h=$s(this),l;h.foundEnd?l=this.makeDirectiveWithParameters(e.trim(),t,s,h):l=this.makeDirective(e.trim(),t,s),this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(s=>{var r,h,l,c,f;if(s instanceof Zt)e+=s.content;else if(s instanceof wi)e+=s.nodeContent;else if(s instanceof Ri)e+=s.nodeContent;else if(s instanceof ki)e+=s.nodeContent;else if(s instanceof dt)if((s.name=="php"||s.name=="verbatim")&&s.isClosedBy!=null){if(s.documentContent.trim().length==0){let m=(f=s.getParser())==null?void 0:f.getText((h=(r=s.endPosition)==null?void 0:r.index)!=null?h:0,((c=(l=s.isClosedBy.startPosition)==null?void 0:l.index)!=null?c:0)-1);e+=s.sourceContent,e+=m}}else e+=s.sourceContent;else e+=s.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let s=[];return this.nodes.forEach(r=>{var h,l,c,f;((l=(h=r.startPosition)==null?void 0:h.offset)!=null?l:0)>t.offset&&((f=(c=r.endPosition)==null?void 0:c.offset)!=null?f:0)<e.offset&&s.push(r)}),s}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,h=c.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let c=null,f=null,m=null,g=null;for(let b of this.documentOffsets.keys()){if(b>=t){g!=null&&t>g?(c=m,f=g):(c=this.documentOffsets.get(b),f=b);break}m=this.documentOffsets.get(b),g=b}c==null&&(c=m,f=g),c!=null?(h=t-(f!=null?f:0),r=c.line,t<=(f!=null?f:0)?(r=c.line,h=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let l=new On;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=h,l}},Z=Ot;Z.K_CHAR="char",Z.K_LINE="line",Z.NewLine=`
`,Z.AtChar="@",Z.Punctuation_Colon=":",Z.Punctuation_QuestionMark="?",Z.LeftParen="(",Z.RightParen=")",Z.LeftBrace="{",Z.RightBrace="}",Z.String_Terminator_DoubleQuote='"',Z.String_Terminator_SingleQuote="'",Z.Punctuation_LessThan="<",Z.Punctuation_GreaterThan=">",Z.Punctuation_Equals="=",Z.Punctuation_Exclamation="!",Z.LeftBracket="[",Z.RightBracket="]",Z.Punctuation_Comma=",",Z.Punctuation_Minus="-",Z.Punctuation_Asterisk="*",Z.Punctuation_ForwardSlash="/",Z.Punctuation_Underscore="_",Z.String_EscapeCharacter="\\"});var oi,uh=St(()=>{"use strict";Fe();oi=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!oi.isLiteralType(r)&&r.startPosition!=null&&r.startPosition.index>t.index)return r}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let s=null;for(let r=0;r<e.length;r++){let h=e[r];if(!oi.isLiteralType(h)&&h.startPosition!=null){if(h.startPosition.index>t.index)break;s=h}}return s}static findNodeAtPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!oi.isLiteralType(r)&&r.startPosition!=null&&r.endPosition!=null&&t.index>=r.startPosition.index&&t.index<=r.endPosition.index)return r}return null}static isLiteralType(t){return t instanceof Zt}static findNodesBeforePosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];if(!oi.isLiteralType(h)&&h.startPosition!=null&&h.endPosition!=null){if(h.startPosition.index>t.index)break;s.push(h)}}return s}static findNodesAfterPosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];oi.isLiteralType(h)||h.startPosition!=null&&h.startPosition.index>t.index&&s.push(h)}return s}}});var Bo,If=St(()=>{"use strict";uh();Bo=class{constructor(t){this.doc=t}getNodeAt(t,e){return oi.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return oi.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return oi.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return oi.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return oi.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,s=4){return this.doc.getParser().wordLeftAtCursor(t,e,s)}wordRightAt(t,e,s=4){return this.doc.getParser().wordRightAtCursor(t,e,s)}wordAt(t,e,s=4){return this.doc.getParser().wordAtCursor(t,e,s)}punctuationLeftAt(t,e,s=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,s)}punctuationRightAt(t,e,s=4){return this.doc.getParser().punctuationRightAtCursor(t,e,s)}}});var Mo,Sf=St(()=>{"use strict";Mo=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(s=>{s.getErrors().forEach(r=>{t.includes(r.hash())==!1&&(t.push(r.hash()),e.push(r))})}),this.doc.getParser().getErrors().forEach(s=>{t.includes(s.hash())==!1&&(t.push(s.hash()),e.push(s))}),e}}});var Uo,Of=St(()=>{"use strict";Fe();uh();Uo=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let s=0;s<e.length;s++){let r=e[s];if(r instanceof dt&&r.directiveName==t)return r}return null}getNodeAt(t){return oi.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return oi.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return oi.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return oi.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return oi.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Zi&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Zt&&t.push(e)}),t}}});var Pf=H((bL,Lf)=>{"use strict";Lf.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${i}" at line ${this.yylineno} (offset ${this.offset})`)}}});var Rf=H((NL,Df)=>{"use strict";Df.exports={T_COMMENT:function(){for(;this.offset<this.size;){let i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let i=this.input(),t=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),i==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(i=this.input(),i==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var Ff=H((AL,wf)=>{"use strict";wf.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let i=this.input();if(i=="<"){if(i=this.ahead(1),i=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(i=this._input[this.offset+4],i===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var Uf=H((IL,Mf)=>{"use strict";var Ho=10,Bf="2147483648";process.arch=="x64"&&(Ho=19,Bf="9223372036854775808");Mf.exports={consume_NUM:function(){let i=this.yytext[0],t=i===".";if(i==="0")if(i=this.input(),i==="x"||i==="X"){if(i=this.input(),i!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if(i=this.input(),i!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){let e=i;if(i=this.input(),i==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(i==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(i==="e"||i==="E"){if(e==="_"){this.unput(1);break}let s=2;if(i=this.input(),(i==="+"||i==="-")&&(s=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?s:s-1);break}if(!this.is_NUM()){i&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<Ho-1?this.tok.T_LNUMBER:this.yytext.length<Ho||this.yytext.length==Ho&&this.yytext<Bf?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER}}});var Vf=H((SL,Hf)=>{"use strict";Hf.exports={matchST_LOOKING_FOR_PROPERTY:function(){let i=this.input();if(i==="-"){if(i=this.input(),i===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),i=this.input(),i==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}}}});var Wf=H((OL,Gf)=>{"use strict";Gf.exports={matchST_IN_SCRIPTING:function(){let i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),i=this._input[this.offset],(i===`
`||i==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!(i===" "||i==="	"||i===`
`||i==="\r")){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var Qf=H((LL,Yf)=>{"use strict";var hs=[`
`,"\r"],qf=[`
`,"\r",";"],yA=qf.concat(["	"," ",",","]",")","/","=","!"]);Yf.exports={T_CONSTANT_ENCAPSED_STRING:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let s=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,hs.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,e=this.offset-i,this.offset=i,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else{if(i=='"')break;if(i=="$"){if(i=this.input(),i=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if(i=this.input(),i=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(i,t){let e=this._input[i-2];if(!hs.includes(e))return!1;let s=!1,r=!1,h=0,l=this._input[i-1];if(this.version>=703){for(;l==="	"||l===" ";)l===" "?s=!0:l==="	"&&(r=!0),l=this._input[i+h],h++;if(i=i+h,hs.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){let c=this._input[i-1+this.heredoc_label.length];if((this.version>=703?yA:qf).includes(c)){if(t){if(this.consume(h),s&&r)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=h,this.heredoc_label.indentation_uses_spaces=s,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let i=this.offset+1;for(;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!hs.includes(this._input[i-1]))for(;!hs.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let i=this._input[this.offset-1];for(;this.offset<this.size;)if(hs.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),hs.includes(i)||(i=this.input())),hs.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}i&&this.unput(1)}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var zf=H((PL,jf)=>{"use strict";jf.exports={T_STRING:function(){let i=this.yytext.toLowerCase(),t=this.keywords[i];if(typeof t!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,i==="b"||i==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,s=this.input();for(;s==" ";)s=this.input();let r=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();let h=s.slice(0,-1).toLowerCase();r=h!=="extends"&&h!=="implements"}return this.unput(this.offset-e),r?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let i=this._input[this.offset-1],t=this.tokenTerminals[i];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),s=this.castKeywords[e];if(typeof s=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return s}return this.unput(this.offset-i),"("},"=":function(){let i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var $f=H((DL,Kf)=>{"use strict";var CA=";:,.\\[]()|^&+-/*=%!~$<>?@";Kf.exports={is_NUM:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){let i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){let i=this._input[this.offset-1];return CA.indexOf(i)!==-1},is_WHITESPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95}}});var Xf=H((RL,Jf)=>{"use strict";var Ai=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};Ai.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};Ai.prototype.input=function(){let i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""};Ai.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};Ai.prototype.tryMatch=function(i){return i===this.ahead(i.length)};Ai.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()};Ai.prototype.ahead=function(i){let t=this._input.substring(this.offset,this.offset+i);return t[t.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(t+=`
`),t};Ai.prototype.consume=function(i){for(let t=0;t<i;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};Ai.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};Ai.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this};Ai.prototype.appendToken=function(i,t){return this.tokens.push([i,t]),this};Ai.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i};Ai.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this};Ai.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};Ai.prototype.next=function(){let i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(i=this.tokens.shift(),typeof i[1]=="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=i;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return i};[Pf(),Rf(),Ff(),Uf(),Vf(),Wf(),Qf(),zf(),$f()].forEach(function(i){for(let t in i)Ai.prototype[t]=i[t]});Jf.exports=Ai});var ch=H((wL,Zf)=>{"use strict";var bA=function(i,t,e){this.line=i,this.column=t,this.offset=e};Zf.exports=bA});var ed=H((FL,td)=>{"use strict";td.exports={read_array:function(){let i=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(t=!0,i="]");let s=[];return this.next().token!==i&&(s=this.read_array_pair_list(t)),this.expect(i),this.next(),e(t,s)},read_array_pair_list:function(i){let t=this;return this.read_list(function(){return t.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!i&&this.token===")"||i&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,s=null,r=!1,h=!1;if(this.token==="&")this.next(),r=!0,s=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),h=!0,s=this.read_expr();else{let l=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=l,this.token==="&"?(this.next(),r=!0,s=this.read_variable(!0,!1)):s=this.read_expr()):s=l}return t(e,s,r,h)}}});var nd=H((BL,id)=>{"use strict";id.exports={read_class_declaration_statement:function(i){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let s=this.node("identifier"),r=this.text();this.next(),s=s(r);let h=this.read_extends_from(),l=this.read_implements_list();this.expect("{");let c=this.next().read_class_body(!0,!1),f=t(s,h,l,c,e);return i&&(f.attrGroups=i),f},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(i,t){let e=[],s=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let l=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(l);continue}this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list());let r=this.position(),h=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let l=this.read_constant_list(h,s);this.expect(";")&&this.next(),e=e.concat(l);continue}if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),h[0]=null,h[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,h,s,r)),s=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE))){let l=this.read_variable_list(h,s);s=[],this.expect(";"),this.next(),e=e.concat(l)}else this.error([this.tok.T_CONST,...i?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(i,t){let e=this.node("propertystatement"),s=this.read_list(function(){let h=this.node("property"),l=!1;this.token===this.tok.T_READ_ONLY&&(l=!0,this.next());let[c,f]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let m=this.node("identifier"),g=this.text().substring(1);return this.next(),m=m(g),this.token===";"||this.token===","?h(m,null,l,c,f,t||[]):this.token==="="?h(m,this.next().read_expr(),l,c,f,t||[]):(this.expect([",",";","="]),h(m,null,c,f,t||[]))},",");return e(null,s,i)},read_constant_list:function(i,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),s=this.read_list(function(){let h=this.node("constant"),l=null,c=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){l=this.node("identifier");let f=this.text();this.next(),l=l(f)}else this.expect("IDENTIFIER");return this.expect("=")&&(c=this.next().read_expr()),h(l,c)},",");return e(null,s,i,t||[])},read_member_flags:function(i){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,s=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,s=0;break;case this.tok.T_PROTECTED:e=0,s=1;break;case this.tok.T_PRIVATE:e=0,s=2;break;case this.tok.T_STATIC:e=1,s=1;break;case this.tok.T_ABSTRACT:e=2,s=1;break;case this.tok.T_FINAL:e=2,s=2;break}i&&(e==0&&s==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),s=-1):e==2&&s==1&&(this.error(),s=-1)),t[e]!==-1?this.error():s!==-1&&(t[e]=s)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let i=!1;this.token==="?"&&(i=!0,this.next());let t=this.read_types();if(i&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[i,t]},read_interface_declaration_statement:function(i){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_interface_extends_list();this.expect("{");let h=this.next().read_interface_body();return t(e,r,h,i||[])},read_interface_body:function(){let i=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let s=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let r=this.read_constant_list(s,t);this.expect(";")&&this.next(),i=i.concat(r),t=[]}else if(this.token===this.tok.T_FUNCTION){let r=this.read_function_declaration(2,s,t,e);r.parseFlags(s),i.push(r),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){let i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let s=this.next().read_class_body(!0,!1);return i(t,s)},read_trait_use_statement:function(){let i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(t,e)},read_trait_use_alias:function(){let i=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return i("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let s=null,r=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){r=this.node("identifier");let h=this.text();this.next(),r=r(h)}else s===!1&&this.expect(this.tok.T_STRING);return i("traitalias",t,e,r,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),i("traitalias",t,e,null,null)}}});var rd=H((ML,sd)=>{"use strict";sd.exports={read_comment:function(){let i=this.text(),t=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=s,t},read_doc_comment:function(){let i=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),i=i(e),i.offset=t,this.prev=s,i}}});var ad=H((UL,od)=>{"use strict";od.exports={read_expr:function(i){let t=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),t("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return t("bin","|",i,this.next().read_expr());if(this.token==="&")return t("bin","&",i,this.next().read_expr());if(this.token==="^")return t("bin","^",i,this.next().read_expr());if(this.token===".")return t("bin",".",i,this.next().read_expr());if(this.token==="+")return t("bin","+",i,this.next().read_expr());if(this.token==="-")return t("bin","-",i,this.next().read_expr());if(this.token==="*")return t("bin","*",i,this.next().read_expr());if(this.token==="/")return t("bin","/",i,this.next().read_expr());if(this.token==="%")return t("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",i,this.next().read_expr());if(this.token==="<")return t("bin","<",i,this.next().read_expr());if(this.token===">")return t("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=t("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return t("bin","??",i,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",i,e,this.read_expr())}else t.destroy(i);return i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let i=null;switch(this.token){case this.tok.T_ISSET:{i=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_EMPTY:{i=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{i=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr());break}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){let i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){let i,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let s=null,r=this.innerList;i=this.node("list"),r||(s=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let h=this.read_array_pair_list(!1);this.expect(")")&&this.next();let l=!1;for(let c=0;c<h.length;c++)if(h[c]!==null&&h[c].kind!=="noop"){l=!0;break}return l||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),r?i(h,!1):(this.innerList=!1,this.expect("=")?s(i(h,!1),this.next().read_expr(),"="):i(h,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let s=this.node("throw"),r=this.next().read_expr();return s(r)}case this.tok.T_EXIT:{let s=this.lexer.yytext.toLowerCase()==="die";i=this.node("exit"),this.next();let r=this.read_exit_expr();return i(r,s)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let s=null,r=null;return i=this.node("yield"),this.next().is("EXPR")&&(s=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(r=s,s=this.next().read_expr())),i(s,r)}case this.tok.T_YIELD_FROM:return i=this.node("yieldfrom"),t=this.next().read_expr(),i(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let s=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(s),this.next()}}if(this.is("VARIABLE")){i=this.node(),t=this.read_variable(!1,!1);let s=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return s&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,t):i("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return s&&this.error("VARIABLE"),this.next(),i("post","+",t);case this.tok.T_DEC:return s&&this.error("VARIABLE"),this.next(),i("post","-",t);default:i.destroy(t)}}else if(this.is("SCALAR")){if(i=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let s=this.convertToList(t);t.loc&&(s.loc=t.loc);let r=this.next().read_expr();return i("assign",s,r,"=")}else i.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(i){let t=i.items.map(s=>(s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=this.convertToList(s.value)),s)),e=this.node("list")(t,!0);return i.loc&&(e.loc=i.loc),i.leadingComments&&(e.leadingComments=i.leadingComments),i.trailingComments&&(e.trailingComments=i.trailingComments),e},read_assignref:function(i,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),i("assignref",t,e)},read_inline_function:function(i,t){if(this.token===this.tok.T_FUNCTION){let m=this.read_function(!0,i,t);return m.attrGroups=t,m}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let s=this.is_reference();this.expect("(")&&this.next();let r=this.read_parameter_list();this.expect(")")&&this.next();let h=!1,l=null;this.token===":"&&(this.next().token==="?"&&(h=!0,this.next()),l=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let c=this.read_expr(),f=e(r,s,c,l,h,!!i);return f.attrGroups=t,f},read_match_expression:function(){let i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),i(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute(){let i=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(i,t)},read_attr_list(){let i=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());i.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){let i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[],e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let r=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let h=this.read_extends_from(),l=this.read_implements_list(),c=null;this.expect("{")&&(c=this.next().read_class_body(!0,!1));let f=r(null,h,l,c,[0,0,0]);return f.attrGroups=e,i(f,t)}let s=this.read_new_class_name();for(;this.token==="[";){let r=this.node("offsetlookup"),h=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),s=r(s,h)}return this.token==="("&&(t=this.read_argument_list()),i(s,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else if(this.token==="(")i=this.node("call")(i,this.read_argument_list());else return i;return i}}});var ld=H((HL,hd)=>{"use strict";hd.exports={read_enum_declaration_statement:function(i){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_enum_value_type(),h=this.read_implements_list();this.expect("{");let l=this.next().read_class_body(!1,!0),c=t(e,r,h,l);return i&&(c.attrGroups=i),c},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let i=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let s=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(t,s)}}});var cd=H((VL,ud)=>{"use strict";ud.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(i,t,e,s){let r=this.read_function_declaration(i?1:t?2:0,t&&t[1]===1,e||[],s);return t&&t[2]==1?(r.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(r.body=this.read_code_block(!1),r.loc&&r.body.loc&&(r.loc.end=r.body.loc.end)),!i&&t&&r.parseFlags(t)),r},read_function_declaration:function(i,t,e,s){let r="function";i===1?r="closure":i===2&&(r="method");let h=this.node(r);this.expect(this.tok.T_FUNCTION)&&this.next();let l=this.is_reference(),c=!1,f=[],m=null,g=!1;if(i!==1){let E=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(c=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(c=this.text()),this.next()),c=E(c)}this.expect("(")&&this.next();let b=this.read_parameter_list(c.name==="__construct");this.expect(")")&&this.next(),i===1&&(f=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(g=!0,this.next()),m=this.read_types());let C=E=>(E.attrGroups=e||[],s&&E.loc&&(E.loc.start=s,E.loc.source&&(E.loc.source=this.lexer._input.substr(E.loc.start.offset,E.loc.end.offset-E.loc.start.offset))),E);return C(i===1?h(b,l,f,m,g,t):h(c,b,l,m,g))},read_lexical_vars:function(){let i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){let t=[];for(;this.token!=this.EOF;)if(t.push(i()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let i=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),i(t,!1)},read_parameter_list:function(i){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(i);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(i){let t=this.node("parameter"),e=null,s=null,r=null,h=!1,l=!1,c=[];this.token===this.tok.T_ATTRIBUTE&&(c=this.read_attr_list());let f=this.read_promoted();this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),h=!0),r=this.read_types(),h&&!r&&this.raiseError("Expecting a type definition combined with nullable operator");let m=this.is_reference(),g=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let C=this.text().substring(1);this.next(),e=e(C)}this.token=="="&&(s=this.next().read_expr());let b=t(e,r,s,m,g,l,h,f);return c&&(b.attrGroups=c),b},read_types(){let i="unset",t="union",e="intersection",s=[],r=i,h=this.read_type();if(!h)return null;for(s.push(h);this.token==="|"||this.version>=801&&this.token==="&";){let l=this.peek();if(l===this.tok.T_ELLIPSIS||l===this.tok.T_VARIABLE)break;r===i?r=this.token==="|"?t:e:(r===t&&this.token!=="|"||r===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),s.push(this.read_type())}return s.length===1?s[0]:r===e?this.node("intersectiontype")(s):this.node("uniontype")(s)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){let i=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";i&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(i=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),i("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?i("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}}});var dd=H((GL,fd)=>{"use strict";fd.exports={read_if:function(){let i=this.node("if"),t=this.next().read_if_expr(),e=null,s=null,r=!1;if(this.token===":"){r=!0,this.next(),e=this.node("block");let h=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}h.push(this.read_inner_statement())}e=e(null,h),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?s=this.read_if():this.token===this.tok.T_ELSE&&(s=this.next().read_statement());return i(t,e,s,r)},read_if_expr:function(){this.expect("(")&&this.next();let i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){let i=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let s=this.node("block"),r=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}r.push(this.read_inner_statement())}return t(e,s(null,r),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let i=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return i(null,t)}}});var _d=H((WL,pd)=>{"use strict";pd.exports={read_while:function(){let i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,s=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(s=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),i(t,e,s)},read_do:function(){let i=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(t,e)},read_for:function(){let i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],s=[],r=null,h=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(s=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOR)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach:function(){let i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,s=null,r=null,h=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),s=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=s,s=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOREACH)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let i=this.token==="[",t=this.node("list");this.next(),!i&&this.expect("(")&&this.next();let e=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),t(e,i)}else return this.read_variable(!1,!1)}}});var gd=H((qL,md)=>{"use strict";md.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var kd=H((YL,Td)=>{"use strict";Td.exports={read_namespace:function(){let i=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(i){let t=this.node(),e,s=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,s=s.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(s.toLowerCase()==="parent")return t("parentreference",s);if(s.toLowerCase()==="self")return t("selfreference",s)}return t("name",s,e)},read_use_statement:function(){let i=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let s=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(s===null),this.expect("}")&&this.next()),i=i(e,s,t),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){let t=this.node("useitem"),e=null;i&&(e=this.read_use_type());let s=this.read_namespace_name(),r=this.read_use_alias();return t(s.name,r,e)},read_use_declarations:function(i){let t=[this.read_use_declaration(i)];for(;this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(i))}return t},read_use_alias:function(){let i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),i=t(e)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var vd=H((QL,Ed)=>{"use strict";var xd={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};Ed.exports={resolve_special_chars:function(i,t){return t?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,s,r)=>xd[s]?xd[s]:s[0]==="x"||s[0]==="X"?String.fromCodePoint(parseInt(s.substr(1),16)):s[0]==="u"?String.fromCodePoint(parseInt(r,16)):String.fromCodePoint(parseInt(s,8))):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,t,e,s){if(t===0)return i;this.check_heredoc_indentation_level(i,t,e,s);let r=e?" ":"	",h=new RegExp(`\\n${r}{${t}}`,"g"),l=new RegExp(`^${r}{${t}}`);return s&&(i=i.replace(l,"")),i.replace(h,`
`)},check_heredoc_indentation_level:function(i,t,e,s){let r=i.length,h=0,l=0,c=!0,f=e?" ":"	",m=!1;if(!s){if(h=i.indexOf(`
`),h===-1)return;h++}for(;h<r;)c?i[h]===f?l++:m=!0:c=!1,i[h]!==`
`&&m&&l<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):m=!1,i[h]===`
`&&(c=!0,l=0),h++},read_dereferencable_scalar:function(){let i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),s=0;(e[0]==="b"||e[0]==="B")&&(s=1);let r=e[s]==='"';this.next();let h=this.resolve_special_chars(e.substring(s+1,e.length-1),r);t=t(r,h,s===1,e),this.token===this.tok.T_DOUBLE_COLON?i=this.read_static_getter(t):i=t}break;case this.tok.T_ARRAY:i=this.read_array();break;case"[":i=this.read_array();break}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let i,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return i=this.text(),this.next(),e(i,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));let s=i[i.length-1];s===`
`?i[i.length-2]==="\r"?i=i.substring(0,i.length-2):i=i.substring(0,i.length-1):s==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let r=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),r,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(i){let t,e,s=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=s(i,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=s(i,e)),t},read_encapsed_string_item:function(i){let t=this.node("encapsedpart"),e=null,s=!1,r=this.node(),h,l,c;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let f=this.text();this.next(),r=r("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(f,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):f,!1,f)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",s=!0,c=null,this.next().token===this.tok.T_STRING_VARNAME){c=this.node("variable");let f=this.text();this.next(),r.destroy(),this.token==="["?(c=c(f,!1),l=this.node("offsetlookup"),h=this.next().read_expr(),this.expect("]")&&this.next(),r=l(c,h)):r=c(f,!1)}else r=r("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",r.destroy(),r=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",r.destroy(),r=this.read_simple_variable(),this.token==="["&&(l=this.node("offsetlookup"),h=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),r=l(r,h)),this.token===this.tok.T_OBJECT_OPERATOR){l=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let f=this.node("identifier");c=this.text(),this.next(),r=l(r,f(c))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let f=this.text();this.next(),r.destroy(),r=r("string",!1,f,!1,f)}return this.lexer.heredoc_label.first_encaps_node=!1,t(r,e,s)},read_encapsed_string:function(i,t=!1){let e=this.lexer.yylloc.first_offset,s=this.node("encapsed");this.next();let r=this.lexer.yylloc.prev_offset-(t?1:0),h=[],l=null;for(i==="`"?l=this.ast.encapsed.TYPE_SHELL:i==='"'?l=this.ast.encapsed.TYPE_STRING:l=this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)h.push(this.read_encapsed_string_item(!0));if(h.length>0&&h[h.length-1].kind==="encapsedpart"&&h[h.length-1].expression.kind==="string"){let f=h[h.length-1].expression,m=f.value[f.value.length-1];m===`
`?f.value[f.value.length-2]==="\r"?f.value=f.value.substring(0,f.value.length-2):f.value=f.value.substring(0,f.value.length-1):m==="\r"&&(f.value=f.value.substring(0,f.value.length-1))}this.expect(i)&&this.next();let c=this.lexer._input.substring(l==="heredoc"?e:r-1,this.lexer.yylloc.first_offset);return s=s(h,c,l),i===this.tok.T_END_HEREDOC&&(s.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),s},get_magic_constant:function(){let i=this.node("magic"),t=this.text();return this.next(),i(t.toUpperCase(),t)}}});var Cd=H((jL,yd)=>{"use strict";yd.exports={read_top_statements:function(){let i=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_top_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let i=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let i=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?i(t,this.next().read_expr()):i(t,null)},",",!1)},read_declare_list:function(){let i=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=null;if(this.expect("=")&&(r=this.next().read_expr()),i.push(t(e,r)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=i,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let i=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_GLOBAL:{let i=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),i(t)}case this.tok.T_STATIC:{let i=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(i);let s=this.next().read_expr();return this.expectEndOfStatement(s),t("expressionstatement",s)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let i=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",s=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),i(s,e)}case this.tok.T_INLINE_HTML:{let i=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let s=this.node("inline");return this.next(),s(i,e?t+i:i)}case this.tok.T_UNSET:{let i=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),i(t)}case this.tok.T_DECLARE:{let i=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let s=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return i(s,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let i=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),i(t)}case";":return this.next(),null;case this.tok.T_STRING:{let i=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),s=this.node("identifier");if(this.next().token===":")return s=s(e),this.next(),i("label",s);s.destroy(),i.destroy(),this.lexer.tokens.push(t);let r=this.node("expressionstatement"),h=this.next().read_expr();return this.expectEndOfStatement(h),r(h)}case this.tok.T_GOTO:{let i=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return i(t)}default:{let i=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),i(t)}}},read_code_block:function(i){let t=this.node("block");this.expect("{")&&this.next();let e=i?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var Nd=H((zL,bd)=>{"use strict";bd.exports={read_switch:function(){let i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",s=this.read_switch_case_list();return i(t,s,e)},read_switch_case_list:function(){let i=null,t=this.node("block"),e=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)e.push(this.read_case_list(i));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(i){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let s=this.node("block"),r=[];for(;this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)r.push(this.read_inner_statement());return t(e,s(null,r))}}});var Id=H((KL,Ad)=>{"use strict";Ad.exports={read_try:function(){this.expect(this.tok.T_TRY);let i=this.node("try"),t=null,e=[],s=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let r=this.node("catch");this.next().expect("(")&&this.next();let h=this.read_list(this.read_namespace_name,"|",!1),l=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(l=this.read_variable(!0,!1)),this.expect(")"),e.push(r(this.next().read_statement(),h,l))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),i(s,e,t)}}});var Od=H(($L,Sd)=>{"use strict";Sd.exports={read_short_form:function(i){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(i,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(i.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(i,t,e){let s=[];if(this.token==t&&(e&&s.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{let r=i.apply(this,[]);if(r&&s.push(r),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(i))s.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=i);)s.push(this.text())}return s},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){let t=this.node("byref");this.next(),t=t(null);let e=i();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let i=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?i(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var Pd=H((JL,Ld)=>{"use strict";Ld.exports={read_variable:function(i,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let s=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(s.kind)===-1){let r=s.name.toLowerCase();r==="true"?e=s.destroy(e("boolean",!0,s.name)):r==="false"?e=s.destroy(e("boolean",!1,s.name)):r==="null"?e=s.destroy(e("nullkeyword",s.name)):(e.destroy(s),e=s)}else e.destroy(s),e=s}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,i,t)},read_static_getter:function(i,t){let e=this.node("staticlookup"),s,r;return this.next().is([this.tok.T_VARIABLE,"$"])?s=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(s=this.node("identifier"),r=this.text(),this.next(),s=s(r)):this.token==="{"?(s=this.node("literal"),r=this.next().read_expr(),this.expect("}")&&this.next(),s=s("literal",r,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),s=this.node("identifier"),r=this.text(),this.next(),s=s(r)),e(i,s)},read_what:function(i=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(i,t,e){let s,r;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":{let l=this.token==="[";s=this.node("offsetlookup"),this.next(),r=!1,e?(r=this.read_encaps_var_offset(),this.expect(l?"]":"}")&&this.next()):(l?this.token!=="]":this.token!=="}")?(r=this.read_expr(),this.expect(l?"]":"}")&&this.next()):this.next(),i=s(i,r);break}case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),s=this.node("staticlookup"),i=s(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{s=this.node("propertylookup"),i=s(i,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{s=this.node("nullsafepropertylookup"),i=s(i,this.read_what());break}default:break t}return i},read_encaps_var_offset:function(){let i=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),i=i("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),i=i("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),i=i("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),i=i("identifier",t)}return i},read_reference_variable:function(i){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let s=this.node();if(this.token=="{"&&!i)e=this.next().read_expr(),this.expect("}")&&this.next(),t=s("offsetlookup",t,e);else{s.destroy();break}}return t},read_simple_variable:function(){let i=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),i=i(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),i=i(e,!0);break}case"$":i=i(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),i=i(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),i=i(t,!1)}return i}}});var Rd=H((XL,Dd)=>{"use strict";var NA=ch();function dh(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}var xi=function(i,t){this.lexer=i,this.ast=t,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(s){return[s,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};xi.prototype.getTokenName=function(i){return dh(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"};xi.prototype.parse=function(i,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),s=[];for(this.next();this.token!=this.EOF;)s.push(this.read_start());s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let r=e(s,this._errors,this._docs,this._tokens);if(this.debug){let h=this.ast.checkNodes();if(h.length>0)throw h.forEach(function(l){l.position&&console.log("Node at line "+l.position.line+", column "+l.position.column),console.log(l.stack.join(`
`))}),new Error("Some nodes are not closed")}return r};xi.prototype.raiseError=function(i,t,e,s){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let h=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw h.lineNumber=this.lexer.yylloc.first_line,h.fileName=this.filename,h.columnNumber=this.lexer.yylloc.first_column,h}let r=this.ast.prepare("error",null,this)(i,s,this.lexer.yylloc.first_line,e);return this._errors.push(r),r};xi.prototype.error=function(i){let t="Parse Error : syntax error",e=this.getTokenName(this.token),s="";if(this.token!==this.EOF){if(dh(this.token)){let r=this.text();r.length>10&&(r=r.substring(0,7)+"..."),e="'"+r+"' ("+e+")"}t+=", unexpected "+e}return i&&!Array.isArray(i)&&((dh(i)||i.length===1)&&(s=", expecting "+this.getTokenName(i)),t+=s),this.raiseError(t,s,i,e)};xi.prototype.position=function(){return new NA(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};xi.prototype.node=function(i){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(t)));let e=this.ast.prepare(i,t,this);return e.postBuild=function(s){if(this._docIndex<this._docs.length)if(this._lastNode){let r=this.prev[2],h=this._docIndex;for(;h<this._docs.length&&!(this._docs[h].offset>r);h++);h>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,h)),this._docIndex=h)}else this.token===this.EOF&&(s.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=s}.bind(this),e}return this.ast.prepare(i,null,this)};xi.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var fh=["parser.next","parser.node","parser.showlog"];xi.prototype.showlog=function(){let i=new Error().stack.split(`
`),t;for(let e=2;e<i.length;e++){t=i[e].trim();let s=!1;for(let r=0;r<fh.length;r++)if(t.substring(3,3+fh[r].length)===fh[r]){s=!0;break}if(!s)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};xi.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0};xi.prototype.text=function(){return this.lexer.yytext};xi.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};xi.prototype.peek=function(){let i=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(i),t};xi.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let i=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?i=[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:i=[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};xi.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)};[ed(),nd(),rd(),ad(),ld(),cd(),dd(),_d(),gd(),kd(),vd(),Cd(),Nd(),Id(),Od(),Pd()].forEach(function(i){for(let t in i){if(Object.prototype.hasOwnProperty.call(xi.prototype,t))throw new Error("Function "+t+" is already defined - collision");xi.prototype[t]=i[t]}});Dd.exports=xi});var Fd=H((ZL,wd)=>{"use strict";var AA={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE",239:"T_ENUM",240:"T_READ_ONLY",241:"T_NAME_RELATIVE",242:"T_NAME_QUALIFIED",243:"T_NAME_FULLY_QUALIFIED"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243}};wd.exports=Object.freeze(AA)});var Md=H((tP,Bd)=>{"use strict";var IA=function(i,t,e){this.source=i,this.start=t,this.end=e};Bd.exports=IA});var ai=H((eP,Ud)=>{"use strict";var br=function(t,e,s){this.kind=t,e&&(this.leadingComments=e),s&&(this.loc=s)};br.prototype.setTrailingComments=function(i){this.trailingComments=i};br.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i};br.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this};br.extends=function(i,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=i,t};Ud.exports=br});var Te=H((iP,Gd)=>{"use strict";var Hd=ai(),Vd="expression";Gd.exports=Hd.extends(Vd,function(t,e,s){Hd.apply(this,[t||Vd,e,s])})});var Qd=H((nP,Yd)=>{"use strict";var Wd=Te(),qd="array";Yd.exports=Wd.extends(qd,function(t,e,s,r){Wd.apply(this,[qd,s,r]),this.items=e,this.shortForm=t})});var $d=H((sP,Kd)=>{"use strict";var jd=Te(),zd="arrowfunc";Kd.exports=jd.extends(zd,function(t,e,s,r,h,l,c,f){jd.apply(this,[zd,c,f]),this.arguments=t,this.byref=e,this.body=s,this.type=r,this.nullable=h,this.isStatic=l||!1})});var tp=H((rP,Zd)=>{"use strict";var Jd=Te(),Xd="assign";Zd.exports=Jd.extends(Xd,function(t,e,s,r,h){Jd.apply(this,[Xd,r,h]),this.left=t,this.right=e,this.operator=s})});var sp=H((oP,np)=>{"use strict";var ep=Te(),ip="assignref";np.exports=ep.extends(ip,function(t,e,s,r){ep.apply(this,[ip,s,r]),this.left=t,this.right=e})});var hp=H((aP,ap)=>{"use strict";var rp=ai(),op="attribute";ap.exports=rp.extends(op,function(t,e,s,r){rp.apply(this,[op,s,r]),this.name=t,this.args=e})});var fp=H((hP,cp)=>{"use strict";var lp=ai(),up="attrgroup";cp.exports=lp.extends(up,function(t,e,s){lp.apply(this,[up,e,s]),this.attrs=t||[]})});var As=H((lP,_p)=>{"use strict";var dp=Te(),pp="operation";_p.exports=dp.extends(pp,function(t,e,s){dp.apply(this,[t||pp,e,s])})});var kp=H((uP,Tp)=>{"use strict";var mp=As(),gp="bin";Tp.exports=mp.extends(gp,function(t,e,s,r,h){mp.apply(this,[gp,r,h]),this.type=t,this.left=e,this.right=s})});var ye=H((cP,vp)=>{"use strict";var xp=ai(),Ep="statement";vp.exports=xp.extends(Ep,function(t,e,s){xp.apply(this,[t||Ep,e,s])})});var Nr=H((fP,bp)=>{"use strict";var yp=ye(),Cp="block";bp.exports=yp.extends(Cp,function(t,e,s,r){yp.apply(this,[t||Cp,s,r]),this.children=e.filter(Boolean)})});var qn=H((dP,Ip)=>{"use strict";var Np=Te(),Ap="literal";Ip.exports=Np.extends(Ap,function(t,e,s,r,h){Np.apply(this,[t||Ap,r,h]),this.value=e,s&&(this.raw=s)})});var Pp=H((pP,Lp)=>{"use strict";var Sp=qn(),Op="boolean";Lp.exports=Sp.extends(Op,function(t,e,s,r){Sp.apply(this,[Op,t,e,s,r])})});var Fp=H((_P,wp)=>{"use strict";var Dp=ye(),Rp="break";wp.exports=Dp.extends(Rp,function(t,e,s){Dp.apply(this,[Rp,e,s]),this.level=t})});var Hp=H((mP,Up)=>{"use strict";var Bp=Te(),Mp="byref";Up.exports=Bp.extends(Mp,function(t,e,s){Bp.apply(this,[Mp,e,s]),this.what=t})});var qp=H((gP,Wp)=>{"use strict";var Vp=Te(),Gp="call";Wp.exports=Vp.extends(Gp,function(t,e,s,r){Vp.apply(this,[Gp,s,r]),this.what=t,this.arguments=e})});var zp=H((TP,jp)=>{"use strict";var Yp=ye(),Qp="case";jp.exports=Yp.extends(Qp,function(t,e,s,r){Yp.apply(this,[Qp,s,r]),this.test=t,this.body=e})});var Xp=H((kP,Jp)=>{"use strict";var Kp=As(),$p="cast";Jp.exports=Kp.extends($p,function(t,e,s,r,h){Kp.apply(this,[$p,r,h]),this.type=t,this.raw=e,this.expr=s})});var i_=H((xP,e_)=>{"use strict";var Zp=ye(),t_="catch";e_.exports=Zp.extends(t_,function(t,e,s,r,h){Zp.apply(this,[t_,r,h]),this.body=t,this.what=e,this.variable=s})});var Ln=H((EP,o_)=>{"use strict";var n_=ye(),s_="declaration",SA="",OA="public",LA="protected",PA="private",r_=n_.extends(s_,function(t,e,s,r){n_.apply(this,[t||s_,s,r]),this.name=e});r_.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.kind!=="class"&&(i[0]===-1?this.visibility=SA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=OA:i[0]===1?this.visibility=LA:i[0]===2&&(this.visibility=PA),this.isStatic=i[1]===1)};o_.exports=r_});var u_=H((vP,l_)=>{"use strict";var a_=Ln(),h_="class";l_.exports=a_.extends(h_,function(t,e,s,r,h,l,c){a_.apply(this,[h_,t,l,c]),this.isAnonymous=!t,this.extends=e,this.implements=s,this.body=r,this.attrGroups=[],this.parseFlags(h)})});var ph=H((yP,d_)=>{"use strict";var c_=ye(),f_="constantstatement";d_.exports=c_.extends(f_,function(t,e,s,r){c_.apply(this,[t||f_,s,r]),this.constants=e})});var T_=H((CP,g_)=>{"use strict";var p_=ph(),__="classconstant",DA="",RA="public",wA="protected",FA="private",m_=p_.extends(__,function(t,e,s,r,h,l){p_.apply(this,[t||__,e,h,l]),this.parseFlags(s),this.attrGroups=r});m_.prototype.parseFlags=function(i){i[0]===-1?this.visibility=DA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=RA:i[0]===1?this.visibility=wA:i[0]===2&&(this.visibility=FA)};g_.exports=m_});var v_=H((bP,E_)=>{"use strict";var k_=Te(),x_="clone";E_.exports=k_.extends(x_,function(t,e,s){k_.apply(this,[x_,e,s]),this.what=t})});var N_=H((NP,b_)=>{"use strict";var y_=Te(),C_="closure";b_.exports=y_.extends(C_,function(t,e,s,r,h,l,c,f){y_.apply(this,[C_,c,f]),this.uses=s,this.arguments=t,this.byref=e,this.type=r,this.nullable=h,this.isStatic=l||!1,this.body=null,this.attrGroups=[]})});var Vo=H((AP,I_)=>{"use strict";var A_=ai();I_.exports=A_.extends("comment",function(t,e,s,r){A_.apply(this,[t,s,r]),this.value=e})});var P_=H((IP,L_)=>{"use strict";var S_=Vo(),O_="commentblock";L_.exports=S_.extends(O_,function(t,e,s){S_.apply(this,[O_,t,e,s])})});var F_=H((SP,w_)=>{"use strict";var D_=Vo(),R_="commentline";w_.exports=D_.extends(R_,function(t,e,s){D_.apply(this,[R_,t,e,s])})});var H_=H((OP,U_)=>{"use strict";var B_=ai(),M_="constant";U_.exports=B_.extends(M_,function(t,e,s,r){B_.apply(this,[M_,s,r]),this.name=t,this.value=e})});var q_=H((LP,W_)=>{"use strict";var V_=ye(),G_="continue";W_.exports=V_.extends(G_,function(t,e,s){V_.apply(this,[G_,e,s]),this.level=t})});var z_=H((PP,j_)=>{"use strict";var Y_=Nr(),Q_="declare",Go=Y_.extends(Q_,function(t,e,s,r,h){Y_.apply(this,[Q_,e,r,h]),this.directives=t,this.mode=s});Go.MODE_SHORT="short";Go.MODE_BLOCK="block";Go.MODE_NONE="none";j_.exports=Go});var X_=H((DP,J_)=>{"use strict";var K_=ai(),$_="declaredirective";J_.exports=K_.extends($_,function(t,e,s,r){K_.apply(this,[$_,s,r]),this.key=t,this.value=e})});var im=H((RP,em)=>{"use strict";var Z_=ye(),tm="do";em.exports=Z_.extends(tm,function(t,e,s,r){Z_.apply(this,[tm,s,r]),this.test=t,this.body=e})});var om=H((wP,rm)=>{"use strict";var nm=ye(),sm="echo";rm.exports=nm.extends(sm,function(t,e,s,r){nm.apply(this,[sm,s,r]),this.shortForm=e,this.expressions=t})});var um=H((FP,lm)=>{"use strict";var am=Te(),hm="empty";lm.exports=am.extends(hm,function(t,e,s){am.apply(this,[hm,e,s]),this.expression=t})});var pm=H((BP,dm)=>{"use strict";var cm=qn(),fm="encapsed",Ar=cm.extends(fm,function(t,e,s,r,h){cm.apply(this,[fm,t,e,r,h]),this.type=s});Ar.TYPE_STRING="string";Ar.TYPE_SHELL="shell";Ar.TYPE_HEREDOC="heredoc";Ar.TYPE_OFFSET="offset";dm.exports=Ar});var Tm=H((MP,gm)=>{"use strict";var _m=Te(),mm="encapsedpart";gm.exports=_m.extends(mm,function(t,e,s,r,h){_m.apply(this,[mm,r,h]),this.expression=t,this.syntax=e,this.curly=s})});var vm=H((UP,Em)=>{"use strict";var km=Te(),xm="entry";Em.exports=km.extends(xm,function(t,e,s,r,h,l){km.apply(this,[xm,h,l]),this.key=t,this.value=e,this.byRef=s,this.unpack=r})});var Nm=H((HP,bm)=>{"use strict";var ym=Ln(),Cm="enum";bm.exports=ym.extends(Cm,function(t,e,s,r,h,l){ym.apply(this,[Cm,t,h,l]),this.valueType=e,this.implements=s,this.body=r,this.attrGroups=[]})});var Om=H((VP,Sm)=>{"use strict";var Am=ai(),Im="enumcase";Sm.exports=Am.extends(Im,function(t,e,s,r){Am.apply(this,[Im,s,r]),this.name=t,this.value=e})});var Rm=H((GP,Dm)=>{"use strict";var Lm=ai(),Pm="error";Dm.exports=Lm.extends(Pm,function(t,e,s,r,h,l){Lm.apply(this,[Pm,h,l]),this.message=t,this.token=e,this.line=s,this.expected=r})});var Mm=H((WP,Bm)=>{"use strict";var wm=Te(),Fm="eval";Bm.exports=wm.extends(Fm,function(t,e,s){wm.apply(this,[Fm,e,s]),this.source=t})});var Gm=H((qP,Vm)=>{"use strict";var Um=Te(),Hm="exit";Vm.exports=Um.extends(Hm,function(t,e,s,r){Um.apply(this,[Hm,s,r]),this.expression=t,this.useDie=e})});var Qm=H((YP,Ym)=>{"use strict";var Wm=ye(),qm="expressionstatement";Ym.exports=Wm.extends(qm,function(t,e,s){Wm.apply(this,[qm,e,s]),this.expression=t})});var $m=H((QP,Km)=>{"use strict";var jm=ye(),zm="for";Km.exports=jm.extends(zm,function(t,e,s,r,h,l,c){jm.apply(this,[zm,l,c]),this.init=t,this.test=e,this.increment=s,this.shortForm=h,this.body=r})});var tg=H((jP,Zm)=>{"use strict";var Jm=ye(),Xm="foreach";Zm.exports=Jm.extends(Xm,function(t,e,s,r,h,l,c){Jm.apply(this,[Xm,l,c]),this.source=t,this.key=e,this.value=s,this.shortForm=h,this.body=r})});var _h=H((zP,ng)=>{"use strict";var eg=Ln(),ig="function";ng.exports=eg.extends(ig,function(t,e,s,r,h,l,c){eg.apply(this,[ig,t,l,c]),this.arguments=e,this.byref=s,this.type=r,this.nullable=h,this.body=null,this.attrGroups=[]})});var ag=H((KP,og)=>{"use strict";var sg=ye(),rg="global";og.exports=sg.extends(rg,function(t,e,s){sg.apply(this,[rg,e,s]),this.items=t})});var cg=H(($P,ug)=>{"use strict";var hg=ye(),lg="goto";ug.exports=hg.extends(lg,function(t,e,s){hg.apply(this,[lg,e,s]),this.label=t})});var _g=H((JP,pg)=>{"use strict";var fg=ye(),dg="halt";pg.exports=fg.extends(dg,function(t,e,s){fg.apply(this,[dg,e,s]),this.after=t})});var kg=H((XP,Tg)=>{"use strict";var mg=ai(),gg="identifier",BA=mg.extends(gg,function(t,e,s){mg.apply(this,[gg,e,s]),this.name=t});Tg.exports=BA});var yg=H((ZP,vg)=>{"use strict";var xg=ye(),Eg="if";vg.exports=xg.extends(Eg,function(t,e,s,r,h,l){xg.apply(this,[Eg,h,l]),this.test=t,this.body=e,this.alternate=s,this.shortForm=r})});var Ag=H((t1,Ng)=>{"use strict";var Cg=Te(),bg="include";Ng.exports=Cg.extends(bg,function(t,e,s,r,h){Cg.apply(this,[bg,r,h]),this.once=t,this.require=e,this.target=s})});var Lg=H((e1,Og)=>{"use strict";var Ig=qn(),Sg="inline";Og.exports=Ig.extends(Sg,function(t,e,s,r){Ig.apply(this,[Sg,t,e,s,r])})});var wg=H((i1,Rg)=>{"use strict";var Pg=Ln(),Dg="interface";Rg.exports=Pg.extends(Dg,function(t,e,s,r,h,l){Pg.apply(this,[Dg,t,h,l]),this.extends=e,this.body=s,this.attrGroups=r})});var Ug=H((n1,Mg)=>{"use strict";var Fg=Ln(),Bg="intersectiontype";Mg.exports=Fg.extends(Bg,function(t,e,s){Fg.apply(this,[Bg,null,e,s]),this.types=t})});var Wg=H((s1,Gg)=>{"use strict";var Hg=Te(),Vg="isset";Gg.exports=Hg.extends(Vg,function(t,e,s){Hg.apply(this,[Vg,e,s]),this.variables=t})});var jg=H((r1,Qg)=>{"use strict";var qg=ye(),Yg="label";Qg.exports=qg.extends(Yg,function(t,e,s){qg.apply(this,[Yg,e,s]),this.name=t})});var Jg=H((o1,$g)=>{"use strict";var zg=Te(),Kg="list";$g.exports=zg.extends(Kg,function(t,e,s,r){zg.apply(this,[Kg,s,r]),this.items=t,this.shortForm=e})});var Js=H((a1,tT)=>{"use strict";var Xg=Te(),Zg="lookup";tT.exports=Xg.extends(Zg,function(t,e,s,r,h){Xg.apply(this,[t||Zg,r,h]),this.what=e,this.offset=s})});var sT=H((h1,nT)=>{"use strict";var eT=qn(),iT="magic";nT.exports=eT.extends(iT,function(t,e,s,r){eT.apply(this,[iT,t,e,s,r])})});var hT=H((l1,aT)=>{"use strict";var rT=Te(),oT="match";aT.exports=rT.extends(oT,function(t,e,s,r){rT.apply(this,[oT,s,r]),this.cond=t,this.arms=e})});var fT=H((u1,cT)=>{"use strict";var lT=Te(),uT="matcharm";cT.exports=lT.extends(uT,function(t,e,s,r){lT.apply(this,[uT,s,r]),this.conds=t,this.body=e})});var mT=H((c1,_T)=>{"use strict";var dT=_h(),pT="method";_T.exports=dT.extends(pT,function(){dT.apply(this,arguments),this.kind=pT})});var Is=H((f1,kT)=>{"use strict";var gT=ai(),TT="reference",MA=gT.extends(TT,function(t,e,s){gT.apply(this,[t||TT,e,s])});kT.exports=MA});var yT=H((d1,vT)=>{"use strict";var xT=Is(),ET="name",Ir=xT.extends(ET,function(t,e,s,r){xT.apply(this,[ET,s,r]),this.name=t.replace(/\\$/,""),this.resolution=e});Ir.UNQUALIFIED_NAME="uqn";Ir.QUALIFIED_NAME="qn";Ir.FULL_QUALIFIED_NAME="fqn";Ir.RELATIVE_NAME="rn";vT.exports=Ir});var AT=H((p1,NT)=>{"use strict";var CT=Nr(),bT="namespace";NT.exports=CT.extends(bT,function(t,e,s,r,h){CT.apply(this,[bT,e,r,h]),this.name=t,this.withBrackets=s||!1})});var LT=H((_1,OT)=>{"use strict";var IT=Te(),ST="namedargument";OT.exports=IT.extends(ST,function(t,e,s,r){IT.apply(this,[ST,s,r]),this.name=t,this.value=e})});var wT=H((m1,RT)=>{"use strict";var PT=Te(),DT="new";RT.exports=PT.extends(DT,function(t,e,s,r){PT.apply(this,[DT,s,r]),this.what=t,this.arguments=e})});var UT=H((g1,MT)=>{"use strict";var FT=ai(),BT="noop";MT.exports=FT.extends(BT,function(t,e){FT.apply(this,[BT,t,e])})});var WT=H((T1,GT)=>{"use strict";var HT=qn(),VT="nowdoc";GT.exports=HT.extends(VT,function(t,e,s,r,h){HT.apply(this,[VT,t,e,r,h]),this.label=s})});var jT=H((k1,QT)=>{"use strict";var qT=ai(),YT="nullkeyword";QT.exports=qT.extends(YT,function(t,e,s){qT.apply(this,[YT,e,s]),this.raw=t})});var JT=H((x1,$T)=>{"use strict";var zT=Js(),KT="nullsafepropertylookup";$T.exports=zT.extends(KT,function(t,e,s,r){zT.apply(this,[KT,t,e,s,r])})});var ek=H((E1,tk)=>{"use strict";var XT=qn(),ZT="number";tk.exports=XT.extends(ZT,function(t,e,s,r){XT.apply(this,[ZT,t,e,s,r])})});var rk=H((v1,sk)=>{"use strict";var ik=Js(),nk="offsetlookup";sk.exports=ik.extends(nk,function(t,e,s,r){ik.apply(this,[nk,t,e,s,r])})});var lk=H((y1,hk)=>{"use strict";var ok=Ln(),ak="parameter";hk.exports=ok.extends(ak,function(t,e,s,r,h,l,c,f,m,g){ok.apply(this,[ak,t,m,g]),this.value=s,this.type=e,this.byref=r,this.variadic=h,this.readonly=l,this.nullable=c,this.flags=f||0,this.attrGroups=[]})});var dk=H((C1,fk)=>{"use strict";var uk=Is(),ck="parentreference",UA=uk.extends(ck,function(t,e,s){uk.apply(this,[ck,e,s]),this.raw=t});fk.exports=UA});var gk=H((b1,mk)=>{"use strict";var pk=As(),_k="post";mk.exports=pk.extends(_k,function(t,e,s,r){pk.apply(this,[_k,s,r]),this.type=t,this.what=e})});var Ek=H((N1,xk)=>{"use strict";var Tk=As(),kk="pre";xk.exports=Tk.extends(kk,function(t,e,s,r){Tk.apply(this,[kk,s,r]),this.type=t,this.what=e})});var bk=H((A1,Ck)=>{"use strict";var vk=Te(),yk="print";Ck.exports=vk.extends(yk,function(t,e,s){vk.apply(this,[yk,e,s]),this.expression=t})});var Sk=H((I1,Ik)=>{"use strict";var Nk=Nr(),Ak="program";Ik.exports=Nk.extends(Ak,function(t,e,s,r,h,l){Nk.apply(this,[Ak,t,h,l]),this.errors=e,s&&(this.comments=s),r&&(this.tokens=r)})});var Dk=H((S1,Pk)=>{"use strict";var Ok=ye(),Lk="property";Pk.exports=Ok.extends(Lk,function(t,e,s,r,h,l,c,f){Ok.apply(this,[Lk,c,f]),this.name=t,this.value=e,this.readonly=s,this.nullable=r,this.type=h,this.attrGroups=l})});var Bk=H((O1,Fk)=>{"use strict";var Rk=Js(),wk="propertylookup";Fk.exports=Rk.extends(wk,function(t,e,s,r){Rk.apply(this,[wk,t,e,s,r])})});var Gk=H((L1,Vk)=>{"use strict";var Mk=ye(),Uk="propertystatement",HA="",VA="public",GA="protected",WA="private",Hk=Mk.extends(Uk,function(t,e,s,r,h){Mk.apply(this,[Uk,r,h]),this.properties=e,this.parseFlags(s)});Hk.prototype.parseFlags=function(i){i[0]===-1?this.visibility=HA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=VA:i[0]===1?this.visibility=GA:i[0]===2&&(this.visibility=WA),this.isStatic=i[1]===1};Vk.exports=Hk});var Qk=H((P1,Yk)=>{"use strict";var Wk=Te(),qk="retif";Yk.exports=Wk.extends(qk,function(t,e,s,r,h){Wk.apply(this,[qk,r,h]),this.test=t,this.trueExpr=e,this.falseExpr=s})});var $k=H((D1,Kk)=>{"use strict";var jk=ye(),zk="return";Kk.exports=jk.extends(zk,function(t,e,s){jk.apply(this,[zk,e,s]),this.expr=t})});var tx=H((R1,Zk)=>{"use strict";var Jk=Is(),Xk="selfreference",qA=Jk.extends(Xk,function(t,e,s){Jk.apply(this,[Xk,e,s]),this.raw=t});Zk.exports=qA});var sx=H((w1,nx)=>{"use strict";var ex=Te(),ix="silent";nx.exports=ex.extends(ix,function(t,e,s){ex.apply(this,[ix,e,s]),this.expr=t})});var hx=H((F1,ax)=>{"use strict";var rx=ye(),ox="static";ax.exports=rx.extends(ox,function(t,e,s){rx.apply(this,[ox,e,s]),this.variables=t})});var fx=H((B1,cx)=>{"use strict";var lx=ai(),ux="staticvariable";cx.exports=lx.extends(ux,function(t,e,s,r){lx.apply(this,[ux,s,r]),this.variable=t,this.defaultValue=e})});var mx=H((M1,_x)=>{"use strict";var dx=Js(),px="staticlookup";_x.exports=dx.extends(px,function(t,e,s,r){dx.apply(this,[px,t,e,s,r])})});var xx=H((U1,kx)=>{"use strict";var gx=Is(),Tx="staticreference",YA=gx.extends(Tx,function(t,e,s){gx.apply(this,[Tx,e,s]),this.raw=t});kx.exports=YA});var Cx=H((H1,yx)=>{"use strict";var Ex=qn(),vx="string";yx.exports=Ex.extends(vx,function(t,e,s,r,h,l){Ex.apply(this,[vx,e,r,h,l]),this.unicode=s,this.isDoubleQuote=t})});var Ix=H((V1,Ax)=>{"use strict";var bx=ye(),Nx="switch";Ax.exports=bx.extends(Nx,function(t,e,s,r,h){bx.apply(this,[Nx,r,h]),this.test=t,this.body=e,this.shortForm=s})});var Px=H((G1,Lx)=>{"use strict";var Sx=ye(),Ox="throw";Lx.exports=Sx.extends(Ox,function(t,e,s){Sx.apply(this,[Ox,e,s]),this.what=t})});var Fx=H((W1,wx)=>{"use strict";var Dx=Ln(),Rx="trait";wx.exports=Dx.extends(Rx,function(t,e,s,r){Dx.apply(this,[Rx,t,s,r]),this.body=e})});var Hx=H((q1,Ux)=>{"use strict";var Bx=ai(),Mx="traitalias",QA="",jA="public",zA="protected",KA="private";Ux.exports=Bx.extends(Mx,function(t,e,s,r,h,l){Bx.apply(this,[Mx,h,l]),this.trait=t,this.method=e,this.as=s,this.visibility=QA,r&&(r[0]===0?this.visibility=jA:r[0]===1?this.visibility=zA:r[0]===2&&(this.visibility=KA))})});var qx=H((Y1,Wx)=>{"use strict";var Vx=ai(),Gx="traitprecedence";Wx.exports=Vx.extends(Gx,function(t,e,s,r,h){Vx.apply(this,[Gx,r,h]),this.trait=t,this.method=e,this.instead=s})});var zx=H((Q1,jx)=>{"use strict";var Yx=ai(),Qx="traituse";jx.exports=Yx.extends(Qx,function(t,e,s,r){Yx.apply(this,[Qx,s,r]),this.traits=t,this.adaptations=e})});var Xx=H((j1,Jx)=>{"use strict";var Kx=ye(),$x="try";Jx.exports=Kx.extends($x,function(t,e,s,r,h){Kx.apply(this,[$x,r,h]),this.body=t,this.catches=e,this.always=s})});var nE=H((z1,iE)=>{"use strict";var Zx=Is(),tE="typereference",eE=Zx.extends(tE,function(t,e,s,r){Zx.apply(this,[tE,s,r]),this.name=t,this.raw=e});eE.types=["int","float","string","bool","object","array","callable","iterable","void","static"];iE.exports=eE});var aE=H((K1,oE)=>{"use strict";var sE=As(),rE="unary";oE.exports=sE.extends(rE,function(t,e,s,r){sE.apply(this,[rE,s,r]),this.type=t,this.what=e})});var cE=H(($1,uE)=>{"use strict";var hE=Ln(),lE="uniontype";uE.exports=hE.extends(lE,function(t,e,s){hE.apply(this,[lE,null,e,s]),this.types=t})});var _E=H((J1,pE)=>{"use strict";var fE=ye(),dE="unset";pE.exports=fE.extends(dE,function(t,e,s){fE.apply(this,[dE,e,s]),this.variables=t})});var kE=H((X1,TE)=>{"use strict";var mE=ye(),gE="usegroup";TE.exports=mE.extends(gE,function(t,e,s,r,h){mE.apply(this,[gE,r,h]),this.name=t,this.type=e,this.items=s})});var yE=H((Z1,vE)=>{"use strict";var xE=ye(),EE="useitem",mh=xE.extends(EE,function(t,e,s,r,h){xE.apply(this,[EE,r,h]),this.name=t,this.alias=e,this.type=s});mh.TYPE_CONST="const";mh.TYPE_FUNCTION="function";vE.exports=mh});var AE=H((tD,NE)=>{"use strict";var CE=Te(),bE="variable";NE.exports=CE.extends(bE,function(t,e,s,r){CE.apply(this,[bE,s,r]),this.name=t,this.curly=e||!1})});var LE=H((eD,OE)=>{"use strict";var IE=Te(),SE="variadic";OE.exports=IE.extends(SE,function(t,e,s){IE.apply(this,[SE,e,s]),this.what=t})});var wE=H((iD,RE)=>{"use strict";var PE=ai(),DE="variadicplaceholder";RE.exports=PE.extends(DE,function(t,e){PE.apply(this,[DE,t,e])})});var UE=H((nD,ME)=>{"use strict";var FE=ye(),BE="while";ME.exports=FE.extends(BE,function(t,e,s,r,h){FE.apply(this,[BE,r,h]),this.test=t,this.body=e,this.shortForm=s})});var WE=H((sD,GE)=>{"use strict";var HE=Te(),VE="yield";GE.exports=HE.extends(VE,function(t,e,s,r){HE.apply(this,[VE,s,r]),this.value=t,this.key=e})});var jE=H((rD,QE)=>{"use strict";var qE=Te(),YE="yieldfrom";QE.exports=qE.extends(YE,function(t,e,s){qE.apply(this,[YE,e,s]),this.value=t})});var KE=H((oD,zE)=>{"use strict";var $A=Md(),JA=ch(),Ii=function(i,t){this.withPositions=i,this.withSource=t};Ii.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,t){i.forEach(function(e){Ii.precedence[e]=t+1})});Ii.prototype.isRightAssociative=function(i){return i==="**"||i==="??"};Ii.prototype.swapLocations=function(i,t,e,s){this.withPositions&&(i.loc.start=t.loc.start,i.loc.end=e.loc.end,this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Ii.prototype.resolveLocations=function(i,t,e,s){this.withPositions&&(i.loc.start.offset>t.loc.start.offset&&(i.loc.start=t.loc.start),i.loc.end.offset<e.loc.end.offset&&(i.loc.end=e.loc.end),this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Ii.prototype.resolvePrecedence=function(i,t){let e,s,r;return i.kind==="call"?this.resolveLocations(i,i.what,i,t):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,t):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(s=Ii.precedence[i.type],r=Ii.precedence[i.right.type],s&&r&&r<=s&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(e=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e)):i.right.kind==="retif"&&(s=Ii.precedence[i.type],r=Ii.precedence["?"],s&&r&&r<=s&&(e=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e))):(i.kind==="silent"||i.kind==="cast")&&i.expr&&!i.expr.parenthesizedExpression?i.expr.kind==="bin"?(e=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.expr.kind==="retif"&&(e=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(e=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.what.kind==="retif"&&(e=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(e=i.falseExpr,i.falseExpr=e.test,this.swapLocations(i,i.test,i.falseExpr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(s=Ii.precedence["="],r=Ii.precedence[i.right.type],s&&r&&r<s&&(e=i.right,i.right=i.right.left,e.left=i,this.swapLocations(e,e.left,i.right,t),i=e)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,t),i};Ii.prototype.prepare=function(i,t,e){let s=null;(this.withPositions||this.withSource)&&(s=e.position());let r=this,h=function(){let l=null,c=Array.prototype.slice.call(arguments);if(c.push(t),r.withPositions||r.withSource){let g=null;r.withSource&&(g=e.lexer._input.substring(s.offset,e.prev[2])),l=new $A(g,s,new JA(e.prev[0],e.prev[1],e.prev[2])),c.push(l)}i||(i=c.shift());let f=r[i];if(typeof f!="function")throw new Error('Undefined node "'+i+'"');let m=Object.create(f.prototype);return f.apply(m,c),h.instance=m,h.trailingComments&&(m.trailingComments=h.trailingComments),typeof h.postBuild=="function"&&h.postBuild(m),e.debug&&delete r.stack[h.stackUid],r.resolvePrecedence(m,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:s,stack:new Error().stack.split(`
`).slice(3,5)},h.stackUid=this.stackUid),h.setTrailingComments=function(l){h.instance?h.instance.setTrailingComments(l):h.trailingComments=l},h.destroy=function(l){t&&(l?l.leadingComments?l.leadingComments=t.concat(l.leadingComments):l.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete r.stack[h.stackUid]},h};Ii.prototype.checkNodes=function(){let i=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,i.push(this.stack[t]));return this.stack={},i};[Qd(),$d(),tp(),sp(),hp(),fp(),kp(),Nr(),Pp(),Fp(),Hp(),qp(),zp(),Xp(),i_(),u_(),T_(),v_(),N_(),Vo(),P_(),F_(),H_(),ph(),q_(),Ln(),z_(),X_(),im(),om(),um(),pm(),Tm(),vm(),Nm(),Om(),Rm(),Mm(),Gm(),Te(),Qm(),$m(),tg(),_h(),ag(),cg(),_g(),kg(),yg(),Ag(),Lg(),wg(),Ug(),Wg(),jg(),Jg(),qn(),Js(),sT(),hT(),fT(),mT(),yT(),AT(),LT(),wT(),ai(),UT(),WT(),jT(),JT(),ek(),rk(),As(),lk(),dk(),gk(),Ek(),bk(),Sk(),Dk(),Bk(),Gk(),Is(),Qk(),$k(),tx(),sx(),ye(),hx(),fx(),mx(),xx(),Cx(),Ix(),Px(),Fx(),Hx(),qx(),zx(),Xx(),nE(),aE(),cE(),_E(),kE(),yE(),AE(),LE(),wE(),UE(),WE(),jE()].forEach(function(i){Ii.prototype[i.kind]=i});zE.exports=Ii});var kh=H((aD,Yn)=>{"use strict";var $E=Xf(),JE=Rd(),XE=Fd(),ZE=KE();function gh(i,t){let e=Object.keys(i),s=e.length;for(;s--;){let r=e[s],h=i[r];h===null?delete t[r]:typeof h=="function"?t[r]=h.bind(t):Array.isArray(h)?t[r]=Array.isArray(t[r])?t[r].concat(h):h:typeof h=="object"?t[r]=typeof t[r]=="object"?gh(h,t[r]):h:t[r]=h}return t}var Yi=function(i){if(typeof this=="function")return new this(i);if(this.tokens=XE,this.lexer=new $E(this),this.ast=new ZE,this.parser=new JE(this.lexer,this.ast),i&&typeof i=="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){let t=i.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+i.parser.version);i.parser.version=t}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}gh(i,this),this.lexer.version=this.parser.version}},Th=function(i){return typeof i.write=="function"?i.toString():i};Yi.create=function(i){return new Yi(i)};Yi.parseEval=function(i,t){return new Yi(t).parseEval(i)};Yi.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=Th(i),this.parser.parse(i,"eval")};Yi.parseCode=function(i,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new Yi(e).parseCode(i,t)};Yi.prototype.parseCode=function(i,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=Th(i),this.parser.parse(i,t)};Yi.tokenGetAll=function(i,t){return new Yi(t).tokenGetAll(i)};Yi.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=Th(i);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(i);let s=this.lexer.lex()||t,r=[];for(;s!=t;){let h=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,s)&&(h=[e[s],h,this.lexer.yylloc.first_line]),r.push(h),s=this.lexer.lex()||t}return r};Yn.exports=Yi;Yn.exports.tokens=XE;Yn.exports.lexer=$E;Yn.exports.AST=ZE;Yn.exports.parser=JE;Yn.exports.combine=gh;Yn.exports.Engine=Yi;Yn.exports.default=Yi});var tv,Wo,ev=St(()=>{"use strict";tv=Xi(kh()),Wo=class{constructor(){this.structures=[];this.hasStructuresWithUnknownLocations=!1;this.parser=new tv.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}})}hasUnknownLocations(){return this.hasStructuresWithUnknownLocations}getStructureLocations(t,e){let s=this.parser.parseCode(t,"code.php");this.findStructureLocations(s,e)}getStructures(){return this.structures}findStructureLocations(t,e){let s=[],r=!1;function h(l){var c,f,m,g;if(l.kind==="if"){let b=l;b.test.loc==null&&(r=!0),s.push({label:"if",start:((f=(c=b.test.loc)==null?void 0:c.start.offset)!=null?f:-1)-e,end:((g=(m=b.test.loc)==null?void 0:m.end.offset)!=null?g:-1)-e})}for(let b in l)l.hasOwnProperty(b)&&typeof l[b]=="object"&&l[b]&&h(l[b])}h(t),this.hasStructuresWithUnknownLocations=r,this.structures=s}}});var nv=H((qo,iv)=>{(function(i,t){typeof qo=="object"&&typeof iv<"u"?t(qo,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((i=typeof globalThis<"u"?globalThis:i||self).prettierPlugins=i.prettierPlugins||{},i.prettierPlugins.php={}),i.prettier)})(qo,function(i,t){"use strict";function e(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var s=e(t);function r(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(n);o&&(u=u.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,u)}return a}function h(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?r(Object(a),!0).forEach(function(u){f(n,u,a[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(u){Object.defineProperty(n,u,Object.getOwnPropertyDescriptor(a,u))})}return n}function l(){l=function(){return n};var n={},o=Object.prototype,a=o.hasOwnProperty,u=typeof Symbol=="function"?Symbol:{},d=u.iterator||"@@iterator",T=u.asyncIterator||"@@asyncIterator",y=u.toStringTag||"@@toStringTag";function _(st,nt,Vt){return Object.defineProperty(st,nt,{value:Vt,enumerable:!0,configurable:!0,writable:!0}),st[nt]}try{_({},"")}catch{_=function(nt,Vt,qt){return nt[Vt]=qt}}function I(st,nt,Vt,qt){var Lt=nt&&nt.prototype instanceof Ft?nt:Ft,Ce=Object.create(Lt.prototype),De=new Be(qt||[]);return Ce._invoke=function(Ye,mi,re){var Ge="suspendedStart";return function(Li,es){if(Ge==="executing")throw new Error("Generator is already running");if(Ge==="completed"){if(Li==="throw")throw es;return _i()}for(re.method=Li,re.arg=es;;){var is=re.delegate;if(is){var hn=ge(is,re);if(hn){if(hn===v)continue;return hn}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(Ge==="suspendedStart")throw Ge="completed",re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);Ge="executing";var $i=A(Ye,mi,re);if($i.type==="normal"){if(Ge=re.done?"completed":"suspendedYield",$i.arg===v)continue;return{value:$i.arg,done:re.done}}$i.type==="throw"&&(Ge="completed",re.method="throw",re.arg=$i.arg)}}}(st,Vt,De),Ce}function A(st,nt,Vt){try{return{type:"normal",arg:st.call(nt,Vt)}}catch(qt){return{type:"throw",arg:qt}}}n.wrap=I;var v={};function Ft(){}function wt(){}function le(){}var _e={};_(_e,d,function(){return this});var Bt=Object.getPrototypeOf,Ee=Bt&&Bt(Bt(an([])));Ee&&Ee!==o&&a.call(Ee,d)&&(_e=Ee);var Jt=le.prototype=Ft.prototype=Object.create(_e);function Ne(st){["next","throw","return"].forEach(function(nt){_(st,nt,function(Vt){return this._invoke(nt,Vt)})})}function Ae(st,nt){function Vt(Lt,Ce,De,Ye){var mi=A(st[Lt],st,Ce);if(mi.type!=="throw"){var re=mi.arg,Ge=re.value;return Ge&&typeof Ge=="object"&&a.call(Ge,"__await")?nt.resolve(Ge.__await).then(function(Li){Vt("next",Li,De,Ye)},function(Li){Vt("throw",Li,De,Ye)}):nt.resolve(Ge).then(function(Li){re.value=Li,De(re)},function(Li){return Vt("throw",Li,De,Ye)})}Ye(mi.arg)}var qt;this._invoke=function(Lt,Ce){function De(){return new nt(function(Ye,mi){Vt(Lt,Ce,Ye,mi)})}return qt=qt?qt.then(De,De):De()}}function ge(st,nt){var Vt=st.iterator[nt.method];if(Vt===void 0){if(nt.delegate=null,nt.method==="throw"){if(st.iterator.return&&(nt.method="return",nt.arg=void 0,ge(st,nt),nt.method==="throw"))return v;nt.method="throw",nt.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var qt=A(Vt,st.iterator,nt.arg);if(qt.type==="throw")return nt.method="throw",nt.arg=qt.arg,nt.delegate=null,v;var Lt=qt.arg;return Lt?Lt.done?(nt[st.resultName]=Lt.value,nt.next=st.nextLoc,nt.method!=="return"&&(nt.method="next",nt.arg=void 0),nt.delegate=null,v):Lt:(nt.method="throw",nt.arg=new TypeError("iterator result is not an object"),nt.delegate=null,v)}function Xt(st){var nt={tryLoc:st[0]};1 in st&&(nt.catchLoc=st[1]),2 in st&&(nt.finallyLoc=st[2],nt.afterLoc=st[3]),this.tryEntries.push(nt)}function ve(st){var nt=st.completion||{};nt.type="normal",delete nt.arg,st.completion=nt}function Be(st){this.tryEntries=[{tryLoc:"root"}],st.forEach(Xt,this),this.reset(!0)}function an(st){if(st){var nt=st[d];if(nt)return nt.call(st);if(typeof st.next=="function")return st;if(!isNaN(st.length)){var Vt=-1,qt=function Lt(){for(;++Vt<st.length;)if(a.call(st,Vt))return Lt.value=st[Vt],Lt.done=!1,Lt;return Lt.value=void 0,Lt.done=!0,Lt};return qt.next=qt}}return{next:_i}}function _i(){return{value:void 0,done:!0}}return wt.prototype=le,_(Jt,"constructor",le),_(le,"constructor",wt),wt.displayName=_(le,y,"GeneratorFunction"),n.isGeneratorFunction=function(st){var nt=typeof st=="function"&&st.constructor;return!!nt&&(nt===wt||(nt.displayName||nt.name)==="GeneratorFunction")},n.mark=function(st){return Object.setPrototypeOf?Object.setPrototypeOf(st,le):(st.__proto__=le,_(st,y,"GeneratorFunction")),st.prototype=Object.create(Jt),st},n.awrap=function(st){return{__await:st}},Ne(Ae.prototype),_(Ae.prototype,T,function(){return this}),n.AsyncIterator=Ae,n.async=function(st,nt,Vt,qt,Lt){Lt===void 0&&(Lt=Promise);var Ce=new Ae(I(st,nt,Vt,qt),Lt);return n.isGeneratorFunction(nt)?Ce:Ce.next().then(function(De){return De.done?De.value:Ce.next()})},Ne(Jt),_(Jt,y,"Generator"),_(Jt,d,function(){return this}),_(Jt,"toString",function(){return"[object Generator]"}),n.keys=function(st){var nt=[];for(var Vt in st)nt.push(Vt);return nt.reverse(),function qt(){for(;nt.length;){var Lt=nt.pop();if(Lt in st)return qt.value=Lt,qt.done=!1,qt}return qt.done=!0,qt}},n.values=an,Be.prototype={constructor:Be,reset:function(st){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ve),!st)for(var nt in this)nt.charAt(0)==="t"&&a.call(this,nt)&&!isNaN(+nt.slice(1))&&(this[nt]=void 0)},stop:function(){this.done=!0;var st=this.tryEntries[0].completion;if(st.type==="throw")throw st.arg;return this.rval},dispatchException:function(st){if(this.done)throw st;var nt=this;function Vt(mi,re){return Ce.type="throw",Ce.arg=st,nt.next=mi,re&&(nt.method="next",nt.arg=void 0),!!re}for(var qt=this.tryEntries.length-1;qt>=0;--qt){var Lt=this.tryEntries[qt],Ce=Lt.completion;if(Lt.tryLoc==="root")return Vt("end");if(Lt.tryLoc<=this.prev){var De=a.call(Lt,"catchLoc"),Ye=a.call(Lt,"finallyLoc");if(De&&Ye){if(this.prev<Lt.catchLoc)return Vt(Lt.catchLoc,!0);if(this.prev<Lt.finallyLoc)return Vt(Lt.finallyLoc)}else if(De){if(this.prev<Lt.catchLoc)return Vt(Lt.catchLoc,!0)}else{if(!Ye)throw new Error("try statement without catch or finally");if(this.prev<Lt.finallyLoc)return Vt(Lt.finallyLoc)}}}},abrupt:function(st,nt){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var qt=this.tryEntries[Vt];if(qt.tryLoc<=this.prev&&a.call(qt,"finallyLoc")&&this.prev<qt.finallyLoc){var Lt=qt;break}}Lt&&(st==="break"||st==="continue")&&Lt.tryLoc<=nt&&nt<=Lt.finallyLoc&&(Lt=null);var Ce=Lt?Lt.completion:{};return Ce.type=st,Ce.arg=nt,Lt?(this.method="next",this.next=Lt.finallyLoc,v):this.complete(Ce)},complete:function(st,nt){if(st.type==="throw")throw st.arg;return st.type==="break"||st.type==="continue"?this.next=st.arg:st.type==="return"?(this.rval=this.arg=st.arg,this.method="return",this.next="end"):st.type==="normal"&&nt&&(this.next=nt),v},finish:function(st){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Vt=this.tryEntries[nt];if(Vt.finallyLoc===st)return this.complete(Vt.completion,Vt.afterLoc),ve(Vt),v}},catch:function(st){for(var nt=this.tryEntries.length-1;nt>=0;--nt){var Vt=this.tryEntries[nt];if(Vt.tryLoc===st){var qt=Vt.completion;if(qt.type==="throw"){var Lt=qt.arg;ve(Vt)}return Lt}}throw new Error("illegal catch attempt")},delegateYield:function(st,nt,Vt){return this.delegate={iterator:an(st),resultName:nt,nextLoc:Vt},this.method==="next"&&(this.arg=void 0),v}},n}function c(n){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},c(n)}function f(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function m(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,u){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var T,y,_=[],I=!0,A=!1;try{for(d=d.call(a);!(I=(T=d.next()).done)&&(_.push(T.value),!u||_.length!==u);I=!0);}catch(v){A=!0,y=v}finally{try{I||d.return==null||d.return()}finally{if(A)throw y}}return _}}(n,o)||b(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function g(n){return function(o){if(Array.isArray(o))return C(o)}(n)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(n)||b(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function b(n,o){if(n){if(typeof n=="string")return C(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?C(n,o):void 0}}function C(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,u=new Array(o);a<o;a++)u[a]=n[a];return u}function E(n,o){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=b(n))||o&&n&&typeof n.length=="number"){a&&(n=a);var u=0,d=function(){};return{s:d,n:function(){return u>=n.length?{done:!0}:{done:!1,value:n[u++]}},e:function(I){throw I},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,y=!0,_=!1;return{s:function(){a=a.call(n)},n:function(){var I=a.next();return y=I.done,I},e:function(I){_=!0,T=I},f:function(){try{y||a.return==null||a.return()}finally{if(_)throw T}}}}var O={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){var n=this.input();if(this.is_WHITESPACE()){do n=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(n){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||n==="\\"){for(;this.offset<this.size;){var o=this.input();if(!this.is_LABEL()&&o!=="\\"){o&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(n,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};O.attributeIndex,O.attributeListDepth,O.matchST_ATTRIBUTE;var w={T_COMMENT:function(){for(;this.offset<this.size;){var n=this.input();if(n===`
`||n==="\r")return this.tok.T_COMMENT;if(n==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(n==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var n=this.input(),o=this.tok.T_COMMENT;if(n==="*"){if(n=this.input(),this.is_WHITESPACE()&&(o=this.tok.T_DOC_COMMENT),n==="/")return o;this.unput(1)}for(;this.offset<this.size;)if((n=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return o}};w.T_COMMENT,w.T_DOC_COMMENT;var G={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var n=this.input();if(n=="<"){if((n=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((n=this._input[this.offset+4])===" "||n==="	"||n===`
`||n==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&n=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};G.nextINITIAL,G.matchINITIAL;var rt={consume_NUM:function(){var n=this.yytext[0],o=n===".";if(n==="0")if((n=this.input())==="x"||n==="X"){if((n=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(n?2:1)}else if(n==="b"||n==="B"){if((n=this.input())!=="_"&&n==="0"||n==="1")return this.consume_BNUM();this.unput(n?2:1)}else if(n==="o"||n==="O"){if((n=this.input())!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(n?2:1)}else this.is_NUM()||n&&this.unput(1);for(;this.offset<this.size;){var a=n;if((n=this.input())==="_"){if(a==="_"){this.unput(2);break}if(a==="."){this.unput(1);break}if(a==="e"||a==="E"){this.unput(2);break}}else{if(n==="."){if(o){this.unput(1);break}if(a==="_"){this.unput(2);break}o=!0;continue}if(n==="e"||n==="E"){if(a==="_"){this.unput(1);break}var u=2;if((n=this.input())!=="+"&&n!=="-"||(u=3,n=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(n?u:u-1);break}}if(!this.is_NUM()){n&&this.unput(1);break}}return o?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_HEX()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_NUM()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var n;this.offset<this.size;)if((n=this.input())!=="0"&&n!=="1"&&n!=="_"){n&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_OCTAL()){n&&this.unput(1);break}}return this.tok.T_LNUMBER}};rt.consume_NUM,rt.consume_HNUM,rt.consume_LNUM,rt.consume_BNUM,rt.consume_ONUM;var lt={matchST_LOOKING_FOR_PROPERTY:function(){var n=this.input();if(n==="-"){if((n=this.input())===">")return this.tok.T_OBJECT_OPERATOR;n&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),n&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var n=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(n=this.input())==="["||n==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else n&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var n=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(n==="]")return this.popState(),"]";if(n==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||n==="\\"||n==="'"||n==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(n==="["||n==="{"||n==="}"||n==='"'||n==="`"||this.is_TOKEN())return n;throw new Error("Unexpected terminal")}};lt.matchST_LOOKING_FOR_PROPERTY,lt.matchST_LOOKING_FOR_VARNAME,lt.matchST_VAR_OFFSET;var K={matchST_IN_SCRIPTING:function(){var n=this.input();switch(n){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var o=this._input[this.offset];return o!==`
`&&o!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(n=this._input[this.offset])!==`
`&&n!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(n==="."){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+n+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var n=this.input();if(n!==" "&&n!=="	"&&n!==`
`&&n!=="\r"){n&&this.unput(1);break}}return this.tok.T_WHITESPACE}};K.matchST_IN_SCRIPTING,K.T_WHITESPACE;var z=[`
`,"\r"],at=[`
`,"\r",";"],B=at.concat(["	"," ",",","]",")","/","=","!"]),q={T_CONSTANT_ENCAPSED_STRING:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else if(n=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var n=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var o=this._input[this.offset-1];if(o==="'"||o==='"'?this.offset++:o=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var u=this._input.substring(a,this.offset-1);if((!o||o===this._input[this.offset-1])&&(o&&this.offset++,z.includes(this._input[this.offset-1])))return this.heredoc_label.label=u,this.heredoc_label.length=u.length,this.heredoc_label.finished=!1,a=this.offset-n,this.offset=n,this.consume(a),o==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=n,!1},ST_DOUBLE_QUOTES:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else{if(n=='"')break;if(n=="$"){if((n=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if(n=="{"){if((n=this.input())=="$"){this.unput(2);break}n&&this.unput(1)}}if(n=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var o=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(o=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-o),this.unput(this.yytext.length-o),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(n,o){var a=this._input[n-2];if(!z.includes(a))return!1;var u=!1,d=!1,T=0,y=this._input[n-1];if(this.version>=703){for(;y==="	"||y===" ";)y===" "?u=!0:y==="	"&&(d=!0),y=this._input[n+T],T++;if(n+=T,z.includes(this._input[n-1]))return!1}if(this._input.substring(n-1,n-1+this.heredoc_label.length)===this.heredoc_label.label){var _=this._input[n-1+this.heredoc_label.length];if((this.version>=703?B:at).includes(_)){if(o){if(this.consume(T),u&&d)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=T,this.heredoc_label.indentation_uses_spaces=u,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var n=this.offset+1;n<this._input.length;){if(this.isDOC_MATCH(n,!1))return;if(!z.includes(this._input[n-1]))for(;!z.includes(this._input[n++])&&n<this._input.length;);n++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var n=this._input[this.offset-1];this.offset<this.size;)if(z.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(n==="\\"&&(n=this.input(),z.includes(n)||(n=this.input())),z.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var n=this.input();if(n=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(n==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else n&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==="`")return this.popState(),"`";for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}continue}if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==='"')return this.popState(),'"';for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}n&&this.unput(1)}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};q.T_CONSTANT_ENCAPSED_STRING,q.is_HEREDOC,q.ST_DOUBLE_QUOTES,q.isDOC_MATCH,q.prematch_ENDOFDOC,q.matchST_NOWDOC,q.matchST_HEREDOC,q.consume_VARIABLE,q.matchST_BACKQUOTE,q.matchST_DOUBLE_QUOTES;var _t={T_STRING:function(){var n=this.yytext.toLowerCase(),o=this.keywords[n];if(typeof o!="number"){if(n==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),o=this.tok.T_YIELD_FROM):o=this.tok.T_YIELD;else if(o=this.tok.T_STRING,n==="b"||n==="B"){var a=this.input();if(a==='"')return this.ST_DOUBLE_QUOTES();if(a==="'")return this.T_CONSTANT_ENCAPSED_STRING();a&&this.unput(1)}}if(o===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;for(var u=this.offset,d=this.input();d==" ";)d=this.input();var T=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)d+=this.input();var y=d.slice(0,-1).toLowerCase();T=y!=="extends"&&y!=="implements"}return this.unput(this.offset-u),T?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&o!==this.tok.T_YIELD_FROM){var _=this.input();if(_==="\\"){o=n==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),_=this.input()}while(_==="\\")}_&&this.unput(1)}return o},consume_TOKEN:function(){var n=this._input[this.offset-1],o=this.tokenTerminals[n];return o?o.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var n=this._input[this.offset];return n===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):n==="-"?(this.input(),this.tok.T_DEC):n==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){var n;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),n=this.input()}while(n==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var n=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var o=this.yytext.length;this.consume_LABEL();var a=this.yytext.substring(o-1).toLowerCase(),u=this.castKeywords[a];if(typeof u=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return u}return this.unput(this.offset-n),"("},"=":function(){var n=this._input[this.offset];return n===">"?(this.input(),this.tok.T_DOUBLE_ARROW):n==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var n=this._input[this.offset];return n==="+"?(this.input(),this.tok.T_INC):n==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var n=this._input[this.offset];return n==="<"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):n==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):n==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):n===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):n===">"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_MUL_EQUAL):n==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_CONCAT_EQUAL):n==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_AND_EQUAL):n==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_OR_EQUAL):n==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};_t.T_STRING,_t.consume_TOKEN,_t.tokenTerminals;var it={is_NUM:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n===95},is_NUM_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58},is_LABEL:function(){var n=this._input.charCodeAt(this.offset-1);return n>96&&n<123||n>64&&n<91||n===95||n>47&&n<58||n>126},is_LABEL_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>64&&n<91||n>96&&n<123||n===95||n>126},consume_LABEL:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_LABEL()){n&&this.unput(1);break}}return this},is_TOKEN:function(){var n=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(n)!==-1},is_WHITESPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"||n===`
`||n==="\r"},is_TABSPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_TABSPACE()){n&&this.unput(1);break}}return this},is_HEX:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n>64&&n<71||n>96&&n<103||n===95},is_OCTAL:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<56||n===95}};it.is_NUM,it.is_NUM_START,it.is_LABEL,it.is_LABEL_START,it.consume_LABEL,it.is_TOKEN,it.is_WHITESPACE,it.is_TABSPACE,it.consume_TABSPACE,it.is_HEX,it.is_OCTAL;var vt=function(n){this.engine=n,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};vt.prototype.setInput=function(n){return this._input=n,this.size=n.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},vt.prototype.input=function(){var n=this._input[this.offset];return n?(this.yytext+=n,this.offset++,n==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),n===`
`||n==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,n):""},vt.prototype.unput=function(n){if(n===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,n++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(n>0)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var o=0;o<this.yytext.length;o++){var a=this.yytext[o];a==="\r"?(a=this.yytext[++o],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,a!==`
`&&(a==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):a===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},vt.prototype.tryMatch=function(n){return n===this.ahead(n.length)},vt.prototype.tryMatchCaseless=function(n){return n===this.ahead(n.length).toLowerCase()},vt.prototype.ahead=function(n){var o=this._input.substring(this.offset,this.offset+n);return o[o.length-1]==="\r"&&this._input[this.offset+n+1]===`
`&&(o+=`
`),o},vt.prototype.consume=function(n){for(var o=0;o<n;o++){var a=this._input[this.offset];if(!a)break;this.yytext+=a,this.offset++,a==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,o++),a===`
`||a==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},vt.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},vt.prototype.setState=function(n){return this.yytext=n.yytext,this.offset=n.offset,this.yylineno=n.yylineno,this.yyprevcol=n.yyprevcol,this.yylloc=n.yylloc,n.heredoc_label&&(this.heredoc_label=n.heredoc_label),this},vt.prototype.appendToken=function(n,o){return this.tokens.push([n,o]),this},vt.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var n=this.next()||this.lex();if(!this.all_tokens){for(;n===this.tok.T_WHITESPACE||!this.comment_tokens&&(n===this.tok.T_COMMENT||n===this.tok.T_DOC_COMMENT)||n===this.tok.T_OPEN_TAG;)n=this.next()||this.lex();if(n==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(n===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),n},vt.prototype.begin=function(n){if(this.conditionStack.push(n),this.curCondition=n,this.stateCb=this["match"+n],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+n+'"');return this},vt.prototype.popState=function(){var n=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return n},vt.prototype.next=function(){var n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(c((n=this.tokens.shift())[1])==="object"?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var o=n;o=typeof o=="number"?this.engine.tokens.values[o]:'"'+o+'"';var a=new Error(o+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(a.stack)}return n},[O,w,G,rt,lt,K,q,_t,it].forEach(function(n){for(var o in n)vt.prototype[o]=n[o]});var Mt=vt,Wt=function(n,o,a){this.line=n,this.column=o,this.offset=a},Ut={read_array:function(){var n=null,o=!1,a=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),n=")"):(o=!0,n="]");var u=[];return this.next().token!==n&&(u=this.read_array_pair_list(o)),this.expect(n),this.next(),a(o,u)},read_array_pair_list:function(n){var o=this;return this.read_list(function(){return o.read_array_pair(n)},",",!0)},read_array_pair:function(n){if(!(!n&&this.token===")"||n&&this.token==="]")){if(this.token===",")return this.node("noop")();var o=this.node("entry"),a=null,u=null,d=!1,T=!1;if(this.token==="&")this.next(),d=!0,u=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),T=!0,u=this.read_expr();else{var y=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),a=y,this.token==="&"?(this.next(),d=!0,u=this.read_variable(!0,!1)):u=this.read_expr()):u=y}return o(a,u,d,T)}}};Ut.read_array,Ut.read_array_pair_list,Ut.read_array_pair;var bt={read_class_declaration_statement:function(n){var o=this.node("class"),a=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var u=this.node("identifier"),d=this.text();this.next(),u=u(d);var T=this.read_extends_from(),y=this.read_implements_list();this.expect("{");var _=o(u,T,y,this.next().read_class_body(!0,!1),a);return n&&(_.attrGroups=n),_},read_class_modifiers:function(){var n=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,n.final_or_abstract,n.readonly]},read_class_modifier:function(n){return this.token===this.tok.T_READ_ONLY?(this.next(),n.readonly=1,n=this.read_class_modifier(n)):n.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),n.final_or_abstract=1,n=this.read_class_modifier(n)):n.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),n.final_or_abstract=2,n=this.read_class_modifier(n)),n},read_class_body:function(n,o){for(var a=[],u=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE)if(o&&this.token===this.tok.T_CASE){var d=this.read_enum_case();this.expect(";")&&this.next(),a=a.concat(d)}else{this.token===this.tok.T_ATTRIBUTE&&(u=this.read_attr_list());var T=this.position(),y=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(n&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),y[0]=null,y[1]=0),this.token===this.tok.T_FUNCTION)a.push(this.read_function(!1,y,u,T)),u=[];else if(n&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){var _=this.read_variable_list(y,u);u=[],this.expect(";"),this.next(),a=a.concat(_)}else this.error([this.tok.T_CONST].concat(g(n?[this.tok.T_VARIABLE]:[]),g(o?[this.tok.T_CASE]:[]),[this.tok.T_FUNCTION])),this.next();else{var I=this.read_constant_list(y,u);this.expect(";")&&this.next(),a=a.concat(I)}}else a=a.concat(this.read_trait_use_statement());else a.push(this.read_doc_comment());else a.push(this.read_comment());return this.expect("}"),this.next(),a},read_variable_list:function(n,o){var a=this.node("propertystatement"),u=this.read_list(function(){var d=this.node("property"),T=!1;this.token===this.tok.T_READ_ONLY&&(T=!0,this.next());var y=m(this.read_optional_type(),2),_=y[0],I=y[1];this.expect(this.tok.T_VARIABLE);var A=this.node("identifier"),v=this.text().substring(1);return this.next(),A=A(v),this.token===";"||this.token===","?d(A,null,T,_,I,o||[]):this.token==="="?d(A,this.next().read_expr(),T,_,I,o||[]):(this.expect([",",";","="]),d(A,null,_,I,o||[]))},",");return a(null,u,n)},read_constant_list:function(n,o){this.expect(this.tok.T_CONST)&&this.next();var a=this.node("classconstant"),u=this.read_list(function(){var d=this.node("constant"),T=null,y=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){T=this.node("identifier");var _=this.text();this.next(),T=T(_)}else this.expect("IDENTIFIER");return this.expect("=")&&(y=this.next().read_expr()),d(T,y)},",");return a(null,u,n,o||[])},read_member_flags:function(n){var o=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var a=0,u=0;do{switch(this.token){case this.tok.T_PUBLIC:a=0,u=0;break;case this.tok.T_PROTECTED:a=0,u=1;break;case this.tok.T_PRIVATE:a=0,u=2;break;case this.tok.T_STATIC:a=1,u=1;break;case this.tok.T_ABSTRACT:a=2,u=1;break;case this.tok.T_FINAL:a=2,u=2}n&&(a==0&&u==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),u=-1):a==2&&u==1&&(this.error(),u=-1)),o[a]!==-1?this.error():u!==-1&&(o[a]=u)}while(this.next().is("T_MEMBER_FLAGS"))}return o[1]==-1&&(o[1]=0),o[2]==-1&&(o[2]=0),o},read_optional_type:function(){var n=!1;this.token==="?"&&(n=!0,this.next());var o=this.read_types();if(n&&!o&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!o)return[!1,null];if(this.token==="|"){o=[o];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}o.push(a)}while(this.token==="|")}return[n,o]},read_interface_declaration_statement:function(n){var o=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),u=this.text();this.next(),a=a(u);var d=this.read_interface_extends_list();return this.expect("{"),o(a,d,this.next().read_interface_body(),n||[])},read_interface_body:function(){for(var n=[],o=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var a=this.position();o=this.read_attr_list();var u=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var d=this.read_constant_list(u,o);this.expect(";")&&this.next(),n=n.concat(d),o=[]}else if(this.token===this.tok.T_FUNCTION){var T=this.read_function_declaration(2,u,o,a);T.parseFlags(u),n.push(T),this.expect(";")&&this.next(),o=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}")&&this.next(),n},read_trait_declaration_statement:function(){var n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("{"),n(o,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){var n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var o=[this.read_namespace_name()],a=null;this.token===",";)o.push(this.next().read_namespace_name());if(this.token==="{"){for(a=[];this.next().token!==this.EOF&&this.token!=="}";)a.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(o,a)},read_trait_use_alias:function(){var n,o=this.node(),a=null;if(this.is("IDENTIFIER")){n=this.node("identifier");var u=this.text();this.next(),n=n(u)}else if(n=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){a=n,n=this.node("identifier");var d=this.text();this.next(),n=n(d)}else this.expect(this.tok.T_STRING);else n=n.name;if(this.token===this.tok.T_INSTEADOF)return o("traitprecedence",a,n,this.next().read_name_list());if(this.token===this.tok.T_AS){var T=null,y=null;if(this.next().is("T_MEMBER_FLAGS")&&(T=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){y=this.node("identifier");var _=this.text();this.next(),y=y(_)}else T===!1&&this.expect(this.tok.T_STRING);return o("traitalias",a,n,y,T)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),o("traitalias",a,n,null,null)}};bt.read_class_declaration_statement,bt.read_class_modifiers,bt.read_class_modifier,bt.read_class_body,bt.read_variable_list,bt.read_constant_list,bt.read_member_flags,bt.read_optional_type,bt.read_interface_declaration_statement,bt.read_interface_body,bt.read_trait_declaration_statement,bt.read_trait_use_statement,bt.read_trait_use_alias;var se={read_comment:function(){var n=this.text(),o=this.ast.prepare(n.substring(0,2)==="/*"?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,u=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(o=o(n)).offset=a,this.prev=u,o},read_doc_comment:function(){var n=this.ast.prepare("commentblock",null,this),o=this.lexer.yylloc.first_offset,a=this.text(),u=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(n=n(a)).offset=o,this.prev=u,n}};se.read_comment,se.read_doc_comment;var Qt={read_expr:function(n){var o=this.node();if(this.token==="@")return n||(n=this.next().read_expr()),o("silent",n);if(n||(n=this.read_expr_item()),this.token==="|")return o("bin","|",n,this.next().read_expr());if(this.token==="&")return o("bin","&",n,this.next().read_expr());if(this.token==="^")return o("bin","^",n,this.next().read_expr());if(this.token===".")return o("bin",".",n,this.next().read_expr());if(this.token==="+")return o("bin","+",n,this.next().read_expr());if(this.token==="-")return o("bin","-",n,this.next().read_expr());if(this.token==="*")return o("bin","*",n,this.next().read_expr());if(this.token==="/")return o("bin","/",n,this.next().read_expr());if(this.token==="%")return o("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return o("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return o("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return o("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return o("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return o("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return o("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return o("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return o("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return o("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return o("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return o("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return o("bin","!=",n,this.next().read_expr());if(this.token==="<")return o("bin","<",n,this.next().read_expr());if(this.token===">")return o("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return o("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return o("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return o("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=o("bin","instanceof",n,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return o("bin","??",n,this.next().read_expr());if(this.token==="?"){var a=null;return this.next().token!==":"&&(a=this.read_expr()),this.expect(":")&&this.next(),o("retif",n,a,this.read_expr())}return o.destroy(n),n},read_expr_cast:function(n){return this.node("cast")(n,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var n=null;switch(this.token){case this.tok.T_ISSET:n=this.node("isset"),this.next().expect("(")&&this.next();var o=this.read_isset_variables();this.expect(")")&&this.next(),n=n(o);break;case this.tok.T_EMPTY:n=this.node("empty"),this.next().expect("(")&&this.next();var a=this.read_expr();this.expect(")")&&this.next(),n=n(a);break;case this.tok.T_INCLUDE:n=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:n=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:n=this.node("eval"),this.next().expect("(")&&this.next();var u=this.read_expr();this.expect(")")&&this.next(),n=n(u);break;case this.tok.T_REQUIRE:n=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:n=this.node("include")(!0,!0,this.next().read_expr())}return n},read_optional_expr:function(n){return this.token!==n?this.read_expr():null},read_exit_expr:function(){var n=null;return this.token==="("&&(this.next(),n=this.read_optional_expr(")"),this.expect(")")&&this.next()),n},read_expr_item:function(){var n,o,a=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(o=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(o);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var u=null,d=this.innerList;n=this.node("list"),d||(u=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var T=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var y=!1,_=0;_<T.length;_++)if(T[_]!==null&&T[_].kind!=="noop"){y=!0;break}return y||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),d?n(T,!1):(this.innerList=!1,this.expect("=")?u(n(T,!1),this.next().read_expr(),"="):n(T,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var I=this.lexer.yytext.toLowerCase()==="die";return n=this.node("exit"),this.next(),n(this.read_exit_expr(),I);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var A=null,v=null;return n=this.node("yield"),this.next().is("EXPR")&&(A=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(v=A,A=this.next().read_expr())),n(A,v);case this.tok.T_YIELD_FROM:return(n=this.node("yieldfrom"))(o=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,a);case this.tok.T_STATIC:var Ft=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],a);this.lexer.tokens.push(Ft),this.next()}if(this.is("VARIABLE")){n=this.node();var wt=(o=this.read_variable(!1,!1)).kind==="identifier"||o.kind==="staticlookup"&&o.offset.kind==="identifier";switch(this.token){case"=":return wt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(n,o):n("assign",o,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return wt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"??=");case this.tok.T_INC:return wt&&this.error("VARIABLE"),this.next(),n("post","+",o);case this.tok.T_DEC:return wt&&this.error("VARIABLE"),this.next(),n("post","-",o);default:n.destroy(o)}}else{if(this.is("SCALAR")){if(n=this.node(),(o=this.read_scalar()).kind==="array"&&o.shortForm&&this.token==="="){var le=this.convertToList(o);return o.loc&&(le.loc=o.loc),n("assign",le,this.next().read_expr(),"=")}return n.destroy(o),this.handleDereferencable(o)}this.error("EXPR"),this.next()}return o},convertToList:function(n){var o=this,a=n.items.map(function(d){return d.value&&d.value.kind==="array"&&d.value.shortForm&&(d.value=o.convertToList(d.value)),d}),u=this.node("list")(a,!0);return n.loc&&(u.loc=n.loc),n.leadingComments&&(u.leadingComments=n.leadingComments),n.trailingComments&&(u.trailingComments=n.trailingComments),u},read_assignref:function(n,o){var a;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),a=this.read_new_expr()):a=this.read_variable(!1,!1),n("assignref",o,a)},read_inline_function:function(n,o){if(this.token===this.tok.T_FUNCTION){var a=this.read_function(!0,n,o);return a.attrGroups=o,a}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var u=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var d=this.is_reference();this.expect("(")&&this.next();var T=this.read_parameter_list();this.expect(")")&&this.next();var y=!1,_=null;this.token===":"&&(this.next().token==="?"&&(y=!0,this.next()),_=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var I=u(T,d,this.read_expr(),_,y,!!n);return I.attrGroups=o,I},read_match_expression:function(){var n=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var o,a;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),a=this.read_match_arms(),this.expect("}")&&this.next(),n(o,a)},read_match_arms:function(){var n=this;return this.read_list(function(){return n.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var n=[];if(this.token===this.tok.T_DEFAULT)n=null,this.next();else for(n.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),n;n.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),n},read_attribute:function(){var n=this.text(),o=[];return this.next(),this.token==="("&&(o=this.read_argument_list()),this.node("attribute")(n,o)},read_attr_list:function(){var n=[];if(this.token===this.tok.T_ATTRIBUTE)do{var o=this.node("attrgroup")([]);for(this.next(),o.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&o.attrs.push(this.read_attribute());n.push(o),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return n},read_new_expr:function(){var n=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var o=[];if(this.token==="("){this.next();var a=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(o=this.read_argument_list()),n(a,o)}var u=this.read_attr_list();if(this.token===this.tok.T_CLASS){var d=this.node("class");this.next().token==="("&&(o=this.read_argument_list());var T=this.read_extends_from(),y=this.read_implements_list(),_=null;this.expect("{")&&(_=this.next().read_class_body(!0,!1));var I=d(null,T,y,_,[0,0,0]);return I.attrGroups=u,n(I,o)}for(var A=this.read_new_class_name();this.token==="[";){var v=this.node("offsetlookup"),Ft=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),A=v(A,Ft)}return this.token==="("&&(o=this.read_argument_list()),n(A,o)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var n=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(n=this.read_static_getter(n)),n}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(n){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)n=this.recursive_variable_chain_scan(n,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")n=this.read_dereferencable(n);else{if(this.token!=="(")return n;n=this.node("call")(n,this.read_argument_list())}return n}};Qt.read_expr,Qt.read_expr_cast,Qt.read_isset_variable,Qt.read_isset_variables,Qt.read_internal_functions_in_yacc,Qt.read_optional_expr,Qt.read_exit_expr,Qt.read_expr_item,Qt.convertToList,Qt.read_assignref,Qt.read_inline_function,Qt.read_match_expression,Qt.read_match_arms,Qt.read_match_arm,Qt.read_match_arm_conds,Qt.read_attribute,Qt.read_attr_list,Qt.read_new_expr,Qt.read_new_class_name,Qt.handleDereferencable;var yt={read_enum_declaration_statement:function(n){var o=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),u=this.text();this.next(),a=a(u);var d=this.read_enum_value_type(),T=this.read_implements_list();this.expect("{");var y=o(a,d,T,this.next().read_class_body(!1,!0));return n&&(y.attrGroups=n),y},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);var n=this.node("enumcase"),o=this.node("identifier"),a=this.next().text();this.next(),o=o(a);var u=this.token==="="?this.next().read_expr():null;return this.expect(";"),n(o,u)}};yt.read_enum_declaration_statement,yt.read_enum_value_type,yt.read_enum_case;var ut={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(n,o,a,u){var d=this.read_function_declaration(n?1:o?2:0,o&&o[1]===1,a||[],u);return o&&o[2]==1?(d.parseFlags(o),this.expect(";")&&this.next()):(this.expect("{")&&(d.body=this.read_code_block(!1),d.loc&&d.body.loc&&(d.loc.end=d.body.loc.end)),!n&&o&&d.parseFlags(o)),d},read_function_declaration:function(n,o,a,u){var d=this,T="function";n===1?T="closure":n===2&&(T="method");var y=this.node(T);this.expect(this.tok.T_FUNCTION)&&this.next();var _=this.is_reference(),I=!1,A=[],v=null,Ft=!1;if(n!==1){var wt=this.node("identifier");n===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(I=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(I=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(I=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(I=this.text()),this.next()),I=wt(I)}this.expect("(")&&this.next();var le=this.read_parameter_list(I.name==="__construct");this.expect(")")&&this.next(),n===1&&(A=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(Ft=!0,this.next()),v=this.read_types());var _e=function(Bt){return Bt.attrGroups=a||[],u&&Bt.loc&&(Bt.loc.start=u,Bt.loc.source&&(Bt.loc.source=d.lexer._input.substr(Bt.loc.start.offset,Bt.loc.end.offset-Bt.loc.start.offset))),Bt};return _e(n===1?y(le,_,A,v,Ft,o):y(I,le,_,v,Ft))},read_lexical_vars:function(){var n=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),n=this.read_lexical_var_list(),this.expect(")")&&this.next()),n},read_list_with_dangling_comma:function(n){for(var o=[];this.token!=this.EOF;){if(o.push(n()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return o}return o},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var n=this.node("variable");this.expect(this.tok.T_VARIABLE);var o=this.text().substring(1);return this.next(),n(o,!1)},read_parameter_list:function(n){if(this.token!==")"){var o=!1;return this.read_list_with_dangling_comma(function(){var a=this.read_parameter(n);return a&&(o&&this.raiseError("Unexpected parameter after a variadic parameter"),a.variadic&&(o=!0)),a}.bind(this),",")}return[]},read_parameter:function(n){var o,a=this.node("parameter"),u=null,d=null,T=!1,y=!1,_=[];this.token===this.tok.T_ATTRIBUTE&&(_=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(n?(this.next(),y=!0):this.raiseError("readonly properties can be used only on class constructor"));var I=this.read_promoted();!y&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(n?(this.next(),y=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),T=!0),o=this.read_types(),T&&!o&&this.raiseError("Expecting a type definition combined with nullable operator");var A=this.is_reference(),v=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){u=this.node("identifier");var Ft=this.text().substring(1);this.next(),u=u(Ft)}this.token=="="&&(d=this.next().read_expr());var wt=a(u,o,d,A,v,y,T,I);return _&&(wt.attrGroups=_),wt},read_types:function(){var n="unset",o="union",a="intersection",u=[],d=n,T=this.read_type();if(!T)return null;for(u.push(T);this.token==="|"||this.version>=801&&this.token==="&";){var y=this.peek();if(y===this.tok.T_ELLIPSIS||y===this.tok.T_VARIABLE)break;d===n?d=this.token==="|"?o:a:(d===o&&this.token!=="|"||d===a&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),u.push(this.read_type())}return u.length===1?u[0]:d===a?this.node("intersectiontype")(u):this.node("uniontype")(u)},read_promoted:function(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var n=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(n.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(n=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),n},read_non_empty_argument_list:function(){var n=!1;return this.read_function_list(function(){var o=this.read_argument();if(o){var a=o.kind==="variadic";n&&!a&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),a&&(n=!0)}return o}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){var n=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var o=this.text();return this.next(),n("typereference",o.toLowerCase(),o)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var a=this.text(),u=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(a.toLowerCase())>-1?n("typereference",a.toLowerCase(),a):(this.lexer.tokens.push(u),this.next(),n.destroy(),this.read_namespace_name())}return n.destroy(),null}};ut.is_reference,ut.is_variadic,ut.read_function,ut.read_function_declaration,ut.read_lexical_vars,ut.read_list_with_dangling_comma,ut.read_lexical_var_list,ut.read_lexical_var,ut.read_parameter_list,ut.read_parameter,ut.read_types,ut.read_promoted,ut.read_argument_list,ut.read_non_empty_argument_list,ut.read_argument,ut.read_type;var ce={read_if:function(){var n=this.node("if"),o=this.next().read_if_expr(),a=null,u=null,d=!1;if(this.token===":"){d=!0,this.next(),a=this.node("block");for(var T=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){u=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){u=this.read_else_short();break}T.push(this.read_inner_statement())}a=a(null,T),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else a=this.read_statement(),this.token===this.tok.T_ELSEIF?u=this.read_if():this.token===this.tok.T_ELSE&&(u=this.next().read_statement());return n(o,a,u,d)},read_if_expr:function(){this.expect("(")&&this.next();var n=this.read_expr();return this.expect(")")&&this.next(),n},read_elseif_short:function(){var n=null,o=this.node("if"),a=this.next().read_if_expr();this.expect(":")&&this.next();for(var u=this.node("block"),d=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}d.push(this.read_inner_statement())}return o(a,u(null,d),n,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var n=this.node("block"),o=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)o.push(this.read_inner_statement());return n(null,o)}};ce.read_if,ce.read_if_expr,ce.read_elseif_short,ce.read_else_short;var It={read_while:function(){var n=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var o,a=null,u=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(u=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),n(o,a,u)},read_do:function(){var n=this.node("do");this.expect(this.tok.T_DO)&&this.next();var o,a=null;return o=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),a=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(a,o)},read_for:function(){var n=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var o=[],a=[],u=[],d=null,T=!1;return this.expect("(")&&this.next(),this.token!==";"?(o=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(u=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOR)):d=this.read_statement(),n(o,a,u,d,T)},read_foreach:function(){var n=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var o,a=null,u=null,d=null,T=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),u=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=u,u=this.next().read_foreach_variable())),a&&a.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOREACH)):d=this.read_statement(),n(o,a,u,d,T)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var n=this.token==="[",o=this.node("list");this.next(),!n&&this.expect("(")&&this.next();var a=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),o(a,n)}return this.read_variable(!1,!1)}};It.read_while,It.read_do,It.read_for,It.read_foreach,It.read_foreach_variable;var oe={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};oe.read_start;var de={read_namespace:function(){var n,o,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),o=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=o,this.token===";"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect(this.EOF),a(o.name,n,!1)):this.token==="{"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect("}")&&this.next(),n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),a(o.name,n,!0)):(this.error(["{",";"]),this.currentNamespace=o,n=this.read_top_statements(),this.expect(this.EOF),a(o,n,!1))},read_namespace_name:function(n){var o,a=this.node(),u=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:o=this.ast.name.RELATIVE_NAME,u=u.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:o=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:o=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(o=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return a("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),n||this.token!=="("){if(u.toLowerCase()==="parent")return a("parentreference",u);if(u.toLowerCase()==="self")return a("selfreference",u)}return a("name",u,o)},read_use_statement:function(){var n=this.node("usegroup"),o=[],a=null;this.expect(this.tok.T_USE)&&this.next();var u=this.read_use_type();return o.push(this.read_use_declaration(!1)),this.token===","?o=o.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(a=o[0].name,o=this.next().read_use_declarations(u===null),this.expect("}")&&this.next()),n=n(a,u,o),this.expect(";")&&this.next(),n},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(n){var o=this.node("useitem"),a=null;n&&(a=this.read_use_type());var u=this.read_namespace_name(),d=this.read_use_alias();return o(u.name,d,a)},read_use_declarations:function(n){for(var o=[this.read_use_declaration(n)];this.token===",";){if(this.next(),n){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;o.push(this.read_use_declaration(n))}return o},read_use_alias:function(){var n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var o=this.node("identifier"),a=this.text();this.next(),n=o(a)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};de.read_namespace,de.read_namespace_name,de.read_use_statement,de.read_class_name_reference,de.read_use_declaration,de.read_use_declarations,de.read_use_alias,de.read_use_type;var L={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},D={resolve_special_chars:function(n,o){return o?n.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(a,u,d){return L[u]?L[u]:u[0]==="x"||u[0]==="X"?String.fromCodePoint(parseInt(u.substr(1),16)):u[0]==="u"?String.fromCodePoint(parseInt(d,16)):String.fromCodePoint(parseInt(u,8))}):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(n,o,a,u){if(o===0)return n;this.check_heredoc_indentation_level(n,o,a,u);var d=a?" ":"	",T=new RegExp("\\n".concat(d,"{").concat(o,"}"),"g"),y=new RegExp("^".concat(d,"{").concat(o,"}"));return u&&(n=n.replace(y,"")),n.replace(T,`
`)},check_heredoc_indentation_level:function(n,o,a,u){var d=n.length,T=0,y=0,_=!0,I=a?" ":"	",A=!1;if(!u){if((T=n.indexOf(`
`))===-1)return;T++}for(;T<d;)_?n[T]===I?y++:A=!0:_=!1,n[T]!==`
`&&A&&y<o?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(o,")")):A=!1,n[T]===`
`&&(_=!0,y=0),T++},read_dereferencable_scalar:function(){var n=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var o=this.node("string"),a=this.text(),u=0;a[0]!=="b"&&a[0]!=="B"||(u=1);var d=a[u]==='"';this.next(),o=o(d,this.resolve_special_chars(a.substring(u+1,a.length-1),d),u===1,a),n=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(o):o;break;case this.tok.T_ARRAY:case"[":n=this.read_array()}return n},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var n,o;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var a=this.node("number");return n=this.text(),this.next(),a(n,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var u=this.lexer.yylloc.first_offset;o=this.node("nowdoc"),n=this.next().text(),this.lexer.heredoc_label.indentation>0&&(n=n.substring(0,n.length-this.lexer.heredoc_label.indentation));var d=n[n.length-1];d===`
`?n=n[n.length-2]==="\r"?n.substring(0,n.length-2):n.substring(0,n.length-1):d==="\r"&&(n=n.substring(0,n.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var T=this.lexer._input.substring(u,this.lexer.yylloc.first_offset);return o=o(this.remove_heredoc_leading_whitespace_chars(n,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),T,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,o}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var y=this.error("SCALAR");return this.next(),y}},read_dereferencable:function(n){var o,a,u=this.node("offsetlookup");return this.token==="["?(a=this.next().read_expr(),this.expect("]")&&this.next(),o=u(n,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(o=u(n,a=this.read_encapsed_string_item(!1))),o},read_encapsed_string_item:function(n){var o,a,u,d=this.node("encapsedpart"),T=null,y=!1,_=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var I=this.text();this.next(),_=_("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(I,n),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):I,!1,I)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(T="simple",y=!0,u=null,this.next().token===this.tok.T_STRING_VARNAME){u=this.node("variable");var A=this.text();this.next(),_.destroy(),this.token==="["?(u=u(A,!1),a=this.node("offsetlookup"),o=this.next().read_expr(),this.expect("]")&&this.next(),_=a(u,o)):_=u(A,!1)}else _=_("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)T="complex",_.destroy(),_=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(T="simple",_.destroy(),_=this.read_simple_variable(),this.token==="["&&(a=this.node("offsetlookup"),o=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),_=a(_,o)),this.token===this.tok.T_OBJECT_OPERATOR){a=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var v=this.node("identifier");u=this.text(),this.next(),_=a(_,v(u))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var Ft=this.text();this.next(),_.destroy(),_=_("string",!1,Ft,!1,Ft)}return this.lexer.heredoc_label.first_encaps_node=!1,d(_,T,y)},read_encapsed_string:function(n){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=this.lexer.yylloc.first_offset,u=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(o?1:0),T=[],y=null;for(y=n==="`"?this.ast.encapsed.TYPE_SHELL:n==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==n&&this.token!==this.EOF;)T.push(this.read_encapsed_string_item(!0));if(T.length>0&&T[T.length-1].kind==="encapsedpart"&&T[T.length-1].expression.kind==="string"){var _=T[T.length-1].expression,I=_.value[_.value.length-1];I===`
`?_.value[_.value.length-2]==="\r"?_.value=_.value.substring(0,_.value.length-2):_.value=_.value.substring(0,_.value.length-1):I==="\r"&&(_.value=_.value.substring(0,_.value.length-1))}this.expect(n)&&this.next();var A=this.lexer._input.substring(y==="heredoc"?a:d-1,this.lexer.yylloc.first_offset);return u=u(T,A,y),n===this.tok.T_END_HEREDOC&&(u.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),u},get_magic_constant:function(){var n=this.node("magic"),o=this.text();return this.next(),n(o.toUpperCase(),o)}};D.resolve_special_chars,D.remove_heredoc_leading_whitespace_chars,D.check_heredoc_indentation_level,D.read_dereferencable_scalar,D.read_scalar,D.read_dereferencable,D.read_encapsed_string_item,D.read_encapsed_string,D.get_magic_constant;var X={read_top_statements:function(){for(var n=[];this.token!==this.EOF&&this.token!=="}";){var o=this.read_top_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_top_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,n);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(n);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(n);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(n);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var o=this.node("constantstatement"),a=this.next().read_const_list();return this.expectEndOfStatement(),o(null,a);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var u=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,u(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var n=[];this.token!=this.EOF&&this.token!=="}";){var o=this.read_inner_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var n=this.node("constant"),o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("=")?n(o,this.next().read_expr()):n(o,null)},",",!1)},read_declare_list:function(){for(var n=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var o=this.node("declaredirective"),a=this.node("identifier"),u=this.text();this.next(),a=a(u);var d=null;if(this.expect("=")&&(d=this.next().read_expr()),n.push(o(a,d)),this.token!==",")break;this.next()}return n},read_inner_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var o=this.read_function(!1,!1);return o.attrGroups=n,o;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var a=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),a=a(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),a;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var n=this.node("return");this.next();var o=this.read_optional_expr(";");return this.expectEndOfStatement(),n(o);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var a=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var u=this.read_optional_expr(";");return this.expectEndOfStatement(),a(u);case this.tok.T_GLOBAL:var d=this.node("global"),T=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),d(T);case this.tok.T_STATIC:var y=[this.token,this.lexer.getState()],_=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(y);var I=this.next().read_expr();return this.expectEndOfStatement(I),_("expressionstatement",I)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var A=this.read_variable_declarations();return this.expectEndOfStatement(),_("static",A);case this.tok.T_ECHO:var v=this.node("echo"),Ft=this.text(),wt=Ft==="<?="||Ft==="<%=",le=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),v(le,wt);case this.tok.T_INLINE_HTML:var _e=this.text(),Bt=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,Ee=Bt==="\r"||Bt===`
`;Ee&&Bt===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(Bt=`\r
`);var Jt=this.node("inline");return this.next(),Jt(_e,Ee?Bt+_e:_e);case this.tok.T_UNSET:var Ne=this.node("unset");this.next().expect("(")&&this.next();var Ae=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),Ne(Ae);case this.tok.T_DECLARE:var ge,Xt=this.node("declare"),ve=[];this.next().expect("(")&&this.next();var Be=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)ve.push(this.read_top_statement());ve.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&ve.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),ge=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)ve.push(this.read_top_statement());ve.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&ve.push(this.node("noop")()),this.expect("}")&&this.next(),ge=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),ge=this.ast.declare.MODE_NONE;return Xt(Be,ve,ge);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var an=this.node("throw"),_i=this.next().read_expr();return this.expectEndOfStatement(),an(_i);case";":return this.next(),null;case this.tok.T_STRING:var st=this.node(),nt=[this.token,this.lexer.getState()],Vt=this.text(),qt=this.node("identifier");if(this.next().token===":")return qt=qt(Vt),this.next(),st("label",qt);qt.destroy(),st.destroy(),this.lexer.tokens.push(nt);var Lt=this.node("expressionstatement"),Ce=this.next().read_expr();return this.expectEndOfStatement(Ce),Lt(Ce);case this.tok.T_GOTO:var De=this.node("goto"),Ye=null;if(this.next().expect(this.tok.T_STRING)){Ye=this.node("identifier");var mi=this.text();this.next(),Ye=Ye(mi),this.expectEndOfStatement()}return De(Ye);default:var re=this.node("expressionstatement"),Ge=this.read_expr();return this.expectEndOfStatement(Ge),re(Ge)}},read_code_block:function(n){var o=this.node("block");this.expect("{")&&this.next();var a=n?this.read_top_statements():this.read_inner_statements();return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect("}")&&this.next(),o(null,a)}};X.read_top_statements,X.read_top_statement,X.read_inner_statements,X.read_const_list,X.read_declare_list,X.read_inner_statement,X.read_statement,X.read_code_block;var mt={read_switch:function(){var n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var o=this.read_expr();this.expect(")")&&this.next();var a=this.token===":";return n(o,this.read_switch_case_list(),a)},read_switch_case_list:function(){var n=null,o=this.node("block"),a=[];for(this.token==="{"?n="}":this.token===":"?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==n;)a.push(this.read_case_list(n));return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),o(null,a)},read_case_list:function(n){var o=this.node("case"),a=null;this.token===this.tok.T_CASE?a=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var u=this.node("block"),d=[];this.token!==this.EOF&&this.token!==n&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)d.push(this.read_inner_statement());return o(a,u(null,d))}};mt.read_switch,mt.read_switch_case_list,mt.read_case_list;var Ht={read_try:function(){this.expect(this.tok.T_TRY);for(var n=this.node("try"),o=null,a=[],u=this.next().read_statement();this.token===this.tok.T_CATCH;){var d=this.node("catch");this.next().expect("(")&&this.next();var T=this.read_list(this.read_namespace_name,"|",!1),y=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(y=this.read_variable(!0,!1)),this.expect(")"),a.push(d(this.next().read_statement(),T,y))}return this.token===this.tok.T_FINALLY&&(o=this.next().read_statement()),n(u,a,o)}};Ht.read_try;var tt={read_short_form:function(n){var o=this.node("block"),a=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)a.push(this.read_inner_statement());return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),o(null,a)},read_function_list:function(n,o){var a=[];do{if(this.token==o&&this.version>=703&&a.length>0){a.push(this.node("noop")());break}if(a.push(n.apply(this,[])),this.token!=o||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return a},read_list:function(n,o,a){var u=[];if(this.token==o&&(a&&u.push(typeof n=="function"?this.node("noop")():null),this.next()),typeof n=="function")do{var d=n.apply(this,[]);if(d&&u.push(d),this.token!=o)break}while(this.next().token!=this.EOF);else{if(!this.expect(n))return[];for(u.push(this.text());this.next().token!=this.EOF&&this.token==o&&this.next().token==n;)u.push(this.text())}return u},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){var o=this.node("byref");this.next(),o=o(null);var a=n();return a&&(this.ast.swapLocations(a,o,a,this),a.byref=!0),a},read_variable_declarations:function(){return this.read_list(function(){var n=this.node("staticvariable"),o=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var a=this.text().substring(1);this.next(),o=o(a,!1)}else o=o("#ERR",!1);return this.token==="="?n(o,this.next().read_expr()):o},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};tt.read_short_form,tt.read_function_list,tt.read_list,tt.read_name_list,tt.read_byref,tt.read_variable_declarations,tt.read_extends_from,tt.read_interface_extends_list,tt.read_implements_list;var M={read_variable:function(n,o){var a;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,n,o));if(this.is([this.tok.T_VARIABLE,"$"]))a=this.read_reference_variable(o);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){a=this.node();var u=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(u.kind)===-1){var d=u.name.toLowerCase();d==="true"?a=u.destroy(a("boolean",!0,u.name)):d==="false"?a=u.destroy(a("boolean",!1,u.name)):d==="null"?a=u.destroy(a("nullkeyword",u.name)):(a.destroy(u),a=u)}else a.destroy(u),a=u}else if(this.token===this.tok.T_STATIC){a=this.node("staticreference");var T=this.text();this.next(),a=a(T)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(a=this.read_static_getter(a,o)),this.recursive_variable_chain_scan(a,n,o)},read_static_getter:function(n,o){var a,u,d=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?a=this.read_reference_variable(o):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(a=this.node("identifier"),u=this.text(),this.next(),a=a(u)):this.token==="{"?(a=this.node("literal"),u=this.next().read_expr(),this.expect("}")&&this.next(),a=a("literal",u,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),a=this.node("identifier"),u=this.text(),this.next(),a=a(u)),d(n,a)},read_what:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=null,a=null;switch(this.next().token){case this.tok.T_STRING:o=this.node("identifier"),a=this.text(),this.next(),o=o(a),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:o=this.node("variable"),a=this.text().substring(1),this.next(),o=o(a,!1);break;case"$":o=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(a=this.next().read_expr(),this.expect("}")&&this.next(),o=o("variable",a,!0)):o=o("variable",a=this.read_expr(),!1);break;case"{":o=this.node("encapsedpart"),a=this.next().read_expr(),this.expect("}")&&this.next(),o=o(a,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),o=this.node("identifier"),a=this.text(),this.next(),o=o(a)}return o},recursive_variable_chain_scan:function(n,o,a){var u,d;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(o)return n;n=this.node("call")(n,this.read_argument_list());break;case"[":case"{":var T=this.token==="[";u=this.node("offsetlookup"),this.next(),d=!1,a?(d=this.read_encaps_var_offset(),this.expect(T?"]":"}")&&this.next()):(T?this.token!=="]":this.token!=="}")?(d=this.read_expr(),this.expect(T?"]":"}")&&this.next()):this.next(),n=u(n,d);break;case this.tok.T_DOUBLE_COLON:n.kind==="staticlookup"&&n.offset.kind==="identifier"&&this.error(),n=(u=this.node("staticlookup"))(n,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:n=(u=this.node("propertylookup"))(n,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:n=(u=this.node("nullsafepropertylookup"))(n,this.read_what());break;default:break t}return n},read_encaps_var_offset:function(){var n=this.node();if(this.token===this.tok.T_STRING){var o=this.text();this.next(),n=n("identifier",o)}else if(this.token===this.tok.T_NUM_STRING){var a=this.text();this.next(),n=n("number",a,null)}else if(this.token==="-"){this.next();var u=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),n=n("number",u,null)}else if(this.token===this.tok.T_VARIABLE){var d=this.text().substring(1);this.next(),n=n("variable",d,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var T=this.text();this.next(),n=n("identifier",T)}return n},read_reference_variable:function(n){for(var o,a=this.read_simple_variable();this.token!=this.EOF;){var u=this.node();if(this.token!="{"||n){u.destroy();break}o=this.next().read_expr(),this.expect("}")&&this.next(),a=u("offsetlookup",a,o)}return a},read_simple_variable:function(){var n,o=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)n=this.text().substring(1),this.next(),o=o(n,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var a=this.next().read_expr();this.expect("}")&&this.next(),o=o(a,!0);break;case"$":o=o(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:n=this.text().substring(1);var u=this.node("variable");this.next(),o=o(u(n,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),n=this.text(),this.next(),o=o(n,!1)}return o}};function W(n){return n!="."&&n!=","&&!isNaN(parseFloat(n))&&isFinite(n)}M.read_variable,M.read_static_getter,M.read_what,M.recursive_variable_chain_scan,M.read_encaps_var_offset,M.read_reference_variable,M.read_simple_variable;var U=function(n,o){this.lexer=n,this.ast=o,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var a=function(u){return[u,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(a)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(a)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(a)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(a)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(a)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a))}};U.prototype.getTokenName=function(n){return W(n)?n==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[n]:"'"+n+"'"},U.prototype.parse=function(n,o){this._errors=[],this.filename=o||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(n),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var a=this.node("program"),u=[];for(this.next();this.token!=this.EOF;)u.push(this.read_start());u.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&u.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var d=a(u,this._errors,this._docs,this._tokens);if(this.debug){var T=this.ast.checkNodes();if(T.length>0)throw T.forEach(function(y){y.position&&console.log("Node at line "+y.position.line+", column "+y.position.column),console.log(y.stack.join(`
`))}),new Error("Some nodes are not closed")}return d},U.prototype.raiseError=function(n,o,a,u){if(n+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var d=new SyntaxError(n,this.filename,this.lexer.yylloc.first_line);throw d.lineNumber=this.lexer.yylloc.first_line,d.fileName=this.filename,d.columnNumber=this.lexer.yylloc.first_column,d}var T=this.ast.prepare("error",null,this)(n,u,this.lexer.yylloc.first_line,a);return this._errors.push(T),T},U.prototype.error=function(n){var o="Parse Error : syntax error",a=this.getTokenName(this.token),u="";if(this.token!==this.EOF){if(W(this.token)){var d=this.text();d.length>10&&(d=d.substring(0,7)+"..."),a="'"+d+"' ("+a+")"}o+=", unexpected "+a}return n&&!Array.isArray(n)&&((W(n)||n.length===1)&&(u=", expecting "+this.getTokenName(n)),o+=u),this.raiseError(o,u,n,a)},U.prototype.position=function(){return new Wt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},U.prototype.node=function(n){if(this.extractDoc){var o=null;this._docIndex<this._docs.length&&(o=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(o)));var a=this.ast.prepare(n,o,this);return a.postBuild=function(u){if(this._docIndex<this._docs.length)if(this._lastNode){for(var d=this.prev[2],T=this._docIndex;T<this._docs.length&&!(this._docs[T].offset>d);T++);T>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,T)),this._docIndex=T)}else this.token===this.EOF&&(u.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=u}.bind(this),a}return this.ast.prepare(n,null,this)},U.prototype.expectEndOfStatement=function(n){if(this.token===";")n&&this.lexer.yytext===";"&&n.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var J=["parser.next","parser.node","parser.showlog"];U.prototype.showlog=function(){for(var n,o=new Error().stack.split(`
`),a=2;a<o.length;a++){n=o[a].trim();for(var u=!1,d=0;d<J.length;d++)if(n.substring(3,3+J[d].length)===J[d]){u=!0;break}if(!u)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+n),this},U.prototype.expect=function(n){if(Array.isArray(n)){if(n.indexOf(this.token)===-1)return this.error(n),!1}else if(this.token!=n)return this.error(n),!1;return!0},U.prototype.text=function(){return this.lexer.yytext},U.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},U.prototype.peek=function(){var n=this.lexer.getState(),o=this.lexer.lex();return this.lexer.setState(n),o},U.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var n=this.lexer.yytext;if(n=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(n),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},U.prototype.is=function(n){return Array.isArray(n)?n.indexOf(this.token)!==-1:this.entries[n].has(this.token)},[Ut,bt,se,Qt,yt,ut,ce,It,oe,de,D,X,mt,Ht,tt,M].forEach(function(n){for(var o in n){if(Object.prototype.hasOwnProperty.call(U.prototype,o))throw new Error("Function "+o+" is already defined - collision");U.prototype[o]=n[o]}});var ot=U,et={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},Q={values:Object.entries(et).reduce(function(n,o){var a=m(o,2),u=a[0],d=a[1];return h(h({},n),{},f({},d,u))},{}),names:et},ht=Object.freeze(Q),xt=function(n,o,a){this.source=n,this.start=o,this.end=a},Kt=function(n,o,a){this.kind=n,o&&(this.leadingComments=o),a&&(this.loc=a)};Kt.prototype.setTrailingComments=function(n){this.trailingComments=n},Kt.prototype.destroy=function(n){if(!n)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(n.leadingComments?n.leadingComments=Array.concat(this.leadingComments,n.leadingComments):n.leadingComments=this.leadingComments),this.trailingComments&&(n.trailingComments?n.trailingComments=Array.concat(this.trailingComments,n.trailingComments):n.trailingComments=this.trailingComments),n},Kt.prototype.includeToken=function(n){return this.loc&&(this.loc.end&&(this.loc.end.line=n.lexer.yylloc.last_line,this.loc.end.column=n.lexer.yylloc.last_column,this.loc.end.offset=n.lexer.offset),n.ast.withSource&&(this.loc.source=n.lexer._input.substring(this.loc.start.offset,n.lexer.offset))),this},Kt.extends=function(n,o){return o.prototype=Object.create(this.prototype),o.extends=this.extends,o.prototype.constructor=o,o.kind=n,o};var pt=Kt,Nt="expression",$=pt.extends(Nt,function(n,o,a){pt.apply(this,[n||Nt,o,a])}),$t="array",Pt=$.extends($t,function(n,o,a,u){$.apply(this,[$t,a,u]),this.items=o,this.shortForm=n}),ei="arrowfunc",Bi=$.extends(ei,function(n,o,a,u,d,T,y,_){$.apply(this,[ei,y,_]),this.arguments=n,this.byref=o,this.body=a,this.type=u,this.nullable=d,this.isStatic=T||!1}),hi="assign",$e=$.extends(hi,function(n,o,a,u,d){$.apply(this,[hi,u,d]),this.left=n,this.right=o,this.operator=a}),ii="assignref",dn=$.extends(ii,function(n,o,a,u){$.apply(this,[ii,a,u]),this.left=n,this.right=o}),kn="attribute",fs=pt.extends(kn,function(n,o,a,u){pt.apply(this,[kn,a,u]),this.name=n,this.args=o}),gt="attrgroup",Ds=pt.extends(gt,function(n,o,a){pt.apply(this,[gt,o,a]),this.attrs=n||[]}),ds="operation",Ve=$.extends(ds,function(n,o,a){$.apply(this,[n||ds,o,a])}),ps=Ve.extends("bin",function(n,o,a,u,d){Ve.apply(this,["bin",u,d]),this.type=n,this.left=o,this.right=a}),Mi="statement",Et=pt.extends(Mi,function(n,o,a){pt.apply(this,[n||Mi,o,a])}),k="block",P=Et.extends(k,function(n,o,a,u){Et.apply(this,[n||k,a,u]),this.children=o.filter(Boolean)}),R="literal",S=$.extends(R,function(n,o,a,u,d){$.apply(this,[n||R,u,d]),this.value=o,a&&(this.raw=a)}),p="boolean",x=S.extends(p,function(n,o,a,u){S.apply(this,[p,n,o,a,u])}),N="break",F=Et.extends(N,function(n,o,a){Et.apply(this,[N,o,a]),this.level=n}),V="byref",j=$.extends(V,function(n,o,a){$.apply(this,[V,o,a]),this.what=n}),ct="call",Dt=$.extends(ct,function(n,o,a,u){$.apply(this,[ct,a,u]),this.what=n,this.arguments=o}),jt="case",ee=Et.extends(jt,function(n,o,a,u){Et.apply(this,[jt,a,u]),this.test=n,this.body=o}),fe="cast",pe=Ve.extends(fe,function(n,o,a,u,d){Ve.apply(this,[fe,u,d]),this.type=n,this.raw=o,this.expr=a}),me="catch",li=Et.extends(me,function(n,o,a,u,d){Et.apply(this,[me,u,d]),this.body=n,this.what=o,this.variable=a}),ke="declaration",Ei=Et.extends(ke,function(n,o,a,u){Et.apply(this,[n||ke,a,u]),this.name=o});Ei.prototype.parseFlags=function(n){this.isAbstract=n[2]===1,this.isFinal=n[2]===2,this.isReadonly=n[3]===1,this.kind!=="class"&&(n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1)};var Le=Ei,vi="class",jn=Le.extends(vi,function(n,o,a,u,d,T,y){Le.apply(this,[vi,n,T,y]),this.isAnonymous=!n,this.extends=o,this.implements=a,this.body=u,this.attrGroups=[],this.parseFlags(d)}),Ue="constantstatement",Fn=Et.extends(Ue,function(n,o,a,u){Et.apply(this,[n||Ue,a,u]),this.constants=o}),xn="classconstant",Bn=Fn.extends(xn,function(n,o,a,u,d,T){Fn.apply(this,[n||xn,o,d,T]),this.parseFlags(a),this.attrGroups=u});Bn.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private")};var da=Bn,Dr="clone",pa=$.extends(Dr,function(n,o,a){$.apply(this,[Dr,o,a]),this.what=n}),or="closure",te=$.extends(or,function(n,o,a,u,d,T,y,_){$.apply(this,[or,y,_]),this.uses=a,this.arguments=n,this.byref=o,this.type=u,this.nullable=d,this.isStatic=T||!1,this.body=null,this.attrGroups=[]}),qe=pt.extends("comment",function(n,o,a,u){pt.apply(this,[n,a,u]),this.value=o}),zn="commentblock",Rr=qe.extends(zn,function(n,o,a){qe.apply(this,[zn,n,o,a])}),wr="commentline",Rs=qe.extends(wr,function(n,o,a){qe.apply(this,[wr,n,o,a])}),_s="constant",Gt=pt.extends(_s,function(n,o,a,u){pt.apply(this,[_s,a,u]),this.name=n,this.value=o}),Pe="continue",pi=Et.extends(Pe,function(n,o,a){Et.apply(this,[Pe,o,a]),this.level=n}),be="declare",ui=P.extends(be,function(n,o,a,u,d){P.apply(this,[be,o,u,d]),this.directives=n,this.mode=a});ui.MODE_SHORT="short",ui.MODE_BLOCK="block",ui.MODE_NONE="none";var En=ui,gi="declaredirective",Mn=pt.extends(gi,function(n,o,a,u){pt.apply(this,[gi,a,u]),this.key=n,this.value=o}),Oi=Et.extends("do",function(n,o,a,u){Et.apply(this,["do",a,u]),this.test=n,this.body=o}),Ui="echo",Je=Et.extends(Ui,function(n,o,a,u){Et.apply(this,[Ui,a,u]),this.shortForm=o,this.expressions=n}),yi="empty",Fr=$.extends(yi,function(n,o,a){$.apply(this,[yi,o,a]),this.expression=n}),ni="encapsed",vn=S.extends(ni,function(n,o,a,u,d){S.apply(this,[ni,n,o,u,d]),this.type=a});vn.TYPE_STRING="string",vn.TYPE_SHELL="shell",vn.TYPE_HEREDOC="heredoc",vn.TYPE_OFFSET="offset";var ms=vn,rn="encapsedpart",ws=$.extends(rn,function(n,o,a,u,d){$.apply(this,[rn,u,d]),this.expression=n,this.syntax=o,this.curly=a}),Un="entry",Kv=$.extends(Un,function(n,o,a,u,d,T){$.apply(this,[Un,d,T]),this.key=n,this.value=o,this.byRef=a,this.unpack=u}),Hh="enum",$v=Le.extends(Hh,function(n,o,a,u,d,T){Le.apply(this,[Hh,n,d,T]),this.valueType=o,this.implements=a,this.body=u,this.attrGroups=[]}),Vh="enumcase",Jv=pt.extends(Vh,function(n,o,a,u){pt.apply(this,[Vh,a,u]),this.name=n,this.value=o}),Gh="error",Xv=pt.extends(Gh,function(n,o,a,u,d,T){pt.apply(this,[Gh,d,T]),this.message=n,this.token=o,this.line=a,this.expected=u}),Wh="eval",Zv=$.extends(Wh,function(n,o,a){$.apply(this,[Wh,o,a]),this.source=n}),qh="exit",ty=$.extends(qh,function(n,o,a,u){$.apply(this,[qh,a,u]),this.expression=n,this.useDie=o}),Yh="expressionstatement",ey=Et.extends(Yh,function(n,o,a){Et.apply(this,[Yh,o,a]),this.expression=n}),iy=Et.extends("for",function(n,o,a,u,d,T,y){Et.apply(this,["for",T,y]),this.init=n,this.test=o,this.increment=a,this.shortForm=d,this.body=u}),Qh="foreach",ny=Et.extends(Qh,function(n,o,a,u,d,T,y){Et.apply(this,[Qh,T,y]),this.source=n,this.key=o,this.value=a,this.shortForm=d,this.body=u}),jh="function",_a=Le.extends(jh,function(n,o,a,u,d,T,y){Le.apply(this,[jh,n,T,y]),this.arguments=o,this.byref=a,this.type=u,this.nullable=d,this.body=null,this.attrGroups=[]}),zh="global",sy=Et.extends(zh,function(n,o,a){Et.apply(this,[zh,o,a]),this.items=n}),Kh="goto",ry=Et.extends(Kh,function(n,o,a){Et.apply(this,[Kh,o,a]),this.label=n}),$h="halt",oy=Et.extends($h,function(n,o,a){Et.apply(this,[$h,o,a]),this.after=n}),Jh="identifier",ay=pt.extends(Jh,function(n,o,a){pt.apply(this,[Jh,o,a]),this.name=n}),hy=ay,ly=Et.extends("if",function(n,o,a,u,d,T){Et.apply(this,["if",d,T]),this.test=n,this.body=o,this.alternate=a,this.shortForm=u}),Xh="include",uy=$.extends(Xh,function(n,o,a,u,d){$.apply(this,[Xh,u,d]),this.once=n,this.require=o,this.target=a}),Zh="inline",cy=S.extends(Zh,function(n,o,a,u){S.apply(this,[Zh,n,o,a,u])}),tl="interface",fy=Le.extends(tl,function(n,o,a,u,d,T){Le.apply(this,[tl,n,d,T]),this.extends=o,this.body=a,this.attrGroups=u}),el="intersectiontype",dy=Le.extends(el,function(n,o,a){Le.apply(this,[el,null,o,a]),this.types=n}),il="isset",py=$.extends(il,function(n,o,a){$.apply(this,[il,o,a]),this.variables=n}),nl="label",_y=Et.extends(nl,function(n,o,a){Et.apply(this,[nl,o,a]),this.name=n}),sl="list",my=$.extends(sl,function(n,o,a,u){$.apply(this,[sl,a,u]),this.items=n,this.shortForm=o}),rl="lookup",Hn=$.extends(rl,function(n,o,a,u,d){$.apply(this,[n||rl,u,d]),this.what=o,this.offset=a}),ol="magic",gy=S.extends(ol,function(n,o,a,u){S.apply(this,[ol,n,o,a,u])}),al="match",Ty=$.extends(al,function(n,o,a,u){$.apply(this,[al,a,u]),this.cond=n,this.arms=o}),hl="matcharm",ky=$.extends(hl,function(n,o,a,u){$.apply(this,[hl,a,u]),this.conds=n,this.body=o}),ll="method",xy=_a.extends(ll,function(){_a.apply(this,arguments),this.kind=ll}),ul="reference",pn=pt.extends(ul,function(n,o,a){pt.apply(this,[n||ul,o,a])}),cl="name",ar=pn.extends(cl,function(n,o,a,u){pn.apply(this,[cl,a,u]),this.name=n.replace(/\\$/,""),this.resolution=o});ar.UNQUALIFIED_NAME="uqn",ar.QUALIFIED_NAME="qn",ar.FULL_QUALIFIED_NAME="fqn",ar.RELATIVE_NAME="rn";var Ey=ar,fl="namespace",vy=P.extends(fl,function(n,o,a,u,d){P.apply(this,[fl,o,u,d]),this.name=n,this.withBrackets=a||!1}),dl="namedargument",yy=$.extends(dl,function(n,o,a,u){$.apply(this,[dl,a,u]),this.name=n,this.value=o}),Cy=$.extends("new",function(n,o,a,u){$.apply(this,["new",a,u]),this.what=n,this.arguments=o}),pl="noop",by=pt.extends(pl,function(n,o){pt.apply(this,[pl,n,o])}),_l="nowdoc",Ny=S.extends(_l,function(n,o,a,u,d){S.apply(this,[_l,n,o,u,d]),this.label=a}),ml="nullkeyword",Ay=pt.extends(ml,function(n,o,a){pt.apply(this,[ml,o,a]),this.raw=n}),gl="nullsafepropertylookup",Iy=Hn.extends(gl,function(n,o,a,u){Hn.apply(this,[gl,n,o,a,u])}),Tl="number",Sy=S.extends(Tl,function(n,o,a,u){S.apply(this,[Tl,n,o,a,u])}),kl="offsetlookup",Oy=Hn.extends(kl,function(n,o,a,u){Hn.apply(this,[kl,n,o,a,u])}),xl="parameter",Ly=Le.extends(xl,function(n,o,a,u,d,T,y,_,I,A){Le.apply(this,[xl,n,I,A]),this.value=a,this.type=o,this.byref=u,this.variadic=d,this.readonly=T,this.nullable=y,this.flags=_||0,this.attrGroups=[]}),El="parentreference",Py=pn.extends(El,function(n,o,a){pn.apply(this,[El,o,a]),this.raw=n}),vl="post",Dy=Ve.extends(vl,function(n,o,a,u){Ve.apply(this,[vl,a,u]),this.type=n,this.what=o}),Ry=Ve.extends("pre",function(n,o,a,u){Ve.apply(this,["pre",a,u]),this.type=n,this.what=o}),yl="print",wy=$.extends(yl,function(n,o,a){$.apply(this,[yl,o,a]),this.expression=n}),Cl="program",Fy=P.extends(Cl,function(n,o,a,u,d,T){P.apply(this,[Cl,n,d,T]),this.errors=o,a&&(this.comments=a),u&&(this.tokens=u)}),bl="property",By=Et.extends(bl,function(n,o,a,u,d,T,y,_){Et.apply(this,[bl,y,_]),this.name=n,this.value=o,this.readonly=a,this.nullable=u,this.type=d,this.attrGroups=T}),Nl="propertylookup",My=Hn.extends(Nl,function(n,o,a,u){Hn.apply(this,[Nl,n,o,a,u])}),Al="propertystatement",Il=Et.extends(Al,function(n,o,a,u,d){Et.apply(this,[Al,u,d]),this.properties=o,this.parseFlags(a)});Il.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1};var Uy=Il,Sl="retif",Hy=$.extends(Sl,function(n,o,a,u,d){$.apply(this,[Sl,u,d]),this.test=n,this.trueExpr=o,this.falseExpr=a}),Ol="return",Vy=Et.extends(Ol,function(n,o,a){Et.apply(this,[Ol,o,a]),this.expr=n}),Ll="selfreference",Gy=pn.extends(Ll,function(n,o,a){pn.apply(this,[Ll,o,a]),this.raw=n}),Pl="silent",Wy=$.extends(Pl,function(n,o,a){$.apply(this,[Pl,o,a]),this.expr=n}),Dl="static",qy=Et.extends(Dl,function(n,o,a){Et.apply(this,[Dl,o,a]),this.variables=n}),Rl="staticvariable",Yy=pt.extends(Rl,function(n,o,a,u){pt.apply(this,[Rl,a,u]),this.variable=n,this.defaultValue=o}),wl="staticlookup",Qy=Hn.extends(wl,function(n,o,a,u){Hn.apply(this,[wl,n,o,a,u])}),Fl="staticreference",jy=pn.extends(Fl,function(n,o,a){pn.apply(this,[Fl,o,a]),this.raw=n}),Bl="string",zy=S.extends(Bl,function(n,o,a,u,d,T){S.apply(this,[Bl,o,u,d,T]),this.unicode=a,this.isDoubleQuote=n}),Ml="switch",Ky=Et.extends(Ml,function(n,o,a,u,d){Et.apply(this,[Ml,u,d]),this.test=n,this.body=o,this.shortForm=a}),Ul="throw",$y=Et.extends(Ul,function(n,o,a){Et.apply(this,[Ul,o,a]),this.what=n}),Hl="trait",Jy=Le.extends(Hl,function(n,o,a,u){Le.apply(this,[Hl,n,a,u]),this.body=o}),Vl="traitalias",Xy=pt.extends(Vl,function(n,o,a,u,d,T){pt.apply(this,[Vl,d,T]),this.trait=n,this.method=o,this.as=a,this.visibility="",u&&(u[0]===0?this.visibility="public":u[0]===1?this.visibility="protected":u[0]===2&&(this.visibility="private"))}),Gl="traitprecedence",Zy=pt.extends(Gl,function(n,o,a,u,d){pt.apply(this,[Gl,u,d]),this.trait=n,this.method=o,this.instead=a}),Wl="traituse",tC=pt.extends(Wl,function(n,o,a,u){pt.apply(this,[Wl,a,u]),this.traits=n,this.adaptations=o}),eC=Et.extends("try",function(n,o,a,u,d){Et.apply(this,["try",u,d]),this.body=n,this.catches=o,this.always=a}),ql="typereference",Yl=pn.extends(ql,function(n,o,a,u){pn.apply(this,[ql,a,u]),this.name=n,this.raw=o});Yl.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var iC=Yl,Ql="unary",nC=Ve.extends(Ql,function(n,o,a,u){Ve.apply(this,[Ql,a,u]),this.type=n,this.what=o}),jl="uniontype",sC=Le.extends(jl,function(n,o,a){Le.apply(this,[jl,null,o,a]),this.types=n}),zl="unset",rC=Et.extends(zl,function(n,o,a){Et.apply(this,[zl,o,a]),this.variables=n}),Kl="usegroup",oC=Et.extends(Kl,function(n,o,a,u,d){Et.apply(this,[Kl,u,d]),this.name=n,this.type=o,this.items=a}),$l="useitem",ma=Et.extends($l,function(n,o,a,u,d){Et.apply(this,[$l,u,d]),this.name=n,this.alias=o,this.type=a});ma.TYPE_CONST="const",ma.TYPE_FUNCTION="function";var aC=ma,Jl="variable",hC=$.extends(Jl,function(n,o,a,u){$.apply(this,[Jl,a,u]),this.name=n,this.curly=o||!1}),Xl="variadic",lC=$.extends(Xl,function(n,o,a){$.apply(this,[Xl,o,a]),this.what=n}),Zl="variadicplaceholder",uC=pt.extends(Zl,function(n,o){pt.apply(this,[Zl,n,o])}),tu="while",cC=Et.extends(tu,function(n,o,a,u,d){Et.apply(this,[tu,u,d]),this.test=n,this.body=o,this.shortForm=a}),eu="yield",fC=$.extends(eu,function(n,o,a,u){$.apply(this,[eu,a,u]),this.value=n,this.key=o}),iu="yieldfrom",dC=$.extends(iu,function(n,o,a){$.apply(this,[iu,o,a]),this.value=n}),Ci=function(n,o){this.withPositions=n,this.withSource=o};Ci.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,o){n.forEach(function(a){Ci.precedence[a]=o+1})}),Ci.prototype.isRightAssociative=function(n){return n==="**"||n==="??"},Ci.prototype.swapLocations=function(n,o,a,u){this.withPositions&&(n.loc.start=o.loc.start,n.loc.end=a.loc.end,this.withSource&&(n.loc.source=u.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ci.prototype.resolveLocations=function(n,o,a,u){this.withPositions&&(n.loc.start.offset>o.loc.start.offset&&(n.loc.start=o.loc.start),n.loc.end.offset<a.loc.end.offset&&(n.loc.end=a.loc.end),this.withSource&&(n.loc.source=u.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ci.prototype.resolvePrecedence=function(n,o){var a,u,d;return n.kind==="call"?this.resolveLocations(n,n.what,n,o):n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"&&n.offset?this.resolveLocations(n,n.what,n.offset,o):n.kind==="bin"?n.right&&!n.right.parenthesizedExpression&&(n.right.kind==="bin"?(u=Ci.precedence[n.type],d=Ci.precedence[n.right.type],u&&d&&d<=u&&(n.type!==n.right.type||!this.isRightAssociative(n.type))&&(a=n.right,n.right=n.right.left,this.swapLocations(n,n.left,n.right,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a)):n.right.kind==="retif"&&(u=Ci.precedence[n.type],d=Ci.precedence["?"],u&&d&&d<=u&&(a=n.right,n.right=n.right.test,this.swapLocations(n,n.left,n.right,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a))):n.kind!=="silent"&&n.kind!=="cast"||!n.expr||n.expr.parenthesizedExpression?n.kind==="unary"?n.what&&!n.what.parenthesizedExpression&&(n.what.kind==="bin"?(a=n.what,n.what=n.what.left,this.swapLocations(n,n,n.what,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.what.kind==="retif"&&(a=n.what,n.what=n.what.test,this.swapLocations(n,n,n.what,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a)):n.kind==="retif"?n.falseExpr&&n.falseExpr.kind==="retif"&&!n.falseExpr.parenthesizedExpression&&(a=n.falseExpr,n.falseExpr=a.test,this.swapLocations(n,n.test,n.falseExpr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a):n.kind==="assign"?n.right&&n.right.kind==="bin"&&!n.right.parenthesizedExpression&&(u=Ci.precedence["="],d=Ci.precedence[n.right.type],u&&d&&d<u&&(a=n.right,n.right=n.right.left,a.left=n,this.swapLocations(a,a.left,n.right,o),n=a)):n.kind==="expressionstatement"&&this.swapLocations(n,n.expression,n,o):n.expr.kind==="bin"?(a=n.expr,n.expr=n.expr.left,this.swapLocations(n,n,n.expr,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.expr.kind==="retif"&&(a=n.expr,n.expr=n.expr.test,this.swapLocations(n,n,n.expr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a),n},Ci.prototype.prepare=function(n,o,a){var u=null;(this.withPositions||this.withSource)&&(u=a.position());var d=this,T=function y(){var _=null,I=Array.prototype.slice.call(arguments);if(I.push(o),d.withPositions||d.withSource){var A=null;d.withSource&&(A=a.lexer._input.substring(u.offset,a.prev[2])),_=new xt(A,u,new Wt(a.prev[0],a.prev[1],a.prev[2])),I.push(_)}n||(n=I.shift());var v=d[n];if(typeof v!="function")throw new Error('Undefined node "'+n+'"');var Ft=Object.create(v.prototype);return v.apply(Ft,I),y.instance=Ft,y.trailingComments&&(Ft.trailingComments=y.trailingComments),typeof y.postBuild=="function"&&y.postBuild(Ft),a.debug&&delete d.stack[y.stackUid],d.resolvePrecedence(Ft,a)};return a.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:u,stack:new Error().stack.split(`
`).slice(3,5)},T.stackUid=this.stackUid),T.setTrailingComments=function(y){T.instance?T.instance.setTrailingComments(y):T.trailingComments=y},T.destroy=function(y){o&&(y?y.leadingComments?y.leadingComments=o.concat(y.leadingComments):y.leadingComments=o:a._docIndex=a._docs.length-o.length),a.debug&&delete d.stack[T.stackUid]},T},Ci.prototype.checkNodes=function(){var n=[];for(var o in this.stack)Object.prototype.hasOwnProperty.call(this.stack,o)&&(this.stack[o].key=o,n.push(this.stack[o]));return this.stack={},n},[Pt,Bi,$e,dn,fs,Ds,ps,P,x,F,j,Dt,ee,pe,li,jn,da,pa,te,qe,Rr,Rs,Gt,Fn,pi,Le,En,Mn,Oi,Je,Fr,ms,ws,Kv,$v,Jv,Xv,Zv,ty,$,ey,iy,ny,_a,sy,ry,oy,hy,ly,uy,cy,fy,dy,py,_y,my,S,Hn,gy,Ty,ky,xy,Ey,vy,yy,Cy,pt,by,Ny,Ay,Iy,Sy,Oy,Ve,Ly,Py,Dy,Ry,wy,Fy,By,My,Uy,pn,Hy,Vy,Gy,Wy,Et,qy,Yy,Qy,jy,zy,Ky,$y,Jy,Xy,Zy,tC,eC,iC,nC,sC,rC,oC,aC,hC,lC,uC,cC,fC,dC].forEach(function(n){Ci.prototype[n.kind]=n});var nu=Ci;function ga(n,o){for(var a=Object.keys(n),u=a.length;u--;){var d=a[u],T=n[d];T===null?delete o[d]:typeof T=="function"?o[d]=T.bind(o):Array.isArray(T)?o[d]=Array.isArray(o[d])?o[d].concat(T):T:c(T)==="object"?o[d]=c(o[d])==="object"?ga(T,o[d]):T:o[d]=T}return o}var Hi=function(n){if(typeof this=="function")return new this(n);if(this.tokens=ht,this.lexer=new Mt(this),this.ast=new nu,this.parser=new ot(this.lexer,this.ast),n&&c(n)==="object"){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if(typeof n.parser.version=="string"){var o=n.parser.version.split(".");if(o=100*parseInt(o[0])+parseInt(o[1]),isNaN(o))throw new Error("Bad version number : "+n.parser.version);n.parser.version=o}else if(typeof n.parser.version!="number")throw new Error("Expecting a number for version");if(n.parser.version<500||n.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}ga(n,this),this.lexer.version=this.parser.version}},Ta=function(n){return typeof n.write=="function"?n.toString():n};Hi.create=function(n){return new Hi(n)},Hi.parseEval=function(n,o){return new Hi(o).parseEval(n)},Hi.prototype.parseEval=function(n){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,n=Ta(n),this.parser.parse(n,"eval")},Hi.parseCode=function(n,o,a){return c(o)!=="object"||a||(a=o,o="unknown"),new Hi(a).parseCode(n,o)},Hi.prototype.parseCode=function(n,o){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=Ta(n),this.parser.parse(n,o)},Hi.tokenGetAll=function(n,o){return new Hi(o).tokenGetAll(n)},Hi.prototype.tokenGetAll=function(n){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,n=Ta(n);var o=this.lexer.EOF,a=this.tokens.values;this.lexer.setInput(n);for(var u=this.lexer.lex()||o,d=[];u!=o;){var T=this.lexer.yytext;Object.prototype.hasOwnProperty.call(a,u)&&(T=[a[u],T,this.lexer.yylloc.first_line]),d.push(T),u=this.lexer.lex()||o}return d};var Kn=Hi,pC=ht,_C=Mt,mC=nu,gC=ot,TC=ga,kC=Hi,xC=Hi;Kn.tokens=pC,Kn.lexer=_C,Kn.AST=mC,Kn.parser=gC,Kn.combine=TC,Kn.Engine=kC,Kn.default=xC;var su=function(n,o,a){var u=a&&a.parentParser==="markdown";if(!n&&u)return"";n=n.replace(/\?>\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var d,T=new Kn({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),y=n.indexOf("<?php")!==-1,_=u&&!y;try{d=_?T.parseEval(n):T.parseCode(n)}catch(I){throw I instanceof SyntaxError&&"lineNumber"in I&&(I.loc={start:{line:I.lineNumber,column:I.columnNumber}},delete I.lineNumber,delete I.columnNumber),I}return d.extra={parseAsEval:_},d.comments.forEach(function(I){I.value[I.value.length-1]===`
`&&(I.value=I.value.slice(0,-1),I.loc.end.offset=I.loc.end.offset-1)}),d},Fs=s.default.util,EC=Fs.hasNewline,vC=Fs.skipEverythingButNewLine,yC=Fs.skipNewline,CC=Fs.isNextLineEmpty,bC=Fs.isPreviousLineEmpty,NC=Fs.getNextNonSpaceNonCommentCharacterIndex,AC=s.default.version;function ka(n,o){return parseInt(AC[0])>1?n[o]:n}var ru={};function xa(n){return ru[n]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(n,o){n.forEach(function(a){ru[a]=o})});var ou=["==","!=","===","!==","<>","<=>"],Br=["*","/","%"],Ea=[">>","<<"];function au(n){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(n.kind)}function hu(n){var o=n.body;return o?(o.kind==="block"&&(o=o.children),o[0]):null}function $n(n){var o=n.children||n.body||n.adaptations;return Array.isArray(o)?o:null}function lu(n){var o=n.getParentNode();return o?$n(o):null}function Mr(n){return n.length>0?n[n.length-1]:null}function va(n){var o=n.getValue();if(o.kind==="program"){var a=$n(o);return!(!a||a.length===0)&&a[0].kind==="inline"}if(o.kind==="switch"){if(!o.body)return!1;var u=$n(o.body);if(u.length===0)return!1;var d=m(u,1)[0];if(!d.body)return!1;var T=$n(d.body);return T.length!==0&&T[0].kind==="inline"}var y=hu(o);return!!y&&y.kind==="inline"}var uu=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(n,o){return n[o.toLowerCase()]=o,n},{}),ae={printNumber:function(n){return n.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:xa,isBitwiseOperator:function(n){return!!Ea[n]||n==="|"||n==="^"||n==="&"},shouldFlatten:function(n,o){return xa(o)===xa(n)&&n!=="**"&&(!ou.includes(n)||!ou.includes(o))&&!(o==="%"&&Br.includes(n)||n==="%"&&Br.includes(o))&&(o===n||!Br.includes(o)||!Br.includes(n))&&(!Ea.includes(n)||!Ea.includes(o))},nodeHasStatement:au,getNodeListProperty:$n,getParentNodeListProperty:lu,getLast:Mr,getPenultimate:function(n){return n.length>1?n[n.length-2]:null},isLastStatement:function(n){var o=lu(n);if(!o)return!0;var a=n.getValue();return o[o.length-1]===a},getBodyFirstChild:hu,lineShouldEndWithSemicolon:function(n){var o=n.getValue(),a=n.getParentNode();if(!a)return!1;if(["for","foreach","while","do","if","switch"].includes(a.kind)&&o.kind!=="block"&&o.kind!=="if"&&(a.body===o||a.alternate===o))return!0;if(!au(a)||o.kind==="echo"&&o.shortForm)return!1;if(o.kind==="traituse")return!o.adaptations;if(o.kind==="method"&&o.isAbstract)return!0;if(o.kind==="method"){var u=n.getParentNode();if(u&&u.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(o.kind)},fileShouldEndWithHardline:function(n){var o=n.getValue(),a=o.kind==="program",u=o.children&&Mr(o.children);if(!a||u&&["halt","inline"].includes(u.kind))return!1;if(u&&(u.kind==="declare"||u.kind==="namespace")){var d=u.children.length>0&&Mr(u.children);if(d&&["halt","inline"].includes(d.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(n){var o=n.replace(/^\\/,"");return o.indexOf("\\")!==-1?o:n},hasDanglingComments:function(n){return n.comments&&n.comments.some(function(o){return!o.leading&&!o.trailing})},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},docShouldHaveTrailingNewline:function n(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,u=o.getNode(a),d=o.getNode(a+1),T=o.getNode(a+2);if(!d)return!1;if(T&&["call","new","echo"].includes(T.kind)&&!["call","array"].includes(d.kind)||d.kind==="parameter"){var y=T.arguments.length-1,_=T.arguments.indexOf(d);return _!==y}if(T&&T.kind==="for"){var I=T.init.indexOf(d);if(I!==-1)return I!==T.init.length-1;var A=T.test.indexOf(d);if(A!==-1)return A!==T.test.length-1;var v=T.increment.indexOf(d);if(v!==-1)return v!==T.increment.length-1}if(d.kind==="bin")return d.left===u||n(o,a+1);if(d.kind==="case"&&d.test===u)return!0;if(d.kind==="staticvariable"){var Ft=T.variables.length-1,wt=T.variables.indexOf(d);return wt!==Ft}if(d.kind==="entry"){if(d.key===u)return!0;var le=T.items.length-1,_e=T.items.indexOf(d);return _e!==le}if(["call","new"].includes(d.kind)){var Bt=d.arguments.length-1,Ee=d.arguments.indexOf(u);return Ee!==Bt}if(d.kind==="echo"){var Jt=d.expressions.length-1,Ne=d.expressions.indexOf(u);return Ne!==Jt}if(d.kind==="array"){var Ae=d.items.length-1,ge=d.items.indexOf(u);return ge!==Ae}return d.kind==="retif"&&n(o,a+1)},isLookupNode:function(n){return n.kind==="propertylookup"||n.kind==="nullsafepropertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"},isFirstChildrenInlineNode:va,shouldPrintHardLineAfterStartInControlStructure:function(n){var o=n.getValue();return!["try","catch"].includes(o.kind)&&va(n)},shouldPrintHardLineBeforeEndInControlStructure:function(n){var o=n.getValue();if(["try","catch"].includes(o.kind))return!0;if(o.kind==="switch"){var a=$n(o.body);if(a.length===0)return!0;var u=Mr(a);if(!u.body)return!0;var d=$n(u.body);return d.length===0||d[0].kind!=="inline"}return!va(n)},getAlignment:function(n){var o=n.split(`
`).pop();return o.length-o.trimLeft().length+1},isProgramLikeNode:function(n){return["program","declare","namespace"].includes(n.kind)},isReferenceLikeNode:function(n){return["name","parentreference","selfreference","staticreference"].includes(n.kind)},getNodeKindIncludingLogical:function(n){return n.kind==="bin"&&["||","&&"].includes(n.type)?"logical":n.kind},useDoubleQuote:function(n,o){if(n.isDoubleQuote===o.singleQuote){var a=n.raw.slice(n.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return n.isDoubleQuote?a:!a}return n.isDoubleQuote},hasEmptyBody:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",a=n.getValue();return a[o]&&a[o].children&&a[o].children.length===0&&(!a[o].comments||a[o].comments.length===0)},isNextLineEmptyAfterNamespace:function(n,o,a){var u=a(o);return u=vC(n,u),u=yC(n,u),EC(n,u)},shouldPrintHardlineBeforeTrailingComma:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"||n.kind==="entry"&&(n.value.kind==="nowdoc"||n.value.kind==="encapsed"&&n.value.type==="heredoc")},isDocNode:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"},getAncestorNode:function(n,o){var a=function(u,d){for(var T,y=[].concat(d),_=-1;T=u.getParentNode(++_);)if(y.indexOf(T.kind)!==-1)return _;return-1}(n,o);return a===-1?null:n.getParentNode(a)},getNextNode:function(n,o){var a=n.getParentNode(),u=$n(a);if(!u)return null;var d=u.indexOf(o);return d===-1?null:a.children[d+1]},normalizeMagicMethodName:function(n){var o=n.toLowerCase();return uu[o]?uu[o]:n},isPreviousLineEmpty:function(n,o,a){return bC(n,o,ka(a,"locStart"))},isNextLineEmpty:function(n,o,a){return CC(n,o,ka(a,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(n,o,a){return NC(n,o,ka(a,"locEnd"))}},Bs=s.default.util,_n=Bs.addLeadingComment,Vi=Bs.addDanglingComment,mn=Bs.addTrailingComment,IC=Bs.skipNewline,Ur=Bs.hasNewline,SC=Bs.hasNewlineInRange,Ms=s.default.doc.builders,cu=Ms.join,OC=Ms.indent,yn=Ms.hardline,fu=Ms.cursor,du=Ms.lineSuffix,LC=Ms.breakParent,hr=ae.getNextNonSpaceNonCommentCharacterIndex,PC=ae.isNextLineEmpty,DC=ae.isPreviousLineEmpty,RC=ae.isLookupNode;function Hr(n,o){var a=n.children;a.length===0?Vi(n,o):_n(a[0],o)}function ya(n,o){n.kind==="block"?Hr(n,o):_n(n,o)}function pu(n,o,a,u,d,T){var y=hr(n,d,T),_=n.charAt(y);return o&&o.kind==="identifier"&&a&&(a.kind==="function"||a.kind==="method")&&_===")"?(mn(a,d),!0):!(!a||a.kind!=="function"&&a.kind!=="method"||!u||u.kind!=="block")&&(Hr(u,d),!0)}function Ca(n,o,a,u,d,T){if(!a||a.kind!=="if"||!u)return!1;var y=hr(n,d,T);return n.charAt(y)===")"?(mn(o,d),!0):o===a.body&&u===a.alternate?(Vi(a,d),!0):u.kind==="if"?(ya(u.body,d),!0):a.body===u&&(_n(u,d),!0)}function ba(n,o,a){if(n&&["class","interface","trait"].includes(n.kind)){if(o&&n.extends){if(Array.isArray(n.extends)){if(n.extends.some(function(u){if(o&&o===u)return Vi(o,a),!0}))return!0}else if(o===n.extends)return Vi(o,a),!0}if(o&&n.implements&&n.implements.some(function(u){if(o&&o===u)return Vi(o,a),!0}))return!0;if(!(n.body&&n.body.length>0))return Vi(n,a),!0}return!!(o&&o.kind==="class"&&o.isAnonymous&&o.leadingComments&&a.kind==="commentblock")}function Na(n,o,a,u,d){if(o&&(o.kind==="function"||o.kind==="method")){for(var T=0,y=0;y<o.arguments.length;y++)T=d.locEnd(o.arguments[y])>T?d.locEnd(o.arguments[y]):T;var _=o.body&&d.locStart(u)>T&&d.locEnd(u)<d.locStart(o.body),I=hr(n,u,d);if(o.type&&_&&n.charAt(I)!==")")return d.locEnd(u)<d.locStart(o.type)?(Vi(o.type,u),!0):(mn(o.type,u),!0)}return!1}function Aa(n,o,a,u,d){return!(!a||!["function","method","parameter"].includes(a.kind))&&o.kind==="typereference"&&u.kind==="identifier"&&(mn(o,d),!0)}function _u(n,o){return!(!n||!["label","goto"].includes(n.kind))&&(mn(n,o),!0)}function Ia(n,o,a,u){return a&&a.kind==="inline"?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.includes(u)||a.leadingComments.push(u),!0):!(n||a||!o||o.kind!=="inline")&&(Vi(o,u),!0)}function mu(n,o,a){return!(!n||n.kind!=="try"||!o)&&(o.kind==="block"?(Hr(o,a),!0):o.kind==="try"?(ya(o.always,a),!0):o.kind==="catch"&&(ya(o.body,a),!0))}function gu(n,o,a,u){return a||o||!n||n.kind!=="namespace"||n.withBrackets?!(o||!n||n.kind!=="namespace"||n.withBrackets)&&(Vi(n,u),!0):(mn(n,u),!0)}function Tu(n,o,a,u){return!(!n||n.kind!=="declare")&&(!o||o.kind!=="noop")&&(a&&n.directives[0]!==a?!(!a||!o)&&(_n(a,u),!0):(n.mode==="none"?mn(n,u):Vi(n,u),!0))}function Sa(n,o,a,u,d,T){if(!a||a.kind!=="while"||!u)return!1;var y=hr(n,d,T);return n.charAt(y)===")"?(mn(o,d),!0):u.kind==="block"&&(Hr(u,d),!0)}function Oa(n,o){return n.getValue().printed=!0,o.printer.printComment(n,o)}function ku(n,o,a){return n.getNode()===o.cursorNode&&n.getValue()?[fu,a,fu]:a}var ie={handleOwnLineComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return pu(o,u,d,T,n,a)||function(y,_,I){return y&&RC(y)&&_&&["identifier","variable","encapsed"].includes(_.kind)?(_n(y,I),!0):!1}(d,T,n)||Ca(o,u,d,T,n,a)||Sa(o,u,d,T,n,a)||mu(d,T,n)||ba(d,T,n)||Aa(o,u,d,T,n)||Na(o,d,T,n,a)||function(y,_,I,A){return!I&&y&&(y.kind==="for"||y.kind==="foreach")?(y.body&&y.body.kind!=="block"?_n(I,A):_n(y,A),!0):!1}(d,0,T,n)||Ia(d,u,T,n)||Tu(d,u,T,n)},handleEndOfLineComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return function(y,_,I,A,v){return!_&&!A&&I&&I.kind==="array"?(mn(I,v),!0):!1}(0,u,d,T,n)||function(y,_,I,A,v){return I&&I.kind==="return"&&!I.expr?(mn(I,v),!0):!1}(0,0,d,0,n)||pu(o,u,d,T,n,a)||function(y,_,I,A,v,Ft){var wt=_&&!SC(v,Ft.locEnd(_),Ft.locStart(A));return(!_||!wt)&&y&&y.kind==="retif"&&I?(_n(I,A),!0):!1}(d,u,T,n,o,a)||Ca(o,u,d,T,n,a)||Sa(o,u,d,T,n,a)||mu(d,T,n)||ba(d,T,n)||Aa(o,u,d,T,n)||Na(o,d,T,n,a)||function(y,_){return y&&y.kind==="entry"?(_n(y,_),!0):!1}(d,n)||function(y,_,I){return _&&_.kind==="call"&&y&&_.what===y&&_.arguments.length>0?(_n(_.arguments[0],I),!0):!1}(u,d,n)||function(y,_,I){if(y&&y.kind==="assign"&&_){var A=y.loc.start.offset+y.loc.source.indexOf("=");if(I.loc.start.offset>A)return _n(_,I),!0}return!1}(d,T,n)||Ia(d,u,T,n)||gu(d,u,T,n)||Tu(d,u,T,n)||_u(d,n)},handleRemainingComment:function(n,o,a){var u=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return Ca(o,u,d,T,n,a)||Sa(o,u,d,T,n,a)||function(y,_,I,A){var v=hr(y,I,A);return y.charAt(v)!==")"?!1:_&&(_.kind==="function"||_.kind==="closure"||_.kind==="method"||_.kind==="call"||_.kind==="new")&&_.arguments.length===0?(Vi(_,I),!0):!1}(o,d,n,a)||ba(d,T,n)||function(y,_,I){return y&&y.kind==="traituse"&&y.adaptations&&!y.adaptations.length?(Vi(y,I),!0):!1}(d,0,n)||Aa(o,u,d,T,n)||Na(o,d,T,n,a)||_u(d,n)||function(y,_,I,A){return _&&_.kind==="halt"?(Vi(_,A),!0):y&&y.kind==="halt"?(Vi(y,A),!0):!1}(u,d,0,n)||function(y,_){return y&&(y.kind==="continue"||y.kind==="break")&&!y.label?(mn(y,_),!0):!1}(d,n)||Ia(d,u,T,n)||gu(d,u,T,n)},getCommentChildNodes:function(n){return c(n)!=="object"?[]:function(o){return Object.keys(o).filter(function(a){return a!=="kind"&&a!=="loc"&&a!=="errors"&&a!=="extra"&&a!=="comments"&&a!=="leadingComments"&&a!=="enclosingNode"&&a!=="precedingNode"&&a!=="followingNode"}).map(function(a){return o[a]})}(n)},canAttachComment:function(n){return n.kind&&n.kind!=="commentblock"&&n.kind!=="commentline"},isBlockComment:function(n){return n.kind==="commentblock"},printDanglingComments:function(n,o,a,u){var d=[],T=n.getValue();return T&&T.comments?(n.each(function(y){var _=y.getValue();!_||_.leading||_.trailing||u&&!u(_)||d.push(Oa(y,o))},"comments"),d.length===0?"":a?cu(yn,d):OC([yn,cu(yn,d)])):""},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},hasLeadingOwnLineComment:function(n,o,a){return o.comments&&o.comments.some(function(u){return u.leading&&Ur(n,a.locEnd(u))})},printComments:function(n,o){var a=[];return n.forEach(function(u,d,T){u.printed=!0;var y=T.length===d+1;a.push(u.value),y||a.push(yn),PC(o.originalText,u,o)&&!y&&a.push(yn)}),a},printAllComments:function(n,o,a,u){var d=n.getValue(),T=o(n),y=d&&d.comments;if(!y||y.length===0)return ku(n,a,T);var _=[],I=[u?";":"",T];return n.each(function(A){var v=A.getValue(),Ft=v.leading,wt=v.trailing;if(Ft){var le=function(Bt,Ee,Jt){var Ne=Bt.getValue(),Ae=Oa(Bt,Jt);return Ae?Jt.printer.isBlockComment&&Jt.printer.isBlockComment(Ne)?[Ae,Ur(Jt.originalText,Jt.locEnd(Ne))?yn:" "]:[Ae,yn]:""}(A,0,a);if(!le)return;_.push(le);var _e=a.originalText;Ur(_e,IC(_e,a.locEnd(v)))&&_.push(yn)}else wt&&I.push(function(Bt,Ee,Jt){var Ne=Bt.getValue(),Ae=Oa(Bt,Jt);if(!Ae)return"";var ge=Jt.printer.isBlockComment&&Jt.printer.isBlockComment(Ne);if(Ur(Jt.originalText,Jt.locStart(Ne),{backwards:!0})){var Xt=DC(Jt.originalText,Ne,Jt);return du([yn,Xt?yn:"",Ae])}return ge?[" ",Ae]:[du([" ",Ae]),ge?"":LC]}(A,0,a))},"comments"),ku(n,a,_.concat(I))}};function xu(){}xu.strictEqual=function(){};var wC=xu,Eu=ae.getPrecedence,FC=ae.shouldFlatten,BC=ae.isBitwiseOperator,vu=function(n){var o=n.getParentNode();if(!o)return!1;var a=n.getName(),u=n.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(o.kind))return!1;switch(u.kind){case"pre":case"post":if(o.kind==="unary")return u.kind==="pre"&&(u.type==="+"&&o.type==="+"||u.type==="-"&&o.type==="-");case"unary":switch(o.kind){case"unary":return u.type===o.type&&(u.type==="+"||u.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;case"bin":return o.type==="**"&&a==="left";default:return!1}case"bin":switch(o.kind){case"assign":case"retif":return["and","xor","or"].includes(u.type);case"silent":case"cast":return u.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return a==="what"&&o.what===u;case"bin":var d=o.type,T=Eu(d),y=u.type,_=Eu(y);return T>_||d==="||"&&y==="&&"||(T===_&&a==="right"?(wC.strictEqual(o.right,u),!0):T===_&&!FC(d,y)||(T<_&&y==="%"?d==="+"||d==="-":!!BC(d)));default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return o.kind==="call"&&a==="what"&&o.what===u&&u.parenthesizedExpression;case"clone":case"new":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;default:return!1}case"yield":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;case"retif":return o.test===u;default:return!(!u.key&&!u.value)}case"assign":return(o.kind!=="for"||!o.init.includes(u)&&!o.increment.includes(u))&&o.kind!=="assign"&&o.kind!=="static"&&!["if","do","while","foreach","switch"].includes(o.kind)&&o.kind!=="silent"&&o.kind!=="call";case"retif":switch(o.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(a==="test"&&!o.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===u;default:return!1}case"closure":switch(o.kind){case"call":return a==="what"&&o.what===u;case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return u.parenthesizedExpression;case"string":case"array":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(u.kind)||o.kind!=="offsetlookup")&&a==="what"&&o.what===u;default:return!1}case"print":case"include":return o.kind==="bin"}return!1},Gi=s.default.doc.builders,yu=Gi.breakParent,ci=Gi.join,xe=Gi.line,MC=Gi.lineSuffix,Ct=Gi.group,Us=Gi.conditionalGroup,Rt=Gi.indent,UC=Gi.dedent,Jn=Gi.ifBreak,kt=Gi.hardline,ne=Gi.softline,Hs=Gi.literalline,HC=Gi.align,VC=Gi.dedentToRoot,Xn=s.default.doc.utils.willBreak,La=s.default.util,GC=La.isNextLineEmptyAfterIndex,WC=La.hasNewline,Cu=La.hasNewlineInRange,Zn=ae.getLast,qC=ae.getPenultimate,bu=ae.isLastStatement,YC=ae.lineShouldEndWithSemicolon,QC=ae.printNumber,Nu=ae.shouldFlatten,Au=ae.maybeStripLeadingSlashFromUse,jC=ae.fileShouldEndWithHardline,Ki=ae.hasDanglingComments,Iu=ae.hasLeadingComment,Su=ae.hasTrailingComment,Ou=ae.docShouldHaveTrailingNewline,Wi=ae.isLookupNode,Pa=ae.isFirstChildrenInlineNode,zC=ae.shouldPrintHardLineAfterStartInControlStructure,KC=ae.shouldPrintHardLineBeforeEndInControlStructure,$C=ae.getAlignment,Da=ae.isProgramLikeNode,Vs=ae.getNodeKindIncludingLogical,JC=ae.useDoubleQuote,Lu=ae.hasEmptyBody,XC=ae.isNextLineEmptyAfterNamespace,Pu=ae.shouldPrintHardlineBeforeTrailingComma,Ra=ae.isDocNode,wa=ae.getAncestorNode,Fa=ae.isReferenceLikeNode,ZC=ae.getNextNode,tb=ae.normalizeMagicMethodName,eb=ae.getNextNonSpaceNonCommentCharacterIndex,gs=ae.isNextLineEmpty;function Gs(n,o){return parseFloat(n)>=parseFloat(o)}function lr(n,o){return!!n.trailingCommaPHP&&Gs(n.phpVersion,o)}function Ba(n){return n.braceStyle!=="1tbs"}function Ma(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return[u?"?":"","->",n.call(a,"offset")]}function Du(n,o,a){return Ma(n,o,a,!0)}function Ru(n,o,a){var u=n.getValue(),d=!["variable","identifier"].includes(u.offset.kind);return["::",d?"{":"",n.call(a,"offset"),d?"}":""]}function wu(n,o,a){var u=n.getValue(),d=u.offset&&u.offset.kind==="number"||wa(n,"encapsed");return["[",u.offset?Ct([Rt([d?"":ne,n.call(a,"offset")]),d?"":ne]):"","]"]}function Fu(n){return n.kind==="array"&&(n.items.length>0||n.comments)||n.kind==="function"||n.kind==="method"||n.kind==="closure"}function ib(n){var o=Zn(n),a=qC(n);return!Iu(o)&&!Su(o)&&Fu(o)&&(!a||a.kind!==o.kind)}function nb(n){if(n.length!==2)return!1;var o=m(n,2),a=o[0],u=o[1];return!(a.comments&&a.comments.length||a.kind!=="function"&&a.kind!=="method"&&a.kind!=="closure"||u.kind==="retif"||Fu(u))}function Cn(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",d=n.getValue()[u];if(d.length===0)return["(",ie.printDanglingComments(n,o,!0),")"];var T=!1,y=!1,_=d.length-1,I=n.map(function(ge,Xt){var ve=ge.getNode(),Be=[a(ge)];return Xt===_||(gs(o.originalText,ve,o)?(Xt===0&&(y=!0),T=!0,Be.push(",",kt,kt)):Be.push(",",xe)),Be},u),A=n.getValue(),v=Zn(d),Ft=lr(o,"7.3")&&["call","new","unset","isset"].includes(A.kind)||lr(o,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(A.kind)?Rt([v&&Pu(v)?kt:"",","]):"";function wt(){return Ct(["(",Rt([xe].concat(g(I))),Ft,xe,")"],{shouldBreak:!0})}var le=nb(d),_e=ib(d);if(le||_e){var Bt,Ee=(le?I.slice(1).some(Xn):I.slice(0,-1).some(Xn))||T,Jt=0;n.each(function(ge){le&&Jt===0&&(Bt=[ge.call(function(Xt){return a(Xt,{expandFirstArg:!0})}),I.length>1?",":"",y?kt:xe,y?kt:"",I.slice(1)]),_e&&Jt===d.length-1&&(Bt=[].concat(g(I.slice(0,-1)),[ge.call(function(Xt){return a(Xt,{expandLastArg:!0})})])),Jt++},u);var Ne=I.some(Xn),Ae=["("].concat(g(Bt),[")"]);return[Ne?yu:"",Us([Ne?Jn(wt(),Ae):Ae,le?["(",Ct(Bt[0],{shouldBreak:!0})].concat(g(Bt.slice(1)),[")"]):["("].concat(g(I.slice(0,-1)),[Ct(Zn(Bt),{shouldBreak:!0}),")"]),Ct(["(",Rt([xe].concat(g(I))),Jn(Ft),xe,")"],{shouldBreak:!0})],{shouldBreak:Ee})]}return Ct(["(",Rt([ne].concat(g(I))),Jn(Ft),ne,")"],{shouldBreak:I.some(Xn)||T})}function Bu(n){return n.kind==="array"&&n.items.length!==0}function ur(n){return n.right.kind==="array"&&n.right.items.length!==0}function Mu(n,o,a,u,d){var T=[],y=n.getValue();if(y.kind==="bin"){Nu(y.type,y.left.type)?T=T.concat(n.call(function(Ft){return Mu(Ft,o,a,!0,d)},"left")):T.push(n.call(o,"left"));var _=ur(y)?[y.type," ",n.call(o,"right")]:[y.type,xe,n.call(o,"right")],I=n.getParentNode(),A=!(d&&["||","&&"].includes(y.type))&&Vs(I)!==Vs(y)&&Vs(y.left)!==Vs(y)&&Vs(y.right)!==Vs(y),v=Ra(y.left)||y.left.kind==="bin"&&Ra(y.left.right);T.push(v?"":" ",A?Ct(_):_),u&&y.comments&&(T=ie.printAllComments(n,function(){return T},a))}else T.push(n.call(o));return T}function Uu(n,o,a){var u=n.getValue();switch(u.kind){case"propertylookup":return Ma(n,o,a);case"nullsafepropertylookup":return Du(n,o,a);case"staticlookup":return Ru(n,0,a);case"offsetlookup":return wu(n,0,a);default:return"Have not implemented lookup kind ".concat(u.kind," yet.")}}function Hu(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.opening,u=a===void 0||a;if(n.type==="heredoc")return u?"<<<".concat(n.label):n.label;var d={string:'"',shell:"`"};return d[n.type]?d[n.type]:"Unimplemented encapsed type ".concat(n.type)}function sb(n,o,a){var u=[],d=[];return n.each(function(T){u.push(d),u.push(Ct(a(T))),d=[",",xe],T.getValue()&&gs(o.originalText,T.getValue(),o)&&d.push(ne)},"items"),u}function rb(n,o){if(o.length===0)return n;var a=0;return o.reduce(function(u,d){var T=d.start,y=d.end,_=d.alignment,I=d.before,A=d.after,v=[I||""].concat(g(n.slice(T,y)),[A||""]),Ft=u.concat(n.slice(a,T),_?VC(Ct(HC(new Array(_).join(" "),v))):Ct(v),y===n.length-1?n.slice(y):"");return a=y,Ft},[])}function cr(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",d=n.getValue(),T=n.getParentNode(),y=-1,_=[],I=[];n.map(function(ge,Xt){var ve=ge.getValue(),Be=ve.kind==="inline",an=a(ge),_i=d[u],st=_i[Xt+1],nt=!bu(ge)&&!Be&&(st&&st.kind==="case"?!Pa(n):st&&st.kind!=="inline"),Vt=[an,nt?kt:"",nt&&gs(o.originalText,ve,o)?kt:""],qt=Xt===0,Lt=_i.length-1===Xt,Ce=d.kind==="block"&&T&&["function","closure","method","try","catch"].includes(T.kind),De=Ce&&qt?"":" ";if(Be||!Be&&Lt&&y>=0){var Ye=y;if(Be&&(y=Xt),Be&&!qt||!Be&&Lt){var mi=(Be?Ye:y)+1,re=Lt&&!Be?Xt+1:Xt,Ge=_i[Be?Ye:y],Li=Ge?$C(Ge.raw):"",es=re-mi>1,is=es?Ce&&!Ge||Da(d)&&mi===0?"":kt:"",hn=es&&ve.kind!=="halt"?Ce&&Lt?"":kt:"";es&&(De=""),I.push({start:mi,end:re,alignment:Li,before:is,after:hn})}}if(Be){var $i=st&&st.kind==="echo"&&st.shortForm?"<?=":"<?php",jr=ve.leadingComments&&ve.leadingComments.length?[qt&&d.kind!=="namespace"&&!Ce?"<?php":"",d.kind!=="namespace"&&Ce?"":kt,ie.printComments(ve.leadingComments,o),kt,"?>"]:Da(d)&&qt&&d.kind!=="namespace"?"":[De,"?>"],Gn=n.getNode(Xt+1),qs=Gn&&Gn.children&&Gn.children.length;Vt=[jr,Vt,ve.comments&&ve.comments.length?[$i,kt,qs?ie.printComments(ve.comments,o):"",kt]:Da(d)&&Lt?"":[$i," "]]}_.push(Vt)},u);var A=rb(_,I);if(d.kind==="program"&&!d.extra.parseAsEval){var v=[],Ft=m(d.children,1),wt=Ft[0],le=!wt||wt.kind!=="inline";if(le){var _e=o.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),Bt=[_e&&_e[2]&&_e[2].includes(`
`)?[kt,_e[2].split(`
`).length>2?kt:""]:" ",d.comments?ie.printComments(d.comments,o):""],Ee=wt&&wt.kind==="echo"&&wt.shortForm;v.push([Ee?"<?=":"<?php",Bt])}v.push(A);var Jt=/\?>\n?$/.test(o.originalText);if(Jt){var Ne=Zn(d.children),Ae=Ne?[Cu(o.originalText.trimEnd(),o.locEnd(Ne),o.locEnd(d))?Ne.kind==="inline"&&Ne.comments&&Ne.comments.length?"":kt:" ",gs(o.originalText,Ne,o)?kt:""]:d.comments?kt:"";v.push(MC([Ae,"?>"]))}return v}return A}function Vu(n,o,a,u){return n.map(function(d){var T=[];return T.push(a(d)),bu(d)||(T.push(kt),gs(o.originalText,d.getValue(),o)&&T.push(kt)),T},u)}function on(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",y=n.getValue(),_=Ki(y[u])?[kt,n.call(function(A){return ie.printDanglingComments(A,o,!0)},u),kt]:d,I=Array.isArray(y[u])?Ct(ci(",",n.map(function(A){var v=a(A);return Ki(A.getValue())?[kt,ie.printDanglingComments(A,o,!0),kt,v]:[T,v]},u))):[T,n.call(a,u)];return Rt([_,u,Xn(_)?Rt(I):I])}function ts(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=u.inline,T=d!==void 0&&d,y=[];return n.getValue().attrGroups?(n.each(function(_){var I=["#["];!T&&y.length>0&&y.push(kt),I.push(ne),_.each(function(A){var v=A.getValue();I.length>2&&I.push(",",xe);var Ft=[v.name];v.args.length>0&&Ft.push(Cn(A,o,a,"args")),I.push(Ct(Ft))},"attrs"),y.push(Ct([Rt(I),Jn(lr(o,"8.0")?",":""),ne,"]",T?Jn(ne," "):""]))},"attrGroups"),y.length===0?[]:[].concat(y,[T?"":kt])):[]}function Vn(n,o,a){var u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",d=n.getValue();if(!d[u])return";";var T=n.call(a,u);return[d.shortForm?":":" {",Rt(d[u].kind!=="block"||d[u].children&&d[u].children.length>0||d[u].comments&&d[u].comments.length>0?[zC(n)?d.kind==="switch"?" ":"":kt,T]:""),d.kind==="if"&&u==="body"?"":[KC(n)?kt:"",d.shortForm?["end",d.kind,";"]:"}"]]}function Vr(n,o,a,u,d,T,y){if(!u)return o;var _=Gr(n,u,d,T,y);return Ct([o,a,_])}function Gu(n){return!!Wi(n)&&(!(n.what.kind!=="variable"&&!Fa(n.what))||Gu(n.what))}function Gr(n,o,a,u,d){var T=u?"&":"";if(ie.hasLeadingOwnLineComment(d.originalText,o,d))return Rt([kt,T,a]);var y=o.kind==="cast"?o.expr:o;return y.kind==="bin"&&!ur(y)||y.kind==="retif"&&(!y.trueExpr&&!Bu(y.falseExpr)||y.test.kind==="bin"&&!ur(y.test))||(n.kind==="variable"||n.kind==="string"||Wi(n))&&(y.kind==="string"&&!Wu(y)||Gu(y))?Ct(Rt([xe,T,a])):[" ",T,a]}function Wu(n){return n.raw.includes(`
`)}function Wr(n,o,a){return(n.kind==="string"||n.kind==="encapsed"&&(n.type==="string"||n.type==="shell"))&&Wu(n)&&!WC(o,a.locStart(n),{backwards:!0})}function qu(n,o,a){return Ct(n.map(function(u,d){return d===0?[n.call(o)]:[a,n.call(o)]},"types"))}var ob=function(n,o,a){var u=n.getValue();if(!u)return"";if(typeof u=="string")return u;var d=function(_,I,A){var v=_.getValue();switch(v.kind){case"program":return Ct([cr(_,I,A),ie.printDanglingComments(_,I,!0,function(ft){return!ft.printed})]);case"expressionstatement":return _.call(A,"expression");case"block":return[cr(_,I,A),ie.printDanglingComments(_,I,!0)];case"declare":var Ft=function(ft){return ci(", ",ft.map(function(zt){return A(zt)},"directives"))};if(["block","short"].includes(v.mode))return["declare(",Ft(_),")",v.mode==="block"?" {":":",v.children.length>0?Rt([kt,cr(_,I,A)]):"",ie.printDanglingComments(_,I),kt,v.mode==="block"?"}":"enddeclare;"];var wt=ZC(_,v);return["declare(",Ft(_),")",wt&&wt.kind==="inline"?"":";"];case"declaredirective":return[_.call(A,"key"),"=",_.call(A,"value")];case"namespace":return["namespace ",v.name&&typeof v.name=="string"?[v.name,v.withBrackets?" ":""]:"",v.withBrackets?"{":";",Ki(v)?[" ",ie.printDanglingComments(_,I,!0)]:"",v.children.length>0?v.withBrackets?Rt([kt,cr(_,I,A)]):[v.children[0].kind==="inline"?"":[kt,XC(I.originalText,v,I.locStart)?kt:""],cr(_,I,A)]:"",v.withBrackets?[kt,"}"]:""];case"usegroup":return Ct(["use ",v.type?[v.type," "]:"",Rt([v.name?[Au(v.name),"\\{",ne]:"",ci([",",xe],_.map(function(ft){return A(ft)},"items"))]),v.name?[Jn(lr(I,"7.2")?",":""),ne,"}"]:""]);case"useitem":return[v.type?[v.type," "]:"",Au(v.name),Ki(v)?[" ",ie.printDanglingComments(_,I,!0)]:"",v.alias?[" as ",_.call(A,"alias")]:""];case"class":case"enum":case"interface":case"trait":return function(ft,zt,ue){var Tt=ft.getValue(),Pi=Tt.kind==="class"&&Tt.isAnonymous,si=ts(ft,zt,ue,{inline:Pi}),fi=Pi?[]:g(si);Tt.isReadonly&&fi.push("readonly "),Tt.isFinal&&fi.push("final "),Tt.isAbstract&&fi.push("abstract "),fi.push(Pi?"":Tt.kind),Tt.name&&fi.push(" ",ft.call(ue,"name")),Tt.kind==="enum"&&Tt.valueType&&fi.push(": ",ft.call(ue,"valueType")),Tt.extends&&Tt.implements?fi.push(Us([[on(ft,zt,ue,"extends"),on(ft,zt,ue,"implements")],[on(ft,zt,ue,"extends"),on(ft,zt,ue,"implements"," ",kt)],[on(ft,zt,ue,"extends",kt," "),on(ft,zt,ue,"implements",kt,Tt.implements.length>1?kt:" ")]],{shouldBreak:Ki(Tt.extends)})):(Tt.extends&&fi.push(Us([on(ft,zt,ue,"extends"),on(ft,zt,ue,"extends"," ",kt),on(ft,zt,ue,"extends",kt,Tt.extends.length>1?kt:" ")])),Tt.implements&&fi.push(Us([on(ft,zt,ue,"implements"),on(ft,zt,ue,"implements"," ",kt),on(ft,zt,ue,"implements",kt,Tt.implements.length>1?kt:" ")])));var Ji=Ct([Ct(fi),Ba(zt)?Pi?xe:kt:" "]),we=Tt.body&&Tt.body.length===0&&!Ki(Tt),bi=["{",Rt([we?"":kt,Vu(ft,zt,ue,"body")]),ie.printDanglingComments(ft,zt,!0),Pi&&we?ne:kt,"}"];return[Ji,bi]}(_,I,A);case"traitprecedence":return[_.call(A,"trait"),"::",_.call(A,"method")," insteadof ",ci(", ",_.map(A,"instead"))];case"traitalias":return[v.trait?[_.call(A,"trait"),"::"]:"",v.method?_.call(A,"method"):""," as ",ci(" ",[].concat(g(v.visibility?[v.visibility]:[]),g(v.as?[_.call(A,"as")]:[])))];case"traituse":return Ct(["use ",Rt(Ct(ci([",",xe],_.map(A,"traits")))),v.adaptations?[" {",v.adaptations.length>0?[Rt([kt,Vu(_,I,A,"adaptations")]),kt]:Ki(v)?[xe,ie.printDanglingComments(_,I,!0),xe]:"","}"]:""]);case"function":case"closure":case"method":return function(ft,zt,ue){var Tt=ft.getValue(),Pi=ts(ft,zt,ue,{inline:Tt.kind==="closure"}),si=[];Tt.isFinal&&si.push("final "),Tt.isAbstract&&si.push("abstract "),Tt.visibility&&si.push(Tt.visibility," "),Tt.isStatic&&si.push("static "),si.push("function "),Tt.byref&&si.push("&"),Tt.name&&si.push(ft.call(ue,"name")),si.push(Cn(ft,zt,ue)),Tt.uses&&Tt.uses.length>0&&si.push(Ct([" use ",Cn(ft,zt,ue,"uses")])),Tt.type&&si.push([": ",Ki(Tt.type)?[ft.call(function(bi){return ie.printDanglingComments(bi,zt,!0)},"type")," "]:"",Tt.nullable?"?":"",ft.call(ue,"type")]);var fi=si;if(!Tt.body)return[].concat(g(Pi),[fi]);var Ji=Tt.kind==="closure",we=["{",Rt([Lu(ft)?"":kt,ft.call(ue,"body")]),Ji&&Lu(ft)?"":kt,"}"];return Ji?[].concat(g(Pi),[fi," ",we]):Tt.arguments.length===0?[].concat(g(Pi),[fi,Ba(zt)?kt:" ",we]):si.some(Xn)?[fi," ",we]:[].concat(g(Pi),[Us([[fi,Ba(zt)?kt:" ",we],[fi," ",we]])])}(_,I,A);case"arrowfunc":return[v.parenthesizedExpression?"(":""].concat(g(ts(_,I,A,{inline:!0})),[v.isStatic?"static ":"","fn",Cn(_,I,A),v.type?[": ",v.nullable?"?":"",_.call(A,"type")]:""," => ",_.call(A,"body"),v.parenthesizedExpression?")":""]);case"parameter":var le="";v.flags===1?le="public ":v.flags===2?le="protected ":v.flags===4&&(le="private ");var _e=[].concat(g(ts(_,I,A,{inline:!0})),[le,v.readonly?"readonly ":"",v.nullable?"?":"",v.type?[_.call(A,"type")," "]:"",v.byref?"&":"",v.variadic?"...":"","$",_.call(A,"name")]);return v.value?Ct([_e,Ki(v)?" ":"",ie.printDanglingComments(_,I,!0)," =",Gr(v.name,v.value,_.call(A,"value"),!1,I)]):_e;case"variadic":return["...",_.call(A,"what")];case"property":return Ct([v.readonly?"readonly ":"",v.type?[v.nullable?"?":"",_.call(A,"type")," "]:"","$",_.call(A,"name"),v.value?[" =",Gr(v.name,v.value,_.call(A,"value"),!1,I)]:""]);case"propertystatement":var Bt=[];_.map(function(ft){return Bt.push.apply(Bt,g(ts(ft,I,A)))},"properties");var Ee,Jt=_.map(function(ft){return A(ft)},"properties"),Ne=v.properties.some(function(ft){return ft.value});Jt.length!==1||v.properties[0].comments?Jt.length>0&&(Ee=Rt(Jt[0])):Ee=m(Jt,1)[0];var Ae=v.visibility||v.visibility===null;return Ct([].concat(Bt,[Ae?[v.visibility===null?"var":v.visibility,""]:"",v.isStatic?[Ae?" ":"","static"]:"",Ee?[" ",Ee]:"",Rt(Jt.slice(1).map(function(ft){return[",",Ne?kt:xe,ft]}))]));case"if":var ge=[],Xt=Vn(_,I,A,"body"),ve=Ct(["if (",Ct([Rt([ne,_.call(A,"test")]),ne]),")",Xt]);if(ge.push(ve,Pa(_)||!v.body?"":kt),v.alternate){ge.push(v.shortForm?"":"} ");var Be=Su(v.body)&&v.body.comments.some(function(ft){return ft.trailing&&!ie.isBlockComment(ft)})||function(ft){if(!ft.comments)return!1;var zt=Zn(ft.comments.filter(function(ue){return!ue.leading&&!ue.trailing}));return zt&&!ie.isBlockComment(zt)}(v),an=!Be;ge.push(an?"":kt),Ki(v)&&ge.push(gs(I.originalText,v.body,I)?kt:"",ie.printDanglingComments(_,I,!0),Be?kt:" "),ge.push("else",Ct(v.alternate.kind==="if"?_.call(A,"alternate"):Vn(_,I,A,"alternate")))}else ge.push(v.body?v.shortForm?"endif;":"}":"");return ge;case"do":return["do",Vn(_,I,A,"body")," while (",Ct([Rt([ne,_.call(A,"test")]),ne]),")"];case"while":case"switch":return Ct([v.kind," (",Ct([Rt([ne,_.call(A,"test")]),ne]),")",Vn(_,I,A,"body")]);case"for":var _i=Vn(_,I,A,"body"),st=ie.printDanglingComments(_,I,!0),nt=st?[st,ne]:"";return v.init.length||v.test.length||v.increment.length?[nt,Ct(["for (",Ct([Rt([ne,Ct(ci([",",xe],_.map(A,"init"))),";",xe,Ct(ci([",",xe],_.map(A,"test"))),";",xe,Ct(ci([",",xe],_.map(A,"increment")))]),ne]),")",_i])]:[nt,Ct(["for (;;)",_i])];case"foreach":var Vt=Vn(_,I,A,"body"),qt=ie.printDanglingComments(_,I,!0);return[qt?[qt,ne]:"",Ct(["foreach (",Ct([Rt([ne,_.call(A,"source"),xe,"as ",Ct(v.key?Rt(ci([" =>",xe],[_.call(A,"key"),_.call(A,"value")])):_.call(A,"value"))]),ne]),")",Vt])];case"try":var Lt=[];return Lt.push("try",Vn(_,I,A,"body")),v.catches&&Lt.push(_.map(A,"catches")),v.always&&Lt.push(" finally",Vn(_,I,A,"always")),Lt;case"catch":return[" catch",v.what?[" (",ci(" | ",_.map(A,"what")),v.variable?[" ",_.call(A,"variable")]:"",")"]:"",Vn(_,I,A,"body")];case"case":return[v.test?["case ",v.test.comments?Rt(_.call(A,"test")):_.call(A,"test"),":"]:"default:",v.body&&v.body.children&&v.body.children.length?Rt([Pa(_)?"":kt,_.call(A,"body")]):""];case"break":case"continue":return v.level&&v.level.kind==="number"&&v.level.value!=="1"?["".concat(v.kind," "),_.call(A,"level")]:v.kind;case"call":return v.arguments.length===1&&Wr(v.arguments[0],I.originalText,I)?[_.call(A,"what"),"(",ci(", ",_.map(A,"arguments")),")"]:Wi(v.what)?function(ft,zt,ue){var Tt=[];function Pi(he){var Qe=zt.originalText,di=eb(Qe,he,zt);return Qe.charAt(di)===")"?GC(Qe,di+1,zt):gs(Qe,he,zt)}function si(he){var Qe=he.getValue();if(Qe.kind!=="call"||!Wi(Qe.what)&&Qe.what.kind!=="call")if(Wi(Qe)){var di=null;di=Qe.kind==="propertylookup"?Ma(he,zt,ue):Qe.kind==="nullsafepropertylookup"?Du(he,zt,ue):Qe.kind==="staticlookup"?Ru(he,zt,ue):wu(he,zt,ue),Tt.unshift({node:Qe,needsParens:vu(he),printed:ie.printAllComments(he,function(){return di},zt)}),he.call(function(pr){return si(pr)},"what")}else Tt.unshift({node:Qe,printed:he.call(ue)});else Tt.unshift({node:Qe,printed:[ie.printAllComments(he,function(){return Cn(he,zt,ue)},zt),Pi(Qe)?kt:""]}),he.call(function(pr){return si(pr)},"what")}var fi=ft.getValue();Tt.unshift({node:fi,printed:Cn(ft,zt,ue)}),ft.call(function(he){return si(he)},"what");for(var Ji=0;Ji<Tt.length;++Ji)Tt[Ji].node.kind==="call"&&Tt[Ji-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(Tt[Ji-1].node.kind)&&Tt[Ji-1].needsParens&&(Tt[0].printed=["(",Tt[0].printed],Tt[Ji-1].printed=[Tt[Ji-1].printed,")"]);for(var we=[],bi=[Tt[0]],We=1;We<Tt.length&&(Tt[We].node.kind==="call"||Wi(Tt[We].node)&&Tt[We].node.offset&&Tt[We].node.offset.kind==="number");++We)bi.push(Tt[We]);if(Tt[0].node.kind!=="call")for(;We+1<Tt.length&&Wi(Tt[We].node)&&Wi(Tt[We+1].node);++We)bi.push(Tt[We]);we.push(bi),bi=[];for(var io=!1;We<Tt.length;++We){if(io&&Wi(Tt[We].node)){if(Tt[We].node.kind==="offsetlookup"&&Tt[We].node.offset&&Tt[We].node.offset.kind==="number"){bi.push(Tt[We]);continue}we.push(bi),bi=[],io=!1}Tt[We].node.kind==="call"&&(io=!0),bi.push(Tt[We]),Tt[We].node.comments&&ie.hasTrailingComment(Tt[We].node)&&(we.push(bi),bi=[],io=!1)}bi.length>0&&we.push(bi);function rN(he){var Qe=he[1].length&&he[1][0].node.kind==="offsetlookup";if(he[0].length===1){var di=he[0][0].node;return di.kind==="variable"&&(di.name==="this"||oN&&pr(di.name))||Fa(di)}function pr(uN){return uN.length<zt.tabWidth}var ja=Zn(he[0]).node;return Wi(ja)&&(ja.offset.kind==="identifier"||ja.offset.kind==="variable")&&Qe}var oN=ft.getParentNode().kind==="expressionstatement",no=we.length>=2&&!we[1][0].node.comments&&rN(we);function so(he){for(var Qe=[],di=0;di<he.length;di++)he[di+1]&&he[di+1].needsParens?(Qe.push("(",he[di].printed,he[di+1].printed,")"),di++):Qe.push(he[di].printed);return Qe}function aN(he){return he.length===0?"":Rt(Ct([kt,ci(kt,he.map(so))]))}var Lc=we.map(so),Qa=Lc,ro=no?3:2,Pc=we.slice(0,ro).flat(),Dc=Pc.slice(1,-1).some(function(he){return ie.hasLeadingComment(he.node)})||Pc.slice(0,-1).some(function(he){return ie.hasTrailingComment(he.node)})||we[ro]&&ie.hasLeadingComment(we[ro][0].node),hN=wa(ft,"encapsed");if(we.length<=ro&&!Dc||hN)return Ct(Qa);var Rc=Zn(no?we.slice(1,2)[0]:we[0]).node,wc=Rc.kind!=="call"&&Pi(Rc),Fc=[so(we[0]),no?we.slice(1,2).map(so):"",wc?kt:"",aN(we.slice(no?2:1))],lN=Tt.filter(function(he){return he.node.kind==="call"}).length;return Dc||lN>=3||Lc.slice(0,-1).some(Xn)?Ct(Fc):[Xn(Qa)||wc?yu:"",Us([Qa,Fc])]}(_,I,A):[_.call(A,"what"),Cn(_,I,A)];case"new":var Ce=v.what&&v.what.kind==="class"&&v.what.isAnonymous;if(!Ce&&v.arguments.length===1&&Wr(v.arguments[0],I.originalText,I))return["new "].concat(g(_.call(ts,"what")),[_.call(A,"what"),"(",ci(", ",_.map(A,"arguments")),")"]);var De=[];if(De.push("new "),Ce)De.push.apply(De,[v.what.leadingComments&&v.what.leadingComments[0].kind==="commentblock"?[ie.printComments(v.what.leadingComments,I)," "]:""].concat(g(_.call(function(ft){return ts(ft,I,A,{inline:!0})},"what")),["class",v.arguments.length>0?[" ",Cn(_,I,A)]:"",Ct(_.call(A,"what"))]));else{var Ye=["call","offsetlookup"].includes(v.what.kind),mi=[Ye?"(":"",_.call(A,"what"),Ye?")":"",Cn(_,I,A)];De.push(Iu(v.what)?Rt(mi):mi)}return De;case"clone":return["clone ",v.what.comments?Rt(_.call(A,"what")):_.call(A,"what")];case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var re,Ge=_.getParentNode(),Li=0;do re=_.getParentNode(Li),Li++;while(re&&Wi(re));var es=wa(_,"encapsed")||re&&(re.kind==="new"||re.kind==="assign"&&re.left.kind!=="variable")||v.kind==="offsetlookup"||(Fa(v.what)||v.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(v.offset.kind)&&Ge&&!Wi(Ge);return[_.call(A,"what"),es?Uu(_,I,A):Ct(Rt([ne,Uu(_,I,A)]))];case"exit":return Ct([v.useDie?"die":"exit","(",v.expression?Wr(v.expression,I.originalText,I)?_.call(A,"expression"):[Rt([ne,_.call(A,"expression")]),ne]:ie.printDanglingComments(_,I),")"]);case"global":return Ct(["global ",Rt(ci([",",xe],_.map(A,"items")))]);case"include":return[v.require?"require":"include",v.once?"_once":""," ",v.target.comments?Rt(_.call(A,"target")):_.call(A,"target")];case"label":return[_.call(A,"name"),":"];case"goto":return["goto ",_.call(A,"label")];case"throw":return["throw ",v.what.comments?Rt(_.call(A,"what")):_.call(A,"what")];case"silent":return["@",_.call(A,"expr")];case"halt":return[Ki(v)?[ie.printDanglingComments(_,I,!0),kt]:"","__halt_compiler();",v.after];case"eval":return Ct(["eval(",Wr(v.source,I.originalText,I)?_.call(A,"source"):[Rt([ne,_.call(A,"source")]),ne],")"]);case"echo":var is,hn=_.map(function(ft){return A(ft)},"expressions");return hn.length!==1||v.expressions[0].comments?hn.length>0&&(is=Ra(v.expressions[0])||v.expressions[0].comments?Rt(hn[0]):UC(hn[0])):is=m(hn,1)[0],Ct([v.shortForm?"":"echo ",is||"",Rt(hn.slice(1).map(function(ft){return[",",xe,ft]}))]);case"print":return["print ",v.expression.comments?Rt(_.call(A,"expression")):_.call(A,"expression")];case"return":var $i=[];if($i.push("return"),v.expr){var jr=_.call(A,"expr");$i.push(" ",v.expr.comments?Rt(jr):jr)}return Ki(v)&&$i.push(" ",ie.printDanglingComments(_,I,!0)),$i;case"isset":case"unset":return Ct([v.kind,Cn(_,I,A,"variables")]);case"empty":return Ct(["empty(",Rt([ne,_.call(A,"expression")]),ne,")"]);case"variable":var Gn=_.getParentNode(),qs=_.getParentNode(1),Hb=Gn.kind==="assign"?"":v.byref?"&":"",Vb=Gn.kind==="encapsedpart"&&Gn.syntax==="simple"&&Gn.curly||qs&&Gn.kind==="offsetlookup"&&qs.kind==="encapsedpart"&&qs.syntax==="simple"&&qs.curly?"":"$",Gb=v.curly?"{":"",Wb=v.curly?"}":"";return[Hb,Vb,Gb,_.call(A,"name"),Wb];case"constantstatement":case"classconstant":var zr,qb=ts(_,I,A),fr=_.map(function(ft){return A(ft)},"constants");return fr.length!==1||v.constants[0].comments?fr.length>0&&(zr=Rt(fr[0])):zr=m(fr,1)[0],Ct([].concat(g(qb),[v.visibility?[v.visibility," "]:"","const",zr?[" ",zr]:"",Rt(fr.slice(1).map(function(ft){return[",",kt,ft]}))]));case"constant":return Vr(v.name,_.call(A,"name")," =",v.value,_.call(A,"value"),!1,I);case"static":var Kr,dr=_.map(function(ft){return A(ft)},"variables"),Yb=v.variables.some(function(ft){return ft.defaultValue});return dr.length!==1||v.variables[0].comments?dr.length>0&&(Kr=Rt(dr[0])):Kr=m(dr,1)[0],Ct(["static",Kr?[" ",Kr]:"",Rt(dr.slice(1).map(function(ft){return[",",Yb?kt:xe,ft]}))]);case"staticvariable":return Vr(v.variable,_.call(A,"variable")," =",v.defaultValue,_.call(A,"defaultValue"),!1,I);case"list":case"array":var _c=v.kind==="array"&&Gs(I.phpVersion,"5.4")||v.kind==="list"&&(v.shortForm||Gs(I.phpVersion,"7.1")),Va=_c?"[":[v.kind,"("],Ga=_c?"]":")";if(v.items.length===0)return Ki(v)?Ct([Va,ie.printDanglingComments(_,I),ne,Ga]):[Va,Ga];var $r=Zn(v.items),mc=$r&&$r.kind==="noop",Jr=m(v.items.filter(function(ft){return ft.kind!=="noop"}).sort(function(ft,zt){return I.locStart(ft)-I.locStart(zt)}),1)[0],Qb=!(!Jr||!Jr.key)&&Jr&&Cu(I.originalText,I.locStart(v),I.locStart(Jr));return Ct([Va,Rt([ne,sb(_,I,A)]),mc?",":"",Jn(!mc&&lr(I,"5.0")?[$r&&Pu($r)?kt:"",","]:""),ie.printDanglingComments(_,I,!0),ne,Ga],{shouldBreak:Qb});case"entry":var gc=v.byRef?"&":"",jb=v.unpack?"...":"";return v.key?Vr(v.key,_.call(A,"key")," =>",v.value,_.call(A,"value"),gc,I):[gc,jb,_.call(A,"value")];case"yield":var Tc=[v.key?[_.call(A,"key")," => "]:"",_.call(A,"value")];return["yield",v.key||v.value?" ":"",v.value&&v.value.comments?Rt(Tc):Tc];case"yieldfrom":return["yield from ",v.value.comments?Rt(_.call(A,"value")):_.call(A,"value")];case"unary":return[v.type,_.call(A,"what")];case"pre":return[v.type+v.type,_.call(A,"what")];case"post":return[_.call(A,"what"),v.type+v.type];case"cast":return["(",v.type,") ",v.expr.comments?Rt(_.call(A,"expr")):_.call(A,"expr")];case"assignref":case"assign":var kc=v.kind==="assignref";return Vr(v.left,_.call(A,"left"),[" ",kc?"=":v.operator],v.right,_.call(A,"right"),kc,I);case"bin":var ln=_.getParentNode(),xc=_.getParentNode(1),Ec=v!==ln.body&&(ln.kind==="if"||ln.kind==="while"||ln.kind==="switch"||ln.kind==="do"),Ys=Mu(_,A,I,!1,Ec);if(Ec)return Ys;if(ln.kind==="unary"||Wi(ln)&&ln.kind!=="offsetlookup")return Ct([Rt([ne].concat(g(Ys))),ne]);var zb=v!==ln.body&&ln.kind==="for"||ln.kind==="retif"&&xc&&xc.kind!=="return",Kb=["assign","property","constant","staticvariable","entry"].includes(ln.kind),$b=v.left.kind==="bin"&&Nu(v.type,v.left.type);if(zb||ur(v)&&!$b||!ur(v)&&Kb)return Ct(Ys);var Jb=Ys.slice(1);return Ct([Ys.length>0?Ys[0]:"",Rt(Jb)]);case"retif":var Xr,Zr=[],to=_.getParentNode(),vc=0;do Xr=_.getParentNode(vc),vc++;while(Xr&&Xr.kind==="retif");var yc=Xr||to,Cc=v.falseExpr.kind==="bin"?Rt(_.call(A,"falseExpr")):_.call(A,"falseExpr"),Xb=[v.trueExpr?xe:" ","?",v.trueExpr?[" ",v.trueExpr.kind==="bin"?Rt(_.call(A,"trueExpr")):_.call(A,"trueExpr"),xe]:"",":",v.trueExpr?[" ",Cc]:[Bu(v.falseExpr)?" ":xe,Cc]];Zr.push(Xb);var bc=function(ft){return to===yc?Ct(ft):ft},Nc=_.getParentNode(1),Ts=to.kind==="cast"&&Nc?Nc:to,Zb=["propertylookup","nullsafepropertylookup","staticlookup"].includes(Ts.kind),Wa=_.call(A,"test");if(!v.trueExpr){var Ac=[Wa,Ts.kind==="bin"||["print","echo","return","include"].includes(yc.kind)?Rt(Zr):Zr];return Ts.kind==="call"&&Ts.what===v||Ts.kind==="unary"||Wi(Ts)&&Ts.kind!=="offsetlookup"?Ct([Rt([ne,Ac]),ne]):bc(Ac)}return bc([v.test.kind==="retif"?Rt(Wa):Wa,Rt(Zr),Zb?ne:""]);case"boolean":return v.value?"true":"false";case"number":return QC(v.value);case"string":if(_.getParentNode().kind==="encapsedpart"){var Ic=_.getParentNode(1),qa=0,tN=Gs(I.phpVersion,"7.3"),Sc=Hs;if(Ic.type==="heredoc"){Sc=tN?kt:Hs;var eo=Ic.raw.split(`
`);(qa=eo[eo.length-1].search(/\S/))===-1&&(qa=eo[eo.length-2].search(/\S/))}return ci(Sc,v.raw.split(`
`).map(function(ft,zt){return zt>0||v.loc.start.column===0?ft.substring(qa):ft}))}var Oc=JC(v,I)?'"':"'",gn=v.raw;return v.raw[0]==="b"&&(gn=gn.slice(1)),['"',"'"].includes(gn[0])&&(gn=gn.substr(1)),['"',"'"].includes(gn[gn.length-1])&&(gn=gn.substr(0,gn.length-1)),[v.raw[0]==="b"?"b":"",Oc,ci(Hs,gn.split(`
`)),Oc];case"intersectiontype":return qu(_,A,"&");case"uniontype":return qu(_,A,"|");case"encapsedpart":var eN=v.syntax==="simple"&&v.curly||v.syntax==="complex"?[v.curly?"$":"","{"]:"",iN=v.syntax==="simple"&&v.curly||v.syntax==="complex"?"}":"";return[eN,_.call(A,"expression"),iN];case"encapsed":switch(v.type){case"string":case"shell":case"heredoc":var nN=Gs(I.phpVersion,"7.3")?kt:Hs;return[Hu(v),v.type==="heredoc"?nN:""].concat(g(_.map(A,"value")),[Hu(v,{opening:!1}),v.type==="heredoc"&&Ou(_)?kt:""]);default:return"Have not implemented kind ".concat(v.type," yet.")}case"inline":return ci(Hs,v.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(`
`));case"magic":return v.value;case"nowdoc":var Ya=Gs(I.phpVersion,"7.3")?kt:Hs;return["<<<'",v.label,"'",Ya,ci(Ya,v.value.split(`
`)),Ya,v.label,Ou(_)?kt:""];case"name":return[v.resolution==="rn"?"namespace\\":"",v.name];case"literal":return _.call(A,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return v.name;case"nullkeyword":return"null";case"identifier":return _.getParentNode().kind==="method"&&(v.name=tb(v.name)),_.call(A,"name");case"match":var sN=_.map(function(ft,zt){var ue=ft.getValue().conds===null?"default":ft.map(function(Pi,si){return[",",xe,A(Pi)].slice(si===0?2:0)},"conds"),Tt=ft.call(A,"body");return[",",kt,Ct([Ct([ue,Rt(xe)]),"=> ",Tt])].slice(zt>0?0:1)},"arms");return Ct(["match (",Ct([ne,Rt(_.call(A,"cond")),ne]),") {",Ct(Rt([].concat(g(sN),[I.trailingCommaPHP?Jn(","):""])))," ",ne,"}"]);case"noop":return v.comments?ie.printComments(_.getValue().comments,I):"";case"namedargument":return[v.name,": ",_.call(A,"value")];case"enumcase":return Ct(["case ",_.call(A,"name"),v.value?[" =",Gr(v.name,v.value,_.call(A,"value"),!1,I)]:""]);case"variadicplaceholder":return"...";default:return"Have not implemented kind ".concat(v.kind," yet.")}}(n,o,a),T=[],y=vu(n);return y&&T.unshift("("),T.push(d),y&&T.push(")"),YC(n)&&T.push(";"),jC(n)&&T.push(kt),T},ab=new Set(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"]);function Yu(n,o){if(n.kind==="string"&&delete o.isDoubleQuote,["array","list"].includes(n.kind)&&delete o.shortForm,n.kind==="inline"){if(n.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;o.value=o.value.replace(/\n/g,"")}if((n.kind==="continue"||n.kind==="break")&&n.level){var a=o.level;a.kind==="number"&&(o.level=a.value==="1"?null:a)}if(n.kind==="block"&&n.children.length===1&&n.children[0].kind==="block")for(;o.children[0].kind==="block";)o.children=o.children[0].children;if(n.kind==="number"&&(o.value=ae.printNumber(n.value)),["foreach","for","if","while","do"].includes(n.kind)&&(n.body&&n.body.kind!=="block"?o.body={kind:"block",children:[o.body]}:o.body=o.body?o.body:null,n.alternate&&n.alternate.kind!=="block"?o.alternate={kind:"block",children:[o.alternate]}:o.alternate=o.alternate?o.alternate:null),n.kind==="usegroup"&&typeof n.name=="string"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="useitem"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="method"&&n.name.kind==="identifier"&&(o.name.name=ae.normalizeMagicMethodName(o.name.name)),n.kind==="noop")return null}Yu.ignoredProperties=ab;var hb=Yu,Ua="PHP",lb={phpVersion:{since:"0.13.0",category:Ua,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"}]},trailingCommaPHP:{since:"0.0.0",category:Ua,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:Ua,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},ub=function(n,o,a,u){if(a!=="length"&&a!=="prototype"&&a!=="arguments"&&a!=="caller"){var d=Object.getOwnPropertyDescriptor(n,a),T=Object.getOwnPropertyDescriptor(o,a);!cb(d,T)&&u||Object.defineProperty(n,a,T)}},cb=function(n,o){return n===void 0||n.configurable||n.writable===o.writable&&n.enumerable===o.enumerable&&n.configurable===o.configurable&&(n.writable||n.value===o.value)},fb=function(n,o){var a=Object.getPrototypeOf(o);a!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,a)},db=function(n,o){return"/* Wrapped ".concat(n,`*/
`).concat(o)},pb=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),_b=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),mb=function(n,o,a){var u=a===""?"":"with ".concat(a.trim(),"() "),d=db.bind(null,u,o.toString());Object.defineProperty(d,"name",_b),Object.defineProperty(n,"toString",h(h({},pb),{},{value:d}))},gb=function(n,o){var a,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=u.ignoreNonConfigurable,T=d!==void 0&&d,y=n.name,_=E(Reflect.ownKeys(o));try{for(_.s();!(a=_.n()).done;){var I=a.value;ub(n,o,I,T)}}catch(A){_.e(A)}finally{_.f()}return fb(n,o),mb(n,o,y),n},qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qu(n){return n&&n.default||n}var Yr,Tb=function(){var n={};return n.promise=new Promise(function(o,a){n.resolve=o,n.reject=a}),n},ju=function(n,o){return n(o={exports:{}},o.exports),o.exports}(function(n,o){var a=qr&&qr.__awaiter||function(y,_,I,A){return new(I||(I=Promise))(function(v,Ft){function wt(Bt){try{_e(A.next(Bt))}catch(Ee){Ft(Ee)}}function le(Bt){try{_e(A.throw(Bt))}catch(Ee){Ft(Ee)}}function _e(Bt){Bt.done?v(Bt.value):new I(function(Ee){Ee(Bt.value)}).then(wt,le)}_e((A=A.apply(y,_||[])).next())})},u=qr&&qr.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(o,"__esModule",{value:!0});var d=u(Tb);function T(y){var _,I,A,v=this,Ft=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",wt=function(){return a(v,void 0,void 0,l().mark(function Bt(){var Ee,Jt,Ne,Ae,ge=this;return l().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:if(_===void 0){Xt.next=2;break}return Xt.abrupt("return");case 2:Ee=function(ve){return a(ge,void 0,void 0,l().mark(function Be(){var an;return l().wrap(function(_i){for(;;)switch(_i.prev=_i.next){case 0:if(A=d.default(),!((an=ve[1][Ft]-Date.now())<=0)){_i.next=6;break}return y.delete(ve[0]),A.resolve(),_i.abrupt("return");case 6:return _=ve[0],typeof(I=setTimeout(function(){y.delete(ve[0]),A&&A.resolve()},an)).unref=="function"&&I.unref(),_i.abrupt("return",A.promise);case 10:case"end":return _i.stop()}},Be)}))},Xt.prev=3,Jt=E(y),Xt.prev=5,Jt.s();case 7:if((Ne=Jt.n()).done){Xt.next=13;break}return Ae=Ne.value,Xt.next=11,Ee(Ae);case 11:Xt.next=7;break;case 13:Xt.next=18;break;case 15:Xt.prev=15,Xt.t0=Xt.catch(5),Jt.e(Xt.t0);case 18:return Xt.prev=18,Jt.f(),Xt.finish(18);case 21:Xt.next=25;break;case 23:Xt.prev=23,Xt.t1=Xt.catch(3);case 25:_=void 0;case 26:case"end":return Xt.stop()}},Bt,null,[[3,23],[5,15,18,21]])}))},le=function(){_=void 0,I!==void 0&&(clearTimeout(I),I=void 0),A!==void 0&&(A.reject(void 0),A=void 0)},_e=y.set.bind(y);return y.set=function(Bt,Ee){y.has(Bt)&&y.delete(Bt);var Jt=_e(Bt,Ee);return _&&_===Bt&&le(),wt(),Jt},wt(),y}o.default=T,n.exports=T,n.exports.default=T});(Yr=ju)&&Yr.__esModule&&Object.prototype.hasOwnProperty.call(Yr,"default")&&Yr.default;var kb=ju,Ha=new WeakMap,zu=new WeakMap,Qr=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.cacheKey,u=o.cache,d=u===void 0?new Map:u,T=o.maxAge;typeof T=="number"&&kb(d);var y=function(){for(var _=arguments.length,I=new Array(_),A=0;A<_;A++)I[A]=arguments[A];var v=a?a(I):I[0],Ft=d.get(v);if(Ft)return Ft.data;var wt=n.apply(this,I);return d.set(v,{data:wt,maxAge:T?Date.now()+T:Number.POSITIVE_INFINITY}),wt};return gb(y,n,{ignoreNonConfigurable:!0}),zu.set(y,d),y};Qr.decorator=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(o,a,u){var d=o[a];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete u.value,delete u.writable,u.get=function(){if(!Ha.has(this)){var T=Qr(d,n);return Ha.set(this,T),T}return Ha.get(this)}}},Qr.clear=function(n){var o=zu.get(n);if(!o)throw new TypeError("Can't clear a function that was not memoized!");if(typeof o.clear!="function")throw new TypeError("The cache Map can't be cleared!");o.clear()};var Ku=/@prettier|@format/,$u=Qr(function(n){var o=su(n),a=m(o.children,1)[0],u=m(o.comments.filter(function(d){return d.kind==="commentblock"}),1)[0];if(a&&u&&u.loc.start.line<a.loc.start.line)return u}),xb=function(n){if(!Ku.test(n))return!1;var o=$u(n);if(o){var a=o.value;return Ku.test(a)}return!1},Eb=function(n){var o=$u(n);if(o){var a=o.loc,u=a.start.offset,d=a.end.offset,T=n.substring(0,u),y=n.substring(d);return"".concat(T).concat(function(Ft){var wt=Ft.split(`
`);if(wt.length===1){var le=m(/\/*\*\*(.*)\*\//.exec(wt[0]),2)[1];wt=["/**"," * ".concat(le.trim())," */"]}var _e=wt.findIndex(function(Bt){return/@\S/.test(Bt)})||1;return wt.splice(_e,0," * @format"),wt.join(`
`)}(o.value)).concat(y)}var _="<?php";if(!n.startsWith(_))return n;var I=_.length,A=n.substring(0,I),v=n.substring(I);return"".concat(A,`
/** 
 * @format 
 */
`).concat(v)},Ju="programming",Xu="text.html.php",Zu="application/x-httpd-php",tc="#4F5D95",ec=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],ic=[".php",".php_cs",".php_cs.dist","Phakefile"],nc=["php"],sc=["inc"],vb={name:"PHP",type:Ju,tmScope:Xu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Zu,color:tc,extensions:ec,filenames:ic,interpreters:nc,aliases:sc,languageId:272},yb=Object.freeze({__proto__:null,name:"PHP",type:Ju,tmScope:Xu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Zu,color:tc,extensions:ec,filenames:ic,interpreters:nc,aliases:sc,languageId:272,default:vb}),rc="HTML+PHP",oc="markup",ac="#4f5d95",hc="text.html.php",lc="HTML",uc=[".phtml"],cc="application/x-httpd-php",Cb={name:rc,type:oc,color:ac,tmScope:hc,group:lc,extensions:uc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:cc,languageId:151},bb=Object.freeze({__proto__:null,name:rc,type:oc,color:ac,tmScope:hc,group:lc,extensions:uc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:cc,languageId:151,default:Cb}),Nb=Qu(yb),Ab=Qu(bb),fc=s.default.doc.builders,Ib=fc.join,Sb=fc.hardline,Ob=xb,Lb=Eb;function dc(n,o){var a=o.extend,u=o.override,d={};for(var T in n)d[T==="languageId"?"linguistLanguageId":T]=n[T];if(a)for(var y in a)d[y]=(d[y]||[]).concat(a[y]);for(var _ in u)d[_]=u[_];return d}var Pb=[dc(Nb,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),dc(Ab,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],pc=function(n){return function(o){return o.loc&&o.loc[n]&&o.loc[n].offset}},Db={php:{parse:su,astFormat:"php",locStart:pc("start"),locEnd:pc("end"),hasPragma:Ob}},Rb={php:{print:ob,insertPragma:Lb,massageAstNode:hb,getCommentChildNodes:ie.getCommentChildNodes,canAttachComment:ie.canAttachComment,isBlockComment:ie.isBlockComment,handleComments:{ownLine:ie.handleOwnLineComment,endOfLine:ie.handleEndOfLineComment,remaining:ie.handleRemainingComment},willPrintOwnComments:function(n){var o=n.getValue();return o&&o.kind==="noop"},printComment:function(n){var o=n.getValue();switch(o.kind){case"commentblock":if(!o.value.includes(`
`))return o.value;var a=o.value.split(`
`);return a.slice(1,a.length-1).every(function(u){return u.trim()[0]==="*"})?Ib(Sb,a.map(function(u,d){return(d>0?" ":"")+(d<a.length-1?u.trim():u.trimLeft())})):o.value;case"commentline":return o.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(o)))}},hasPrettierIgnore:function(n){var o=function(d){return d.value.includes("prettier-ignore")&&!d.value.includes("prettier-ignore-start")&&!d.value.includes("prettier-ignore-end")},a=n.getParentNode(),u=n.getNode();return u&&u.kind!=="classconstant"&&u.comments&&u.comments.length>0&&u.comments.some(o)||u&&u.kind==="constant"&&a&&a.kind==="classconstant"&&a.comments&&a.comments.length>0&&a.comments.some(o)}}},Ws={languages:Pb,printers:Rb,parsers:Db,options:lb,defaultOptions:{tabWidth:4}},wb=Ws.languages,Fb=Ws.printers,Bb=Ws.parsers,Mb=Ws.options,Ub=Ws.defaultOptions;i.default=Ws,i.defaultOptions=Ub,i.languages=wb,i.options=Mb,i.parsers=Bb,i.printers=Fb,Object.defineProperty(i,"__esModule",{value:!0})})});var rv=H((sv,xh)=>{(function(i){if(typeof sv=="object"&&typeof xh<"u")xh.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=i()}})(function(){var i,t,e;return function(){function s(r,h,l){function c(g,b){if(!h[g]){if(!r[g]){var C=typeof require=="function"&&require;if(!b&&C)return C(g,!0);if(f)return f(g,!0);var E=new Error("Cannot find module '"+g+"'");throw E.code="MODULE_NOT_FOUND",E}var O=h[g]={exports:{}};r[g][0].call(O.exports,function(w){var G=r[g][1][w];return c(G||w)},O,O.exports,s,r,h,l)}return h[g].exports}for(var f=typeof require=="function"&&require,m=0;m<l.length;m++)c(l[m]);return c}return s}()({1:[function(s,r,h){let l=s("./utils"),c=function(){"use strict";let f=l.stringToArray,m=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],g=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],b=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],C=["Thousand","Million","Billion","Trillion"];function E(M,W){var U=function(ot,et,Q){var ht="";if(ot<=19)ht=(et?" and ":"")+(Q?g[ot]:m[ot]);else if(ot<100){let Kt=Math.floor(ot/10),pt=ot%10;ht=(et?" and ":"")+b[Kt-2],pt>0?ht+="-"+U(pt,!1,Q):Q&&(ht=ht.substring(0,ht.length-1)+"ieth")}else if(ot<1e3){let Kt=Math.floor(ot/100),pt=ot%100;ht=(et?", ":"")+m[Kt]+" Hundred",pt>0?ht+=U(pt,!0,Q):Q&&(ht+="th")}else{var xt=Math.floor(Math.log10(ot)/3);xt>C.length&&(xt=C.length);let Kt=Math.pow(10,xt*3),pt=Math.floor(ot/Kt),Nt=ot-pt*Kt;ht=(et?", ":"")+U(pt,!1,!1)+" "+C[xt-1],Nt>0?ht+=U(Nt,!0,Q):Q&&(ht+="th")}return ht},J=U(M,!1,W);return J}let O={};m.forEach(function(M,W){O[M.toLowerCase()]=W}),g.forEach(function(M,W){O[M.toLowerCase()]=W}),b.forEach(function(M,W){let U=M.toLowerCase();O[U]=(W+2)*10,O[U.substring(0,M.length-1)+"ieth"]=O[U]}),O.hundredth=100,C.forEach(function(M,W){let U=M.toLowerCase(),J=Math.pow(10,(W+1)*3);O[U]=J,O[U+"th"]=J});function w(M){let U=M.split(/,\s|\sand\s|[\s\\-]/).map(et=>O[et]),J=[0];return U.forEach(et=>{if(et<100){let Q=J.pop();Q>=1e3&&(J.push(Q),Q=0),J.push(Q+et)}else J.push(J.pop()*et)}),J.reduce((et,Q)=>et+Q,0)}let G=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],rt={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function lt(M){for(var W=0;W<G.length;W++){let U=G[W];if(M>=U[0])return U[1]+lt(M-U[0])}return""}function K(M){for(var W=0,U=1,J=M.length-1;J>=0;J--){let ot=M[J],et=rt[ot];et<U?W-=et:(U=et,W+=et)}return W}function z(M,W){for(var U=[],J=W.charCodeAt(0);M>0;)U.unshift(String.fromCharCode((M-1)%26+J)),M=Math.floor((M-1)/26);return U.join("")}function at(M,W){for(var U=W.charCodeAt(0),J=0,ot=0;ot<M.length;ot++)J+=(M.charCodeAt(M.length-ot-1)-U+1)*Math.pow(26,ot);return J}function B(M,W){if(typeof M>"u")return;M=Math.floor(M);let U=Mt(W);return it(M,U)}let q={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},_t={UPPER:"upper",LOWER:"lower",TITLE:"title"};function it(M,W){let U,J=M<0;switch(M=Math.abs(M),W.primary){case q.LETTERS:U=z(M,W.case===_t.UPPER?"A":"a");break;case q.ROMAN:U=lt(M),W.case===_t.UPPER&&(U=U.toUpperCase());break;case q.WORDS:U=E(M,W.ordinal),W.case===_t.UPPER?U=U.toUpperCase():W.case===_t.LOWER&&(U=U.toLowerCase());break;case q.DECIMAL:U=""+M;var ot=W.mandatoryDigits-U.length;if(ot>0){var et=new Array(ot+1).join("0");U=et+U}if(W.zeroCode!==48&&(U=f(U).map(Kt=>String.fromCodePoint(Kt.codePointAt(0)+W.zeroCode-48)).join("")),W.regular){let Kt=Math.floor((U.length-1)/W.groupingSeparators.position);for(let pt=Kt;pt>0;pt--){let Nt=U.length-pt*W.groupingSeparators.position;U=U.substr(0,Nt)+W.groupingSeparators.character+U.substr(Nt)}}else W.groupingSeparators.reverse().forEach(Kt=>{let pt=U.length-Kt.position;U=U.substr(0,pt)+Kt.character+U.substr(pt)});if(W.ordinal){var Q={1:"st",2:"nd",3:"rd"},ht=U[U.length-1],xt=Q[ht];(!xt||U.length>1&&U[U.length-2]==="1")&&(xt="th"),U=U+xt}break;case q.SEQUENCE:throw{code:"D3130",value:W.token}}return J&&(U="-"+U),U}let vt=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Mt(M){let W={type:"integer",primary:q.DECIMAL,case:_t.LOWER,ordinal:!1},U,J,ot=M.lastIndexOf(";");switch(ot===-1?U=M:(U=M.substring(0,ot),J=M.substring(ot+1),J[0]==="o"&&(W.ordinal=!0)),U){case"A":W.case=_t.UPPER;case"a":W.primary=q.LETTERS;break;case"I":W.case=_t.UPPER;case"i":W.primary=q.ROMAN;break;case"W":W.case=_t.UPPER,W.primary=q.WORDS;break;case"Ww":W.case=_t.TITLE,W.primary=q.WORDS;break;case"w":W.primary=q.WORDS;break;default:{let et=null,Q=0,ht=0,xt=[],Kt=0;if(f(U).map(Nt=>Nt.codePointAt(0)).reverse().forEach(Nt=>{let $=!1;for(let $t=0;$t<vt.length;$t++){let Pt=vt[$t];if(Nt>=Pt&&Nt<=Pt+9){if($=!0,Q++,Kt++,et===null)et=Pt;else if(Pt!==et)throw{code:"D3131"};break}}$||(Nt===35?(Kt++,ht++):xt.push({position:Kt,character:String.fromCodePoint(Nt)}))}),Q>0){W.primary=q.DECIMAL,W.zeroCode=et,W.mandatoryDigits=Q,W.optionalDigits=ht;let $=function($t){if($t.length===0)return 0;let Pt=$t[0].character;for(let $e=1;$e<$t.length;$e++)if($t[$e].character!==Pt)return 0;let ei=$t.map($e=>$e.position),Bi=function($e,ii){return ii===0?$e:Bi(ii,$e%ii)},hi=ei.reduce(Bi);for(let $e=1;$e<=ei.length;$e++)if(ei.indexOf($e*hi)===-1)return 0;return hi}(xt);$>0?(W.regular=!0,W.groupingSeparators={position:$,character:xt[0].character}):(W.regular=!1,W.groupingSeparators=xt)}else W.primary=q.SEQUENCE,W.token=U}}return W}let Wt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Ut(M){var W=[];let U={type:"datetime",parts:W},J=function($,$t){if($t>$){let Pt=M.substring($,$t);Pt=Pt.split("]]").join("]"),W.push({type:"literal",value:Pt})}};for(var ot=0,et=0;et<M.length;){if(M.charAt(et)==="["){if(M.charAt(et+1)==="["){J(ot,et),W.push({type:"literal",value:"["}),et+=2,ot=et;continue}if(J(ot,et),ot=et,et=M.indexOf("]",ot),et===-1)throw{code:"D3135"};let $=M.substring(ot+1,et);$=$.split(/\s+/).join("");var Q={type:"marker",component:$.charAt(0)},ht=$.lastIndexOf(","),xt;if(ht!==-1){let $t=$.substring(ht+1),Pt=$t.indexOf("-"),ei,Bi,hi=function(ii){if(!(typeof ii>"u"||ii==="*"))return parseInt(ii)};Pt===-1?ei=$t:(ei=$t.substring(0,Pt),Bi=$t.substring(Pt+1));let $e={min:hi(ei),max:hi(Bi)};Q.width=$e,xt=$.substring(1,ht)}else xt=$.substring(1);if(xt.length===1)Q.presentation1=xt;else if(xt.length>1){var Kt=xt.charAt(xt.length-1);"atco".indexOf(Kt)!==-1?(Q.presentation2=Kt,Kt==="o"&&(Q.ordinal=!0),Q.presentation1=xt.substring(0,xt.length-1)):Q.presentation1=xt}else Q.presentation1=Wt[Q.component];if(typeof Q.presentation1>"u")throw{code:"D3132",value:Q.component};if(Q.presentation1[0]==="n")Q.names=_t.LOWER;else if(Q.presentation1[0]==="N")Q.presentation1[1]==="n"?Q.names=_t.TITLE:Q.names=_t.UPPER;else if("YMDdFWwXxHhmsf".indexOf(Q.component)!==-1){var pt=Q.presentation1;if(Q.presentation2&&(pt+=";"+Q.presentation2),Q.integerFormat=Mt(pt),Q.width&&Q.width.min!==void 0&&Q.integerFormat.mandatoryDigits<Q.width.min&&(Q.integerFormat.mandatoryDigits=Q.width.min),"YMD".indexOf(Q.component)!==-1)if(Q.n=-1,Q.width&&Q.width.max!==void 0)Q.n=Q.width.max,Q.integerFormat.mandatoryDigits=Q.n;else{var Nt=Q.integerFormat.mandatoryDigits+Q.integerFormat.optionalDigits;Nt>=2&&(Q.n=Nt)}}(Q.component==="Z"||Q.component==="z")&&(Q.integerFormat=Mt(Q.presentation1)),W.push(Q),ot=et+1}et++}return J(ot,et),U}let bt=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],se=["January","February","March","April","May","June","July","August","September","October","November","December"],Qt=1e3*60*60*24,yt=function(M){let W=Date.UTC(M.year,M.month);var U=new Date(W).getUTCDay();return U===0&&(U=7),U>4?W+(8-U)*Qt:W-(U-1)*Qt},ut=function(M,W){return{year:M,month:W,nextMonth:function(){return W===11?ut(M+1,0):ut(M,W+1)},previousMonth:function(){return W===0?ut(M-1,11):ut(M,W-1)},nextYear:function(){return ut(M+1,W)},previousYear:function(){return ut(M-1,W)}}},ce=function(M,W){return(W-M)/(Qt*7)+1},It=(M,W)=>{let U;switch(W){case"Y":U=M.getUTCFullYear();break;case"M":U=M.getUTCMonth()+1;break;case"D":U=M.getUTCDate();break;case"d":{let J=Date.UTC(M.getUTCFullYear(),M.getUTCMonth(),M.getUTCDate()),ot=Date.UTC(M.getUTCFullYear(),0);U=(J-ot)/Qt+1;break}case"F":U=M.getUTCDay(),U===0&&(U=7);break;case"W":{let J=ut(M.getUTCFullYear(),0),ot=yt(J),et=Date.UTC(J.year,M.getUTCMonth(),M.getUTCDate()),Q=ce(ot,et);if(Q>52){let ht=yt(J.nextYear());et>=ht&&(Q=1)}else if(Q<1){let ht=yt(J.previousYear());Q=ce(ht,et)}U=Math.floor(Q);break}case"w":{let J=ut(M.getUTCFullYear(),M.getUTCMonth()),ot=yt(J),et=Date.UTC(J.year,J.month,M.getUTCDate()),Q=ce(ot,et);if(Q>4){let ht=yt(J.nextMonth());et>=ht&&(Q=1)}else if(Q<1){let ht=yt(J.previousMonth());Q=ce(ht,et)}U=Math.floor(Q);break}case"X":{let J=ut(M.getUTCFullYear(),0),ot=yt(J),et=yt(J.nextYear()),Q=M.getTime();Q<ot?U=J.year-1:Q>=et?U=J.year+1:U=J.year;break}case"x":{let J=ut(M.getUTCFullYear(),M.getUTCMonth()),ot=yt(J),et=J.nextMonth(),Q=yt(et),ht=M.getTime();ht<ot?U=J.previousMonth().month+1:ht>=Q?U=et.month+1:U=J.month+1;break}case"H":U=M.getUTCHours();break;case"h":U=M.getUTCHours(),U=U%12,U===0&&(U=12);break;case"P":U=M.getUTCHours()>=12?"pm":"am";break;case"m":U=M.getUTCMinutes();break;case"s":U=M.getUTCSeconds();break;case"f":U=M.getUTCMilliseconds();break;case"Z":case"z":break;case"C":U="ISO";break;case"E":U="ISO";break}return U},oe=null;function de(M,W,U){var J=0,ot=0;if(typeof U<"u"){let pt=parseInt(U);J=Math.floor(pt/100),ot=pt%100}var et=function(pt,Nt){var $=It(pt,Nt.component);if("YMDdFWwXxHhms".indexOf(Nt.component)!==-1)if(Nt.component==="Y"&&Nt.n!==-1&&($=$%Math.pow(10,Nt.n)),Nt.names){if(Nt.component==="M"||Nt.component==="x")$=se[$-1];else if(Nt.component==="F")$=bt[$];else throw{code:"D3133",value:Nt.component};Nt.names===_t.UPPER?$=$.toUpperCase():Nt.names===_t.LOWER&&($=$.toLowerCase()),Nt.width&&$.length>Nt.width.max&&($=$.substring(0,Nt.width.max))}else $=it($,Nt.integerFormat);else if(Nt.component==="f")$=it($,Nt.integerFormat);else if(Nt.component==="Z"||Nt.component==="z"){let $t=J*100+ot;if(Nt.integerFormat.regular)$=it($t,Nt.integerFormat);else{let Pt=Nt.integerFormat.mandatoryDigits;if(Pt===1||Pt===2)$=it(J,Nt.integerFormat),ot!==0&&($+=":"+B(ot,"00"));else if(Pt===3||Pt===4)$=it($t,Nt.integerFormat);else throw{code:"D3134",value:Pt}}$t>=0&&($="+"+$),Nt.component==="z"&&($="GMT"+$),$t===0&&Nt.presentation2==="t"&&($="Z")}return $};let Q;typeof W>"u"?(oe===null&&(oe=Ut("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),Q=oe):Q=Ut(W);let ht=(60*J+ot)*60*1e3,xt=new Date(M+ht),Kt="";return Q.parts.forEach(function(pt){pt.type==="literal"?Kt+=pt.value:Kt+=et(xt,pt)}),Kt}function L(M){var W={};if(M.type==="datetime")W.type="datetime",W.parts=M.parts.map(function(U){var J={};if(U.type==="literal")J.regex=U.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(U.component==="Z"||U.component==="z"){let et;Array.isArray(U.integerFormat.groupingSeparators)||(et=U.integerFormat.groupingSeparators),J.regex="",U.component==="z"&&(J.regex="GMT"),J.regex+="[-+][0-9]+",et&&(J.regex+=et.character+"[0-9]+"),J.parse=function(Q){U.component==="z"&&(Q=Q.substring(3));let ht=0,xt=0;return et?(ht=Number.parseInt(Q.substring(0,Q.indexOf(et.character))),xt=Number.parseInt(Q.substring(Q.indexOf(et.character)+1))):Q.length-1<=2?ht=Number.parseInt(Q):(ht=Number.parseInt(Q.substring(0,3)),xt=Number.parseInt(Q.substring(3))),ht*60+xt}}else if(U.integerFormat)U.integerFormat.n=U.n,J=L(U.integerFormat);else{J.regex="[a-zA-Z]+";var ot={};if(U.component==="M"||U.component==="x")se.forEach(function(et,Q){U.width&&U.width.max?ot[et.substring(0,U.width.max)]=Q+1:ot[et]=Q+1});else if(U.component==="F")bt.forEach(function(et,Q){Q>0&&(U.width&&U.width.max?ot[et.substring(0,U.width.max)]=Q:ot[et]=Q)});else if(U.component==="P")ot={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:U.component};J.parse=function(et){return ot[et]}}return J.component=U.component,J});else{W.type="integer";let U=M.case===_t.UPPER,J;switch(M.n&&M.n>0?M.optionalDigits===0?J=`{${M.n}}`:J=`{${M.n-M.optionalDigits},${M.n}}`:J="+",M.primary){case q.LETTERS:W.regex=U?"[A-Z]+":"[a-z]+",W.parse=function(ot){return at(ot,U?"A":"a")};break;case q.ROMAN:W.regex=U?"[MDCLXVI]+":"[mdclxvi]+",W.parse=function(ot){return K(U?ot:ot.toUpperCase())};break;case q.WORDS:W.regex="(?:"+Object.keys(O).concat("and","[\\-, ]").join("|")+")+",W.parse=function(ot){return w(ot.toLowerCase())};break;case q.DECIMAL:W.regex=`[0-9]${J}`,M.ordinal&&(W.regex+="(?:th|st|nd|rd)"),W.parse=function(ot){let et=ot;return M.ordinal&&(et=ot.substring(0,ot.length-2)),M.regular?et=et.split(",").join(""):M.groupingSeparators.forEach(Q=>{et=et.split(Q.character).join("")}),M.zeroCode!==48&&(et=et.split("").map(Q=>String.fromCodePoint(Q.codePointAt(0)-M.zeroCode+48)).join("")),parseInt(et)};break;case q.SEQUENCE:throw{code:"D3130",value:M.token}}}return W}function D(M,W){if(typeof M>"u")return;let U=Mt(W);return L(U).parse(M)}function X(M,W){let U=Ut(W),J=L(U),ot="^"+J.parts.map(xt=>"("+xt.regex+")").join("")+"$";var Q=new RegExp(ot,"i").exec(M);if(Q!==null){let Pt={};for(let k=1;k<Q.length;k++){let P=J.parts[k-1];P.parse&&(Pt[P.component]=P.parse(Q[k]))}if(Object.getOwnPropertyNames(Pt).length===0)return;let ei=0,Bi=k=>{ei<<=1,ei+=k?1:0},hi=k=>!(~k&ei)&&!!(k&ei);"YXMxWwdD".split("").forEach(k=>Bi(Pt[k]));let ii=!hi(161)&&hi(130),dn=hi(84),kn=!dn&&hi(72);ei=0,"PHhmsf".split("").forEach(k=>Bi(Pt[k]));let gt=!hi(23)&&hi(47),Ve=(ii?"YD":dn?"XxwF":kn?"XWF":"YMD")+(gt?"Phmsf":"Hmsf"),ps=this.environment.timestamp,Mi=!1,Et=!1;if(Ve.split("").forEach(k=>{if(typeof Pt[k]>"u")Mi?(Pt[k]="MDd".indexOf(k)!==-1?1:0,Et=!0):Pt[k]=It(ps,k);else if(Mi=!0,Et)throw{code:"D3136"}}),Pt.M>0?Pt.M-=1:Pt.M=0,ii){let k=Date.UTC(Pt.Y,0),P=(Pt.d-1)*1e3*60*60*24,R=new Date(k+P);Pt.M=R.getUTCMonth(),Pt.D=R.getUTCDate()}if(dn)throw{code:"D3136"};if(kn)throw{code:"D3136"};gt&&(Pt.H=Pt.h===12?0:Pt.h,Pt.P===1&&(Pt.H+=12));var ht=Date.UTC(Pt.Y,Pt.M,Pt.D,Pt.H,Pt.m,Pt.s,Pt.f);return(Pt.Z||Pt.z)&&(ht-=(Pt.Z||Pt.z)*60*1e3),ht}}var mt=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function Ht(M,W){if(!(typeof M>"u"))if(typeof W>"u"){if(!mt.test(M))throw{stack:new Error().stack,code:"D3110",value:M};return Date.parse(M)}else return X.call(this,M,W)}function tt(M,W,U){if(!(typeof M>"u"))return de.call(this,M,W,U)}return{formatInteger:B,parseInteger:D,fromMillis:tt,toMillis:Ht}}();r.exports=c},{"./utils":6}],2:[function(s,r,h){(function(l){(function(){var c=s("./utils");let f=(()=>{"use strict";var m=c.isNumeric,g=c.isArrayOfStrings,b=c.isArrayOfNumbers,C=c.createSequence,E=c.isSequence,O=c.isFunction,w=c.isLambda,G=c.isIterable,rt=c.getFunctionArity,lt=c.isDeepEqual,K=c.stringToArray;function z(p){if(!(typeof p>"u")){var x=0;return p.forEach(function(N){x+=N}),x}}function at(p){return typeof p>"u"?0:p.length}function B(p){if(!(typeof p>"u"||p.length===0))return Math.max.apply(Math,p)}function q(p){if(!(typeof p>"u"||p.length===0))return Math.min.apply(Math,p)}function _t(p){if(!(typeof p>"u"||p.length===0)){var x=0;return p.forEach(function(N){x+=N}),x/p.length}}function it(p,x=!1){if(!(typeof p>"u")){var N;if(typeof p=="string")N=p;else if(O(p))N="";else{if(typeof p=="number"&&!isFinite(p))throw{code:"D3001",value:p,stack:new Error().stack};var F=x?2:0;Array.isArray(p)&&p.outerWrapper&&(p=p[0]),N=JSON.stringify(p,function(V,j){return typeof j<"u"&&j!==null&&j.toPrecision&&m(j)?Number(j.toPrecision(15)):j&&O(j)?"":j},F)}return N}}function vt(p,x,N){if(!(typeof p>"u")){var F=K(p),V=F.length;if(V+x<0&&(x=0),typeof N<"u"){if(N<=0)return"";var j=x>=0?x+N:V+x+N;return F.slice(x,j).join("")}return F.slice(x).join("")}}function Mt(p,x){if(!(typeof p>"u")){var N=p.indexOf(x);return N>-1?p.substr(0,N):p}}function Wt(p,x){if(!(typeof p>"u")){var N=p.indexOf(x);return N>-1?p.substr(N+x.length):p}}function Ut(p){if(!(typeof p>"u"))return p.toLowerCase()}function bt(p){if(!(typeof p>"u"))return p.toUpperCase()}function se(p){if(!(typeof p>"u"))return K(p).length}function Qt(p){if(!(typeof p>"u")){var x=p.replace(/[ \t\n\r]+/gm," ");return x.charAt(0)===" "&&(x=x.substring(1)),x.charAt(x.length-1)===" "&&(x=x.substring(0,x.length-1)),x}}function yt(p,x,N){if(!(typeof p>"u")){(typeof N>"u"||N.length===0)&&(N=" ");var F,V=Math.abs(x)-se(p);if(V>0){var j=new Array(V+1).join(N);N.length>1&&(j=vt(j,0,V)),x>0?F=p+j:F=j+p}else F=p;return F}}function*ut(p,x){var N=p.apply(this,[x]);if(G(N)&&(N=yield*N),N&&!(typeof N.start=="number"||N.end==="number"||Array.isArray(N.groups)||O(N.next)))throw{code:"T1010",stack:new Error().stack};return N}function*ce(p,x){if(!(typeof p>"u")){var N;if(typeof x=="string")N=p.indexOf(x)!==-1;else{var F=yield*ut(x,p);N=typeof F<"u"}return N}}function*It(p,x,N){if(!(typeof p>"u")){if(N<0)throw{stack:new Error().stack,value:N,code:"D3040",index:3};var F=C();if(typeof N>"u"||N>0){var V=0,j=yield*ut(x,p);if(typeof j<"u")for(;typeof j<"u"&&(typeof N>"u"||V<N);)F.push({match:j.match,index:j.start,groups:j.groups}),j=yield*ut(j.next),V++}return F}}function*oe(p,x,N,F){if(!(typeof p>"u")){var V=this;if(x==="")throw{code:"D3010",stack:new Error().stack,value:x,index:2};if(F<0)throw{code:"D3011",stack:new Error().stack,value:F,index:4};var j;typeof N=="string"?j=function(me){for(var li="",ke=0,Ei=N.indexOf("$",ke);Ei!==-1&&ke<N.length;){li+=N.substring(ke,Ei),ke=Ei+1;var Le=N.charAt(ke);if(Le==="$")li+="$",ke++;else if(Le==="0")li+=me.match,ke++;else{var vi;if(me.groups.length===0?vi=1:vi=Math.floor(Math.log(me.groups.length)*Math.LOG10E)+1,Ei=parseInt(N.substring(ke,ke+vi),10),vi>1&&Ei>me.groups.length&&(Ei=parseInt(N.substring(ke,ke+vi-1),10)),isNaN(Ei))li+="$";else{if(me.groups.length>0){var jn=me.groups[Ei-1];typeof jn<"u"&&(li+=jn)}ke+=Ei.toString().length}}Ei=N.indexOf("$",ke)}return li+=N.substring(ke),li}:j=N;var ct="",Dt=0;if(typeof F>"u"||F>0){var jt=0;if(typeof x=="string"){for(var ee=p.indexOf(x,Dt);ee!==-1&&(typeof F>"u"||jt<F);)ct+=p.substring(Dt,ee),ct+=N,Dt=ee+x.length,jt++,ee=p.indexOf(x,Dt);ct+=p.substring(Dt)}else{var fe=yield*ut(x,p);if(typeof fe<"u"){for(;typeof fe<"u"&&(typeof F>"u"||jt<F);){ct+=p.substring(Dt,fe.start);var pe=j.apply(V,[fe]);if(G(pe)&&(pe=yield*pe),typeof pe=="string")ct+=pe;else throw{code:"D3012",stack:new Error().stack,value:pe};Dt=fe.start+fe.match.length,jt++,fe=yield*ut(fe.next)}ct+=p.substring(Dt)}else ct=p}}else ct=p;return ct}}function de(p){if(!(typeof p>"u")){var x=typeof window<"u"?window.btoa:function(N){return new l.Buffer.from(N,"binary").toString("base64")};return x(p)}}function L(p){if(!(typeof p>"u")){var x=typeof window<"u"?window.atob:function(N){return new l.Buffer.from(N,"base64").toString("binary")};return x(p)}}function D(p){if(!(typeof p>"u")){var x;try{x=encodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrlComponent"}}return x}}function X(p){if(!(typeof p>"u")){var x;try{x=encodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrl"}}return x}}function mt(p){if(!(typeof p>"u")){var x;try{x=decodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrlComponent"}}return x}}function Ht(p){if(!(typeof p>"u")){var x;try{x=decodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrl"}}return x}}function*tt(p,x,N){if(!(typeof p>"u")){if(N<0)throw{code:"D3020",stack:new Error().stack,value:N,index:3};var F=[];if(typeof N>"u"||N>0)if(typeof x=="string")F=p.split(x,N);else{var V=0,j=yield*ut(x,p);if(typeof j<"u"){for(var ct=0;typeof j<"u"&&(typeof N>"u"||V<N);)F.push(p.substring(ct,j.start)),ct=j.end,j=yield*ut(j.next),V++;(typeof N>"u"||V<N)&&F.push(p.substring(ct))}else F.push(p)}return F}}function M(p,x){if(!(typeof p>"u"))return typeof x>"u"&&(x=""),p.join(x)}function W(p,x,N){if(!(typeof p>"u")){var F={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},V=F;typeof N<"u"&&Object.keys(N).forEach(function(Gt){V[Gt]=N[Gt]});for(var j=[],ct=V["zero-digit"].charCodeAt(0),Dt=ct;Dt<ct+10;Dt++)j.push(String.fromCharCode(Dt));var jt=j.concat([V["decimal-separator"],V["exponent-separator"],V["grouping-separator"],V.digit,V["pattern-separator"]]),ee=x.split(V["pattern-separator"]);if(ee.length>2)throw{code:"D3080",stack:new Error().stack};var fe=function(Gt){var Pe=function(){for(var Je,yi=0;yi<Gt.length;yi++)if(Je=Gt.charAt(yi),jt.indexOf(Je)!==-1&&Je!==V["exponent-separator"])return Gt.substring(0,yi)}(),pi=function(){for(var Je,yi=Gt.length-1;yi>=0;yi--)if(Je=Gt.charAt(yi),jt.indexOf(Je)!==-1&&Je!==V["exponent-separator"])return Gt.substring(yi+1)}(),be=Gt.substring(Pe.length,Gt.length-pi.length),ui,En,gi,Mn,Oi=Gt.indexOf(V["exponent-separator"],Pe.length);Oi===-1||Oi>Gt.length-pi.length?(ui=be,En=void 0):(ui=be.substring(0,Oi),En=be.substring(Oi+1));var Ui=ui.indexOf(V["decimal-separator"]);return Ui===-1?(gi=ui,Mn=pi):(gi=ui.substring(0,Ui),Mn=ui.substring(Ui+1)),{prefix:Pe,suffix:pi,activePart:be,mantissaPart:ui,exponentPart:En,integerPart:gi,fractionalPart:Mn,subpicture:Gt}},pe=function(Gt){var Pe,pi,be=Gt.subpicture,ui=be.indexOf(V["decimal-separator"]);ui!==be.lastIndexOf(V["decimal-separator"])&&(Pe="D3081"),be.indexOf(V.percent)!==be.lastIndexOf(V.percent)&&(Pe="D3082"),be.indexOf(V["per-mille"])!==be.lastIndexOf(V["per-mille"])&&(Pe="D3083"),be.indexOf(V.percent)!==-1&&be.indexOf(V["per-mille"])!==-1&&(Pe="D3084");var En=!1;for(pi=0;pi<Gt.mantissaPart.length;pi++){var gi=Gt.mantissaPart.charAt(pi);if(j.indexOf(gi)!==-1||gi===V.digit){En=!0;break}}En||(Pe="D3085");var Mn=Gt.activePart.split("").map(function(Je){return jt.indexOf(Je)===-1?"p":"a"}).join("");Mn.indexOf("p")!==-1&&(Pe="D3086"),ui!==-1?(be.charAt(ui-1)===V["grouping-separator"]||be.charAt(ui+1)===V["grouping-separator"])&&(Pe="D3087"):Gt.integerPart.charAt(Gt.integerPart.length-1)===V["grouping-separator"]&&(Pe="D3088"),be.indexOf(V["grouping-separator"]+V["grouping-separator"])!==-1&&(Pe="D3089");var Oi=Gt.integerPart.indexOf(V.digit);Oi!==-1&&Gt.integerPart.substring(0,Oi).split("").filter(function(Je){return j.indexOf(Je)>-1}).length>0&&(Pe="D3090"),Oi=Gt.fractionalPart.lastIndexOf(V.digit),Oi!==-1&&Gt.fractionalPart.substring(Oi).split("").filter(function(Je){return j.indexOf(Je)>-1}).length>0&&(Pe="D3091");var Ui=typeof Gt.exponentPart=="string";if(Ui&&Gt.exponentPart.length>0&&(be.indexOf(V.percent)!==-1||be.indexOf(V["per-mille"])!==-1)&&(Pe="D3092"),Ui&&(Gt.exponentPart.length===0||Gt.exponentPart.split("").filter(function(Je){return j.indexOf(Je)===-1}).length>0)&&(Pe="D3093"),Pe)throw{code:Pe,stack:new Error().stack}},me=function(Gt){var Pe=function(ni,vn){for(var ms=[],rn=ni.indexOf(V["grouping-separator"]);rn!==-1;){var ws=(vn?ni.substring(0,rn):ni.substring(rn)).split("").filter(function(Un){return j.indexOf(Un)!==-1||Un===V.digit}).length;ms.push(ws),rn=Gt.integerPart.indexOf(V["grouping-separator"],rn+1)}return ms},pi=Pe(Gt.integerPart),be=function(ni){if(ni.length===0)return 0;for(var vn=function(ws,Un){return Un===0?ws:vn(Un,ws%Un)},ms=ni.reduce(vn),rn=1;rn<=ni.length;rn++)if(ni.indexOf(rn*ms)===-1)return 0;return ms},ui=be(pi),En=Pe(Gt.fractionalPart,!0),gi=Gt.integerPart.split("").filter(function(ni){return j.indexOf(ni)!==-1}).length,Mn=gi,Oi=Gt.fractionalPart.split(""),Ui=Oi.filter(function(ni){return j.indexOf(ni)!==-1}).length,Je=Oi.filter(function(ni){return j.indexOf(ni)!==-1||ni===V.digit}).length,yi=typeof Gt.exponentPart=="string";gi===0&&Je===0&&(yi?(Ui=1,Je=1):gi=1),yi&&gi===0&&Gt.integerPart.indexOf(V.digit)!==-1&&(gi=1),gi===0&&Ui===0&&(Ui=1);var Fr=0;return yi&&(Fr=Gt.exponentPart.split("").filter(function(ni){return j.indexOf(ni)!==-1}).length),{integerPartGroupingPositions:pi,regularGrouping:ui,minimumIntegerPartSize:gi,scalingFactor:Mn,prefix:Gt.prefix,fractionalPartGroupingPositions:En,minimumFactionalPartSize:Ui,maximumFactionalPartSize:Je,minimumExponentSize:Fr,suffix:Gt.suffix,picture:Gt.subpicture}},li=ee.map(fe);li.forEach(pe);var ke=li.map(me),Ei=V["minus-sign"],Le=V["zero-digit"],vi=V["decimal-separator"],jn=V["grouping-separator"];ke.length===1&&(ke.push(JSON.parse(JSON.stringify(ke[0]))),ke[1].prefix=Ei+ke[1].prefix);var Ue;p>=0?Ue=ke[0]:Ue=ke[1];var Fn;Ue.picture.indexOf(V.percent)!==-1?Fn=p*100:Ue.picture.indexOf(V["per-mille"])!==-1?Fn=p*1e3:Fn=p;var xn,Bn;if(Ue.minimumExponentSize===0)xn=Fn;else{var da=Math.pow(10,Ue.scalingFactor),Dr=Math.pow(10,Ue.scalingFactor-1);for(xn=Fn,Bn=0;xn<Dr;)xn*=10,Bn-=1;for(;xn>da;)xn/=10,Bn+=1}var pa=ht(xn,Ue.maximumFactionalPartSize),or=function(Gt,Pe){var pi=Math.abs(Gt).toFixed(Pe);return Le!=="0"&&(pi=pi.split("").map(function(be){return be>="0"&&be<="9"?j[be.charCodeAt(0)-48]:be}).join("")),pi},te=or(pa,Ue.maximumFactionalPartSize),qe=te.indexOf(".");for(qe===-1?te=te+vi:te=te.replace(".",vi);te.charAt(0)===Le;)te=te.substring(1);for(;te.charAt(te.length-1)===Le;)te=te.substring(0,te.length-1);qe=te.indexOf(vi);var zn=Ue.minimumIntegerPartSize-qe,Rr=Ue.minimumFactionalPartSize-(te.length-qe-1);if(te=(zn>0?new Array(zn+1).join(Le):"")+te,te=te+(Rr>0?new Array(Rr+1).join(Le):""),qe=te.indexOf(vi),Ue.regularGrouping>0)for(var wr=Math.floor((qe-1)/Ue.regularGrouping),Rs=1;Rs<=wr;Rs++)te=[te.slice(0,qe-Rs*Ue.regularGrouping),jn,te.slice(qe-Rs*Ue.regularGrouping)].join("");else Ue.integerPartGroupingPositions.forEach(function(Gt){te=[te.slice(0,qe-Gt),jn,te.slice(qe-Gt)].join(""),qe++});if(qe=te.indexOf(vi),Ue.fractionalPartGroupingPositions.forEach(function(Gt){te=[te.slice(0,Gt+qe+1),jn,te.slice(Gt+qe+1)].join("")}),qe=te.indexOf(vi),(Ue.picture.indexOf(vi)===-1||qe===te.length-1)&&(te=te.substring(0,te.length-1)),typeof Bn<"u"){var _s=or(Bn,0);zn=Ue.minimumExponentSize-_s.length,zn>0&&(_s=new Array(zn+1).join(Le)+_s),te=te+V["exponent-separator"]+(Bn<0?Ei:"")+_s}return te=Ue.prefix+te+Ue.suffix,te}}function U(p,x){if(!(typeof p>"u")){if(p=ht(p),typeof x>"u"?x=10:x=ht(x),x<2||x>36)throw{code:"D3100",stack:new Error().stack,value:x};var N=p.toString(x);return N}}function J(p){var x;if(!(typeof p>"u")){if(typeof p=="number")x=p;else if(typeof p=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(p)&&!isNaN(parseFloat(p))&&isFinite(p))x=parseFloat(p);else if(p===!0)x=1;else if(p===!1)x=0;else throw{code:"D3030",value:p,stack:new Error().stack,index:1};return x}}function ot(p){var x;if(!(typeof p>"u"))return x=Math.abs(p),x}function et(p){var x;if(!(typeof p>"u"))return x=Math.floor(p),x}function Q(p){var x;if(!(typeof p>"u"))return x=Math.ceil(p),x}function ht(p,x){var N;if(!(typeof p>"u")){if(x){var F=p.toString().split("e");p=+(F[0]+"e"+(F[1]?+F[1]+x:x))}N=Math.round(p);var V=N-p;return Math.abs(V)===.5&&Math.abs(N%2)===1&&(N=N-1),x&&(F=N.toString().split("e"),N=+(F[0]+"e"+(F[1]?+F[1]-x:-x))),Object.is(N,-0)&&(N=0),N}}function xt(p){var x;if(!(typeof p>"u")){if(p<0)throw{stack:new Error().stack,code:"D3060",index:1,value:p};return x=Math.sqrt(p),x}}function Kt(p,x){var N;if(!(typeof p>"u")){if(N=Math.pow(p,x),!isFinite(N))throw{stack:new Error().stack,code:"D3061",index:1,value:p,exp:x};return N}}function pt(){return Math.random()}function Nt(p){if(!(typeof p>"u")){var x=!1;if(Array.isArray(p)){if(p.length===1)x=Nt(p[0]);else if(p.length>1){var N=p.filter(function(F){return Nt(F)});x=N.length>0}}else typeof p=="string"?p.length>0&&(x=!0):m(p)?p!==0&&(x=!0):p!==null&&typeof p=="object"?Object.keys(p).length>0&&(x=!0):typeof p=="boolean"&&p===!0&&(x=!0);return x}}function $(p){if(!(typeof p>"u"))return!Nt(p)}function $t(p,x,N,F){var V=[x],j=rt(p);return j>=2&&V.push(N),j>=3&&V.push(F),V}function*Pt(p,x){if(!(typeof p>"u")){for(var N=C(),F=0;F<p.length;F++){var V=$t(x,p[F],F,p),j=yield*x.apply(this,V);typeof j<"u"&&N.push(j)}return N}}function*ei(p,x){if(!(typeof p>"u")){for(var N=C(),F=0;F<p.length;F++){var V=p[F],j=$t(x,V,F,p),ct=yield*x.apply(this,j);Nt(ct)&&N.push(V)}return N}}function*Bi(p,x){if(!(typeof p>"u")){for(var N=!1,F,V=0;V<p.length;V++){var j=p[V],ct=!0;if(typeof x<"u"){var Dt=$t(x,j,V,p),jt=yield*x.apply(this,Dt);ct=Nt(jt)}if(ct)if(!N)F=j,N=!0;else throw{stack:new Error().stack,code:"D3138",index:V}}if(!N)throw{stack:new Error().stack,code:"D3139"};return F}}function hi(){for(var p=[],x=Array.prototype.slice.call(arguments),N=Math.min.apply(Math,x.map(function(j){return Array.isArray(j)?j.length:0})),F=0;F<N;F++){var V=x.map(j=>j[F]);p.push(V)}return p}function*$e(p,x,N){if(!(typeof p>"u")){var F,V=rt(x);if(V<2)throw{stack:new Error().stack,code:"D3050",index:1};var j;for(typeof N>"u"&&p.length>0?(F=p[0],j=1):(F=N,j=0);j<p.length;){var ct=[F,p[j]];V>=3&&ct.push(j),V>=4&&ct.push(p),F=yield*x.apply(this,ct),j++}return F}}function ii(p){var x=C();if(Array.isArray(p)){var N={};p.forEach(function(F){var V=ii(F);V.forEach(function(j){N[j]=!0})}),x=ii(N)}else p!==null&&typeof p=="object"&&!w(p)&&Object.keys(p).forEach(F=>x.push(F));return x}function dn(p,x){var N;if(Array.isArray(p)){N=C();for(var F=0;F<p.length;F++){var V=dn(p[F],x);typeof V<"u"&&(Array.isArray(V)?V.forEach(j=>N.push(j)):N.push(V))}}else p!==null&&typeof p=="object"&&(N=p[x]);return N}function kn(p,x){return typeof p>"u"?x:typeof x>"u"?p:(Array.isArray(p)||(p=C(p)),Array.isArray(x)||(x=[x]),p.concat(x))}function fs(p){return!(typeof p>"u")}function gt(p){var x=C();if(Array.isArray(p))p.forEach(function(V){x=kn(x,gt(V))});else if(p!==null&&typeof p=="object"&&!w(p))for(var N in p){var F={};F[N]=p[N],x.push(F)}else x=p;return x}function Ds(p){if(!(typeof p>"u")){var x={};return p.forEach(function(N){for(var F in N)x[F]=N[F]}),x}}function ds(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var x=p.length,N=new Array(x),F=0;F<x;F++)N[x-F-1]=p[F];return N}}function*Ve(p,x){var N=C();for(var F in p){var V=$t(x,p[F],F,p),j=yield*x.apply(this,V);typeof j<"u"&&N.push(j)}return N}function ps(p){throw{code:"D3137",stack:new Error().stack,message:p||"$error() function evaluated"}}function Mi(p,x){if(!p)throw{code:"D3141",stack:new Error().stack,message:x||"$assert() statement failed"}}function Et(p){if(p!==void 0)return p===null?"null":m(p)?"number":typeof p=="string"?"string":typeof p=="boolean"?"boolean":Array.isArray(p)?"array":O(p)?"function":"object"}function*k(p,x){if(!(typeof p>"u")){if(p.length<=1)return p;var N;if(typeof x>"u"){if(!b(p)&&!g(p))throw{stack:new Error().stack,code:"D3070",index:1};N=function*(ct,Dt){return ct>Dt}}else N=x;var F=function*(ct,Dt){var jt=function*(fe,pe,me){pe.length===0?Array.prototype.push.apply(fe,me):me.length===0?Array.prototype.push.apply(fe,pe):(yield*N(pe[0],me[0]))?(fe.push(me[0]),yield*jt(fe,pe,me.slice(1))):(fe.push(pe[0]),yield*jt(fe,pe.slice(1),me))},ee=[];return yield*jt(ee,ct,Dt),ee},V=function*(ct){if(!Array.isArray(ct)||ct.length<=1)return ct;var Dt=Math.floor(ct.length/2),jt=ct.slice(0,Dt),ee=ct.slice(Dt);return jt=yield*V(jt),ee=yield*V(ee),yield*F(jt,ee)},j=yield*V(p);return j}}function P(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var x=new Array(p.length),N=0;N<p.length;N++){var F=Math.floor(Math.random()*(N+1));N!==F&&(x[N]=x[F]),x[F]=p[N]}return x}}function R(p){if(!(typeof p>"u")){if(!Array.isArray(p)||p.length<=1)return p;for(var x=E(p)?C():[],N=0;N<p.length;N++){for(var F=p[N],V=!1,j=0;j<x.length;j++)if(lt(F,x[j])){V=!0;break}V||x.push(F)}return x}}function*S(p,x){var N={};for(var F in p){var V=p[F],j=$t(x,V,F,p),ct=yield*x.apply(this,j);Nt(ct)&&(N[F]=V)}return Object.keys(N).length===0&&(N=void 0),N}return{sum:z,count:at,max:B,min:q,average:_t,string:it,substring:vt,substringBefore:Mt,substringAfter:Wt,lowercase:Ut,uppercase:bt,length:se,trim:Qt,pad:yt,match:It,contains:ce,replace:oe,split:tt,join:M,formatNumber:W,formatBase:U,number:J,floor:et,ceil:Q,round:ht,abs:ot,sqrt:xt,power:Kt,random:pt,boolean:Nt,not:$,map:Pt,zip:hi,filter:ei,single:Bi,foldLeft:$e,sift:S,keys:ii,lookup:dn,append:kn,exists:fs,spread:gt,merge:Ds,reverse:ds,each:Ve,error:ps,assert:Mi,type:Et,sort:k,shuffle:P,distinct:R,base64encode:de,base64decode:L,encodeUrlComponent:D,encodeUrl:X,decodeUrlComponent:mt,decodeUrl:Ht}})();r.exports=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(s,r,h){var l=s("./datetime"),c=s("./functions"),f=s("./utils"),m=s("./parser"),g=s("./signature"),b=function(){"use strict";var C=f.isNumeric,E=f.isArrayOfStrings,O=f.isArrayOfNumbers,w=f.createSequence,G=f.isSequence,rt=f.isFunction,lt=f.isLambda,K=f.isIterable,z=f.getFunctionArity,at=f.isDeepEqual,B=Ve(null);function*q(k,P,R){var S,p=R.lookup("__evaluate_entry");switch(p&&p(k,P,R),k.type){case"path":S=yield*_t(k,P,R);break;case"binary":S=yield*bt(k,P,R);break;case"unary":S=yield*se(k,P,R);break;case"name":S=Qt(k,P,R);break;case"string":case"number":case"value":S=yt(k,P,R);break;case"wildcard":S=ut(k,P,R);break;case"descendant":S=It(k,P,R);break;case"parent":S=R.lookup(k.slot.label);break;case"condition":S=yield*ot(k,P,R);break;case"block":S=yield*et(k,P,R);break;case"bind":S=yield*J(k,P,R);break;case"regex":S=Q(k,P,R);break;case"function":S=yield*$(k,P,R);break;case"variable":S=ht(k,P,R);break;case"lambda":S=ei(k,P,R);break;case"partial":S=yield*Bi(k,P,R);break;case"apply":S=yield*Nt(k,P,R);break;case"transform":S=Kt(k,P,R);break}if(R.async&&(typeof S>"u"||S===null||typeof S.then!="function")&&(S=Promise.resolve(S)),R.async&&typeof S.then=="function"&&k.nextFunction&&typeof S[k.nextFunction]=="function"||(S=yield S),Object.prototype.hasOwnProperty.call(k,"predicate"))for(var x=0;x<k.predicate.length;x++)S=yield*Ut(k.predicate[x].expr,S,R);k.type!=="path"&&Object.prototype.hasOwnProperty.call(k,"group")&&(S=yield*M(k.group,S,R));var N=R.lookup("__evaluate_exit");return N&&N(k,P,R,S),S&&G(S)&&!S.tupleStream&&(k.keepArray&&(S.keepSingleton=!0),S.length===0?S=void 0:S.length===1&&(S=S.keepSingleton?S:S[0])),S}function*_t(k,P,R){var S;Array.isArray(P)&&k.steps[0].type!=="variable"?S=P:S=w(P);for(var p,x=!1,N=void 0,F=0;F<k.steps.length;F++){var V=k.steps[F];if(V.tuple&&(x=!0),F===0&&V.consarray?p=yield*q(V,S,R):x?N=yield*Wt(V,S,N,R):p=yield*vt(V,S,R,F===k.steps.length-1),!x&&(typeof p>"u"||p.length===0))break;typeof V.focus>"u"&&(S=p)}if(x)if(k.tuple)p=N;else for(p=w(),F=0;F<N.length;F++)p.push(N[F]["@"]);return k.keepSingletonArray&&(Array.isArray(p)&&p.cons&&!p.sequence&&(p=w(p)),p.keepSingleton=!0),k.hasOwnProperty("group")&&(p=yield*M(k.group,x?N:p,R)),p}function it(k,P){var R=Ve(k);for(let S in P)R.bind(S,P[S]);return R}function*vt(k,P,R,S){var p;if(k.type==="sort")return p=yield*xt(k,P,R),k.stages&&(p=yield*Mt(k.stages,p,R)),p;p=w();for(var x=0;x<P.length;x++){var N=yield*q(k,P[x],R);if(k.stages)for(var F=0;F<k.stages.length;F++)N=yield*Ut(k.stages[F].expr,N,R);typeof N<"u"&&p.push(N)}var V=w();return S&&p.length===1&&Array.isArray(p[0])&&!G(p[0])?V=p[0]:p.forEach(function(j){!Array.isArray(j)||j.cons?V.push(j):j.forEach(ct=>V.push(ct))}),V}function*Mt(k,P,R){for(var S=P,p=0;p<k.length;p++){var x=k[p];switch(x.type){case"filter":S=yield*Ut(x.expr,S,R);break;case"index":for(var N=0;N<S.length;N++){var F=S[N];F[x.value]=N}break}}return S}function*Wt(k,P,R,S){var p;if(k.type==="sort"){if(R)p=yield*xt(k,R,S);else{var x=yield*xt(k,P,S);p=w(),p.tupleStream=!0;for(var N=0;N<x.length;N++){var F={"@":x[N]};F[k.index]=N,p.push(F)}}return k.stages&&(p=yield*Mt(k.stages,p,S)),p}p=w(),p.tupleStream=!0;var V=S;R===void 0&&(R=P.map(jt=>({"@":jt})));for(var j=0;j<R.length;j++){V=it(S,R[j]);var ct=yield*q(k,R[j]["@"],V);if(typeof ct<"u"){Array.isArray(ct)||(ct=[ct]);for(var Dt=0;Dt<ct.length;Dt++)F={},Object.assign(F,R[j]),ct.tupleStream?Object.assign(F,ct[Dt]):(k.focus?(F[k.focus]=ct[Dt],F["@"]=R[j]["@"]):F["@"]=ct[Dt],k.index&&(F[k.index]=Dt),k.ancestor&&(F[k.ancestor.label]=R[j]["@"])),p.push(F)}}return k.stages&&(p=yield*Mt(k.stages,p,S)),p}function*Ut(k,P,R){var S=w();if(P&&P.tupleStream&&(S.tupleStream=!0),Array.isArray(P)||(P=w(P)),k.type==="number"){var p=Math.floor(k.value);p<0&&(p=P.length+p);var x=P[p];typeof x<"u"&&(Array.isArray(x)?S=x:S.push(x))}else for(p=0;p<P.length;p++){var x=P[p],N=x,F=R;P.tupleStream&&(N=x["@"],F=it(R,x));var V=yield*q(k,N,F);C(V)&&(V=[V]),O(V)?V.forEach(function(ct){var Dt=Math.floor(ct);Dt<0&&(Dt=P.length+Dt),Dt===p&&S.push(x)}):c.boolean(V)&&S.push(x)}return S}function*bt(k,P,R){var S,p=yield*q(k.lhs,P,R),x=k.value,N=function*(){return yield*q(k.rhs,P,R)};if(x==="and"||x==="or")try{return yield*mt(p,N,x)}catch(V){throw V.position=k.position,V.token=x,V}var F=yield*N();try{switch(x){case"+":case"-":case"*":case"/":case"%":S=de(p,F,x);break;case"=":case"!=":S=L(p,F,x);break;case"<":case"<=":case">":case">=":S=D(p,F,x);break;case"&":S=tt(p,F);break;case"..":S=U(p,F);break;case"in":S=X(p,F);break}}catch(V){throw V.position=k.position,V.token=x,V}return S}function*se(k,P,R){var S;switch(k.value){case"-":if(S=yield*q(k.expression,P,R),typeof S>"u")S=void 0;else if(C(S))S=-S;else throw{code:"D1002",stack:new Error().stack,position:k.position,token:k.value,value:S};break;case"[":S=[];for(var p=0;p<k.expressions.length;p++){var x=k.expressions[p],N=yield*q(x,P,R);typeof N<"u"&&(x.value==="["?S.push(N):S=c.append(S,N))}k.consarray&&Object.defineProperty(S,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":S=yield*M(k,P,R);break}return S}function Qt(k,P,R){return c.lookup(P,k.value)}function yt(k){return k.value}function ut(k,P){var R=w();return Array.isArray(P)&&P.outerWrapper&&P.length>0&&(P=P[0]),P!==null&&typeof P=="object"&&Object.keys(P).forEach(function(S){var p=P[S];Array.isArray(p)?(p=ce(p),R=c.append(R,p)):R.push(p)}),R}function ce(k,P){return typeof P>"u"&&(P=[]),Array.isArray(k)?k.forEach(function(R){ce(R,P)}):P.push(k),P}function It(k,P){var R,S=w();return typeof P<"u"&&(oe(P,S),S.length===1?R=S[0]:R=S),R}function oe(k,P){Array.isArray(k)||P.push(k),Array.isArray(k)?k.forEach(function(R){oe(R,P)}):k!==null&&typeof k=="object"&&Object.keys(k).forEach(function(R){oe(k[R],P)})}function de(k,P,R){var S;if(typeof k<"u"&&!C(k))throw{code:"T2001",stack:new Error().stack,value:k};if(typeof P<"u"&&!C(P))throw{code:"T2002",stack:new Error().stack,value:P};if(typeof k>"u"||typeof P>"u")return S;switch(R){case"+":S=k+P;break;case"-":S=k-P;break;case"*":S=k*P;break;case"/":S=k/P;break;case"%":S=k%P;break}return S}function L(k,P,R){var S,p=typeof k,x=typeof P;if(p==="undefined"||x==="undefined")return!1;switch(R){case"=":S=at(k,P);break;case"!=":S=!at(k,P);break}return S}function D(k,P,R){var S,p=typeof k,x=typeof P,N=p==="undefined"||p==="string"||p==="number",F=x==="undefined"||x==="string"||x==="number";if(!N||!F)throw{code:"T2010",stack:new Error().stack,value:p==="string"||p==="number"?P:k};if(!(p==="undefined"||x==="undefined")){if(p!==x)throw{code:"T2009",stack:new Error().stack,value:k,value2:P};switch(R){case"<":S=k<P;break;case"<=":S=k<=P;break;case">":S=k>P;break;case">=":S=k>=P;break}return S}}function X(k,P){var R=!1;if(typeof k>"u"||typeof P>"u")return!1;Array.isArray(P)||(P=[P]);for(var S=0;S<P.length;S++)if(P[S]===k){R=!0;break}return R}function*mt(k,P,R){var S,p=Ht(k);switch(R){case"and":S=p&&Ht(yield*P());break;case"or":S=p||Ht(yield*P());break}return S}function Ht(k){var P=c.boolean(k);return typeof P>"u"?!1:P}function tt(k,P){var R,S="",p="";return typeof k<"u"&&(S=c.string(k)),typeof P<"u"&&(p=c.string(P)),R=S.concat(p),R}function*M(k,P,R){var S={},p={},x=!!(P&&P.tupleStream);Array.isArray(P)||(P=w(P)),P.length===0&&P.push(void 0);for(var N=0;N<P.length;N++)for(var F=P[N],V=x?it(R,F):R,j=0;j<k.lhs.length;j++){var ct=k.lhs[j],Dt=yield*q(ct[0],x?F["@"]:F,V);if(typeof Dt!="string"&&Dt!==void 0)throw{code:"T1003",stack:new Error().stack,position:k.position,value:Dt};if(Dt!==void 0){var jt={data:F,exprIndex:j};if(p.hasOwnProperty(Dt)){if(p[Dt].exprIndex!==j)throw{code:"D1009",stack:new Error().stack,position:k.position,value:Dt};p[Dt].data=c.append(p[Dt].data,F)}else p[Dt]=jt}}for(Dt in p){jt=p[Dt];var ee=jt.data,V=R;if(x){var fe=W(jt.data);ee=fe["@"],delete fe["@"],V=it(R,fe)}var pe=yield*q(k.lhs[jt.exprIndex][1],ee,V);typeof pe<"u"&&(S[Dt]=pe)}return S}function W(k){if(!Array.isArray(k))return k;var P={};Object.assign(P,k[0]);for(var R=1;R<k.length;R++)for(let S in k[R])P[S]=c.append(P[S],k[R][S]);return P}function U(k,P){var R;if(typeof k<"u"&&!Number.isInteger(k))throw{code:"T2003",stack:new Error().stack,value:k};if(typeof P<"u"&&!Number.isInteger(P))throw{code:"T2004",stack:new Error().stack,value:P};if(typeof k>"u"||typeof P>"u"||k>P)return R;var S=P-k+1;if(S>1e7)throw{code:"D2014",stack:new Error().stack,value:S};R=new Array(S);for(var p=k,x=0;p<=P;p++,x++)R[x]=p;return R.sequence=!0,R}function*J(k,P,R){var S=yield*q(k.rhs,P,R);return R.bind(k.lhs.value,S),S}function*ot(k,P,R){var S,p=yield*q(k.condition,P,R);return c.boolean(p)?S=yield*q(k.then,P,R):typeof k.else<"u"&&(S=yield*q(k.else,P,R)),S}function*et(k,P,R){for(var S,p=Ve(R),x=0;x<k.expressions.length;x++)S=yield*q(k.expressions[x],P,p);return S}function Q(k){var P=new Et.RegexEngine(k.value),R=function(S,p){var x;P.lastIndex=p||0;var N=P.exec(S);if(N!==null){if(x={match:N[0],start:N.index,end:N.index+N[0].length,groups:[]},N.length>1)for(var F=1;F<N.length;F++)x.groups.push(N[F]);x.next=function(){if(!(P.lastIndex>=S.length)){var V=R(S,P.lastIndex);if(V&&V.match==="")throw{code:"D1004",stack:new Error().stack,position:k.position,value:k.value.source};return V}}}return x};return R}function ht(k,P,R){var S;return k.value===""?S=P&&P.outerWrapper?P[0]:P:S=R.lookup(k.value),S}function*xt(k,P,R){var S,p=P,x=!!P.tupleStream,N=function*(V,j){for(var ct=0,Dt=0;ct===0&&Dt<k.terms.length;Dt++){var jt=k.terms[Dt],ee=V,fe=R;x&&(ee=V["@"],fe=it(R,V));var pe=yield*q(jt.expression,ee,fe);ee=j,fe=R,x&&(ee=j["@"],fe=it(R,j));var me=yield*q(jt.expression,ee,fe),li=typeof pe,ke=typeof me;if(li==="undefined"){ct=ke==="undefined"?0:1;continue}if(ke==="undefined"){ct=-1;continue}if(!(li==="string"||li==="number")||!(ke==="string"||ke==="number"))throw{code:"T2008",stack:new Error().stack,position:k.position,value:li==="string"||li==="number"?me:pe};if(li!==ke)throw{code:"T2007",stack:new Error().stack,position:k.position,value:pe,value2:me};pe!==me&&(pe<me?ct=-1:ct=1,jt.descending===!0&&(ct=-ct))}return ct===1},F={environment:R,input:P};return S=yield*c.sort.apply(F,[p,N]),S}function Kt(k,P,R){var S=function*(p){if(!(typeof p>"u")){var x=R.lookup("clone");if(!rt(x))throw{code:"T2013",stack:new Error().stack,position:k.position};var N=yield*$t(x,[p],null,R),F=yield*q(k.pattern,N,R);if(typeof F<"u"){Array.isArray(F)||(F=[F]);for(var V=0;V<F.length;V++){var j=F[V],ct=yield*q(k.update,j,R),Dt=typeof ct;if(Dt!=="undefined"){if(Dt!=="object"||ct===null||Array.isArray(ct))throw{code:"T2011",stack:new Error().stack,position:k.update.position,value:ct};for(var jt in ct)j[jt]=ct[jt]}if(typeof k.delete<"u"){var ee=yield*q(k.delete,j,R);if(typeof ee<"u"){var fe=ee;if(Array.isArray(ee)||(ee=[ee]),!E(ee))throw{code:"T2012",stack:new Error().stack,position:k.delete.position,value:fe};for(var pe=0;pe<ee.length;pe++)typeof j=="object"&&j!==null&&delete j[ee[pe]]}}}}return N}};return gt(S,"<(oa):o>")}var pt=m("function($f, $g) { function($x){ $g($f($x)) } }");function*Nt(k,P,R){var S,p=yield*q(k.lhs,P,R);if(k.rhs.type==="function")S=yield*$(k.rhs,P,R,{context:p});else{var x=yield*q(k.rhs,P,R);if(!rt(x))throw{code:"T2006",stack:new Error().stack,position:k.position,value:x};if(rt(p)){var N=yield*q(pt,null,R);S=yield*$t(N,[p,x],null,R)}else S=yield*$t(x,[p],null,R)}return S}function*$(k,P,R,S){var p,x=yield*q(k.procedure,P,R);if(typeof x>"u"&&k.procedure.type==="path"&&R.lookup(k.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:k.position,token:k.procedure.steps[0].value};var N=[];typeof S<"u"&&N.push(S.context);for(var F=0;F<k.arguments.length;F++){let j=yield*q(k.arguments[F],P,R);if(rt(j)){let ct=function*(...Dt){return yield*$t(j,Dt,null,R)};ct.arity=z(j),N.push(ct)}else N.push(j)}var V=k.procedure.type==="path"?k.procedure.steps[0].value:k.procedure.value;try{typeof x=="object"&&(x.token=V,x.position=k.position),p=yield*$t(x,N,P,R)}catch(j){throw j.position||(j.position=k.position),j.token||(j.token=V),j}return p}function*$t(k,P,R,S){var p;for(p=yield*Pt(k,P,R,S);lt(p)&&p.thunk===!0;){var x=yield*q(p.body.procedure,p.input,p.environment);p.body.procedure.type==="variable"&&(x.token=p.body.procedure.value),x.position=p.body.procedure.position;for(var N=[],F=0;F<p.body.arguments.length;F++)N.push(yield*q(p.body.arguments[F],p.input,p.environment));p=yield*Pt(x,N,R,S)}return p}function*Pt(k,P,R,S){var p;try{var x=P;if(k&&(x=hi(k.signature,P,R)),lt(k))p=yield*$e(k,x);else if(k&&k._jsonata_function===!0){var N={environment:S,input:R};p=k.implementation.apply(N,x),K(p)&&(p=yield*p)}else if(typeof k=="function")p=k.apply(R,x),K(p)&&(p=yield*p);else throw{code:"T1006",stack:new Error().stack}}catch(F){throw k&&(typeof F.token>"u"&&typeof k.token<"u"&&(F.token=k.token),F.position=k.position),F}return p}function ei(k,P,R){var S={_jsonata_lambda:!0,input:P,environment:R,arguments:k.arguments,signature:k.signature,body:k.body};return k.thunk===!0&&(S.thunk=!0),S.apply=function*(p,x){return yield*$t(S,x,P,p.environment)},S}function*Bi(k,P,R){for(var S,p=[],x=0;x<k.arguments.length;x++){var N=k.arguments[x];N.type==="operator"&&N.value==="?"?p.push(N):p.push(yield*q(N,P,R))}var F=yield*q(k.procedure,P,R);if(typeof F>"u"&&k.procedure.type==="path"&&R.lookup(k.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:k.position,token:k.procedure.steps[0].value};if(lt(F))S=ii(F,p);else if(F&&F._jsonata_function===!0)S=dn(F.implementation,p);else if(typeof F=="function")S=dn(F,p);else throw{code:"T1008",stack:new Error().stack,position:k.position,token:k.procedure.type==="path"?k.procedure.steps[0].value:k.procedure.value};return S}function hi(k,P,R){if(typeof k>"u")return P;var S=k.validate(P,R);return S}function*$e(k,P){var R,S=Ve(k.environment);return k.arguments.forEach(function(p,x){S.bind(p.value,P[x])}),typeof k.body=="function"?R=yield*kn(k.body,S):R=yield*q(k.body,k.input,S),R}function ii(k,P){var R=Ve(k.environment),S=[];k.arguments.forEach(function(x,N){var F=P[N];F&&F.type==="operator"&&F.value==="?"?S.push(x):R.bind(x.value,F)});var p={_jsonata_lambda:!0,input:k.input,environment:R,arguments:S,body:k.body};return p}function dn(k,P){var R=fs(k);R=R.map(function(N){return"$"+N.trim()});var S="function("+R.join(", ")+"){ _ }",p=m(S);p.body=k;var x=ii(p,P);return x}function*kn(k,P){var R=fs(k),S=R.map(function(N){return P.lookup(N.trim())}),p={environment:P},x=k.apply(p,S);return K(x)&&(x=yield*x),x}function fs(k){var P=k.toString(),R=/\(([^)]*)\)/.exec(P)[1],S=R.split(",");return S}function gt(k,P){var R={_jsonata_function:!0,implementation:k};return typeof P<"u"&&(R.signature=g(P)),R}function*Ds(k,P){if(!(typeof k>"u")){var R=this.input;typeof P<"u"&&(R=P,Array.isArray(R)&&!G(R)&&(R=w(R),R.outerWrapper=!0));try{var S=m(k,!1)}catch(x){throw Mi(x),{stack:new Error().stack,code:"D3120",value:x.message,error:x}}try{var p=yield*q(S,R,this.environment)}catch(x){throw Mi(x),{stack:new Error().stack,code:"D3121",value:x.message,error:x}}return p}}function ds(k){if(!(typeof k>"u"))return JSON.parse(c.string(k))}function Ve(k){var P={};return{bind:function(R,S){P[R]=S},lookup:function(R){var S;return P.hasOwnProperty(R)?S=P[R]:k&&(S=k.lookup(R)),S},timestamp:k?k.timestamp:null,async:k?k.async:!1,global:k?k.global:{ancestry:[null]}}}B.bind("sum",gt(c.sum,"<a<n>:n>")),B.bind("count",gt(c.count,"<a:n>")),B.bind("max",gt(c.max,"<a<n>:n>")),B.bind("min",gt(c.min,"<a<n>:n>")),B.bind("average",gt(c.average,"<a<n>:n>")),B.bind("string",gt(c.string,"<x-b?:s>")),B.bind("substring",gt(c.substring,"<s-nn?:s>")),B.bind("substringBefore",gt(c.substringBefore,"<s-s:s>")),B.bind("substringAfter",gt(c.substringAfter,"<s-s:s>")),B.bind("lowercase",gt(c.lowercase,"<s-:s>")),B.bind("uppercase",gt(c.uppercase,"<s-:s>")),B.bind("length",gt(c.length,"<s-:n>")),B.bind("trim",gt(c.trim,"<s-:s>")),B.bind("pad",gt(c.pad,"<s-ns?:s>")),B.bind("match",gt(c.match,"<s-f<s:o>n?:a<o>>")),B.bind("contains",gt(c.contains,"<s-(sf):b>")),B.bind("replace",gt(c.replace,"<s-(sf)(sf)n?:s>")),B.bind("split",gt(c.split,"<s-(sf)n?:a<s>>")),B.bind("join",gt(c.join,"<a<s>s?:s>")),B.bind("formatNumber",gt(c.formatNumber,"<n-so?:s>")),B.bind("formatBase",gt(c.formatBase,"<n-n?:s>")),B.bind("formatInteger",gt(l.formatInteger,"<n-s:s>")),B.bind("parseInteger",gt(l.parseInteger,"<s-s:n>")),B.bind("number",gt(c.number,"<(nsb)-:n>")),B.bind("floor",gt(c.floor,"<n-:n>")),B.bind("ceil",gt(c.ceil,"<n-:n>")),B.bind("round",gt(c.round,"<n-n?:n>")),B.bind("abs",gt(c.abs,"<n-:n>")),B.bind("sqrt",gt(c.sqrt,"<n-:n>")),B.bind("power",gt(c.power,"<n-n:n>")),B.bind("random",gt(c.random,"<:n>")),B.bind("boolean",gt(c.boolean,"<x-:b>")),B.bind("not",gt(c.not,"<x-:b>")),B.bind("map",gt(c.map,"<af>")),B.bind("zip",gt(c.zip,"<a+>")),B.bind("filter",gt(c.filter,"<af>")),B.bind("single",gt(c.single,"<af?>")),B.bind("reduce",gt(c.foldLeft,"<afj?:j>")),B.bind("sift",gt(c.sift,"<o-f?:o>")),B.bind("keys",gt(c.keys,"<x-:a<s>>")),B.bind("lookup",gt(c.lookup,"<x-s:x>")),B.bind("append",gt(c.append,"<xx:a>")),B.bind("exists",gt(c.exists,"<x:b>")),B.bind("spread",gt(c.spread,"<x-:a<o>>")),B.bind("merge",gt(c.merge,"<a<o>:o>")),B.bind("reverse",gt(c.reverse,"<a:a>")),B.bind("each",gt(c.each,"<o-f:a>")),B.bind("error",gt(c.error,"<s?:x>")),B.bind("assert",gt(c.assert,"<bs?:x>")),B.bind("type",gt(c.type,"<x:s>")),B.bind("sort",gt(c.sort,"<af?:a>")),B.bind("shuffle",gt(c.shuffle,"<a:a>")),B.bind("distinct",gt(c.distinct,"<x:x>")),B.bind("base64encode",gt(c.base64encode,"<s-:s>")),B.bind("base64decode",gt(c.base64decode,"<s-:s>")),B.bind("encodeUrlComponent",gt(c.encodeUrlComponent,"<s-:s>")),B.bind("encodeUrl",gt(c.encodeUrl,"<s-:s>")),B.bind("decodeUrlComponent",gt(c.decodeUrlComponent,"<s-:s>")),B.bind("decodeUrl",gt(c.decodeUrl,"<s-:s>")),B.bind("eval",gt(Ds,"<sx?:x>")),B.bind("toMillis",gt(l.toMillis,"<s-s?:n>")),B.bind("fromMillis",gt(l.fromMillis,"<n-s?s?:s>")),B.bind("clone",gt(ds,"<(oa)-:o>"));var ps={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Mi(k){var P=ps[k.code];if(typeof P<"u"){var R=P.replace(/\{\{\{([^}]+)}}}/g,function(){return k[arguments[1]]});R=R.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(k[arguments[1]])}),k.message=R}}function Et(k,P){var R,S;try{R=m(k,P&&P.recover),S=R.errors,delete R.errors}catch(N){throw Mi(N),N}var p=Ve(B),x=new Date;return p.bind("now",gt(function(N,F){return l.fromMillis(x.getTime(),N,F)},"<s?s?:s>")),p.bind("millis",gt(function(){return x.getTime()},"<:n>")),P&&P.RegexEngine?Et.RegexEngine=P.RegexEngine:Et.RegexEngine=RegExp,{evaluate:function(N,F,V){if(typeof S<"u"){var j={code:"S0500",position:0};throw Mi(j),j}if(typeof F<"u"){var ct;ct=Ve(p);for(var Dt in F)ct.bind(Dt,F[Dt])}else ct=p;ct.bind("$",N),x=new Date,ct.timestamp=x,Array.isArray(N)&&!G(N)&&(N=w(N),N.outerWrapper=!0);var jt,ee;if(typeof V=="function"){ct.async=!0;var fe=function(me){Mi(me),V(me,null)},pe=function(me){jt=ee.next(me),jt.done?V(null,jt.value):jt.value.then(pe).catch(fe)};ee=q(R,N,ct),jt=ee.next(),jt.value.then(pe).catch(fe)}else try{for(ee=q(R,N,ct),jt=ee.next();!jt.done;)jt=ee.next(jt.value);return jt.value}catch(me){throw Mi(me),me}},assign:function(N,F){p.bind(N,F)},registerFunction:function(N,F,V){var j=gt(F,V);p.bind(N,j)},ast:function(){return R},errors:function(){return S}}}return Et.parser=m,Et}();r.exports=b},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(s,r,h){var l=s("./signature");let c=(()=>{"use strict";var f={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},m={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},g=function(C){var E=0,O=C.length,w=function(lt,K){var z={type:lt,value:K,position:E};return z},G=function(){for(var lt=E,K=0,z,at;E<O;){var B=C.charAt(E);if(B==="/"&&C.charAt(E-1)!=="\\"&&K===0){if(z=C.substring(lt,E),z==="")throw{code:"S0301",stack:new Error().stack,position:E};for(E++,B=C.charAt(E),lt=E;B==="i"||B==="m";)E++,B=C.charAt(E);return at=C.substring(lt,E)+"g",new RegExp(z,at)}(B==="("||B==="["||B==="{")&&C.charAt(E-1)!=="\\"&&K++,(B===")"||B==="]"||B==="}")&&C.charAt(E-1)!=="\\"&&K--,E++}throw{code:"S0302",stack:new Error().stack,position:E}},rt=function(lt){if(E>=O)return null;for(var K=C.charAt(E);E<O&&` 	
\r\v`.indexOf(K)>-1;)E++,K=C.charAt(E);if(K==="/"&&C.charAt(E+1)==="*"){var z=E;for(E+=2,K=C.charAt(E);!(K==="*"&&C.charAt(E+1)==="/");)if(K=C.charAt(++E),E>=O)throw{code:"S0106",stack:new Error().stack,position:z};return E+=2,K=C.charAt(E),rt(lt)}if(lt!==!0&&K==="/")return E++,w("regex",G());if(K==="."&&C.charAt(E+1)===".")return E+=2,w("operator","..");if(K===":"&&C.charAt(E+1)==="=")return E+=2,w("operator",":=");if(K==="!"&&C.charAt(E+1)==="=")return E+=2,w("operator","!=");if(K===">"&&C.charAt(E+1)==="=")return E+=2,w("operator",">=");if(K==="<"&&C.charAt(E+1)==="=")return E+=2,w("operator","<=");if(K==="*"&&C.charAt(E+1)==="*")return E+=2,w("operator","**");if(K==="~"&&C.charAt(E+1)===">")return E+=2,w("operator","~>");if(Object.prototype.hasOwnProperty.call(f,K))return E++,w("operator",K);if(K==='"'||K==="'"){var at=K;E++;for(var B="";E<O;){if(K=C.charAt(E),K==="\\")if(E++,K=C.charAt(E),Object.prototype.hasOwnProperty.call(m,K))B+=m[K];else if(K==="u"){var q=C.substr(E+1,4);if(/^[0-9a-fA-F]+$/.test(q)){var _t=parseInt(q,16);B+=String.fromCharCode(_t),E+=4}else throw{code:"S0104",stack:new Error().stack,position:E}}else throw{code:"S0103",stack:new Error().stack,position:E,token:K};else{if(K===at)return E++,w("string",B);B+=K}E++}throw{code:"S0101",stack:new Error().stack,position:E}}var it=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,vt=it.exec(C.substring(E));if(vt!==null){var Mt=parseFloat(vt[0]);if(!isNaN(Mt)&&isFinite(Mt))return E+=vt[0].length,w("number",Mt);throw{code:"S0102",stack:new Error().stack,position:E,token:vt[0]}}var Wt;if(K==="`"){E++;var Ut=C.indexOf("`",E);if(Ut!==-1)return Wt=C.substring(E,Ut),E=Ut+1,w("name",Wt);throw E=O,{code:"S0105",stack:new Error().stack,position:E}}for(var bt=E,se;;)if(se=C.charAt(bt),bt===O||` 	
\r\v`.indexOf(se)>-1||Object.prototype.hasOwnProperty.call(f,se)){if(C.charAt(E)==="$")return Wt=C.substring(E+1,bt),E=bt,w("variable",Wt);switch(Wt=C.substring(E,bt),E=bt,Wt){case"or":case"in":case"and":return w("operator",Wt);case"true":return w("value",!0);case"false":return w("value",!1);case"null":return w("value",null);default:return E===O&&Wt===""?null:w("name",Wt)}}else bt++};return rt},b=function(C,E){var O,w,G={},rt=[],lt=function(){var L=[];O.id!=="(end)"&&L.push({type:O.type,value:O.value,position:O.position});for(var D=w();D!==null;)L.push(D),D=w();return L},K={nud:function(){var L={code:"S0211",token:this.value,position:this.position};if(E)return L.remaining=lt(),L.type="error",rt.push(L),L;throw L.stack=new Error().stack,L}},z=function(L,D){var X=G[L];return D=D||0,X?D>=X.lbp&&(X.lbp=D):(X=Object.create(K),X.id=X.value=L,X.lbp=D,G[L]=X),X},at=function(L){if(E){L.remaining=lt(),rt.push(L);var D=G["(error)"];return O=Object.create(D),O.error=L,O.type="(error)",O}else throw L.stack=new Error().stack,L},B=function(L,D){if(L&&O.id!==L){var X;O.id==="(end)"?X="S0203":X="S0202";var mt={code:X,position:O.position,token:O.value,value:L};return at(mt)}var Ht=w(D);if(Ht===null)return O=G["(end)"],O.position=C.length,O;var tt=Ht.value,M=Ht.type,W;switch(M){case"name":case"variable":W=G["(name)"];break;case"operator":if(W=G[tt],!W)return at({code:"S0204",stack:new Error().stack,position:Ht.position,token:tt});break;case"string":case"number":case"value":W=G["(literal)"];break;case"regex":M="regex",W=G["(regex)"];break;default:return at({code:"S0205",stack:new Error().stack,position:Ht.position,token:tt})}return O=Object.create(W),O.value=tt,O.type=M,O.position=Ht.position,O},q=function(L){var D,X=O;for(B(null,!0),D=X.nud();L<O.lbp;)X=O,B(),D=X.led(D);return D},_t=function(L){var D=z(L,0);D.nud=function(){return this}},it=function(L,D,X){var mt=D||f[L],Ht=z(L,mt);return Ht.led=X||function(tt){return this.lhs=tt,this.rhs=q(mt),this.type="binary",this},Ht},vt=function(L,D,X){var mt=z(L,D);return mt.led=X,mt},Mt=function(L,D){var X=z(L);return X.nud=D||function(){return this.expression=q(70),this.type="unary",this},X};_t("(end)"),_t("(name)"),_t("(literal)"),_t("(regex)"),z(":"),z(";"),z(","),z(")"),z("]"),z("}"),z(".."),it("."),it("+"),it("-"),it("*"),it("/"),it("%"),it("="),it("<"),it(">"),it("!="),it("<="),it(">="),it("&"),it("and"),it("or"),it("in"),_t("and"),_t("or"),_t("in"),Mt("-"),it("~>"),vt("(error)",10,function(L){return this.lhs=L,this.error=O.error,this.remaining=lt(),this.type="error",this}),Mt("*",function(){return this.type="wildcard",this}),Mt("**",function(){return this.type="descendant",this}),Mt("%",function(){return this.type="parent",this}),it("(",f["("],function(L){if(this.procedure=L,this.type="function",this.arguments=[],O.id!==")")for(;O.type==="operator"&&O.id==="?"?(this.type="partial",this.arguments.push(O),B("?")):this.arguments.push(q(0)),O.id===",";)B(",");if(B(")",!0),L.type==="name"&&(L.value==="function"||L.value==="\u03BB")){if(this.arguments.forEach(function(tt,M){if(tt.type!=="variable")return at({code:"S0208",stack:new Error().stack,position:tt.position,token:tt.value,value:M+1})}),this.type="lambda",O.id==="<"){for(var D=O.position,X=1,mt="<";X>0&&O.id!=="{"&&O.id!=="(end)";){var Ht=B();Ht.id===">"?X--:Ht.id==="<"&&X++,mt+=Ht.value}B(">");try{this.signature=l(mt)}catch(tt){return tt.position=D+tt.offset,at(tt)}}B("{"),this.body=q(0),B("}")}return this}),Mt("(",function(){for(var L=[];O.id!==")"&&(L.push(q(0)),O.id===";");)B(";");return B(")",!0),this.type="block",this.expressions=L,this}),Mt("[",function(){var L=[];if(O.id!=="]")for(;;){var D=q(0);if(O.id===".."){var X={type:"binary",value:"..",position:O.position,lhs:D};B(".."),X.rhs=q(0),D=X}if(L.push(D),O.id!==",")break;B(",")}return B("]",!0),this.expressions=L,this.type="unary",this}),it("[",f["["],function(L){if(O.id==="]"){for(var D=L;D&&D.type==="binary"&&D.value==="[";)D=D.lhs;return D.keepArray=!0,B("]"),L}else return this.lhs=L,this.rhs=q(f["]"]),this.type="binary",B("]",!0),this}),it("^",f["^"],function(L){B("(");for(var D=[];;){var X={descending:!1};if(O.id==="<"?B("<"):O.id===">"&&(X.descending=!0,B(">")),X.expression=q(0),D.push(X),O.id!==",")break;B(",")}return B(")"),this.lhs=L,this.rhs=D,this.type="binary",this});var Wt=function(L){var D=[];if(O.id!=="}")for(;;){var X=q(0);B(":");var mt=q(0);if(D.push([X,mt]),O.id!==",")break;B(",")}return B("}",!0),typeof L>"u"?(this.lhs=D,this.type="unary"):(this.lhs=L,this.rhs=D,this.type="binary"),this};Mt("{",Wt),it("{",f["{"],Wt),vt(":=",f[":="],function(L){return L.type!=="variable"?at({code:"S0212",stack:new Error().stack,position:L.position,token:L.value}):(this.lhs=L,this.rhs=q(f[":="]-1),this.type="binary",this)}),it("@",f["@"],function(L){return this.lhs=L,this.rhs=q(f["@"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),it("#",f["#"],function(L){return this.lhs=L,this.rhs=q(f["#"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),it("?",f["?"],function(L){return this.type="condition",this.condition=L,this.then=q(0),O.id===":"&&(B(":"),this.else=q(0)),this}),Mt("|",function(){return this.type="transform",this.pattern=q(0),B("|"),this.update=q(0),O.id===","&&(B(","),this.delete=q(0)),B("|"),this});var Ut=function(L){var D;if(L.type==="function"&&!L.predicate){var X={type:"lambda",thunk:!0,arguments:[],position:L.position};X.body=L,D=X}else if(L.type==="condition")L.then=Ut(L.then),typeof L.else<"u"&&(L.else=Ut(L.else)),D=L;else if(L.type==="block"){var mt=L.expressions.length;mt>0&&(L.expressions[mt-1]=Ut(L.expressions[mt-1])),D=L}else D=L;return D},bt=0,se=0,Qt=[],yt=function(L,D){switch(L.type){case"name":case"wildcard":D.level--,D.level===0&&(typeof L.ancestor>"u"||(Qt[D.index].slot.label=L.ancestor.label),L.ancestor=D,L.tuple=!0);break;case"parent":D.level++;break;case"block":L.expressions.length>0&&(L.tuple=!0,D=yt(L.expressions[L.expressions.length-1],D));break;case"path":L.tuple=!0;var X=L.steps.length-1;for(D=yt(L.steps[X--],D);D.level>0&&X>=0;)D=yt(L.steps[X--],D);break;default:throw{code:"S0217",token:L.type,position:L.position}}return D},ut=function(L,D){if(typeof D.seekingParent<"u"||D.type==="parent"){var X=typeof D.seekingParent<"u"?D.seekingParent:[];D.type==="parent"&&X.push(D.slot),typeof L.seekingParent>"u"?L.seekingParent=X:Array.prototype.push.apply(L.seekingParent,X)}},ce=function(L){var D=L.steps.length-1,X=L.steps[D],mt=typeof X.seekingParent<"u"?X.seekingParent:[];X.type==="parent"&&mt.push(X.slot);for(var Ht=0;Ht<mt.length;Ht++){var tt=mt[Ht];for(D=L.steps.length-2;tt.level>0;){if(D<0){typeof L.seekingParent>"u"?L.seekingParent=[tt]:L.seekingParent.push(tt);break}for(var M=L.steps[D--];D>=0&&M.focus&&L.steps[D].focus;)M=L.steps[D--];tt=yt(M,tt)}}},It=function(L){var D;switch(L.type){case"binary":switch(L.value){case".":var X=It(L.lhs);X.type==="path"?D=X:D={type:"path",steps:[X]},X.type==="parent"&&(D.seekingParent=[X.slot]);var mt=It(L.rhs);mt.type==="function"&&mt.procedure.type==="path"&&mt.procedure.steps.length===1&&mt.procedure.steps[0].type==="name"&&D.steps[D.steps.length-1].type==="function"&&(D.steps[D.steps.length-1].nextFunction=mt.procedure.steps[0].value),mt.type==="path"?Array.prototype.push.apply(D.steps,mt.steps):(typeof mt.predicate<"u"&&(mt.stages=mt.predicate,delete mt.predicate),D.steps.push(mt)),D.steps.filter(function(ht){if(ht.type==="number"||ht.type==="value")throw{code:"S0213",stack:new Error().stack,position:ht.position,value:ht.value};return ht.type==="string"}).forEach(function(ht){ht.type="name"}),D.steps.filter(function(ht){return ht.keepArray===!0}).length>0&&(D.keepSingletonArray=!0);var Ht=D.steps[0];Ht.type==="unary"&&Ht.value==="["&&(Ht.consarray=!0);var tt=D.steps[D.steps.length-1];tt.type==="unary"&&tt.value==="["&&(tt.consarray=!0),ce(D);break;case"[":D=It(L.lhs);var M=D,W="predicate";if(D.type==="path"&&(M=D.steps[D.steps.length-1],W="stages"),typeof M.group<"u")throw{code:"S0209",stack:new Error().stack,position:L.position};typeof M[W]>"u"&&(M[W]=[]);var U=It(L.rhs);typeof U.seekingParent<"u"&&(U.seekingParent.forEach(ht=>{ht.level===1?yt(M,ht):ht.level--}),ut(M,U)),M[W].push({type:"filter",expr:U,position:L.position});break;case"{":if(D=It(L.lhs),typeof D.group<"u")throw{code:"S0210",stack:new Error().stack,position:L.position};D.group={lhs:L.rhs.map(function(ht){return[It(ht[0]),It(ht[1])]}),position:L.position};break;case"^":D=It(L.lhs),D.type!=="path"&&(D={type:"path",steps:[D]});var J={type:"sort",position:L.position};J.terms=L.rhs.map(function(ht){var xt=It(ht.expression);return ut(J,xt),{descending:ht.descending,expression:xt}}),D.steps.push(J),ce(D);break;case":=":D={type:"bind",value:L.value,position:L.position},D.lhs=It(L.lhs),D.rhs=It(L.rhs),ut(D,D.rhs);break;case"@":if(D=It(L.lhs),M=D,D.type==="path"&&(M=D.steps[D.steps.length-1]),typeof M.stages<"u"||typeof M.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:L.position};if(M.type==="sort")throw{code:"S0216",stack:new Error().stack,position:L.position};L.keepArray&&(M.keepArray=!0),M.focus=L.rhs.value,M.tuple=!0;break;case"#":D=It(L.lhs),M=D,D.type==="path"?M=D.steps[D.steps.length-1]:(D={type:"path",steps:[D]},typeof M.predicate<"u"&&(M.stages=M.predicate,delete M.predicate)),typeof M.stages>"u"?M.index=L.rhs.value:M.stages.push({type:"index",value:L.rhs.value,position:L.position}),M.tuple=!0;break;case"~>":D={type:"apply",value:L.value,position:L.position},D.lhs=It(L.lhs),D.rhs=It(L.rhs);break;default:D={type:L.type,value:L.value,position:L.position},D.lhs=It(L.lhs),D.rhs=It(L.rhs),ut(D,D.lhs),ut(D,D.rhs)}break;case"unary":D={type:L.type,value:L.value,position:L.position},L.value==="["?D.expressions=L.expressions.map(function(ht){var xt=It(ht);return ut(D,xt),xt}):L.value==="{"?D.lhs=L.lhs.map(function(ht){var xt=It(ht[0]);ut(D,xt);var Kt=It(ht[1]);return ut(D,Kt),[xt,Kt]}):(D.expression=It(L.expression),L.value==="-"&&D.expression.type==="number"?(D=D.expression,D.value=-D.value):ut(D,D.expression));break;case"function":case"partial":D={type:L.type,name:L.name,value:L.value,position:L.position},D.arguments=L.arguments.map(function(ht){var xt=It(ht);return ut(D,xt),xt}),D.procedure=It(L.procedure);break;case"lambda":D={type:L.type,arguments:L.arguments,signature:L.signature,position:L.position};var ot=It(L.body);D.body=Ut(ot);break;case"condition":D={type:L.type,position:L.position},D.condition=It(L.condition),ut(D,D.condition),D.then=It(L.then),ut(D,D.then),typeof L.else<"u"&&(D.else=It(L.else),ut(D,D.else));break;case"transform":D={type:L.type,position:L.position},D.pattern=It(L.pattern),D.update=It(L.update),typeof L.delete<"u"&&(D.delete=It(L.delete));break;case"block":D={type:L.type,position:L.position},D.expressions=L.expressions.map(function(ht){var xt=It(ht);return ut(D,xt),(xt.consarray||xt.type==="path"&&xt.steps[0].consarray)&&(D.consarray=!0),xt});break;case"name":D={type:"path",steps:[L]},L.keepArray&&(D.keepSingletonArray=!0);break;case"parent":D={type:"parent",slot:{label:"!"+bt++,level:1,index:se++}},Qt.push(D);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":D=L;break;case"operator":if(L.value==="and"||L.value==="or"||L.value==="in")L.type="name",D=It(L);else if(L.value==="?")D=L;else throw{code:"S0201",stack:new Error().stack,position:L.position,token:L.value};break;case"error":D=L,L.lhs&&(D=It(L.lhs));break;default:var et="S0206";L.id==="(end)"&&(et="S0207");var Q={code:et,position:L.position,token:L.value};if(E)return rt.push(Q),{type:"error",error:Q};throw Q.stack=new Error().stack,Q}return L.keepArray&&(D.keepArray=!0),D};w=g(C),B();var oe=q(0);if(O.id!=="(end)"){var de={code:"S0201",position:O.position,token:O.value};at(de)}if(oe=It(oe),oe.type==="parent"||typeof oe.seekingParent<"u")throw{code:"S0217",token:oe.type,position:oe.position};return rt.length>0&&(oe.errors=rt),oe};return b})();r.exports=c},{"./signature":5}],5:[function(s,r,h){var l=s("./utils");let c=(()=>{"use strict";var f={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function m(g){for(var b=1,C=[],E={},O=E;b<g.length;){var w=g.charAt(b);if(w===":")break;var G=function(){C.push(E),O=E,E={}},rt=function(it,vt,Mt,Wt){for(var Ut=1,bt=vt;bt<it.length;)if(bt++,w=it.charAt(bt),w===Wt){if(Ut--,Ut===0)break}else w===Mt&&Ut++;return bt};switch(w){case"s":case"n":case"b":case"l":case"o":E.regex="["+w+"m]",E.type=w,G();break;case"a":E.regex="[asnblfom]",E.type=w,E.array=!0,G();break;case"f":E.regex="f",E.type=w,G();break;case"j":E.regex="[asnblom]",E.type=w,G();break;case"x":E.regex="[asnblfom]",E.type=w,G();break;case"-":O.context=!0,O.contextRegex=new RegExp(O.regex),O.regex+="?";break;case"?":case"+":O.regex+=w;break;case"(":var lt=rt(g,b,"(",")"),K=g.substring(b+1,lt);if(K.indexOf("<")===-1)E.regex="["+K+"m]";else throw{code:"S0402",stack:new Error().stack,value:K,offset:b};E.type="("+K+")",b=lt,G();break;case"<":if(O.type==="a"||O.type==="f"){var z=rt(g,b,"<",">");O.subtype=g.substring(b+1,z),b=z}else throw{code:"S0401",stack:new Error().stack,value:O.type,offset:b};break}b++}var at="^"+C.map(function(it){return"("+it.regex+")"}).join("")+"$",B=new RegExp(at),q=function(it){var vt;if(l.isFunction(it))vt="f";else{var Mt=typeof it;switch(Mt){case"string":vt="s";break;case"number":vt="n";break;case"boolean":vt="b";break;case"object":it===null?vt="l":Array.isArray(it)?vt="a":vt="o";break;case"undefined":default:vt="m"}}return vt},_t=function(it,vt){for(var Mt="^",Wt=0,Ut=0;Ut<C.length;Ut++){Mt+=C[Ut].regex;var bt=vt.match(Mt);if(bt===null)throw{code:"T0410",stack:new Error().stack,value:it[Wt],index:Wt+1};Wt=bt[0].length}throw{code:"T0410",stack:new Error().stack,value:it[Wt],index:Wt+1}};return{definition:g,validate:function(it,vt){var Mt="";it.forEach(function(se){Mt+=q(se)});var Wt=B.exec(Mt);if(Wt){var Ut=[],bt=0;return C.forEach(function(se,Qt){var yt=it[bt],ut=Wt[Qt+1];if(ut==="")if(se.context&&se.contextRegex){var ce=q(vt);if(se.contextRegex.test(ce))Ut.push(vt);else throw{code:"T0411",stack:new Error().stack,value:vt,index:bt+1}}else Ut.push(yt),bt++;else ut.split("").forEach(function(It){if(se.type==="a"){if(It==="m")yt=void 0;else{yt=it[bt];var oe=!0;if(typeof se.subtype<"u"){if(It!=="a"&&ut!==se.subtype)oe=!1;else if(It==="a"&&yt.length>0){var de=q(yt[0]);if(de!==se.subtype.charAt(0))oe=!1;else{var L=yt.filter(function(D){return q(D)!==de});oe=L.length===0}}}if(!oe)throw{code:"T0412",stack:new Error().stack,value:yt,index:bt+1,type:f[se.subtype]};It!=="a"&&(yt=[yt])}Ut.push(yt),bt++}else Ut.push(yt),bt++})}),Ut}_t(it,Mt)}}}return m})();r.exports=c},{"./utils":6}],6:[function(s,r,h){let l=(()=>{"use strict";function c(z){var at=!1;if(typeof z=="number"&&(at=!isNaN(z),at&&!isFinite(z)))throw{code:"D1001",value:z,stack:new Error().stack};return at}function f(z){var at=!1;return Array.isArray(z)&&(at=z.filter(function(B){return typeof B!="string"}).length===0),at}function m(z){var at=!1;return Array.isArray(z)&&(at=z.filter(function(B){return!c(B)}).length===0),at}function g(){var z=[];return z.sequence=!0,arguments.length===1&&z.push(arguments[0]),z}function b(z){return z.sequence===!0&&Array.isArray(z)}function C(z){return z&&(z._jsonata_function===!0||z._jsonata_lambda===!0)||typeof z=="function"}function E(z){var at=typeof z.arity=="number"?z.arity:typeof z.implementation=="function"?z.implementation.length:typeof z.length=="number"?z.length:z.arguments.length;return at}function O(z){return z&&z._jsonata_lambda===!0}var w=typeof Symbol=="function"?Symbol:{},G=w.iterator||"@@iterator";function rt(z){return typeof z=="object"&&z!==null&&G in z&&"next"in z&&typeof z.next=="function"}function lt(z,at){if(z===at)return!0;if(typeof z=="object"&&typeof at=="object"&&z!==null&&at!==null){if(Array.isArray(z)&&Array.isArray(at)){if(z.length!==at.length)return!1;for(var B=0;B<z.length;B++)if(!lt(z[B],at[B]))return!1;return!0}var q=Object.getOwnPropertyNames(z),_t=Object.getOwnPropertyNames(at);if(q.length!==_t.length)return!1;for(q=q.sort(),_t=_t.sort(),B=0;B<q.length;B++)if(q[B]!==_t[B])return!1;for(B=0;B<q.length;B++){var it=q[B];if(!lt(z[it],at[it]))return!1}return!0}return!1}function K(z){var at=[];for(let B of z)at.push(B);return at}return{isNumeric:c,isArrayOfStrings:f,isArrayOfNumbers:m,createSequence:g,isSequence:b,isFunction:C,isLambda:O,isIterable:rt,getFunctionArity:E,isDeepEqual:lt,stringToArray:K}})();r.exports=l},{}]},{},[3])(3)})});var Eh=H(Pn=>{"use strict";var XA=Pn&&Pn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.locEnd=Pn.locStart=Pn.parse=void 0;var ZA=XA(rv()),tI=i=>{try{let t=[],e=i.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let r of e){let h=r.index;if(h===void 0)continue;let l=r[1];!l||t.push({position:h,value:l.trim()})}let s=(0,ZA.default)(i).ast();return Object.assign(Object.assign({},s),{jsonataComments:t})}catch(t){let e=t,r=["code","position","token"].filter(l=>e[l]!==void 0).map(l=>`${l}: ${e[l]}`),h=[e.message,...r].join(", ");throw new Error(h)}};Pn.parse=tI;var eI=i=>i.position;Pn.locStart=eI;var iI=()=>0;Pn.locEnd=iI});var uv=H(wn=>{"use strict";var nI=wn&&wn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),sI=wn&&wn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),rI=wn&&wn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&nI(t,i,e);return sI(t,i),t};Object.defineProperty(wn,"__esModule",{value:!0});wn.print=void 0;var oI=rI(require("prettier")),ov=[],Yo=-1,aI=(i,t,e)=>{var s,r;let h=i.getValue();"jsonataComments"in h&&(Yo=-1,ov=h.jsonataComments);let l=(r=h.type==="path"?(s=h.steps[0])===null||s===void 0?void 0:s.position:h.position)!==null&&r!==void 0?r:Yo,c=ov.filter(g=>g.position>Yo&&g.position<l);Yo=l;let f=c.map(lI),m=hI(h,i,t,e);return f.length>0?Oe([f,m]):m};wn.print=aI;var hI=(i,...t)=>{if(i.type==="binary")return uI(i,...t);if(i.type==="function")return av(i,...t);if(i.type==="partial")return av(i,...t);if(i.type==="variable")return _I(i,...t);if(i.type==="wildcard")return gI(i,...t);if(i.type==="descendant")return TI(i,...t);if(i.type==="operator")return mI(i,...t);if(i.type==="number")return fI(i,...t);if(i.type==="string")return dI(i,...t);if(i.type==="name")return cI(i,...t);if(i.type==="filter")return kI(i,...t);if(i.type==="bind")return xI(i,...t);if(i.type==="lambda")return EI(i,...t);if(i.type==="condition")return vI(i,...t);if(i.type==="value")return yI(i,...t);if(i.type==="block")return bI(i,...t);if(i.type==="path")return pI(i,...t);if(i.type==="apply")return NI(i,...t);if(i.type==="sort")return AI(i,...t);if(i.type==="unary")return SI(i,...t);if(i.type==="parent")return RI(i,...t);if(i.type==="regex")return FI(i,...t);throw new Error(`Unknown node type: ${i.type}`)},{group:Oe,indent:Fi,join:Xs,line:Dn,hardline:Ss,breakParent:vh,softline:Rn}=oI.doc.builders,lI=i=>Oe(["/* ",i.value," */",Ss]),uI=(i,t,e,s)=>i.value===".."?Oe([s("lhs"),Fi([Rn,i.value,s("rhs")])]):Oe([s("lhs"),Fi([Dn,i.value," ",s("rhs")])]),cI=(i,t,e,s)=>Oe([BI(i.value),zi(i,t,e,s),nn(i),sn(i),Qo(i,t,e,s),Qi(i,t,e,s),ji(i)]),fI=(i,t,e,s)=>Oe([JSON.stringify(i.value),zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),dI=(i,t,e,s)=>Oe([JSON.stringify(i.value),zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),pI=(i,t,e,s)=>{let r=i.steps.flatMap((h,l)=>l===0?s(["steps",l]):h.type==="sort"?Fi(["^",s(["steps",l])]):Fi([Rn,".",s(["steps",l])]));return Oe([...r,zi(i,t,e,s)])},av=(i,t,e,s)=>Oe([s("procedure"),"(",hv(i,t,e,s),")",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),hv=(i,t,e,s)=>{var r;if(!(!((r=i.arguments)===null||r===void 0)&&r.length))return"";if(i.arguments.length===1)return s(["arguments",0]);let h=Xs([",",Dn],t.map(s,"arguments"));return[Fi([Rn,h]),Rn]},_I=(i,t,e,s)=>Oe(["$",i.value,zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i),Qo(i,t,e,s)]),mI=i=>i.value,gI=i=>i.value,TI=i=>i.value,kI=(i,t,e,s)=>Oe(["[",Fi([Rn,s("expr")]),Rn,"]"]),xI=(i,t,e,s)=>Oe([s("lhs")," ",i.value," ",s("rhs")]),EI=(i,t,e,s)=>i.thunk?s("body"):Oe(["function(",hv(i,t,e,s),") {",Fi([Dn,s("body")]),Dn,"}",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),vI=(i,t,e,s)=>{let r=t.getParentNode(),l=r?.type==="condition"?[Ss,vh]:Dn;return Oe([s("condition"),Fi([l,"? ",s("then")]),i.else?Fi([l,": ",s("else")]):""])},yI=(i,t,e,s)=>Oe([CI(i,t,e,s),zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),CI=i=>i.value===null?"null":i.value===!1?"false":i.value===!0?"true":JSON.stringify(i.value),bI=(i,t,e,s)=>{if(i.expressions.length===0)return Oe(["()",Qi(i,t,e,s),ji(i)]);if(i.expressions.length===1)return Oe(["(",s(["expressions",0]),")",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i),Qo(i,t,e,s)]);let r=Xs([";",Ss],t.map(s,"expressions"));return Oe(["(",Fi([Ss,r]),Ss,")",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)])},NI=(i,t,e,s)=>Oe([s("lhs"),Fi([Dn,i.value," ",s("rhs")])]),AI=(i,t,e,s)=>{let r=i.terms.map((l,c)=>[II(l),s(["terms",c,"expression"])]),h=Xs([",",Dn],r);return Oe(["(",Fi([Rn,h]),Rn,")"])},II=i=>i.descending?">":"<",SI=(i,t,e,s)=>{if(i.value==="{")return OI(i,t,e,s);if(i.value==="[")return PI(i,t,e,s);if(i.value==="-")return DI(i,t,e,s);throw new Error("Unhandled unary node "+i.value)},OI=(i,t,e,s)=>Oe(["{",LI(i,t,e,s),"}",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)]),LI=(i,t,e,s)=>{if(i.lhs.length===0)return"";let r=i.lhs.map((f,m)=>Oe([s(["lhs",m,0]),": ",s(["lhs",m,1])])),l=i.lhs.some(f=>lv(f[1]))?[Ss,vh]:Dn,c=Xs([",",l],r);return[Fi([l,c]),l]},lv=i=>{if(i.type!=="unary")return!1;if(i.value==="["||i.value==="{")return!0},PI=(i,t,e,s)=>{let r=Xs([",",Dn],t.map(s,"expressions"));return Oe(["[",Fi([Rn,r]),Rn,"]",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)])},DI=(i,t,e,s)=>Oe(["-",s("expression")]),RI=(i,t,e,s)=>Oe(["%",zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i),Qo(i,t,e,s)]),wI=["i","m"],FI=(i,t,e,s)=>{let r=wI.filter(h=>i.value.flags.includes(h)).join("");return Oe([`/${i.value.source}/${r}`,zi(i,t,e,s),nn(i),sn(i),Qi(i,t,e,s),ji(i)])},nn=i=>i.focus?"@$"+i.focus:"",sn=i=>i.index?"#$"+i.index:"",Qi=(i,t,e,s)=>i.predicate?t.map(s,"predicate"):"",Qo=(i,t,e,s)=>i.stages?t.map(s,"stages"):"",ji=i=>i.keepArray?"[]":"",zi=(i,t,e,s)=>{if(i.group===void 0)return"";if(i.group.lhs.length===0)return"{}";let r=i.group.lhs.map((f,m)=>Oe([s(["group","lhs",m,0]),": ",s(["group","lhs",m,1])])),l=i.group.lhs.some(f=>lv(f[1]))?[Ss,vh]:Dn,c=Xs([",",l],r);return Oe(["{",Fi([l,c]),l,"}"])},BI=i=>i.startsWith("`")&&i.endsWith("`")?i:i.startsWith('"')&&i.endsWith('"')?`\`${i.slice(1,-1)}\``:/\s/.test(i)?`\`${i}\``:["null","false","true"].includes(i)?`\`${i}\``:/^\d+/.test(i)?`\`${i}\``:/[^a-zA-Z_[\]\d]/.test(i)?`\`${i}\``:i});var cv=H(Si=>{"use strict";Object.defineProperty(Si,"__esModule",{value:!0});Si.printers=Si.parsers=Si.languages=Si.AST_FORMAT_NAME=Si.AST_PARSER_NAME=void 0;var yh=Eh(),MI=uv();Si.AST_PARSER_NAME="JSONata";Si.AST_FORMAT_NAME="JSONataASTNode";Si.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[Si.AST_PARSER_NAME]}];Si.parsers={[Si.AST_PARSER_NAME]:{astFormat:Si.AST_FORMAT_NAME,parse:yh.parse,locStart:yh.locStart,locEnd:yh.locEnd}};Si.printers={[Si.AST_FORMAT_NAME]:{print:MI.print}}});var _v=H(fn=>{"use strict";var UI=fn&&fn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),HI=fn&&fn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),dv=fn&&fn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&UI(t,i,e);return HI(t,i),t};Object.defineProperty(fn,"__esModule",{value:!0});fn.serializeJsonata=fn.formatJsonata=void 0;var Zs=dv(cv()),jo=dv(require("prettier")),fv=Eh();function VI(i,t){return pv(),jo.format(i,Object.assign({parser:Zs.AST_PARSER_NAME,plugins:[Zs],printWidth:150,tabWidth:2,useTabs:!1},t))}fn.formatJsonata=VI;function GI(i,t){let e=WI(i);return pv(),jo.format("ignore text input",Object.assign({parser:Zs.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}fn.serializeJsonata=GI;var WI=i=>Object.assign(Object.assign({},Zs),{parsers:{[Zs.AST_PARSER_NAME]:{astFormat:Zs.AST_FORMAT_NAME,parse:()=>i,locStart:fv.locStart,locEnd:fv.locEnd}}});function pv(){"clearConfigCache"in jo&&jo.clearConfigCache()}});function mv(i){Nh=i}function gv(){return qI}function Tv(i){if(Nh!=null)return Nh;let t=QI(i);if(t==null||Os.existsSync(t)==!1)return Sr;let e=Os.readFileSync(t,{encoding:"utf8"});try{let s=JSON.parse(e),r=YI(s);if(r.useLaravelPint){if(r.pintCommand.length==0){let h=t.substring(0,t.length-bh.length)+"/vendor/bin/pint";Os.existsSync(h)&&(r.pintCommand=`php ${h} {file}`)}if(r.pintTempDirectory.trim().length==0&&(r.pintTempDirectory=__dirname+"/_temp/"),r.pintCacheDirectory.trim().length==0&&(r.pintCacheDirectory=__dirname+"/_cache/"),r.pintTempDirectory.trim().length>0&&(r.pintTempDirectory=Ch(r.pintTempDirectory.trim())),r.pintCacheDirectory.trim().length>0&&(r.pintCacheDirectory=Ch(r.pintCacheDirectory.trim())),r.pintConfigPath.trim().length>0)r.pintConfigPath=Ch(r.pintConfigPath.trim());else{let h=t.substring(0,t.length-bh.length)+"/pint.json";Os.existsSync(h)&&(r.pintConfigPath=h)}}return r}catch(s){console.log(s)}return Sr}function YI(i){let t=Cr,e=0,s=1,r=4,h=!0,l=!0,c=!0,f=[],m=[],g=null,b="block",C=!1,E="",O="",w="",G=!0,rt="";return typeof i.ignoreDirectives!="undefined"&&i.ignoreDirectives!==null&&(t=i.ignoreDirectives),typeof i.spacesAfterDirective!="undefined"&&i.spacesAfterDirective!==null&&(e=i.spacesAfterDirective),typeof i.spacesAfterControlDirective!="undefined"&&i.spacesAfterControlDirective!==null&&(s=i.spacesAfterControlDirective),typeof i.tabSize!="undefined"&&i.tabSize!==null&&(r=i.tabSize),typeof i.formatDirectivePhpParameters!="undefined"&&i.formatDirectivePhpParameters!==null&&(h=i.formatDirectivePhpParameters),typeof i.formatDirectiveJsonParameters!="undefined"&&i.formatDirectiveJsonParameters!==null&&(l=i.formatDirectiveJsonParameters),typeof i.customIfs!="undefined"&&i.customIfs!==null&&(f=i.customIfs),typeof i.useLaravelPint!="undefined"&&i.useLaravelPint!==null&&(C=i.useLaravelPint),typeof i.directives!="undefined"&&i.directives!==null&&(m=i.directives),typeof i.echoStyle!="undefined"&&i.echoStyle==="inline"&&(b="inline"),typeof i.formatInsideEcho!="undefined"&&i.formatInsideEcho!==null&&(c=i.formatInsideEcho),typeof i.phpOptions!="undefined"&&(g=i.phpOptions),typeof i.pintCommand!="undefined"&&(E=i.pintCommand.trim()),typeof i.pintConfig!="undefined"&&(rt=i.pintConfig.trim()),typeof i.pintTempDirectory!="undefined"&&(O=i.pintTempDirectory.trim()),typeof i.pintCacheDirectory!="undefined"&&(w=i.pintCacheDirectory.trim()),typeof i.pintCacheEnabled!="undefined"&&(G=i.pintCacheEnabled),e<0&&(e=0),s<0&&(s=1),e>3&&(e=3),s>3&&(s=3),{ignoreDirectives:t,spacesAfterDirective:e,spacesAfterControlDirective:s,tabSize:r,formatDirectivePhpParameters:h,formatDirectiveJsonParameters:l,formatInsideEcho:c,customIfs:f,directives:m,phpOptions:g,echoStyle:b,useLaravelPint:C,pintCommand:E,pintCacheDirectory:w,pintTempDirectory:O,pintCacheEnabled:G,pintConfigPath:rt}}function Ch(i){let t=/[\\/]+/g,e=i.replace(t,"/");return e.endsWith("/")||(e+="/"),e}function QI(i){let t=Ls.dirname(i);t=="."&&(t=process.cwd());let e=t.split(Ls.sep);for(;e.length>0;){let s=e.join(Ls.sep),r=Ls.join(s,bh);if(Os.existsSync(r))return r;e.pop()}return null}var Os,Ls,bh,Sr,Nh,qI,Ah=St(()=>{"use strict";Os=Xi(require("fs")),Ls=Xi(require("path"));lh();hh();bh=".blade.format.json",Sr={ignoreDirectives:[...Cr,...wo],spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,customIfs:[],directives:[],echoStyle:"block",useLaravelPint:!1,pintCommand:"",phpOptions:{phpVersion:"8.0"},pintCacheDirectory:"",pintTempDirectory:"",pintCacheEnabled:!0,pintConfigPath:""}});function xv(){return Lh}function er(){return zo}function Ih(i){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete i[t]}),i}function Ev(){return Oh}function vv(i){return(0,kv.formatJsonata)(i,{printWidth:20})}function Ph(i,t=null){return mv(t),tr.default.format(i,{parser:"blade",plugins:[jI]})}function yv(i,t=null,e=null){let s=__dirname+"/../../../pint/pint",r=__dirname+"/../../../_test/_cache/",h=__dirname+"/../../../_test/_temp/",l=`php ${s} {file}`;e!=null&&(l=e.pintCommand,r=e.pintCacheDirectory,h=e.pintTempDirectory);let c={...Sr,useLaravelPint:!0,pintCommand:`php ${s} {file}`,pintCacheDirectory:r,pintTempDirectory:h};return t!=null&&(c={...c,...t,useLaravelPint:!0,pintCommand:l,pintCacheDirectory:r,pintTempDirectory:h}),Ph(i,c)}function Cv(){return KI}function Ko(i){zI=i,Oh=Ih(Object.assign({},i,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:i.plugins})),zo=Ih(Object.assign({},i,{parser:"php",plugins:[Sh.default]})),Lh=Ih(Object.assign({},i,{parser:"php",plugins:[Sh.default],printWidth:1/0}))}function $o(i){return tr.default.format(i,{...Oh,parser:"html"})}function Dh(i,t,e=null){let s=i;if(e!=null&&(s=e),typeof t.phpOptions!="undefined"&&t.phpOptions!=null){let r=t.phpOptions;s={...s,...r}}else s={...s,phpVersion:"8.0"};return s}function bv(i,t,e=null){let s=Dh(Lh,t,e),r=tr.default.format(i,s).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function Nv(i,t,e=null){let s=Dh(zo,t,e),r=tr.default.format(i,s).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function Av(i,t,e=null){let s=Dh(zo,t,e);return tr.default.format(i,s).trim().trim()}var tr,jI,Sh,kv,zo,Oh,Lh,zI,KI,Ps=St(()=>{"use strict";tr=Xi(require("prettier")),jI=Xi(Iv()),Sh=Xi(nv()),kv=Xi(_v());Ah();KI=null});var Jo,Sv=St(()=>{"use strict";bn();Nn();Jo=class{constructor(){this.ignoreRanges=[];this.strings=[];this.nodes=[];this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.nodeIndex=0;this.hasStringNodesInResult=!1}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}setIgnoreRanges(t){this.ignoreRanges=t}hasStringNodes(){return this.hasStringNodesInResult}parse(t){for(this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ze(this.cur)){let e=this.cur,s=this.currentIndex;if(this.currentContent.length>0){let l={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(l),this.currentContent=[]}let r=Di(this),h=!1;for(let l=0;l<this.ignoreRanges.length;l++){let c=this.ignoreRanges[l];if(s>c.start&&this.currentIndex<c.end){h=!0;break}}if(h){this.currentContent.push(e);for(let l=0;l<r.value.length;l++)this.currentContent.push(r.value[l]);this.currentContent.push(e)}else{this.strings.push(r.value);let l={content:e+r.value+e,type:"string",index:this.nodeIndex};this.hasStringNodesInResult=!0,this.nodeIndex++,this.nodes.push(l)}if(this.currentIndex=r.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(e),this.currentContent=[]}}getParsedNodes(){return this.nodes}}});var ir,Ov=St(()=>{"use strict";ev();Ps();je();Sv();za();ir=class{constructor(){this.phpStructuresAnalyzer=new Wo,this.stringParser=new Jo}emulateString(t){let e=Y.makeSlug(32),s=`Emulate:${e}=`;if(this.stringParser.setIgnoreRanges(this.phpStructuresAnalyzer.getStructures()),this.stringParser.parse(t),!this.stringParser.hasStringNodes())return t;let r=this.stringParser.getParsedNodes(),h=new Map,l=new Map,c="";r.forEach(b=>{b.type=="string"&&(h.set(b.index,b.content[0]),c+=`<!-- "${s}${b.index}"-->
`,c+=`<div class="${b.content.substring(1,b.content.length-1)}"></div>
`)}),c=$o(c);let f=new ss;f.remove(c);let m=f.getStrings();for(let b=0;b<m.length;b++){let C=m[b];if(C.startsWith(s)){C=C.substring(s.length).trim();let E=parseInt(C);if(b+1<m.length){let O=m[b+1];l.set(E,O),b++}}}let g="";return r.forEach(b=>{if(b.type=="literal"||!l.has(b.index)){g+=b.content;return}let C=h.get(b.index),E=l.get(b.index);g+=C+E+C}),g}emulatePhpNode(t){let e="<?php "+t;return this.phpStructuresAnalyzer.getStructureLocations(e,0),this.emulateString(e).trimLeft().substring(6)}emulatePhpTag(t){return this.phpStructuresAnalyzer.getStructureLocations(t,0),this.emulateString(t)}}});var Xo,Lv=St(()=>{"use strict";In();Fe();Ov();Xo=class{constructor(){this.ignoreDirectives=["if","unless","elseif"]}transform(t){let e=Se.fromText(t),s=e.getAllNodes(),r="";return s.forEach(h=>{if(h instanceof Zt)r+=h.content;else if(h instanceof Ri)r+=h.nodeContent;else if(h instanceof ki)r+=h.nodeContent;else if(h instanceof dt)if(this.ignoreDirectives.includes(h.directiveName))r+=h.sourceContent;else if(h.directiveName=="php"){if(h.isClosedBy!=null){let l=new ir;r+="@php"+l.emulatePhpNode(h.documentContent)}}else r+=new ir().emulateString(h.sourceContent);else if(h instanceof Ie)r+=h.sourceContent;else if(h instanceof wi)r+=h.nodeContent;else if(h instanceof Zi)r+=h.sourceContent;else if(h instanceof Ni)r+=h.sourceContent;else if(h instanceof ri)r+=new ir().emulatePhpTag(h.sourceContent);else debugger}),r}}});var Zo,Ze,ta=St(()=>{"use strict";Fe();un();bn();bs();Ns();Nn();je();Zo=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return Zo.breakOperators.some(e=>t.includes(e))}parse(t){for(this.tokens=[],this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ze(this.cur)){let e=this.cur,s=Di(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_ForwardSlash){tn(this,!0);continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_Asterisk){en(this,!0);continue}if(this.cur!=null)if(this.cur==="!"&&this.next!=="="){if(this.currentContent.length>0){let s=new Zt;s.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(s)}let e=new kr;e.sourceContent=this.cur,this.tokens.push(e),this.currentContent=[];continue}else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Zt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="",s=!1;return this.tokens.forEach(r=>{if(r instanceof kr){s=!0,e+=r.sourceContent+" ";return}r instanceof Zt&&(s?e+=r.content.trimLeft():e+=r.content),s=!1}),e}},Ze=Zo;Ze.breakOperators=["!"],Ze.instance=new Zo});var Rh,ti,ea=St(()=>{"use strict";Fe();un();bn();bs();Ns();Nn();je();Rh=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return t.includes("fn(")&&t.includes("=>")}parse(t){for(this.tokens=[],this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ze(this.cur)){let e=this.cur,s=Di(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_ForwardSlash){tn(this,!0);continue}if(this.cur==Z.Punctuation_ForwardSlash&&this.next==Z.Punctuation_Asterisk){en(this,!0);continue}if(this.cur!=null)if(this.cur==="f"&&this.next=="n")if(Y.ctypePunct(this.prev)||Y.ctypeSpace(this.prev)||this.prev==null){this.currentContent.push(this.cur),this.currentContent.push(this.next),this.currentContent.push(" "),this.currentIndex+=1;continue}else this.currentContent.push(this.cur);else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Zt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="";return this.tokens.forEach(s=>{s instanceof Zt&&(e+=s.content)}),e}},ti=Rh;ti.breakOperators=["!"],ti.instance=new Rh});var nr,wh=St(()=>{"use strict";Fe();je();un();bn();Nn();nr=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[];this.keyValueTokens=0;this.elements=0}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getNumberOfElements(){return this.elements}getNumberOfKeyValuePairs(){return this.keyValueTokens}getIsAssoc(){return this.elements==this.keyValueTokens}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new He;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!Y.ctypeSpace(this.cur)){if(ze(this.cur)){let s=this.cur,r=Di(this);this.pushChar(s),this.currentContent=this.currentContent.concat(r.value.split("")),this.pushChar(s),this.currentIndex=r.endedOn;continue}if(this.cur==Z.LeftBracket){this.checkCurrentContent(),this.tokens.push(new as);continue}else if(this.cur==Z.RightBracket)this.checkCurrentContent(),this.tokens.push(new xr);else if(this.cur==Z.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new Qs),this.currentContent=[];else if(this.cur==Z.Punctuation_Equals&&this.next==Z.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new Er);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e==null||e.elements.filter(function(s){return!(s.value instanceof Qs)}).forEach(s=>{this.elements+=1,s.key!=null&&s.value!=null&&(this.keyValueTokens+=1)}),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,s)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=s==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof as){let r=this.findEndOfArray(t.slice(e));return e+=r.length,r.shift(),r.pop(),this.createArray(r,!0)}return null}createArray(t,e){let s=new ys;this.createdArrays.push(s);for(let r=0;r<t.length;r++){let h=t[r],l=null;if(r+1<t.length&&(l=t[r+1]),l instanceof Qs||l==null){let c=new vs;c.value=h,s.elements.push(c),r+=1;continue}else if(l instanceof Er){let c=t[r+2];if(c instanceof as){let f=this.findEndOfArray(t.slice(r+2)),m=new vs;r+=f.length+1,f.shift(),f.pop(),m.key=h,m.value=this.createArray(f,!1),s.elements.push(m);continue}else{let f=new vs;f.key=h,f.value=c,s.elements.push(f),r+=3;continue}}else if(h instanceof as){let c=this.findEndOfArray(t.slice(r)),f=new vs;r+=c.length,c.shift(),c.pop(),f.value=this.createArray(c,!1);continue}}return s}findEndOfArray(t){let e=[],s=0;for(let r=0;r<t.length;r++){let h=t[r];if(e.push(h),h instanceof as){s+=1;continue}else if(h instanceof xr){if(s-=1,s<=0)break;continue}}return e}}});var Pv,sr,ia,Dv=St(()=>{"use strict";Pv=Xi(require("crypto")),sr=Xi(require("fs")),ia=class{constructor(t){this.cacheDir="";this.cacheVersion="3";this.cacheDir=t}generateSHA1Hash(t){let e=Pv.default.createHash("sha1");return e.update(t),"_pint"+this.cacheVersion+"_"+e.digest("hex")}getCachePath(t){return this.cacheDir+this.generateSHA1Hash(t)+".json"}canCache(t){return typeof t=="undefined"?!1:t.trim().length>0}has(t){return typeof t=="undefined"?!1:sr.existsSync(this.getCachePath(t))}serializeMap(t){return JSON.stringify(Array.from(t.entries()))}unserializeMap(t){let e=JSON.parse(t);return new Map(e)}put(t,e,s){let r=this.getCachePath(t),h={resultMapping:this.serializeMap(e),contentMapping:this.serializeMap(s)};sr.writeFileSync(r,JSON.stringify(h))}get(t){let e=sr.readFileSync(this.getCachePath(t),{encoding:"utf8"}),s=JSON.parse(e);return{contentMapping:this.unserializeMap(s.contentMapping),resultMapping:this.unserializeMap(s.resultMapping)}}isValid(t,e){if(t.size!==e.size)return!1;for(let[s,r]of t.entries())if(!e.has(s)||e.get(s)!==r)return!1;return!0}}});var Re,Fh,Rv,ls,Or,wv=St(()=>{"use strict";Re=Xi(require("fs")),Fh=Xi(require("path"));Fe();je();Dv();({execSync:Rv}=require("child_process")),ls=class{constructor(t,e,s,r){this.tmpDir="";this.cacheDir="";this.resultMapping=new Map;this.contentMapping=new Map;this.pintCommand="";this.templateFile="";this.wasCached=!1;this.outputPintResults=!1;this.markerSuffix="";this.pintConfigPath="";this.phpDocs=new Map;this.phpTagDocs=new Map;this.cleanupFiles=[];this.cleanupDirs=[];this.defaultConfig={preset:"laravel",rules:{blank_line_before_statement:!1,concat_space:{spacing:"one"},no_unused_imports:!1,method_argument_space:!0,single_trait_insert_per_statement:!0,types_spaces:{space:"single"}}};this.tmpDir=t,this.cacheDir=e,this.pintConfigPath=r,this.markerSuffix=this.markerSuffix+Y.makeSlug(27);let h=this.tmpDir+"/pint.json";if(ls.processConfigPath==null)if(this.pintConfigPath.trim().length==0||!Re.existsSync(this.pintConfigPath))Re.writeFileSync(h,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),ls.processConfigPath=h;else try{let l=JSON.parse(Re.readFileSync(this.pintConfigPath,{encoding:"utf8"}));typeof l.rules!="undefined"?l.rules.no_unused_imports=!1:l.rules={no_unused_imports:!1},Re.writeFileSync(h,JSON.stringify(l),{encoding:"utf8"}),ls.processConfigPath=h}catch{Re.writeFileSync(h,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),ls.processConfigPath=h}Re.existsSync(this.cacheDir)||Re.mkdirSync(this.cacheDir),this.cache=new ia(this.cacheDir),Re.existsSync(this.tmpDir)||Re.mkdirSync(this.tmpDir),this.pintCommand=s}setTemplateFilePath(t){this.templateFile=t}getTemplateFile(){return this.templateFile}prepareContent(t){let e=/[^\S\n]/g,s=/['"`]/g,r=t.replace(e,"");return r=r.replace(s,""),r}getResultMapping(){return this.resultMapping}getPhpBlockContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.sourceContent);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.sourceContent}getEchoContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.content);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.content}getDirectiveContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return"("+this.resultMapping.get(t.overrideParams)+")";let e=this.prepareContent(t.directiveParameters);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return"("+this.resultMapping.get(s)+")"}return t.directiveParameters}getDirectivePhpContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return this.resultMapping.get(t.overrideParams);let e=this.prepareContent(t.documentContent);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.documentContent}transform(t){let e=`<?php 
`,s=0;return t.getAllNodes().forEach(r=>{if(r instanceof dt){if(r.directiveName=="php"&&r.isClosedBy!=null&&r.hasValidPhp()){if(r.documentContent.trim().length==0)return;let l="";l+=`<?php 
`,l+=r.documentContent,l+=`
`,r.overrideParams="__pint"+s.toString();let c=this.prepareContent(r.documentContent);this.contentMapping.has(c)||this.contentMapping.set(c,r.overrideParams),this.phpDocs.set(r.overrideParams,l),s+=1}else if(r.hasDirectiveParameters&&!r.hasJsonParameters&&r.hasValidPhp())if(r.directiveName=="php"){let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=IPD"+this.markerSuffix,e+=`
`,Y.breakByNewLine(h).forEach(c=>{e+=c.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideParams="__pint"+s.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),s+=1}else if(r.directiveName=="forelse"||r.directiveName=="foreach"){let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=FRL"+this.markerSuffix,e+=`
`,e+="foreach(",Y.breakByNewLine(h).forEach(c=>{e+=c.trimLeft()+`
`}),e+=") {}",e+=`
`,r.overrideParams="__pint"+s.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),s+=1}else{let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",Y.breakByNewLine(h).forEach(c=>{e+=c.trimLeft()+`
`}),e+=";",e+=`
`,r.overrideParams="__pint"+s.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),s+=1}}else if(r instanceof Ie&&r.hasValidPhp()){let h=r.content.trim();if(h.length==0)return;e+="// "+s.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",Y.breakByNewLine(h).forEach(c=>{e+=c.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideContent="__pint"+s.toString();let l=this.prepareContent(r.content);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideContent),s+=1}else if(r instanceof Ni)r.parameters.length&&r.parameters.forEach(h=>{if(h.type==1&&h.directive!=null&&!h.directive.hasJsonParameters&&h.directive.hasValidPhp()){let l=h.directive.directiveParameters.substring(1,h.directive.directiveParameters.length-1).trim();if(l.length==0)return;e+="// "+s.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",Y.breakByNewLine(l).forEach(f=>{e+=f.trimLeft()+`
`}),e+=";",e+=`
`,h.directive.overrideParams="__pint"+s.toString();let c=this.prepareContent(h.directive.directiveParameters);this.contentMapping.has(c)||this.contentMapping.set(c,h.directive.overrideParams),s+=1}else if(h.type==3&&h.inlineEcho!=null&&h.inlineEcho.hasValidPhp()){let l=h.inlineEcho.content.trim();e+="// "+s.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",Y.breakByNewLine(l).forEach(f=>{e+=f.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,h.inlineEcho.overrideContent="__pint"+s.toString();let c=this.prepareContent(h.inlineEcho.content);this.contentMapping.has(c)||this.contentMapping.set(c,h.inlineEcho.overrideContent),s+=1}});else if(r instanceof ri&&r.hasValidPhp()){let l=r.sourceContent.trim().substring(5).trimLeft();if(l=l.trimRight().substring(0,l.length-2).trim(),l.length==0)return;r.overrideContent="__pint"+s.toString();let c=this.prepareContent(r.sourceContent);this.contentMapping.has(c)||this.contentMapping.set(c,r.overrideContent),this.phpTagDocs.set(r.overrideContent,r.sourceContent+"KEEP"),s+=1}}),e}format(t){let e=this.transform(t);if(this.wasCached=!1,this.cache.canCache(this.templateFile)&&this.cache.has(this.templateFile))try{let g=this.cache.get(this.templateFile);if(this.cache.isValid(g.contentMapping,this.contentMapping))return this.contentMapping=g.contentMapping,this.resultMapping=g.resultMapping,this.wasCached=!0,this.resultMapping}catch{}let s="";try{s=this.callLaravelPint(e)}catch(g){return console.log(g.stdout.toString()),this.cleanupFiles.forEach(C=>{Re.unlinkSync(C)}),this.cleanupDirs.forEach(C=>{Re.rmdirSync(C,{recursive:!0})}),this.outputPintResults&&console.error(g),this.resultMapping}this.cleanupFiles.forEach(g=>{Re.unlinkSync(g)});let r=Y.breakByNewLine(s),h=[],l=this.markerSuffix,c=-1,f="",m=!1;return r.forEach(g=>{if(g.endsWith(l)){m=!0;var b=parseInt(g.substring(2).trim().substring(0,g.indexOf("="))),C=g.substring(g.indexOf("=")+1,g.indexOf("=")+4);if(f==""&&(f=C),c==-1){c=b;return}else{this.resultMapping.set("__pint"+c.toString(),this.cleanPintOutput(h.join(`
`),f)),h=[],c=b,f=C;return}}m&&h.push(g)}),h.length>0&&(this.resultMapping.set("__pint"+c.toString(),this.cleanPintOutput(h.join(`
`),f)),h=[],c=-1),this.cache.canCache(this.templateFile)&&this.cache.put(this.templateFile,this.resultMapping,this.contentMapping),this.resultMapping}cleanPintOutput(t,e){let s=t;return e=="DIR"?(s=s.trim().trimRight(),s=s.substring(7).trimLeft(),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="PHP"?(s=t.trim().substring(5).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight())):e=="IPD"?(s=t.trim().trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="FRL"?(s=s.trimLeft().substring(8).trimLeft().substring(1).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight()),s=s.substring(0,s.length-1).trimRight(),s=s.substring(0,s.length-1).trimRight(),s=s.substring(0,s.length-1).trimRight()):e=="ECH"?(s=t.trim(),s=s.substring(4).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="BHP"&&(s=t.trim()),s}callLaravelPint(t){if(this.wasCached)return"";let e=Y.makeSlug(26),s="",r="",h="";if(this.phpDocs.size>0||this.phpTagDocs.size>0){let l=this.tmpDir+"/"+Y.makeSlug(32)+"/";Re.mkdirSync(l);let c=l+e+".php";Re.writeFileSync(c,t,{encoding:"utf8"}),this.cleanupFiles.push(c),this.cleanupDirs.push(l),this.phpDocs.forEach((m,g)=>{let b=l+e+"php_"+g+".php";Re.writeFileSync(b,m,{encoding:"utf8"}),this.cleanupFiles.push(b)}),this.phpTagDocs.forEach((m,g)=>{let b=l+e+"tag_php_"+g+".php";Re.writeFileSync(b,m,{encoding:"utf8"}),this.cleanupFiles.push(b)});let f=this.pintCommand.replace("{file}",`"${l}"`)+` --config "${ls.processConfigPath}"`;r=Rv(f).toString(),this.phpDocs.forEach((m,g)=>{let b=l+e+"php_"+g+".php",E=Re.readFileSync(b,{encoding:"utf8"}).trim().substring(5);this.resultMapping.set(g,E)}),this.phpTagDocs.forEach((m,g)=>{let b=l+e+"tag_php_"+g+".php",E=Re.readFileSync(b,{encoding:"utf8"}).trim();E=E.substring(0,E.length-4),this.resultMapping.set(g,E)}),h=Re.readFileSync(c,{encoding:"utf8"})}else{let l=this.tmpDir+e+".php";Re.writeFileSync(l,t,{encoding:"utf8"});let c=this.pintCommand.replace("{file}",`"${l}"`)+` --config "${ls.processConfigPath}"`;s=Fh.basename(l),r=Rv(c).toString(),this.cleanupFiles.push(l),h=Re.readFileSync(l,{encoding:"utf8"})}if(this.outputPintResults&&typeof this.templateFile!="undefined"&&this.templateFile!=null&&r.includes(s)){let l=Y.breakByNewLine(r),c=[];for(let f=0;f<l.length;f++){let m=l[f].trim();m.length==0||m=="\u2713"||(m.startsWith("\u2713")&&(m=m.substring(1).trim()),m.includes(s)&&(m=Fh.basename(this.templateFile)+m.substring(m.indexOf(s)+s.length)),c.push(m))}console.log(c.join(`
`))}return h}},Or=ls;Or.processConfigPath=null});var na,Fv=St(()=>{"use strict";na=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var Qn,Bh=St(()=>{"use strict";Fe();Fv();Qn=class{static print(t,e,s){let r=new na(e,s);if(r.append("[").newLine(),t.elements.length>0){let h="";r.indent(),t.elements.forEach(l=>{t.maxKeyLength>0&&l.key!=null&&(h=""),l.key!=null?(r.append(l.key.sourceContent+h).append(" => "),l.value!=null&&(l.value instanceof ys?l.value.elements.length==0?r.append("[],"):r.append(Qn.print(l.value,e,s+1)):r.append(l.value.sourceContent))):l.value!=null&&(l.value instanceof ys?r.append(Qn.print(l.value,e,s+1)):r.append(l.value.sourceContent)),r.appendNoRepeat(",").newLine(),l.isLast||r.indent()})}return s>1&&r.outdent(),r.append("]"),r.getContents()}}});var Lr,Bv=St(()=>{"use strict";je();Lr=class{static printComment(t,e,s){if(t.isMultiline()){let r=Y.breakByNewLine(t.innerContent.trim()),h=[];r.forEach(f=>{h.push(" ".repeat(e+s)+f.trim())});let l=h.join(`
`),c=`{{--
`;return c+=l,c+=`
`+" ".repeat(s)+"--}}",c}return"{{-- "+t.innerContent.trim()+" --}}"}}});var Ke,sa=St(()=>{"use strict";je();Ke=class{static indentRelative(t,e,s){let r=Y.breakByNewLine(t),h=[];for(let f=0;f<r.length;f++)if(r[f].trim().length>0){h=r.slice(f);break}for(let f=h.length-1;f>=0&&h[f].trim().length==0;f--)h.pop();let l=-1,c="";for(let f=0;f<h.length;f++){let m=h[f],g=m.trimLeft(),b=m.length-g.length;m.trim().length!=0&&(f==0||b<l)&&(l=b,c=m)}if(l==s&&(l=0),l>=0){let f=" ".repeat(e);for(let m=0;m<h.length;m++){let g=h[m];if(g.trim().length==0){h[m]="";continue}let b=g.substring(l);if(m==0){h[m]=g.trimLeft();continue}else h[m]=f+b}}return h.join(`
`)}static shiftIndentWithLastLineInline(t,e,s,r=!1){let h=Y.breakByNewLine(t.trim()),l=[];if(h.length>1){let c=!0;for(let f=1;f<h.length;f++){let m=h[f],g=m.length-m.trim().length;if(s-g!=0){c=!1;break}}if(c)return t.trim()}for(let c=0;c<h.length;c++){if(c==0&&r){l.push(h[c]);continue}let f=h[c];f.trim().length==0?l.push(""):l.push(" ".repeat(Math.max(0,s-e))+f)}return l.join(`
`)}static shiftIndent(t,e,s=!1,r,h=!1,l=!1){let c=Y.breakByNewLine(t.trim()),f=[];if(c.length>1){let m=!0;for(let g=1;g<c.length;g++){let b=c[g],C=b.length-b.trim().length;if(e-C!=0){m=!1;break}}if(m){if(c[0].trimLeft().length==c[0].length&&e==r.tabSize&&h){let g=" ".repeat(r.tabSize);return c.forEach(b=>{f.push(g+b)}),f.join(`
`)}return t.trim()}}for(let m=0;m<c.length;m++){if(m==0&&s){f.push(c[m]);continue}let g=c[m];g.trim().length==0?f.push(""):l&&m==c.length-1?f.push(" ".repeat(e-r.tabSize)+g):f.push(" ".repeat(e)+g)}return f.join(`
`)}static shiftClean(t,e){let s=Y.breakByNewLine(t),r=[],h=" ".repeat(e),l=!1;return s.forEach(c=>{c.trim().length>0&&(l=!0),l&&(c.trim().length==0?r.push(""):r.push(h+c))}),r.join(`
`)}static inferIndentLevel(t,e,s){let r=0,h=-1;for(let l=0;l<t.length;l++){let c=t[l];if(c.includes(e)){let f=c.trimLeft();r=c.length-f.length,h=l;break}}if(h>0)for(let l=h-1;l>=0;l--){let c=t[l],f=c.trim(),m=c.trimLeft(),g=c.length-f.length;if(m.length!=0&&g!=r&&g<r){let b=r-g;return{targetLevel:r,referenceLevel:g,sourceTabSize:b}}}return{targetLevel:r,referenceLevel:r,sourceTabSize:s}}static indent(t,e,s){let r=Ke.inferIndentLevel(t,e,s);return" ".repeat(r.targetLevel)}}});function rr(i,t){if(i.includes(`
`)&&(i.includes("match")||i.includes("=>")||i.includes("&&")||i.includes(",")||i.includes("("))){let e=Y.breakByNewLine(i),s=0;return e.forEach(r=>{let h=r.trim().length;h>s&&(s=h)}),s+Math.ceil(s/2)}return t}function ra(i){let t=Y.breakByNewLine(i),e=[],s=!1;for(let r=0;r<t.length;r++){let h=t[r];if(h.trimRight().endsWith("//")&&!s){e.push(h.trimRight().substring(0,h.trimRight().length-2).trimRight()),s=!0;continue}e.push(h)}return e.join(`
`)}function oa(i){let t=Y.breakByNewLine(i),e=[],s=!1,r=!1,h=!0;for(let l=0;l<t.length;l++){let c=t[l];if(!s&&c.trimRight().endsWith("[")){r=!0,e.push(c);continue}if(c.trimRight().endsWith(",")&&r&&!s)if(c.trimRight().endsWith("//")){h=!1;break}else e.push(c+"//"),s=!0;else e.push(c)}return h?{content:e.join(`
`),addedHack:s}:{content:i,addedHack:!1}}var aa=St(()=>{"use strict";je()});function $I(i){let t="",e=Y.breakByNewLine(i);for(let s=0;s<e.length;s++)t+=e[s].trim();return t}var us,Pr,Mv=St(()=>{"use strict";ta();Ps();ea();wh();je();Bh();sa();aa();us=class{static getReasonableDirectivePhpOptions(t,e){return us.defaultControlDirectiveNames.includes(t.name)?{...e,trailingCommaPHP:!1}:e}static printDirective(t,e,s,r,h,l){var m,g,b,C;let c=t.directiveName.trim(),f="@"+c;if(t.hasDirectiveParameters){let E=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&r&&t.hasValidJson()){let w=t.getPhpContent().trim();w.startsWith("(")&&w.endsWith(")")&&(w=w.substring(1),w=w.substring(0,w.length-1));let G=r(w);G.includes(`
`)&&(G=Ke.shiftIndent(G,h,!0,e)),E="("+G+")"}}else if(e.formatDirectivePhpParameters&&s!=null&&t.hasValidPhp()){if(l!=null){let K=e.spacesAfterDirective;us.defaultControlDirectiveNames.includes(c)&&(K=e.spacesAfterControlDirective);let z="@"+c+" ".repeat(K),at=l.getDirectiveContent(t);if(at=Ke.shiftIndent(at,h,!0,e),us.defaultControlDirectiveNames.includes(c)&&at.includes(`
`)){let B=Y.breakByNewLine(at),q=[];for(let _t=0;_t<B.length;_t++){let it=B[_t];if(_t==0){q.push(it);continue}q.push(" ".repeat(z.length+1)+it)}at=q.join(`
`)}return z+at}let w=t.getPhpContent().trim();w.startsWith("(")&&w.endsWith(")")&&(w=w.substring(1),w=w.substring(0,w.length-1));let G=w,rt=!1,lt=er();if(w.startsWith("[")&&w.endsWith("]")&&((m=t.startPosition)==null?void 0:m.line)!=((g=t.endPosition)==null?void 0:g.line)){let K="<?php "+w,z=oa(K);z.addedHack&&(K=z.content),G=s(K,e,us.getReasonableDirectivePhpOptions(t,{...lt,printWidth:rr(w,lt.printWidth)})),z.addedHack&&(G=ra(G));let at=new nr,B=at.parse(Y.replaceAllInString(G,`
`," ")),q=0;return at.getIsAssoc()||G.includes("match")||G.includes("=>")?(G.includes(`
`)&&!rt&&(G=Ke.shiftIndent(G,h,!0,e)),Ze.couldReflow(G)&&(G=Ze.instance.reflow(G)),ti.couldReflow(G)&&(G=ti.instance.reflow(G)),G="@"+c+" ".repeat(e.spacesAfterDirective)+"("+G+")"):B!=null&&(G=Qn.print(B,e.tabSize,1),q>0&&(G=Y.removeEmptyNewLines(Ke.shiftIndent(G,q,!0,e))),G.includes(`
`)&&!rt&&(G=Ke.shiftIndent(G,h,!0,e)),G="@"+c+" ".repeat(e.spacesAfterDirective)+"("+G+")"),G}else try{let K=er();((b=t.startPosition)==null?void 0:b.line)==((C=t.endPosition)==null?void 0:C.line)&&(K={...er(),printWidth:1/0},rt=!0),G=s("<?php "+w,e,us.getReasonableDirectivePhpOptions(t,K))}catch{}t.directiveName.toLowerCase()=="forelse"&&(G=G.substring(9),G=G.substring(0,G.length-14)),Ze.couldReflow(G)&&(G=Ze.instance.reflow(G)),ti.couldReflow(G)&&(G=ti.instance.reflow(G)),G.includes(`
`)&&!rt?E="("+Ke.shiftIndent(G,h,!0,e)+")":(rt&&(G=$I(G)),E="("+G+")")}let O=e.spacesAfterDirective;us.defaultControlDirectiveNames.includes(c)&&(O=e.spacesAfterControlDirective),f+=" ".repeat(O)+E}return f}},Pr=us;Pr.defaultControlDirectiveNames=["if","elseif","unless","while","for","foreach","forelse"]});var cs,Uv=St(()=>{"use strict";ta();Ps();ea();Fe();je();sa();aa();cs=class{static printEcho(t,e,s,r,h){var g,b;let l="{{ ",c=" }}";t instanceof rs?(l="{!! ",c=" !!}"):t instanceof os&&(l="{{{ ",c=" }}}");let f=l,m=t.content.trim();if(e.formatInsideEcho&&s!=null&&t.hasValidPhp()){let C=xv(),E=m;if(((g=t.startPosition)==null?void 0:g.line)!=((b=t.endPosition)==null?void 0:b.line)){if(C={...C,printWidth:rr(m,C.printWidth)},e.useLaravelPint)h!=null&&(E=h.getEchoContent(t));else{let w=oa(m);w.addedHack&&(m=w.content),E=s("<?php "+m,e,C),w.addedHack&&(E=ra(E)),Ze.couldReflow(E)&&(E=Ze.instance.reflow(E)),ti.couldReflow(E)&&(E=ti.instance.reflow(E))}if(e.echoStyle=="inline"){let w=Ke.shiftIndentWithLastLineInline(E,e.tabSize,r+e.tabSize,!0).trim();return l.trimRight()+" "+w+" "+c.trim()}return l.trim()+`
`+Ke.shiftIndent(E,r+e.tabSize,!1,e,!0)+`
`+" ".repeat(r)+c.trim()}else e.useLaravelPint?h!=null&&(E=h.getEchoContent(t)):(E=s("<?php "+m+";",e,{...C,printWidth:1/0}),E=E.trimRight().substring(0,E.trimRight().length-1),Ze.couldReflow(E)&&(E=Ze.instance.reflow(E)),ti.couldReflow(E)&&(E=ti.instance.reflow(E))),E.includes(`
`)&&(E=Y.collapse(E));m=E}return f+=m+c,f}}});var ha,Hv=St(()=>{"use strict";Lv();ta();Ps();ea();Fe();wh();je();In();wv();Bh();Bv();Mv();Uv();sa();aa();ha=class{constructor(t){this.formatIgnoreStart="format-ignore-start";this.formatIgnoreEnd="format-ignore-end";this.isInsideIgnoreFormatter=!1;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.attachedDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.echoParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.useLaravelPint=!1;this.pintTransformer=null;this.filePath="";this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,phpOptions:null,echoStyle:"block",useLaravelPint:!1,pintCommand:"pint {filename}",pintTempDirectory:"",pintCacheDirectory:"",pintCacheEnabled:!0,pintConfigPath:""};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}getPintTransformer(){return this.pintTransformer}setPintTransformer(t){this.pintTransformer=t}setUsingLaravelPint(t){this.useLaravelPint=t}getUsingLaravelPint(){return this.useLaravelPint}setParentTransformer(t){return this.parentTransformer=t,this.setUsingLaravelPint(t.getUsingLaravelPint()),this.setPintTransformer(t.getPintTransformer()),this}withJsonFormatter(t){return this.jsonFormatter=t,this}withFilePath(t){return this.filePath=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(s=>{s instanceof Zt?e+=s.getOutputContent():s instanceof ri?e+=s.sourceContent:s instanceof dt&&s.directiveName=="verbatim"&&(e+=s.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t,e){return Pr.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter,e,this.pintTransformer)}makeSlug(t){let e=Y.makeSlug(t);return this.slugs.includes(e)?this.makeSlug(t+1):(this.slugs.push(e),e)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerEchoParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerEchoParameter(t,e):this.echoParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerAttachedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerAttachedDirective(t,e):this.attachedDirectives.set(t,e)}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline||t.fragmentPosition==2||t.fragmentPosition==1)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let s=this.open(e),r=this.close(e);return`
`+s+r+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((s,r)=>{let h=this.open(r),l=this.indentLevel(h),c=s.sourceContent;this.transformOptions.formatDirectivePhpParameters&&s.hasValidPhp()&&(this.useLaravelPint?this.pintTransformer!=null&&(c=this.pintTransformer.getPhpBlockContent(s)):this.phpTagFormatter!=null&&(c=this.phpTagFormatter(c,this.transformOptions,null),Ze.couldReflow(c)&&(c=Ze.instance.reflow(c)),ti.couldReflow(c)&&(c=ti.instance.reflow(c))),c=Ke.shiftIndent(c,l,!0,this.transformOptions)),e=e.replace(h,c)}),this.dynamicElementPhpNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,this.printInlinePhp(s))}),this.inlinePhpNodes.forEach((s,r)=>{e=e.replace(r,this.printInlinePhp(s))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e,this.transformOptions,null),Ze.couldReflow(e)&&(e=Ze.instance.reflow(e)),ti.couldReflow(e)&&(e=ti.instance.reflow(e)),e=Y.replaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let s=!0,r=!0,h=0,l=0,c=0,f=!0;for(let m=0;m<e.length;m++){let g=e[m];g instanceof Ie&&g.isInlineEcho?(s=!1,h+=1,l+=1):g instanceof Zt?(c+=1,g.content.trim().length>0&&(r=!1)):l+=1}return h==0&&(f=!0),l>0&&s==!0?!1:(r==!1&&l==0&&(f=!0),r==!0&&l==0&&(f=!0),f)}preparePairedDirective(t){var l,c,f,m,g,b,C;let e=this.makeSlug(t.sourceContent.length),s=t.directiveName.toLowerCase(),r=(l=t.childrenDocument)==null?void 0:l.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){if(t.originalAbstractNode!=null&&t.originalAbstractNode.prevNode instanceof Ie&&t.originalAbstractNode instanceof dt&&t.originalAbstractNode.directiveName=="if"){let w=((f=(c=t.originalAbstractNode.startPosition)==null?void 0:c.index)!=null?f:0)-((g=(m=t.originalAbstractNode.prevNode.endPosition)==null?void 0:m.index)!=null?g:0);if(w>0&&w<3)return this.registerAttachedDirective(e,{directive:t,innerDoc:r,slug:e,isInline:!1,virtualElementSlug:""}),e}let E="",O=`${this.open(e)}
`;if(s=="php"||s=="verbatim")E=this.makeSlug(15),O+=this.pair(E);else{let w=this.isAllInlineNodes((b=t.children)!=null?b:[]),G=this.containsBladeStructures((C=t.children)!=null?C:[]);this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1&&!w&&!G||!t.containsAnyFragments&&w&&G?(E=this.makeSlug(15),O+=this.pair(E,r)):O+=r}return O+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(E)),this.virtualStructureClose.push(this.close(E)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:r,slug:e,directive:t,virtualElementSlug:E,isInline:!1}),O}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let h=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:r,slug:h,directive:t,virtualElementSlug:"",isInline:!0}),h+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var s,r,h,l,c,f,m,g,b;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let lt=this.makeSlug((r=(s=t.constructedFrom)==null?void 0:s.sourceContent.length)!=null?r:0),K=this.makeSlug((l=(h=t.elseNode)==null?void 0:h.sourceContent.length)!=null?l:0),z=(c=t.truthDocument)==null?void 0:c.document.transform().setParentTransformer(this).toStructure(),at=(f=t.falseDocument)==null?void 0:f.document.transform().setParentTransformer(this).toStructure(),B={truthDoc:z,falseDoc:at,forElse:t,truthClose:this.close(lt),emptyOpen:this.open(K),pairClose:this.close(K),truthSlug:lt,falseSlug:K},q=this.open(lt);return q+=z,q+=B.truthClose,q+=`
`+B.emptyOpen+`
`,q+=at+"",q+=B.pairClose,this.registerForElseWithEmpty(B),q}let C=t.constructedFrom,E=(m=t.truthDocument)==null?void 0:m.document.transform().setParentTransformer(this).toStructure(),O=this.makeSlug(C.sourceContent.length),w=this.makeSlug((b=(g=C.isClosedBy)==null?void 0:g.sourceContent.length)!=null?b:0),G={truthDoc:E,falseDoc:"",forElse:t,truthSlug:O,falseSlug:"",pairClose:this.close(w),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push(G);let rt=this.open(O);return rt+=E,rt+=this.close(O),rt}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,s){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,s):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:s}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let s=this.makeSlug(10),r=this.makeSlug(10),h={node:t,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(r)};return this.registerVirtualComment(h),h.pairOpen+`
`+h.virtualElement+`
`+h.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var s,r;if(t.isClosingTag)return((s=t.name)==null?void 0:s.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((r=t.name)==null?void 0:r.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let h=t.name.inlineName;h.startsWith(":")&&(h=h.substring(1)),e+='slot name="'+h+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(h=>{var l,c;if(h.type==0)if(h.isExpression){let f=this.makeSlug(h.content.length);this.registerExpressionParameter(f,h),e+=f+" "}else e+=h.content+" ";else if(h.type==2)e+=h.name+" ";else if(h.type==1){let f=this.makeSlug((c=(l=h.directive)==null?void 0:l.sourceContent.length)!=null?c:0);this.registerDirectiveParameter(f,h),e+=f+" "}else if(h.type==3&&h.inlineEcho!=null){let f=this.makeSlug(h.inlineEcho.content.length);this.registerEchoParameter(f,h),e+=f+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let s=[],r="";t.cases.forEach((C,E)=>{var K,z;let O=C.head,w=(K=C.childDocument)==null?void 0:K.document.transform().setParentTransformer(this).toStructure(),G=this.makeSlug(O.sourceContent.length),rt=this.makeSlug(5),lt={case:C,slug:G,doc:w,virtualOpen:this.selfClosing(rt),virtualClose:this.close(rt),pairOpen:this.open(G),pairClose:this.close(G),isFirst:E==0,isLast:E==t.cases.length-1,leadingClose:"",leadingOpen:""};if(C.leadingDocument!=null){let at=this.makeSlug(25);lt.leadingOpen=this.open(at),lt.leadingClose=this.close(at),r+=`
`+C.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}r+=lt.pairOpen,((z=C.head)==null?void 0:z.directiveName)=="default"&&(r+=lt.virtualOpen),r+=w,r+=lt.pairClose,s.push(lt)});let h=s[0].pairOpen,l=s[s.length-1].pairClose,c=this.makeSlug(10),f=this.open(c),m=this.close(c),g={switchNode:t,pairOpen:h,pairClose:l,structures:s,virtualSwitchClose:m,virtualSwitchOpen:f},b=`
`+f+`
`+r+`
`+m;return this.registerSwitchStatement(g),b}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}containsComponents(t){for(let e=0;e<t.length;e++)if(t[e]instanceof Ni)return!0;return!1}containsBladeStructures(t){for(let e=0;e<t.length;e++){let s=t[e];if(!(s instanceof Zt)){if(s instanceof dt&&(s.isClosingDirective||s.isClosingDirective||s.name=="elseif"||s.name=="else"))continue;return!0}}return!1}isAllInlineNodes(t){let e=0;for(let s=0;s<t.length;s++){let r=t[s];if(!(r instanceof Zt))if(r instanceof Ie){if(!r.isInlineEcho)return!1;e+=1}else if(r instanceof dt){if(r.isClosingDirective||r.name=="elseif"||r.name=="else")continue;return!1}else return!1}return e!=0}prepareConditions(t){if(t.fragmentPosition==3){if(t.chain.length==1&&t.constructedFrom!=null){let f=t.constructedFrom.clone();return f.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(f)}let s=[],r="";t.logicBranches.forEach((f,m)=>{var w,G,rt,lt,K,z,at,B,q,_t,it,vt,Mt;let g=f.head,b=(w=f.childDocument)==null?void 0:w.document.transform().setParentTransformer(this).toStructure(),C=this.makeSlug(g.sourceContent.length),E=this.makeSlug(10),O={branch:f,slug:C,doc:b,pairOpen:this.open(C),pairClose:this.close(C),virtualOpen:this.open(E),virtualClose:this.close(E),isFirst:m==0,isLast:m==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(((G=f.head)==null?void 0:G.directiveName)=="else"){r+=`
`+O.pairOpen;let Wt=this.makeSlug(25),Ut=this.containsBladeStructures((rt=f.head.children)!=null?rt:[]);f.head.containsChildStructures==!1&&f.head.containsAnyFragments==!1&&(((lt=f.head)==null?void 0:lt.children.length)<=2||((K=f.head)==null?void 0:K.children.length)>4)&&!this.isAllInlineNodes(f.head.children)&&!Ut?(O.virtualBreakOpen=this.open(Wt),O.virtualBreakClose=this.close(Wt),r+=`
`+O.virtualBreakOpen+`
`,r+=b,r+=`
`+O.virtualBreakClose+`
`+O.pairClose):(O.virtualBreakOpen=this.selfClosing(Wt),r+=O.virtualBreakOpen+`
`,r+=b,r+=`
`+O.pairClose)}else{let Wt=this.isAllInlineNodes((at=(z=f.head)==null?void 0:z.children)!=null?at:[]),Ut=this.containsBladeStructures((q=(B=f.head)==null?void 0:B.children)!=null?q:[]);if(((_t=f.head)==null?void 0:_t.containsAnyFragments)==!1&&((it=f.head)==null?void 0:it.containsChildStructures)==!1&&(((vt=f.head)==null?void 0:vt.children.length)<=2||((Mt=f.head)==null?void 0:Mt.children.length)>4)&&!Wt&&!Ut){let bt=this.makeSlug(25);O.virtualBreakOpen=this.open(bt),O.virtualBreakClose=this.close(bt),r+=O.pairOpen,r+=`
`+O.virtualBreakOpen,r+=b,r+=`
`+O.virtualBreakClose,r+=O.pairClose}else if(Wt){r+=`
`+O.pairOpen;let bt=this.makeSlug(25);O.virtualBreakOpen=this.selfClosing(bt),r+=O.virtualBreakOpen+`
`,r+=b,r+=`
`+O.pairClose}else r+=O.pairOpen,r+=`
`,r+=b,r+=`
`,r+=O.pairClose}s.push(O)});let h=s[0].pairOpen,l=s[s.length-1].pairClose,c={pairOpen:h,pairClose:l,structures:s,condition:t};return this.registerCondition(c),r}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),t.fragmentPosition==1||t.fragmentPosition==2?e:e+" "}toStructure(){let t="";this.useLaravelPint&&this.parentTransformer==null&&(this.pintTransformer=new Or(this.transformOptions.pintTempDirectory,this.transformOptions.pintCacheDirectory,this.transformOptions.pintCommand,this.transformOptions.pintConfigPath),this.pintTransformer.setTemplateFilePath(this.filePath),this.pintTransformer.format(this.doc)),this.doc.getRenderNodes().forEach(s=>{if(this.isInsideIgnoreFormatter){if(this.pushLiteralBlock(this.activeLiteralSlug,s),s instanceof Zi&&s.innerContent.trim().toLowerCase()==this.formatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}s instanceof Zt?t+=s.content:s instanceof Ri?s.cases.length>0?t+=this.prepareSwitch(s):t+=this.preparePairedDirective(s.constructedFrom):s instanceof ki?t+=this.prepareConditions(s):s instanceof dt?t+=this.prepareDirective(s):s instanceof Ie?t+=this.prepareEcho(s):s instanceof wi?t+=this.prepareForElse(s):s instanceof Zi?s.innerContent.trim()==this.formatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.pushStartLiteralBlock(this.activeLiteralSlug,s),t+=this.selfClosing(this.activeLiteralSlug)):t+=this.prepareComment(s):s instanceof Ni?t+=this.prepareComponent(s):s instanceof ri&&(t+=this.preparePhpBlock(s))});let e=this.doc.getParser().getFragmentsContainingStructures();if(e.length>0){let s=Se.fromText(t);e.forEach(r=>{var C,E,O,w,G,rt,lt,K;let h=this.doc.getParser().getText(((E=(C=r.start.endPosition)==null?void 0:C.offset)!=null?E:0)+1,(w=(O=r.end.startPosition)==null?void 0:O.offset)!=null?w:0),l=s.getParser().getFragmentsParser().getEmbeddedFragment(r.start.embeddedIndex),c=s.getParser().getFragmentsParser().getClosingFragmentAfter(l),f=s.getParser().getText(((rt=(G=l.endPosition)==null?void 0:G.offset)!=null?rt:0)+1,(K=(lt=c==null?void 0:c.startPosition)==null?void 0:lt.offset)!=null?K:0),m=this.makeSlug(16),g=r.start.name.toLowerCase()=="script",b=m;g?b="//"+m:b="/*"+m+"*/",t=t.replace(f,b),this.registerEmbeddedDocument(m,h,g)})}return t}withOptions(t){return this.transformOptions=t,this.useLaravelPint=this.transformOptions.useLaravelPint,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((s,r)=>{let h=this.selfClosing(r),l=this.printDirective(s,this.indentLevel(h));e=e.replace(h,l)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((s,r)=>{let h=this.printDirective(s,0);if(h.includes(`
`)){let l=this.indentLevel(r);l>0&&(h=Ke.shiftIndent(h,l,!0,this.transformOptions))}e=e.replace(r,h)}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((s,r)=>{let h=cs.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer);e=Y.replaceAllInString(e,r,h)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((s,r)=>{let h=this.printDirective(s,this.indentLevel(r));e=Y.replaceAllInString(e,r,h)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let s=t.trim();s.startsWith("<?php")==!1&&(s="<?php "+s);let r=er();return s=this.blockPhpFormatter(s,this.transformOptions,{...r,printWidth:rr(t,r.printWidth)}),e&&(s=`
`+s+`
`),Ze.couldReflow(s)&&(s=Ze.instance.reflow(s)),ti.couldReflow(s)&&(s=ti.instance.reflow(s)),s}removeLeadingWhitespace(t,e){let s=t.indexOf(e);if(s===-1)return t;let r=t.slice(0,s),h=t.slice(s+e.length);return r.replace(/[\s\uFEFF\xA0]+$/g,"")+e+h}findNewLeadingStart(t,e){let s=Y.breakByNewLine(t);for(let r=0;r<s.length;r++){let h=s[r];if(h.includes(e))return h.length-h.trim().length}return-1}transformPairedDirectives(t){let e=t;return this.attachedDirectives.forEach((s,r)=>{var g;e=this.removeLeadingWhitespace(e,r);let h=s.directive.documentContent;this.transformOptions.useLaravelPint?h=yv(h,null,this.transformOptions).trim():h=Ph(h).trim();let l=this.printDirective(s.directive,this.indentLevel(r)).trim(),c=this.findNewLeadingStart(e,r),f=l+h+`
`+((g=s.directive.isClosedBy)==null?void 0:g.sourceContent),m=Ke.shiftIndent(f,c+this.transformOptions.tabSize,!0,this.transformOptions,!1,!0);e=e.replace(r,m)}),this.pairedDirectives.forEach((s,r)=>{var f;let h=s.directive;if(s.virtualElementSlug.length>0){let m=this.open(s.virtualElementSlug),g=this.close(s.virtualElementSlug);this.virtualStructureOpens.push(m),this.removeLines.push(m),this.removeLines.push(g)}let l=this.open(r),c=this.close(r);if(h.directiveName.trim().toLowerCase()=="php"){let m=this.open(s.virtualElementSlug),g=this.indentLevel(m),b=s.directive.sourceContent,C=h.documentContent;if(this.transformOptions.formatDirectivePhpParameters)if(!this.useLaravelPint)C=Ke.shiftIndent(this.transformBlockPhp(h.innerContent,!0),g,!0,this.transformOptions),e=e.replace(l,b),e=e.replace(m,C);else if(this.pintTransformer!=null){C=this.pintTransformer.getDirectivePhpContent(h).trim();let E=Y.breakByNewLine(C),O=[];for(let w=0;w<E.length;w++){if(E[w].trim().length==0){O.push("");continue}O.push(" ".repeat(g)+E[w])}C=O.join(`
`),e=e.replace(l,b+`
`+C),e=e.replace(m,"")}else e=e.replace(l,b),e=e.replace(m,C)}else if(h.directiveName.trim().toLowerCase()=="verbatim"){let m=s.directive.sourceContent+`
`+Ke.shiftClean(h.innerContent,this.transformOptions.tabSize);e=e.replace(l,m)}else e=e.replace(l,this.printDirective(s.directive,this.indentLevel(l)));e=e.replace(c,(f=s.directive.isClosedBy)==null?void 0:f.sourceContent)}),this.inlineDirectives.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(s=>{var m;let r=s.forElse.constructedFrom,h=this.open(s.truthSlug),l=this.close(s.truthSlug),c=this.printDirective(r,this.indentLevel(h)),f=(m=r.isClosedBy)==null?void 0:m.sourceContent;e=e.replace(h,c),e=e.replace(l,f)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(s=>{var c,f;let r=this.open(s.truthSlug),h=s.forElse.constructedFrom,l=this.printDirective(h,this.indentLevel(r));e=e.replace(r,l),e=e.replace(s.pairClose,(c=h.isClosedBy)==null?void 0:c.sourceContent),e=e.replace(s.emptyOpen,(f=s.forElse.elseNode)==null?void 0:f.sourceContent),this.removeLines.push(s.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,cs.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),this.spanEchos.forEach((s,r)=>{e=e.replace(r,cs.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),e}pushStartLiteralBlock(t,e){var s;this.parentTransformer!=null?this.parentTransformer.pushStartLiteralBlock(t,e):(this.ignoredLiteralBlocks.set(t,[]),(s=this.ignoredLiteralBlocks.get(t))==null||s.push(e))}pushLiteralBlock(t,e){var s;this.parentTransformer!=null?this.parentTransformer.pushLiteralBlock(t,e):(s=this.ignoredLiteralBlocks.get(t))==null||s.push(e)}transformConditions(t){let e=t;return this.conditions.forEach(s=>{s.structures.forEach(r=>{let h=r.branch.head;if(r.virtualBreakOpen.length>0&&this.removeLines.push(r.virtualBreakOpen),r.virtualBreakClose.length>0&&(e=e.replace(r.virtualBreakClose,r.virtualBreakClose+`
`),this.removeLines.push(r.virtualBreakClose)),this.virtualStructureOpens.push(r.virtualOpen),this.removeLines.push(r.virtualOpen),this.removeLines.push(r.virtualClose),!r.isLast)this.removeLines.push(r.pairClose),e=e.replace(r.pairOpen,this.printDirective(h,this.indentLevel(r.pairOpen)));else{e=e.replace(r.pairOpen,this.printDirective(h,this.indentLevel(r.pairOpen)));let l=h.isClosedBy;e=e.replace(r.pairClose,this.printDirective(l,this.indentLevel(r.pairClose)))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(s=>{let r=s.switchNode.constructedFrom;e=e.replace(s.virtualSwitchOpen,this.printDirective(r,this.indentLevel(s.virtualSwitchOpen)));let h=r.isClosedBy;e=e.replace(s.virtualSwitchClose,h.sourceContent),s.structures.forEach(l=>{let c=l.case.head;this.removeLines.push(l.virtualClose),this.removeLines.push(l.virtualOpen),l.isLast?(e=e.replace(l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen))),this.removeLines.push(l.pairClose)):l.isFirst?(this.removeLines.push(l.pairClose),e=e.replace(l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen)))):(this.removeLines.push(l.pairClose),e=e.replace(l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen))))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((s,r)=>{let h=this.close(r),l=this.open(r);this.removeLines.push(h);let c=s.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters){if(this.useLaravelPint)c=this.printDirective(s,this.indentLevel(l));else if(this.phpFormatter!=null&&s.hasValidPhp()){let f=s.getPhpContent().trim();f.startsWith("(")&&f.endsWith(")")&&(f=f.substring(1),f=f.substring(0,f.length-1));let m=this.phpFormatter("<?php "+f,this.transformOptions,null),g=new nr,b=g.parse(Y.replaceAllInString(m,`
`," ")),C=this.indentLevel(l);g.getIsAssoc()?c="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+m+")":b!=null&&(m=Qn.print(b,this.transformOptions.tabSize,1),C>0&&(m=Y.removeEmptyNewLines(Ke.shiftIndent(m,C,!0,this.transformOptions))),c="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+m+")")}}}catch{c=s.sourceContent}e=e.replace(l,c)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((s,r)=>{let h=this.close(r),l=this.open(r);this.removeLines.push(h),e=e.replace(l,s.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,Lr.printComment(s,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let s=this.structureLines[e];if(s.includes(t)){let r=s.trimLeft();return s.length-r.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(s=>{let r=s.node;e=e.replace(s.pairOpen,Lr.printComment(r,this.transformOptions.tabSize,this.indentLevel(s.pairOpen))),this.removeLines.push(s.pairClose),this.removeLines.push(s.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.nodeContent)}),e}removeTrailingWhitespaceAfterSubstring(t,e){let s=Y.breakByNewLine(t),r=[];for(let h=0;h<s.length;h++){let l=s[h];l.trimRight().endsWith(e)?r.push(l.trimRight()):r.push(l)}return r.join(`
`)}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((s,r)=>{e=this.removeTrailingWhitespaceAfterSubstring(e,r),e=Y.replaceAllInString(e,r,s.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((s,r)=>{let h=s.directive;e=e.replace(r,this.printDirective(h,this.indentLevel(r)))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((s,r)=>{e=e.replace(r,s.content)}),e}transformEchoParameters(t){let e=t;return this.echoParameters.forEach((s,r)=>{s.inlineEcho!=null?e=e.replace(r,cs.printEcho(s.inlineEcho,this.transformOptions,this.phpFormatter,0,this.pintTransformer)):e=e.replace(r,"")}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((s,r)=>{e=e.replace(r,cs.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((s,r)=>{e=e.replace(r,this.printDirective(s,this.indentLevel(r)))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((s,r)=>{let h="",l=0;s.isScript?h="//"+r:h="/*"+r+"*/",l=this.indentLevel(h),l==this.transformOptions.tabSize&&(l=0),e.includes(h)&&(e=e.replace(h,Ke.indentRelative(s.content,l,this.transformOptions.tabSize)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(s=>{e=e.replace(s,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],s=Y.breakByNewLine(t),r=!1;for(let h=0;h<s.length;h++){let l=s[h].trim();if(r){if(l.length==0)continue;r=!1}else r=this.shouldCleanAfter(l);if(this.shouldCleanLine(l))for(let c=e.length-1;c>0&&e[c].trim().length==0;c--)e.pop();if(!this.removeLines.includes(l)){let c=s[h];this.removeLines.forEach(f=>{c.includes(f)&&(c=c.replace(f,""))}),e.push(c)}}return e.join(`
`)}reflowSlugs(t){let e=t,s=Y.breakByNewLine(e),r=[];for(let h=0;h<s.length;h++){let l=s[h].trimRight(),c=!1;for(let f=0;f<this.slugs.length;f++){let m=this.slugs[f];if(l.endsWith("<"+m)&&h+1<s.length){let g=s[h+1];if(g.trimLeft().startsWith("/>")){let b=g.indexOf("/>"),C=g.substring(b+2);r.push(l.trimRight()+" />");let E=l.indexOf("<"+m);r.push(" ".repeat(E)+C.trimLeft()),h+=1,c=!0;break}}}c||r.push(l)}return e=r.join(`
`),this.slugs.forEach(h=>{let l=this.open(h),c=this.close(h),f=this.selfClosing(h),m="/<"+h+"(.*?)>/gms",g="/</"+h+"(.*?)>/gms",b="/<"+h+"(.*?)/>/gms";e=e.replace(m,l),e=e.replace(g,c),e=e.replace(b,f)}),e}fromStructure(t){let e=this.reflowSlugs(t);this.structureLines=Y.breakByNewLine(e);let s=this.transformInlineDirectives(e);return s=this.transformContentDirectives(s),s=this.transformDynamicEcho(s),s=this.transformPairedDirectives(s),s=this.transformForElseWithEmpty(s),s=this.transformForElseWithNoEmpty(s),s=this.transformDynamicElementForElse(s),s=this.transformInlineEcho(s),s=this.transformConditions(s),s=this.transformDynamicElementConditions(s),s=this.transformSwitchStatements(s),s=this.transformDynamicElementSwitch(s),s=this.transformBreaks(s),s=this.transformProps(s),s=this.transformComments(s),s=this.transformVirtualComments(s),s=this.transformDirectiveParameters(s),s=this.transformExpressionParameters(s),s=this.transformEchoParameters(s),s=this.transformDynamicDirectives(s),s=this.cleanVirtualStructures(s),s=this.removeVirtualStructures(s),s=this.transformEmbeddedEcho(s),s=this.transformEmbeddedDirectives(s),s=this.transformExtractedDocuments(s),s=this.transformPhpBlock(s),this.ignoredLiteralBlocks.forEach((r,h)=>{let l=this.selfClosing(h),c=this.indentLevel(l);s=s.replace(l,this.dumpPreservedNodes(r))}),this.parentTransformer==null&&(s=new Xo().transform(s)),s}dumpPreservedNodes(t){let e="";return t.forEach(s=>{s instanceof Zt?e+=s.content:s instanceof Ri||s instanceof ki?e+=s.nodeContent:s instanceof dt||s instanceof Ie?e+=s.sourceContent:s instanceof wi?e+=s.nodeContent:(s instanceof Zi||s instanceof Ni||s instanceof ri)&&(e+=s.sourceContent)}),e}}});var Se,In=St(()=>{"use strict";un();If();Sf();Of();Hv();Se=class{constructor(){this.documentParser=new Z;this.transformer=null;this.cursor=new Bo(this);this.nodes=new Uo(this);this.errors=new Mo(this)}static fromText(t,e=null){let s=new Se;return e!=null&&s.getParser().setSeedPosition(e),s.loadString(t)}static childFromText(t,e,s=null){let r=new Se;return s!=null&&r.getParser().setSeedPosition(s),r.getParser().withPhpValidator(e.getPhpValidator()),r.loadString(t),{renderNodes:r.getRenderNodes(),content:t,document:r}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new ha(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});var Vv,la,Gv=St(()=>{"use strict";Vv=Xi(kh()),la=class{constructor(){this.lastError=null}isValid(t,e=!0){let s=new Vv.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?s.parseEval(t):s.parseCode(t,"test.php")}catch(r){return r instanceof SyntaxError&&(this.lastError=r),!1}return this.lastError=null,!0}getLastError(){return this.lastError}}});var ua,Wv=St(()=>{"use strict";ua=class{static printError(t,e){var c,f;let s=t.message+`

`,r=(f=(c=t.node)==null?void 0:c.startPosition)==null?void 0:f.line,h=r;e.forEach((m,g)=>{h=g});let l=h.toString().length;return e.forEach((m,g)=>{let b=g.toString(),C="",E=0;E=l-b.length,r==g?C=" >"+"0".repeat(E)+b+"| ":C="  "+"0".repeat(E)+b+"| ",s+=C+m+`
`}),s}}});var ca,qv=St(()=>{"use strict";In();ca=class{constructor(){this.filePath="";this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null}withTransformOptions(t){return this.transformOptions=t,this}withFilePath(t){return this.filePath=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(Se.fromText(t))}formatDocument(t){if(this.preFormatter!=null){let r=this.preFormatter(t);if(r!=null)return r}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withFilePath(this.filePath).withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let e=t.transform().toStructure(),s=this.htmlFormatter(e);return t.transform().fromStructure(s)}}});var fa,Yv=St(()=>{"use strict";Wv();qv();Ps();fa=class extends ca{constructor(t,e){super(),Ko(t),this.withHtmlFormatter($o).withFilePath(t.filepath).withPhpFormatter(bv).withBlockPhpFormatter(Nv).withPhpTagFormatter(Av).withJsonFormatter(vv).withTransformOptions(e).withPreFormatter(s=>{var r,h,l;if(s.errors.hasStructureErrors()){let c=s.errors.getFirstStructureError(),f=s.getLinesAround((l=(h=(r=c.node)==null?void 0:r.startPosition)==null?void 0:h.line)!=null?l:1),m=ua.printError(c,f);throw new SyntaxError(m)}return null})}}});var Iv=H((Cw,zv)=>{In();Gv();Ah();Yv();Ps();var Qv,Mh,jv,Uh=null,JI={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(i,t,e){let s=gv(),r=Cv();r!=null&&(e=r(e)),s!=null&&(e.filepath=s),Ko(e),Qv=e,Uh=Tv(__dirname),Mh=Uh,jv=Uh,Mh.tabSize=Ev().tabWidth;let h=new Se;return h.getParser().withParserOptions(jv).withPhpValidator(new la),h.loadString(i)},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(i){let t=i.stack[0];return new fa(Qv,Mh).formatDocument(t)}}},defaultOptions:{tabWidth:4}};zv.exports=JI});module.exports=Iv();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
