"use strict";var RA=Object.create;var tf=Object.defineProperty;var BA=Object.getOwnPropertyDescriptor;var MA=Object.getOwnPropertyNames;var UA=Object.getPrototypeOf,VA=Object.prototype.hasOwnProperty;var Dt=(i,t)=>()=>(i&&(t=i(i=0)),t);var j=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var HA=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of MA(t))!VA.call(i,r)&&r!==e&&tf(i,r,{get:()=>t[r],enumerable:!(n=BA(t,r))||n.enumerable});return i};var Yi=(i,t,e)=>(e=i!=null?RA(UA(i)):{},HA(t||!i||!i.__esModule?tf(e,"default",{value:i,enumerable:!0}):e,i));function ef(i){return(typeof i=="number"||typeof i=="string"&&WA.indexOf(i.slice(-1))===-1)&&i!==""&&!isNaN(i)}var WA,nf=Dt(()=>{"use strict";WA=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var q,qe=Dt(()=>{"use strict";nf();q=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,n){return t.substr(e,n)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return ef(t)}static substringCount(t,e){let n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(n,"gi"))||[]).length}static lastWord(t){let e=t.split(""),n=[];for(let r=e.length;r>=0&&e[r]!=" ";r--)n.push(e[r]);return n.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return q.breakByNewLine(q.normalizeLineEndings(t)).forEach(r=>{r.trim().length>0&&e.push(r)}),e.join(`
`)}static replaceAllInString(t,e,n){return t.replace(new RegExp(e,"g"),n)}static getTrimmedMatch(t,e,n){let r=t.exec(e);if(r==null||r.length<n)return null;let a=r[n].trim();return a.length==0?null:a}static assertMatchIs(t,e,n,r){let a=q.getTrimmedMatch(t,e,n);return a!=null&&a==r}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=q.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=q.breakByNewLine(t);return e.length==0?"":e[0]}static collapse(t){let e=q.breakByNewLine(t),n="";for(let r=0;r<e.length;r++){let a=e[r].trim();if(r+1<e.length){let l=e[r+1].trim();if(l.length>0&&q.ctypePunct(l[0])){let c=l[0];n+=a,(c=="?"||c==":"||c=="&")&&(n+=" ")}else n+=a+" "}else n+=a}return n.trimRight()}static makeSlug(t){t<=2&&(t=7);let e="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=n.length;for(let a=0;a<t-1;a++)e+=n.charAt(Math.floor(Math.random()*r));return"B"+e+"B"}static replaceWithFillerExceptNewlines(t){return t.replace(/./g,n=>n===`
`?n:"P")}static safeReplaceAllInString(t,e,n){let r=new RegExp(e,"g");return t.split(r).join(n)}static safeReplace(t,e,n){return t.split(e).join(n)}}});function ti(i){return i==null?!1:i=='"'||i=="'"||i=="`"}var Sn=Dt(()=>{"use strict"});function As(i){let t=i.getCurrent();for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=ot.String_EscapeCharacter));i.incrementIndex());}function Ri(i){let t=i.getCurrent(),e=[];for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=ot.String_EscapeCharacter));i.incrementIndex())e.push(i.getCurrent());return{value:e.join(""),endedOn:i.getCurrentIndex()}}var Dn=Dt(()=>{"use strict";pn()});var fs,ah=Dt(()=>{"use strict";qe();Sn();Dn();fs=class{constructor(){this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.strings=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}static fromText(t){return new fs().remove(t)}getStrings(){return this.strings}remove(t){for(this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)){let n=Ri(this);if(this.strings.push(n.value),this.currentIndex=n.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}let e=[];for(let n=0;n<this.currentContent.length;n++){let r=this.currentContent[n];if(n==0&&r=="@"){e.push(r);continue}if(r!="."&&q.ctypePunct(r))break;e.push(r)}return e.join("")}}});var uh=j(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.default=zA;var GA=qA(require("crypto"));function qA(i){return i&&i.__esModule?i:{default:i}}var Eo=new Uint8Array(256),vo=Eo.length;function zA(){return vo>Eo.length-16&&(GA.default.randomFillSync(Eo),vo=0),Eo.slice(vo,vo+=16)}});var sf=j(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.default=void 0;var JA=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;yo.default=JA});var Er=j(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.default=void 0;var YA=jA(sf());function jA(i){return i&&i.__esModule?i:{default:i}}function XA(i){return typeof i=="string"&&YA.default.test(i)}var KA=XA;ko.default=KA});var yr=j(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.default=void 0;var QA=$A(Er());function $A(i){return i&&i.__esModule?i:{default:i}}var Ei=[];for(let i=0;i<256;++i)Ei.push((i+256).toString(16).substr(1));function ZA(i,t=0){let e=(Ei[i[t+0]]+Ei[i[t+1]]+Ei[i[t+2]]+Ei[i[t+3]]+"-"+Ei[i[t+4]]+Ei[i[t+5]]+"-"+Ei[i[t+6]]+Ei[i[t+7]]+"-"+Ei[i[t+8]]+Ei[i[t+9]]+"-"+Ei[i[t+10]]+Ei[i[t+11]]+Ei[i[t+12]]+Ei[i[t+13]]+Ei[i[t+14]]+Ei[i[t+15]]).toLowerCase();if(!(0,QA.default)(e))throw TypeError("Stringified UUID is invalid");return e}var tb=ZA;To.default=tb});var af=j(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.default=void 0;var eb=of(uh()),ib=of(yr());function of(i){return i&&i.__esModule?i:{default:i}}var rf,lh,ch=0,fh=0;function nb(i,t,e){let n=t&&e||0,r=t||new Array(16);i=i||{};let a=i.node||rf,l=i.clockseq!==void 0?i.clockseq:lh;if(a==null||l==null){let _=i.random||(i.rng||eb.default)();a==null&&(a=rf=[_[0]|1,_[1],_[2],_[3],_[4],_[5]]),l==null&&(l=lh=(_[6]<<8|_[7])&16383)}let c=i.msecs!==void 0?i.msecs:Date.now(),p=i.nsecs!==void 0?i.nsecs:fh+1,v=c-ch+(p-fh)/1e4;if(v<0&&i.clockseq===void 0&&(l=l+1&16383),(v<0||c>ch)&&i.nsecs===void 0&&(p=0),p>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");ch=c,fh=p,lh=l,c+=122192928e5;let m=((c&268435455)*1e4+p)%4294967296;r[n++]=m>>>24&255,r[n++]=m>>>16&255,r[n++]=m>>>8&255,r[n++]=m&255;let k=c/4294967296*1e4&268435455;r[n++]=k>>>8&255,r[n++]=k&255,r[n++]=k>>>24&15|16,r[n++]=k>>>16&255,r[n++]=l>>>8|128,r[n++]=l&255;for(let _=0;_<6;++_)r[n+_]=a[_];return t||(0,ib.default)(r)}var sb=nb;Co.default=sb});var ph=j(Ao=>{"use strict";Object.defineProperty(Ao,"__esModule",{value:!0});Ao.default=void 0;var rb=ob(Er());function ob(i){return i&&i.__esModule?i:{default:i}}function ab(i){if(!(0,rb.default)(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var hb=ab;Ao.default=hb});var dh=j(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.default=fb;bs.URL=bs.DNS=void 0;var ub=hf(yr()),lb=hf(ph());function hf(i){return i&&i.__esModule?i:{default:i}}function cb(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}var uf="6ba7b810-9dad-11d1-80b4-00c04fd430c8";bs.DNS=uf;var lf="6ba7b811-9dad-11d1-80b4-00c04fd430c8";bs.URL=lf;function fb(i,t,e){function n(r,a,l,c){if(typeof r=="string"&&(r=cb(r)),typeof a=="string"&&(a=(0,lb.default)(a)),a.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let p=new Uint8Array(16+r.length);if(p.set(a),p.set(r,a.length),p=e(p),p[6]=p[6]&15|t,p[8]=p[8]&63|128,l){c=c||0;for(let v=0;v<16;++v)l[c+v]=p[v];return l}return(0,ub.default)(p)}try{n.name=i}catch{}return n.DNS=uf,n.URL=lf,n}});var cf=j(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.default=void 0;var pb=db(require("crypto"));function db(i){return i&&i.__esModule?i:{default:i}}function mb(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),pb.default.createHash("md5").update(i).digest()}var gb=mb;bo.default=gb});var pf=j(So=>{"use strict";Object.defineProperty(So,"__esModule",{value:!0});So.default=void 0;var _b=ff(dh()),xb=ff(cf());function ff(i){return i&&i.__esModule?i:{default:i}}var vb=(0,_b.default)("v3",48,xb.default),Eb=vb;So.default=Eb});var mf=j(Do=>{"use strict";Object.defineProperty(Do,"__esModule",{value:!0});Do.default=void 0;var yb=df(uh()),kb=df(yr());function df(i){return i&&i.__esModule?i:{default:i}}function Tb(i,t,e){i=i||{};let n=i.random||(i.rng||yb.default)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=n[r];return t}return(0,kb.default)(n)}var Cb=Tb;Do.default=Cb});var gf=j(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var Ab=bb(require("crypto"));function bb(i){return i&&i.__esModule?i:{default:i}}function Sb(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),Ab.default.createHash("sha1").update(i).digest()}var Db=Sb;No.default=Db});var xf=j(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.default=void 0;var Nb=_f(dh()),Ib=_f(gf());function _f(i){return i&&i.__esModule?i:{default:i}}var Pb=(0,Nb.default)("v5",80,Ib.default),Ob=Pb;Io.default=Ob});var vf=j(Po=>{"use strict";Object.defineProperty(Po,"__esModule",{value:!0});Po.default=void 0;var wb="00000000-0000-0000-0000-000000000000";Po.default=wb});var Ef=j(Oo=>{"use strict";Object.defineProperty(Oo,"__esModule",{value:!0});Oo.default=void 0;var Lb=Fb(Er());function Fb(i){return i&&i.__esModule?i:{default:i}}function Rb(i){if(!(0,Lb.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var Bb=Rb;Oo.default=Bb});var yf=j(yn=>{"use strict";Object.defineProperty(yn,"__esModule",{value:!0});Object.defineProperty(yn,"v1",{enumerable:!0,get:function(){return Mb.default}});Object.defineProperty(yn,"v3",{enumerable:!0,get:function(){return Ub.default}});Object.defineProperty(yn,"v4",{enumerable:!0,get:function(){return Vb.default}});Object.defineProperty(yn,"v5",{enumerable:!0,get:function(){return Hb.default}});Object.defineProperty(yn,"NIL",{enumerable:!0,get:function(){return Wb.default}});Object.defineProperty(yn,"version",{enumerable:!0,get:function(){return Gb.default}});Object.defineProperty(yn,"validate",{enumerable:!0,get:function(){return qb.default}});Object.defineProperty(yn,"stringify",{enumerable:!0,get:function(){return zb.default}});Object.defineProperty(yn,"parse",{enumerable:!0,get:function(){return Jb.default}});var Mb=Kn(af()),Ub=Kn(pf()),Vb=Kn(mf()),Hb=Kn(xf()),Wb=Kn(vf()),Gb=Kn(Ef()),qb=Kn(Er()),zb=Kn(yr()),Jb=Kn(ph());function Kn(i){return i&&i.__esModule?i:{default:i}}});var Nn,XD,KD,kf,QD,$D,ZD,tN,eN,iN,Tf=Dt(()=>{Nn=Yi(yf(),1),XD=Nn.default.v1,KD=Nn.default.v3,kf=Nn.default.v4,QD=Nn.default.v5,$D=Nn.default.NIL,ZD=Nn.default.version,tN=Nn.default.validate,eN=Nn.default.stringify,iN=Nn.default.parse});function Cf(){return q.replaceAllInString(kf(),"-","_")}var kr,wo,ze,Ss,Lo,xi,Zt,sn,oi,Fo,_t,Ds,yi,Bi,Tr,Mi,Ie,In,Pn,Ro,Cr,ps,Ar,Xs,br,Ns,Is,Pe=Dt(()=>{"use strict";Tf();qe();kr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=Cf()}},wo=class{constructor(){this.startPosition=null;this.endPosition=null}},ze=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=Cf()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,n;return t+((n=(e=this.startPosition)==null?void 0:e.index)!=null?n:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},Ss=class extends ze{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1;this.overrideValue=""}hasValidPhpExpression(){var e;if(this.cachedHasValidPhp==null){let n=(e=this.getParser())==null?void 0:e.getPhpValidator();n!=null?(this.cachedHasValidPhp=n.isValid(this.value,!1),this.cachedPhpLastError=n.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}},Lo=class extends ze{constructor(){super(...arguments);this.name="";this.inlineName=""}},xi=class extends ze{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let n=0;n<this.parameters.length;n++)if(this.parameters[n].realName==e)return!0;return!1}getParameter(e){for(let n=0;n<this.parameters.length;n++)if(this.parameters[n].realName==e)return this.parameters[n];return null}getParametersExcept(e){return this.parameters.filter(n=>!e.includes(n.realName))}},Zt=class extends ze{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=q.replaceAllInString(this.content,"@{","{");return e=q.replaceAllInString(e,"@@","@"),e}},sn=class extends ze{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},oi=class extends ze{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let n=(e=this.getParser())==null?void 0:e.getPhpValidator();n!=null?(this.cachedHasValidPhp=n.isValid(this.sourceContent,!1),this.cachedPhpLastError=n.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},Fo=class extends oi{},_t=class extends ze{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.overrideParams=null;this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){var e;if(this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null){let n=(e=this.getParser())==null?void 0:e.getPhpValidator();n!=null?(this.cachedHasValidPhp=n.isValid(this.getPhpContent(),!0),this.cachedPhpLastError=n.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){var n;let e=[];for(let r=0;r<this.children.length;r++){let a=this.children[r];if(((n=a.parent)==null?void 0:n.refId)==this.refId){if(a==this.isClosedBy)break;e.push(a)}}return e}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let n=0;n<this.children.length;n++){let r=this.children[n];if(r instanceof _t&&r.refId==this.isClosedBy.refId)break;e.push(r)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let n=0;n<this.children.length;n++){let r=this.children[n];if(r instanceof _t&&r.directiveName==e)return r}return null}findFirstDirectChildDirectiveOfType(e){for(let n=0;n<this.children.length;n++){let r=this.children[n];if(r instanceof _t&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId)return r}return null}findDirectivesOfType(e){let n=[];return this.children.forEach(r=>{r instanceof _t&&r.directiveName==e&&n.push(r)}),n}findDirectChildDirectivesOfType(e){let n=[];return this.children.forEach(r=>{r instanceof _t&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId&&n.push(r)}),n}clone(){let e=new _t;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition,e.overrideParams=this.overrideParams;let n=this.getParser();return n!=null&&e.withParser(n),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},Ds=class extends ze{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},yi=class extends _t{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof _t?this.logicBranches[0].head.parent:null}},Bi=class extends ze{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},Tr=class extends ze{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},Mi=class extends ze{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},Ie=class extends ze{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let n=(e=this.getParser())==null?void 0:e.getPhpValidator();n!=null?(this.cachedHasValidPhp=n.isValid(this.content,!0),this.cachedPhpLastError=n.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},In=class extends Ie{},Pn=class extends Ie{},Ro=class extends ze{},Cr=class extends ze{},ps=class extends ze{constructor(){super(...arguments);this.tokenLength=0}},Ar=class extends ze{},Xs=class extends ze{},br=class extends ze{},Ns=class extends ze{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},Is=class extends ze{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var Ot,Ps=Dt(()=>{"use strict";Ot=class{};Ot.Verbatim="verbatim",Ot.EndVerbatim="endverbatim",Ot.Php="php",Ot.EndPhp="endphp",Ot.If="if",Ot.ElseIf="elseif",Ot.Else="else",Ot.Unless="unless",Ot.ForElse="forelse",Ot.EndForElse="endforelse",Ot.Switch="switch",Ot.EndSwitch="endswitch",Ot.Default="default",Ot.Case="case"});var ni,Sr=Dt(()=>{"use strict";Pe();ni=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(n=>{if(!(n instanceof _t))return;let r=n;r.directiveName.toLowerCase().startsWith("end")||e.set(r.directiveName.toLowerCase(),1)}),t.forEach(n=>{if(!(n instanceof _t))return;let r=n;if(r.directiveName.toLowerCase().startsWith("unless")){let a=r.directiveName.substring(6);a.length>0&&(this.speculativeConditions.set(r.directiveName,1),this.speculativeEndIfs.set("end"+a,1))}if(this.speculativeEndIfs.has(r.directiveName)&&(r.isClosingDirective=!0),r.directiveName.toLowerCase().startsWith("else")){let a=r.directiveName.substring(4);a!="if"&&a.length>0&&this.speculativeConditions.set(a,1)}if(r.directiveName.toLowerCase().startsWith("end")){let a=r.directiveName.substring(3).toLowerCase();e.has(a)&&(this.possibleClosingNode.set(r.directiveName.toLowerCase(),1),r.isClosingDirective=!0)}})}};ni.possibleClosingNode=new Map,ni.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],ni.customIfs=new Map,ni.speculativeConditions=new Map,ni.speculativeEndIfs=new Map});var Bo,Af=Dt(()=>{"use strict";Pe();Ps();Sr();Bo=class{static getNewName(t){if(t.name==Ot.Unless)return Ot.If;if(ni.isSpeculativeEndIf(t.directiveName))return Ot.If;if(ni.alwaysRewrite.includes(t.name))return Ot.If;if(ni.isSpeculativeCondition(t.name))return Ot.If;if(ni.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,Ot.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,Ot.If):Ot.If}return t.directiveName=="auth"?Ot.If:t.name}static rewrite(t){let e=[];return t.forEach(n=>{if(n instanceof _t)if(ni.shouldRewrite(n)){let r=n.clone();r.name=this.getNewName(n),e.push(r)}else e.push(n);else e.push(n)}),e}}});function ji(i){return i.length==0?null:i[0].startPosition}var Ks=Dt(()=>{"use strict"});function bf(i,t){let e=new Set(i),n=new Set(t),r=new Set([...e].filter(a=>n.has(a)));return Array.from(r)}var Sf=Dt(()=>{"use strict"});var He,mh=Dt(()=>{"use strict";He=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,n,r,a;let t="";return this.node!=null&&(t=((n=(e=this.node.endPosition)==null?void 0:e.offset)!=null?n:0).toString()+"|"+((a=(r=this.node.startPosition)==null?void 0:r.offset)!=null?a:0).toString()+"|"),t+"|"+this.errorCode}static makeSyntaxError(t,e,n,r){r==null&&(r=0);let a=new He;return a.errorCode=t,a.node=e,a.message=n,a.level=r,a}}});var Xt,gh=Dt(()=>{"use strict";Xt=class{};Xt.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Xt.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Xt.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Xt.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Xt.TYPE_UNCLOSED_COMMENT="BLADE_005",Xt.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Xt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Xt.TYPE_UNCLOSED_VERBATIM="BLADE_008",Xt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Xt.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Xt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Xt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Xt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Xt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var dn,Qs,Df=Dt(()=>{"use strict";mh();gh();Pe();Ps();dn=class{static isConditionalStructure(t){if(!(t instanceof _t))return!1;let e=t,n=e.name;return n==Ot.If||n==Ot.ElseIf||n==Ot.Else}static requiresClose(t){let e=t.name;return e==Ot.ElseIf||e==Ot.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==Ot.If||t==Ot.ElseIf?dn.conditionClosingPairs:[]}static findClosestStructurePair(t,e,n){let r=[],a=t.length,l=new Map;r.push({node:e,index:n});for(let c=0;c<a;c+=1){let p=t[c];if(p instanceof _t){let v=p.name;if(p.isClosingDirective&&v==Ot.If){l.set(c,c);continue}else if(v==Ot.ElseIf||v==Ot.Else){l.set(c,c);continue}}}for(;r.length>0;){let c=r.pop();if(c==null)continue;if(c.node._conditionParserAbandonPairing)break;let p=c.node,v=dn.getValidClosingPairs(p.name),m=c.index,k=!1;for(let _=m;_<a;_++){let u=t[_];if(u instanceof _t&&dn.isConditionalStructure(u)){if(dn.requiresClose(u)){if(_==a-1){k=!1;break}r.push(c),r.push({node:u,index:_+1}),k=!0;break}if(p.isClosedBy!=null)continue;let f=u.name,d=!1;if(u.ref==0&&(u.isClosingDirective&&f==Ot.If||v.includes(f))&&(d=!0),u.refId==p.refId&&(d=!1),d){l.delete(_),p.isClosedBy=u,u.isOpenedBy=p,u.ref+=1,k=!0;break}}}if(!k&&p instanceof _t){let _=p.name;(_==Ot.ElseIf||_==Ot.Else)&&p.isOpenedBy==null&&(p.pushError(He.makeSyntaxError(Xt.TYPE_PARSE_UNCLOSED_CONDITION,p,"Unpaired condition control structure")),p._conditionParserAbandonPairing=!0),p.isClosedBy==null&&dn.requiresClose(p)&&(p.pushError(He.makeSyntaxError(Xt.TYPE_PARSE_UNCLOSED_CONDITION,p,"Unpaired condition control structure")),p._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let n=t[e];n instanceof _t&&dn.isConditionalStructure(n)&&dn.requiresClose(n)&&dn.findClosestStructurePair(t,n,e+1)}return t.forEach(e=>{if(e instanceof _t&&dn.isConditionalStructure(e)){let n=e.name;if((n==Ot.ElseIf||n==Ot.Else)&&e.isOpenedBy==null){e.pushError(He.makeSyntaxError(Xt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&dn.requiresClose(e)){e.pushError(He.makeSyntaxError(Xt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},Qs=dn;Qs.conditionClosingPairs=["elseif","else"]});var Mo,Nf=Dt(()=>{"use strict";mn();Ks();Pe();Ps();Mo=class{static associate(t,e){let n=[];return t.forEach(r=>{r instanceof _t&&r.name.toLowerCase()==Ot.ForElse&&r.directiveName.toLowerCase()!=Ot.EndForElse?n.push(this.createForElseNode(r,e)):n.push(r)}),n}static createForElseNode(t,e){var p,v,m,k,_,u,f,d,x,A,w,H,V,Y,F,z,it,tt,pt,Ct,qt,wt,At,vt,Ut,dt,ft,ce,It,ne,pe,M,U,st,Et;let n=new Mi;n.withParser(e),n.originalNode=t,n.startPosition=t.startPosition,n.endPosition=t.getFinalClosingDirective().endPosition,n.constructedFrom=t;let r=t.findFirstDirectChildDirectiveOfType("empty");if(r==null){n.tailNode=t.children.pop(),n.truthNodes=t.children;let Gt=((v=(p=t.startPosition)==null?void 0:p.index)!=null?v:0)-1,rt=((_=(k=(m=t.isClosedBy)==null?void 0:m.startPosition)==null?void 0:k.index)!=null?_:0)-1,G=rt-Gt,K=((f=(u=t.endPosition)==null?void 0:u.index)!=null?f:0)+1,J=((A=(x=(d=t.isClosedBy)==null?void 0:d.startPosition)==null?void 0:x.index)!=null?A:0)-1,nt=J-K;n.truthDocumentContent=e.getText(Gt,rt),n.truthDocumentOffset={start:Gt,end:rt,length:G},n.truthInnerContent=e.getText(K,J),n.truthInnerOffset={start:K,end:J,length:nt}}else{let Gt=t.children,rt=[],G=[];n.elseNode=r;for(let $t=0;$t<Gt.length;$t++){let Lt=Gt[$t];if(Lt.refId==r.refId){G=Gt.slice($t+1);break}else rt.push(Lt)}n.truthNodes=rt,G.length>0&&(n.tailNode=G.pop()),n.falseNodes=G;let K=((H=(w=t.startPosition)==null?void 0:w.index)!=null?H:0)-1,J=((Y=(V=r.startPosition)==null?void 0:V.index)!=null?Y:0)-1,nt=J-K,lt=((z=(F=t.endPosition)==null?void 0:F.index)!=null?z:0)+1,at=((tt=(it=r.startPosition)==null?void 0:it.index)!=null?tt:0)-1,Q=at-lt;n.truthDocumentContent=e.getText(K,J),n.truthDocumentOffset={start:K,end:J,length:nt},n.truthInnerContent=e.getText(lt,at),n.truthInnerOffset={start:lt,end:at,length:Q};let ct=((Ct=(pt=r.startPosition)==null?void 0:pt.index)!=null?Ct:0)-1,bt=((At=(wt=(qt=t.isClosedBy)==null?void 0:qt.startPosition)==null?void 0:wt.index)!=null?At:0)-1,Yt=bt-ct,xt=((Ut=(vt=r.endPosition)==null?void 0:vt.index)!=null?Ut:0)+1,Nt=((ce=(ft=(dt=t.isClosedBy)==null?void 0:dt.startPosition)==null?void 0:ft.index)!=null?ce:0)-1,et=Nt-xt;n.falseDocumentContent=e.getText(ct,bt),n.falseDocumentOffset={start:ct,end:bt,length:Yt},n.falseInnerContent=e.getText(xt,Nt),n.falseInnerOffset={start:xt,end:Nt,length:et}}n.truthDocument=me.childFromText(e.getNodeText(n.truthNodes),e,ji(n.truthNodes)),n.falseDocument=me.childFromText(e.getNodeText(n.falseNodes),e,ji(n.falseNodes));let a=((ne=(It=t.startPosition)==null?void 0:It.index)!=null?ne:0)-1,l=(Et=(M=(pe=t.isClosedBy)==null?void 0:pe.endPosition)==null?void 0:M.index)!=null?Et:0-((st=(U=t.startPosition)==null?void 0:U.index)!=null?st:0),c=l-a;return n.nodeContent=e.getText(a,l),n.documentContent=e.getText(a,l),n.offset={start:a,end:l,length:c},n}}});var Uo,If=Dt(()=>{"use strict";mn();Ks();Pe();Sr();Uo=class{static analyze(t,e){let n=[];return t.forEach(r=>{if(r instanceof _t&&r.isClosedBy!=null){let a=r.findFirstChildDirectiveOfType("else");a!=null&&a.isClosedBy==null?n.push(this.convertToConditionalNode(r,a,e)):n.push(r)}else n.push(r)}),n}static convertToConditionalNode(t,e,n){var wt,At,vt,Ut,dt,ft,ce,It,ne,pe,M,U,st,Et,Gt,rt,G,K,J,nt,lt,at,Q,ct,bt,Yt;let r=new yi,a=t.getFinalClosingDirective(),l=t.children,c=[],p=[],v=l.pop();r.withParser(n),r.parent=t.parent,r.startPosition=t.startPosition,r.endPosition=a.endPosition,r.constructedFrom=t;let m=((At=(wt=t.startPosition)==null?void 0:wt.index)!=null?At:0)-1,k=(ft=(vt=a==null?void 0:a.endPosition)==null?void 0:vt.index)!=null?ft:0-((dt=(Ut=t.startPosition)==null?void 0:Ut.index)!=null?dt:0),_=m+k;r.nodeContent=n.getText(m,k),r.offset={start:m,end:_,length:k};for(let xt=0;xt<l.length;xt++){let Nt=l[xt];if(Nt instanceof _t&&Nt.refId==e.refId){p=l.slice(xt+1);break}else c.push(Nt)}let u=new Ds,f=new Ds;u.withParser(n),f.withParser(n),t.isClosedBy=e,e.isOpenedBy=t,v.isOpenedBy=e,e.isClosedBy=v;let d=[...c],x=[...p];c.push(e),u.head=t,u.nodes=c,u.index=t.index;let A=(It=(ce=t.endPosition)==null?void 0:ce.index)!=null?It:0,w=((M=(pe=(ne=t.isClosedBy)==null?void 0:ne.startPosition)==null?void 0:pe.index)!=null?M:0)-1,H=w-A,V=((st=(U=t.startPosition)==null?void 0:U.index)!=null?st:0)-1,Y=((rt=(Gt=(Et=t.isClosedBy)==null?void 0:Et.startPosition)==null?void 0:Gt.index)!=null?rt:0)-1,F=Y-V;u.innerContent=n.getText(A,w),u.documentContent=n.getText(V,Y),u.innerOffset={start:A,end:w,length:H},u.offset={start:V,end:Y,length:F},p.push(v),f.head=e,f.nodes=p,f.index=e.index;let z=(K=(G=e.endPosition)==null?void 0:G.index)!=null?K:0,it=((lt=(nt=(J=e.isClosedBy)==null?void 0:J.startPosition)==null?void 0:nt.index)!=null?lt:0)-1,tt=it-z,pt=((Q=(at=e.startPosition)==null?void 0:at.index)!=null?Q:0)-1,Ct=((Yt=(bt=(ct=e.isClosedBy)==null?void 0:ct.startPosition)==null?void 0:bt.index)!=null?Yt:0)-1,qt=Ct-pt;return f.innerContent=n.getText(z,it),f.documentContent=n.getText(pt,Ct),f.innerOffset={start:z,end:it,length:tt},f.offset={start:pt,end:Ct,length:qt},r.chain=[t.index,e.index],r.logicBranches.push(u),r.logicBranches.push(f),u.startPosition=u.nodes[0].startPosition,u.endPosition=u.nodes[u.nodes.length-1].startPosition,u.childDocument=me.childFromText(n.getNodeText(d),n,ji(d)),f.childDocument=me.childFromText(n.getNodeText(x),n,ji(x)),f.startPosition=f.nodes[0].startPosition,f.endPosition=f.nodes[f.nodes.length-1].startPosition,ni.registerSpeculativeCondition(t.directiveName),r}}});var Vo,Pf=Dt(()=>{"use strict";mn();Ks();Pe();Ps();Vo=class{static associate(t,e){let n=[];return t.forEach(r=>{r instanceof _t&&r.directiveName.toLowerCase()==Ot.Switch?n.push(this.createSwitchNode(r,e)):n.push(r)}),n}static createSwitchNode(t,e){var v,m,k,_,u,f,d,x,A,w,H,V,Y,F,z,it,tt,pt,Ct,qt,wt,At,vt,Ut,dt,ft,ce,It,ne,pe,M,U;let n=new Bi,r=t.children;n.originalNode=t,n.startPosition=t.startPosition,n.endPosition=t.getFinalClosingDirective().endPosition,n.parent=t.parent,n.withParser(e),n.constructedFrom=t;let a=[];for(let st=0;st<r.length;st++){let Et=r[st];if(Et instanceof _t&&Et.name==Ot.Switch&&(st+=Et.children.length),Et instanceof _t&&Et.name==Ot.Case){let Gt=this.collectUntil(t,r.slice(st+1),[Ot.Case,Ot.Default,Ot.EndSwitch]),rt=new Tr;if(rt.parent=Et.parent,n.cases.length==0&&a.length>0){if(rt.leadingNodes=a,a.length>0){let Q=a[0],ct=a[a.length-1],bt=(m=(v=Q.startPosition)==null?void 0:v.index)!=null?m:0,Yt=((_=(k=ct.endPosition)==null?void 0:k.index)!=null?_:0)+1,xt=e.getText(bt,Yt);rt.leadingDocument=me.childFromText(xt,e,Q.startPosition)}a=[]}if(rt.refId=Et.refId,rt.index=Et.index,rt.startPosition=Et.startPosition,rt.endPosition=Et.endPosition,rt.order=n.cases.length,rt.head=Et,rt.isDefault=!1,rt.children=Gt.children,rt.withParser(e),rt.isClosedBy=Gt.brokeOn,Et.isClosedBy=Gt.brokeOn,rt.children.length>0){let Q=rt.children[rt.children.length-1];Q instanceof _t&&Q==t.isClosedBy&&rt.children.pop()}rt.childDocument=me.childFromText(e.getNodeText(rt.children),e,ji(rt.children)),Gt.brokeOn!=null&&(rt.endPosition=Gt.brokeOn.startPosition);let G=((f=(u=rt.startPosition)==null?void 0:u.index)!=null?f:0)-1,K=((A=(x=(d=rt.isClosedBy)==null?void 0:d.startPosition)==null?void 0:x.index)!=null?A:0)-1,J=K-G,nt=((H=(w=Et.endPosition)==null?void 0:w.index)!=null?H:0)+1,lt=((F=(Y=(V=rt.isClosedBy)==null?void 0:V.startPosition)==null?void 0:Y.index)!=null?F:0)-1,at=lt-nt;rt.documentContent=e.getText(G,K),rt.innerContent=e.getText(nt,lt),rt.offset={start:G,end:K,length:J},rt.innerOffset={start:nt,end:lt,length:at},n.cases.push(rt)}else if(Et instanceof _t&&Et.name==Ot.Default){let Gt=r.slice(st+1),rt=new Tr;rt.parent=Et.parent,rt.refId=Et.refId,rt.index=Et.index,rt.startPosition=Et.startPosition,rt.endPosition=t.startPosition,rt.order=n.cases.length,rt.head=Et,rt.isDefault=!0,rt.children=Gt,rt.withParser(e),rt.isClosedBy=t.isClosedBy,Et.isClosedBy=t.isClosedBy;let G=[...rt.children],K=G[G.length-1];K instanceof _t&&K.refId==((z=t.isClosedBy)==null?void 0:z.refId)&&G.pop();let J=((tt=(it=rt.startPosition)==null?void 0:it.index)!=null?tt:0)-1,nt=((qt=(Ct=(pt=rt.isClosedBy)==null?void 0:pt.startPosition)==null?void 0:Ct.index)!=null?qt:0)-1,lt=nt-J,at=((At=(wt=Et.endPosition)==null?void 0:wt.index)!=null?At:0)+1,Q=((dt=(Ut=(vt=rt.isClosedBy)==null?void 0:vt.startPosition)==null?void 0:Ut.index)!=null?dt:0)-1,ct=Q-at;rt.documentContent=e.getText(J,nt),rt.innerContent=e.getText(at,Q),rt.offset={start:J,end:nt,length:lt},rt.innerOffset={start:at,end:Q,length:ct},rt.childDocument=me.childFromText(e.getNodeText(G),e,ji(G)),n.cases.push(rt);break}else a.push(Et)}if(n.cases.length>0){let st=n.cases[n.cases.length-1];st.children.length>0&&(n.tail=st.children.pop())}if(n.cases.length==0){let st=[...t.children];st.length>0&&st[st.length-1]==t.isClosedBy&&st.pop(),t.childrenDocument=me.childFromText(e.getNodeText(st),e,ji(st))}let l=((ce=(ft=t.startPosition)==null?void 0:ft.index)!=null?ce:0)-1,c=(U=(ne=(It=t.isClosedBy)==null?void 0:It.endPosition)==null?void 0:ne.index)!=null?U:0-((M=(pe=t.startPosition)==null?void 0:pe.index)!=null?M:0),p=l+c;if(n.nodeContent=e.getText(l,c),n.offset={start:l,end:p,length:c},n.cases.length>0){let st=n.cases[n.cases.length-1];st.isClosedBy==null&&(st.isClosedBy=t.isClosedBy)}return n}static collectUntil(t,e,n){var l;let r=[],a=null;for(let c=0;c<e.length;c++){let p=e[c];if(p instanceof _t&&n.includes(p.name)&&((l=p.parent)==null?void 0:l.refId)==t.refId){a=p;break}r.push(p)}return{children:r,brokeOn:a}}}});var _h,Dr,Of=Dt(()=>{"use strict";mn();Ks();Pe();Ps();Sf();Df();Nf();Sr();If();Pf();_h=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.pairsCreated=0;this.stackCount=0}buildCloseIndex(t){var e,n,r;t.forEach(a=>{var v,m,k,_,u,f,d,x;if(!(a instanceof _t))return;let l=a;if(l.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let c=l.name;((v=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:v.has(c))==!1&&((m=this.closingDirectiveIndex.get(this.stackCount))==null||m.set(c,[]),(k=this.closingDirectiveIndexCount.get(this.stackCount))==null||k.set(c,0)),(u=(_=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:_.get(c))==null||u.push(a);let p=(d=(f=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:f.get(c))!=null?d:0;(x=this.closingDirectiveIndexCount.get(this.stackCount))==null||x.set(c,p+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((n=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?n:[])),(r=this.closingDirectiveIndex.get(this.stackCount))==null||r.forEach((a,l)=>{var v,m,k,_,u;let c=a.length;if(c==0)return;let p=a[c-1];for(let f=0;f<c;f++){let d=t[f];if(d instanceof _t){if(d.index>=p.index)break;let x=d.name;if(d.isClosingDirective==!1&&x==l){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((v=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:v.has(l))==!1&&((m=this.openDirectiveIndexCount.get(this.stackCount))==null||m.set(l,0));let A=(_=(k=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:k.get(l))!=null?_:0;(u=this.openDirectiveIndexCount.get(this.stackCount))==null||u.set(l,A+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),n=this.closingDirectiveNames.get(this.stackCount);return bf(e,n)}return[]}associate(t,e,n=null){var l;this.document=e;let r=[],a=[{documentNodes:t,parent:n}];for(;a.length>0;){let c=a.pop();if(c==null)continue;let p=c.documentNodes;this.parentNode=c.parent,this.stackCount+=1,this.buildCloseIndex(p),p=Qs.pairConditionals(p),p.forEach(_=>{if(_ instanceof _t&&ni.canClose(_)){if(Qs.isConditionalStructure(_)){this.pairsCreated+=1;return}let u=this.getScanForList(_);this.findClosingPair(p,_,u)}});let v=p.length;for(let _=0;_<v;_++){let u=p[_];if(u instanceof _t&&u.isClosedBy!=null)for(let f=_+1;f<v;f++){let d=p[f];if(d.index>u.isClosedBy.index)break;if(d.parent=u,u.children.push(d),d instanceof _t&&d.index==u.index){d.parent=u;break}}}p.forEach(_=>{if(_ instanceof _t&&_.children.length>0){let u=[],f=[];_.children.forEach(d=>{if(d.parent!=null&&d.parent.index==_.index){let x=d.refId;if(!f.includes(x))d.parent=_,u.push(d),f.push(x);else return}}),a.push({documentNodes:u,parent:_})}});let m=[];p.forEach(_=>{var u;this.parentNode==null?_.parent==null&&m.push(_):((u=_.parent)==null?void 0:u.refId)==this.parentNode.refId&&m.push(_)}),m=this.reduceConditions(m,e),m=Vo.associate(m,e),m=Mo.associate(m,e),m=Uo.analyze(m,e),m=this.cleanNodes(m);let k=new Map;p.forEach(_=>{var u,f,d,x;if(_ instanceof _t&&_.isClosedBy!=null&&this.document!=null){let A=this.document.getText((f=(u=_.endPosition)==null?void 0:u.index)!=null?f:0,((x=(d=_.isClosedBy.startPosition)==null?void 0:d.index)!=null?x:0)-1);_.documentContent=A,(_.name=="php"||_.name=="verbatim")&&_.innerContent.trim().length==0&&(_.innerContent=_.documentContent)}});for(let _=0;_<m.length;_++){let u=m[_],f=(l=u.refId)!=null?l:"";k.set(f,1)}if(this.parentNode!=null&&this.parentNode instanceof _t&&(this.parentNode.children=this.cleanNodes(m),this.parentNode.parent!=null&&this.parentNode.parent instanceof _t)){let _=this.parentNode.parent.children,u=[];_.forEach(f=>{var d;k.has((d=f.refId)!=null?d:"")==!1&&u.push(f)}),this.parentNode.parent.children=this.cleanNodes(u)}this.stackCount<=1&&(r=this.cleanNodes(m))}return r}cleanNodes(t){let e=[],n=[];for(let r=0;r<t.length;r++){let a=t[r],l=a.refId;if(n.includes(l))break;e.push(a),n.push(l)}return e}reduceConditions(t,e){var r,a,l,c,p,v,m,k,_,u,f,d,x,A,w,H,V;let n=[];for(let Y=0;Y<t.length;Y++){let F=t[Y];if(F instanceof _t&&F.isClosingDirective==!1&&F.isClosedBy!=null)if(F.name==Ot.If){let it=new yi,tt=F.getFinalClosingDirective();it.withParser(e),it.index=F.index,it.chain.push(F.index),it.startPosition=F.startPosition,it.endPosition=tt.endPosition,it.constructedFrom=F;let pt=((a=(r=F.startPosition)==null?void 0:r.index)!=null?a:0)-1,Ct=(v=(l=tt==null?void 0:tt.endPosition)==null?void 0:l.index)!=null?v:0-((p=(c=F.startPosition)==null?void 0:c.index)!=null?p:0),qt=pt+Ct;it.nodeContent=e.getText(pt,Ct),it.offset={start:pt,end:qt,length:Ct},this.parentNode!=null&&(it.parent=this.parentNode);let wt=null,At=!0,vt=0;for(;At;){if(vt+=1,vt>_h.ForceBreakLimit){At=!1;break}if(F instanceof _t){let Ut=this.findEndOfBranch(t.slice(Y+1),F,Y),dt=new Ds;dt.withParser(e);let ft=Ut.tail;dt.head=F,dt.tail=ft,dt.nodes=this.cleanNodes(F.children);let ce=[...dt.nodes],It=ce[ce.length-1];It instanceof _t&&It.refId==((m=F.isClosedBy)==null?void 0:m.refId)&&ce.pop();let ne=(_=(k=F.endPosition)==null?void 0:k.index)!=null?_:0,pe=((d=(f=(u=F.isClosedBy)==null?void 0:u.startPosition)==null?void 0:f.index)!=null?d:0)-1,M=pe-ne,U=((A=(x=F.startPosition)==null?void 0:x.index)!=null?A:0)-1,st=((V=(H=(w=F.isClosedBy)==null?void 0:w.startPosition)==null?void 0:H.index)!=null?V:0)-1,Et=st-U;if(dt.innerContent=e.getText(ne,pe),dt.documentContent=e.getText(U,st),dt.innerOffset={start:ne,end:pe,length:M},dt.offset={start:U,end:st,length:Et},dt.childDocument=me.childFromText(e.getNodeText(ce),e,ji(ce)),ft==null&&(ft=dt.head.isClosedBy),ft!=null&&ft.startPosition!=null&&(dt.startPosition=ft.startPosition),ft!=null&&(dt.index=ft.index),dt.nodes.length>0){let Gt=dt.nodes[dt.nodes.length-1];Gt.endPosition!=null&&(dt.endPosition=Gt.endPosition)}else ft!=null&&ft.endPosition!=null&&(dt.endPosition=ft.endPosition);if(this.createdExecutionBranches.push(dt),it.logicBranches.push(dt),(ft==null?void 0:ft.isClosingDirective)&&ft.name==Ot.If){wt=Ut.offset,At=!1;break}else ft!=null&&it.chain.push(ft.index),Y=Ut.offset,ft instanceof _t&&(F=ft)}else At=!1}if(n.push(it),wt!=null&&wt==t.length)break}else n.push(F);else n.push(F)}return n}findEndOfBranch(t,e,n){let r=[],a=n,l=null;for(let c=0;c<t.length;c++){let p=t[c];if(p instanceof _t&&p.isOpenedBy!=null&&p.isOpenedBy==e){l=p;break}else r.push(p)}return{children:r,tail:l,offset:a}}getPairsCreated(){return this.pairsCreated}findClosingPair(t,e,n){let r=t.length,a=0;for(let l=0;l<r;l++){let c=t[l];if(!(c instanceof _t)||c.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(c.startPosition))continue;let p=c;if(p.isClosingDirective&&p.isOpenedBy!=null||!p.isClosingDirective&&p.isClosedBy!=null)continue;let v=p.name;if(!p.isClosingDirective&&n.includes(v)){a+=1;continue}if(n.includes(v)&&a>0){a-=1;continue}if(a==0&&n.includes(v)){p.isOpenedBy=e,e.isClosedBy=p,this.pairsCreated+=1;break}}}},Dr=_h;Dr.ForceBreakLimit=1e5});var Ho,wf=Dt(()=>{"use strict";Pe();Ho=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof _t))return;let n=e;n.getImmediateChildren().forEach(r=>{let a="*unknown",l=0;r instanceof Zt?a="*literal":r instanceof Pn?a="*entities_echo":r instanceof In?a="*escaped_echo":r instanceof Ie?a="*echo":r instanceof Ro?a="*verbatim":r instanceof _t&&(a=r.directiveName),n.childTypeCounts.has(a)==!1&&n.childTypeCounts.set(a,0);let c=n.childTypeCounts.get(a),p=c+1;n.childTypeCounts.set(a,p),r.parentTypeIndex=p,r.parentIndex=l,l+=1})})}}});var Wo,Ff=Dt(()=>{"use strict";Pe();Wo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var r,a,l,c,p;let e=(a=(r=t.endPosition)==null?void 0:r.index)!=null?a:0,n=(p=(c=(l=t.isClosedBy)==null?void 0:l.startPosition)==null?void 0:c.index)!=null?p:0;return this.fragmentsParser.getFragmentsBetween(e,n).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let n=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(n=="script"||n=="style")){let r=this.fragmentsParser.getClosingFragmentAfter(e);if(r==null)return;e.endPosition!=null&&r.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,r.startPosition).forEach(l=>{(l instanceof yi||l instanceof Mi||l instanceof xi||l instanceof Bi||l instanceof _t&&l.isClosedBy!=null)&&(e.containsStructures=!0),n=="style"?l.isInStyleTag=!0:l.isInScriptTag=!0})}}),t.forEach(e=>{var l,c,p,v,m,k;if(e instanceof Zt||e.startPosition==null)return;e instanceof _t&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let n=this.fragmentsParser.getFragmentContaining(e.startPosition);if(n==null)return;if(e.fragment=n,e.startPosition.index-((c=(l=n.startPosition)==null?void 0:l.index)!=null?c:0)<=3){e.fragmentPosition=0;return}if(n.parameters.length==0){e.fragmentPosition=2;return}let a=!1;for(let _=0;_<n.parameters.length;_++){let u=n.parameters[_];if(((v=(p=u.startPosition)==null?void 0:p.index)!=null?v:0)<e.startPosition.index&&((k=(m=u.endPosition)==null?void 0:m.index)!=null?k:0)>e.startPosition.index){e.fragmentPosition=1,a=!0;break}}a||(e.fragmentPosition=2)}))}}});var Go,Rf=Dt(()=>{"use strict";Pe();qe();Go=class{static analyze(t){t.forEach(e=>{var n,r,a,l;if(e instanceof Ie){let c=!1,p=!1;if(e.nextNode==null)c=!0;else if(e.nextNode instanceof Zt){let v=q.getFirstLine(e.nextNode.content);(q.trimLeft(v," 	").startsWith(`
`)==!1&&v.trim().length>0||e.nextNode.nextNode instanceof Ie&&((n=e.nextNode.nextNode.startPosition)==null?void 0:n.line)==((r=e.endPosition)==null?void 0:r.line))&&(c=!0)}else e.nextNode instanceof Ie&&(c=!0);if(e.prevNode==null)p=!0;else if(e.prevNode instanceof Zt){let v=q.getLastLine(e.prevNode.content);(q.trimRight(v," 	").endsWith(`
`)==!1&&v.trim().length>0||e.prevNode.prevNode instanceof Ie&&((a=e.prevNode.prevNode.endPosition)==null?void 0:a.line)==((l=e.startPosition)==null?void 0:l.line))&&(p=!0)}else e.prevNode instanceof Ie&&(p=!0);e.isInlineEcho=c||p}})}}});var qo,Bf=Dt(()=>{"use strict";Pe();qe();qo=class{static analyze(t){t.forEach(e=>{var n,r;if(e instanceof oi){if(((n=e.startPosition)==null?void 0:n.line)!=((r=e.endPosition)==null?void 0:r.line))return;let a=!1,l=!1;if(e.nextNode==null)a=!0;else if(e.nextNode instanceof Zt){let c=q.getFirstLine(e.nextNode.content);q.trimLeft(c," 	").startsWith(`
`)==!1&&c.trim().length>0&&(a=!0)}if(e.prevNode==null)l=!0;else if(e.prevNode instanceof Zt){let c=q.getLastLine(e.prevNode.content);q.trimRight(c," 	").endsWith(`
`)==!1&&c.trim().length>0&&(l=!0)}e.isInline=a&&l}})}}});var On,Mf=Dt(()=>{"use strict";pn();qe();On=class{static findRightBeighboringNextPunctuation(t,e,n=4){e=e.replace("	"," ".repeat(n));let r=!1;for(let a=t+1;a<e.length;a++){let l=e[a];if(q.ctypeSpace(l)&&(r=!0),r&&(q.ctypeAlpha(l)||q.ctypeDigit(l)))return null;if(q.ctypePunct(l)||l==ot.String_Terminator_SingleQuote||l==ot.String_Terminator_DoubleQuote)return l}return null}static findRightNeighboringNextAlphaNumeric(t,e,n=4){e=e.replace("	"," ".repeat(n));let r=!1;for(let a=t+1;a<e.length;a++){let l=e[a];if((q.ctypeSpace(l)||q.ctypePunct(l)&&l!=ot.Punctuation_Underscore)&&(r=!0),r&&(q.ctypeAlpha(l)||q.ctypeDigit(l)))return a+1}return null}static findLeftNeighboringNextPunctuation(t,e,n=4){e=e.replace("	"," ".repeat(n));let r=!1;for(let a=t-2;a>=0;a--){let l=e[a];if(q.ctypeSpace(l)&&(r=!0),r&&(q.ctypeAlpha(l)||q.ctypeDigit(l)))return null;if(q.ctypePunct(l))return l}return null}static findLeftNeighboringNextAlphaNumeric(t,e,n=4){e=e.replace("	"," ".repeat(n));let r=!1;for(let a=t-1;a>=0;a--){let l=e[a];if((q.ctypeSpace(l)||q.ctypePunct(l)&&l!=ot.Punctuation_Underscore)&&(r=!0),r&&(q.ctypeAlpha(l)||q.ctypeDigit(l)))return a+1}return null}static scanWordAt(t,e,n=4){if(e=e.replace("	"," ".repeat(n)),t<0||t>e.length)return null;let r=[],a=[];for(let l=t-1;l>=0;l--){let c=e[l];if(q.ctypePunct(c)&&c!=ot.Punctuation_Underscore||q.ctypeSpace(c))break;r.push(c)}for(let l=t;l<e.length;l++){let c=e[l];if(q.ctypePunct(c)&&c!=ot.Punctuation_Underscore||q.ctypeSpace(c))break;a.push(c)}return r.reverse().join("")+a.join("")}}});var wn,xh=Dt(()=>{"use strict";wn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new wn;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,n=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+n}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function $s(i){for(let t=i.getCurrentIndex()+1;t<i.inputLength();t++){let e=i.getChar(t);if(!q.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var vh=Dt(()=>{"use strict";qe()});function Ui(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()!=ot.NewLine);i.incrementIndex());}var ds=Dt(()=>{"use strict";pn()});function Vi(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex())if(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()==ot.Punctuation_Asterisk&&i.getNext()==ot.Punctuation_ForwardSlash){t&&i.pushChar(ot.Punctuation_ForwardSlash),i.incrementIndex(),i.checkCurrentOffsets();break}}var ms=Dt(()=>{"use strict";pn()});function Zs(i){let t=i.getCurrentIndex()+i.getSeedOffset(),e=i.getCurrentIndex(),n=0,r=0,a=!1;for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex()){if(i.checkCurrentOffsets(),ti(i.getCurrent())){let c=i.getCurrent(),p=i.getCurrentIndex();As(i),i.getNext()===null&&i.getCurrent()!==c&&(i.updateIndex(p+1),i.encounteredFailure());continue}if(i.getCurrent()==ot.Punctuation_ForwardSlash&&i.getNext()==ot.Punctuation_Asterisk){Vi(i,!1);continue}if(i.getCurrent()==ot.Punctuation_ForwardSlash&&i.getNext()==ot.Punctuation_ForwardSlash){Ui(i,!1);continue}if(i.getCurrent()==ot.LeftParen){r+=1;continue}if(i.getCurrent()==ot.RightParen){if(r>0){r-=1;continue}n=i.getCurrentIndex()+i.getSeedOffset()+1,a=!0;break}if(i.getCurrent()==null)break}let l=i.getContentSubstring(t,n-t);return a||i.updateIndex(e-1),{start:t,end:n,content:l,foundEnd:a}}var Eh=Dt(()=>{"use strict";pn();Sn();ds();ms();Dn()});var zo,Vf=Dt(()=>{"use strict";Pe();qe();pn();Sn();vh();Eh();ds();ms();Dn();zo=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,n){let r=new _t,a=this.getComponentOffset();r.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),r.directiveName=t.trim(),r.name=t.trim(),t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.document.positionFromOffset(a+e,a+e),c=this.document.positionFromOffset(a+n,a+n);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let p=r.startPosition.index,v=r.endPosition.index-r.startPosition.index,m=p+v;r.sourceContent=this.document.getContentSubstring(p,v),r.offset={start:p,end:m,length:v}}return r}getComponentOffset(){var t,e,n;return((n=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?n:0)+3}makeDirectiveWithParameters(t,e,n,r){var m,k;let a=this.makeDirective(t,e,n),l=this.getComponentOffset();a.hasDirectiveParameters=!0,a.directiveParameters=r.content;let c=r.content.trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1),c=c.trim(),a.hasJsonParameters=c.startsWith("{")&&c.endsWith("}"));let p=this.document.positionFromOffset(r.start+l,r.start+l),v=this.document.positionFromOffset(r.end+l,r.end+l);if(a.startPosition=(k=(m=a.namePosition)==null?void 0:m.start)!=null?k:null,a.endPosition=v,a.directiveParametersPosition={start:p,end:v},a.startPosition!=null&&a.endPosition!=null){let _=a.startPosition.index,u=a.endPosition.index-a.startPosition.index,f=_+u;a.sourceContent=this.document.getContentSubstring(_,u),a.offset={start:_,end:f,length:u}}return a}prepare(t){return this.content=q.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,n="",r=0,a=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_Asterisk){Vi(this,!0);continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==ot.NewLine){r=this.currentIndex,n=this.currentContent.join(""),this.currentContent=[],a=this.makeDirective(n,t,r);break}else if(this.next==null){this.currentContent.push(this.cur),r=this.currentIndex+1,n=this.currentContent.join(""),this.currentContent=[],a=this.makeDirective(n,t,r);break}let l=$s(this);if(this.cur!=ot.LeftParen&&l.didFind&&q.ctypePunct(l.char)&&l.char!=ot.LeftParen&&l.char!=ot.Punctuation_Minus&&l.char!="."){this.currentContent.push(this.cur),r=this.currentIndex+1,n=this.currentContent.join(""),this.currentContent=[],a=this.makeDirective(n,t,r);break}if(q.ctypeSpace(this.cur)){let c=$s(this);if(c.didFind&&c.char==ot.LeftParen){r=this.currentIndex-1,n=this.currentContent.join(""),this.currentContent=[],this.currentIndex=c.index,this.checkCurrentOffsets();let p=Zs(this);a=this.makeDirectiveWithParameters(n,t,r,p);break}else{r=this.currentIndex,n=this.currentContent.join(""),this.currentContent=[],a=this.makeDirective(n,t,r);break}}else if(this.cur==ot.LeftParen){r=this.currentIndex-1,n=this.currentContent.join(""),this.currentContent=[];let c=Zs(this);a=this.makeDirectiveWithParameters(n,t,r,c);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return a}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(q.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),n=new Ie;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==ot.RightBrace&&this.next==ot.RightBrace){let r=this.currentIndex+1;n.startPosition=this.document.positionFromOffset(t+e,t+e),n.endPosition=this.document.positionFromOffset(r+e,r+e),n.withParser(this.document);let a=n.startPosition.index-5,l=n.endPosition.index-n.startPosition.index+3,c=a+l;n.sourceContent=this.content.substr(a,l),n.offset={start:a,end:c,length:l},n.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return n}parse(t){var p;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),n=!1,r=-1,a=-1,l=-1,c='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==ot.LeftBrace&&this.next==ot.LeftBrace){this.currentIndex+=2;let v=this.scanToEndOfBladeEcho(this.currentIndex);if(v!=null){let m=new Ss;m.type=1,m.startPosition=v.startPosition,m.endPosition=v.endPosition,m.inlineEcho=v,m.type=3,t.hasParameters=!0,t.parameters.push(m),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==ot.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=ot.Punctuation_Equals){let v=this.scanToEndOfDirective();if(v!=null){let m=new Ss;m.type=1,m.startPosition=v.startPosition,m.endPosition=v.endPosition,m.name=v.directiveName,m.directive=v,t.hasParameters=!0,t.parameters.push(m);continue}}if(this.hasFoundName){if(q.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let v=new Ss,m=this.getComponentOffset();v.type=2,this.next==null&&!q.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),v.name=this.currentContent.join("");let k=this.currentIndex+m-v.name.length;v.startPosition=this.document.positionFromCursor(k,k),v.endPosition=this.document.positionFromCursor(this.currentIndex+m,this.currentIndex+m),v.namePosition={start:v.startPosition,end:v.endPosition},t.parameters.push(v),t.hasParameters=!0,this.currentContent=[];continue}continue}else n||(n=!0,r=this.currentIndex);if(this.cur==ot.Punctuation_Equals&&ti(this.next)){c=this.next,a=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),l=this.currentIndex;let v=Ri(this),m=new Ss;m.withParser(e),m.name=this.currentContent.join(""),m.value=v.value;let k=t.relativeOffset(r+3),_=t.relativeOffset(a+3),u=t.relativeOffset(l+3),f=t.relativeOffset(v.endedOn+3);m.namePosition={start:e.positionFromOffset(k,k),end:e.positionFromOffset(_,_)},m.valuePosition={start:e.positionFromOffset(u,u),end:e.positionFromOffset(f,f)},m.terminatorStyle=c,m.wrappedValue=c+m.value+c,m.content=m.name+"="+m.wrappedValue,m.realName=m.name,m.realName.startsWith(":")&&(m.isExpression=!0,m.realName=m.realName.substring(1),m.realName.startsWith(":")&&(m.isExpression=!1,m.realName=m.realName.substring(1),m.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(m),this.currentContent=[],n=!1,r=-1,a=-1,l=-1,c='"';continue}}else if((q.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!q.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let v=0;v<t.parameters.length;v++){let m=t.parameters[v];if(m.type==3&&((p=m.inlineEcho)==null?void 0:p.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),n=new Lo,r=t.relativeOffset(this.nameStartsOn+3),a=t.relativeOffset(this.nameEndsOn+3);if(n.withParser(e),n.name=this.name,t.isClosingTag&&(n.name=t.innerContent.trim().substring(1)),n.name.includes(":")){let l=n.name.split(":");n.name=l[0],n.inlineName=l.slice(1).join(":")}return n.startPosition=e.positionFromOffset(r,r),n.endPosition=e.positionFromOffset(a,a),n}}});var tr,yh=Dt(()=>{"use strict";mn();Pe();xh();qe();pn();Sn();ds();ms();Dn();tr=class{constructor(){this.content="";this.nodeIndex=[];this.nodeIndexSkipMap=new Map;this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.allTheChars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map;this.extractAttributePositions=!1;this.extractAttributeNames=[];this.extractedAttributes=[];this.lastFragmentEnded=-1}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let n=0;n<this.fragments.length;n++){let r=this.fragments[n];if(r.isClosingFragment&&!r.isSelfClosing&&r.name.toLowerCase()==e&&r.index>t.index)return r}return null}setExtractAttributes(t){this.extractAttributePositions=t}setExtractAttributeNames(t){this.extractAttributeNames=t}getContentSubstring(t,e){return this.content.substr(t,e)}getExtractedAttributes(){return this.extractedAttributes}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,n=!1){let r=0,a=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,a=c.char}else if(this.documentOffsets.size==0)r=1,a=t+1;else{let c=null,p=null,v=null,m=null;for(let k of this.documentOffsets.keys()){if(k>=t){m!=null&&t>m?(c=v,p=m):(c=this.documentOffsets.get(k),p=k);break}v=this.documentOffsets.get(k),m=k}c==null&&(c=v,p=m),c!=null?(a=t-(p!=null?p:0),r=c.line,t<=(p!=null?p:0)?(r=c.line,a=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,a=t+this.lastDocumentOffsetKey)}let l=new wn;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=a,l}getFragments(){return this.fragments}getFragmentsBetween(t,e){let n=[];return this.fragments.forEach(r=>{var c,p,v,m;let a=(p=(c=r.startPosition)==null?void 0:c.index)!=null?p:0,l=(m=(v=r.endPosition)==null?void 0:v.index)!=null?m:0;a>t&&l<e&&n.push(r)}),n}getFragmentContaining(t){var e,n,r,a;for(let l=0;l<this.fragments.length;l++){let c=this.fragments[l];if(((n=(e=c.startPosition)==null?void 0:e.index)!=null?n:0)<t.index&&((a=(r=c.endPosition)==null?void 0:r.index)!=null?a:0)>t.index)return c}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=q.split(q.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(n=>{this.chars.push(n),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],n=[];e.forEach(r=>{var c;let a=(c=r.index)!=null?c:0;for(let p=0;p<this.nodeIndex.length;p++){let v=this.nodeIndex[p];if(a>=v.start&&a<=v.end)return}let l=this.fetchAt(a,2);l=="<="||l=="<>"||n.push(a)}),this.fragmentStartIndex=n}setIndexRanges(t){return this.nodeIndex=t,this.nodeIndex.forEach(e=>{this.nodeIndexSkipMap.set(e.start,e.end-e.start)}),this}fetchAt(t,e){return this.content.substr(t,e)}getEmbeddedDocumentStructures(){let t=[];return this.getEmbeddedFragments().forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing){let n=this.getClosingFragmentAfter(e);n!=null&&t.push({start:e,end:n})}}),t}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let n=this.getClosingFragmentAfter(e);n!=null&&t.push({start:e,end:n})}}),t}parse(t){if(this.allTheChars=t.split(""),this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let a=0;a<this.fragmentStartIndex.length;a++){let l=this.fragmentStartIndex[a];if(this.resetIntermediateState(),!(l<this.lastFragmentEnded)&&(this.seedOffset=l,this.currentChunkOffset=l,this.parseIntermediateText(),this.isScript)){let c=!1;for(let p=a+1;p<this.fragmentStartIndex.length;p++){let v=this.fragmentStartIndex[p];if(this.fetchAt(v,8).toLowerCase()=="<\/script"){a=p-1,this.isScript=!1,c=!0;break}}if(!c)break}}let n=0,r=0;return this.fragments.forEach(a=>{let l=a.name.toLowerCase();(l=="script"||l=="style")&&(a.embeddedIndex=r,this.embeddedIndexedFragments.set(r,a),r+=1),a.index=n,this.indexedFragments.set(n,a),n+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}getEmbeddedFragments(){let t=[];return this.embeddedIndexedFragments.forEach(e=>{t.push(e)}),t}hasFragments(){return this.fragments.length>0}getCheckAttributeName(t){let e=t.indexOf("."),n=t.indexOf(":");return e!==-1&&(n===-1||e<n)?t.substring(0,e):n!==-1&&(e===-1||n<e)?t.substring(0,n):t}shouldSkip(t){return!1}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)&&As(this),this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_Asterisk){Vi(this,!0);continue}if(this.cur==ot.Punctuation_QuestionMark&&this.next==ot.Punctuation_GreaterThan||this.next==null)break}}scanBackToName(t){let e=[];for(let n=t;n>0;n--){let r=this.chars[n];if(q.ctypeSpace(r))break;e.push(r)}return e.reverse().join("")}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],n=[],r=!1,a=!1,l=null;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),q.ctypeSpace(this.cur)&&(r=!0),this.next==ot.Punctuation_LessThan){let c=1;this.cur==ot.Punctuation_ForwardSlash&&(c=2);let p=this.fetchAt(this.currentChunkOffset+c,5);if(p.toLowerCase()=="<?php"||p.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==ot.Punctuation_LessThan||this.next==null&&this.cur!=ot.Punctuation_GreaterThan)break;if(!r&&this.cur==ot.Punctuation_LessThan&&this.next==ot.Punctuation_ForwardSlash&&(a=!0),!r&&this.cur!=ot.Punctuation_LessThan&&this.cur!=ot.Punctuation_ForwardSlash&&this.cur!=ot.Punctuation_GreaterThan&&n.push(this.cur),r&&this.cur=="@"){let c=this.currentIndex+this.seedOffset+1;if(this.nodeIndexSkipMap.has(c)){let p=this.nodeIndexSkipMap.get(c);this.advance(p);continue}}if(r&&this.cur=="{"){let c=this.currentIndex+this.seedOffset;if(this.nodeIndexSkipMap.has(c)){let p=this.nodeIndexSkipMap.get(c),v=this.fetchAt(c,p+3);if(v.endsWith('"')||v.endsWith("'")){let m=this.scanBackToName(this.currentIndex-1);(m.startsWith("x-")||this.extractAttributeNames.includes(m))&&(l=m+v.substring(0,v.length-2))}this.advance(p);continue}}if(ti(this.cur)){let c=this.currentIndex;this.skipToEndOfStringWithIndex();let p=new wo;if(p.startPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),p.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(p),this.extractAttributePositions==!0){let v=this.scanBackToName(c-2);if(l!=null&&(v=l),v.startsWith("x-")||this.extractAttributeNames.includes(v)){let m=this.getContentSubstring(p.startPosition.offset,p.endPosition.offset-p.startPosition.offset+1),k=me.fromText(m),_=!0;this.nodeIndexSkipMap.has(p.startPosition.offset+2)&&this.nodeIndexSkipMap.get(p.startPosition.offset+2)+p.startPosition.offset+3==p.endPosition.offset&&(_=!1),m.trim()=="{}"&&(_=!1),this.shouldSkip(v)&&(_=!1),_&&!k.getParser().getHasPairedStructures()&&this.extractedAttributes.push({content:m,name:v,startedOn:p.startPosition.offset,endedOn:p.endPosition.offset+1})}}l=null;continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_GreaterThan){let c=new kr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),c.parameters=e,c.isSelfClosing=!0,c.name=n.join(""),c.isClosingFragment=a,this.fragments.push(c),a?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1);break}if(this.cur==ot.Punctuation_GreaterThan){let c=new kr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),c.parameters=e,c.name=n.join(""),c.isClosingFragment=a,this.fragments.push(c),a?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1),c.name.toLowerCase()=="script"&&c.isClosingFragment==!1&&(this.isScript=!0);break}}this.lastFragmentEnded=this.currentIndex+this.seedOffset}skipToEndOfStringWithIndex(){let t=this.cur;for(this.incrementIndex(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex++){this.checkCurrentOffsets();let e=this.currentIndex+this.seedOffset;if(this.nodeIndexSkipMap.has(e)){let n=this.nodeIndexSkipMap.get(e);this.advance(n-1);continue}if(this.cur==t&&this.prev!=ot.String_EscapeCharacter)break}}}});var Nr,kh=Dt(()=>{"use strict";Nr=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var Jo,Th=Dt(()=>{"use strict";Jo=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function Yo(){return Yb}var Yb,Ch=Dt(()=>{"use strict";kh();Th();Yb={ignoreDirectives:[...Nr,...Jo],directives:[],customIfs:[]}});var jo,Hf=Dt(()=>{"use strict";Pe();qe();jo=class{static transform(t,e){let n=e;return t.forEach(r=>{r instanceof Ie?n=n.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof _t&&r.hasDirectiveParameters?n=n.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof oi&&(n=n.replace(r.sourceContent,q.replaceWithFillerExceptNewlines(r.sourceContent)))}),n}static transformContent(t){return t.replace(/>/g,"B").replace(/</g,"B")}}});var Ft,ot,pn=Dt(()=>{"use strict";ah();Af();Of();wf();Ff();Rf();Bf();Sr();mn();Mf();mh();gh();Ks();Pe();xh();qe();Ps();Vf();yh();Ch();Sn();vh();Eh();ds();ms();Dn();Hf();Ft=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.parsingOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.phpValidator=null;this.didRecoveryLogic=!1;this.parseFragments=!0;this.hasPairedStructures=!1;this.unclosedRegionErrors=[Xt.TYPE_UNEXPECTED_END_OF_INPUT,Xt.TYPE_UNCLOSED_PHP_DIRECTIVE,Xt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Xt.TYPE_UNCLOSED_VERBATIM,Xt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Xt.TYPE_UNCLOSED_FOR_DIRECTIVE,Xt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Xt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Xt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new zo(this),this.fragmentsParser=new tr,this.fragmentsAnalyzer=new Wo(this,this.fragmentsParser),this.parserOptions=Yo()}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){this.didRecoveryLogic=!0}withPhpValidator(t){return this.phpValidator=t,this}getPhpValidator(){return this.phpValidator}withParserOptions(t){return this.parserOptions=t,this}getParserOptions(){return this.parserOptions}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}getDidRecovery(){return this.didRecoveryLogic}isStartingPhp(){return this.cur==Ft.Punctuation_LessThan&&this.next==Ft.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==Ft.Punctuation_LessThan&&this.next==Ft.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!q.ctypeAlpha(this.next)?!1:this.cur==Ft.AtChar&&this.next!=null&&this.prev!=Ft.AtChar}isClosingComponent(){return this.cur==Ft.Punctuation_GreaterThan&&this.prev!=Ft.Punctuation_Minus&&this.prev!=Ft.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==Ft.Punctuation_LessThan&&this.next==Ft.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==Ft.Punctuation_Minus||this.peekRelative(3)==Ft.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==Ft.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==Ft.Punctuation_Minus||this.peekRelative(2)==Ft.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=Ft.AtChar)&&this.next==Ft.Punctuation_Exclamation&&this.cur==Ft.LeftBrace&&this.peek(2)==Ft.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=Ft.AtChar)&&this.next==Ft.LeftBrace&&this.cur==Ft.LeftBrace&&this.next==Ft.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}endsWithTld(t){return/\.[a-z]{2,63}$/i.test(t)}processInputText(t){var k;this.originalContent=t,this.content=q.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],n=e.length,r=this.seedStartLine,a=null,l=0,c=0;for(let _=0;_<n;_++){let u=e[_],f=(k=u.index)!=null?k:0,d=f;a!=null?d=f-a:d=d+1,this.documentOffsets.set(f,{char:d,line:r});let x=0,A=0;_==0?(A=d-1,x=0):(x=c+1,A=f),this.lineIndex.set(r,{char:d,line:r,startIndex:x,endIndex:A}),this.lastDocumentOffsetKey=f,this.maxLine=r,r+=1,a=f,c=A,l=x}this.maxLine+=1;let p=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],v=0,m=!1;return p.forEach(_=>{let u=_[0],f=this.content.indexOf(u,v),d=this.content.substr(f,10);if(d.startsWith("@@")||d.startsWith("@{{")){v=this.content.indexOf(u,v),m=!0;return}let x=this.content.indexOf(u,v);if(m&&v==x){v=x;return}let A=3,w=!1,H=!1,V=[],Y=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(z=>{V.push(z.toLowerCase()),z.length>A&&(A=z.length)}),A+=5,w=!0),this.parserOptions.directives.length>0&&(A=3,this.parserOptions.directives.forEach(z=>{Y.push(z.toLowerCase()),z.length>A&&(A=z.length)}),A+=5,w=!1,H=!0);let F=this.fetchAt(x,A);if(F.includes(".")){let z=F;F.includes(`
`)&&(z=q.breakByNewLine(z)[0]);let it=fs.fromText(z);if(it.includes(".")&&this.endsWithTld(it))return}if(F.startsWith("@{")==!1){let z=F.substring(0,1),it=F.substring(1,2);if(z=="@"&&q.ctypeAlpha(it))if(H){let tt=this.breakPreFetch(F).toLowerCase();Y.includes(tt)&&this.bladeStartIndex.push(x)}else if(w){let tt=this.breakPreFetch(F).toLowerCase();V.includes(tt)||this.bladeStartIndex.push(x)}else this.bladeStartIndex.push(x);else z!="@"&&this.bladeStartIndex.push(x)}this.bladeStartPositionIndex.set(x,1),v=x+2,m=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let r=q.replaceAllInString(q.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return r.startsWith("@")&&(r=r.substring(1)),r.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof _t&&(this.lastNode.directiveName==Ot.Verbatim||this.lastNode.directiveName==Ot.Php))}setParseFragments(t){this.parseFragments=t}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Xt.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Xt.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Xt.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let n=this.getLineText(t.line);return n==null?null:On.findLeftNeighboringNextPunctuation(t.char,n,e)}punctuationLeftAtCursor(t,e,n=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),n)}punctuationRightAt(t,e=4){if(t==null)return null;let n=this.getLineText(t.line);return n==null?null:On.findRightBeighboringNextPunctuation(t.char,n,e)}punctuationRightAtCursor(t,e,n=4){return this.punctuationRightAt(this.positionFromCursor(t,e),n)}wordRightAt(t,e=4){if(t==null)return null;let n=this.getLineText(t.line);if(n==null)return null;let r=On.findRightNeighboringNextAlphaNumeric(t.char,n,e);return r==null?null:On.scanWordAt(r,n,e)}wordRightAtCursor(t,e,n=4){return this.wordRightAt(this.positionFromCursor(t,e),n)}wordLeftAt(t,e=4){if(t==null)return null;let n=this.getLineText(t.line);if(n==null)return null;let r=On.findLeftNeighboringNextAlphaNumeric(t.char,n,e);return r==null?null:On.scanWordAt(r,n,e)}wordLeftAtCursor(t,e,n=4){return this.wordLeftAt(this.positionFromCursor(t,e),n)}wordAt(t,e=4){if(t==null)return null;let n=this.getLineText(t.line);return n==null?null:On.scanWordAt(t.char,n,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?q.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,n=4){return this.wordAt(this.positionFromCursor(t,e),n)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var a;let e=new Map,n=t-3,r=t+3;n<1&&(n=1),r>this.maxLine&&(r=this.maxLine);for(let l=n;l<=r;l++)e.set(l,(a=this.getLineText(l))!=null?a:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let n=this.lineIndex.get(t-1);if(n!=null){let r=n.endIndex+1;return{end:this.inputLen-1,start:r}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}getHasPairedStructures(){return this.hasPairedStructures}positionFromCursor(t,e){if(t==this.maxLine){let r=this.lineIndex.get(t-1);if(r!=null){let a=r.endIndex+1,l=a+(e-1),c=new wn;return c.offset=l,c.line=t,c.char=e,c.index=l,c}return null}let n=this.lineIndex.get(t);if(n!=null){let r=new wn;return r.offset=n.startIndex+(e-1),r.line=n.line,r.char=e,r.index=n.startIndex+(e-1),r}return null}parse(t){if(ni.customIfs.clear(),this.parserOptions.customIfs.forEach(c=>{ni.customIfs.set(c,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,n=e-1;if(e==0&&!this.isVerbatim){let c=new Zt;c.withParser(this),c.content=this.prepareLiteralContent(this.content),c.startPosition=this.positionFromOffset(0,0),c.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(c)}else for(let c=0;c<e;c+=1){let p=this.bladeStartIndex[c];if(this.seedOffset=p,c==0&&p>0&&!this.isVerbatim){let m=new Zt;m.withParser(this),m.content=this.prepareLiteralContent(this.content.substr(0,p)),m.content.length>0&&(m.startPosition=this.positionFromOffset(0,0),m.endPosition=this.positionFromOffset(p,p-1),this.nodes.push(m))}if(p<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=p,this.parsingOffset=p,this.resetIntermediateState(),this.parseIntermediateText(p),this.isVerbatim){let m=!1;for(let k=c+1;k<this.bladeStartIndex.length;k++){let _=this.bladeStartIndex[k];if(this.fetchAt(_,12)=="@endverbatim"){c=k-1,this.isVerbatim=!1,m=!0;break}}if(m)continue}if(this.isPhpNode){let m=!1;for(let k=c+1;k<this.bladeStartIndex.length;k++){let _=this.bladeStartIndex[k];if(this.fetchAt(_,7)=="@endphp"){c=k-1,this.isPhpNode=!1,m=!0;break}}if(m)continue}if(this.lastNode instanceof sn||this.lastNode instanceof oi){let m=-1;for(let k=c;k<this.bladeStartIndex.length;k++){let _=this.bladeStartIndex[k];if(_>this.lastBladeEndIndex){m=_;break}}if(m!=-1){let k=1;this.lastNode instanceof oi&&(k=0);let _=this.lastBladeEndIndex+k,u=this.content.substr(this.lastBladeEndIndex+k,m-this.lastBladeEndIndex-k),f=m-1,d=new Zt;d.withParser(this),d.startPosition=this.positionFromOffset(_,_),d.endPosition=this.positionFromOffset(f,f),d.content=u,this.nodes.push(d),this.lastNode=d,this.lastBladeEndIndex=f;continue}}this.lastNode instanceof xi&&(p-=2);let v=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(v=!0):v=!0,v){if(c+1<e){let m=this.bladeStartIndex[c+1],k=1;this.lastNode instanceof oi&&(k=0);let _=this.lastBladeEndIndex+k;if(m<_)if(this.lastBladeEndIndex>m)c+2<e&&(m=this.bladeStartIndex[c+2]);else continue;if(this.shouldSkipForward())for(let u=c;u<this.bladeStartIndex.length;u++){let f=this.bladeStartIndex[u];if(f>this.lastBladeEndIndex){m=f;break}}if(c+1==n&&m<=this.lastBladeEndIndex){if(this.isVerbatim)break;let u=this.currentChunkOffset,f=this.content.substr(_),d=new Zt;d.withParser(this),d.content=this.prepareLiteralContent(f),d.content.length>0&&(d.startPosition=this.positionFromOffset(u,u),d.endPosition=this.positionFromOffset(m,m-1),this.nodes.push(d));break}else{let u=m-this.lastBladeEndIndex-1;if(u<0&&this.lastNode instanceof xi){let x=!0;for(let A=c;A<this.bladeStartIndex.length;A++){let w=this.bladeStartIndex[A];if(w>this.lastBladeEndIndex){m=w,x=!1;break}}if(x){let A=this.currentIndex+p;if(A<this.inputLen&&!this.isVerbatim){let w=new Zt;w.withParser(this),w.content=this.prepareLiteralContent(this.content.substr(A)),w.content.length>0&&(w.startPosition=this.positionFromOffset(A,A),w.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(w));break}}}if(u==0||this.isVerbatim)continue;let f=this.content.substr(_,u),d=new Zt;d.withParser(this),d.content=this.prepareLiteralContent(f),d.content.length>0&&(d.startPosition=this.positionFromOffset(_,_),d.endPosition=this.positionFromOffset(m,m-1),this.nodes.push(d))}continue}if(c!==n&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(p,p).isBefore(this.lastNode.endPosition)){if(c+1<e){if(this.bladeStartIndex[c+1]<this.lastNode.endPosition.offset)continue}else if(c+1!=n)continue}if(c==n){let m=this.currentIndex+p;if(m<this.inputLen&&!this.isVerbatim){let k=new Zt;k.withParser(this),k.content=this.prepareLiteralContent(this.content.substr(m)),k.content.length>0&&(k.startPosition=this.positionFromOffset(m,m),k.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(k));break}}}}let r=0;this.nodes.forEach(c=>{c.index=r,r+=1});let a=null;for(let c=0;c<this.nodes.length;c++){let p=this.nodes[c],v=null;c+1<this.nodes.length&&(v=this.nodes[c+1]),p.prevNode=a,p.nextNode=v,a=p}ni.determineCandidates(this.nodes),this.nodes=Bo.rewrite(this.nodes);let l=new Dr;return this.renderNodes=l.associate(this.nodes,this),this.hasPairedStructures=l.getPairsCreated()>0,Go.analyze(this.nodes),qo.analyze(this.nodes),this.nodes.forEach(c=>{if(c instanceof _t){let p=c,v=p.directiveName.toLowerCase();if(p.isClosedBy!=null){let m=p.getImmediateChildren();for(let k=0;k<m.length;k++){let _=m[k];if(_ instanceof _t&&_!=p.isClosedBy&&_.isClosedBy!=null){p.containsChildStructures=!0;break}else if(_ instanceof yi||_ instanceof Bi||_ instanceof Mi){p.containsChildStructures=!0;break}}}v=="switch"&&p.isClosedBy==null||v=="endswitch"&&p.isOpenedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_PARSE_UNCLOSED_SWITCH,p,"Unclosed switch control structure",0)):v=="php"?p.hasDirectiveParameters==!1&&p.isClosedBy==null&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNCLOSED_PHP_DIRECTIVE,p,"Unclosed @php directive",0)):v=="endphp"&&p.isOpenedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,p,"Unpaired @endphp directive",0)):v=="verbatim"&&p.isClosedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_UNCLOSED_VERBATIM,p,"Unclosed @verbatim directive",0)):v=="endverbatim"&&p.isOpenedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,p,"Unpaired @endverbatim directive",0)):v=="for"&&p.isClosedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_UNCLOSED_FOR_DIRECTIVE,p,"Unclosed @for directive",0)):v=="for"&&p.isClosingDirective==!0&&p.isOpenedBy==null?p.pushError(He.makeSyntaxError(Xt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,p,"Unpaired @endfor directive",0)):v=="forelse"?(p.isClosedBy==null&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,p,"Unclosed @forelse directive",0)),p.findFirstDirectChildDirectiveOfType("empty")==null&&p.pushError(He.makeSyntaxError(Xt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,p,"@forelse missing @empty directive",1))):v=="endforelse"&&p.isOpenedBy==null&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,p,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.parseFragments&&this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(jo.transform(this.nodes,this.content)),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(c=>{var p,v,m,k,_,u,f,d,x,A,w,H;c instanceof yi?(c.fragment=(v=(p=c.constructedFrom)==null?void 0:p.fragment)!=null?v:null,c.fragmentPosition=(k=(m=c.constructedFrom)==null?void 0:m.fragmentPosition)!=null?k:3):c instanceof Mi?(c.fragment=(u=(_=c.constructedFrom)==null?void 0:_.fragment)!=null?u:null,c.fragmentPosition=(d=(f=c.constructedFrom)==null?void 0:f.fragmentPosition)!=null?d:3):c instanceof Bi&&(c.fragment=(A=(x=c.constructedFrom)==null?void 0:x.fragment)!=null?A:null,c.fragmentPosition=(H=(w=c.constructedFrom)==null?void 0:w.fragmentPosition)!=null?H:3)}),Ho.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var n,r,a,l;e instanceof Zt||t.push({start:(r=(n=e.startPosition)==null?void 0:n.index)!=null?r:0,end:(l=(a=e.endPosition)==null?void 0:a.index)!=null?l:0})}),t}createChildDocuments(t){t.forEach(e=>{var n,r,a,l,c,p,v,m;if(e instanceof _t&&e.isClosedBy!=null){let k=e.isClosedBy,_=((r=(n=e.startPosition)==null?void 0:n.index)!=null?r:0)-1,u=((l=(a=k.endPosition)==null?void 0:a.index)!=null?l:0)-_;e.nodeContent=this.content.substr(_,u);let f=(p=(c=e.endPosition)==null?void 0:c.index)!=null?p:0,d=((m=(v=k.startPosition)==null?void 0:v.index)!=null?m:0)-1-f,x=this.content.substr(f,d);e.childrenDocument=me.childFromText(x,this,ji(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}let t=Math.ceil(this.currentIndex/5);t>0&&(this.currentChunkOffset=this.parsingOffset+this.chunkSize*t),this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}parseIntermediateText(t){this.currentContent=[],this.chars=this.content.substring(t).split(""),this.charLen=this.chars.length;let e=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,e=!0;break}if(this.isStartingClosingComponentTag()){let n=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(n,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],e=!0;break}if(this.isStartingOpeningComponentTag()){let n=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(n,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingEscapedEcho()){let n=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(n),this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingBladeNodeStructure()){let n=this.peek(2),r=this.peek(3);if(n==Ft.Punctuation_Minus&&r==Ft.Punctuation_Minus){let a=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(a),this.currentContent=[],this.currentIndex+=4,e=!0;break}else if(n==Ft.LeftBrace){let a=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(a+1),this.currentContent=[],this.currentIndex+=3,e=!0;break}else{let a=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(a+1),this.currentContent=[],this.currentIndex+=2,e=!0;break}}}return e}peek(t){return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)&&As(this),this.cur==Ft.Punctuation_ForwardSlash&&this.next==Ft.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Ui(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ft.Punctuation_ForwardSlash&&this.next==Ft.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Vi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ft.Punctuation_QuestionMark&&this.next==Ft.Punctuation_GreaterThan||this.next==null){let n=new oi;e&&(n=new Fo),n.withParser(this),n.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),n.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let r=n.startPosition.index,a=n.endPosition.index-n.startPosition.index+1;n.sourceContent=this.content.substr(r,a),this.nodes.push(n),this.lastNode=n;break}}}scanToEndOfComponentTag(t,e){let n=!1,r=!1,a=-1,l=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.NewLine&&!n&&(n=!0,a=this.currentIndex),q.ctypeSpace(this.cur)&&!r&&(r=!0,l=this.currentIndex),ti(this.cur)){this.shouldIgnoreStructures=!0,As(this),this.shouldIgnoreStructures=!1;continue}let p=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!p)&&(c=!0,a!=-1?(this.currentIndex=a-2,this.currentContent=this.currentContent.slice(0,a-2),this.didRecoveryLogic=!0):l!=-1&&(this.currentIndex=l-2,this.currentContent=this.currentContent.slice(0,l-2),this.didRecoveryLogic=!0)),p||c){let v=new xi;v.withParser(this),v.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),v.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let m=v.startPosition.index,k=v.endPosition.index-v.startPosition.index+1,_=m+k;v.sourceContent=this.content.substr(m,k),v.isClosingTag=e,v.isSelfClosing=this.prev==Ft.Punctuation_ForwardSlash,v.offset={start:m,end:_,length:k};let u=3;v.isSelfClosing&&(u+=1),v.innerContent=this.content.substr(v.startPosition.index+3,v.endPosition.index-v.startPosition.index-u),c&&v.pushError(He.makeSyntaxError(Xt.TYPE_UNEXPECTED_END_OF_INPUT,v,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(v),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=v,this.nodes.push(v);break}}}scanToEndOfEscapedEcho(t){let e=!1,n=!1,r=-1,a=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.NewLine&&!e&&(e=!0,r=this.currentIndex),q.ctypeSpace(this.cur)&&!n&&(n=!0,a=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):a!=-1&&(this.currentIndex=a-2,this.currentContent=this.currentContent.slice(0,a-2),this.didRecoveryLogic=!0)),this.cur==Ft.Punctuation_Exclamation&&this.next==Ft.Punctuation_Exclamation&&this.peekRelative(2)==Ft.RightBrace||l){let c=this.currentIndex+2,p=new In;p.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),p.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),p.withParser(this);let v=p.startPosition.index,m=p.endPosition.index-p.startPosition.index+1,k=v+m;p.sourceContent=this.content.substr(v,m),p.offset={start:v,end:k,length:m},l&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNEXPECTED_END_OF_INPUT,p,"Unexpected end of input while parsing echo",0)),p.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=p,this.nodes.push(p);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var c,p,v,m,k,_,u,f,d;let e=!1,n=!1,r=-1,a=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.NewLine&&!e&&(e=!0,r=this.currentIndex),q.ctypeSpace(this.cur)&&!n&&(n=!0,a=this.currentIndex),this.next==null&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):a!=-1&&(this.currentIndex=a-2,this.currentContent=this.currentContent.slice(0,a-2),this.didRecoveryLogic=!0)),this.cur==Ft.Punctuation_Minus&&this.next==Ft.Punctuation_Minus||this.next==null){let x=this.peekRelative(2),A=this.peekRelative(3);if(x==Ft.RightBrace&&A==Ft.RightBrace||this.next==null){let w=this.currentIndex+3,H=new sn;H.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),H.endPosition=this.positionFromOffset(w+this.seedOffset,w+this.seedOffset),H.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(w-4+this.seedOffset,w-4+this.seedOffset)},H.withParser(this);let V=H.startPosition.index,Y=H.endPosition.index-H.startPosition.index+1,F=V+Y;H.sourceContent=this.content.substr(V,Y),H.offset={start:V,end:F,length:Y},l&&H.pushError(He.makeSyntaxError(Xt.TYPE_UNCLOSED_COMMENT,H,"Unexpected end of input while parsing comment",0)),H.innerContent=this.content.substr((v=(p=(c=H.innerContentPosition)==null?void 0:c.start)==null?void 0:p.index)!=null?v:0,((_=(k=(m=H.innerContentPosition)==null?void 0:m.end)==null?void 0:k.index)!=null?_:0)-((d=(f=(u=H.innerContentPosition)==null?void 0:u.start)==null?void 0:f.index)!=null?d:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=H,this.nodes.push(H);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,n=!1,r=-1,a=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.NewLine&&!e&&(e=!0,r=this.currentIndex),q.ctypeSpace(this.cur)&&!n&&(n=!0,a=this.currentIndex),ti(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let p=Ri(this);this.shouldIgnoreStructures=!1,this.currentIndex=p.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(p.value.split("")),this.currentContent.push(c),this.currentIndex=p.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):a!=-1&&(this.currentIndex=a-2,this.currentContent=this.currentContent.slice(0,a-2),this.didRecoveryLogic=!0)),this.cur==Ft.RightBrace&&this.next==Ft.RightBrace&&this.peekRelative(2)==Ft.RightBrace||l){let c=this.currentIndex+1,p=new Pn;p.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),p.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),p.withParser(this);let v=p.startPosition.index-1,m=p.endPosition.index-p.startPosition.index+3,k=v+m;p.sourceContent=this.content.substr(v,m),p.offset={start:v,end:k,length:m},l&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNEXPECTED_END_OF_INPUT,p,"Unexpected end of input while parsing echo",0)),p.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=p,this.nodes.push(p);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,n=!1,r=-1,a=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.NewLine&&!e&&(e=!0,r=this.currentIndex),q.ctypeSpace(this.cur)&&!n&&(n=!0,a=this.currentIndex),ti(this.cur)){let c=this.cur;this.shouldIgnoreStructures=!0;let p=Ri(this);this.shouldIgnoreStructures=!1,this.currentIndex=p.endedOn,this.currentContent.push(c),this.currentContent=this.currentContent.concat(p.value.split("")),this.currentContent.push(c),this.currentIndex=p.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(l=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):a!=-1&&(this.currentIndex=a-2,this.currentContent=this.currentContent.slice(0,a-2),this.didRecoveryLogic=!0)),this.cur==Ft.RightBrace&&this.next==Ft.RightBrace||l){let c=this.currentIndex+1,p=new Ie;p.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),p.endPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),p.withParser(this);let v=p.startPosition.index-1,m=p.endPosition.index-p.startPosition.index+2,k=v+m;p.sourceContent=this.content.substr(v,m),p.offset={start:v,end:k,length:m},l&&p.pushError(He.makeSyntaxError(Xt.TYPE_UNEXPECTED_END_OF_INPUT,p,"Unexpected end of input while parsing echo",0)),p.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=p,this.nodes.push(p);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,n){let r=new _t;if(r.withParser(this),t==Ot.Verbatim)this.isVerbatim=!0;else if(t==Ot.Php)this.isPhpNode=!0;else if((t==Ot.EndVerbatim||t==Ot.EndPhp)&&this.nodes[this.nodes.length-1]instanceof Zt){let v=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof _t){let m=this.nodes[this.nodes.length-1];(m.directiveName==Ot.Verbatim||m.directiveName==Ot.Php)&&(m.innerContent=v.content)}}r.directiveName=t.trim(),r.name=t.trim();let a=r.name.toLowerCase();a=="endcan"||a=="endcannot"||a=="endauth"||a=="endguest"||a=="endenv"||a=="endproduction"?(r.name="if",r.isClosingDirective=!0):t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let l=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),c=this.positionFromOffset(this.seedOffset+n,this.seedOffset+n);if(r.startPosition=l,r.endPosition=c,r.namePosition={start:l,end:c},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let p=r.startPosition.index-1,v=r.endPosition.index-r.startPosition.index+1,m=p+v;r.sourceContent=this.content.substr(p,v),r.offset={start:p,end:m,length:v}}return r}makeDirectiveWithParameters(t,e,n,r){var v,m;let a=this.makeDirective(t.trim(),e,n);this.isPhpNode&&t==Ot.Php&&(this.isPhpNode=!1),a.hasDirectiveParameters=!0,a.directiveParameters=r.content;let l=r.content.trim();l.startsWith("(")&&l.endsWith(")")&&(l=l.substring(1),l=l.substring(0,l.length-1),l=l.trim(),a.hasJsonParameters=l.startsWith("{")&&l.endsWith("}"));let c=this.positionFromOffset(r.start,r.start),p=this.positionFromOffset(r.end,r.end);if(a.startPosition=(m=(v=a.namePosition)==null?void 0:v.start)!=null?m:null,a.endPosition=p,a.directiveParametersPosition={start:c,end:p},a.startPosition!=null&&a.endPosition!=null){let k=a.startPosition.index-1,_=a.endPosition.index-a.startPosition.index+1,u=k+_;a.sourceContent=this.content.substr(k,_),a.offset={start:k,end:u,length:_}}return a}scanToEndOfDirective(){let t=this.currentIndex,e="",n=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Ft.Punctuation_ForwardSlash&&this.next==Ft.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Vi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ft.Punctuation_ForwardSlash&&this.next==Ft.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Ui(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Ft.NewLine){n=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let a=this.makeDirective(e.trim(),t,n);this.lastNode=a,this.nodes.push(a),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),n=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let a=this.makeDirective(e.trim(),t,n);this.lastNode=a,this.nodes.push(a),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let r=$s(this);if(this.cur!=Ft.LeftParen&&r.didFind&&q.ctypePunct(r.char)&&r.char!=Ft.LeftParen&&r.char!=Ft.Punctuation_Minus&&r.char!="."){let a=0,l=!1;q.ctypeSpace(this.cur)?(a=1,l=!0):this.currentContent.push(this.cur),n=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let c=this.makeDirective(e.trim(),t,n-a);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-a,l&&(this.currentIndex-=1);break}if(q.ctypeSpace(this.cur)){let a=$s(this);if(a.didFind&&a.char==Ft.LeftParen){n=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=a.index,this.checkCurrentOffsets();let l=Zs(this),c;l.foundEnd?c=this.makeDirectiveWithParameters(e.trim(),t,n,l):(c=this.makeDirective(e.trim(),t,n),this.didRecoveryLogic=!0),this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{n=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let l=this.makeDirective(e.trim(),t,n);this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==Ft.LeftParen){n=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let a=Zs(this),l;a.foundEnd?l=this.makeDirectiveWithParameters(e.trim(),t,n,a):l=this.makeDirective(e.trim(),t,n+1),this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(n=>{var r,a,l,c,p;if(n instanceof Zt)e+=n.content;else if(n instanceof Mi)e+=n.nodeContent;else if(n instanceof Bi)e+=n.nodeContent;else if(n instanceof yi)e+=n.nodeContent;else if(n instanceof _t)if((n.name=="php"||n.name=="verbatim")&&n.isClosedBy!=null){if(n.documentContent.trim().length==0){let v=(p=n.getParser())==null?void 0:p.getText((a=(r=n.endPosition)==null?void 0:r.index)!=null?a:0,((c=(l=n.isClosedBy.startPosition)==null?void 0:l.index)!=null?c:0)-1);e+=n.sourceContent,e+=v}}else e+=n.sourceContent;else e+=n.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let n=[];return this.nodes.forEach(r=>{var a,l,c,p;((l=(a=r.startPosition)==null?void 0:a.offset)!=null?l:0)>t.offset&&((p=(c=r.endPosition)==null?void 0:c.offset)!=null?p:0)<e.offset&&n.push(r)}),n}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,n=!1){let r=0,a=0;if(this.documentOffsets.has(t)){let c=this.documentOffsets.get(t);r=c.line,a=c.char}else if(this.documentOffsets.size==0)r=1,a=t+1;else{let c=null,p=null,v=null,m=null;for(let k of this.documentOffsets.keys()){if(k>=t){m!=null&&t>m?(c=v,p=m):(c=this.documentOffsets.get(k),p=k);break}v=this.documentOffsets.get(k),m=k}c==null&&(c=v,p=m),c!=null?(a=t-(p!=null?p:0),r=c.line,t<=(p!=null?p:0)?(r=c.line,a=t+1):r=c.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,a=t+this.lastDocumentOffsetKey)}let l=new wn;return l.index=e,l.offset=t,l.line=r+this.shiftLine,l.char=a,l}},ot=Ft;ot.K_CHAR="char",ot.K_LINE="line",ot.NewLine=`
`,ot.AtChar="@",ot.Punctuation_Colon=":",ot.Punctuation_QuestionMark="?",ot.LeftParen="(",ot.RightParen=")",ot.LeftBrace="{",ot.RightBrace="}",ot.String_Terminator_DoubleQuote='"',ot.String_Terminator_SingleQuote="'",ot.Punctuation_LessThan="<",ot.Punctuation_GreaterThan=">",ot.Punctuation_Equals="=",ot.Punctuation_Exclamation="!",ot.LeftBracket="[",ot.RightBracket="]",ot.Punctuation_Comma=",",ot.Punctuation_Minus="-",ot.Punctuation_Asterisk="*",ot.Punctuation_ForwardSlash="/",ot.Punctuation_Underscore="_",ot.String_EscapeCharacter="\\"});var ai,Ah=Dt(()=>{"use strict";Pe();ai=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let n=0;n<e.length;n++){let r=e[n];if(!ai.isLiteralType(r)&&r.startPosition!=null&&r.startPosition.index>t.index)return r}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let n=null;for(let r=0;r<e.length;r++){let a=e[r];if(!ai.isLiteralType(a)&&a.startPosition!=null){if(a.startPosition.index>t.index)break;n=a}}return n}static findNodeAtPosition(t,e){if(t==null)return null;for(let n=0;n<e.length;n++){let r=e[n];if(!ai.isLiteralType(r)&&r.startPosition!=null&&r.endPosition!=null&&t.index>=r.startPosition.index&&t.index<=r.endPosition.index)return r}return null}static isLiteralType(t){return t instanceof Zt}static findNodesBeforePosition(t,e){let n=[];if(t==null)return n;for(let r=0;r<e.length;r++){let a=e[r];if(!ai.isLiteralType(a)&&a.startPosition!=null&&a.endPosition!=null){if(a.startPosition.index>t.index)break;n.push(a)}}return n}static findNodesAfterPosition(t,e){let n=[];if(t==null)return n;for(let r=0;r<e.length;r++){let a=e[r];ai.isLiteralType(a)||a.startPosition!=null&&a.startPosition.index>t.index&&n.push(a)}return n}}});var Xo,Wf=Dt(()=>{"use strict";Ah();Xo=class{constructor(t){this.doc=t}getNodeAt(t,e){return ai.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return ai.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return ai.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return ai.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return ai.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,n=4){return this.doc.getParser().wordLeftAtCursor(t,e,n)}wordRightAt(t,e,n=4){return this.doc.getParser().wordRightAtCursor(t,e,n)}wordAt(t,e,n=4){return this.doc.getParser().wordAtCursor(t,e,n)}punctuationLeftAt(t,e,n=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,n)}punctuationRightAt(t,e,n=4){return this.doc.getParser().punctuationRightAtCursor(t,e,n)}}});var Ko,Gf=Dt(()=>{"use strict";Ko=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(n=>{n.getErrors().forEach(r=>{t.includes(r.hash())==!1&&(t.push(r.hash()),e.push(r))})}),this.doc.getParser().getErrors().forEach(n=>{t.includes(n.hash())==!1&&(t.push(n.hash()),e.push(n))}),e}}});var Qo,qf=Dt(()=>{"use strict";Pe();Ah();Qo=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let n=0;n<e.length;n++){let r=e[n];if(r instanceof _t&&r.directiveName==t)return r}return null}getNodeAt(t){return ai.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return ai.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return ai.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return ai.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return ai.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof sn&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Zt&&t.push(e)}),t}}});var Re,Ir=Dt(()=>{"use strict";qe();Re=class{static relativeIndentLevel(t,e){let n=q.breakByNewLine(e);for(let r=0;r<n.length;r++){let a=n[r];if(a.includes(t)){let l=a.trimLeft();return a.length-l.length}}return 0}static indentRelative(t,e,n){let r=q.breakByNewLine(t),a=[];for(let p=0;p<r.length;p++)if(r[p].trim().length>0){a=r.slice(p);break}for(let p=a.length-1;p>=0&&a[p].trim().length==0;p--)a.pop();let l=-1,c="";for(let p=0;p<a.length;p++){let v=a[p],m=v.trimLeft(),k=v.length-m.length;v.trim().length!=0&&(p==0||k<l)&&(l=k,c=v)}if(l==n&&(l=0),l>=0){let p=" ".repeat(e);for(let v=0;v<a.length;v++){let m=a[v];if(m.trim().length==0){a[v]="";continue}let k=m.substring(l);if(v==0){a[v]=m.trimLeft();continue}else a[v]=p+k}}return a.join(`
`)}static shiftIndentWithLastLineInline(t,e,n,r=!1){let a=q.breakByNewLine(t.trim()),l=[];if(a.length>1){let c=!0;for(let p=1;p<a.length;p++){let v=a[p],m=v.length-v.trim().length;if(n-m!=0){c=!1;break}}if(c)return t.trim()}for(let c=0;c<a.length;c++){if(c==0&&r){l.push(a[c]);continue}let p=a[c];p.trim().length==0?l.push(""):l.push(" ".repeat(Math.max(0,n-e))+p)}return l.join(`
`)}static shiftIndent(t,e,n=!1,r,a=!1,l=!1){let c=q.breakByNewLine(t.trim()),p=[];if(c.length>1){let v=!0;for(let m=1;m<c.length;m++){let k=c[m],_=k.length-k.trim().length;if(e-_!=0){v=!1;break}}if(v){if(c[0].trimLeft().length==c[0].length&&e==r.tabSize&&a){let m=" ".repeat(r.tabSize);return c.forEach(k=>{p.push(m+k)}),p.join(`
`)}return t.trim()}}for(let v=0;v<c.length;v++){if(v==0&&n){p.push(c[v]);continue}let m=c[v];m.trim().length==0?p.push(""):l&&v==c.length-1?p.push(" ".repeat(e-r.tabSize)+m):p.push(" ".repeat(e)+m)}return p.join(`
`)}static shiftClean(t,e){let n=q.breakByNewLine(t),r=[],a=" ".repeat(e),l=!1;return n.forEach(c=>{c.trim().length>0&&(l=!0),l&&(c.trim().length==0?r.push(""):r.push(a+c))}),r.join(`
`)}static inferIndentLevel(t,e,n){let r=0,a=-1;for(let l=0;l<t.length;l++){let c=t[l];if(c.includes(e)){let p=c.trimLeft();r=c.length-p.length,a=l;break}}if(a>0)for(let l=a-1;l>=0;l--){let c=t[l],p=c.trim(),v=c.trimLeft(),m=c.length-p.length;if(v.length!=0&&m!=r&&m<r){let k=r-m;return{targetLevel:r,referenceLevel:m,sourceTabSize:k}}}return{targetLevel:r,referenceLevel:r,sourceTabSize:n}}static indent(t,e,n){let r=Re.inferIndentLevel(t,e,n);return" ".repeat(r.targetLevel)}}});var Pr,We,Or=Dt(()=>{"use strict";Pe();pn();Sn();ds();ms();Dn();qe();Pr=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return Pr.breakOperators.some(e=>t.includes(e))}safeReflow(t){return Pr.couldReflow(t)?this.reflow(t):t}parse(t){for(this.tokens=[],this.content=q.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),q.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ti(this.cur)){let e=this.cur,n=Ri(this);this.pushChar(e),this.currentContent=this.currentContent.concat(n.value.split("")),this.pushChar(e),this.currentIndex=n.endedOn;continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_Asterisk){Vi(this,!0);continue}if(this.cur!=null)if(this.cur==="!"&&this.next!=="="){if(this.currentContent.length>0){let n=new Zt;n.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(n)}let e=new Cr;e.sourceContent=this.cur,this.tokens.push(e),this.currentContent=[];continue}else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Zt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="",n=!1;return this.tokens.forEach(r=>{if(r instanceof Cr){n=!0,e+=r.sourceContent+" ";return}r instanceof Zt&&(n?e+=r.content.trimLeft():e+=r.content),n=!1}),e}},We=Pr;We.breakOperators=["!"],We.instance=new Pr});var Jf=j(($o,zf)=>{(function(i,t){typeof $o=="object"&&typeof zf<"u"?t($o,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((i=typeof globalThis<"u"?globalThis:i||self).prettierPlugins=i.prettierPlugins||{},i.prettierPlugins.php={}),i.prettier)})($o,function(i,t){"use strict";function e(s){return s&&typeof s=="object"&&"default"in s?s:{default:s}}var n=e(t);function r(s,o){var h=Object.keys(s);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);o&&(g=g.filter(function(y){return Object.getOwnPropertyDescriptor(s,y).enumerable})),h.push.apply(h,g)}return h}function a(s){for(var o=1;o<arguments.length;o++){var h=arguments[o]!=null?arguments[o]:{};o%2?r(Object(h),!0).forEach(function(g){p(s,g,h[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(h)):r(Object(h)).forEach(function(g){Object.defineProperty(s,g,Object.getOwnPropertyDescriptor(h,g))})}return s}function l(){l=function(){return s};var s={},o=Object.prototype,h=o.hasOwnProperty,g=typeof Symbol=="function"?Symbol:{},y=g.iterator||"@@iterator",S=g.asyncIterator||"@@asyncIterator",O=g.toStringTag||"@@toStringTag";function T(ut,ht,zt){return Object.defineProperty(ut,ht,{value:zt,enumerable:!0,configurable:!0,writable:!0}),ut[ht]}try{T({},"")}catch{T=function(ht,zt,jt){return ht[zt]=jt}}function B(ut,ht,zt,jt){var Rt=ht&&ht.prototype instanceof Ht?ht:Ht,be=Object.create(Rt.prototype),Fe=new Ve(jt||[]);return be._invoke=function($e,_i,ae){var Ye="suspendedStart";return function(Li,ls){if(Ye==="executing")throw new Error("Generator is already running");if(Ye==="completed"){if(Li==="throw")throw ls;return gi()}for(ae.method=Li,ae.arg=ls;;){var cs=ae.delegate;if(cs){var cn=ve(cs,ae);if(cn){if(cn===P)continue;return cn}}if(ae.method==="next")ae.sent=ae._sent=ae.arg;else if(ae.method==="throw"){if(Ye==="suspendedStart")throw Ye="completed",ae.arg;ae.dispatchException(ae.arg)}else ae.method==="return"&&ae.abrupt("return",ae.arg);Ye="executing";var en=R($e,_i,ae);if(en.type==="normal"){if(Ye=ae.done?"completed":"suspendedYield",en.arg===P)continue;return{value:en.arg,done:ae.done}}en.type==="throw"&&(Ye="completed",ae.method="throw",ae.arg=en.arg)}}}(ut,zt,Fe),be}function R(ut,ht,zt){try{return{type:"normal",arg:ut.call(ht,zt)}}catch(jt){return{type:"throw",arg:jt}}}s.wrap=B;var P={};function Ht(){}function Vt(){}function le(){}var _e={};T(_e,y,function(){return this});var Wt=Object.getPrototypeOf,Te=Wt&&Wt(Wt(ln([])));Te&&Te!==o&&h.call(Te,y)&&(_e=Te);var te=le.prototype=Ht.prototype=Object.create(_e);function De(ut){["next","throw","return"].forEach(function(ht){T(ut,ht,function(zt){return this._invoke(ht,zt)})})}function Ne(ut,ht){function zt(Rt,be,Fe,$e){var _i=R(ut[Rt],ut,be);if(_i.type!=="throw"){var ae=_i.arg,Ye=ae.value;return Ye&&typeof Ye=="object"&&h.call(Ye,"__await")?ht.resolve(Ye.__await).then(function(Li){zt("next",Li,Fe,$e)},function(Li){zt("throw",Li,Fe,$e)}):ht.resolve(Ye).then(function(Li){ae.value=Li,Fe(ae)},function(Li){return zt("throw",Li,Fe,$e)})}$e(_i.arg)}var jt;this._invoke=function(Rt,be){function Fe(){return new ht(function($e,_i){zt(Rt,be,$e,_i)})}return jt=jt?jt.then(Fe,Fe):Fe()}}function ve(ut,ht){var zt=ut.iterator[ht.method];if(zt===void 0){if(ht.delegate=null,ht.method==="throw"){if(ut.iterator.return&&(ht.method="return",ht.arg=void 0,ve(ut,ht),ht.method==="throw"))return P;ht.method="throw",ht.arg=new TypeError("The iterator does not provide a 'throw' method")}return P}var jt=R(zt,ut.iterator,ht.arg);if(jt.type==="throw")return ht.method="throw",ht.arg=jt.arg,ht.delegate=null,P;var Rt=jt.arg;return Rt?Rt.done?(ht[ut.resultName]=Rt.value,ht.next=ut.nextLoc,ht.method!=="return"&&(ht.method="next",ht.arg=void 0),ht.delegate=null,P):Rt:(ht.method="throw",ht.arg=new TypeError("iterator result is not an object"),ht.delegate=null,P)}function ee(ut){var ht={tryLoc:ut[0]};1 in ut&&(ht.catchLoc=ut[1]),2 in ut&&(ht.finallyLoc=ut[2],ht.afterLoc=ut[3]),this.tryEntries.push(ht)}function Ce(ut){var ht=ut.completion||{};ht.type="normal",delete ht.arg,ut.completion=ht}function Ve(ut){this.tryEntries=[{tryLoc:"root"}],ut.forEach(ee,this),this.reset(!0)}function ln(ut){if(ut){var ht=ut[y];if(ht)return ht.call(ut);if(typeof ut.next=="function")return ut;if(!isNaN(ut.length)){var zt=-1,jt=function Rt(){for(;++zt<ut.length;)if(h.call(ut,zt))return Rt.value=ut[zt],Rt.done=!1,Rt;return Rt.value=void 0,Rt.done=!0,Rt};return jt.next=jt}}return{next:gi}}function gi(){return{value:void 0,done:!0}}return Vt.prototype=le,T(te,"constructor",le),T(le,"constructor",Vt),Vt.displayName=T(le,O,"GeneratorFunction"),s.isGeneratorFunction=function(ut){var ht=typeof ut=="function"&&ut.constructor;return!!ht&&(ht===Vt||(ht.displayName||ht.name)==="GeneratorFunction")},s.mark=function(ut){return Object.setPrototypeOf?Object.setPrototypeOf(ut,le):(ut.__proto__=le,T(ut,O,"GeneratorFunction")),ut.prototype=Object.create(te),ut},s.awrap=function(ut){return{__await:ut}},De(Ne.prototype),T(Ne.prototype,S,function(){return this}),s.AsyncIterator=Ne,s.async=function(ut,ht,zt,jt,Rt){Rt===void 0&&(Rt=Promise);var be=new Ne(B(ut,ht,zt,jt),Rt);return s.isGeneratorFunction(ht)?be:be.next().then(function(Fe){return Fe.done?Fe.value:be.next()})},De(te),T(te,O,"Generator"),T(te,y,function(){return this}),T(te,"toString",function(){return"[object Generator]"}),s.keys=function(ut){var ht=[];for(var zt in ut)ht.push(zt);return ht.reverse(),function jt(){for(;ht.length;){var Rt=ht.pop();if(Rt in ut)return jt.value=Rt,jt.done=!1,jt}return jt.done=!0,jt}},s.values=ln,Ve.prototype={constructor:Ve,reset:function(ut){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Ce),!ut)for(var ht in this)ht.charAt(0)==="t"&&h.call(this,ht)&&!isNaN(+ht.slice(1))&&(this[ht]=void 0)},stop:function(){this.done=!0;var ut=this.tryEntries[0].completion;if(ut.type==="throw")throw ut.arg;return this.rval},dispatchException:function(ut){if(this.done)throw ut;var ht=this;function zt(_i,ae){return be.type="throw",be.arg=ut,ht.next=_i,ae&&(ht.method="next",ht.arg=void 0),!!ae}for(var jt=this.tryEntries.length-1;jt>=0;--jt){var Rt=this.tryEntries[jt],be=Rt.completion;if(Rt.tryLoc==="root")return zt("end");if(Rt.tryLoc<=this.prev){var Fe=h.call(Rt,"catchLoc"),$e=h.call(Rt,"finallyLoc");if(Fe&&$e){if(this.prev<Rt.catchLoc)return zt(Rt.catchLoc,!0);if(this.prev<Rt.finallyLoc)return zt(Rt.finallyLoc)}else if(Fe){if(this.prev<Rt.catchLoc)return zt(Rt.catchLoc,!0)}else{if(!$e)throw new Error("try statement without catch or finally");if(this.prev<Rt.finallyLoc)return zt(Rt.finallyLoc)}}}},abrupt:function(ut,ht){for(var zt=this.tryEntries.length-1;zt>=0;--zt){var jt=this.tryEntries[zt];if(jt.tryLoc<=this.prev&&h.call(jt,"finallyLoc")&&this.prev<jt.finallyLoc){var Rt=jt;break}}Rt&&(ut==="break"||ut==="continue")&&Rt.tryLoc<=ht&&ht<=Rt.finallyLoc&&(Rt=null);var be=Rt?Rt.completion:{};return be.type=ut,be.arg=ht,Rt?(this.method="next",this.next=Rt.finallyLoc,P):this.complete(be)},complete:function(ut,ht){if(ut.type==="throw")throw ut.arg;return ut.type==="break"||ut.type==="continue"?this.next=ut.arg:ut.type==="return"?(this.rval=this.arg=ut.arg,this.method="return",this.next="end"):ut.type==="normal"&&ht&&(this.next=ht),P},finish:function(ut){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var zt=this.tryEntries[ht];if(zt.finallyLoc===ut)return this.complete(zt.completion,zt.afterLoc),Ce(zt),P}},catch:function(ut){for(var ht=this.tryEntries.length-1;ht>=0;--ht){var zt=this.tryEntries[ht];if(zt.tryLoc===ut){var jt=zt.completion;if(jt.type==="throw"){var Rt=jt.arg;Ce(zt)}return Rt}}throw new Error("illegal catch attempt")},delegateYield:function(ut,ht,zt){return this.delegate={iterator:ln(ut),resultName:ht,nextLoc:zt},this.method==="next"&&(this.arg=void 0),P}},s}function c(s){return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},c(s)}function p(s,o,h){return o in s?Object.defineProperty(s,o,{value:h,enumerable:!0,configurable:!0,writable:!0}):s[o]=h,s}function v(s,o){return function(h){if(Array.isArray(h))return h}(s)||function(h,g){var y=h==null?null:typeof Symbol<"u"&&h[Symbol.iterator]||h["@@iterator"];if(y!=null){var S,O,T=[],B=!0,R=!1;try{for(y=y.call(h);!(B=(S=y.next()).done)&&(T.push(S.value),!g||T.length!==g);B=!0);}catch(P){R=!0,O=P}finally{try{B||y.return==null||y.return()}finally{if(R)throw O}}return T}}(s,o)||k(s,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m(s){return function(o){if(Array.isArray(o))return _(o)}(s)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(s)||k(s)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(s,o){if(s){if(typeof s=="string")return _(s,o);var h=Object.prototype.toString.call(s).slice(8,-1);return h==="Object"&&s.constructor&&(h=s.constructor.name),h==="Map"||h==="Set"?Array.from(s):h==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(h)?_(s,o):void 0}}function _(s,o){(o==null||o>s.length)&&(o=s.length);for(var h=0,g=new Array(o);h<o;h++)g[h]=s[h];return g}function u(s,o){var h=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!h){if(Array.isArray(s)||(h=k(s))||o&&s&&typeof s.length=="number"){h&&(s=h);var g=0,y=function(){};return{s:y,n:function(){return g>=s.length?{done:!0}:{done:!1,value:s[g++]}},e:function(B){throw B},f:y}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S,O=!0,T=!1;return{s:function(){h=h.call(s)},n:function(){var B=h.next();return O=B.done,B},e:function(B){T=!0,S=B},f:function(){try{O||h.return==null||h.return()}finally{if(T)throw S}}}}var f={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){var s=this.input();if(this.is_WHITESPACE()){do s=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(s){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||s==="\\"){for(;this.offset<this.size;){var o=this.input();if(!this.is_LABEL()&&o!=="\\"){o&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(s,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};f.attributeIndex,f.attributeListDepth,f.matchST_ATTRIBUTE;var d={T_COMMENT:function(){for(;this.offset<this.size;){var s=this.input();if(s===`
`||s==="\r")return this.tok.T_COMMENT;if(s==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(s==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var s=this.input(),o=this.tok.T_COMMENT;if(s==="*"){if(s=this.input(),this.is_WHITESPACE()&&(o=this.tok.T_DOC_COMMENT),s==="/")return o;this.unput(1)}for(;this.offset<this.size;)if((s=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return o}};d.T_COMMENT,d.T_DOC_COMMENT;var x={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var s=this.input();if(s=="<"){if((s=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((s=this._input[this.offset+4])===" "||s==="	"||s===`
`||s==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&s=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};x.nextINITIAL,x.matchINITIAL;var A={consume_NUM:function(){var s=this.yytext[0],o=s===".";if(s==="0")if((s=this.input())==="x"||s==="X"){if((s=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(s?2:1)}else if(s==="b"||s==="B"){if((s=this.input())!=="_"&&s==="0"||s==="1")return this.consume_BNUM();this.unput(s?2:1)}else if(s==="o"||s==="O"){if((s=this.input())!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(s?2:1)}else this.is_NUM()||s&&this.unput(1);for(;this.offset<this.size;){var h=s;if((s=this.input())==="_"){if(h==="_"){this.unput(2);break}if(h==="."){this.unput(1);break}if(h==="e"||h==="E"){this.unput(2);break}}else{if(s==="."){if(o){this.unput(1);break}if(h==="_"){this.unput(2);break}o=!0;continue}if(s==="e"||s==="E"){if(h==="_"){this.unput(1);break}var g=2;if((s=this.input())!=="+"&&s!=="-"||(g=3,s=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(s?g:g-1);break}}if(!this.is_NUM()){s&&this.unput(1);break}}return o?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var s=this.input();if(!this.is_HEX()){s&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var s=this.input();if(!this.is_NUM()){s&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var s;this.offset<this.size;)if((s=this.input())!=="0"&&s!=="1"&&s!=="_"){s&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){var s=this.input();if(!this.is_OCTAL()){s&&this.unput(1);break}}return this.tok.T_LNUMBER}};A.consume_NUM,A.consume_HNUM,A.consume_LNUM,A.consume_BNUM,A.consume_ONUM;var w={matchST_LOOKING_FOR_PROPERTY:function(){var s=this.input();if(s==="-"){if((s=this.input())===">")return this.tok.T_OBJECT_OPERATOR;s&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),s&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var s=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(s=this.input())==="["||s==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else s&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var s=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(s==="]")return this.popState(),"]";if(s==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||s==="\\"||s==="'"||s==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(s==="["||s==="{"||s==="}"||s==='"'||s==="`"||this.is_TOKEN())return s;throw new Error("Unexpected terminal")}};w.matchST_LOOKING_FOR_PROPERTY,w.matchST_LOOKING_FOR_VARNAME,w.matchST_VAR_OFFSET;var H={matchST_IN_SCRIPTING:function(){var s=this.input();switch(s){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var o=this._input[this.offset];return o!==`
`&&o!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(s=this._input[this.offset])!==`
`&&s!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(s==="."){if(s=this.input(),this.is_NUM_START())return this.consume_NUM();s&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+s+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var s=this.input();if(s!==" "&&s!=="	"&&s!==`
`&&s!=="\r"){s&&this.unput(1);break}}return this.tok.T_WHITESPACE}};H.matchST_IN_SCRIPTING,H.T_WHITESPACE;var V=[`
`,"\r"],Y=[`
`,"\r",";"],F=Y.concat(["	"," ",",","]",")","/","=","!"]),z={T_CONSTANT_ENCAPSED_STRING:function(){for(var s;this.offset<this.size;)if((s=this.input())=="\\")this.input();else if(s=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var s=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var o=this._input[this.offset-1];if(o==="'"||o==='"'?this.offset++:o=null,this.is_LABEL_START()){for(var h=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var g=this._input.substring(h,this.offset-1);if((!o||o===this._input[this.offset-1])&&(o&&this.offset++,V.includes(this._input[this.offset-1])))return this.heredoc_label.label=g,this.heredoc_label.length=g.length,this.heredoc_label.finished=!1,h=this.offset-s,this.offset=s,this.consume(h),o==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=s,!1},ST_DOUBLE_QUOTES:function(){for(var s;this.offset<this.size;)if((s=this.input())=="\\")this.input();else{if(s=='"')break;if(s=="$"){if((s=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}s&&this.unput(1)}else if(s=="{"){if((s=this.input())=="$"){this.unput(2);break}s&&this.unput(1)}}if(s=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var o=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(o=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-o),this.unput(this.yytext.length-o),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(s,o){var h=this._input[s-2];if(!V.includes(h))return!1;var g=!1,y=!1,S=0,O=this._input[s-1];if(this.version>=703){for(;O==="	"||O===" ";)O===" "?g=!0:O==="	"&&(y=!0),O=this._input[s+S],S++;if(s+=S,V.includes(this._input[s-1]))return!1}if(this._input.substring(s-1,s-1+this.heredoc_label.length)===this.heredoc_label.label){var T=this._input[s-1+this.heredoc_label.length];if((this.version>=703?F:Y).includes(T)){if(o){if(this.consume(S),g&&y)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=S,this.heredoc_label.indentation_uses_spaces=g,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var s=this.offset+1;s<this._input.length;){if(this.isDOC_MATCH(s,!1))return;if(!V.includes(this._input[s-1]))for(;!V.includes(this._input[s++])&&s<this._input.length;);s++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var s=this._input[this.offset-1];this.offset<this.size;)if(V.includes(s)){if(s=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else s=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var s=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(s==="\\"&&(s=this.input(),V.includes(s)||(s=this.input())),V.includes(s)){if(s=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(s==="$"){if((s=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,h=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(h,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):h}}else if(s==="{"){if((s=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else s=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var s=this.input();if(s=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(s==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else s&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var s=this.input();if(s==="$"){if((s=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(s==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(s==="`")return this.popState(),"`";for(;this.offset<this.size;){if(s==="\\")this.input();else{if(s==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(s==="$"){if((s=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,h=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(h,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):h}continue}if(s==="{"){if((s=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}s=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var s=this.input();if(s==="$"){if((s=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(s==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(s==='"')return this.popState(),'"';for(;this.offset<this.size;){if(s==="\\")this.input();else{if(s==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(s==="$"){if((s=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,h=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(h,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):h}s&&this.unput(1)}else if(s==="{"){if((s=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);s&&this.unput(1)}}s=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};z.T_CONSTANT_ENCAPSED_STRING,z.is_HEREDOC,z.ST_DOUBLE_QUOTES,z.isDOC_MATCH,z.prematch_ENDOFDOC,z.matchST_NOWDOC,z.matchST_HEREDOC,z.consume_VARIABLE,z.matchST_BACKQUOTE,z.matchST_DOUBLE_QUOTES;var it={T_STRING:function(){var s=this.yytext.toLowerCase(),o=this.keywords[s];if(typeof o!="number"){if(s==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),o=this.tok.T_YIELD_FROM):o=this.tok.T_YIELD;else if(o=this.tok.T_STRING,s==="b"||s==="B"){var h=this.input();if(h==='"')return this.ST_DOUBLE_QUOTES();if(h==="'")return this.T_CONSTANT_ENCAPSED_STRING();h&&this.unput(1)}}if(o===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;for(var g=this.offset,y=this.input();y==" ";)y=this.input();var S=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)y+=this.input();var O=y.slice(0,-1).toLowerCase();S=O!=="extends"&&O!=="implements"}return this.unput(this.offset-g),S?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&o!==this.tok.T_YIELD_FROM){var T=this.input();if(T==="\\"){o=s==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),T=this.input()}while(T==="\\")}T&&this.unput(1)}return o},consume_TOKEN:function(){var s=this._input[this.offset-1],o=this.tokenTerminals[s];return o?o.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var s=this._input[this.offset];return s===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):s==="-"?(this.input(),this.tok.T_DEC):s==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){var s;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),s=this.input()}while(s==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var s=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var o=this.yytext.length;this.consume_LABEL();var h=this.yytext.substring(o-1).toLowerCase(),g=this.castKeywords[h];if(typeof g=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return g}return this.unput(this.offset-s),"("},"=":function(){var s=this._input[this.offset];return s===">"?(this.input(),this.tok.T_DOUBLE_ARROW):s==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var s=this._input[this.offset];return s==="+"?(this.input(),this.tok.T_INC):s==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var s=this._input[this.offset];return s==="<"?(s=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):s==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):s==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):s===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var s=this._input[this.offset];return s==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):s===">"?(s=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var s=this._input[this.offset];return s==="="?(this.input(),this.tok.T_MUL_EQUAL):s==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var s=this._input[this.offset];return s==="="?(this.input(),this.tok.T_CONCAT_EQUAL):s==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var s=this._input[this.offset];return s==="="?(this.input(),this.tok.T_AND_EQUAL):s==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var s=this._input[this.offset];return s==="="?(this.input(),this.tok.T_OR_EQUAL):s==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};it.T_STRING,it.consume_TOKEN,it.tokenTerminals;var tt={is_NUM:function(){var s=this._input.charCodeAt(this.offset-1);return s>47&&s<58||s===95},is_NUM_START:function(){var s=this._input.charCodeAt(this.offset-1);return s>47&&s<58},is_LABEL:function(){var s=this._input.charCodeAt(this.offset-1);return s>96&&s<123||s>64&&s<91||s===95||s>47&&s<58||s>126},is_LABEL_START:function(){var s=this._input.charCodeAt(this.offset-1);return s>64&&s<91||s>96&&s<123||s===95||s>126},consume_LABEL:function(){for(;this.offset<this.size;){var s=this.input();if(!this.is_LABEL()){s&&this.unput(1);break}}return this},is_TOKEN:function(){var s=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(s)!==-1},is_WHITESPACE:function(){var s=this._input[this.offset-1];return s===" "||s==="	"||s===`
`||s==="\r"},is_TABSPACE:function(){var s=this._input[this.offset-1];return s===" "||s==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var s=this.input();if(!this.is_TABSPACE()){s&&this.unput(1);break}}return this},is_HEX:function(){var s=this._input.charCodeAt(this.offset-1);return s>47&&s<58||s>64&&s<71||s>96&&s<103||s===95},is_OCTAL:function(){var s=this._input.charCodeAt(this.offset-1);return s>47&&s<56||s===95}};tt.is_NUM,tt.is_NUM_START,tt.is_LABEL,tt.is_LABEL_START,tt.consume_LABEL,tt.is_TOKEN,tt.is_WHITESPACE,tt.is_TABSPACE,tt.consume_TABSPACE,tt.is_HEX,tt.is_OCTAL;var pt=function(s){this.engine=s,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};pt.prototype.setInput=function(s){return this._input=s,this.size=s.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},pt.prototype.input=function(){var s=this._input[this.offset];return s?(this.yytext+=s,this.offset++,s==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),s===`
`||s==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,s):""},pt.prototype.unput=function(s){if(s===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,s++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-s);else if(s>0)if(this.offset-=s,s<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-s),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var o=0;o<this.yytext.length;o++){var h=this.yytext[o];h==="\r"?(h=this.yytext[++o],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,h!==`
`&&(h==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):h===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},pt.prototype.tryMatch=function(s){return s===this.ahead(s.length)},pt.prototype.tryMatchCaseless=function(s){return s===this.ahead(s.length).toLowerCase()},pt.prototype.ahead=function(s){var o=this._input.substring(this.offset,this.offset+s);return o[o.length-1]==="\r"&&this._input[this.offset+s+1]===`
`&&(o+=`
`),o},pt.prototype.consume=function(s){for(var o=0;o<s;o++){var h=this._input[this.offset];if(!h)break;this.yytext+=h,this.offset++,h==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,o++),h===`
`||h==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},pt.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},pt.prototype.setState=function(s){return this.yytext=s.yytext,this.offset=s.offset,this.yylineno=s.yylineno,this.yyprevcol=s.yyprevcol,this.yylloc=s.yylloc,s.heredoc_label&&(this.heredoc_label=s.heredoc_label),this},pt.prototype.appendToken=function(s,o){return this.tokens.push([s,o]),this},pt.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var s=this.next()||this.lex();if(!this.all_tokens){for(;s===this.tok.T_WHITESPACE||!this.comment_tokens&&(s===this.tok.T_COMMENT||s===this.tok.T_DOC_COMMENT)||s===this.tok.T_OPEN_TAG;)s=this.next()||this.lex();if(s==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(s===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),s},pt.prototype.begin=function(s){if(this.conditionStack.push(s),this.curCondition=s,this.stateCb=this["match"+s],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+s+'"');return this},pt.prototype.popState=function(){var s=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return s},pt.prototype.next=function(){var s;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(c((s=this.tokens.shift())[1])==="object"?this.setState(s[1]):this.consume(s[1]),s=s[0]):s=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var o=s;o=typeof o=="number"?this.engine.tokens.values[o]:'"'+o+'"';var h=new Error(o+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(h.stack)}return s},[f,d,x,A,w,H,z,it,tt].forEach(function(s){for(var o in s)pt.prototype[o]=s[o]});var Ct=pt,qt=function(s,o,h){this.line=s,this.column=o,this.offset=h},wt={read_array:function(){var s=null,o=!1,h=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),s=")"):(o=!0,s="]");var g=[];return this.next().token!==s&&(g=this.read_array_pair_list(o)),this.expect(s),this.next(),h(o,g)},read_array_pair_list:function(s){var o=this;return this.read_list(function(){return o.read_array_pair(s)},",",!0)},read_array_pair:function(s){if(!(!s&&this.token===")"||s&&this.token==="]")){if(this.token===",")return this.node("noop")();var o=this.node("entry"),h=null,g=null,y=!1,S=!1;if(this.token==="&")this.next(),y=!0,g=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),S=!0,g=this.read_expr();else{var O=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),h=O,this.token==="&"?(this.next(),y=!0,g=this.read_variable(!0,!1)):g=this.read_expr()):g=O}return o(h,g,y,S)}}};wt.read_array,wt.read_array_pair_list,wt.read_array_pair;var At={read_class_declaration_statement:function(s){var o=this.node("class"),h=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var g=this.node("identifier"),y=this.text();this.next(),g=g(y);var S=this.read_extends_from(),O=this.read_implements_list();this.expect("{");var T=o(g,S,O,this.next().read_class_body(!0,!1),h);return s&&(T.attrGroups=s),T},read_class_modifiers:function(){var s=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,s.final_or_abstract,s.readonly]},read_class_modifier:function(s){return this.token===this.tok.T_READ_ONLY?(this.next(),s.readonly=1,s=this.read_class_modifier(s)):s.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),s.final_or_abstract=1,s=this.read_class_modifier(s)):s.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),s.final_or_abstract=2,s=this.read_class_modifier(s)),s},read_class_body:function(s,o){for(var h=[],g=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE)if(o&&this.token===this.tok.T_CASE){var y=this.read_enum_case();this.expect(";")&&this.next(),h=h.concat(y)}else{this.token===this.tok.T_ATTRIBUTE&&(g=this.read_attr_list());var S=this.position(),O=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(s&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),O[0]=null,O[1]=0),this.token===this.tok.T_FUNCTION)h.push(this.read_function(!1,O,g,S)),g=[];else if(s&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){var T=this.read_variable_list(O,g);g=[],this.expect(";"),this.next(),h=h.concat(T)}else this.error([this.tok.T_CONST].concat(m(s?[this.tok.T_VARIABLE]:[]),m(o?[this.tok.T_CASE]:[]),[this.tok.T_FUNCTION])),this.next();else{var B=this.read_constant_list(O,g);this.expect(";")&&this.next(),h=h.concat(B)}}else h=h.concat(this.read_trait_use_statement());else h.push(this.read_doc_comment());else h.push(this.read_comment());return this.expect("}"),this.next(),h},read_variable_list:function(s,o){var h=this.node("propertystatement"),g=this.read_list(function(){var y=this.node("property"),S=!1;this.token===this.tok.T_READ_ONLY&&(S=!0,this.next());var O=v(this.read_optional_type(),2),T=O[0],B=O[1];this.expect(this.tok.T_VARIABLE);var R=this.node("identifier"),P=this.text().substring(1);return this.next(),R=R(P),this.token===";"||this.token===","?y(R,null,S,T,B,o||[]):this.token==="="?y(R,this.next().read_expr(),S,T,B,o||[]):(this.expect([",",";","="]),y(R,null,T,B,o||[]))},",");return h(null,g,s)},read_constant_list:function(s,o){this.expect(this.tok.T_CONST)&&this.next();var h=this.node("classconstant"),g=this.read_list(function(){var y=this.node("constant"),S=null,O=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){S=this.node("identifier");var T=this.text();this.next(),S=S(T)}else this.expect("IDENTIFIER");return this.expect("=")&&(O=this.next().read_expr()),y(S,O)},",");return h(null,g,s,o||[])},read_member_flags:function(s){var o=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var h=0,g=0;do{switch(this.token){case this.tok.T_PUBLIC:h=0,g=0;break;case this.tok.T_PROTECTED:h=0,g=1;break;case this.tok.T_PRIVATE:h=0,g=2;break;case this.tok.T_STATIC:h=1,g=1;break;case this.tok.T_ABSTRACT:h=2,g=1;break;case this.tok.T_FINAL:h=2,g=2}s&&(h==0&&g==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),g=-1):h==2&&g==1&&(this.error(),g=-1)),o[h]!==-1?this.error():g!==-1&&(o[h]=g)}while(this.next().is("T_MEMBER_FLAGS"))}return o[1]==-1&&(o[1]=0),o[2]==-1&&(o[2]=0),o},read_optional_type:function(){var s=!1;this.token==="?"&&(s=!0,this.next());var o=this.read_types();if(s&&!o&&this.raiseError("Expecting a type definition combined with nullable operator"),!s&&!o)return[!1,null];if(this.token==="|"){o=[o];do{this.next();var h=this.read_type();if(!h){this.raiseError("Expecting a type definition");break}o.push(h)}while(this.token==="|")}return[s,o]},read_interface_declaration_statement:function(s){var o=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var h=this.node("identifier"),g=this.text();this.next(),h=h(g);var y=this.read_interface_extends_list();return this.expect("{"),o(h,y,this.next().read_interface_body(),s||[])},read_interface_body:function(){for(var s=[],o=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var h=this.position();o=this.read_attr_list();var g=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var y=this.read_constant_list(g,o);this.expect(";")&&this.next(),s=s.concat(y),o=[]}else if(this.token===this.tok.T_FUNCTION){var S=this.read_function_declaration(2,g,o,h);S.parseFlags(g),s.push(S),this.expect(";")&&this.next(),o=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else s.push(this.read_doc_comment());else s.push(this.read_comment());return this.expect("}")&&this.next(),s},read_trait_declaration_statement:function(){var s=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var o=this.node("identifier"),h=this.text();return this.next(),o=o(h),this.expect("{"),s(o,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){var s=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var o=[this.read_namespace_name()],h=null;this.token===",";)o.push(this.next().read_namespace_name());if(this.token==="{"){for(h=[];this.next().token!==this.EOF&&this.token!=="}";)h.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return s(o,h)},read_trait_use_alias:function(){var s,o=this.node(),h=null;if(this.is("IDENTIFIER")){s=this.node("identifier");var g=this.text();this.next(),s=s(g)}else if(s=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){h=s,s=this.node("identifier");var y=this.text();this.next(),s=s(y)}else this.expect(this.tok.T_STRING);else s=s.name;if(this.token===this.tok.T_INSTEADOF)return o("traitprecedence",h,s,this.next().read_name_list());if(this.token===this.tok.T_AS){var S=null,O=null;if(this.next().is("T_MEMBER_FLAGS")&&(S=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){O=this.node("identifier");var T=this.text();this.next(),O=O(T)}else S===!1&&this.expect(this.tok.T_STRING);return o("traitalias",h,s,O,S)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),o("traitalias",h,s,null,null)}};At.read_class_declaration_statement,At.read_class_modifiers,At.read_class_modifier,At.read_class_body,At.read_variable_list,At.read_constant_list,At.read_member_flags,At.read_optional_type,At.read_interface_declaration_statement,At.read_interface_body,At.read_trait_declaration_statement,At.read_trait_use_statement,At.read_trait_use_alias;var vt={read_comment:function(){var s=this.text(),o=this.ast.prepare(s.substring(0,2)==="/*"?"commentblock":"commentline",null,this),h=this.lexer.yylloc.first_offset,g=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(o=o(s)).offset=h,this.prev=g,o},read_doc_comment:function(){var s=this.ast.prepare("commentblock",null,this),o=this.lexer.yylloc.first_offset,h=this.text(),g=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(s=s(h)).offset=o,this.prev=g,s}};vt.read_comment,vt.read_doc_comment;var Ut={read_expr:function(s){var o=this.node();if(this.token==="@")return s||(s=this.next().read_expr()),o("silent",s);if(s||(s=this.read_expr_item()),this.token==="|")return o("bin","|",s,this.next().read_expr());if(this.token==="&")return o("bin","&",s,this.next().read_expr());if(this.token==="^")return o("bin","^",s,this.next().read_expr());if(this.token===".")return o("bin",".",s,this.next().read_expr());if(this.token==="+")return o("bin","+",s,this.next().read_expr());if(this.token==="-")return o("bin","-",s,this.next().read_expr());if(this.token==="*")return o("bin","*",s,this.next().read_expr());if(this.token==="/")return o("bin","/",s,this.next().read_expr());if(this.token==="%")return o("bin","%",s,this.next().read_expr());if(this.token===this.tok.T_POW)return o("bin","**",s,this.next().read_expr());if(this.token===this.tok.T_SL)return o("bin","<<",s,this.next().read_expr());if(this.token===this.tok.T_SR)return o("bin",">>",s,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return o("bin","||",s,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return o("bin","or",s,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return o("bin","&&",s,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return o("bin","and",s,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return o("bin","xor",s,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return o("bin","===",s,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return o("bin","!==",s,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return o("bin","==",s,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return o("bin","!=",s,this.next().read_expr());if(this.token==="<")return o("bin","<",s,this.next().read_expr());if(this.token===">")return o("bin",">",s,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return o("bin","<=",s,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return o("bin",">=",s,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return o("bin","<=>",s,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(s=o("bin","instanceof",s,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(s=this.read_expr(s))),this.token===this.tok.T_COALESCE)return o("bin","??",s,this.next().read_expr());if(this.token==="?"){var h=null;return this.next().token!==":"&&(h=this.read_expr()),this.expect(":")&&this.next(),o("retif",s,h,this.read_expr())}return o.destroy(s),s},read_expr_cast:function(s){return this.node("cast")(s,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var s=null;switch(this.token){case this.tok.T_ISSET:s=this.node("isset"),this.next().expect("(")&&this.next();var o=this.read_isset_variables();this.expect(")")&&this.next(),s=s(o);break;case this.tok.T_EMPTY:s=this.node("empty"),this.next().expect("(")&&this.next();var h=this.read_expr();this.expect(")")&&this.next(),s=s(h);break;case this.tok.T_INCLUDE:s=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:s=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:s=this.node("eval"),this.next().expect("(")&&this.next();var g=this.read_expr();this.expect(")")&&this.next(),s=s(g);break;case this.tok.T_REQUIRE:s=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:s=this.node("include")(!0,!0,this.next().read_expr())}return s},read_optional_expr:function(s){return this.token!==s?this.read_expr():null},read_exit_expr:function(){var s=null;return this.token==="("&&(this.next(),s=this.read_optional_expr(")"),this.expect(")")&&this.next()),s},read_expr_item:function(){var s,o,h=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(o=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(o);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var g=null,y=this.innerList;s=this.node("list"),y||(g=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var S=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var O=!1,T=0;T<S.length;T++)if(S[T]!==null&&S[T].kind!=="noop"){O=!0;break}return O||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),y?s(S,!1):(this.innerList=!1,this.expect("=")?g(s(S,!1),this.next().read_expr(),"="):s(S,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(h=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var B=this.lexer.yytext.toLowerCase()==="die";return s=this.node("exit"),this.next(),s(this.read_exit_expr(),B);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var R=null,P=null;return s=this.node("yield"),this.next().is("EXPR")&&(R=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(P=R,R=this.next().read_expr())),s(R,P);case this.tok.T_YIELD_FROM:return(s=this.node("yieldfrom"))(o=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,h);case this.tok.T_STATIC:var Ht=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],h);this.lexer.tokens.push(Ht),this.next()}if(this.is("VARIABLE")){s=this.node();var Vt=(o=this.read_variable(!1,!1)).kind==="identifier"||o.kind==="staticlookup"&&o.offset.kind==="identifier";switch(this.token){case"=":return Vt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(s,o):s("assign",o,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return Vt&&this.error("VARIABLE"),s("assign",o,this.next().read_expr(),"??=");case this.tok.T_INC:return Vt&&this.error("VARIABLE"),this.next(),s("post","+",o);case this.tok.T_DEC:return Vt&&this.error("VARIABLE"),this.next(),s("post","-",o);default:s.destroy(o)}}else{if(this.is("SCALAR")){if(s=this.node(),(o=this.read_scalar()).kind==="array"&&o.shortForm&&this.token==="="){var le=this.convertToList(o);return o.loc&&(le.loc=o.loc),s("assign",le,this.next().read_expr(),"=")}return s.destroy(o),this.handleDereferencable(o)}this.error("EXPR"),this.next()}return o},convertToList:function(s){var o=this,h=s.items.map(function(y){return y.value&&y.value.kind==="array"&&y.value.shortForm&&(y.value=o.convertToList(y.value)),y}),g=this.node("list")(h,!0);return s.loc&&(g.loc=s.loc),s.leadingComments&&(g.leadingComments=s.leadingComments),s.trailingComments&&(g.trailingComments=s.trailingComments),g},read_assignref:function(s,o){var h;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),h=this.read_new_expr()):h=this.read_variable(!1,!1),s("assignref",o,h)},read_inline_function:function(s,o){if(this.token===this.tok.T_FUNCTION){var h=this.read_function(!0,s,o);return h.attrGroups=o,h}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var g=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var y=this.is_reference();this.expect("(")&&this.next();var S=this.read_parameter_list();this.expect(")")&&this.next();var O=!1,T=null;this.token===":"&&(this.next().token==="?"&&(O=!0,this.next()),T=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var B=g(S,y,this.read_expr(),T,O,!!s);return B.attrGroups=o,B},read_match_expression:function(){var s=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var o,h;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),h=this.read_match_arms(),this.expect("}")&&this.next(),s(o,h)},read_match_arms:function(){var s=this;return this.read_list(function(){return s.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var s=[];if(this.token===this.tok.T_DEFAULT)s=null,this.next();else for(s.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),s;s.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),s},read_attribute:function(){var s=this.text(),o=[];return this.next(),this.token==="("&&(o=this.read_argument_list()),this.node("attribute")(s,o)},read_attr_list:function(){var s=[];if(this.token===this.tok.T_ATTRIBUTE)do{var o=this.node("attrgroup")([]);for(this.next(),o.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&o.attrs.push(this.read_attribute());s.push(o),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return s},read_new_expr:function(){var s=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var o=[];if(this.token==="("){this.next();var h=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(o=this.read_argument_list()),s(h,o)}var g=this.read_attr_list();if(this.token===this.tok.T_CLASS){var y=this.node("class");this.next().token==="("&&(o=this.read_argument_list());var S=this.read_extends_from(),O=this.read_implements_list(),T=null;this.expect("{")&&(T=this.next().read_class_body(!0,!1));var B=y(null,S,O,T,[0,0,0]);return B.attrGroups=g,s(B,o)}for(var R=this.read_new_class_name();this.token==="[";){var P=this.node("offsetlookup"),Ht=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),R=P(R,Ht)}return this.token==="("&&(o=this.read_argument_list()),s(R,o)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var s=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(s=this.read_static_getter(s)),s}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(s){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)s=this.recursive_variable_chain_scan(s,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")s=this.read_dereferencable(s);else{if(this.token!=="(")return s;s=this.node("call")(s,this.read_argument_list())}return s}};Ut.read_expr,Ut.read_expr_cast,Ut.read_isset_variable,Ut.read_isset_variables,Ut.read_internal_functions_in_yacc,Ut.read_optional_expr,Ut.read_exit_expr,Ut.read_expr_item,Ut.convertToList,Ut.read_assignref,Ut.read_inline_function,Ut.read_match_expression,Ut.read_match_arms,Ut.read_match_arm,Ut.read_match_arm_conds,Ut.read_attribute,Ut.read_attr_list,Ut.read_new_expr,Ut.read_new_class_name,Ut.handleDereferencable;var dt={read_enum_declaration_statement:function(s){var o=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);var h=this.node("identifier"),g=this.text();this.next(),h=h(g);var y=this.read_enum_value_type(),S=this.read_implements_list();this.expect("{");var O=o(h,y,S,this.next().read_class_body(!1,!0));return s&&(O.attrGroups=s),O},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);var s=this.node("enumcase"),o=this.node("identifier"),h=this.next().text();this.next(),o=o(h);var g=this.token==="="?this.next().read_expr():null;return this.expect(";"),s(o,g)}};dt.read_enum_declaration_statement,dt.read_enum_value_type,dt.read_enum_case;var ft={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(s,o,h,g){var y=this.read_function_declaration(s?1:o?2:0,o&&o[1]===1,h||[],g);return o&&o[2]==1?(y.parseFlags(o),this.expect(";")&&this.next()):(this.expect("{")&&(y.body=this.read_code_block(!1),y.loc&&y.body.loc&&(y.loc.end=y.body.loc.end)),!s&&o&&y.parseFlags(o)),y},read_function_declaration:function(s,o,h,g){var y=this,S="function";s===1?S="closure":s===2&&(S="method");var O=this.node(S);this.expect(this.tok.T_FUNCTION)&&this.next();var T=this.is_reference(),B=!1,R=[],P=null,Ht=!1;if(s!==1){var Vt=this.node("identifier");s===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(B=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(B=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(B=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(B=this.text()),this.next()),B=Vt(B)}this.expect("(")&&this.next();var le=this.read_parameter_list(B.name==="__construct");this.expect(")")&&this.next(),s===1&&(R=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(Ht=!0,this.next()),P=this.read_types());var _e=function(Wt){return Wt.attrGroups=h||[],g&&Wt.loc&&(Wt.loc.start=g,Wt.loc.source&&(Wt.loc.source=y.lexer._input.substr(Wt.loc.start.offset,Wt.loc.end.offset-Wt.loc.start.offset))),Wt};return _e(s===1?O(le,T,R,P,Ht,o):O(B,le,T,P,Ht))},read_lexical_vars:function(){var s=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),s=this.read_lexical_var_list(),this.expect(")")&&this.next()),s},read_list_with_dangling_comma:function(s){for(var o=[];this.token!=this.EOF;){if(o.push(s()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return o}return o},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var s=this.node("variable");this.expect(this.tok.T_VARIABLE);var o=this.text().substring(1);return this.next(),s(o,!1)},read_parameter_list:function(s){if(this.token!==")"){var o=!1;return this.read_list_with_dangling_comma(function(){var h=this.read_parameter(s);return h&&(o&&this.raiseError("Unexpected parameter after a variadic parameter"),h.variadic&&(o=!0)),h}.bind(this),",")}return[]},read_parameter:function(s){var o,h=this.node("parameter"),g=null,y=null,S=!1,O=!1,T=[];this.token===this.tok.T_ATTRIBUTE&&(T=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(s?(this.next(),O=!0):this.raiseError("readonly properties can be used only on class constructor"));var B=this.read_promoted();!O&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(s?(this.next(),O=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),S=!0),o=this.read_types(),S&&!o&&this.raiseError("Expecting a type definition combined with nullable operator");var R=this.is_reference(),P=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){g=this.node("identifier");var Ht=this.text().substring(1);this.next(),g=g(Ht)}this.token=="="&&(y=this.next().read_expr());var Vt=h(g,o,y,R,P,O,S,B);return T&&(Vt.attrGroups=T),Vt},read_types:function(){var s="unset",o="union",h="intersection",g=[],y=s,S=this.read_type();if(!S)return null;for(g.push(S);this.token==="|"||this.version>=801&&this.token==="&";){var O=this.peek();if(O===this.tok.T_ELLIPSIS||O===this.tok.T_VARIABLE)break;y===s?y=this.token==="|"?o:h:(y===o&&this.token!=="|"||y===h&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),g.push(this.read_type())}return g.length===1?g[0]:y===h?this.node("intersectiontype")(g):this.node("uniontype")(g)},read_promoted:function(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var s=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(s.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(s=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),s},read_non_empty_argument_list:function(){var s=!1;return this.read_function_list(function(){var o=this.read_argument();if(o){var h=o.kind==="variadic";s&&!h&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),h&&(s=!0)}return o}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){var s=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var o=this.text();return this.next(),s("typereference",o.toLowerCase(),o)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var h=this.text(),g=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(h.toLowerCase())>-1?s("typereference",h.toLowerCase(),h):(this.lexer.tokens.push(g),this.next(),s.destroy(),this.read_namespace_name())}return s.destroy(),null}};ft.is_reference,ft.is_variadic,ft.read_function,ft.read_function_declaration,ft.read_lexical_vars,ft.read_list_with_dangling_comma,ft.read_lexical_var_list,ft.read_lexical_var,ft.read_parameter_list,ft.read_parameter,ft.read_types,ft.read_promoted,ft.read_argument_list,ft.read_non_empty_argument_list,ft.read_argument,ft.read_type;var ce={read_if:function(){var s=this.node("if"),o=this.next().read_if_expr(),h=null,g=null,y=!1;if(this.token===":"){y=!0,this.next(),h=this.node("block");for(var S=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){g=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){g=this.read_else_short();break}S.push(this.read_inner_statement())}h=h(null,S),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else h=this.read_statement(),this.token===this.tok.T_ELSEIF?g=this.read_if():this.token===this.tok.T_ELSE&&(g=this.next().read_statement());return s(o,h,g,y)},read_if_expr:function(){this.expect("(")&&this.next();var s=this.read_expr();return this.expect(")")&&this.next(),s},read_elseif_short:function(){var s=null,o=this.node("if"),h=this.next().read_if_expr();this.expect(":")&&this.next();for(var g=this.node("block"),y=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}y.push(this.read_inner_statement())}return o(h,g(null,y),s,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var s=this.node("block"),o=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)o.push(this.read_inner_statement());return s(null,o)}};ce.read_if,ce.read_if_expr,ce.read_elseif_short,ce.read_else_short;var It={read_while:function(){var s=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var o,h=null,g=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(g=!0,h=this.read_short_form(this.tok.T_ENDWHILE)):h=this.read_statement(),s(o,h,g)},read_do:function(){var s=this.node("do");this.expect(this.tok.T_DO)&&this.next();var o,h=null;return o=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),h=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),s(h,o)},read_for:function(){var s=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var o=[],h=[],g=[],y=null,S=!1;return this.expect("(")&&this.next(),this.token!==";"?(o=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(h=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(g=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(S=!0,y=this.read_short_form(this.tok.T_ENDFOR)):y=this.read_statement(),s(o,h,g,y,S)},read_foreach:function(){var s=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var o,h=null,g=null,y=null,S=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),g=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(h=g,g=this.next().read_foreach_variable())),h&&h.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(S=!0,y=this.read_short_form(this.tok.T_ENDFOREACH)):y=this.read_statement(),s(o,h,g,y,S)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var s=this.token==="[",o=this.node("list");this.next(),!s&&this.expect("(")&&this.next();var h=this.read_array_pair_list(s);return this.expect(s?"]":")")&&this.next(),o(h,s)}return this.read_variable(!1,!1)}};It.read_while,It.read_do,It.read_for,It.read_foreach,It.read_foreach_variable;var ne={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};ne.read_start;var pe={read_namespace:function(){var s,o,h=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),o=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=o,this.token===";"?(this.currentNamespace=o,s=this.next().read_top_statements(),this.expect(this.EOF),h(o.name,s,!1)):this.token==="{"?(this.currentNamespace=o,s=this.next().read_top_statements(),this.expect("}")&&this.next(),s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),h(o.name,s,!0)):(this.error(["{",";"]),this.currentNamespace=o,s=this.read_top_statements(),this.expect(this.EOF),h(o,s,!1))},read_namespace_name:function(s){var o,h=this.node(),g=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:o=this.ast.name.RELATIVE_NAME,g=g.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:o=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:o=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(o=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return h("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),s||this.token!=="("){if(g.toLowerCase()==="parent")return h("parentreference",g);if(g.toLowerCase()==="self")return h("selfreference",g)}return h("name",g,o)},read_use_statement:function(){var s=this.node("usegroup"),o=[],h=null;this.expect(this.tok.T_USE)&&this.next();var g=this.read_use_type();return o.push(this.read_use_declaration(!1)),this.token===","?o=o.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(h=o[0].name,o=this.next().read_use_declarations(g===null),this.expect("}")&&this.next()),s=s(h,g,o),this.expect(";")&&this.next(),s},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(s){var o=this.node("useitem"),h=null;s&&(h=this.read_use_type());var g=this.read_namespace_name(),y=this.read_use_alias();return o(g.name,y,h)},read_use_declarations:function(s){for(var o=[this.read_use_declaration(s)];this.token===",";){if(this.next(),s){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;o.push(this.read_use_declaration(s))}return o},read_use_alias:function(){var s=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var o=this.node("identifier"),h=this.text();this.next(),s=o(h)}return s},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};pe.read_namespace,pe.read_namespace_name,pe.read_use_statement,pe.read_class_name_reference,pe.read_use_declaration,pe.read_use_declarations,pe.read_use_alias,pe.read_use_type;var M={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},U={resolve_special_chars:function(s,o){return o?s.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(h,g,y){return M[g]?M[g]:g[0]==="x"||g[0]==="X"?String.fromCodePoint(parseInt(g.substr(1),16)):g[0]==="u"?String.fromCodePoint(parseInt(y,16)):String.fromCodePoint(parseInt(g,8))}):s.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(s,o,h,g){if(o===0)return s;this.check_heredoc_indentation_level(s,o,h,g);var y=h?" ":"	",S=new RegExp("\\n".concat(y,"{").concat(o,"}"),"g"),O=new RegExp("^".concat(y,"{").concat(o,"}"));return g&&(s=s.replace(O,"")),s.replace(S,`
`)},check_heredoc_indentation_level:function(s,o,h,g){var y=s.length,S=0,O=0,T=!0,B=h?" ":"	",R=!1;if(!g){if((S=s.indexOf(`
`))===-1)return;S++}for(;S<y;)T?s[S]===B?O++:R=!0:T=!1,s[S]!==`
`&&R&&O<o?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(o,")")):R=!1,s[S]===`
`&&(T=!0,O=0),S++},read_dereferencable_scalar:function(){var s=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var o=this.node("string"),h=this.text(),g=0;h[0]!=="b"&&h[0]!=="B"||(g=1);var y=h[g]==='"';this.next(),o=o(y,this.resolve_special_chars(h.substring(g+1,h.length-1),y),g===1,h),s=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(o):o;break;case this.tok.T_ARRAY:case"[":s=this.read_array()}return s},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var s,o;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var h=this.node("number");return s=this.text(),this.next(),h(s,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var g=this.lexer.yylloc.first_offset;o=this.node("nowdoc"),s=this.next().text(),this.lexer.heredoc_label.indentation>0&&(s=s.substring(0,s.length-this.lexer.heredoc_label.indentation));var y=s[s.length-1];y===`
`?s=s[s.length-2]==="\r"?s.substring(0,s.length-2):s.substring(0,s.length-1):y==="\r"&&(s=s.substring(0,s.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var S=this.lexer._input.substring(g,this.lexer.yylloc.first_offset);return o=o(this.remove_heredoc_leading_whitespace_chars(s,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),S,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,o}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var O=this.error("SCALAR");return this.next(),O}},read_dereferencable:function(s){var o,h,g=this.node("offsetlookup");return this.token==="["?(h=this.next().read_expr(),this.expect("]")&&this.next(),o=g(s,h)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(o=g(s,h=this.read_encapsed_string_item(!1))),o},read_encapsed_string_item:function(s){var o,h,g,y=this.node("encapsedpart"),S=null,O=!1,T=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var B=this.text();this.next(),T=T("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(B,s),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):B,!1,B)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(S="simple",O=!0,g=null,this.next().token===this.tok.T_STRING_VARNAME){g=this.node("variable");var R=this.text();this.next(),T.destroy(),this.token==="["?(g=g(R,!1),h=this.node("offsetlookup"),o=this.next().read_expr(),this.expect("]")&&this.next(),T=h(g,o)):T=g(R,!1)}else T=T("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)S="complex",T.destroy(),T=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(S="simple",T.destroy(),T=this.read_simple_variable(),this.token==="["&&(h=this.node("offsetlookup"),o=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),T=h(T,o)),this.token===this.tok.T_OBJECT_OPERATOR){h=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var P=this.node("identifier");g=this.text(),this.next(),T=h(T,P(g))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var Ht=this.text();this.next(),T.destroy(),T=T("string",!1,Ht,!1,Ht)}return this.lexer.heredoc_label.first_encaps_node=!1,y(T,S,O)},read_encapsed_string:function(s){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],h=this.lexer.yylloc.first_offset,g=this.node("encapsed");this.next();var y=this.lexer.yylloc.prev_offset-(o?1:0),S=[],O=null;for(O=s==="`"?this.ast.encapsed.TYPE_SHELL:s==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==s&&this.token!==this.EOF;)S.push(this.read_encapsed_string_item(!0));if(S.length>0&&S[S.length-1].kind==="encapsedpart"&&S[S.length-1].expression.kind==="string"){var T=S[S.length-1].expression,B=T.value[T.value.length-1];B===`
`?T.value[T.value.length-2]==="\r"?T.value=T.value.substring(0,T.value.length-2):T.value=T.value.substring(0,T.value.length-1):B==="\r"&&(T.value=T.value.substring(0,T.value.length-1))}this.expect(s)&&this.next();var R=this.lexer._input.substring(O==="heredoc"?h:y-1,this.lexer.yylloc.first_offset);return g=g(S,R,O),s===this.tok.T_END_HEREDOC&&(g.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),g},get_magic_constant:function(){var s=this.node("magic"),o=this.text();return this.next(),s(o.toUpperCase(),o)}};U.resolve_special_chars,U.remove_heredoc_leading_whitespace_chars,U.check_heredoc_indentation_level,U.read_dereferencable_scalar,U.read_scalar,U.read_dereferencable,U.read_encapsed_string_item,U.read_encapsed_string,U.get_magic_constant;var st={read_top_statements:function(){for(var s=[];this.token!==this.EOF&&this.token!=="}";){var o=this.read_top_statement();o&&(Array.isArray(o)?s=s.concat(o):s.push(o))}return s},read_top_statement:function(){var s=[];switch(this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,s);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(s);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(s);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(s);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var o=this.node("constantstatement"),h=this.next().read_const_list();return this.expectEndOfStatement(),o(null,h);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var g=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,g(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var s=[];this.token!=this.EOF&&this.token!=="}";){var o=this.read_inner_statement();o&&(Array.isArray(o)?s=s.concat(o):s.push(o))}return s},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var s=this.node("constant"),o=this.node("identifier"),h=this.text();return this.next(),o=o(h),this.expect("=")?s(o,this.next().read_expr()):s(o,null)},",",!1)},read_declare_list:function(){for(var s=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var o=this.node("declaredirective"),h=this.node("identifier"),g=this.text();this.next(),h=h(g);var y=null;if(this.expect("=")&&(y=this.next().read_expr()),s.push(o(h,y)),this.token!==",")break;this.next()}return s},read_inner_statement:function(){var s=[];switch(this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var o=this.read_function(!1,!1);return o.attrGroups=s,o;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var h=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),h=h(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),h;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var s=this.node("return");this.next();var o=this.read_optional_expr(";");return this.expectEndOfStatement(),s(o);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var h=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var g=this.read_optional_expr(";");return this.expectEndOfStatement(),h(g);case this.tok.T_GLOBAL:var y=this.node("global"),S=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),y(S);case this.tok.T_STATIC:var O=[this.token,this.lexer.getState()],T=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(O);var B=this.next().read_expr();return this.expectEndOfStatement(B),T("expressionstatement",B)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var R=this.read_variable_declarations();return this.expectEndOfStatement(),T("static",R);case this.tok.T_ECHO:var P=this.node("echo"),Ht=this.text(),Vt=Ht==="<?="||Ht==="<%=",le=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),P(le,Vt);case this.tok.T_INLINE_HTML:var _e=this.text(),Wt=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,Te=Wt==="\r"||Wt===`
`;Te&&Wt===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(Wt=`\r
`);var te=this.node("inline");return this.next(),te(_e,Te?Wt+_e:_e);case this.tok.T_UNSET:var De=this.node("unset");this.next().expect("(")&&this.next();var Ne=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),De(Ne);case this.tok.T_DECLARE:var ve,ee=this.node("declare"),Ce=[];this.next().expect("(")&&this.next();var Ve=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),ve=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect("}")&&this.next(),ve=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),ve=this.ast.declare.MODE_NONE;return ee(Ve,Ce,ve);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var ln=this.node("throw"),gi=this.next().read_expr();return this.expectEndOfStatement(),ln(gi);case";":return this.next(),null;case this.tok.T_STRING:var ut=this.node(),ht=[this.token,this.lexer.getState()],zt=this.text(),jt=this.node("identifier");if(this.next().token===":")return jt=jt(zt),this.next(),ut("label",jt);jt.destroy(),ut.destroy(),this.lexer.tokens.push(ht);var Rt=this.node("expressionstatement"),be=this.next().read_expr();return this.expectEndOfStatement(be),Rt(be);case this.tok.T_GOTO:var Fe=this.node("goto"),$e=null;if(this.next().expect(this.tok.T_STRING)){$e=this.node("identifier");var _i=this.text();this.next(),$e=$e(_i),this.expectEndOfStatement()}return Fe($e);default:var ae=this.node("expressionstatement"),Ye=this.read_expr();return this.expectEndOfStatement(Ye),ae(Ye)}},read_code_block:function(s){var o=this.node("block");this.expect("{")&&this.next();var h=s?this.read_top_statements():this.read_inner_statements();return h.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&h.push(this.node("noop")()),this.expect("}")&&this.next(),o(null,h)}};st.read_top_statements,st.read_top_statement,st.read_inner_statements,st.read_const_list,st.read_declare_list,st.read_inner_statement,st.read_statement,st.read_code_block;var Et={read_switch:function(){var s=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var o=this.read_expr();this.expect(")")&&this.next();var h=this.token===":";return s(o,this.read_switch_case_list(),h)},read_switch_case_list:function(){var s=null,o=this.node("block"),h=[];for(this.token==="{"?s="}":this.token===":"?s=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==s;)h.push(this.read_case_list(s));return h.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&h.push(this.node("noop")()),this.expect(s)&&this.next(),s===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),o(null,h)},read_case_list:function(s){var o=this.node("case"),h=null;this.token===this.tok.T_CASE?h=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var g=this.node("block"),y=[];this.token!==this.EOF&&this.token!==s&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)y.push(this.read_inner_statement());return o(h,g(null,y))}};Et.read_switch,Et.read_switch_case_list,Et.read_case_list;var Gt={read_try:function(){this.expect(this.tok.T_TRY);for(var s=this.node("try"),o=null,h=[],g=this.next().read_statement();this.token===this.tok.T_CATCH;){var y=this.node("catch");this.next().expect("(")&&this.next();var S=this.read_list(this.read_namespace_name,"|",!1),O=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(O=this.read_variable(!0,!1)),this.expect(")"),h.push(y(this.next().read_statement(),S,O))}return this.token===this.tok.T_FINALLY&&(o=this.next().read_statement()),s(g,h,o)}};Gt.read_try;var rt={read_short_form:function(s){var o=this.node("block"),h=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==s;)h.push(this.read_inner_statement());return h.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&h.push(this.node("noop")()),this.expect(s)&&this.next(),this.expectEndOfStatement(),o(null,h)},read_function_list:function(s,o){var h=[];do{if(this.token==o&&this.version>=703&&h.length>0){h.push(this.node("noop")());break}if(h.push(s.apply(this,[])),this.token!=o||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return h},read_list:function(s,o,h){var g=[];if(this.token==o&&(h&&g.push(typeof s=="function"?this.node("noop")():null),this.next()),typeof s=="function")do{var y=s.apply(this,[]);if(y&&g.push(y),this.token!=o)break}while(this.next().token!=this.EOF);else{if(!this.expect(s))return[];for(g.push(this.text());this.next().token!=this.EOF&&this.token==o&&this.next().token==s;)g.push(this.text())}return g},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(s){var o=this.node("byref");this.next(),o=o(null);var h=s();return h&&(this.ast.swapLocations(h,o,h,this),h.byref=!0),h},read_variable_declarations:function(){return this.read_list(function(){var s=this.node("staticvariable"),o=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var h=this.text().substring(1);this.next(),o=o(h,!1)}else o=o("#ERR",!1);return this.token==="="?s(o,this.next().read_expr()):o},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};rt.read_short_form,rt.read_function_list,rt.read_list,rt.read_name_list,rt.read_byref,rt.read_variable_declarations,rt.read_extends_from,rt.read_interface_extends_list,rt.read_implements_list;var G={read_variable:function(s,o){var h;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,s,o));if(this.is([this.tok.T_VARIABLE,"$"]))h=this.read_reference_variable(o);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){h=this.node();var g=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(g.kind)===-1){var y=g.name.toLowerCase();y==="true"?h=g.destroy(h("boolean",!0,g.name)):y==="false"?h=g.destroy(h("boolean",!1,g.name)):y==="null"?h=g.destroy(h("nullkeyword",g.name)):(h.destroy(g),h=g)}else h.destroy(g),h=g}else if(this.token===this.tok.T_STATIC){h=this.node("staticreference");var S=this.text();this.next(),h=h(S)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(h=this.read_static_getter(h,o)),this.recursive_variable_chain_scan(h,s,o)},read_static_getter:function(s,o){var h,g,y=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?h=this.read_reference_variable(o):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(h=this.node("identifier"),g=this.text(),this.next(),h=h(g)):this.token==="{"?(h=this.node("literal"),g=this.next().read_expr(),this.expect("}")&&this.next(),h=h("literal",g,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),h=this.node("identifier"),g=this.text(),this.next(),h=h(g)),y(s,h)},read_what:function(){var s=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=null,h=null;switch(this.next().token){case this.tok.T_STRING:o=this.node("identifier"),h=this.text(),this.next(),o=o(h),s&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:o=this.node("variable"),h=this.text().substring(1),this.next(),o=o(h,!1);break;case"$":o=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(h=this.next().read_expr(),this.expect("}")&&this.next(),o=o("variable",h,!0)):o=o("variable",h=this.read_expr(),!1);break;case"{":o=this.node("encapsedpart"),h=this.next().read_expr(),this.expect("}")&&this.next(),o=o(h,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),o=this.node("identifier"),h=this.text(),this.next(),o=o(h)}return o},recursive_variable_chain_scan:function(s,o,h){var g,y;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(o)return s;s=this.node("call")(s,this.read_argument_list());break;case"[":case"{":var S=this.token==="[";g=this.node("offsetlookup"),this.next(),y=!1,h?(y=this.read_encaps_var_offset(),this.expect(S?"]":"}")&&this.next()):(S?this.token!=="]":this.token!=="}")?(y=this.read_expr(),this.expect(S?"]":"}")&&this.next()):this.next(),s=g(s,y);break;case this.tok.T_DOUBLE_COLON:s.kind==="staticlookup"&&s.offset.kind==="identifier"&&this.error(),s=(g=this.node("staticlookup"))(s,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:s=(g=this.node("propertylookup"))(s,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:s=(g=this.node("nullsafepropertylookup"))(s,this.read_what());break;default:break t}return s},read_encaps_var_offset:function(){var s=this.node();if(this.token===this.tok.T_STRING){var o=this.text();this.next(),s=s("identifier",o)}else if(this.token===this.tok.T_NUM_STRING){var h=this.text();this.next(),s=s("number",h,null)}else if(this.token==="-"){this.next();var g=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),s=s("number",g,null)}else if(this.token===this.tok.T_VARIABLE){var y=this.text().substring(1);this.next(),s=s("variable",y,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var S=this.text();this.next(),s=s("identifier",S)}return s},read_reference_variable:function(s){for(var o,h=this.read_simple_variable();this.token!=this.EOF;){var g=this.node();if(this.token!="{"||s){g.destroy();break}o=this.next().read_expr(),this.expect("}")&&this.next(),h=g("offsetlookup",h,o)}return h},read_simple_variable:function(){var s,o=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)s=this.text().substring(1),this.next(),o=o(s,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var h=this.next().read_expr();this.expect("}")&&this.next(),o=o(h,!0);break;case"$":o=o(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:s=this.text().substring(1);var g=this.node("variable");this.next(),o=o(g(s,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),s=this.text(),this.next(),o=o(s,!1)}return o}};function K(s){return s!="."&&s!=","&&!isNaN(parseFloat(s))&&isFinite(s)}G.read_variable,G.read_static_getter,G.read_what,G.recursive_variable_chain_scan,G.read_encaps_var_offset,G.read_reference_variable,G.read_simple_variable;var J=function(s,o){this.lexer=s,this.ast=o,this.tok=s.tok,this.EOF=s.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var h=function(g){return[g,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(h)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(h)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(h)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(h)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(h)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(h)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(h))}};J.prototype.getTokenName=function(s){return K(s)?s==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[s]:"'"+s+"'"},J.prototype.parse=function(s,o){this._errors=[],this.filename=o||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(s),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var h=this.node("program"),g=[];for(this.next();this.token!=this.EOF;)g.push(this.read_start());g.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&g.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var y=h(g,this._errors,this._docs,this._tokens);if(this.debug){var S=this.ast.checkNodes();if(S.length>0)throw S.forEach(function(O){O.position&&console.log("Node at line "+O.position.line+", column "+O.position.column),console.log(O.stack.join(`
`))}),new Error("Some nodes are not closed")}return y},J.prototype.raiseError=function(s,o,h,g){if(s+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var y=new SyntaxError(s,this.filename,this.lexer.yylloc.first_line);throw y.lineNumber=this.lexer.yylloc.first_line,y.fileName=this.filename,y.columnNumber=this.lexer.yylloc.first_column,y}var S=this.ast.prepare("error",null,this)(s,g,this.lexer.yylloc.first_line,h);return this._errors.push(S),S},J.prototype.error=function(s){var o="Parse Error : syntax error",h=this.getTokenName(this.token),g="";if(this.token!==this.EOF){if(K(this.token)){var y=this.text();y.length>10&&(y=y.substring(0,7)+"..."),h="'"+y+"' ("+h+")"}o+=", unexpected "+h}return s&&!Array.isArray(s)&&((K(s)||s.length===1)&&(g=", expecting "+this.getTokenName(s)),o+=g),this.raiseError(o,g,s,h)},J.prototype.position=function(){return new qt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},J.prototype.node=function(s){if(this.extractDoc){var o=null;this._docIndex<this._docs.length&&(o=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+s)),console.log(o)));var h=this.ast.prepare(s,o,this);return h.postBuild=function(g){if(this._docIndex<this._docs.length)if(this._lastNode){for(var y=this.prev[2],S=this._docIndex;S<this._docs.length&&!(this._docs[S].offset>y);S++);S>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,S)),this._docIndex=S)}else this.token===this.EOF&&(g.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=g}.bind(this),h}return this.ast.prepare(s,null,this)},J.prototype.expectEndOfStatement=function(s){if(this.token===";")s&&this.lexer.yytext===";"&&s.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var nt=["parser.next","parser.node","parser.showlog"];J.prototype.showlog=function(){for(var s,o=new Error().stack.split(`
`),h=2;h<o.length;h++){s=o[h].trim();for(var g=!1,y=0;y<nt.length;y++)if(s.substring(3,3+nt[y].length)===nt[y]){g=!0;break}if(!g)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+s),this},J.prototype.expect=function(s){if(Array.isArray(s)){if(s.indexOf(this.token)===-1)return this.error(s),!1}else if(this.token!=s)return this.error(s),!1;return!0},J.prototype.text=function(){return this.lexer.yytext},J.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},J.prototype.peek=function(){var s=this.lexer.getState(),o=this.lexer.lex();return this.lexer.setState(s),o},J.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var s=this.lexer.yytext;if(s=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],s,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,s,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(s),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},J.prototype.is=function(s){return Array.isArray(s)?s.indexOf(this.token)!==-1:this.entries[s].has(this.token)},[wt,At,vt,Ut,dt,ft,ce,It,ne,pe,U,st,Et,Gt,rt,G].forEach(function(s){for(var o in s){if(Object.prototype.hasOwnProperty.call(J.prototype,o))throw new Error("Function "+o+" is already defined - collision");J.prototype[o]=s[o]}});var lt=J,at={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},Q={values:Object.entries(at).reduce(function(s,o){var h=v(o,2),g=h[0],y=h[1];return a(a({},s),{},p({},y,g))},{}),names:at},ct=Object.freeze(Q),bt=function(s,o,h){this.source=s,this.start=o,this.end=h},Yt=function(s,o,h){this.kind=s,o&&(this.leadingComments=o),h&&(this.loc=h)};Yt.prototype.setTrailingComments=function(s){this.trailingComments=s},Yt.prototype.destroy=function(s){if(!s)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(s.leadingComments?s.leadingComments=Array.concat(this.leadingComments,s.leadingComments):s.leadingComments=this.leadingComments),this.trailingComments&&(s.trailingComments?s.trailingComments=Array.concat(this.trailingComments,s.trailingComments):s.trailingComments=this.trailingComments),s},Yt.prototype.includeToken=function(s){return this.loc&&(this.loc.end&&(this.loc.end.line=s.lexer.yylloc.last_line,this.loc.end.column=s.lexer.yylloc.last_column,this.loc.end.offset=s.lexer.offset),s.ast.withSource&&(this.loc.source=s.lexer._input.substring(this.loc.start.offset,s.lexer.offset))),this},Yt.extends=function(s,o){return o.prototype=Object.create(this.prototype),o.extends=this.extends,o.prototype.constructor=o,o.kind=s,o};var xt=Yt,Nt="expression",et=xt.extends(Nt,function(s,o,h){xt.apply(this,[s||Nt,o,h])}),$t="array",Lt=et.extends($t,function(s,o,h,g){et.apply(this,[$t,h,g]),this.items=o,this.shortForm=s}),Xe="arrowfunc",Ti=et.extends(Xe,function(s,o,h,g,y,S,O,T){et.apply(this,[Xe,O,T]),this.arguments=s,this.byref=o,this.body=h,this.type=g,this.nullable=y,this.isStatic=S||!1}),ei="assign",Je=et.extends(ei,function(s,o,h,g,y){et.apply(this,[ei,g,y]),this.left=s,this.right=o,this.operator=h}),Ke="assignref",Zi=et.extends(Ke,function(s,o,h,g){et.apply(this,[Ke,h,g]),this.left=s,this.right=o}),an="attribute",Vn=xt.extends(an,function(s,o,h,g){xt.apply(this,[an,h,g]),this.name=s,this.args=o}),yt="attrgroup",es=xt.extends(yt,function(s,o,h){xt.apply(this,[yt,o,h]),this.attrs=s||[]}),Hn="operation",Ue=et.extends(Hn,function(s,o,h){et.apply(this,[s||Hn,o,h])}),Wn=Ue.extends("bin",function(s,o,h,g,y){Ue.apply(this,["bin",g,y]),this.type=s,this.left=o,this.right=h}),Ci="statement",St=xt.extends(Ci,function(s,o,h){xt.apply(this,[s||Ci,o,h])}),I="block",C=St.extends(I,function(s,o,h,g){St.apply(this,[s||I,h,g]),this.children=o.filter(Boolean)}),b="literal",D=et.extends(b,function(s,o,h,g,y){et.apply(this,[s||b,g,y]),this.value=o,h&&(this.raw=h)}),E="boolean",N=D.extends(E,function(s,o,h,g){D.apply(this,[E,s,o,h,g])}),L="break",W=St.extends(L,function(s,o,h){St.apply(this,[L,o,h]),this.level=s}),X="byref",Z=et.extends(X,function(s,o,h){et.apply(this,[X,o,h]),this.what=s}),mt="call",Bt=et.extends(mt,function(s,o,h,g){et.apply(this,[mt,h,g]),this.what=s,this.arguments=o}),Kt="case",se=St.extends(Kt,function(s,o,h,g){St.apply(this,[Kt,h,g]),this.test=s,this.body=o}),de="cast",ge=Ue.extends(de,function(s,o,h,g,y){Ue.apply(this,[de,g,y]),this.type=s,this.raw=o,this.expr=h}),xe="catch",li=St.extends(xe,function(s,o,h,g,y){St.apply(this,[xe,g,y]),this.body=s,this.what=o,this.variable=h}),ye="declaration",Ai=St.extends(ye,function(s,o,h,g){St.apply(this,[s||ye,h,g]),this.name=o});Ai.prototype.parseFlags=function(s){this.isAbstract=s[2]===1,this.isFinal=s[2]===2,this.isReadonly=s[3]===1,this.kind!=="class"&&(s[0]===-1?this.visibility="":s[0]===null?this.visibility=null:s[0]===0?this.visibility="public":s[0]===1?this.visibility="protected":s[0]===2&&(this.visibility="private"),this.isStatic=s[1]===1)};var we=Ai,bi="class",is=we.extends(bi,function(s,o,h,g,y,S,O){we.apply(this,[bi,s,S,O]),this.isAnonymous=!s,this.extends=o,this.implements=h,this.body=g,this.attrGroups=[],this.parseFlags(y)}),Ge="constantstatement",Gn=St.extends(Ge,function(s,o,h,g){St.apply(this,[s||Ge,h,g]),this.constants=o}),kn="classconstant",qn=Gn.extends(kn,function(s,o,h,g,y,S){Gn.apply(this,[s||kn,o,y,S]),this.parseFlags(h),this.attrGroups=g});qn.prototype.parseFlags=function(s){s[0]===-1?this.visibility="":s[0]===null?this.visibility=null:s[0]===0?this.visibility="public":s[0]===1?this.visibility="protected":s[0]===2&&(this.visibility="private")};var ba=qn,zr="clone",Sa=et.extends(zr,function(s,o,h){et.apply(this,[zr,o,h]),this.what=s}),cr="closure",ie=et.extends(cr,function(s,o,h,g,y,S,O,T){et.apply(this,[cr,O,T]),this.uses=h,this.arguments=s,this.byref=o,this.type=g,this.nullable=y,this.isStatic=S||!1,this.body=null,this.attrGroups=[]}),Qe=xt.extends("comment",function(s,o,h,g){xt.apply(this,[s,h,g]),this.value=o}),ns="commentblock",Jr=Qe.extends(ns,function(s,o,h){Qe.apply(this,[ns,s,o,h])}),Yr="commentline",Bs=Qe.extends(Yr,function(s,o,h){Qe.apply(this,[Yr,s,o,h])}),ys="constant",Jt=xt.extends(ys,function(s,o,h,g){xt.apply(this,[ys,h,g]),this.name=s,this.value=o}),Le="continue",mi=St.extends(Le,function(s,o,h){St.apply(this,[Le,o,h]),this.level=s}),Se="declare",ci=C.extends(Se,function(s,o,h,g,y){C.apply(this,[Se,o,g,y]),this.directives=s,this.mode=h});ci.MODE_SHORT="short",ci.MODE_BLOCK="block",ci.MODE_NONE="none";var Tn=ci,vi="declaredirective",zn=xt.extends(vi,function(s,o,h,g){xt.apply(this,[vi,h,g]),this.key=s,this.value=o}),wi=St.extends("do",function(s,o,h,g){St.apply(this,["do",h,g]),this.test=s,this.body=o}),Wi="echo",ii=St.extends(Wi,function(s,o,h,g){St.apply(this,[Wi,h,g]),this.shortForm=o,this.expressions=s}),Si="empty",jr=et.extends(Si,function(s,o,h){et.apply(this,[Si,o,h]),this.expression=s}),si="encapsed",Cn=D.extends(si,function(s,o,h,g,y){D.apply(this,[si,s,o,g,y]),this.type=h});Cn.TYPE_STRING="string",Cn.TYPE_SHELL="shell",Cn.TYPE_HEREDOC="heredoc",Cn.TYPE_OFFSET="offset";var ks=Cn,hn="encapsedpart",Ms=et.extends(hn,function(s,o,h,g,y){et.apply(this,[hn,g,y]),this.expression=s,this.syntax=o,this.curly=h}),Jn="entry",ET=et.extends(Jn,function(s,o,h,g,y,S){et.apply(this,[Jn,y,S]),this.key=s,this.value=o,this.byRef=h,this.unpack=g}),nu="enum",yT=we.extends(nu,function(s,o,h,g,y,S){we.apply(this,[nu,s,y,S]),this.valueType=o,this.implements=h,this.body=g,this.attrGroups=[]}),su="enumcase",kT=xt.extends(su,function(s,o,h,g){xt.apply(this,[su,h,g]),this.name=s,this.value=o}),ru="error",TT=xt.extends(ru,function(s,o,h,g,y,S){xt.apply(this,[ru,y,S]),this.message=s,this.token=o,this.line=h,this.expected=g}),ou="eval",CT=et.extends(ou,function(s,o,h){et.apply(this,[ou,o,h]),this.source=s}),au="exit",AT=et.extends(au,function(s,o,h,g){et.apply(this,[au,h,g]),this.expression=s,this.useDie=o}),hu="expressionstatement",bT=St.extends(hu,function(s,o,h){St.apply(this,[hu,o,h]),this.expression=s}),ST=St.extends("for",function(s,o,h,g,y,S,O){St.apply(this,["for",S,O]),this.init=s,this.test=o,this.increment=h,this.shortForm=y,this.body=g}),uu="foreach",DT=St.extends(uu,function(s,o,h,g,y,S,O){St.apply(this,[uu,S,O]),this.source=s,this.key=o,this.value=h,this.shortForm=y,this.body=g}),lu="function",Da=we.extends(lu,function(s,o,h,g,y,S,O){we.apply(this,[lu,s,S,O]),this.arguments=o,this.byref=h,this.type=g,this.nullable=y,this.body=null,this.attrGroups=[]}),cu="global",NT=St.extends(cu,function(s,o,h){St.apply(this,[cu,o,h]),this.items=s}),fu="goto",IT=St.extends(fu,function(s,o,h){St.apply(this,[fu,o,h]),this.label=s}),pu="halt",PT=St.extends(pu,function(s,o,h){St.apply(this,[pu,o,h]),this.after=s}),du="identifier",OT=xt.extends(du,function(s,o,h){xt.apply(this,[du,o,h]),this.name=s}),wT=OT,LT=St.extends("if",function(s,o,h,g,y,S){St.apply(this,["if",y,S]),this.test=s,this.body=o,this.alternate=h,this.shortForm=g}),mu="include",FT=et.extends(mu,function(s,o,h,g,y){et.apply(this,[mu,g,y]),this.once=s,this.require=o,this.target=h}),gu="inline",RT=D.extends(gu,function(s,o,h,g){D.apply(this,[gu,s,o,h,g])}),_u="interface",BT=we.extends(_u,function(s,o,h,g,y,S){we.apply(this,[_u,s,y,S]),this.extends=o,this.body=h,this.attrGroups=g}),xu="intersectiontype",MT=we.extends(xu,function(s,o,h){we.apply(this,[xu,null,o,h]),this.types=s}),vu="isset",UT=et.extends(vu,function(s,o,h){et.apply(this,[vu,o,h]),this.variables=s}),Eu="label",VT=St.extends(Eu,function(s,o,h){St.apply(this,[Eu,o,h]),this.name=s}),yu="list",HT=et.extends(yu,function(s,o,h,g){et.apply(this,[yu,h,g]),this.items=s,this.shortForm=o}),ku="lookup",Yn=et.extends(ku,function(s,o,h,g,y){et.apply(this,[s||ku,g,y]),this.what=o,this.offset=h}),Tu="magic",WT=D.extends(Tu,function(s,o,h,g){D.apply(this,[Tu,s,o,h,g])}),Cu="match",GT=et.extends(Cu,function(s,o,h,g){et.apply(this,[Cu,h,g]),this.cond=s,this.arms=o}),Au="matcharm",qT=et.extends(Au,function(s,o,h,g){et.apply(this,[Au,h,g]),this.conds=s,this.body=o}),bu="method",zT=Da.extends(bu,function(){Da.apply(this,arguments),this.kind=bu}),Su="reference",_n=xt.extends(Su,function(s,o,h){xt.apply(this,[s||Su,o,h])}),Du="name",fr=_n.extends(Du,function(s,o,h,g){_n.apply(this,[Du,h,g]),this.name=s.replace(/\\$/,""),this.resolution=o});fr.UNQUALIFIED_NAME="uqn",fr.QUALIFIED_NAME="qn",fr.FULL_QUALIFIED_NAME="fqn",fr.RELATIVE_NAME="rn";var JT=fr,Nu="namespace",YT=C.extends(Nu,function(s,o,h,g,y){C.apply(this,[Nu,o,g,y]),this.name=s,this.withBrackets=h||!1}),Iu="namedargument",jT=et.extends(Iu,function(s,o,h,g){et.apply(this,[Iu,h,g]),this.name=s,this.value=o}),XT=et.extends("new",function(s,o,h,g){et.apply(this,["new",h,g]),this.what=s,this.arguments=o}),Pu="noop",KT=xt.extends(Pu,function(s,o){xt.apply(this,[Pu,s,o])}),Ou="nowdoc",QT=D.extends(Ou,function(s,o,h,g,y){D.apply(this,[Ou,s,o,g,y]),this.label=h}),wu="nullkeyword",$T=xt.extends(wu,function(s,o,h){xt.apply(this,[wu,o,h]),this.raw=s}),Lu="nullsafepropertylookup",ZT=Yn.extends(Lu,function(s,o,h,g){Yn.apply(this,[Lu,s,o,h,g])}),Fu="number",t0=D.extends(Fu,function(s,o,h,g){D.apply(this,[Fu,s,o,h,g])}),Ru="offsetlookup",e0=Yn.extends(Ru,function(s,o,h,g){Yn.apply(this,[Ru,s,o,h,g])}),Bu="parameter",i0=we.extends(Bu,function(s,o,h,g,y,S,O,T,B,R){we.apply(this,[Bu,s,B,R]),this.value=h,this.type=o,this.byref=g,this.variadic=y,this.readonly=S,this.nullable=O,this.flags=T||0,this.attrGroups=[]}),Mu="parentreference",n0=_n.extends(Mu,function(s,o,h){_n.apply(this,[Mu,o,h]),this.raw=s}),Uu="post",s0=Ue.extends(Uu,function(s,o,h,g){Ue.apply(this,[Uu,h,g]),this.type=s,this.what=o}),r0=Ue.extends("pre",function(s,o,h,g){Ue.apply(this,["pre",h,g]),this.type=s,this.what=o}),Vu="print",o0=et.extends(Vu,function(s,o,h){et.apply(this,[Vu,o,h]),this.expression=s}),Hu="program",a0=C.extends(Hu,function(s,o,h,g,y,S){C.apply(this,[Hu,s,y,S]),this.errors=o,h&&(this.comments=h),g&&(this.tokens=g)}),Wu="property",h0=St.extends(Wu,function(s,o,h,g,y,S,O,T){St.apply(this,[Wu,O,T]),this.name=s,this.value=o,this.readonly=h,this.nullable=g,this.type=y,this.attrGroups=S}),Gu="propertylookup",u0=Yn.extends(Gu,function(s,o,h,g){Yn.apply(this,[Gu,s,o,h,g])}),qu="propertystatement",zu=St.extends(qu,function(s,o,h,g,y){St.apply(this,[qu,g,y]),this.properties=o,this.parseFlags(h)});zu.prototype.parseFlags=function(s){s[0]===-1?this.visibility="":s[0]===null?this.visibility=null:s[0]===0?this.visibility="public":s[0]===1?this.visibility="protected":s[0]===2&&(this.visibility="private"),this.isStatic=s[1]===1};var l0=zu,Ju="retif",c0=et.extends(Ju,function(s,o,h,g,y){et.apply(this,[Ju,g,y]),this.test=s,this.trueExpr=o,this.falseExpr=h}),Yu="return",f0=St.extends(Yu,function(s,o,h){St.apply(this,[Yu,o,h]),this.expr=s}),ju="selfreference",p0=_n.extends(ju,function(s,o,h){_n.apply(this,[ju,o,h]),this.raw=s}),Xu="silent",d0=et.extends(Xu,function(s,o,h){et.apply(this,[Xu,o,h]),this.expr=s}),Ku="static",m0=St.extends(Ku,function(s,o,h){St.apply(this,[Ku,o,h]),this.variables=s}),Qu="staticvariable",g0=xt.extends(Qu,function(s,o,h,g){xt.apply(this,[Qu,h,g]),this.variable=s,this.defaultValue=o}),$u="staticlookup",_0=Yn.extends($u,function(s,o,h,g){Yn.apply(this,[$u,s,o,h,g])}),Zu="staticreference",x0=_n.extends(Zu,function(s,o,h){_n.apply(this,[Zu,o,h]),this.raw=s}),tl="string",v0=D.extends(tl,function(s,o,h,g,y,S){D.apply(this,[tl,o,g,y,S]),this.unicode=h,this.isDoubleQuote=s}),el="switch",E0=St.extends(el,function(s,o,h,g,y){St.apply(this,[el,g,y]),this.test=s,this.body=o,this.shortForm=h}),il="throw",y0=St.extends(il,function(s,o,h){St.apply(this,[il,o,h]),this.what=s}),nl="trait",k0=we.extends(nl,function(s,o,h,g){we.apply(this,[nl,s,h,g]),this.body=o}),sl="traitalias",T0=xt.extends(sl,function(s,o,h,g,y,S){xt.apply(this,[sl,y,S]),this.trait=s,this.method=o,this.as=h,this.visibility="",g&&(g[0]===0?this.visibility="public":g[0]===1?this.visibility="protected":g[0]===2&&(this.visibility="private"))}),rl="traitprecedence",C0=xt.extends(rl,function(s,o,h,g,y){xt.apply(this,[rl,g,y]),this.trait=s,this.method=o,this.instead=h}),ol="traituse",A0=xt.extends(ol,function(s,o,h,g){xt.apply(this,[ol,h,g]),this.traits=s,this.adaptations=o}),b0=St.extends("try",function(s,o,h,g,y){St.apply(this,["try",g,y]),this.body=s,this.catches=o,this.always=h}),al="typereference",hl=_n.extends(al,function(s,o,h,g){_n.apply(this,[al,h,g]),this.name=s,this.raw=o});hl.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var S0=hl,ul="unary",D0=Ue.extends(ul,function(s,o,h,g){Ue.apply(this,[ul,h,g]),this.type=s,this.what=o}),ll="uniontype",N0=we.extends(ll,function(s,o,h){we.apply(this,[ll,null,o,h]),this.types=s}),cl="unset",I0=St.extends(cl,function(s,o,h){St.apply(this,[cl,o,h]),this.variables=s}),fl="usegroup",P0=St.extends(fl,function(s,o,h,g,y){St.apply(this,[fl,g,y]),this.name=s,this.type=o,this.items=h}),pl="useitem",Na=St.extends(pl,function(s,o,h,g,y){St.apply(this,[pl,g,y]),this.name=s,this.alias=o,this.type=h});Na.TYPE_CONST="const",Na.TYPE_FUNCTION="function";var O0=Na,dl="variable",w0=et.extends(dl,function(s,o,h,g){et.apply(this,[dl,h,g]),this.name=s,this.curly=o||!1}),ml="variadic",L0=et.extends(ml,function(s,o,h){et.apply(this,[ml,o,h]),this.what=s}),gl="variadicplaceholder",F0=xt.extends(gl,function(s,o){xt.apply(this,[gl,s,o])}),_l="while",R0=St.extends(_l,function(s,o,h,g,y){St.apply(this,[_l,g,y]),this.test=s,this.body=o,this.shortForm=h}),xl="yield",B0=et.extends(xl,function(s,o,h,g){et.apply(this,[xl,h,g]),this.value=s,this.key=o}),vl="yieldfrom",M0=et.extends(vl,function(s,o,h){et.apply(this,[vl,o,h]),this.value=s}),Di=function(s,o){this.withPositions=s,this.withSource=o};Di.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(s,o){s.forEach(function(h){Di.precedence[h]=o+1})}),Di.prototype.isRightAssociative=function(s){return s==="**"||s==="??"},Di.prototype.swapLocations=function(s,o,h,g){this.withPositions&&(s.loc.start=o.loc.start,s.loc.end=h.loc.end,this.withSource&&(s.loc.source=g.lexer._input.substring(s.loc.start.offset,s.loc.end.offset)))},Di.prototype.resolveLocations=function(s,o,h,g){this.withPositions&&(s.loc.start.offset>o.loc.start.offset&&(s.loc.start=o.loc.start),s.loc.end.offset<h.loc.end.offset&&(s.loc.end=h.loc.end),this.withSource&&(s.loc.source=g.lexer._input.substring(s.loc.start.offset,s.loc.end.offset)))},Di.prototype.resolvePrecedence=function(s,o){var h,g,y;return s.kind==="call"?this.resolveLocations(s,s.what,s,o):s.kind==="propertylookup"||s.kind==="staticlookup"||s.kind==="offsetlookup"&&s.offset?this.resolveLocations(s,s.what,s.offset,o):s.kind==="bin"?s.right&&!s.right.parenthesizedExpression&&(s.right.kind==="bin"?(g=Di.precedence[s.type],y=Di.precedence[s.right.type],g&&y&&y<=g&&(s.type!==s.right.type||!this.isRightAssociative(s.type))&&(h=s.right,s.right=s.right.left,this.swapLocations(s,s.left,s.right,o),h.left=this.resolvePrecedence(s,o),this.swapLocations(h,h.left,h.right,o),s=h)):s.right.kind==="retif"&&(g=Di.precedence[s.type],y=Di.precedence["?"],g&&y&&y<=g&&(h=s.right,s.right=s.right.test,this.swapLocations(s,s.left,s.right,o),h.test=this.resolvePrecedence(s,o),this.swapLocations(h,h.test,h.falseExpr,o),s=h))):s.kind!=="silent"&&s.kind!=="cast"||!s.expr||s.expr.parenthesizedExpression?s.kind==="unary"?s.what&&!s.what.parenthesizedExpression&&(s.what.kind==="bin"?(h=s.what,s.what=s.what.left,this.swapLocations(s,s,s.what,o),h.left=this.resolvePrecedence(s,o),this.swapLocations(h,h.left,h.right,o),s=h):s.what.kind==="retif"&&(h=s.what,s.what=s.what.test,this.swapLocations(s,s,s.what,o),h.test=this.resolvePrecedence(s,o),this.swapLocations(h,h.test,h.falseExpr,o),s=h)):s.kind==="retif"?s.falseExpr&&s.falseExpr.kind==="retif"&&!s.falseExpr.parenthesizedExpression&&(h=s.falseExpr,s.falseExpr=h.test,this.swapLocations(s,s.test,s.falseExpr,o),h.test=this.resolvePrecedence(s,o),this.swapLocations(h,h.test,h.falseExpr,o),s=h):s.kind==="assign"?s.right&&s.right.kind==="bin"&&!s.right.parenthesizedExpression&&(g=Di.precedence["="],y=Di.precedence[s.right.type],g&&y&&y<g&&(h=s.right,s.right=s.right.left,h.left=s,this.swapLocations(h,h.left,s.right,o),s=h)):s.kind==="expressionstatement"&&this.swapLocations(s,s.expression,s,o):s.expr.kind==="bin"?(h=s.expr,s.expr=s.expr.left,this.swapLocations(s,s,s.expr,o),h.left=this.resolvePrecedence(s,o),this.swapLocations(h,h.left,h.right,o),s=h):s.expr.kind==="retif"&&(h=s.expr,s.expr=s.expr.test,this.swapLocations(s,s,s.expr,o),h.test=this.resolvePrecedence(s,o),this.swapLocations(h,h.test,h.falseExpr,o),s=h),s},Di.prototype.prepare=function(s,o,h){var g=null;(this.withPositions||this.withSource)&&(g=h.position());var y=this,S=function O(){var T=null,B=Array.prototype.slice.call(arguments);if(B.push(o),y.withPositions||y.withSource){var R=null;y.withSource&&(R=h.lexer._input.substring(g.offset,h.prev[2])),T=new bt(R,g,new qt(h.prev[0],h.prev[1],h.prev[2])),B.push(T)}s||(s=B.shift());var P=y[s];if(typeof P!="function")throw new Error('Undefined node "'+s+'"');var Ht=Object.create(P.prototype);return P.apply(Ht,B),O.instance=Ht,O.trailingComments&&(Ht.trailingComments=O.trailingComments),typeof O.postBuild=="function"&&O.postBuild(Ht),h.debug&&delete y.stack[O.stackUid],y.resolvePrecedence(Ht,h)};return h.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:g,stack:new Error().stack.split(`
`).slice(3,5)},S.stackUid=this.stackUid),S.setTrailingComments=function(O){S.instance?S.instance.setTrailingComments(O):S.trailingComments=O},S.destroy=function(O){o&&(O?O.leadingComments?O.leadingComments=o.concat(O.leadingComments):O.leadingComments=o:h._docIndex=h._docs.length-o.length),h.debug&&delete y.stack[S.stackUid]},S},Di.prototype.checkNodes=function(){var s=[];for(var o in this.stack)Object.prototype.hasOwnProperty.call(this.stack,o)&&(this.stack[o].key=o,s.push(this.stack[o]));return this.stack={},s},[Lt,Ti,Je,Zi,Vn,es,Wn,C,N,W,Z,Bt,se,ge,li,is,ba,Sa,ie,Qe,Jr,Bs,Jt,Gn,mi,we,Tn,zn,wi,ii,jr,ks,Ms,ET,yT,kT,TT,CT,AT,et,bT,ST,DT,Da,NT,IT,PT,wT,LT,FT,RT,BT,MT,UT,VT,HT,D,Yn,WT,GT,qT,zT,JT,YT,jT,XT,xt,KT,QT,$T,ZT,t0,e0,Ue,i0,n0,s0,r0,o0,a0,h0,u0,l0,_n,c0,f0,p0,d0,St,m0,g0,_0,x0,v0,E0,y0,k0,T0,C0,A0,b0,S0,D0,N0,I0,P0,O0,w0,L0,F0,R0,B0,M0].forEach(function(s){Di.prototype[s.kind]=s});var El=Di;function Ia(s,o){for(var h=Object.keys(s),g=h.length;g--;){var y=h[g],S=s[y];S===null?delete o[y]:typeof S=="function"?o[y]=S.bind(o):Array.isArray(S)?o[y]=Array.isArray(o[y])?o[y].concat(S):S:c(S)==="object"?o[y]=c(o[y])==="object"?Ia(S,o[y]):S:o[y]=S}return o}var Gi=function(s){if(typeof this=="function")return new this(s);if(this.tokens=ct,this.lexer=new Ct(this),this.ast=new El,this.parser=new lt(this.lexer,this.ast),s&&c(s)==="object"){if(s.parser&&(s.lexer||(s.lexer={}),s.parser.version)){if(typeof s.parser.version=="string"){var o=s.parser.version.split(".");if(o=100*parseInt(o[0])+parseInt(o[1]),isNaN(o))throw new Error("Bad version number : "+s.parser.version);s.parser.version=o}else if(typeof s.parser.version!="number")throw new Error("Expecting a number for version");if(s.parser.version<500||s.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Ia(s,this),this.lexer.version=this.parser.version}},Pa=function(s){return typeof s.write=="function"?s.toString():s};Gi.create=function(s){return new Gi(s)},Gi.parseEval=function(s,o){return new Gi(o).parseEval(s)},Gi.prototype.parseEval=function(s){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,s=Pa(s),this.parser.parse(s,"eval")},Gi.parseCode=function(s,o,h){return c(o)!=="object"||h||(h=o,o="unknown"),new Gi(h).parseCode(s,o)},Gi.prototype.parseCode=function(s,o){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,s=Pa(s),this.parser.parse(s,o)},Gi.tokenGetAll=function(s,o){return new Gi(o).tokenGetAll(s)},Gi.prototype.tokenGetAll=function(s){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,s=Pa(s);var o=this.lexer.EOF,h=this.tokens.values;this.lexer.setInput(s);for(var g=this.lexer.lex()||o,y=[];g!=o;){var S=this.lexer.yytext;Object.prototype.hasOwnProperty.call(h,g)&&(S=[h[g],S,this.lexer.yylloc.first_line]),y.push(S),g=this.lexer.lex()||o}return y};var ss=Gi,U0=ct,V0=Ct,H0=El,W0=lt,G0=Ia,q0=Gi,z0=Gi;ss.tokens=U0,ss.lexer=V0,ss.AST=H0,ss.parser=W0,ss.combine=G0,ss.Engine=q0,ss.default=z0;var yl=function(s,o,h){var g=h&&h.parentParser==="markdown";if(!s&&g)return"";s=s.replace(/\?>\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var y,S=new ss({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),O=s.indexOf("<?php")!==-1,T=g&&!O;try{y=T?S.parseEval(s):S.parseCode(s)}catch(B){throw B instanceof SyntaxError&&"lineNumber"in B&&(B.loc={start:{line:B.lineNumber,column:B.columnNumber}},delete B.lineNumber,delete B.columnNumber),B}return y.extra={parseAsEval:T},y.comments.forEach(function(B){B.value[B.value.length-1]===`
`&&(B.value=B.value.slice(0,-1),B.loc.end.offset=B.loc.end.offset-1)}),y},Us=n.default.util,J0=Us.hasNewline,Y0=Us.skipEverythingButNewLine,j0=Us.skipNewline,X0=Us.isNextLineEmpty,K0=Us.isPreviousLineEmpty,Q0=Us.getNextNonSpaceNonCommentCharacterIndex,$0=n.default.version;function Oa(s,o){return parseInt($0[0])>1?s[o]:s}var kl={};function wa(s){return kl[s]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(s,o){s.forEach(function(h){kl[h]=o})});var Tl=["==","!=","===","!==","<>","<=>"],Xr=["*","/","%"],La=[">>","<<"];function Cl(s){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(s.kind)}function Al(s){var o=s.body;return o?(o.kind==="block"&&(o=o.children),o[0]):null}function rs(s){var o=s.children||s.body||s.adaptations;return Array.isArray(o)?o:null}function bl(s){var o=s.getParentNode();return o?rs(o):null}function Kr(s){return s.length>0?s[s.length-1]:null}function Fa(s){var o=s.getValue();if(o.kind==="program"){var h=rs(o);return!(!h||h.length===0)&&h[0].kind==="inline"}if(o.kind==="switch"){if(!o.body)return!1;var g=rs(o.body);if(g.length===0)return!1;var y=v(g,1)[0];if(!y.body)return!1;var S=rs(y.body);return S.length!==0&&S[0].kind==="inline"}var O=Al(o);return!!O&&O.kind==="inline"}var Sl=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(s,o){return s[o.toLowerCase()]=o,s},{}),he={printNumber:function(s){return s.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:wa,isBitwiseOperator:function(s){return!!La[s]||s==="|"||s==="^"||s==="&"},shouldFlatten:function(s,o){return wa(o)===wa(s)&&s!=="**"&&(!Tl.includes(s)||!Tl.includes(o))&&!(o==="%"&&Xr.includes(s)||s==="%"&&Xr.includes(o))&&(o===s||!Xr.includes(o)||!Xr.includes(s))&&(!La.includes(s)||!La.includes(o))},nodeHasStatement:Cl,getNodeListProperty:rs,getParentNodeListProperty:bl,getLast:Kr,getPenultimate:function(s){return s.length>1?s[s.length-2]:null},isLastStatement:function(s){var o=bl(s);if(!o)return!0;var h=s.getValue();return o[o.length-1]===h},getBodyFirstChild:Al,lineShouldEndWithSemicolon:function(s){var o=s.getValue(),h=s.getParentNode();if(!h)return!1;if(["for","foreach","while","do","if","switch"].includes(h.kind)&&o.kind!=="block"&&o.kind!=="if"&&(h.body===o||h.alternate===o))return!0;if(!Cl(h)||o.kind==="echo"&&o.shortForm)return!1;if(o.kind==="traituse")return!o.adaptations;if(o.kind==="method"&&o.isAbstract)return!0;if(o.kind==="method"){var g=s.getParentNode();if(g&&g.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(o.kind)},fileShouldEndWithHardline:function(s){var o=s.getValue(),h=o.kind==="program",g=o.children&&Kr(o.children);if(!h||g&&["halt","inline"].includes(g.kind))return!1;if(g&&(g.kind==="declare"||g.kind==="namespace")){var y=g.children.length>0&&Kr(g.children);if(y&&["halt","inline"].includes(y.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(s){var o=s.replace(/^\\/,"");return o.indexOf("\\")!==-1?o:s},hasDanglingComments:function(s){return s.comments&&s.comments.some(function(o){return!o.leading&&!o.trailing})},hasLeadingComment:function(s){return s.comments&&s.comments.some(function(o){return o.leading})},hasTrailingComment:function(s){return s.comments&&s.comments.some(function(o){return o.trailing})},docShouldHaveTrailingNewline:function s(o){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,g=o.getNode(h),y=o.getNode(h+1),S=o.getNode(h+2);if(!y)return!1;if(S&&["call","new","echo"].includes(S.kind)&&!["call","array"].includes(y.kind)||y.kind==="parameter"){var O=S.arguments.length-1,T=S.arguments.indexOf(y);return T!==O}if(S&&S.kind==="for"){var B=S.init.indexOf(y);if(B!==-1)return B!==S.init.length-1;var R=S.test.indexOf(y);if(R!==-1)return R!==S.test.length-1;var P=S.increment.indexOf(y);if(P!==-1)return P!==S.increment.length-1}if(y.kind==="bin")return y.left===g||s(o,h+1);if(y.kind==="case"&&y.test===g)return!0;if(y.kind==="staticvariable"){var Ht=S.variables.length-1,Vt=S.variables.indexOf(y);return Vt!==Ht}if(y.kind==="entry"){if(y.key===g)return!0;var le=S.items.length-1,_e=S.items.indexOf(y);return _e!==le}if(["call","new"].includes(y.kind)){var Wt=y.arguments.length-1,Te=y.arguments.indexOf(g);return Te!==Wt}if(y.kind==="echo"){var te=y.expressions.length-1,De=y.expressions.indexOf(g);return De!==te}if(y.kind==="array"){var Ne=y.items.length-1,ve=y.items.indexOf(g);return ve!==Ne}return y.kind==="retif"&&s(o,h+1)},isLookupNode:function(s){return s.kind==="propertylookup"||s.kind==="nullsafepropertylookup"||s.kind==="staticlookup"||s.kind==="offsetlookup"},isFirstChildrenInlineNode:Fa,shouldPrintHardLineAfterStartInControlStructure:function(s){var o=s.getValue();return!["try","catch"].includes(o.kind)&&Fa(s)},shouldPrintHardLineBeforeEndInControlStructure:function(s){var o=s.getValue();if(["try","catch"].includes(o.kind))return!0;if(o.kind==="switch"){var h=rs(o.body);if(h.length===0)return!0;var g=Kr(h);if(!g.body)return!0;var y=rs(g.body);return y.length===0||y[0].kind!=="inline"}return!Fa(s)},getAlignment:function(s){var o=s.split(`
`).pop();return o.length-o.trimLeft().length+1},isProgramLikeNode:function(s){return["program","declare","namespace"].includes(s.kind)},isReferenceLikeNode:function(s){return["name","parentreference","selfreference","staticreference"].includes(s.kind)},getNodeKindIncludingLogical:function(s){return s.kind==="bin"&&["||","&&"].includes(s.type)?"logical":s.kind},useDoubleQuote:function(s,o){if(s.isDoubleQuote===o.singleQuote){var h=s.raw.slice(s.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return s.isDoubleQuote?h:!h}return s.isDoubleQuote},hasEmptyBody:function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",h=s.getValue();return h[o]&&h[o].children&&h[o].children.length===0&&(!h[o].comments||h[o].comments.length===0)},isNextLineEmptyAfterNamespace:function(s,o,h){var g=h(o);return g=Y0(s,g),g=j0(s,g),J0(s,g)},shouldPrintHardlineBeforeTrailingComma:function(s){return s.kind==="nowdoc"||s.kind==="encapsed"&&s.type==="heredoc"||s.kind==="entry"&&(s.value.kind==="nowdoc"||s.value.kind==="encapsed"&&s.value.type==="heredoc")},isDocNode:function(s){return s.kind==="nowdoc"||s.kind==="encapsed"&&s.type==="heredoc"},getAncestorNode:function(s,o){var h=function(g,y){for(var S,O=[].concat(y),T=-1;S=g.getParentNode(++T);)if(O.indexOf(S.kind)!==-1)return T;return-1}(s,o);return h===-1?null:s.getParentNode(h)},getNextNode:function(s,o){var h=s.getParentNode(),g=rs(h);if(!g)return null;var y=g.indexOf(o);return y===-1?null:h.children[y+1]},normalizeMagicMethodName:function(s){var o=s.toLowerCase();return Sl[o]?Sl[o]:s},isPreviousLineEmpty:function(s,o,h){return K0(s,o,Oa(h,"locStart"))},isNextLineEmpty:function(s,o,h){return X0(s,o,Oa(h,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(s,o,h){return Q0(s,o,Oa(h,"locEnd"))}},Vs=n.default.util,xn=Vs.addLeadingComment,qi=Vs.addDanglingComment,vn=Vs.addTrailingComment,Z0=Vs.skipNewline,Qr=Vs.hasNewline,tC=Vs.hasNewlineInRange,Hs=n.default.doc.builders,Dl=Hs.join,eC=Hs.indent,An=Hs.hardline,Nl=Hs.cursor,Il=Hs.lineSuffix,iC=Hs.breakParent,pr=he.getNextNonSpaceNonCommentCharacterIndex,nC=he.isNextLineEmpty,sC=he.isPreviousLineEmpty,rC=he.isLookupNode;function $r(s,o){var h=s.children;h.length===0?qi(s,o):xn(h[0],o)}function Ra(s,o){s.kind==="block"?$r(s,o):xn(s,o)}function Pl(s,o,h,g,y,S){var O=pr(s,y,S),T=s.charAt(O);return o&&o.kind==="identifier"&&h&&(h.kind==="function"||h.kind==="method")&&T===")"?(vn(h,y),!0):!(!h||h.kind!=="function"&&h.kind!=="method"||!g||g.kind!=="block")&&($r(g,y),!0)}function Ba(s,o,h,g,y,S){if(!h||h.kind!=="if"||!g)return!1;var O=pr(s,y,S);return s.charAt(O)===")"?(vn(o,y),!0):o===h.body&&g===h.alternate?(qi(h,y),!0):g.kind==="if"?(Ra(g.body,y),!0):h.body===g&&(xn(g,y),!0)}function Ma(s,o,h){if(s&&["class","interface","trait"].includes(s.kind)){if(o&&s.extends){if(Array.isArray(s.extends)){if(s.extends.some(function(g){if(o&&o===g)return qi(o,h),!0}))return!0}else if(o===s.extends)return qi(o,h),!0}if(o&&s.implements&&s.implements.some(function(g){if(o&&o===g)return qi(o,h),!0}))return!0;if(!(s.body&&s.body.length>0))return qi(s,h),!0}return!!(o&&o.kind==="class"&&o.isAnonymous&&o.leadingComments&&h.kind==="commentblock")}function Ua(s,o,h,g,y){if(o&&(o.kind==="function"||o.kind==="method")){for(var S=0,O=0;O<o.arguments.length;O++)S=y.locEnd(o.arguments[O])>S?y.locEnd(o.arguments[O]):S;var T=o.body&&y.locStart(g)>S&&y.locEnd(g)<y.locStart(o.body),B=pr(s,g,y);if(o.type&&T&&s.charAt(B)!==")")return y.locEnd(g)<y.locStart(o.type)?(qi(o.type,g),!0):(vn(o.type,g),!0)}return!1}function Va(s,o,h,g,y){return!(!h||!["function","method","parameter"].includes(h.kind))&&o.kind==="typereference"&&g.kind==="identifier"&&(vn(o,y),!0)}function Ol(s,o){return!(!s||!["label","goto"].includes(s.kind))&&(vn(s,o),!0)}function Ha(s,o,h,g){return h&&h.kind==="inline"?(h.leadingComments||(h.leadingComments=[]),h.leadingComments.includes(g)||h.leadingComments.push(g),!0):!(s||h||!o||o.kind!=="inline")&&(qi(o,g),!0)}function wl(s,o,h){return!(!s||s.kind!=="try"||!o)&&(o.kind==="block"?($r(o,h),!0):o.kind==="try"?(Ra(o.always,h),!0):o.kind==="catch"&&(Ra(o.body,h),!0))}function Ll(s,o,h,g){return h||o||!s||s.kind!=="namespace"||s.withBrackets?!(o||!s||s.kind!=="namespace"||s.withBrackets)&&(qi(s,g),!0):(vn(s,g),!0)}function Fl(s,o,h,g){return!(!s||s.kind!=="declare")&&(!o||o.kind!=="noop")&&(h&&s.directives[0]!==h?!(!h||!o)&&(xn(h,g),!0):(s.mode==="none"?vn(s,g):qi(s,g),!0))}function Wa(s,o,h,g,y,S){if(!h||h.kind!=="while"||!g)return!1;var O=pr(s,y,S);return s.charAt(O)===")"?(vn(o,y),!0):g.kind==="block"&&($r(g,y),!0)}function Ga(s,o){return s.getValue().printed=!0,o.printer.printComment(s,o)}function Rl(s,o,h){return s.getNode()===o.cursorNode&&s.getValue()?[Nl,h,Nl]:h}var re={handleOwnLineComment:function(s,o,h){var g=s.precedingNode,y=s.enclosingNode,S=s.followingNode;return Pl(o,g,y,S,s,h)||function(O,T,B){return O&&rC(O)&&T&&["identifier","variable","encapsed"].includes(T.kind)?(xn(O,B),!0):!1}(y,S,s)||Ba(o,g,y,S,s,h)||Wa(o,g,y,S,s,h)||wl(y,S,s)||Ma(y,S,s)||Va(o,g,y,S,s)||Ua(o,y,S,s,h)||function(O,T,B,R){return!B&&O&&(O.kind==="for"||O.kind==="foreach")?(O.body&&O.body.kind!=="block"?xn(B,R):xn(O,R),!0):!1}(y,0,S,s)||Ha(y,g,S,s)||Fl(y,g,S,s)},handleEndOfLineComment:function(s,o,h){var g=s.precedingNode,y=s.enclosingNode,S=s.followingNode;return function(O,T,B,R,P){return!T&&!R&&B&&B.kind==="array"?(vn(B,P),!0):!1}(0,g,y,S,s)||function(O,T,B,R,P){return B&&B.kind==="return"&&!B.expr?(vn(B,P),!0):!1}(0,0,y,0,s)||Pl(o,g,y,S,s,h)||function(O,T,B,R,P,Ht){var Vt=T&&!tC(P,Ht.locEnd(T),Ht.locStart(R));return(!T||!Vt)&&O&&O.kind==="retif"&&B?(xn(B,R),!0):!1}(y,g,S,s,o,h)||Ba(o,g,y,S,s,h)||Wa(o,g,y,S,s,h)||wl(y,S,s)||Ma(y,S,s)||Va(o,g,y,S,s)||Ua(o,y,S,s,h)||function(O,T){return O&&O.kind==="entry"?(xn(O,T),!0):!1}(y,s)||function(O,T,B){return T&&T.kind==="call"&&O&&T.what===O&&T.arguments.length>0?(xn(T.arguments[0],B),!0):!1}(g,y,s)||function(O,T,B){if(O&&O.kind==="assign"&&T){var R=O.loc.start.offset+O.loc.source.indexOf("=");if(B.loc.start.offset>R)return xn(T,B),!0}return!1}(y,S,s)||Ha(y,g,S,s)||Ll(y,g,S,s)||Fl(y,g,S,s)||Ol(y,s)},handleRemainingComment:function(s,o,h){var g=s.precedingNode,y=s.enclosingNode,S=s.followingNode;return Ba(o,g,y,S,s,h)||Wa(o,g,y,S,s,h)||function(O,T,B,R){var P=pr(O,B,R);return O.charAt(P)!==")"?!1:T&&(T.kind==="function"||T.kind==="closure"||T.kind==="method"||T.kind==="call"||T.kind==="new")&&T.arguments.length===0?(qi(T,B),!0):!1}(o,y,s,h)||Ma(y,S,s)||function(O,T,B){return O&&O.kind==="traituse"&&O.adaptations&&!O.adaptations.length?(qi(O,B),!0):!1}(y,0,s)||Va(o,g,y,S,s)||Ua(o,y,S,s,h)||Ol(y,s)||function(O,T,B,R){return T&&T.kind==="halt"?(qi(T,R),!0):O&&O.kind==="halt"?(qi(O,R),!0):!1}(g,y,0,s)||function(O,T){return O&&(O.kind==="continue"||O.kind==="break")&&!O.label?(vn(O,T),!0):!1}(y,s)||Ha(y,g,S,s)||Ll(y,g,S,s)},getCommentChildNodes:function(s){return c(s)!=="object"?[]:function(o){return Object.keys(o).filter(function(h){return h!=="kind"&&h!=="loc"&&h!=="errors"&&h!=="extra"&&h!=="comments"&&h!=="leadingComments"&&h!=="enclosingNode"&&h!=="precedingNode"&&h!=="followingNode"}).map(function(h){return o[h]})}(s)},canAttachComment:function(s){return s.kind&&s.kind!=="commentblock"&&s.kind!=="commentline"},isBlockComment:function(s){return s.kind==="commentblock"},printDanglingComments:function(s,o,h,g){var y=[],S=s.getValue();return S&&S.comments?(s.each(function(O){var T=O.getValue();!T||T.leading||T.trailing||g&&!g(T)||y.push(Ga(O,o))},"comments"),y.length===0?"":h?Dl(An,y):eC([An,Dl(An,y)])):""},hasLeadingComment:function(s){return s.comments&&s.comments.some(function(o){return o.leading})},hasTrailingComment:function(s){return s.comments&&s.comments.some(function(o){return o.trailing})},hasLeadingOwnLineComment:function(s,o,h){return o.comments&&o.comments.some(function(g){return g.leading&&Qr(s,h.locEnd(g))})},printComments:function(s,o){var h=[];return s.forEach(function(g,y,S){g.printed=!0;var O=S.length===y+1;h.push(g.value),O||h.push(An),nC(o.originalText,g,o)&&!O&&h.push(An)}),h},printAllComments:function(s,o,h,g){var y=s.getValue(),S=o(s),O=y&&y.comments;if(!O||O.length===0)return Rl(s,h,S);var T=[],B=[g?";":"",S];return s.each(function(R){var P=R.getValue(),Ht=P.leading,Vt=P.trailing;if(Ht){var le=function(Wt,Te,te){var De=Wt.getValue(),Ne=Ga(Wt,te);return Ne?te.printer.isBlockComment&&te.printer.isBlockComment(De)?[Ne,Qr(te.originalText,te.locEnd(De))?An:" "]:[Ne,An]:""}(R,0,h);if(!le)return;T.push(le);var _e=h.originalText;Qr(_e,Z0(_e,h.locEnd(P)))&&T.push(An)}else Vt&&B.push(function(Wt,Te,te){var De=Wt.getValue(),Ne=Ga(Wt,te);if(!Ne)return"";var ve=te.printer.isBlockComment&&te.printer.isBlockComment(De);if(Qr(te.originalText,te.locStart(De),{backwards:!0})){var ee=sC(te.originalText,De,te);return Il([An,ee?An:"",Ne])}return ve?[" ",Ne]:[Il([" ",Ne]),ve?"":iC]}(R,0,h))},"comments"),Rl(s,h,T.concat(B))}};function Bl(){}Bl.strictEqual=function(){};var oC=Bl,Ml=he.getPrecedence,aC=he.shouldFlatten,hC=he.isBitwiseOperator,Ul=function(s){var o=s.getParentNode();if(!o)return!1;var h=s.getName(),g=s.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(o.kind))return!1;switch(g.kind){case"pre":case"post":if(o.kind==="unary")return g.kind==="pre"&&(g.type==="+"&&o.type==="+"||g.type==="-"&&o.type==="-");case"unary":switch(o.kind){case"unary":return g.type===o.type&&(g.type==="+"||g.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return h==="what"&&o.what===g;case"bin":return o.type==="**"&&h==="left";default:return!1}case"bin":switch(o.kind){case"assign":case"retif":return["and","xor","or"].includes(g.type);case"silent":case"cast":return g.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return h==="what"&&o.what===g;case"bin":var y=o.type,S=Ml(y),O=g.type,T=Ml(O);return S>T||y==="||"&&O==="&&"||(S===T&&h==="right"?(oC.strictEqual(o.right,g),!0):S===T&&!aC(y,O)||(S<T&&O==="%"?y==="+"||y==="-":!!hC(y)));default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return o.kind==="call"&&h==="what"&&o.what===g&&g.parenthesizedExpression;case"clone":case"new":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return h==="what"&&o.what===g;default:return!1}case"yield":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return h==="what"&&o.what===g;case"retif":return o.test===g;default:return!(!g.key&&!g.value)}case"assign":return(o.kind!=="for"||!o.init.includes(g)&&!o.increment.includes(g))&&o.kind!=="assign"&&o.kind!=="static"&&!["if","do","while","foreach","switch"].includes(o.kind)&&o.kind!=="silent"&&o.kind!=="call";case"retif":switch(o.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(h==="test"&&!o.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return h==="what"&&o.what===g;default:return!1}case"closure":switch(o.kind){case"call":return h==="what"&&o.what===g;case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return g.parenthesizedExpression;case"string":case"array":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(g.kind)||o.kind!=="offsetlookup")&&h==="what"&&o.what===g;default:return!1}case"print":case"include":return o.kind==="bin"}return!1},zi=n.default.doc.builders,Vl=zi.breakParent,fi=zi.join,ke=zi.line,uC=zi.lineSuffix,Pt=zi.group,Ws=zi.conditionalGroup,Mt=zi.indent,lC=zi.dedent,os=zi.ifBreak,Tt=zi.hardline,oe=zi.softline,Gs=zi.literalline,cC=zi.align,fC=zi.dedentToRoot,as=n.default.doc.utils.willBreak,qa=n.default.util,pC=qa.isNextLineEmptyAfterIndex,dC=qa.hasNewline,Hl=qa.hasNewlineInRange,hs=he.getLast,mC=he.getPenultimate,Wl=he.isLastStatement,gC=he.lineShouldEndWithSemicolon,_C=he.printNumber,Gl=he.shouldFlatten,ql=he.maybeStripLeadingSlashFromUse,xC=he.fileShouldEndWithHardline,tn=he.hasDanglingComments,zl=he.hasLeadingComment,Jl=he.hasTrailingComment,Yl=he.docShouldHaveTrailingNewline,Ji=he.isLookupNode,za=he.isFirstChildrenInlineNode,vC=he.shouldPrintHardLineAfterStartInControlStructure,EC=he.shouldPrintHardLineBeforeEndInControlStructure,yC=he.getAlignment,Ja=he.isProgramLikeNode,qs=he.getNodeKindIncludingLogical,kC=he.useDoubleQuote,jl=he.hasEmptyBody,TC=he.isNextLineEmptyAfterNamespace,Xl=he.shouldPrintHardlineBeforeTrailingComma,Ya=he.isDocNode,ja=he.getAncestorNode,Xa=he.isReferenceLikeNode,CC=he.getNextNode,AC=he.normalizeMagicMethodName,bC=he.getNextNonSpaceNonCommentCharacterIndex,Ts=he.isNextLineEmpty;function zs(s,o){return parseFloat(s)>=parseFloat(o)}function dr(s,o){return!!s.trailingCommaPHP&&zs(s.phpVersion,o)}function Ka(s){return s.braceStyle!=="1tbs"}function Qa(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return[g?"?":"","->",s.call(h,"offset")]}function Kl(s,o,h){return Qa(s,o,h,!0)}function Ql(s,o,h){var g=s.getValue(),y=!["variable","identifier"].includes(g.offset.kind);return["::",y?"{":"",s.call(h,"offset"),y?"}":""]}function $l(s,o,h){var g=s.getValue(),y=g.offset&&g.offset.kind==="number"||ja(s,"encapsed");return["[",g.offset?Pt([Mt([y?"":oe,s.call(h,"offset")]),y?"":oe]):"","]"]}function Zl(s){return s.kind==="array"&&(s.items.length>0||s.comments)||s.kind==="function"||s.kind==="method"||s.kind==="closure"}function SC(s){var o=hs(s),h=mC(s);return!zl(o)&&!Jl(o)&&Zl(o)&&(!h||h.kind!==o.kind)}function DC(s){if(s.length!==2)return!1;var o=v(s,2),h=o[0],g=o[1];return!(h.comments&&h.comments.length||h.kind!=="function"&&h.kind!=="method"&&h.kind!=="closure"||g.kind==="retif"||Zl(g))}function bn(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",y=s.getValue()[g];if(y.length===0)return["(",re.printDanglingComments(s,o,!0),")"];var S=!1,O=!1,T=y.length-1,B=s.map(function(ve,ee){var Ce=ve.getNode(),Ve=[h(ve)];return ee===T||(Ts(o.originalText,Ce,o)?(ee===0&&(O=!0),S=!0,Ve.push(",",Tt,Tt)):Ve.push(",",ke)),Ve},g),R=s.getValue(),P=hs(y),Ht=dr(o,"7.3")&&["call","new","unset","isset"].includes(R.kind)||dr(o,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(R.kind)?Mt([P&&Xl(P)?Tt:"",","]):"";function Vt(){return Pt(["(",Mt([ke].concat(m(B))),Ht,ke,")"],{shouldBreak:!0})}var le=DC(y),_e=SC(y);if(le||_e){var Wt,Te=(le?B.slice(1).some(as):B.slice(0,-1).some(as))||S,te=0;s.each(function(ve){le&&te===0&&(Wt=[ve.call(function(ee){return h(ee,{expandFirstArg:!0})}),B.length>1?",":"",O?Tt:ke,O?Tt:"",B.slice(1)]),_e&&te===y.length-1&&(Wt=[].concat(m(B.slice(0,-1)),[ve.call(function(ee){return h(ee,{expandLastArg:!0})})])),te++},g);var De=B.some(as),Ne=["("].concat(m(Wt),[")"]);return[De?Vl:"",Ws([De?os(Vt(),Ne):Ne,le?["(",Pt(Wt[0],{shouldBreak:!0})].concat(m(Wt.slice(1)),[")"]):["("].concat(m(B.slice(0,-1)),[Pt(hs(Wt),{shouldBreak:!0}),")"]),Pt(["(",Mt([ke].concat(m(B))),os(Ht),ke,")"],{shouldBreak:!0})],{shouldBreak:Te})]}return Pt(["(",Mt([oe].concat(m(B))),os(Ht),oe,")"],{shouldBreak:B.some(as)||S})}function tc(s){return s.kind==="array"&&s.items.length!==0}function mr(s){return s.right.kind==="array"&&s.right.items.length!==0}function ec(s,o,h,g,y){var S=[],O=s.getValue();if(O.kind==="bin"){Gl(O.type,O.left.type)?S=S.concat(s.call(function(Ht){return ec(Ht,o,h,!0,y)},"left")):S.push(s.call(o,"left"));var T=mr(O)?[O.type," ",s.call(o,"right")]:[O.type,ke,s.call(o,"right")],B=s.getParentNode(),R=!(y&&["||","&&"].includes(O.type))&&qs(B)!==qs(O)&&qs(O.left)!==qs(O)&&qs(O.right)!==qs(O),P=Ya(O.left)||O.left.kind==="bin"&&Ya(O.left.right);S.push(P?"":" ",R?Pt(T):T),g&&O.comments&&(S=re.printAllComments(s,function(){return S},h))}else S.push(s.call(o));return S}function ic(s,o,h){var g=s.getValue();switch(g.kind){case"propertylookup":return Qa(s,o,h);case"nullsafepropertylookup":return Kl(s,o,h);case"staticlookup":return Ql(s,0,h);case"offsetlookup":return $l(s,0,h);default:return"Have not implemented lookup kind ".concat(g.kind," yet.")}}function nc(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=o.opening,g=h===void 0||h;if(s.type==="heredoc")return g?"<<<".concat(s.label):s.label;var y={string:'"',shell:"`"};return y[s.type]?y[s.type]:"Unimplemented encapsed type ".concat(s.type)}function NC(s,o,h){var g=[],y=[];return s.each(function(S){g.push(y),g.push(Pt(h(S))),y=[",",ke],S.getValue()&&Ts(o.originalText,S.getValue(),o)&&y.push(oe)},"items"),g}function IC(s,o){if(o.length===0)return s;var h=0;return o.reduce(function(g,y){var S=y.start,O=y.end,T=y.alignment,B=y.before,R=y.after,P=[B||""].concat(m(s.slice(S,O)),[R||""]),Ht=g.concat(s.slice(h,S),T?fC(Pt(cC(new Array(T).join(" "),P))):Pt(P),O===s.length-1?s.slice(O):"");return h=O,Ht},[])}function gr(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",y=s.getValue(),S=s.getParentNode(),O=-1,T=[],B=[];s.map(function(ve,ee){var Ce=ve.getValue(),Ve=Ce.kind==="inline",ln=h(ve),gi=y[g],ut=gi[ee+1],ht=!Wl(ve)&&!Ve&&(ut&&ut.kind==="case"?!za(s):ut&&ut.kind!=="inline"),zt=[ln,ht?Tt:"",ht&&Ts(o.originalText,Ce,o)?Tt:""],jt=ee===0,Rt=gi.length-1===ee,be=y.kind==="block"&&S&&["function","closure","method","try","catch"].includes(S.kind),Fe=be&&jt?"":" ";if(Ve||!Ve&&Rt&&O>=0){var $e=O;if(Ve&&(O=ee),Ve&&!jt||!Ve&&Rt){var _i=(Ve?$e:O)+1,ae=Rt&&!Ve?ee+1:ee,Ye=gi[Ve?$e:O],Li=Ye?yC(Ye.raw):"",ls=ae-_i>1,cs=ls?be&&!Ye||Ja(y)&&_i===0?"":Tt:"",cn=ls&&Ce.kind!=="halt"?be&&Rt?"":Tt:"";ls&&(Fe=""),B.push({start:_i,end:ae,alignment:Li,before:cs,after:cn})}}if(Ve){var en=ut&&ut.kind==="echo"&&ut.shortForm?"<?=":"<?php",ro=Ce.leadingComments&&Ce.leadingComments.length?[jt&&y.kind!=="namespace"&&!be?"<?php":"",y.kind!=="namespace"&&be?"":Tt,re.printComments(Ce.leadingComments,o),Tt,"?>"]:Ja(y)&&jt&&y.kind!=="namespace"?"":[Fe,"?>"],Xn=s.getNode(ee+1),Ys=Xn&&Xn.children&&Xn.children.length;zt=[ro,zt,Ce.comments&&Ce.comments.length?[en,Tt,Ys?re.printComments(Ce.comments,o):"",Tt]:Ja(y)&&Rt?"":[en," "]]}T.push(zt)},g);var R=IC(T,B);if(y.kind==="program"&&!y.extra.parseAsEval){var P=[],Ht=v(y.children,1),Vt=Ht[0],le=!Vt||Vt.kind!=="inline";if(le){var _e=o.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),Wt=[_e&&_e[2]&&_e[2].includes(`
`)?[Tt,_e[2].split(`
`).length>2?Tt:""]:" ",y.comments?re.printComments(y.comments,o):""],Te=Vt&&Vt.kind==="echo"&&Vt.shortForm;P.push([Te?"<?=":"<?php",Wt])}P.push(R);var te=/\?>\n?$/.test(o.originalText);if(te){var De=hs(y.children),Ne=De?[Hl(o.originalText.trimEnd(),o.locEnd(De),o.locEnd(y))?De.kind==="inline"&&De.comments&&De.comments.length?"":Tt:" ",Ts(o.originalText,De,o)?Tt:""]:y.comments?Tt:"";P.push(uC([Ne,"?>"]))}return P}return R}function sc(s,o,h,g){return s.map(function(y){var S=[];return S.push(h(y)),Wl(y)||(S.push(Tt),Ts(o.originalText,y.getValue(),o)&&S.push(Tt)),S},g)}function un(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",y=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",S=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",O=s.getValue(),T=tn(O[g])?[Tt,s.call(function(R){return re.printDanglingComments(R,o,!0)},g),Tt]:y,B=Array.isArray(O[g])?Pt(fi(",",s.map(function(R){var P=h(R);return tn(R.getValue())?[Tt,re.printDanglingComments(R,o,!0),Tt,P]:[S,P]},g))):[S,s.call(h,g)];return Mt([T,g,as(T)?Mt(B):B])}function us(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},y=g.inline,S=y!==void 0&&y,O=[];return s.getValue().attrGroups?(s.each(function(T){var B=["#["];!S&&O.length>0&&O.push(Tt),B.push(oe),T.each(function(R){var P=R.getValue();B.length>2&&B.push(",",ke);var Ht=[P.name];P.args.length>0&&Ht.push(bn(R,o,h,"args")),B.push(Pt(Ht))},"attrs"),O.push(Pt([Mt(B),os(dr(o,"8.0")?",":""),oe,"]",S?os(oe," "):""]))},"attrGroups"),O.length===0?[]:[].concat(O,[S?"":Tt])):[]}function jn(s,o,h){var g=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",y=s.getValue();if(!y[g])return";";var S=s.call(h,g);return[y.shortForm?":":" {",Mt(y[g].kind!=="block"||y[g].children&&y[g].children.length>0||y[g].comments&&y[g].comments.length>0?[vC(s)?y.kind==="switch"?" ":"":Tt,S]:""),y.kind==="if"&&g==="body"?"":[EC(s)?Tt:"",y.shortForm?["end",y.kind,";"]:"}"]]}function Zr(s,o,h,g,y,S,O){if(!g)return o;var T=to(s,g,y,S,O);return Pt([o,h,T])}function rc(s){return!!Ji(s)&&(!(s.what.kind!=="variable"&&!Xa(s.what))||rc(s.what))}function to(s,o,h,g,y){var S=g?"&":"";if(re.hasLeadingOwnLineComment(y.originalText,o,y))return Mt([Tt,S,h]);var O=o.kind==="cast"?o.expr:o;return O.kind==="bin"&&!mr(O)||O.kind==="retif"&&(!O.trueExpr&&!tc(O.falseExpr)||O.test.kind==="bin"&&!mr(O.test))||(s.kind==="variable"||s.kind==="string"||Ji(s))&&(O.kind==="string"&&!oc(O)||rc(O))?Pt(Mt([ke,S,h])):[" ",S,h]}function oc(s){return s.raw.includes(`
`)}function eo(s,o,h){return(s.kind==="string"||s.kind==="encapsed"&&(s.type==="string"||s.type==="shell"))&&oc(s)&&!dC(o,h.locStart(s),{backwards:!0})}function ac(s,o,h){return Pt(s.map(function(g,y){return y===0?[s.call(o)]:[h,s.call(o)]},"types"))}var PC=function(s,o,h){var g=s.getValue();if(!g)return"";if(typeof g=="string")return g;var y=function(T,B,R){var P=T.getValue();switch(P.kind){case"program":return Pt([gr(T,B,R),re.printDanglingComments(T,B,!0,function(gt){return!gt.printed})]);case"expressionstatement":return T.call(R,"expression");case"block":return[gr(T,B,R),re.printDanglingComments(T,B,!0)];case"declare":var Ht=function(gt){return fi(", ",gt.map(function(Qt){return R(Qt)},"directives"))};if(["block","short"].includes(P.mode))return["declare(",Ht(T),")",P.mode==="block"?" {":":",P.children.length>0?Mt([Tt,gr(T,B,R)]):"",re.printDanglingComments(T,B),Tt,P.mode==="block"?"}":"enddeclare;"];var Vt=CC(T,P);return["declare(",Ht(T),")",Vt&&Vt.kind==="inline"?"":";"];case"declaredirective":return[T.call(R,"key"),"=",T.call(R,"value")];case"namespace":return["namespace ",P.name&&typeof P.name=="string"?[P.name,P.withBrackets?" ":""]:"",P.withBrackets?"{":";",tn(P)?[" ",re.printDanglingComments(T,B,!0)]:"",P.children.length>0?P.withBrackets?Mt([Tt,gr(T,B,R)]):[P.children[0].kind==="inline"?"":[Tt,TC(B.originalText,P,B.locStart)?Tt:""],gr(T,B,R)]:"",P.withBrackets?[Tt,"}"]:""];case"usegroup":return Pt(["use ",P.type?[P.type," "]:"",Mt([P.name?[ql(P.name),"\\{",oe]:"",fi([",",ke],T.map(function(gt){return R(gt)},"items"))]),P.name?[os(dr(B,"7.2")?",":""),oe,"}"]:""]);case"useitem":return[P.type?[P.type," "]:"",ql(P.name),tn(P)?[" ",re.printDanglingComments(T,B,!0)]:"",P.alias?[" as ",T.call(R,"alias")]:""];case"class":case"enum":case"interface":case"trait":return function(gt,Qt,fe){var kt=gt.getValue(),Fi=kt.kind==="class"&&kt.isAnonymous,ri=us(gt,Qt,fe,{inline:Fi}),pi=Fi?[]:m(ri);kt.isReadonly&&pi.push("readonly "),kt.isFinal&&pi.push("final "),kt.isAbstract&&pi.push("abstract "),pi.push(Fi?"":kt.kind),kt.name&&pi.push(" ",gt.call(fe,"name")),kt.kind==="enum"&&kt.valueType&&pi.push(": ",gt.call(fe,"valueType")),kt.extends&&kt.implements?pi.push(Ws([[un(gt,Qt,fe,"extends"),un(gt,Qt,fe,"implements")],[un(gt,Qt,fe,"extends"),un(gt,Qt,fe,"implements"," ",Tt)],[un(gt,Qt,fe,"extends",Tt," "),un(gt,Qt,fe,"implements",Tt,kt.implements.length>1?Tt:" ")]],{shouldBreak:tn(kt.extends)})):(kt.extends&&pi.push(Ws([un(gt,Qt,fe,"extends"),un(gt,Qt,fe,"extends"," ",Tt),un(gt,Qt,fe,"extends",Tt,kt.extends.length>1?Tt:" ")])),kt.implements&&pi.push(Ws([un(gt,Qt,fe,"implements"),un(gt,Qt,fe,"implements"," ",Tt),un(gt,Qt,fe,"implements",Tt,kt.implements.length>1?Tt:" ")])));var nn=Pt([Pt(pi),Ka(Qt)?Fi?ke:Tt:" "]),Me=kt.body&&kt.body.length===0&&!tn(kt),Ni=["{",Mt([Me?"":Tt,sc(gt,Qt,fe,"body")]),re.printDanglingComments(gt,Qt,!0),Fi&&Me?oe:Tt,"}"];return[nn,Ni]}(T,B,R);case"traitprecedence":return[T.call(R,"trait"),"::",T.call(R,"method")," insteadof ",fi(", ",T.map(R,"instead"))];case"traitalias":return[P.trait?[T.call(R,"trait"),"::"]:"",P.method?T.call(R,"method"):""," as ",fi(" ",[].concat(m(P.visibility?[P.visibility]:[]),m(P.as?[T.call(R,"as")]:[])))];case"traituse":return Pt(["use ",Mt(Pt(fi([",",ke],T.map(R,"traits")))),P.adaptations?[" {",P.adaptations.length>0?[Mt([Tt,sc(T,B,R,"adaptations")]),Tt]:tn(P)?[ke,re.printDanglingComments(T,B,!0),ke]:"","}"]:""]);case"function":case"closure":case"method":return function(gt,Qt,fe){var kt=gt.getValue(),Fi=us(gt,Qt,fe,{inline:kt.kind==="closure"}),ri=[];kt.isFinal&&ri.push("final "),kt.isAbstract&&ri.push("abstract "),kt.visibility&&ri.push(kt.visibility," "),kt.isStatic&&ri.push("static "),ri.push("function "),kt.byref&&ri.push("&"),kt.name&&ri.push(gt.call(fe,"name")),ri.push(bn(gt,Qt,fe)),kt.uses&&kt.uses.length>0&&ri.push(Pt([" use ",bn(gt,Qt,fe,"uses")])),kt.type&&ri.push([": ",tn(kt.type)?[gt.call(function(Ni){return re.printDanglingComments(Ni,Qt,!0)},"type")," "]:"",kt.nullable?"?":"",gt.call(fe,"type")]);var pi=ri;if(!kt.body)return[].concat(m(Fi),[pi]);var nn=kt.kind==="closure",Me=["{",Mt([jl(gt)?"":Tt,gt.call(fe,"body")]),nn&&jl(gt)?"":Tt,"}"];return nn?[].concat(m(Fi),[pi," ",Me]):kt.arguments.length===0?[].concat(m(Fi),[pi,Ka(Qt)?Tt:" ",Me]):ri.some(as)?[pi," ",Me]:[].concat(m(Fi),[Ws([[pi,Ka(Qt)?Tt:" ",Me],[pi," ",Me]])])}(T,B,R);case"arrowfunc":return[P.parenthesizedExpression?"(":""].concat(m(us(T,B,R,{inline:!0})),[P.isStatic?"static ":"","fn",bn(T,B,R),P.type?[": ",P.nullable?"?":"",T.call(R,"type")]:""," => ",T.call(R,"body"),P.parenthesizedExpression?")":""]);case"parameter":var le="";P.flags===1?le="public ":P.flags===2?le="protected ":P.flags===4&&(le="private ");var _e=[].concat(m(us(T,B,R,{inline:!0})),[le,P.readonly?"readonly ":"",P.nullable?"?":"",P.type?[T.call(R,"type")," "]:"",P.byref?"&":"",P.variadic?"...":"","$",T.call(R,"name")]);return P.value?Pt([_e,tn(P)?" ":"",re.printDanglingComments(T,B,!0)," =",to(P.name,P.value,T.call(R,"value"),!1,B)]):_e;case"variadic":return["...",T.call(R,"what")];case"property":return Pt([P.readonly?"readonly ":"",P.type?[P.nullable?"?":"",T.call(R,"type")," "]:"","$",T.call(R,"name"),P.value?[" =",to(P.name,P.value,T.call(R,"value"),!1,B)]:""]);case"propertystatement":var Wt=[];T.map(function(gt){return Wt.push.apply(Wt,m(us(gt,B,R)))},"properties");var Te,te=T.map(function(gt){return R(gt)},"properties"),De=P.properties.some(function(gt){return gt.value});te.length!==1||P.properties[0].comments?te.length>0&&(Te=Mt(te[0])):Te=v(te,1)[0];var Ne=P.visibility||P.visibility===null;return Pt([].concat(Wt,[Ne?[P.visibility===null?"var":P.visibility,""]:"",P.isStatic?[Ne?" ":"","static"]:"",Te?[" ",Te]:"",Mt(te.slice(1).map(function(gt){return[",",De?Tt:ke,gt]}))]));case"if":var ve=[],ee=jn(T,B,R,"body"),Ce=Pt(["if (",Pt([Mt([oe,T.call(R,"test")]),oe]),")",ee]);if(ve.push(Ce,za(T)||!P.body?"":Tt),P.alternate){ve.push(P.shortForm?"":"} ");var Ve=Jl(P.body)&&P.body.comments.some(function(gt){return gt.trailing&&!re.isBlockComment(gt)})||function(gt){if(!gt.comments)return!1;var Qt=hs(gt.comments.filter(function(fe){return!fe.leading&&!fe.trailing}));return Qt&&!re.isBlockComment(Qt)}(P),ln=!Ve;ve.push(ln?"":Tt),tn(P)&&ve.push(Ts(B.originalText,P.body,B)?Tt:"",re.printDanglingComments(T,B,!0),Ve?Tt:" "),ve.push("else",Pt(P.alternate.kind==="if"?T.call(R,"alternate"):jn(T,B,R,"alternate")))}else ve.push(P.body?P.shortForm?"endif;":"}":"");return ve;case"do":return["do",jn(T,B,R,"body")," while (",Pt([Mt([oe,T.call(R,"test")]),oe]),")"];case"while":case"switch":return Pt([P.kind," (",Pt([Mt([oe,T.call(R,"test")]),oe]),")",jn(T,B,R,"body")]);case"for":var gi=jn(T,B,R,"body"),ut=re.printDanglingComments(T,B,!0),ht=ut?[ut,oe]:"";return P.init.length||P.test.length||P.increment.length?[ht,Pt(["for (",Pt([Mt([oe,Pt(fi([",",ke],T.map(R,"init"))),";",ke,Pt(fi([",",ke],T.map(R,"test"))),";",ke,Pt(fi([",",ke],T.map(R,"increment")))]),oe]),")",gi])]:[ht,Pt(["for (;;)",gi])];case"foreach":var zt=jn(T,B,R,"body"),jt=re.printDanglingComments(T,B,!0);return[jt?[jt,oe]:"",Pt(["foreach (",Pt([Mt([oe,T.call(R,"source"),ke,"as ",Pt(P.key?Mt(fi([" =>",ke],[T.call(R,"key"),T.call(R,"value")])):T.call(R,"value"))]),oe]),")",zt])];case"try":var Rt=[];return Rt.push("try",jn(T,B,R,"body")),P.catches&&Rt.push(T.map(R,"catches")),P.always&&Rt.push(" finally",jn(T,B,R,"always")),Rt;case"catch":return[" catch",P.what?[" (",fi(" | ",T.map(R,"what")),P.variable?[" ",T.call(R,"variable")]:"",")"]:"",jn(T,B,R,"body")];case"case":return[P.test?["case ",P.test.comments?Mt(T.call(R,"test")):T.call(R,"test"),":"]:"default:",P.body&&P.body.children&&P.body.children.length?Mt([za(T)?"":Tt,T.call(R,"body")]):""];case"break":case"continue":return P.level&&P.level.kind==="number"&&P.level.value!=="1"?["".concat(P.kind," "),T.call(R,"level")]:P.kind;case"call":return P.arguments.length===1&&eo(P.arguments[0],B.originalText,B)?[T.call(R,"what"),"(",fi(", ",T.map(R,"arguments")),")"]:Ji(P.what)?function(gt,Qt,fe){var kt=[];function Fi(ue){var Ze=Qt.originalText,di=bC(Ze,ue,Qt);return Ze.charAt(di)===")"?pC(Ze,di+1,Qt):Ts(Ze,ue,Qt)}function ri(ue){var Ze=ue.getValue();if(Ze.kind!=="call"||!Ji(Ze.what)&&Ze.what.kind!=="call")if(Ji(Ze)){var di=null;di=Ze.kind==="propertylookup"?Qa(ue,Qt,fe):Ze.kind==="nullsafepropertylookup"?Kl(ue,Qt,fe):Ze.kind==="staticlookup"?Ql(ue,Qt,fe):$l(ue,Qt,fe),kt.unshift({node:Ze,needsParens:Ul(ue),printed:re.printAllComments(ue,function(){return di},Qt)}),ue.call(function(vr){return ri(vr)},"what")}else kt.unshift({node:Ze,printed:ue.call(fe)});else kt.unshift({node:Ze,printed:[re.printAllComments(ue,function(){return bn(ue,Qt,fe)},Qt),Fi(Ze)?Tt:""]}),ue.call(function(vr){return ri(vr)},"what")}var pi=gt.getValue();kt.unshift({node:pi,printed:bn(gt,Qt,fe)}),gt.call(function(ue){return ri(ue)},"what");for(var nn=0;nn<kt.length;++nn)kt[nn].node.kind==="call"&&kt[nn-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(kt[nn-1].node.kind)&&kt[nn-1].needsParens&&(kt[0].printed=["(",kt[0].printed],kt[nn-1].printed=[kt[nn-1].printed,")"]);for(var Me=[],Ni=[kt[0]],je=1;je<kt.length&&(kt[je].node.kind==="call"||Ji(kt[je].node)&&kt[je].node.offset&&kt[je].node.offset.kind==="number");++je)Ni.push(kt[je]);if(kt[0].node.kind!=="call")for(;je+1<kt.length&&Ji(kt[je].node)&&Ji(kt[je+1].node);++je)Ni.push(kt[je]);Me.push(Ni),Ni=[];for(var mo=!1;je<kt.length;++je){if(mo&&Ji(kt[je].node)){if(kt[je].node.kind==="offsetlookup"&&kt[je].node.offset&&kt[je].node.offset.kind==="number"){Ni.push(kt[je]);continue}Me.push(Ni),Ni=[],mo=!1}kt[je].node.kind==="call"&&(mo=!0),Ni.push(kt[je]),kt[je].node.comments&&re.hasTrailingComment(kt[je].node)&&(Me.push(Ni),Ni=[],mo=!1)}Ni.length>0&&Me.push(Ni);function IA(ue){var Ze=ue[1].length&&ue[1][0].node.kind==="offsetlookup";if(ue[0].length===1){var di=ue[0][0].node;return di.kind==="variable"&&(di.name==="this"||PA&&vr(di.name))||Xa(di)}function vr(FA){return FA.length<Qt.tabWidth}var oh=hs(ue[0]).node;return Ji(oh)&&(oh.offset.kind==="identifier"||oh.offset.kind==="variable")&&Ze}var PA=gt.getParentNode().kind==="expressionstatement",go=Me.length>=2&&!Me[1][0].node.comments&&IA(Me);function _o(ue){for(var Ze=[],di=0;di<ue.length;di++)ue[di+1]&&ue[di+1].needsParens?(Ze.push("(",ue[di].printed,ue[di+1].printed,")"),di++):Ze.push(ue[di].printed);return Ze}function OA(ue){return ue.length===0?"":Mt(Pt([Tt,fi(Tt,ue.map(_o))]))}var jc=Me.map(_o),rh=jc,xo=go?3:2,Xc=Me.slice(0,xo).flat(),Kc=Xc.slice(1,-1).some(function(ue){return re.hasLeadingComment(ue.node)})||Xc.slice(0,-1).some(function(ue){return re.hasTrailingComment(ue.node)})||Me[xo]&&re.hasLeadingComment(Me[xo][0].node),wA=ja(gt,"encapsed");if(Me.length<=xo&&!Kc||wA)return Pt(rh);var Qc=hs(go?Me.slice(1,2)[0]:Me[0]).node,$c=Qc.kind!=="call"&&Fi(Qc),Zc=[_o(Me[0]),go?Me.slice(1,2).map(_o):"",$c?Tt:"",OA(Me.slice(go?2:1))],LA=kt.filter(function(ue){return ue.node.kind==="call"}).length;return Kc||LA>=3||jc.slice(0,-1).some(as)?Pt(Zc):[as(rh)||$c?Vl:"",Ws([rh,Zc])]}(T,B,R):[T.call(R,"what"),bn(T,B,R)];case"new":var be=P.what&&P.what.kind==="class"&&P.what.isAnonymous;if(!be&&P.arguments.length===1&&eo(P.arguments[0],B.originalText,B))return["new "].concat(m(T.call(us,"what")),[T.call(R,"what"),"(",fi(", ",T.map(R,"arguments")),")"]);var Fe=[];if(Fe.push("new "),be)Fe.push.apply(Fe,[P.what.leadingComments&&P.what.leadingComments[0].kind==="commentblock"?[re.printComments(P.what.leadingComments,B)," "]:""].concat(m(T.call(function(gt){return us(gt,B,R,{inline:!0})},"what")),["class",P.arguments.length>0?[" ",bn(T,B,R)]:"",Pt(T.call(R,"what"))]));else{var $e=["call","offsetlookup"].includes(P.what.kind),_i=[$e?"(":"",T.call(R,"what"),$e?")":"",bn(T,B,R)];Fe.push(zl(P.what)?Mt(_i):_i)}return Fe;case"clone":return["clone ",P.what.comments?Mt(T.call(R,"what")):T.call(R,"what")];case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var ae,Ye=T.getParentNode(),Li=0;do ae=T.getParentNode(Li),Li++;while(ae&&Ji(ae));var ls=ja(T,"encapsed")||ae&&(ae.kind==="new"||ae.kind==="assign"&&ae.left.kind!=="variable")||P.kind==="offsetlookup"||(Xa(P.what)||P.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(P.offset.kind)&&Ye&&!Ji(Ye);return[T.call(R,"what"),ls?ic(T,B,R):Pt(Mt([oe,ic(T,B,R)]))];case"exit":return Pt([P.useDie?"die":"exit","(",P.expression?eo(P.expression,B.originalText,B)?T.call(R,"expression"):[Mt([oe,T.call(R,"expression")]),oe]:re.printDanglingComments(T,B),")"]);case"global":return Pt(["global ",Mt(fi([",",ke],T.map(R,"items")))]);case"include":return[P.require?"require":"include",P.once?"_once":""," ",P.target.comments?Mt(T.call(R,"target")):T.call(R,"target")];case"label":return[T.call(R,"name"),":"];case"goto":return["goto ",T.call(R,"label")];case"throw":return["throw ",P.what.comments?Mt(T.call(R,"what")):T.call(R,"what")];case"silent":return["@",T.call(R,"expr")];case"halt":return[tn(P)?[re.printDanglingComments(T,B,!0),Tt]:"","__halt_compiler();",P.after];case"eval":return Pt(["eval(",eo(P.source,B.originalText,B)?T.call(R,"source"):[Mt([oe,T.call(R,"source")]),oe],")"]);case"echo":var cs,cn=T.map(function(gt){return R(gt)},"expressions");return cn.length!==1||P.expressions[0].comments?cn.length>0&&(cs=Ya(P.expressions[0])||P.expressions[0].comments?Mt(cn[0]):lC(cn[0])):cs=v(cn,1)[0],Pt([P.shortForm?"":"echo ",cs||"",Mt(cn.slice(1).map(function(gt){return[",",ke,gt]}))]);case"print":return["print ",P.expression.comments?Mt(T.call(R,"expression")):T.call(R,"expression")];case"return":var en=[];if(en.push("return"),P.expr){var ro=T.call(R,"expr");en.push(" ",P.expr.comments?Mt(ro):ro)}return tn(P)&&en.push(" ",re.printDanglingComments(T,B,!0)),en;case"isset":case"unset":return Pt([P.kind,bn(T,B,R,"variables")]);case"empty":return Pt(["empty(",Mt([oe,T.call(R,"expression")]),oe,")"]);case"variable":var Xn=T.getParentNode(),Ys=T.getParentNode(1),cA=Xn.kind==="assign"?"":P.byref?"&":"",fA=Xn.kind==="encapsedpart"&&Xn.syntax==="simple"&&Xn.curly||Ys&&Xn.kind==="offsetlookup"&&Ys.kind==="encapsedpart"&&Ys.syntax==="simple"&&Ys.curly?"":"$",pA=P.curly?"{":"",dA=P.curly?"}":"";return[cA,fA,pA,T.call(R,"name"),dA];case"constantstatement":case"classconstant":var oo,mA=us(T,B,R),_r=T.map(function(gt){return R(gt)},"constants");return _r.length!==1||P.constants[0].comments?_r.length>0&&(oo=Mt(_r[0])):oo=v(_r,1)[0],Pt([].concat(m(mA),[P.visibility?[P.visibility," "]:"","const",oo?[" ",oo]:"",Mt(_r.slice(1).map(function(gt){return[",",Tt,gt]}))]));case"constant":return Zr(P.name,T.call(R,"name")," =",P.value,T.call(R,"value"),!1,B);case"static":var ao,xr=T.map(function(gt){return R(gt)},"variables"),gA=P.variables.some(function(gt){return gt.defaultValue});return xr.length!==1||P.variables[0].comments?xr.length>0&&(ao=Mt(xr[0])):ao=v(xr,1)[0],Pt(["static",ao?[" ",ao]:"",Mt(xr.slice(1).map(function(gt){return[",",gA?Tt:ke,gt]}))]);case"staticvariable":return Zr(P.variable,T.call(R,"variable")," =",P.defaultValue,T.call(R,"defaultValue"),!1,B);case"list":case"array":var Oc=P.kind==="array"&&zs(B.phpVersion,"5.4")||P.kind==="list"&&(P.shortForm||zs(B.phpVersion,"7.1")),th=Oc?"[":[P.kind,"("],eh=Oc?"]":")";if(P.items.length===0)return tn(P)?Pt([th,re.printDanglingComments(T,B),oe,eh]):[th,eh];var ho=hs(P.items),wc=ho&&ho.kind==="noop",uo=v(P.items.filter(function(gt){return gt.kind!=="noop"}).sort(function(gt,Qt){return B.locStart(gt)-B.locStart(Qt)}),1)[0],_A=!(!uo||!uo.key)&&uo&&Hl(B.originalText,B.locStart(P),B.locStart(uo));return Pt([th,Mt([oe,NC(T,B,R)]),wc?",":"",os(!wc&&dr(B,"5.0")?[ho&&Xl(ho)?Tt:"",","]:""),re.printDanglingComments(T,B,!0),oe,eh],{shouldBreak:_A});case"entry":var Lc=P.byRef?"&":"",xA=P.unpack?"...":"";return P.key?Zr(P.key,T.call(R,"key")," =>",P.value,T.call(R,"value"),Lc,B):[Lc,xA,T.call(R,"value")];case"yield":var Fc=[P.key?[T.call(R,"key")," => "]:"",T.call(R,"value")];return["yield",P.key||P.value?" ":"",P.value&&P.value.comments?Mt(Fc):Fc];case"yieldfrom":return["yield from ",P.value.comments?Mt(T.call(R,"value")):T.call(R,"value")];case"unary":return[P.type,T.call(R,"what")];case"pre":return[P.type+P.type,T.call(R,"what")];case"post":return[T.call(R,"what"),P.type+P.type];case"cast":return["(",P.type,") ",P.expr.comments?Mt(T.call(R,"expr")):T.call(R,"expr")];case"assignref":case"assign":var Rc=P.kind==="assignref";return Zr(P.left,T.call(R,"left"),[" ",Rc?"=":P.operator],P.right,T.call(R,"right"),Rc,B);case"bin":var fn=T.getParentNode(),Bc=T.getParentNode(1),Mc=P!==fn.body&&(fn.kind==="if"||fn.kind==="while"||fn.kind==="switch"||fn.kind==="do"),js=ec(T,R,B,!1,Mc);if(Mc)return js;if(fn.kind==="unary"||Ji(fn)&&fn.kind!=="offsetlookup")return Pt([Mt([oe].concat(m(js))),oe]);var vA=P!==fn.body&&fn.kind==="for"||fn.kind==="retif"&&Bc&&Bc.kind!=="return",EA=["assign","property","constant","staticvariable","entry"].includes(fn.kind),yA=P.left.kind==="bin"&&Gl(P.type,P.left.type);if(vA||mr(P)&&!yA||!mr(P)&&EA)return Pt(js);var kA=js.slice(1);return Pt([js.length>0?js[0]:"",Mt(kA)]);case"retif":var lo,co=[],fo=T.getParentNode(),Uc=0;do lo=T.getParentNode(Uc),Uc++;while(lo&&lo.kind==="retif");var Vc=lo||fo,Hc=P.falseExpr.kind==="bin"?Mt(T.call(R,"falseExpr")):T.call(R,"falseExpr"),TA=[P.trueExpr?ke:" ","?",P.trueExpr?[" ",P.trueExpr.kind==="bin"?Mt(T.call(R,"trueExpr")):T.call(R,"trueExpr"),ke]:"",":",P.trueExpr?[" ",Hc]:[tc(P.falseExpr)?" ":ke,Hc]];co.push(TA);var Wc=function(gt){return fo===Vc?Pt(gt):gt},Gc=T.getParentNode(1),Cs=fo.kind==="cast"&&Gc?Gc:fo,CA=["propertylookup","nullsafepropertylookup","staticlookup"].includes(Cs.kind),ih=T.call(R,"test");if(!P.trueExpr){var qc=[ih,Cs.kind==="bin"||["print","echo","return","include"].includes(Vc.kind)?Mt(co):co];return Cs.kind==="call"&&Cs.what===P||Cs.kind==="unary"||Ji(Cs)&&Cs.kind!=="offsetlookup"?Pt([Mt([oe,qc]),oe]):Wc(qc)}return Wc([P.test.kind==="retif"?Mt(ih):ih,Mt(co),CA?oe:""]);case"boolean":return P.value?"true":"false";case"number":return _C(P.value);case"string":if(T.getParentNode().kind==="encapsedpart"){var zc=T.getParentNode(1),nh=0,AA=zs(B.phpVersion,"7.3"),Jc=Gs;if(zc.type==="heredoc"){Jc=AA?Tt:Gs;var po=zc.raw.split(`
`);(nh=po[po.length-1].search(/\S/))===-1&&(nh=po[po.length-2].search(/\S/))}return fi(Jc,P.raw.split(`
`).map(function(gt,Qt){return Qt>0||P.loc.start.column===0?gt.substring(nh):gt}))}var Yc=kC(P,B)?'"':"'",En=P.raw;return P.raw[0]==="b"&&(En=En.slice(1)),['"',"'"].includes(En[0])&&(En=En.substr(1)),['"',"'"].includes(En[En.length-1])&&(En=En.substr(0,En.length-1)),[P.raw[0]==="b"?"b":"",Yc,fi(Gs,En.split(`
`)),Yc];case"intersectiontype":return ac(T,R,"&");case"uniontype":return ac(T,R,"|");case"encapsedpart":var bA=P.syntax==="simple"&&P.curly||P.syntax==="complex"?[P.curly?"$":"","{"]:"",SA=P.syntax==="simple"&&P.curly||P.syntax==="complex"?"}":"";return[bA,T.call(R,"expression"),SA];case"encapsed":switch(P.type){case"string":case"shell":case"heredoc":var DA=zs(B.phpVersion,"7.3")?Tt:Gs;return[nc(P),P.type==="heredoc"?DA:""].concat(m(T.map(R,"value")),[nc(P,{opening:!1}),P.type==="heredoc"&&Yl(T)?Tt:""]);default:return"Have not implemented kind ".concat(P.type," yet.")}case"inline":return fi(Gs,P.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(`
`));case"magic":return P.value;case"nowdoc":var sh=zs(B.phpVersion,"7.3")?Tt:Gs;return["<<<'",P.label,"'",sh,fi(sh,P.value.split(`
`)),sh,P.label,Yl(T)?Tt:""];case"name":return[P.resolution==="rn"?"namespace\\":"",P.name];case"literal":return T.call(R,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return P.name;case"nullkeyword":return"null";case"identifier":return T.getParentNode().kind==="method"&&(P.name=AC(P.name)),T.call(R,"name");case"match":var NA=T.map(function(gt,Qt){var fe=gt.getValue().conds===null?"default":gt.map(function(Fi,ri){return[",",ke,R(Fi)].slice(ri===0?2:0)},"conds"),kt=gt.call(R,"body");return[",",Tt,Pt([Pt([fe,Mt(ke)]),"=> ",kt])].slice(Qt>0?0:1)},"arms");return Pt(["match (",Pt([oe,Mt(T.call(R,"cond")),oe]),") {",Pt(Mt([].concat(m(NA),[B.trailingCommaPHP?os(","):""])))," ",oe,"}"]);case"noop":return P.comments?re.printComments(T.getValue().comments,B):"";case"namedargument":return[P.name,": ",T.call(R,"value")];case"enumcase":return Pt(["case ",T.call(R,"name"),P.value?[" =",to(P.name,P.value,T.call(R,"value"),!1,B)]:""]);case"variadicplaceholder":return"...";default:return"Have not implemented kind ".concat(P.kind," yet.")}}(s,o,h),S=[],O=Ul(s);return O&&S.unshift("("),S.push(y),O&&S.push(")"),gC(s)&&S.push(";"),xC(s)&&S.push(Tt),S},OC=new Set(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"]);function hc(s,o){if(s.kind==="string"&&delete o.isDoubleQuote,["array","list"].includes(s.kind)&&delete o.shortForm,s.kind==="inline"){if(s.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;o.value=o.value.replace(/\n/g,"")}if((s.kind==="continue"||s.kind==="break")&&s.level){var h=o.level;h.kind==="number"&&(o.level=h.value==="1"?null:h)}if(s.kind==="block"&&s.children.length===1&&s.children[0].kind==="block")for(;o.children[0].kind==="block";)o.children=o.children[0].children;if(s.kind==="number"&&(o.value=he.printNumber(s.value)),["foreach","for","if","while","do"].includes(s.kind)&&(s.body&&s.body.kind!=="block"?o.body={kind:"block",children:[o.body]}:o.body=o.body?o.body:null,s.alternate&&s.alternate.kind!=="block"?o.alternate={kind:"block",children:[o.alternate]}:o.alternate=o.alternate?o.alternate:null),s.kind==="usegroup"&&typeof s.name=="string"&&(o.name=o.name.replace(/^\\/,"")),s.kind==="useitem"&&(o.name=o.name.replace(/^\\/,"")),s.kind==="method"&&s.name.kind==="identifier"&&(o.name.name=he.normalizeMagicMethodName(o.name.name)),s.kind==="noop")return null}hc.ignoredProperties=OC;var wC=hc,$a="PHP",LC={phpVersion:{since:"0.13.0",category:$a,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"}]},trailingCommaPHP:{since:"0.0.0",category:$a,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:$a,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},FC=function(s,o,h,g){if(h!=="length"&&h!=="prototype"&&h!=="arguments"&&h!=="caller"){var y=Object.getOwnPropertyDescriptor(s,h),S=Object.getOwnPropertyDescriptor(o,h);!RC(y,S)&&g||Object.defineProperty(s,h,S)}},RC=function(s,o){return s===void 0||s.configurable||s.writable===o.writable&&s.enumerable===o.enumerable&&s.configurable===o.configurable&&(s.writable||s.value===o.value)},BC=function(s,o){var h=Object.getPrototypeOf(o);h!==Object.getPrototypeOf(s)&&Object.setPrototypeOf(s,h)},MC=function(s,o){return"/* Wrapped ".concat(s,`*/
`).concat(o)},UC=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),VC=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),HC=function(s,o,h){var g=h===""?"":"with ".concat(h.trim(),"() "),y=MC.bind(null,g,o.toString());Object.defineProperty(y,"name",VC),Object.defineProperty(s,"toString",a(a({},UC),{},{value:y}))},WC=function(s,o){var h,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},y=g.ignoreNonConfigurable,S=y!==void 0&&y,O=s.name,T=u(Reflect.ownKeys(o));try{for(T.s();!(h=T.n()).done;){var B=h.value;FC(s,o,B,S)}}catch(R){T.e(R)}finally{T.f()}return BC(s,o),HC(s,o,O),s},io=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uc(s){return s&&s.default||s}var no,GC=function(){var s={};return s.promise=new Promise(function(o,h){s.resolve=o,s.reject=h}),s},lc=function(s,o){return s(o={exports:{}},o.exports),o.exports}(function(s,o){var h=io&&io.__awaiter||function(O,T,B,R){return new(B||(B=Promise))(function(P,Ht){function Vt(Wt){try{_e(R.next(Wt))}catch(Te){Ht(Te)}}function le(Wt){try{_e(R.throw(Wt))}catch(Te){Ht(Te)}}function _e(Wt){Wt.done?P(Wt.value):new B(function(Te){Te(Wt.value)}).then(Vt,le)}_e((R=R.apply(O,T||[])).next())})},g=io&&io.__importDefault||function(O){return O&&O.__esModule?O:{default:O}};Object.defineProperty(o,"__esModule",{value:!0});var y=g(GC);function S(O){var T,B,R,P=this,Ht=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",Vt=function(){return h(P,void 0,void 0,l().mark(function Wt(){var Te,te,De,Ne,ve=this;return l().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(T===void 0){ee.next=2;break}return ee.abrupt("return");case 2:Te=function(Ce){return h(ve,void 0,void 0,l().mark(function Ve(){var ln;return l().wrap(function(gi){for(;;)switch(gi.prev=gi.next){case 0:if(R=y.default(),!((ln=Ce[1][Ht]-Date.now())<=0)){gi.next=6;break}return O.delete(Ce[0]),R.resolve(),gi.abrupt("return");case 6:return T=Ce[0],typeof(B=setTimeout(function(){O.delete(Ce[0]),R&&R.resolve()},ln)).unref=="function"&&B.unref(),gi.abrupt("return",R.promise);case 10:case"end":return gi.stop()}},Ve)}))},ee.prev=3,te=u(O),ee.prev=5,te.s();case 7:if((De=te.n()).done){ee.next=13;break}return Ne=De.value,ee.next=11,Te(Ne);case 11:ee.next=7;break;case 13:ee.next=18;break;case 15:ee.prev=15,ee.t0=ee.catch(5),te.e(ee.t0);case 18:return ee.prev=18,te.f(),ee.finish(18);case 21:ee.next=25;break;case 23:ee.prev=23,ee.t1=ee.catch(3);case 25:T=void 0;case 26:case"end":return ee.stop()}},Wt,null,[[3,23],[5,15,18,21]])}))},le=function(){T=void 0,B!==void 0&&(clearTimeout(B),B=void 0),R!==void 0&&(R.reject(void 0),R=void 0)},_e=O.set.bind(O);return O.set=function(Wt,Te){O.has(Wt)&&O.delete(Wt);var te=_e(Wt,Te);return T&&T===Wt&&le(),Vt(),te},Vt(),O}o.default=S,s.exports=S,s.exports.default=S});(no=lc)&&no.__esModule&&Object.prototype.hasOwnProperty.call(no,"default")&&no.default;var qC=lc,Za=new WeakMap,cc=new WeakMap,so=function(s){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=o.cacheKey,g=o.cache,y=g===void 0?new Map:g,S=o.maxAge;typeof S=="number"&&qC(y);var O=function(){for(var T=arguments.length,B=new Array(T),R=0;R<T;R++)B[R]=arguments[R];var P=h?h(B):B[0],Ht=y.get(P);if(Ht)return Ht.data;var Vt=s.apply(this,B);return y.set(P,{data:Vt,maxAge:S?Date.now()+S:Number.POSITIVE_INFINITY}),Vt};return WC(O,s,{ignoreNonConfigurable:!0}),cc.set(O,y),O};so.decorator=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(o,h,g){var y=o[h];if(typeof y!="function")throw new TypeError("The decorated value must be a function");delete g.value,delete g.writable,g.get=function(){if(!Za.has(this)){var S=so(y,s);return Za.set(this,S),S}return Za.get(this)}}},so.clear=function(s){var o=cc.get(s);if(!o)throw new TypeError("Can't clear a function that was not memoized!");if(typeof o.clear!="function")throw new TypeError("The cache Map can't be cleared!");o.clear()};var fc=/@prettier|@format/,pc=so(function(s){var o=yl(s),h=v(o.children,1)[0],g=v(o.comments.filter(function(y){return y.kind==="commentblock"}),1)[0];if(h&&g&&g.loc.start.line<h.loc.start.line)return g}),zC=function(s){if(!fc.test(s))return!1;var o=pc(s);if(o){var h=o.value;return fc.test(h)}return!1},JC=function(s){var o=pc(s);if(o){var h=o.loc,g=h.start.offset,y=h.end.offset,S=s.substring(0,g),O=s.substring(y);return"".concat(S).concat(function(Ht){var Vt=Ht.split(`
`);if(Vt.length===1){var le=v(/\/*\*\*(.*)\*\//.exec(Vt[0]),2)[1];Vt=["/**"," * ".concat(le.trim())," */"]}var _e=Vt.findIndex(function(Wt){return/@\S/.test(Wt)})||1;return Vt.splice(_e,0," * @format"),Vt.join(`
`)}(o.value)).concat(O)}var T="<?php";if(!s.startsWith(T))return s;var B=T.length,R=s.substring(0,B),P=s.substring(B);return"".concat(R,`
/** 
 * @format 
 */
`).concat(P)},dc="programming",mc="text.html.php",gc="application/x-httpd-php",_c="#4F5D95",xc=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],vc=[".php",".php_cs",".php_cs.dist","Phakefile"],Ec=["php"],yc=["inc"],YC={name:"PHP",type:dc,tmScope:mc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:gc,color:_c,extensions:xc,filenames:vc,interpreters:Ec,aliases:yc,languageId:272},jC=Object.freeze({__proto__:null,name:"PHP",type:dc,tmScope:mc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:gc,color:_c,extensions:xc,filenames:vc,interpreters:Ec,aliases:yc,languageId:272,default:YC}),kc="HTML+PHP",Tc="markup",Cc="#4f5d95",Ac="text.html.php",bc="HTML",Sc=[".phtml"],Dc="application/x-httpd-php",XC={name:kc,type:Tc,color:Cc,tmScope:Ac,group:bc,extensions:Sc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Dc,languageId:151},KC=Object.freeze({__proto__:null,name:kc,type:Tc,color:Cc,tmScope:Ac,group:bc,extensions:Sc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Dc,languageId:151,default:XC}),QC=uc(jC),$C=uc(KC),Nc=n.default.doc.builders,ZC=Nc.join,tA=Nc.hardline,eA=zC,iA=JC;function Ic(s,o){var h=o.extend,g=o.override,y={};for(var S in s)y[S==="languageId"?"linguistLanguageId":S]=s[S];if(h)for(var O in h)y[O]=(y[O]||[]).concat(h[O]);for(var T in g)y[T]=g[T];return y}var nA=[Ic(QC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Ic($C,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Pc=function(s){return function(o){return o.loc&&o.loc[s]&&o.loc[s].offset}},sA={php:{parse:yl,astFormat:"php",locStart:Pc("start"),locEnd:Pc("end"),hasPragma:eA}},rA={php:{print:PC,insertPragma:iA,massageAstNode:wC,getCommentChildNodes:re.getCommentChildNodes,canAttachComment:re.canAttachComment,isBlockComment:re.isBlockComment,handleComments:{ownLine:re.handleOwnLineComment,endOfLine:re.handleEndOfLineComment,remaining:re.handleRemainingComment},willPrintOwnComments:function(s){var o=s.getValue();return o&&o.kind==="noop"},printComment:function(s){var o=s.getValue();switch(o.kind){case"commentblock":if(!o.value.includes(`
`))return o.value;var h=o.value.split(`
`);return h.slice(1,h.length-1).every(function(g){return g.trim()[0]==="*"})?ZC(tA,h.map(function(g,y){return(y>0?" ":"")+(y<h.length-1?g.trim():g.trimLeft())})):o.value;case"commentline":return o.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(o)))}},hasPrettierIgnore:function(s){var o=function(y){return y.value.includes("prettier-ignore")&&!y.value.includes("prettier-ignore-start")&&!y.value.includes("prettier-ignore-end")},h=s.getParentNode(),g=s.getNode();return g&&g.kind!=="classconstant"&&g.comments&&g.comments.length>0&&g.comments.some(o)||g&&g.kind==="constant"&&h&&h.kind==="classconstant"&&h.comments&&h.comments.length>0&&h.comments.some(o)}}},Js={languages:nA,printers:rA,parsers:sA,options:LC,defaultOptions:{tabWidth:4}},oA=Js.languages,aA=Js.printers,hA=Js.parsers,uA=Js.options,lA=Js.defaultOptions;i.default=Js,i.defaultOptions=lA,i.languages=oA,i.options=uA,i.parsers=hA,i.printers=aA,Object.defineProperty(i,"__esModule",{value:!0})})});var jf=j((Yf,bh)=>{(function(i){if(typeof Yf=="object"&&typeof bh<"u")bh.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=i()}})(function(){var i,t,e;return function(){function n(r,a,l){function c(m,k){if(!a[m]){if(!r[m]){var _=typeof require=="function"&&require;if(!k&&_)return _(m,!0);if(p)return p(m,!0);var u=new Error("Cannot find module '"+m+"'");throw u.code="MODULE_NOT_FOUND",u}var f=a[m]={exports:{}};r[m][0].call(f.exports,function(d){var x=r[m][1][d];return c(x||d)},f,f.exports,n,r,a,l)}return a[m].exports}for(var p=typeof require=="function"&&require,v=0;v<l.length;v++)c(l[v]);return c}return n}()({1:[function(n,r,a){let l=n("./utils"),c=function(){"use strict";let p=l.stringToArray,v=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],m=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],k=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],_=["Thousand","Million","Billion","Trillion"];function u(G,K){var J=function(lt,at,Q){var ct="";if(lt<=19)ct=(at?" and ":"")+(Q?m[lt]:v[lt]);else if(lt<100){let Yt=Math.floor(lt/10),xt=lt%10;ct=(at?" and ":"")+k[Yt-2],xt>0?ct+="-"+J(xt,!1,Q):Q&&(ct=ct.substring(0,ct.length-1)+"ieth")}else if(lt<1e3){let Yt=Math.floor(lt/100),xt=lt%100;ct=(at?", ":"")+v[Yt]+" Hundred",xt>0?ct+=J(xt,!0,Q):Q&&(ct+="th")}else{var bt=Math.floor(Math.log10(lt)/3);bt>_.length&&(bt=_.length);let Yt=Math.pow(10,bt*3),xt=Math.floor(lt/Yt),Nt=lt-xt*Yt;ct=(at?", ":"")+J(xt,!1,!1)+" "+_[bt-1],Nt>0?ct+=J(Nt,!0,Q):Q&&(ct+="th")}return ct},nt=J(G,!1,K);return nt}let f={};v.forEach(function(G,K){f[G.toLowerCase()]=K}),m.forEach(function(G,K){f[G.toLowerCase()]=K}),k.forEach(function(G,K){let J=G.toLowerCase();f[J]=(K+2)*10,f[J.substring(0,G.length-1)+"ieth"]=f[J]}),f.hundredth=100,_.forEach(function(G,K){let J=G.toLowerCase(),nt=Math.pow(10,(K+1)*3);f[J]=nt,f[J+"th"]=nt});function d(G){let J=G.split(/,\s|\sand\s|[\s\\-]/).map(at=>f[at]),nt=[0];return J.forEach(at=>{if(at<100){let Q=nt.pop();Q>=1e3&&(nt.push(Q),Q=0),nt.push(Q+at)}else nt.push(nt.pop()*at)}),nt.reduce((at,Q)=>at+Q,0)}let x=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],A={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function w(G){for(var K=0;K<x.length;K++){let J=x[K];if(G>=J[0])return J[1]+w(G-J[0])}return""}function H(G){for(var K=0,J=1,nt=G.length-1;nt>=0;nt--){let lt=G[nt],at=A[lt];at<J?K-=at:(J=at,K+=at)}return K}function V(G,K){for(var J=[],nt=K.charCodeAt(0);G>0;)J.unshift(String.fromCharCode((G-1)%26+nt)),G=Math.floor((G-1)/26);return J.join("")}function Y(G,K){for(var J=K.charCodeAt(0),nt=0,lt=0;lt<G.length;lt++)nt+=(G.charCodeAt(G.length-lt-1)-J+1)*Math.pow(26,lt);return nt}function F(G,K){if(typeof G>"u")return;G=Math.floor(G);let J=Ct(K);return tt(G,J)}let z={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},it={UPPER:"upper",LOWER:"lower",TITLE:"title"};function tt(G,K){let J,nt=G<0;switch(G=Math.abs(G),K.primary){case z.LETTERS:J=V(G,K.case===it.UPPER?"A":"a");break;case z.ROMAN:J=w(G),K.case===it.UPPER&&(J=J.toUpperCase());break;case z.WORDS:J=u(G,K.ordinal),K.case===it.UPPER?J=J.toUpperCase():K.case===it.LOWER&&(J=J.toLowerCase());break;case z.DECIMAL:J=""+G;var lt=K.mandatoryDigits-J.length;if(lt>0){var at=new Array(lt+1).join("0");J=at+J}if(K.zeroCode!==48&&(J=p(J).map(Yt=>String.fromCodePoint(Yt.codePointAt(0)+K.zeroCode-48)).join("")),K.regular){let Yt=Math.floor((J.length-1)/K.groupingSeparators.position);for(let xt=Yt;xt>0;xt--){let Nt=J.length-xt*K.groupingSeparators.position;J=J.substr(0,Nt)+K.groupingSeparators.character+J.substr(Nt)}}else K.groupingSeparators.reverse().forEach(Yt=>{let xt=J.length-Yt.position;J=J.substr(0,xt)+Yt.character+J.substr(xt)});if(K.ordinal){var Q={1:"st",2:"nd",3:"rd"},ct=J[J.length-1],bt=Q[ct];(!bt||J.length>1&&J[J.length-2]==="1")&&(bt="th"),J=J+bt}break;case z.SEQUENCE:throw{code:"D3130",value:K.token}}return nt&&(J="-"+J),J}let pt=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Ct(G){let K={type:"integer",primary:z.DECIMAL,case:it.LOWER,ordinal:!1},J,nt,lt=G.lastIndexOf(";");switch(lt===-1?J=G:(J=G.substring(0,lt),nt=G.substring(lt+1),nt[0]==="o"&&(K.ordinal=!0)),J){case"A":K.case=it.UPPER;case"a":K.primary=z.LETTERS;break;case"I":K.case=it.UPPER;case"i":K.primary=z.ROMAN;break;case"W":K.case=it.UPPER,K.primary=z.WORDS;break;case"Ww":K.case=it.TITLE,K.primary=z.WORDS;break;case"w":K.primary=z.WORDS;break;default:{let at=null,Q=0,ct=0,bt=[],Yt=0;if(p(J).map(Nt=>Nt.codePointAt(0)).reverse().forEach(Nt=>{let et=!1;for(let $t=0;$t<pt.length;$t++){let Lt=pt[$t];if(Nt>=Lt&&Nt<=Lt+9){if(et=!0,Q++,Yt++,at===null)at=Lt;else if(Lt!==at)throw{code:"D3131"};break}}et||(Nt===35?(Yt++,ct++):bt.push({position:Yt,character:String.fromCodePoint(Nt)}))}),Q>0){K.primary=z.DECIMAL,K.zeroCode=at,K.mandatoryDigits=Q,K.optionalDigits=ct;let et=function($t){if($t.length===0)return 0;let Lt=$t[0].character;for(let Je=1;Je<$t.length;Je++)if($t[Je].character!==Lt)return 0;let Xe=$t.map(Je=>Je.position),Ti=function(Je,Ke){return Ke===0?Je:Ti(Ke,Je%Ke)},ei=Xe.reduce(Ti);for(let Je=1;Je<=Xe.length;Je++)if(Xe.indexOf(Je*ei)===-1)return 0;return ei}(bt);et>0?(K.regular=!0,K.groupingSeparators={position:et,character:bt[0].character}):(K.regular=!1,K.groupingSeparators=bt)}else K.primary=z.SEQUENCE,K.token=J}}return K}let qt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function wt(G){var K=[];let J={type:"datetime",parts:K},nt=function(et,$t){if($t>et){let Lt=G.substring(et,$t);Lt=Lt.split("]]").join("]"),K.push({type:"literal",value:Lt})}};for(var lt=0,at=0;at<G.length;){if(G.charAt(at)==="["){if(G.charAt(at+1)==="["){nt(lt,at),K.push({type:"literal",value:"["}),at+=2,lt=at;continue}if(nt(lt,at),lt=at,at=G.indexOf("]",lt),at===-1)throw{code:"D3135"};let et=G.substring(lt+1,at);et=et.split(/\s+/).join("");var Q={type:"marker",component:et.charAt(0)},ct=et.lastIndexOf(","),bt;if(ct!==-1){let $t=et.substring(ct+1),Lt=$t.indexOf("-"),Xe,Ti,ei=function(Ke){if(!(typeof Ke>"u"||Ke==="*"))return parseInt(Ke)};Lt===-1?Xe=$t:(Xe=$t.substring(0,Lt),Ti=$t.substring(Lt+1));let Je={min:ei(Xe),max:ei(Ti)};Q.width=Je,bt=et.substring(1,ct)}else bt=et.substring(1);if(bt.length===1)Q.presentation1=bt;else if(bt.length>1){var Yt=bt.charAt(bt.length-1);"atco".indexOf(Yt)!==-1?(Q.presentation2=Yt,Yt==="o"&&(Q.ordinal=!0),Q.presentation1=bt.substring(0,bt.length-1)):Q.presentation1=bt}else Q.presentation1=qt[Q.component];if(typeof Q.presentation1>"u")throw{code:"D3132",value:Q.component};if(Q.presentation1[0]==="n")Q.names=it.LOWER;else if(Q.presentation1[0]==="N")Q.presentation1[1]==="n"?Q.names=it.TITLE:Q.names=it.UPPER;else if("YMDdFWwXxHhmsf".indexOf(Q.component)!==-1){var xt=Q.presentation1;if(Q.presentation2&&(xt+=";"+Q.presentation2),Q.integerFormat=Ct(xt),Q.width&&Q.width.min!==void 0&&Q.integerFormat.mandatoryDigits<Q.width.min&&(Q.integerFormat.mandatoryDigits=Q.width.min),"YMD".indexOf(Q.component)!==-1)if(Q.n=-1,Q.width&&Q.width.max!==void 0)Q.n=Q.width.max,Q.integerFormat.mandatoryDigits=Q.n;else{var Nt=Q.integerFormat.mandatoryDigits+Q.integerFormat.optionalDigits;Nt>=2&&(Q.n=Nt)}}(Q.component==="Z"||Q.component==="z")&&(Q.integerFormat=Ct(Q.presentation1)),K.push(Q),lt=at+1}at++}return nt(lt,at),J}let At=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],vt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ut=1e3*60*60*24,dt=function(G){let K=Date.UTC(G.year,G.month);var J=new Date(K).getUTCDay();return J===0&&(J=7),J>4?K+(8-J)*Ut:K-(J-1)*Ut},ft=function(G,K){return{year:G,month:K,nextMonth:function(){return K===11?ft(G+1,0):ft(G,K+1)},previousMonth:function(){return K===0?ft(G-1,11):ft(G,K-1)},nextYear:function(){return ft(G+1,K)},previousYear:function(){return ft(G-1,K)}}},ce=function(G,K){return(K-G)/(Ut*7)+1},It=(G,K)=>{let J;switch(K){case"Y":J=G.getUTCFullYear();break;case"M":J=G.getUTCMonth()+1;break;case"D":J=G.getUTCDate();break;case"d":{let nt=Date.UTC(G.getUTCFullYear(),G.getUTCMonth(),G.getUTCDate()),lt=Date.UTC(G.getUTCFullYear(),0);J=(nt-lt)/Ut+1;break}case"F":J=G.getUTCDay(),J===0&&(J=7);break;case"W":{let nt=ft(G.getUTCFullYear(),0),lt=dt(nt),at=Date.UTC(nt.year,G.getUTCMonth(),G.getUTCDate()),Q=ce(lt,at);if(Q>52){let ct=dt(nt.nextYear());at>=ct&&(Q=1)}else if(Q<1){let ct=dt(nt.previousYear());Q=ce(ct,at)}J=Math.floor(Q);break}case"w":{let nt=ft(G.getUTCFullYear(),G.getUTCMonth()),lt=dt(nt),at=Date.UTC(nt.year,nt.month,G.getUTCDate()),Q=ce(lt,at);if(Q>4){let ct=dt(nt.nextMonth());at>=ct&&(Q=1)}else if(Q<1){let ct=dt(nt.previousMonth());Q=ce(ct,at)}J=Math.floor(Q);break}case"X":{let nt=ft(G.getUTCFullYear(),0),lt=dt(nt),at=dt(nt.nextYear()),Q=G.getTime();Q<lt?J=nt.year-1:Q>=at?J=nt.year+1:J=nt.year;break}case"x":{let nt=ft(G.getUTCFullYear(),G.getUTCMonth()),lt=dt(nt),at=nt.nextMonth(),Q=dt(at),ct=G.getTime();ct<lt?J=nt.previousMonth().month+1:ct>=Q?J=at.month+1:J=nt.month+1;break}case"H":J=G.getUTCHours();break;case"h":J=G.getUTCHours(),J=J%12,J===0&&(J=12);break;case"P":J=G.getUTCHours()>=12?"pm":"am";break;case"m":J=G.getUTCMinutes();break;case"s":J=G.getUTCSeconds();break;case"f":J=G.getUTCMilliseconds();break;case"Z":case"z":break;case"C":J="ISO";break;case"E":J="ISO";break}return J},ne=null;function pe(G,K,J){var nt=0,lt=0;if(typeof J<"u"){let xt=parseInt(J);nt=Math.floor(xt/100),lt=xt%100}var at=function(xt,Nt){var et=It(xt,Nt.component);if("YMDdFWwXxHhms".indexOf(Nt.component)!==-1)if(Nt.component==="Y"&&Nt.n!==-1&&(et=et%Math.pow(10,Nt.n)),Nt.names){if(Nt.component==="M"||Nt.component==="x")et=vt[et-1];else if(Nt.component==="F")et=At[et];else throw{code:"D3133",value:Nt.component};Nt.names===it.UPPER?et=et.toUpperCase():Nt.names===it.LOWER&&(et=et.toLowerCase()),Nt.width&&et.length>Nt.width.max&&(et=et.substring(0,Nt.width.max))}else et=tt(et,Nt.integerFormat);else if(Nt.component==="f")et=tt(et,Nt.integerFormat);else if(Nt.component==="Z"||Nt.component==="z"){let $t=nt*100+lt;if(Nt.integerFormat.regular)et=tt($t,Nt.integerFormat);else{let Lt=Nt.integerFormat.mandatoryDigits;if(Lt===1||Lt===2)et=tt(nt,Nt.integerFormat),lt!==0&&(et+=":"+F(lt,"00"));else if(Lt===3||Lt===4)et=tt($t,Nt.integerFormat);else throw{code:"D3134",value:Lt}}$t>=0&&(et="+"+et),Nt.component==="z"&&(et="GMT"+et),$t===0&&Nt.presentation2==="t"&&(et="Z")}return et};let Q;typeof K>"u"?(ne===null&&(ne=wt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),Q=ne):Q=wt(K);let ct=(60*nt+lt)*60*1e3,bt=new Date(G+ct),Yt="";return Q.parts.forEach(function(xt){xt.type==="literal"?Yt+=xt.value:Yt+=at(bt,xt)}),Yt}function M(G){var K={};if(G.type==="datetime")K.type="datetime",K.parts=G.parts.map(function(J){var nt={};if(J.type==="literal")nt.regex=J.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(J.component==="Z"||J.component==="z"){let at;Array.isArray(J.integerFormat.groupingSeparators)||(at=J.integerFormat.groupingSeparators),nt.regex="",J.component==="z"&&(nt.regex="GMT"),nt.regex+="[-+][0-9]+",at&&(nt.regex+=at.character+"[0-9]+"),nt.parse=function(Q){J.component==="z"&&(Q=Q.substring(3));let ct=0,bt=0;return at?(ct=Number.parseInt(Q.substring(0,Q.indexOf(at.character))),bt=Number.parseInt(Q.substring(Q.indexOf(at.character)+1))):Q.length-1<=2?ct=Number.parseInt(Q):(ct=Number.parseInt(Q.substring(0,3)),bt=Number.parseInt(Q.substring(3))),ct*60+bt}}else if(J.integerFormat)J.integerFormat.n=J.n,nt=M(J.integerFormat);else{nt.regex="[a-zA-Z]+";var lt={};if(J.component==="M"||J.component==="x")vt.forEach(function(at,Q){J.width&&J.width.max?lt[at.substring(0,J.width.max)]=Q+1:lt[at]=Q+1});else if(J.component==="F")At.forEach(function(at,Q){Q>0&&(J.width&&J.width.max?lt[at.substring(0,J.width.max)]=Q:lt[at]=Q)});else if(J.component==="P")lt={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:J.component};nt.parse=function(at){return lt[at]}}return nt.component=J.component,nt});else{K.type="integer";let J=G.case===it.UPPER,nt;switch(G.n&&G.n>0?G.optionalDigits===0?nt=`{${G.n}}`:nt=`{${G.n-G.optionalDigits},${G.n}}`:nt="+",G.primary){case z.LETTERS:K.regex=J?"[A-Z]+":"[a-z]+",K.parse=function(lt){return Y(lt,J?"A":"a")};break;case z.ROMAN:K.regex=J?"[MDCLXVI]+":"[mdclxvi]+",K.parse=function(lt){return H(J?lt:lt.toUpperCase())};break;case z.WORDS:K.regex="(?:"+Object.keys(f).concat("and","[\\-, ]").join("|")+")+",K.parse=function(lt){return d(lt.toLowerCase())};break;case z.DECIMAL:K.regex=`[0-9]${nt}`,G.ordinal&&(K.regex+="(?:th|st|nd|rd)"),K.parse=function(lt){let at=lt;return G.ordinal&&(at=lt.substring(0,lt.length-2)),G.regular?at=at.split(",").join(""):G.groupingSeparators.forEach(Q=>{at=at.split(Q.character).join("")}),G.zeroCode!==48&&(at=at.split("").map(Q=>String.fromCodePoint(Q.codePointAt(0)-G.zeroCode+48)).join("")),parseInt(at)};break;case z.SEQUENCE:throw{code:"D3130",value:G.token}}}return K}function U(G,K){if(typeof G>"u")return;let J=Ct(K);return M(J).parse(G)}function st(G,K){let J=wt(K),nt=M(J),lt="^"+nt.parts.map(bt=>"("+bt.regex+")").join("")+"$";var Q=new RegExp(lt,"i").exec(G);if(Q!==null){let Lt={};for(let I=1;I<Q.length;I++){let C=nt.parts[I-1];C.parse&&(Lt[C.component]=C.parse(Q[I]))}if(Object.getOwnPropertyNames(Lt).length===0)return;let Xe=0,Ti=I=>{Xe<<=1,Xe+=I?1:0},ei=I=>!(~I&Xe)&&!!(I&Xe);"YXMxWwdD".split("").forEach(I=>Ti(Lt[I]));let Ke=!ei(161)&&ei(130),Zi=ei(84),an=!Zi&&ei(72);Xe=0,"PHhmsf".split("").forEach(I=>Ti(Lt[I]));let yt=!ei(23)&&ei(47),Ue=(Ke?"YD":Zi?"XxwF":an?"XWF":"YMD")+(yt?"Phmsf":"Hmsf"),Wn=this.environment.timestamp,Ci=!1,St=!1;if(Ue.split("").forEach(I=>{if(typeof Lt[I]>"u")Ci?(Lt[I]="MDd".indexOf(I)!==-1?1:0,St=!0):Lt[I]=It(Wn,I);else if(Ci=!0,St)throw{code:"D3136"}}),Lt.M>0?Lt.M-=1:Lt.M=0,Ke){let I=Date.UTC(Lt.Y,0),C=(Lt.d-1)*1e3*60*60*24,b=new Date(I+C);Lt.M=b.getUTCMonth(),Lt.D=b.getUTCDate()}if(Zi)throw{code:"D3136"};if(an)throw{code:"D3136"};yt&&(Lt.H=Lt.h===12?0:Lt.h,Lt.P===1&&(Lt.H+=12));var ct=Date.UTC(Lt.Y,Lt.M,Lt.D,Lt.H,Lt.m,Lt.s,Lt.f);return(Lt.Z||Lt.z)&&(ct-=(Lt.Z||Lt.z)*60*1e3),ct}}var Et=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function Gt(G,K){if(!(typeof G>"u"))if(typeof K>"u"){if(!Et.test(G))throw{stack:new Error().stack,code:"D3110",value:G};return Date.parse(G)}else return st.call(this,G,K)}function rt(G,K,J){if(!(typeof G>"u"))return pe.call(this,G,K,J)}return{formatInteger:F,parseInteger:U,fromMillis:rt,toMillis:Gt}}();r.exports=c},{"./utils":6}],2:[function(n,r,a){(function(l){(function(){var c=n("./utils");let p=(()=>{"use strict";var v=c.isNumeric,m=c.isArrayOfStrings,k=c.isArrayOfNumbers,_=c.createSequence,u=c.isSequence,f=c.isFunction,d=c.isLambda,x=c.isIterable,A=c.getFunctionArity,w=c.isDeepEqual,H=c.stringToArray;function V(E){if(!(typeof E>"u")){var N=0;return E.forEach(function(L){N+=L}),N}}function Y(E){return typeof E>"u"?0:E.length}function F(E){if(!(typeof E>"u"||E.length===0))return Math.max.apply(Math,E)}function z(E){if(!(typeof E>"u"||E.length===0))return Math.min.apply(Math,E)}function it(E){if(!(typeof E>"u"||E.length===0)){var N=0;return E.forEach(function(L){N+=L}),N/E.length}}function tt(E,N=!1){if(!(typeof E>"u")){var L;if(typeof E=="string")L=E;else if(f(E))L="";else{if(typeof E=="number"&&!isFinite(E))throw{code:"D3001",value:E,stack:new Error().stack};var W=N?2:0;Array.isArray(E)&&E.outerWrapper&&(E=E[0]),L=JSON.stringify(E,function(X,Z){return typeof Z<"u"&&Z!==null&&Z.toPrecision&&v(Z)?Number(Z.toPrecision(15)):Z&&f(Z)?"":Z},W)}return L}}function pt(E,N,L){if(!(typeof E>"u")){var W=H(E),X=W.length;if(X+N<0&&(N=0),typeof L<"u"){if(L<=0)return"";var Z=N>=0?N+L:X+N+L;return W.slice(N,Z).join("")}return W.slice(N).join("")}}function Ct(E,N){if(!(typeof E>"u")){var L=E.indexOf(N);return L>-1?E.substr(0,L):E}}function qt(E,N){if(!(typeof E>"u")){var L=E.indexOf(N);return L>-1?E.substr(L+N.length):E}}function wt(E){if(!(typeof E>"u"))return E.toLowerCase()}function At(E){if(!(typeof E>"u"))return E.toUpperCase()}function vt(E){if(!(typeof E>"u"))return H(E).length}function Ut(E){if(!(typeof E>"u")){var N=E.replace(/[ \t\n\r]+/gm," ");return N.charAt(0)===" "&&(N=N.substring(1)),N.charAt(N.length-1)===" "&&(N=N.substring(0,N.length-1)),N}}function dt(E,N,L){if(!(typeof E>"u")){(typeof L>"u"||L.length===0)&&(L=" ");var W,X=Math.abs(N)-vt(E);if(X>0){var Z=new Array(X+1).join(L);L.length>1&&(Z=pt(Z,0,X)),N>0?W=E+Z:W=Z+E}else W=E;return W}}function*ft(E,N){var L=E.apply(this,[N]);if(x(L)&&(L=yield*L),L&&!(typeof L.start=="number"||L.end==="number"||Array.isArray(L.groups)||f(L.next)))throw{code:"T1010",stack:new Error().stack};return L}function*ce(E,N){if(!(typeof E>"u")){var L;if(typeof N=="string")L=E.indexOf(N)!==-1;else{var W=yield*ft(N,E);L=typeof W<"u"}return L}}function*It(E,N,L){if(!(typeof E>"u")){if(L<0)throw{stack:new Error().stack,value:L,code:"D3040",index:3};var W=_();if(typeof L>"u"||L>0){var X=0,Z=yield*ft(N,E);if(typeof Z<"u")for(;typeof Z<"u"&&(typeof L>"u"||X<L);)W.push({match:Z.match,index:Z.start,groups:Z.groups}),Z=yield*ft(Z.next),X++}return W}}function*ne(E,N,L,W){if(!(typeof E>"u")){var X=this;if(N==="")throw{code:"D3010",stack:new Error().stack,value:N,index:2};if(W<0)throw{code:"D3011",stack:new Error().stack,value:W,index:4};var Z;typeof L=="string"?Z=function(xe){for(var li="",ye=0,Ai=L.indexOf("$",ye);Ai!==-1&&ye<L.length;){li+=L.substring(ye,Ai),ye=Ai+1;var we=L.charAt(ye);if(we==="$")li+="$",ye++;else if(we==="0")li+=xe.match,ye++;else{var bi;if(xe.groups.length===0?bi=1:bi=Math.floor(Math.log(xe.groups.length)*Math.LOG10E)+1,Ai=parseInt(L.substring(ye,ye+bi),10),bi>1&&Ai>xe.groups.length&&(Ai=parseInt(L.substring(ye,ye+bi-1),10)),isNaN(Ai))li+="$";else{if(xe.groups.length>0){var is=xe.groups[Ai-1];typeof is<"u"&&(li+=is)}ye+=Ai.toString().length}}Ai=L.indexOf("$",ye)}return li+=L.substring(ye),li}:Z=L;var mt="",Bt=0;if(typeof W>"u"||W>0){var Kt=0;if(typeof N=="string"){for(var se=E.indexOf(N,Bt);se!==-1&&(typeof W>"u"||Kt<W);)mt+=E.substring(Bt,se),mt+=L,Bt=se+N.length,Kt++,se=E.indexOf(N,Bt);mt+=E.substring(Bt)}else{var de=yield*ft(N,E);if(typeof de<"u"){for(;typeof de<"u"&&(typeof W>"u"||Kt<W);){mt+=E.substring(Bt,de.start);var ge=Z.apply(X,[de]);if(x(ge)&&(ge=yield*ge),typeof ge=="string")mt+=ge;else throw{code:"D3012",stack:new Error().stack,value:ge};Bt=de.start+de.match.length,Kt++,de=yield*ft(de.next)}mt+=E.substring(Bt)}else mt=E}}else mt=E;return mt}}function pe(E){if(!(typeof E>"u")){var N=typeof window<"u"?window.btoa:function(L){return new l.Buffer.from(L,"binary").toString("base64")};return N(E)}}function M(E){if(!(typeof E>"u")){var N=typeof window<"u"?window.atob:function(L){return new l.Buffer.from(L,"base64").toString("binary")};return N(E)}}function U(E){if(!(typeof E>"u")){var N;try{N=encodeURIComponent(E)}catch{throw{code:"D3140",stack:new Error().stack,value:E,functionName:"encodeUrlComponent"}}return N}}function st(E){if(!(typeof E>"u")){var N;try{N=encodeURI(E)}catch{throw{code:"D3140",stack:new Error().stack,value:E,functionName:"encodeUrl"}}return N}}function Et(E){if(!(typeof E>"u")){var N;try{N=decodeURIComponent(E)}catch{throw{code:"D3140",stack:new Error().stack,value:E,functionName:"decodeUrlComponent"}}return N}}function Gt(E){if(!(typeof E>"u")){var N;try{N=decodeURI(E)}catch{throw{code:"D3140",stack:new Error().stack,value:E,functionName:"decodeUrl"}}return N}}function*rt(E,N,L){if(!(typeof E>"u")){if(L<0)throw{code:"D3020",stack:new Error().stack,value:L,index:3};var W=[];if(typeof L>"u"||L>0)if(typeof N=="string")W=E.split(N,L);else{var X=0,Z=yield*ft(N,E);if(typeof Z<"u"){for(var mt=0;typeof Z<"u"&&(typeof L>"u"||X<L);)W.push(E.substring(mt,Z.start)),mt=Z.end,Z=yield*ft(Z.next),X++;(typeof L>"u"||X<L)&&W.push(E.substring(mt))}else W.push(E)}return W}}function G(E,N){if(!(typeof E>"u"))return typeof N>"u"&&(N=""),E.join(N)}function K(E,N,L){if(!(typeof E>"u")){var W={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},X=W;typeof L<"u"&&Object.keys(L).forEach(function(Jt){X[Jt]=L[Jt]});for(var Z=[],mt=X["zero-digit"].charCodeAt(0),Bt=mt;Bt<mt+10;Bt++)Z.push(String.fromCharCode(Bt));var Kt=Z.concat([X["decimal-separator"],X["exponent-separator"],X["grouping-separator"],X.digit,X["pattern-separator"]]),se=N.split(X["pattern-separator"]);if(se.length>2)throw{code:"D3080",stack:new Error().stack};var de=function(Jt){var Le=function(){for(var ii,Si=0;Si<Jt.length;Si++)if(ii=Jt.charAt(Si),Kt.indexOf(ii)!==-1&&ii!==X["exponent-separator"])return Jt.substring(0,Si)}(),mi=function(){for(var ii,Si=Jt.length-1;Si>=0;Si--)if(ii=Jt.charAt(Si),Kt.indexOf(ii)!==-1&&ii!==X["exponent-separator"])return Jt.substring(Si+1)}(),Se=Jt.substring(Le.length,Jt.length-mi.length),ci,Tn,vi,zn,wi=Jt.indexOf(X["exponent-separator"],Le.length);wi===-1||wi>Jt.length-mi.length?(ci=Se,Tn=void 0):(ci=Se.substring(0,wi),Tn=Se.substring(wi+1));var Wi=ci.indexOf(X["decimal-separator"]);return Wi===-1?(vi=ci,zn=mi):(vi=ci.substring(0,Wi),zn=ci.substring(Wi+1)),{prefix:Le,suffix:mi,activePart:Se,mantissaPart:ci,exponentPart:Tn,integerPart:vi,fractionalPart:zn,subpicture:Jt}},ge=function(Jt){var Le,mi,Se=Jt.subpicture,ci=Se.indexOf(X["decimal-separator"]);ci!==Se.lastIndexOf(X["decimal-separator"])&&(Le="D3081"),Se.indexOf(X.percent)!==Se.lastIndexOf(X.percent)&&(Le="D3082"),Se.indexOf(X["per-mille"])!==Se.lastIndexOf(X["per-mille"])&&(Le="D3083"),Se.indexOf(X.percent)!==-1&&Se.indexOf(X["per-mille"])!==-1&&(Le="D3084");var Tn=!1;for(mi=0;mi<Jt.mantissaPart.length;mi++){var vi=Jt.mantissaPart.charAt(mi);if(Z.indexOf(vi)!==-1||vi===X.digit){Tn=!0;break}}Tn||(Le="D3085");var zn=Jt.activePart.split("").map(function(ii){return Kt.indexOf(ii)===-1?"p":"a"}).join("");zn.indexOf("p")!==-1&&(Le="D3086"),ci!==-1?(Se.charAt(ci-1)===X["grouping-separator"]||Se.charAt(ci+1)===X["grouping-separator"])&&(Le="D3087"):Jt.integerPart.charAt(Jt.integerPart.length-1)===X["grouping-separator"]&&(Le="D3088"),Se.indexOf(X["grouping-separator"]+X["grouping-separator"])!==-1&&(Le="D3089");var wi=Jt.integerPart.indexOf(X.digit);wi!==-1&&Jt.integerPart.substring(0,wi).split("").filter(function(ii){return Z.indexOf(ii)>-1}).length>0&&(Le="D3090"),wi=Jt.fractionalPart.lastIndexOf(X.digit),wi!==-1&&Jt.fractionalPart.substring(wi).split("").filter(function(ii){return Z.indexOf(ii)>-1}).length>0&&(Le="D3091");var Wi=typeof Jt.exponentPart=="string";if(Wi&&Jt.exponentPart.length>0&&(Se.indexOf(X.percent)!==-1||Se.indexOf(X["per-mille"])!==-1)&&(Le="D3092"),Wi&&(Jt.exponentPart.length===0||Jt.exponentPart.split("").filter(function(ii){return Z.indexOf(ii)===-1}).length>0)&&(Le="D3093"),Le)throw{code:Le,stack:new Error().stack}},xe=function(Jt){var Le=function(si,Cn){for(var ks=[],hn=si.indexOf(X["grouping-separator"]);hn!==-1;){var Ms=(Cn?si.substring(0,hn):si.substring(hn)).split("").filter(function(Jn){return Z.indexOf(Jn)!==-1||Jn===X.digit}).length;ks.push(Ms),hn=Jt.integerPart.indexOf(X["grouping-separator"],hn+1)}return ks},mi=Le(Jt.integerPart),Se=function(si){if(si.length===0)return 0;for(var Cn=function(Ms,Jn){return Jn===0?Ms:Cn(Jn,Ms%Jn)},ks=si.reduce(Cn),hn=1;hn<=si.length;hn++)if(si.indexOf(hn*ks)===-1)return 0;return ks},ci=Se(mi),Tn=Le(Jt.fractionalPart,!0),vi=Jt.integerPart.split("").filter(function(si){return Z.indexOf(si)!==-1}).length,zn=vi,wi=Jt.fractionalPart.split(""),Wi=wi.filter(function(si){return Z.indexOf(si)!==-1}).length,ii=wi.filter(function(si){return Z.indexOf(si)!==-1||si===X.digit}).length,Si=typeof Jt.exponentPart=="string";vi===0&&ii===0&&(Si?(Wi=1,ii=1):vi=1),Si&&vi===0&&Jt.integerPart.indexOf(X.digit)!==-1&&(vi=1),vi===0&&Wi===0&&(Wi=1);var jr=0;return Si&&(jr=Jt.exponentPart.split("").filter(function(si){return Z.indexOf(si)!==-1}).length),{integerPartGroupingPositions:mi,regularGrouping:ci,minimumIntegerPartSize:vi,scalingFactor:zn,prefix:Jt.prefix,fractionalPartGroupingPositions:Tn,minimumFactionalPartSize:Wi,maximumFactionalPartSize:ii,minimumExponentSize:jr,suffix:Jt.suffix,picture:Jt.subpicture}},li=se.map(de);li.forEach(ge);var ye=li.map(xe),Ai=X["minus-sign"],we=X["zero-digit"],bi=X["decimal-separator"],is=X["grouping-separator"];ye.length===1&&(ye.push(JSON.parse(JSON.stringify(ye[0]))),ye[1].prefix=Ai+ye[1].prefix);var Ge;E>=0?Ge=ye[0]:Ge=ye[1];var Gn;Ge.picture.indexOf(X.percent)!==-1?Gn=E*100:Ge.picture.indexOf(X["per-mille"])!==-1?Gn=E*1e3:Gn=E;var kn,qn;if(Ge.minimumExponentSize===0)kn=Gn;else{var ba=Math.pow(10,Ge.scalingFactor),zr=Math.pow(10,Ge.scalingFactor-1);for(kn=Gn,qn=0;kn<zr;)kn*=10,qn-=1;for(;kn>ba;)kn/=10,qn+=1}var Sa=ct(kn,Ge.maximumFactionalPartSize),cr=function(Jt,Le){var mi=Math.abs(Jt).toFixed(Le);return we!=="0"&&(mi=mi.split("").map(function(Se){return Se>="0"&&Se<="9"?Z[Se.charCodeAt(0)-48]:Se}).join("")),mi},ie=cr(Sa,Ge.maximumFactionalPartSize),Qe=ie.indexOf(".");for(Qe===-1?ie=ie+bi:ie=ie.replace(".",bi);ie.charAt(0)===we;)ie=ie.substring(1);for(;ie.charAt(ie.length-1)===we;)ie=ie.substring(0,ie.length-1);Qe=ie.indexOf(bi);var ns=Ge.minimumIntegerPartSize-Qe,Jr=Ge.minimumFactionalPartSize-(ie.length-Qe-1);if(ie=(ns>0?new Array(ns+1).join(we):"")+ie,ie=ie+(Jr>0?new Array(Jr+1).join(we):""),Qe=ie.indexOf(bi),Ge.regularGrouping>0)for(var Yr=Math.floor((Qe-1)/Ge.regularGrouping),Bs=1;Bs<=Yr;Bs++)ie=[ie.slice(0,Qe-Bs*Ge.regularGrouping),is,ie.slice(Qe-Bs*Ge.regularGrouping)].join("");else Ge.integerPartGroupingPositions.forEach(function(Jt){ie=[ie.slice(0,Qe-Jt),is,ie.slice(Qe-Jt)].join(""),Qe++});if(Qe=ie.indexOf(bi),Ge.fractionalPartGroupingPositions.forEach(function(Jt){ie=[ie.slice(0,Jt+Qe+1),is,ie.slice(Jt+Qe+1)].join("")}),Qe=ie.indexOf(bi),(Ge.picture.indexOf(bi)===-1||Qe===ie.length-1)&&(ie=ie.substring(0,ie.length-1)),typeof qn<"u"){var ys=cr(qn,0);ns=Ge.minimumExponentSize-ys.length,ns>0&&(ys=new Array(ns+1).join(we)+ys),ie=ie+X["exponent-separator"]+(qn<0?Ai:"")+ys}return ie=Ge.prefix+ie+Ge.suffix,ie}}function J(E,N){if(!(typeof E>"u")){if(E=ct(E),typeof N>"u"?N=10:N=ct(N),N<2||N>36)throw{code:"D3100",stack:new Error().stack,value:N};var L=E.toString(N);return L}}function nt(E){var N;if(!(typeof E>"u")){if(typeof E=="number")N=E;else if(typeof E=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(E)&&!isNaN(parseFloat(E))&&isFinite(E))N=parseFloat(E);else if(E===!0)N=1;else if(E===!1)N=0;else throw{code:"D3030",value:E,stack:new Error().stack,index:1};return N}}function lt(E){var N;if(!(typeof E>"u"))return N=Math.abs(E),N}function at(E){var N;if(!(typeof E>"u"))return N=Math.floor(E),N}function Q(E){var N;if(!(typeof E>"u"))return N=Math.ceil(E),N}function ct(E,N){var L;if(!(typeof E>"u")){if(N){var W=E.toString().split("e");E=+(W[0]+"e"+(W[1]?+W[1]+N:N))}L=Math.round(E);var X=L-E;return Math.abs(X)===.5&&Math.abs(L%2)===1&&(L=L-1),N&&(W=L.toString().split("e"),L=+(W[0]+"e"+(W[1]?+W[1]-N:-N))),Object.is(L,-0)&&(L=0),L}}function bt(E){var N;if(!(typeof E>"u")){if(E<0)throw{stack:new Error().stack,code:"D3060",index:1,value:E};return N=Math.sqrt(E),N}}function Yt(E,N){var L;if(!(typeof E>"u")){if(L=Math.pow(E,N),!isFinite(L))throw{stack:new Error().stack,code:"D3061",index:1,value:E,exp:N};return L}}function xt(){return Math.random()}function Nt(E){if(!(typeof E>"u")){var N=!1;if(Array.isArray(E)){if(E.length===1)N=Nt(E[0]);else if(E.length>1){var L=E.filter(function(W){return Nt(W)});N=L.length>0}}else typeof E=="string"?E.length>0&&(N=!0):v(E)?E!==0&&(N=!0):E!==null&&typeof E=="object"?Object.keys(E).length>0&&(N=!0):typeof E=="boolean"&&E===!0&&(N=!0);return N}}function et(E){if(!(typeof E>"u"))return!Nt(E)}function $t(E,N,L,W){var X=[N],Z=A(E);return Z>=2&&X.push(L),Z>=3&&X.push(W),X}function*Lt(E,N){if(!(typeof E>"u")){for(var L=_(),W=0;W<E.length;W++){var X=$t(N,E[W],W,E),Z=yield*N.apply(this,X);typeof Z<"u"&&L.push(Z)}return L}}function*Xe(E,N){if(!(typeof E>"u")){for(var L=_(),W=0;W<E.length;W++){var X=E[W],Z=$t(N,X,W,E),mt=yield*N.apply(this,Z);Nt(mt)&&L.push(X)}return L}}function*Ti(E,N){if(!(typeof E>"u")){for(var L=!1,W,X=0;X<E.length;X++){var Z=E[X],mt=!0;if(typeof N<"u"){var Bt=$t(N,Z,X,E),Kt=yield*N.apply(this,Bt);mt=Nt(Kt)}if(mt)if(!L)W=Z,L=!0;else throw{stack:new Error().stack,code:"D3138",index:X}}if(!L)throw{stack:new Error().stack,code:"D3139"};return W}}function ei(){for(var E=[],N=Array.prototype.slice.call(arguments),L=Math.min.apply(Math,N.map(function(Z){return Array.isArray(Z)?Z.length:0})),W=0;W<L;W++){var X=N.map(Z=>Z[W]);E.push(X)}return E}function*Je(E,N,L){if(!(typeof E>"u")){var W,X=A(N);if(X<2)throw{stack:new Error().stack,code:"D3050",index:1};var Z;for(typeof L>"u"&&E.length>0?(W=E[0],Z=1):(W=L,Z=0);Z<E.length;){var mt=[W,E[Z]];X>=3&&mt.push(Z),X>=4&&mt.push(E),W=yield*N.apply(this,mt),Z++}return W}}function Ke(E){var N=_();if(Array.isArray(E)){var L={};E.forEach(function(W){var X=Ke(W);X.forEach(function(Z){L[Z]=!0})}),N=Ke(L)}else E!==null&&typeof E=="object"&&!d(E)&&Object.keys(E).forEach(W=>N.push(W));return N}function Zi(E,N){var L;if(Array.isArray(E)){L=_();for(var W=0;W<E.length;W++){var X=Zi(E[W],N);typeof X<"u"&&(Array.isArray(X)?X.forEach(Z=>L.push(Z)):L.push(X))}}else E!==null&&typeof E=="object"&&(L=E[N]);return L}function an(E,N){return typeof E>"u"?N:typeof N>"u"?E:(Array.isArray(E)||(E=_(E)),Array.isArray(N)||(N=[N]),E.concat(N))}function Vn(E){return!(typeof E>"u")}function yt(E){var N=_();if(Array.isArray(E))E.forEach(function(X){N=an(N,yt(X))});else if(E!==null&&typeof E=="object"&&!d(E))for(var L in E){var W={};W[L]=E[L],N.push(W)}else N=E;return N}function es(E){if(!(typeof E>"u")){var N={};return E.forEach(function(L){for(var W in L)N[W]=L[W]}),N}}function Hn(E){if(!(typeof E>"u")){if(E.length<=1)return E;for(var N=E.length,L=new Array(N),W=0;W<N;W++)L[N-W-1]=E[W];return L}}function*Ue(E,N){var L=_();for(var W in E){var X=$t(N,E[W],W,E),Z=yield*N.apply(this,X);typeof Z<"u"&&L.push(Z)}return L}function Wn(E){throw{code:"D3137",stack:new Error().stack,message:E||"$error() function evaluated"}}function Ci(E,N){if(!E)throw{code:"D3141",stack:new Error().stack,message:N||"$assert() statement failed"}}function St(E){if(E!==void 0)return E===null?"null":v(E)?"number":typeof E=="string"?"string":typeof E=="boolean"?"boolean":Array.isArray(E)?"array":f(E)?"function":"object"}function*I(E,N){if(!(typeof E>"u")){if(E.length<=1)return E;var L;if(typeof N>"u"){if(!k(E)&&!m(E))throw{stack:new Error().stack,code:"D3070",index:1};L=function*(mt,Bt){return mt>Bt}}else L=N;var W=function*(mt,Bt){var Kt=function*(de,ge,xe){ge.length===0?Array.prototype.push.apply(de,xe):xe.length===0?Array.prototype.push.apply(de,ge):(yield*L(ge[0],xe[0]))?(de.push(xe[0]),yield*Kt(de,ge,xe.slice(1))):(de.push(ge[0]),yield*Kt(de,ge.slice(1),xe))},se=[];return yield*Kt(se,mt,Bt),se},X=function*(mt){if(!Array.isArray(mt)||mt.length<=1)return mt;var Bt=Math.floor(mt.length/2),Kt=mt.slice(0,Bt),se=mt.slice(Bt);return Kt=yield*X(Kt),se=yield*X(se),yield*W(Kt,se)},Z=yield*X(E);return Z}}function C(E){if(!(typeof E>"u")){if(E.length<=1)return E;for(var N=new Array(E.length),L=0;L<E.length;L++){var W=Math.floor(Math.random()*(L+1));L!==W&&(N[L]=N[W]),N[W]=E[L]}return N}}function b(E){if(!(typeof E>"u")){if(!Array.isArray(E)||E.length<=1)return E;for(var N=u(E)?_():[],L=0;L<E.length;L++){for(var W=E[L],X=!1,Z=0;Z<N.length;Z++)if(w(W,N[Z])){X=!0;break}X||N.push(W)}return N}}function*D(E,N){var L={};for(var W in E){var X=E[W],Z=$t(N,X,W,E),mt=yield*N.apply(this,Z);Nt(mt)&&(L[W]=X)}return Object.keys(L).length===0&&(L=void 0),L}return{sum:V,count:Y,max:F,min:z,average:it,string:tt,substring:pt,substringBefore:Ct,substringAfter:qt,lowercase:wt,uppercase:At,length:vt,trim:Ut,pad:dt,match:It,contains:ce,replace:ne,split:rt,join:G,formatNumber:K,formatBase:J,number:nt,floor:at,ceil:Q,round:ct,abs:lt,sqrt:bt,power:Yt,random:xt,boolean:Nt,not:et,map:Lt,zip:ei,filter:Xe,single:Ti,foldLeft:Je,sift:D,keys:Ke,lookup:Zi,append:an,exists:Vn,spread:yt,merge:es,reverse:Hn,each:Ue,error:Wn,assert:Ci,type:St,sort:I,shuffle:C,distinct:b,base64encode:pe,base64decode:M,encodeUrlComponent:U,encodeUrl:st,decodeUrlComponent:Et,decodeUrl:Gt}})();r.exports=p}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(n,r,a){var l=n("./datetime"),c=n("./functions"),p=n("./utils"),v=n("./parser"),m=n("./signature"),k=function(){"use strict";var _=p.isNumeric,u=p.isArrayOfStrings,f=p.isArrayOfNumbers,d=p.createSequence,x=p.isSequence,A=p.isFunction,w=p.isLambda,H=p.isIterable,V=p.getFunctionArity,Y=p.isDeepEqual,F=Ue(null);function*z(I,C,b){var D,E=b.lookup("__evaluate_entry");switch(E&&E(I,C,b),I.type){case"path":D=yield*it(I,C,b);break;case"binary":D=yield*At(I,C,b);break;case"unary":D=yield*vt(I,C,b);break;case"name":D=Ut(I,C,b);break;case"string":case"number":case"value":D=dt(I,C,b);break;case"wildcard":D=ft(I,C,b);break;case"descendant":D=It(I,C,b);break;case"parent":D=b.lookup(I.slot.label);break;case"condition":D=yield*lt(I,C,b);break;case"block":D=yield*at(I,C,b);break;case"bind":D=yield*nt(I,C,b);break;case"regex":D=Q(I,C,b);break;case"function":D=yield*et(I,C,b);break;case"variable":D=ct(I,C,b);break;case"lambda":D=Xe(I,C,b);break;case"partial":D=yield*Ti(I,C,b);break;case"apply":D=yield*Nt(I,C,b);break;case"transform":D=Yt(I,C,b);break}if(b.async&&(typeof D>"u"||D===null||typeof D.then!="function")&&(D=Promise.resolve(D)),b.async&&typeof D.then=="function"&&I.nextFunction&&typeof D[I.nextFunction]=="function"||(D=yield D),Object.prototype.hasOwnProperty.call(I,"predicate"))for(var N=0;N<I.predicate.length;N++)D=yield*wt(I.predicate[N].expr,D,b);I.type!=="path"&&Object.prototype.hasOwnProperty.call(I,"group")&&(D=yield*G(I.group,D,b));var L=b.lookup("__evaluate_exit");return L&&L(I,C,b,D),D&&x(D)&&!D.tupleStream&&(I.keepArray&&(D.keepSingleton=!0),D.length===0?D=void 0:D.length===1&&(D=D.keepSingleton?D:D[0])),D}function*it(I,C,b){var D;Array.isArray(C)&&I.steps[0].type!=="variable"?D=C:D=d(C);for(var E,N=!1,L=void 0,W=0;W<I.steps.length;W++){var X=I.steps[W];if(X.tuple&&(N=!0),W===0&&X.consarray?E=yield*z(X,D,b):N?L=yield*qt(X,D,L,b):E=yield*pt(X,D,b,W===I.steps.length-1),!N&&(typeof E>"u"||E.length===0))break;typeof X.focus>"u"&&(D=E)}if(N)if(I.tuple)E=L;else for(E=d(),W=0;W<L.length;W++)E.push(L[W]["@"]);return I.keepSingletonArray&&(Array.isArray(E)&&E.cons&&!E.sequence&&(E=d(E)),E.keepSingleton=!0),I.hasOwnProperty("group")&&(E=yield*G(I.group,N?L:E,b)),E}function tt(I,C){var b=Ue(I);for(let D in C)b.bind(D,C[D]);return b}function*pt(I,C,b,D){var E;if(I.type==="sort")return E=yield*bt(I,C,b),I.stages&&(E=yield*Ct(I.stages,E,b)),E;E=d();for(var N=0;N<C.length;N++){var L=yield*z(I,C[N],b);if(I.stages)for(var W=0;W<I.stages.length;W++)L=yield*wt(I.stages[W].expr,L,b);typeof L<"u"&&E.push(L)}var X=d();return D&&E.length===1&&Array.isArray(E[0])&&!x(E[0])?X=E[0]:E.forEach(function(Z){!Array.isArray(Z)||Z.cons?X.push(Z):Z.forEach(mt=>X.push(mt))}),X}function*Ct(I,C,b){for(var D=C,E=0;E<I.length;E++){var N=I[E];switch(N.type){case"filter":D=yield*wt(N.expr,D,b);break;case"index":for(var L=0;L<D.length;L++){var W=D[L];W[N.value]=L}break}}return D}function*qt(I,C,b,D){var E;if(I.type==="sort"){if(b)E=yield*bt(I,b,D);else{var N=yield*bt(I,C,D);E=d(),E.tupleStream=!0;for(var L=0;L<N.length;L++){var W={"@":N[L]};W[I.index]=L,E.push(W)}}return I.stages&&(E=yield*Ct(I.stages,E,D)),E}E=d(),E.tupleStream=!0;var X=D;b===void 0&&(b=C.map(Kt=>({"@":Kt})));for(var Z=0;Z<b.length;Z++){X=tt(D,b[Z]);var mt=yield*z(I,b[Z]["@"],X);if(typeof mt<"u"){Array.isArray(mt)||(mt=[mt]);for(var Bt=0;Bt<mt.length;Bt++)W={},Object.assign(W,b[Z]),mt.tupleStream?Object.assign(W,mt[Bt]):(I.focus?(W[I.focus]=mt[Bt],W["@"]=b[Z]["@"]):W["@"]=mt[Bt],I.index&&(W[I.index]=Bt),I.ancestor&&(W[I.ancestor.label]=b[Z]["@"])),E.push(W)}}return I.stages&&(E=yield*Ct(I.stages,E,D)),E}function*wt(I,C,b){var D=d();if(C&&C.tupleStream&&(D.tupleStream=!0),Array.isArray(C)||(C=d(C)),I.type==="number"){var E=Math.floor(I.value);E<0&&(E=C.length+E);var N=C[E];typeof N<"u"&&(Array.isArray(N)?D=N:D.push(N))}else for(E=0;E<C.length;E++){var N=C[E],L=N,W=b;C.tupleStream&&(L=N["@"],W=tt(b,N));var X=yield*z(I,L,W);_(X)&&(X=[X]),f(X)?X.forEach(function(mt){var Bt=Math.floor(mt);Bt<0&&(Bt=C.length+Bt),Bt===E&&D.push(N)}):c.boolean(X)&&D.push(N)}return D}function*At(I,C,b){var D,E=yield*z(I.lhs,C,b),N=I.value,L=function*(){return yield*z(I.rhs,C,b)};if(N==="and"||N==="or")try{return yield*Et(E,L,N)}catch(X){throw X.position=I.position,X.token=N,X}var W=yield*L();try{switch(N){case"+":case"-":case"*":case"/":case"%":D=pe(E,W,N);break;case"=":case"!=":D=M(E,W,N);break;case"<":case"<=":case">":case">=":D=U(E,W,N);break;case"&":D=rt(E,W);break;case"..":D=J(E,W);break;case"in":D=st(E,W);break}}catch(X){throw X.position=I.position,X.token=N,X}return D}function*vt(I,C,b){var D;switch(I.value){case"-":if(D=yield*z(I.expression,C,b),typeof D>"u")D=void 0;else if(_(D))D=-D;else throw{code:"D1002",stack:new Error().stack,position:I.position,token:I.value,value:D};break;case"[":D=[];for(var E=0;E<I.expressions.length;E++){var N=I.expressions[E],L=yield*z(N,C,b);typeof L<"u"&&(N.value==="["?D.push(L):D=c.append(D,L))}I.consarray&&Object.defineProperty(D,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":D=yield*G(I,C,b);break}return D}function Ut(I,C,b){return c.lookup(C,I.value)}function dt(I){return I.value}function ft(I,C){var b=d();return Array.isArray(C)&&C.outerWrapper&&C.length>0&&(C=C[0]),C!==null&&typeof C=="object"&&Object.keys(C).forEach(function(D){var E=C[D];Array.isArray(E)?(E=ce(E),b=c.append(b,E)):b.push(E)}),b}function ce(I,C){return typeof C>"u"&&(C=[]),Array.isArray(I)?I.forEach(function(b){ce(b,C)}):C.push(I),C}function It(I,C){var b,D=d();return typeof C<"u"&&(ne(C,D),D.length===1?b=D[0]:b=D),b}function ne(I,C){Array.isArray(I)||C.push(I),Array.isArray(I)?I.forEach(function(b){ne(b,C)}):I!==null&&typeof I=="object"&&Object.keys(I).forEach(function(b){ne(I[b],C)})}function pe(I,C,b){var D;if(typeof I<"u"&&!_(I))throw{code:"T2001",stack:new Error().stack,value:I};if(typeof C<"u"&&!_(C))throw{code:"T2002",stack:new Error().stack,value:C};if(typeof I>"u"||typeof C>"u")return D;switch(b){case"+":D=I+C;break;case"-":D=I-C;break;case"*":D=I*C;break;case"/":D=I/C;break;case"%":D=I%C;break}return D}function M(I,C,b){var D,E=typeof I,N=typeof C;if(E==="undefined"||N==="undefined")return!1;switch(b){case"=":D=Y(I,C);break;case"!=":D=!Y(I,C);break}return D}function U(I,C,b){var D,E=typeof I,N=typeof C,L=E==="undefined"||E==="string"||E==="number",W=N==="undefined"||N==="string"||N==="number";if(!L||!W)throw{code:"T2010",stack:new Error().stack,value:E==="string"||E==="number"?C:I};if(!(E==="undefined"||N==="undefined")){if(E!==N)throw{code:"T2009",stack:new Error().stack,value:I,value2:C};switch(b){case"<":D=I<C;break;case"<=":D=I<=C;break;case">":D=I>C;break;case">=":D=I>=C;break}return D}}function st(I,C){var b=!1;if(typeof I>"u"||typeof C>"u")return!1;Array.isArray(C)||(C=[C]);for(var D=0;D<C.length;D++)if(C[D]===I){b=!0;break}return b}function*Et(I,C,b){var D,E=Gt(I);switch(b){case"and":D=E&&Gt(yield*C());break;case"or":D=E||Gt(yield*C());break}return D}function Gt(I){var C=c.boolean(I);return typeof C>"u"?!1:C}function rt(I,C){var b,D="",E="";return typeof I<"u"&&(D=c.string(I)),typeof C<"u"&&(E=c.string(C)),b=D.concat(E),b}function*G(I,C,b){var D={},E={},N=!!(C&&C.tupleStream);Array.isArray(C)||(C=d(C)),C.length===0&&C.push(void 0);for(var L=0;L<C.length;L++)for(var W=C[L],X=N?tt(b,W):b,Z=0;Z<I.lhs.length;Z++){var mt=I.lhs[Z],Bt=yield*z(mt[0],N?W["@"]:W,X);if(typeof Bt!="string"&&Bt!==void 0)throw{code:"T1003",stack:new Error().stack,position:I.position,value:Bt};if(Bt!==void 0){var Kt={data:W,exprIndex:Z};if(E.hasOwnProperty(Bt)){if(E[Bt].exprIndex!==Z)throw{code:"D1009",stack:new Error().stack,position:I.position,value:Bt};E[Bt].data=c.append(E[Bt].data,W)}else E[Bt]=Kt}}for(Bt in E){Kt=E[Bt];var se=Kt.data,X=b;if(N){var de=K(Kt.data);se=de["@"],delete de["@"],X=tt(b,de)}var ge=yield*z(I.lhs[Kt.exprIndex][1],se,X);typeof ge<"u"&&(D[Bt]=ge)}return D}function K(I){if(!Array.isArray(I))return I;var C={};Object.assign(C,I[0]);for(var b=1;b<I.length;b++)for(let D in I[b])C[D]=c.append(C[D],I[b][D]);return C}function J(I,C){var b;if(typeof I<"u"&&!Number.isInteger(I))throw{code:"T2003",stack:new Error().stack,value:I};if(typeof C<"u"&&!Number.isInteger(C))throw{code:"T2004",stack:new Error().stack,value:C};if(typeof I>"u"||typeof C>"u"||I>C)return b;var D=C-I+1;if(D>1e7)throw{code:"D2014",stack:new Error().stack,value:D};b=new Array(D);for(var E=I,N=0;E<=C;E++,N++)b[N]=E;return b.sequence=!0,b}function*nt(I,C,b){var D=yield*z(I.rhs,C,b);return b.bind(I.lhs.value,D),D}function*lt(I,C,b){var D,E=yield*z(I.condition,C,b);return c.boolean(E)?D=yield*z(I.then,C,b):typeof I.else<"u"&&(D=yield*z(I.else,C,b)),D}function*at(I,C,b){for(var D,E=Ue(b),N=0;N<I.expressions.length;N++)D=yield*z(I.expressions[N],C,E);return D}function Q(I){var C=new St.RegexEngine(I.value),b=function(D,E){var N;C.lastIndex=E||0;var L=C.exec(D);if(L!==null){if(N={match:L[0],start:L.index,end:L.index+L[0].length,groups:[]},L.length>1)for(var W=1;W<L.length;W++)N.groups.push(L[W]);N.next=function(){if(!(C.lastIndex>=D.length)){var X=b(D,C.lastIndex);if(X&&X.match==="")throw{code:"D1004",stack:new Error().stack,position:I.position,value:I.value.source};return X}}}return N};return b}function ct(I,C,b){var D;return I.value===""?D=C&&C.outerWrapper?C[0]:C:D=b.lookup(I.value),D}function*bt(I,C,b){var D,E=C,N=!!C.tupleStream,L=function*(X,Z){for(var mt=0,Bt=0;mt===0&&Bt<I.terms.length;Bt++){var Kt=I.terms[Bt],se=X,de=b;N&&(se=X["@"],de=tt(b,X));var ge=yield*z(Kt.expression,se,de);se=Z,de=b,N&&(se=Z["@"],de=tt(b,Z));var xe=yield*z(Kt.expression,se,de),li=typeof ge,ye=typeof xe;if(li==="undefined"){mt=ye==="undefined"?0:1;continue}if(ye==="undefined"){mt=-1;continue}if(!(li==="string"||li==="number")||!(ye==="string"||ye==="number"))throw{code:"T2008",stack:new Error().stack,position:I.position,value:li==="string"||li==="number"?xe:ge};if(li!==ye)throw{code:"T2007",stack:new Error().stack,position:I.position,value:ge,value2:xe};ge!==xe&&(ge<xe?mt=-1:mt=1,Kt.descending===!0&&(mt=-mt))}return mt===1},W={environment:b,input:C};return D=yield*c.sort.apply(W,[E,L]),D}function Yt(I,C,b){var D=function*(E){if(!(typeof E>"u")){var N=b.lookup("clone");if(!A(N))throw{code:"T2013",stack:new Error().stack,position:I.position};var L=yield*$t(N,[E],null,b),W=yield*z(I.pattern,L,b);if(typeof W<"u"){Array.isArray(W)||(W=[W]);for(var X=0;X<W.length;X++){var Z=W[X],mt=yield*z(I.update,Z,b),Bt=typeof mt;if(Bt!=="undefined"){if(Bt!=="object"||mt===null||Array.isArray(mt))throw{code:"T2011",stack:new Error().stack,position:I.update.position,value:mt};for(var Kt in mt)Z[Kt]=mt[Kt]}if(typeof I.delete<"u"){var se=yield*z(I.delete,Z,b);if(typeof se<"u"){var de=se;if(Array.isArray(se)||(se=[se]),!u(se))throw{code:"T2012",stack:new Error().stack,position:I.delete.position,value:de};for(var ge=0;ge<se.length;ge++)typeof Z=="object"&&Z!==null&&delete Z[se[ge]]}}}}return L}};return yt(D,"<(oa):o>")}var xt=v("function($f, $g) { function($x){ $g($f($x)) } }");function*Nt(I,C,b){var D,E=yield*z(I.lhs,C,b);if(I.rhs.type==="function")D=yield*et(I.rhs,C,b,{context:E});else{var N=yield*z(I.rhs,C,b);if(!A(N))throw{code:"T2006",stack:new Error().stack,position:I.position,value:N};if(A(E)){var L=yield*z(xt,null,b);D=yield*$t(L,[E,N],null,b)}else D=yield*$t(N,[E],null,b)}return D}function*et(I,C,b,D){var E,N=yield*z(I.procedure,C,b);if(typeof N>"u"&&I.procedure.type==="path"&&b.lookup(I.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:I.position,token:I.procedure.steps[0].value};var L=[];typeof D<"u"&&L.push(D.context);for(var W=0;W<I.arguments.length;W++){let Z=yield*z(I.arguments[W],C,b);if(A(Z)){let mt=function*(...Bt){return yield*$t(Z,Bt,null,b)};mt.arity=V(Z),L.push(mt)}else L.push(Z)}var X=I.procedure.type==="path"?I.procedure.steps[0].value:I.procedure.value;try{typeof N=="object"&&(N.token=X,N.position=I.position),E=yield*$t(N,L,C,b)}catch(Z){throw Z.position||(Z.position=I.position),Z.token||(Z.token=X),Z}return E}function*$t(I,C,b,D){var E;for(E=yield*Lt(I,C,b,D);w(E)&&E.thunk===!0;){var N=yield*z(E.body.procedure,E.input,E.environment);E.body.procedure.type==="variable"&&(N.token=E.body.procedure.value),N.position=E.body.procedure.position;for(var L=[],W=0;W<E.body.arguments.length;W++)L.push(yield*z(E.body.arguments[W],E.input,E.environment));E=yield*Lt(N,L,b,D)}return E}function*Lt(I,C,b,D){var E;try{var N=C;if(I&&(N=ei(I.signature,C,b)),w(I))E=yield*Je(I,N);else if(I&&I._jsonata_function===!0){var L={environment:D,input:b};E=I.implementation.apply(L,N),H(E)&&(E=yield*E)}else if(typeof I=="function")E=I.apply(b,N),H(E)&&(E=yield*E);else throw{code:"T1006",stack:new Error().stack}}catch(W){throw I&&(typeof W.token>"u"&&typeof I.token<"u"&&(W.token=I.token),W.position=I.position),W}return E}function Xe(I,C,b){var D={_jsonata_lambda:!0,input:C,environment:b,arguments:I.arguments,signature:I.signature,body:I.body};return I.thunk===!0&&(D.thunk=!0),D.apply=function*(E,N){return yield*$t(D,N,C,E.environment)},D}function*Ti(I,C,b){for(var D,E=[],N=0;N<I.arguments.length;N++){var L=I.arguments[N];L.type==="operator"&&L.value==="?"?E.push(L):E.push(yield*z(L,C,b))}var W=yield*z(I.procedure,C,b);if(typeof W>"u"&&I.procedure.type==="path"&&b.lookup(I.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:I.position,token:I.procedure.steps[0].value};if(w(W))D=Ke(W,E);else if(W&&W._jsonata_function===!0)D=Zi(W.implementation,E);else if(typeof W=="function")D=Zi(W,E);else throw{code:"T1008",stack:new Error().stack,position:I.position,token:I.procedure.type==="path"?I.procedure.steps[0].value:I.procedure.value};return D}function ei(I,C,b){if(typeof I>"u")return C;var D=I.validate(C,b);return D}function*Je(I,C){var b,D=Ue(I.environment);return I.arguments.forEach(function(E,N){D.bind(E.value,C[N])}),typeof I.body=="function"?b=yield*an(I.body,D):b=yield*z(I.body,I.input,D),b}function Ke(I,C){var b=Ue(I.environment),D=[];I.arguments.forEach(function(N,L){var W=C[L];W&&W.type==="operator"&&W.value==="?"?D.push(N):b.bind(N.value,W)});var E={_jsonata_lambda:!0,input:I.input,environment:b,arguments:D,body:I.body};return E}function Zi(I,C){var b=Vn(I);b=b.map(function(L){return"$"+L.trim()});var D="function("+b.join(", ")+"){ _ }",E=v(D);E.body=I;var N=Ke(E,C);return N}function*an(I,C){var b=Vn(I),D=b.map(function(L){return C.lookup(L.trim())}),E={environment:C},N=I.apply(E,D);return H(N)&&(N=yield*N),N}function Vn(I){var C=I.toString(),b=/\(([^)]*)\)/.exec(C)[1],D=b.split(",");return D}function yt(I,C){var b={_jsonata_function:!0,implementation:I};return typeof C<"u"&&(b.signature=m(C)),b}function*es(I,C){if(!(typeof I>"u")){var b=this.input;typeof C<"u"&&(b=C,Array.isArray(b)&&!x(b)&&(b=d(b),b.outerWrapper=!0));try{var D=v(I,!1)}catch(N){throw Ci(N),{stack:new Error().stack,code:"D3120",value:N.message,error:N}}try{var E=yield*z(D,b,this.environment)}catch(N){throw Ci(N),{stack:new Error().stack,code:"D3121",value:N.message,error:N}}return E}}function Hn(I){if(!(typeof I>"u"))return JSON.parse(c.string(I))}function Ue(I){var C={};return{bind:function(b,D){C[b]=D},lookup:function(b){var D;return C.hasOwnProperty(b)?D=C[b]:I&&(D=I.lookup(b)),D},timestamp:I?I.timestamp:null,async:I?I.async:!1,global:I?I.global:{ancestry:[null]}}}F.bind("sum",yt(c.sum,"<a<n>:n>")),F.bind("count",yt(c.count,"<a:n>")),F.bind("max",yt(c.max,"<a<n>:n>")),F.bind("min",yt(c.min,"<a<n>:n>")),F.bind("average",yt(c.average,"<a<n>:n>")),F.bind("string",yt(c.string,"<x-b?:s>")),F.bind("substring",yt(c.substring,"<s-nn?:s>")),F.bind("substringBefore",yt(c.substringBefore,"<s-s:s>")),F.bind("substringAfter",yt(c.substringAfter,"<s-s:s>")),F.bind("lowercase",yt(c.lowercase,"<s-:s>")),F.bind("uppercase",yt(c.uppercase,"<s-:s>")),F.bind("length",yt(c.length,"<s-:n>")),F.bind("trim",yt(c.trim,"<s-:s>")),F.bind("pad",yt(c.pad,"<s-ns?:s>")),F.bind("match",yt(c.match,"<s-f<s:o>n?:a<o>>")),F.bind("contains",yt(c.contains,"<s-(sf):b>")),F.bind("replace",yt(c.replace,"<s-(sf)(sf)n?:s>")),F.bind("split",yt(c.split,"<s-(sf)n?:a<s>>")),F.bind("join",yt(c.join,"<a<s>s?:s>")),F.bind("formatNumber",yt(c.formatNumber,"<n-so?:s>")),F.bind("formatBase",yt(c.formatBase,"<n-n?:s>")),F.bind("formatInteger",yt(l.formatInteger,"<n-s:s>")),F.bind("parseInteger",yt(l.parseInteger,"<s-s:n>")),F.bind("number",yt(c.number,"<(nsb)-:n>")),F.bind("floor",yt(c.floor,"<n-:n>")),F.bind("ceil",yt(c.ceil,"<n-:n>")),F.bind("round",yt(c.round,"<n-n?:n>")),F.bind("abs",yt(c.abs,"<n-:n>")),F.bind("sqrt",yt(c.sqrt,"<n-:n>")),F.bind("power",yt(c.power,"<n-n:n>")),F.bind("random",yt(c.random,"<:n>")),F.bind("boolean",yt(c.boolean,"<x-:b>")),F.bind("not",yt(c.not,"<x-:b>")),F.bind("map",yt(c.map,"<af>")),F.bind("zip",yt(c.zip,"<a+>")),F.bind("filter",yt(c.filter,"<af>")),F.bind("single",yt(c.single,"<af?>")),F.bind("reduce",yt(c.foldLeft,"<afj?:j>")),F.bind("sift",yt(c.sift,"<o-f?:o>")),F.bind("keys",yt(c.keys,"<x-:a<s>>")),F.bind("lookup",yt(c.lookup,"<x-s:x>")),F.bind("append",yt(c.append,"<xx:a>")),F.bind("exists",yt(c.exists,"<x:b>")),F.bind("spread",yt(c.spread,"<x-:a<o>>")),F.bind("merge",yt(c.merge,"<a<o>:o>")),F.bind("reverse",yt(c.reverse,"<a:a>")),F.bind("each",yt(c.each,"<o-f:a>")),F.bind("error",yt(c.error,"<s?:x>")),F.bind("assert",yt(c.assert,"<bs?:x>")),F.bind("type",yt(c.type,"<x:s>")),F.bind("sort",yt(c.sort,"<af?:a>")),F.bind("shuffle",yt(c.shuffle,"<a:a>")),F.bind("distinct",yt(c.distinct,"<x:x>")),F.bind("base64encode",yt(c.base64encode,"<s-:s>")),F.bind("base64decode",yt(c.base64decode,"<s-:s>")),F.bind("encodeUrlComponent",yt(c.encodeUrlComponent,"<s-:s>")),F.bind("encodeUrl",yt(c.encodeUrl,"<s-:s>")),F.bind("decodeUrlComponent",yt(c.decodeUrlComponent,"<s-:s>")),F.bind("decodeUrl",yt(c.decodeUrl,"<s-:s>")),F.bind("eval",yt(es,"<sx?:x>")),F.bind("toMillis",yt(l.toMillis,"<s-s?:n>")),F.bind("fromMillis",yt(l.fromMillis,"<n-s?s?:s>")),F.bind("clone",yt(Hn,"<(oa)-:o>"));var Wn={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Ci(I){var C=Wn[I.code];if(typeof C<"u"){var b=C.replace(/\{\{\{([^}]+)}}}/g,function(){return I[arguments[1]]});b=b.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(I[arguments[1]])}),I.message=b}}function St(I,C){var b,D;try{b=v(I,C&&C.recover),D=b.errors,delete b.errors}catch(L){throw Ci(L),L}var E=Ue(F),N=new Date;return E.bind("now",yt(function(L,W){return l.fromMillis(N.getTime(),L,W)},"<s?s?:s>")),E.bind("millis",yt(function(){return N.getTime()},"<:n>")),C&&C.RegexEngine?St.RegexEngine=C.RegexEngine:St.RegexEngine=RegExp,{evaluate:function(L,W,X){if(typeof D<"u"){var Z={code:"S0500",position:0};throw Ci(Z),Z}if(typeof W<"u"){var mt;mt=Ue(E);for(var Bt in W)mt.bind(Bt,W[Bt])}else mt=E;mt.bind("$",L),N=new Date,mt.timestamp=N,Array.isArray(L)&&!x(L)&&(L=d(L),L.outerWrapper=!0);var Kt,se;if(typeof X=="function"){mt.async=!0;var de=function(xe){Ci(xe),X(xe,null)},ge=function(xe){Kt=se.next(xe),Kt.done?X(null,Kt.value):Kt.value.then(ge).catch(de)};se=z(b,L,mt),Kt=se.next(),Kt.value.then(ge).catch(de)}else try{for(se=z(b,L,mt),Kt=se.next();!Kt.done;)Kt=se.next(Kt.value);return Kt.value}catch(xe){throw Ci(xe),xe}},assign:function(L,W){E.bind(L,W)},registerFunction:function(L,W,X){var Z=yt(W,X);E.bind(L,Z)},ast:function(){return b},errors:function(){return D}}}return St.parser=v,St}();r.exports=k},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(n,r,a){var l=n("./signature");let c=(()=>{"use strict";var p={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},v={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},m=function(_){var u=0,f=_.length,d=function(w,H){var V={type:w,value:H,position:u};return V},x=function(){for(var w=u,H=0,V,Y;u<f;){var F=_.charAt(u);if(F==="/"&&_.charAt(u-1)!=="\\"&&H===0){if(V=_.substring(w,u),V==="")throw{code:"S0301",stack:new Error().stack,position:u};for(u++,F=_.charAt(u),w=u;F==="i"||F==="m";)u++,F=_.charAt(u);return Y=_.substring(w,u)+"g",new RegExp(V,Y)}(F==="("||F==="["||F==="{")&&_.charAt(u-1)!=="\\"&&H++,(F===")"||F==="]"||F==="}")&&_.charAt(u-1)!=="\\"&&H--,u++}throw{code:"S0302",stack:new Error().stack,position:u}},A=function(w){if(u>=f)return null;for(var H=_.charAt(u);u<f&&` 	
\r\v`.indexOf(H)>-1;)u++,H=_.charAt(u);if(H==="/"&&_.charAt(u+1)==="*"){var V=u;for(u+=2,H=_.charAt(u);!(H==="*"&&_.charAt(u+1)==="/");)if(H=_.charAt(++u),u>=f)throw{code:"S0106",stack:new Error().stack,position:V};return u+=2,H=_.charAt(u),A(w)}if(w!==!0&&H==="/")return u++,d("regex",x());if(H==="."&&_.charAt(u+1)===".")return u+=2,d("operator","..");if(H===":"&&_.charAt(u+1)==="=")return u+=2,d("operator",":=");if(H==="!"&&_.charAt(u+1)==="=")return u+=2,d("operator","!=");if(H===">"&&_.charAt(u+1)==="=")return u+=2,d("operator",">=");if(H==="<"&&_.charAt(u+1)==="=")return u+=2,d("operator","<=");if(H==="*"&&_.charAt(u+1)==="*")return u+=2,d("operator","**");if(H==="~"&&_.charAt(u+1)===">")return u+=2,d("operator","~>");if(Object.prototype.hasOwnProperty.call(p,H))return u++,d("operator",H);if(H==='"'||H==="'"){var Y=H;u++;for(var F="";u<f;){if(H=_.charAt(u),H==="\\")if(u++,H=_.charAt(u),Object.prototype.hasOwnProperty.call(v,H))F+=v[H];else if(H==="u"){var z=_.substr(u+1,4);if(/^[0-9a-fA-F]+$/.test(z)){var it=parseInt(z,16);F+=String.fromCharCode(it),u+=4}else throw{code:"S0104",stack:new Error().stack,position:u}}else throw{code:"S0103",stack:new Error().stack,position:u,token:H};else{if(H===Y)return u++,d("string",F);F+=H}u++}throw{code:"S0101",stack:new Error().stack,position:u}}var tt=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,pt=tt.exec(_.substring(u));if(pt!==null){var Ct=parseFloat(pt[0]);if(!isNaN(Ct)&&isFinite(Ct))return u+=pt[0].length,d("number",Ct);throw{code:"S0102",stack:new Error().stack,position:u,token:pt[0]}}var qt;if(H==="`"){u++;var wt=_.indexOf("`",u);if(wt!==-1)return qt=_.substring(u,wt),u=wt+1,d("name",qt);throw u=f,{code:"S0105",stack:new Error().stack,position:u}}for(var At=u,vt;;)if(vt=_.charAt(At),At===f||` 	
\r\v`.indexOf(vt)>-1||Object.prototype.hasOwnProperty.call(p,vt)){if(_.charAt(u)==="$")return qt=_.substring(u+1,At),u=At,d("variable",qt);switch(qt=_.substring(u,At),u=At,qt){case"or":case"in":case"and":return d("operator",qt);case"true":return d("value",!0);case"false":return d("value",!1);case"null":return d("value",null);default:return u===f&&qt===""?null:d("name",qt)}}else At++};return A},k=function(_,u){var f,d,x={},A=[],w=function(){var M=[];f.id!=="(end)"&&M.push({type:f.type,value:f.value,position:f.position});for(var U=d();U!==null;)M.push(U),U=d();return M},H={nud:function(){var M={code:"S0211",token:this.value,position:this.position};if(u)return M.remaining=w(),M.type="error",A.push(M),M;throw M.stack=new Error().stack,M}},V=function(M,U){var st=x[M];return U=U||0,st?U>=st.lbp&&(st.lbp=U):(st=Object.create(H),st.id=st.value=M,st.lbp=U,x[M]=st),st},Y=function(M){if(u){M.remaining=w(),A.push(M);var U=x["(error)"];return f=Object.create(U),f.error=M,f.type="(error)",f}else throw M.stack=new Error().stack,M},F=function(M,U){if(M&&f.id!==M){var st;f.id==="(end)"?st="S0203":st="S0202";var Et={code:st,position:f.position,token:f.value,value:M};return Y(Et)}var Gt=d(U);if(Gt===null)return f=x["(end)"],f.position=_.length,f;var rt=Gt.value,G=Gt.type,K;switch(G){case"name":case"variable":K=x["(name)"];break;case"operator":if(K=x[rt],!K)return Y({code:"S0204",stack:new Error().stack,position:Gt.position,token:rt});break;case"string":case"number":case"value":K=x["(literal)"];break;case"regex":G="regex",K=x["(regex)"];break;default:return Y({code:"S0205",stack:new Error().stack,position:Gt.position,token:rt})}return f=Object.create(K),f.value=rt,f.type=G,f.position=Gt.position,f},z=function(M){var U,st=f;for(F(null,!0),U=st.nud();M<f.lbp;)st=f,F(),U=st.led(U);return U},it=function(M){var U=V(M,0);U.nud=function(){return this}},tt=function(M,U,st){var Et=U||p[M],Gt=V(M,Et);return Gt.led=st||function(rt){return this.lhs=rt,this.rhs=z(Et),this.type="binary",this},Gt},pt=function(M,U,st){var Et=V(M,U);return Et.led=st,Et},Ct=function(M,U){var st=V(M);return st.nud=U||function(){return this.expression=z(70),this.type="unary",this},st};it("(end)"),it("(name)"),it("(literal)"),it("(regex)"),V(":"),V(";"),V(","),V(")"),V("]"),V("}"),V(".."),tt("."),tt("+"),tt("-"),tt("*"),tt("/"),tt("%"),tt("="),tt("<"),tt(">"),tt("!="),tt("<="),tt(">="),tt("&"),tt("and"),tt("or"),tt("in"),it("and"),it("or"),it("in"),Ct("-"),tt("~>"),pt("(error)",10,function(M){return this.lhs=M,this.error=f.error,this.remaining=w(),this.type="error",this}),Ct("*",function(){return this.type="wildcard",this}),Ct("**",function(){return this.type="descendant",this}),Ct("%",function(){return this.type="parent",this}),tt("(",p["("],function(M){if(this.procedure=M,this.type="function",this.arguments=[],f.id!==")")for(;f.type==="operator"&&f.id==="?"?(this.type="partial",this.arguments.push(f),F("?")):this.arguments.push(z(0)),f.id===",";)F(",");if(F(")",!0),M.type==="name"&&(M.value==="function"||M.value==="\u03BB")){if(this.arguments.forEach(function(rt,G){if(rt.type!=="variable")return Y({code:"S0208",stack:new Error().stack,position:rt.position,token:rt.value,value:G+1})}),this.type="lambda",f.id==="<"){for(var U=f.position,st=1,Et="<";st>0&&f.id!=="{"&&f.id!=="(end)";){var Gt=F();Gt.id===">"?st--:Gt.id==="<"&&st++,Et+=Gt.value}F(">");try{this.signature=l(Et)}catch(rt){return rt.position=U+rt.offset,Y(rt)}}F("{"),this.body=z(0),F("}")}return this}),Ct("(",function(){for(var M=[];f.id!==")"&&(M.push(z(0)),f.id===";");)F(";");return F(")",!0),this.type="block",this.expressions=M,this}),Ct("[",function(){var M=[];if(f.id!=="]")for(;;){var U=z(0);if(f.id===".."){var st={type:"binary",value:"..",position:f.position,lhs:U};F(".."),st.rhs=z(0),U=st}if(M.push(U),f.id!==",")break;F(",")}return F("]",!0),this.expressions=M,this.type="unary",this}),tt("[",p["["],function(M){if(f.id==="]"){for(var U=M;U&&U.type==="binary"&&U.value==="[";)U=U.lhs;return U.keepArray=!0,F("]"),M}else return this.lhs=M,this.rhs=z(p["]"]),this.type="binary",F("]",!0),this}),tt("^",p["^"],function(M){F("(");for(var U=[];;){var st={descending:!1};if(f.id==="<"?F("<"):f.id===">"&&(st.descending=!0,F(">")),st.expression=z(0),U.push(st),f.id!==",")break;F(",")}return F(")"),this.lhs=M,this.rhs=U,this.type="binary",this});var qt=function(M){var U=[];if(f.id!=="}")for(;;){var st=z(0);F(":");var Et=z(0);if(U.push([st,Et]),f.id!==",")break;F(",")}return F("}",!0),typeof M>"u"?(this.lhs=U,this.type="unary"):(this.lhs=M,this.rhs=U,this.type="binary"),this};Ct("{",qt),tt("{",p["{"],qt),pt(":=",p[":="],function(M){return M.type!=="variable"?Y({code:"S0212",stack:new Error().stack,position:M.position,token:M.value}):(this.lhs=M,this.rhs=z(p[":="]-1),this.type="binary",this)}),tt("@",p["@"],function(M){return this.lhs=M,this.rhs=z(p["@"]),this.rhs.type!=="variable"?Y({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),tt("#",p["#"],function(M){return this.lhs=M,this.rhs=z(p["#"]),this.rhs.type!=="variable"?Y({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),tt("?",p["?"],function(M){return this.type="condition",this.condition=M,this.then=z(0),f.id===":"&&(F(":"),this.else=z(0)),this}),Ct("|",function(){return this.type="transform",this.pattern=z(0),F("|"),this.update=z(0),f.id===","&&(F(","),this.delete=z(0)),F("|"),this});var wt=function(M){var U;if(M.type==="function"&&!M.predicate){var st={type:"lambda",thunk:!0,arguments:[],position:M.position};st.body=M,U=st}else if(M.type==="condition")M.then=wt(M.then),typeof M.else<"u"&&(M.else=wt(M.else)),U=M;else if(M.type==="block"){var Et=M.expressions.length;Et>0&&(M.expressions[Et-1]=wt(M.expressions[Et-1])),U=M}else U=M;return U},At=0,vt=0,Ut=[],dt=function(M,U){switch(M.type){case"name":case"wildcard":U.level--,U.level===0&&(typeof M.ancestor>"u"||(Ut[U.index].slot.label=M.ancestor.label),M.ancestor=U,M.tuple=!0);break;case"parent":U.level++;break;case"block":M.expressions.length>0&&(M.tuple=!0,U=dt(M.expressions[M.expressions.length-1],U));break;case"path":M.tuple=!0;var st=M.steps.length-1;for(U=dt(M.steps[st--],U);U.level>0&&st>=0;)U=dt(M.steps[st--],U);break;default:throw{code:"S0217",token:M.type,position:M.position}}return U},ft=function(M,U){if(typeof U.seekingParent<"u"||U.type==="parent"){var st=typeof U.seekingParent<"u"?U.seekingParent:[];U.type==="parent"&&st.push(U.slot),typeof M.seekingParent>"u"?M.seekingParent=st:Array.prototype.push.apply(M.seekingParent,st)}},ce=function(M){var U=M.steps.length-1,st=M.steps[U],Et=typeof st.seekingParent<"u"?st.seekingParent:[];st.type==="parent"&&Et.push(st.slot);for(var Gt=0;Gt<Et.length;Gt++){var rt=Et[Gt];for(U=M.steps.length-2;rt.level>0;){if(U<0){typeof M.seekingParent>"u"?M.seekingParent=[rt]:M.seekingParent.push(rt);break}for(var G=M.steps[U--];U>=0&&G.focus&&M.steps[U].focus;)G=M.steps[U--];rt=dt(G,rt)}}},It=function(M){var U;switch(M.type){case"binary":switch(M.value){case".":var st=It(M.lhs);st.type==="path"?U=st:U={type:"path",steps:[st]},st.type==="parent"&&(U.seekingParent=[st.slot]);var Et=It(M.rhs);Et.type==="function"&&Et.procedure.type==="path"&&Et.procedure.steps.length===1&&Et.procedure.steps[0].type==="name"&&U.steps[U.steps.length-1].type==="function"&&(U.steps[U.steps.length-1].nextFunction=Et.procedure.steps[0].value),Et.type==="path"?Array.prototype.push.apply(U.steps,Et.steps):(typeof Et.predicate<"u"&&(Et.stages=Et.predicate,delete Et.predicate),U.steps.push(Et)),U.steps.filter(function(ct){if(ct.type==="number"||ct.type==="value")throw{code:"S0213",stack:new Error().stack,position:ct.position,value:ct.value};return ct.type==="string"}).forEach(function(ct){ct.type="name"}),U.steps.filter(function(ct){return ct.keepArray===!0}).length>0&&(U.keepSingletonArray=!0);var Gt=U.steps[0];Gt.type==="unary"&&Gt.value==="["&&(Gt.consarray=!0);var rt=U.steps[U.steps.length-1];rt.type==="unary"&&rt.value==="["&&(rt.consarray=!0),ce(U);break;case"[":U=It(M.lhs);var G=U,K="predicate";if(U.type==="path"&&(G=U.steps[U.steps.length-1],K="stages"),typeof G.group<"u")throw{code:"S0209",stack:new Error().stack,position:M.position};typeof G[K]>"u"&&(G[K]=[]);var J=It(M.rhs);typeof J.seekingParent<"u"&&(J.seekingParent.forEach(ct=>{ct.level===1?dt(G,ct):ct.level--}),ft(G,J)),G[K].push({type:"filter",expr:J,position:M.position});break;case"{":if(U=It(M.lhs),typeof U.group<"u")throw{code:"S0210",stack:new Error().stack,position:M.position};U.group={lhs:M.rhs.map(function(ct){return[It(ct[0]),It(ct[1])]}),position:M.position};break;case"^":U=It(M.lhs),U.type!=="path"&&(U={type:"path",steps:[U]});var nt={type:"sort",position:M.position};nt.terms=M.rhs.map(function(ct){var bt=It(ct.expression);return ft(nt,bt),{descending:ct.descending,expression:bt}}),U.steps.push(nt),ce(U);break;case":=":U={type:"bind",value:M.value,position:M.position},U.lhs=It(M.lhs),U.rhs=It(M.rhs),ft(U,U.rhs);break;case"@":if(U=It(M.lhs),G=U,U.type==="path"&&(G=U.steps[U.steps.length-1]),typeof G.stages<"u"||typeof G.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:M.position};if(G.type==="sort")throw{code:"S0216",stack:new Error().stack,position:M.position};M.keepArray&&(G.keepArray=!0),G.focus=M.rhs.value,G.tuple=!0;break;case"#":U=It(M.lhs),G=U,U.type==="path"?G=U.steps[U.steps.length-1]:(U={type:"path",steps:[U]},typeof G.predicate<"u"&&(G.stages=G.predicate,delete G.predicate)),typeof G.stages>"u"?G.index=M.rhs.value:G.stages.push({type:"index",value:M.rhs.value,position:M.position}),G.tuple=!0;break;case"~>":U={type:"apply",value:M.value,position:M.position},U.lhs=It(M.lhs),U.rhs=It(M.rhs);break;default:U={type:M.type,value:M.value,position:M.position},U.lhs=It(M.lhs),U.rhs=It(M.rhs),ft(U,U.lhs),ft(U,U.rhs)}break;case"unary":U={type:M.type,value:M.value,position:M.position},M.value==="["?U.expressions=M.expressions.map(function(ct){var bt=It(ct);return ft(U,bt),bt}):M.value==="{"?U.lhs=M.lhs.map(function(ct){var bt=It(ct[0]);ft(U,bt);var Yt=It(ct[1]);return ft(U,Yt),[bt,Yt]}):(U.expression=It(M.expression),M.value==="-"&&U.expression.type==="number"?(U=U.expression,U.value=-U.value):ft(U,U.expression));break;case"function":case"partial":U={type:M.type,name:M.name,value:M.value,position:M.position},U.arguments=M.arguments.map(function(ct){var bt=It(ct);return ft(U,bt),bt}),U.procedure=It(M.procedure);break;case"lambda":U={type:M.type,arguments:M.arguments,signature:M.signature,position:M.position};var lt=It(M.body);U.body=wt(lt);break;case"condition":U={type:M.type,position:M.position},U.condition=It(M.condition),ft(U,U.condition),U.then=It(M.then),ft(U,U.then),typeof M.else<"u"&&(U.else=It(M.else),ft(U,U.else));break;case"transform":U={type:M.type,position:M.position},U.pattern=It(M.pattern),U.update=It(M.update),typeof M.delete<"u"&&(U.delete=It(M.delete));break;case"block":U={type:M.type,position:M.position},U.expressions=M.expressions.map(function(ct){var bt=It(ct);return ft(U,bt),(bt.consarray||bt.type==="path"&&bt.steps[0].consarray)&&(U.consarray=!0),bt});break;case"name":U={type:"path",steps:[M]},M.keepArray&&(U.keepSingletonArray=!0);break;case"parent":U={type:"parent",slot:{label:"!"+At++,level:1,index:vt++}},Ut.push(U);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":U=M;break;case"operator":if(M.value==="and"||M.value==="or"||M.value==="in")M.type="name",U=It(M);else if(M.value==="?")U=M;else throw{code:"S0201",stack:new Error().stack,position:M.position,token:M.value};break;case"error":U=M,M.lhs&&(U=It(M.lhs));break;default:var at="S0206";M.id==="(end)"&&(at="S0207");var Q={code:at,position:M.position,token:M.value};if(u)return A.push(Q),{type:"error",error:Q};throw Q.stack=new Error().stack,Q}return M.keepArray&&(U.keepArray=!0),U};d=m(_),F();var ne=z(0);if(f.id!=="(end)"){var pe={code:"S0201",position:f.position,token:f.value};Y(pe)}if(ne=It(ne),ne.type==="parent"||typeof ne.seekingParent<"u")throw{code:"S0217",token:ne.type,position:ne.position};return A.length>0&&(ne.errors=A),ne};return k})();r.exports=c},{"./signature":5}],5:[function(n,r,a){var l=n("./utils");let c=(()=>{"use strict";var p={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function v(m){for(var k=1,_=[],u={},f=u;k<m.length;){var d=m.charAt(k);if(d===":")break;var x=function(){_.push(u),f=u,u={}},A=function(tt,pt,Ct,qt){for(var wt=1,At=pt;At<tt.length;)if(At++,d=tt.charAt(At),d===qt){if(wt--,wt===0)break}else d===Ct&&wt++;return At};switch(d){case"s":case"n":case"b":case"l":case"o":u.regex="["+d+"m]",u.type=d,x();break;case"a":u.regex="[asnblfom]",u.type=d,u.array=!0,x();break;case"f":u.regex="f",u.type=d,x();break;case"j":u.regex="[asnblom]",u.type=d,x();break;case"x":u.regex="[asnblfom]",u.type=d,x();break;case"-":f.context=!0,f.contextRegex=new RegExp(f.regex),f.regex+="?";break;case"?":case"+":f.regex+=d;break;case"(":var w=A(m,k,"(",")"),H=m.substring(k+1,w);if(H.indexOf("<")===-1)u.regex="["+H+"m]";else throw{code:"S0402",stack:new Error().stack,value:H,offset:k};u.type="("+H+")",k=w,x();break;case"<":if(f.type==="a"||f.type==="f"){var V=A(m,k,"<",">");f.subtype=m.substring(k+1,V),k=V}else throw{code:"S0401",stack:new Error().stack,value:f.type,offset:k};break}k++}var Y="^"+_.map(function(tt){return"("+tt.regex+")"}).join("")+"$",F=new RegExp(Y),z=function(tt){var pt;if(l.isFunction(tt))pt="f";else{var Ct=typeof tt;switch(Ct){case"string":pt="s";break;case"number":pt="n";break;case"boolean":pt="b";break;case"object":tt===null?pt="l":Array.isArray(tt)?pt="a":pt="o";break;case"undefined":default:pt="m"}}return pt},it=function(tt,pt){for(var Ct="^",qt=0,wt=0;wt<_.length;wt++){Ct+=_[wt].regex;var At=pt.match(Ct);if(At===null)throw{code:"T0410",stack:new Error().stack,value:tt[qt],index:qt+1};qt=At[0].length}throw{code:"T0410",stack:new Error().stack,value:tt[qt],index:qt+1}};return{definition:m,validate:function(tt,pt){var Ct="";tt.forEach(function(vt){Ct+=z(vt)});var qt=F.exec(Ct);if(qt){var wt=[],At=0;return _.forEach(function(vt,Ut){var dt=tt[At],ft=qt[Ut+1];if(ft==="")if(vt.context&&vt.contextRegex){var ce=z(pt);if(vt.contextRegex.test(ce))wt.push(pt);else throw{code:"T0411",stack:new Error().stack,value:pt,index:At+1}}else wt.push(dt),At++;else ft.split("").forEach(function(It){if(vt.type==="a"){if(It==="m")dt=void 0;else{dt=tt[At];var ne=!0;if(typeof vt.subtype<"u"){if(It!=="a"&&ft!==vt.subtype)ne=!1;else if(It==="a"&&dt.length>0){var pe=z(dt[0]);if(pe!==vt.subtype.charAt(0))ne=!1;else{var M=dt.filter(function(U){return z(U)!==pe});ne=M.length===0}}}if(!ne)throw{code:"T0412",stack:new Error().stack,value:dt,index:At+1,type:p[vt.subtype]};It!=="a"&&(dt=[dt])}wt.push(dt),At++}else wt.push(dt),At++})}),wt}it(tt,Ct)}}}return v})();r.exports=c},{"./utils":6}],6:[function(n,r,a){let l=(()=>{"use strict";function c(V){var Y=!1;if(typeof V=="number"&&(Y=!isNaN(V),Y&&!isFinite(V)))throw{code:"D1001",value:V,stack:new Error().stack};return Y}function p(V){var Y=!1;return Array.isArray(V)&&(Y=V.filter(function(F){return typeof F!="string"}).length===0),Y}function v(V){var Y=!1;return Array.isArray(V)&&(Y=V.filter(function(F){return!c(F)}).length===0),Y}function m(){var V=[];return V.sequence=!0,arguments.length===1&&V.push(arguments[0]),V}function k(V){return V.sequence===!0&&Array.isArray(V)}function _(V){return V&&(V._jsonata_function===!0||V._jsonata_lambda===!0)||typeof V=="function"}function u(V){var Y=typeof V.arity=="number"?V.arity:typeof V.implementation=="function"?V.implementation.length:typeof V.length=="number"?V.length:V.arguments.length;return Y}function f(V){return V&&V._jsonata_lambda===!0}var d=typeof Symbol=="function"?Symbol:{},x=d.iterator||"@@iterator";function A(V){return typeof V=="object"&&V!==null&&x in V&&"next"in V&&typeof V.next=="function"}function w(V,Y){if(V===Y)return!0;if(typeof V=="object"&&typeof Y=="object"&&V!==null&&Y!==null){if(Array.isArray(V)&&Array.isArray(Y)){if(V.length!==Y.length)return!1;for(var F=0;F<V.length;F++)if(!w(V[F],Y[F]))return!1;return!0}var z=Object.getOwnPropertyNames(V),it=Object.getOwnPropertyNames(Y);if(z.length!==it.length)return!1;for(z=z.sort(),it=it.sort(),F=0;F<z.length;F++)if(z[F]!==it[F])return!1;for(F=0;F<z.length;F++){var tt=z[F];if(!w(V[tt],Y[tt]))return!1}return!0}return!1}function H(V){var Y=[];for(let F of V)Y.push(F);return Y}return{isNumeric:c,isArrayOfStrings:p,isArrayOfNumbers:v,createSequence:m,isSequence:k,isFunction:_,isLambda:f,isIterable:A,getFunctionArity:u,isDeepEqual:w,stringToArray:H}})();r.exports=l},{}]},{},[3])(3)})});var Sh=j(Ln=>{"use strict";var jb=Ln&&Ln.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Ln,"__esModule",{value:!0});Ln.locEnd=Ln.locStart=Ln.parse=void 0;var Xb=jb(jf()),Kb=i=>{try{let t=[],e=i.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let r of e){let a=r.index;if(a===void 0)continue;let l=r[1];!l||t.push({position:a,value:l.trim()})}let n=(0,Xb.default)(i).ast();return Object.assign(Object.assign({},n),{jsonataComments:t})}catch(t){let e=t,r=["code","position","token"].filter(l=>e[l]!==void 0).map(l=>`${l}: ${e[l]}`),a=[e.message,...r].join(", ");throw new Error(a)}};Ln.parse=Kb;var Qb=i=>i.position;Ln.locStart=Qb;var $b=()=>0;Ln.locEnd=$b});var Zf=j(Bn=>{"use strict";var Zb=Bn&&Bn.__createBinding||(Object.create?function(i,t,e,n){n===void 0&&(n=e),Object.defineProperty(i,n,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,n){n===void 0&&(n=e),i[n]=t[e]}),tS=Bn&&Bn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),eS=Bn&&Bn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Zb(t,i,e);return tS(t,i),t};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.print=void 0;var iS=eS(require("prettier")),Xf=[],Zo=-1,nS=(i,t,e)=>{var n,r;let a=i.getValue();"jsonataComments"in a&&(Zo=-1,Xf=a.jsonataComments);let l=(r=a.type==="path"?(n=a.steps[0])===null||n===void 0?void 0:n.position:a.position)!==null&&r!==void 0?r:Zo,c=Xf.filter(m=>m.position>Zo&&m.position<l);Zo=l;let p=c.map(rS),v=sS(a,i,t,e);return p.length>0?Oe([p,v]):v};Bn.print=nS;var sS=(i,...t)=>{if(i.type==="binary")return oS(i,...t);if(i.type==="function")return Kf(i,...t);if(i.type==="partial")return Kf(i,...t);if(i.type==="variable")return cS(i,...t);if(i.type==="wildcard")return pS(i,...t);if(i.type==="descendant")return dS(i,...t);if(i.type==="operator")return fS(i,...t);if(i.type==="number")return hS(i,...t);if(i.type==="string")return uS(i,...t);if(i.type==="name")return aS(i,...t);if(i.type==="filter")return mS(i,...t);if(i.type==="bind")return gS(i,...t);if(i.type==="lambda")return _S(i,...t);if(i.type==="condition")return xS(i,...t);if(i.type==="value")return vS(i,...t);if(i.type==="block")return yS(i,...t);if(i.type==="path")return lS(i,...t);if(i.type==="apply")return kS(i,...t);if(i.type==="sort")return TS(i,...t);if(i.type==="unary")return AS(i,...t);if(i.type==="parent")return IS(i,...t);if(i.type==="regex")return OS(i,...t);throw new Error(`Unknown node type: ${i.type}`)},{group:Oe,indent:Hi,join:er,line:Fn,hardline:Os,breakParent:Dh,softline:Rn}=iS.doc.builders,rS=i=>Oe(["/* ",i.value," */",Os]),oS=(i,t,e,n)=>i.value===".."?Oe([n("lhs"),Hi([Rn,i.value,n("rhs")])]):Oe([n("lhs"),Hi([Fn,i.value," ",n("rhs")])]),aS=(i,t,e,n)=>Oe([wS(i.value),Qi(i,t,e,n),rn(i),on(i),ta(i,t,e,n),Xi(i,t,e,n),Ki(i)]),hS=(i,t,e,n)=>Oe([JSON.stringify(i.value),Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),uS=(i,t,e,n)=>Oe([JSON.stringify(i.value),Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),lS=(i,t,e,n)=>{let r=i.steps.flatMap((a,l)=>l===0?n(["steps",l]):a.type==="sort"?Hi(["^",n(["steps",l])]):Hi([Rn,".",n(["steps",l])]));return Oe([...r,Qi(i,t,e,n)])},Kf=(i,t,e,n)=>Oe([n("procedure"),"(",Qf(i,t,e,n),")",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),Qf=(i,t,e,n)=>{var r;if(!(!((r=i.arguments)===null||r===void 0)&&r.length))return"";if(i.arguments.length===1)return n(["arguments",0]);let a=er([",",Fn],t.map(n,"arguments"));return[Hi([Rn,a]),Rn]},cS=(i,t,e,n)=>Oe(["$",i.value,Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i),ta(i,t,e,n)]),fS=i=>i.value,pS=i=>i.value,dS=i=>i.value,mS=(i,t,e,n)=>Oe(["[",Hi([Rn,n("expr")]),Rn,"]"]),gS=(i,t,e,n)=>Oe([n("lhs")," ",i.value," ",n("rhs")]),_S=(i,t,e,n)=>i.thunk?n("body"):Oe(["function(",Qf(i,t,e,n),") {",Hi([Fn,n("body")]),Fn,"}",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),xS=(i,t,e,n)=>{let r=t.getParentNode(),l=r?.type==="condition"?[Os,Dh]:Fn;return Oe([n("condition"),Hi([l,"? ",n("then")]),i.else?Hi([l,": ",n("else")]):""])},vS=(i,t,e,n)=>Oe([ES(i,t,e,n),Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),ES=i=>i.value===null?"null":i.value===!1?"false":i.value===!0?"true":JSON.stringify(i.value),yS=(i,t,e,n)=>{if(i.expressions.length===0)return Oe(["()",Xi(i,t,e,n),Ki(i)]);if(i.expressions.length===1)return Oe(["(",n(["expressions",0]),")",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i),ta(i,t,e,n)]);let r=er([";",Os],t.map(n,"expressions"));return Oe(["(",Hi([Os,r]),Os,")",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)])},kS=(i,t,e,n)=>Oe([n("lhs"),Hi([Fn,i.value," ",n("rhs")])]),TS=(i,t,e,n)=>{let r=i.terms.map((l,c)=>[CS(l),n(["terms",c,"expression"])]),a=er([",",Fn],r);return Oe(["(",Hi([Rn,a]),Rn,")"])},CS=i=>i.descending?">":"<",AS=(i,t,e,n)=>{if(i.value==="{")return bS(i,t,e,n);if(i.value==="[")return DS(i,t,e,n);if(i.value==="-")return NS(i,t,e,n);throw new Error("Unhandled unary node "+i.value)},bS=(i,t,e,n)=>Oe(["{",SS(i,t,e,n),"}",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)]),SS=(i,t,e,n)=>{if(i.lhs.length===0)return"";let r=i.lhs.map((p,v)=>Oe([n(["lhs",v,0]),": ",n(["lhs",v,1])])),l=i.lhs.some(p=>$f(p[1]))?[Os,Dh]:Fn,c=er([",",l],r);return[Hi([l,c]),l]},$f=i=>{if(i.type!=="unary")return!1;if(i.value==="["||i.value==="{")return!0},DS=(i,t,e,n)=>{let r=er([",",Fn],t.map(n,"expressions"));return Oe(["[",Hi([Rn,r]),Rn,"]",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)])},NS=(i,t,e,n)=>Oe(["-",n("expression")]),IS=(i,t,e,n)=>Oe(["%",Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i),ta(i,t,e,n)]),PS=["i","m"],OS=(i,t,e,n)=>{let r=PS.filter(a=>i.value.flags.includes(a)).join("");return Oe([`/${i.value.source}/${r}`,Qi(i,t,e,n),rn(i),on(i),Xi(i,t,e,n),Ki(i)])},rn=i=>i.focus?"@$"+i.focus:"",on=i=>i.index?"#$"+i.index:"",Xi=(i,t,e,n)=>i.predicate?t.map(n,"predicate"):"",ta=(i,t,e,n)=>i.stages?t.map(n,"stages"):"",Ki=i=>i.keepArray?"[]":"",Qi=(i,t,e,n)=>{if(i.group===void 0)return"";if(i.group.lhs.length===0)return"{}";let r=i.group.lhs.map((p,v)=>Oe([n(["group","lhs",v,0]),": ",n(["group","lhs",v,1])])),l=i.group.lhs.some(p=>$f(p[1]))?[Os,Dh]:Fn,c=er([",",l],r);return Oe(["{",Hi([l,c]),l,"}"])},wS=i=>i.startsWith("`")&&i.endsWith("`")?i:i.startsWith('"')&&i.endsWith('"')?`\`${i.slice(1,-1)}\``:/\s/.test(i)?`\`${i}\``:["null","false","true"].includes(i)?`\`${i}\``:/^\d+/.test(i)?`\`${i}\``:/[^a-zA-Z_[\]\d]/.test(i)?`\`${i}\``:i});var tp=j(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.printers=Ii.parsers=Ii.languages=Ii.AST_FORMAT_NAME=Ii.AST_PARSER_NAME=void 0;var Nh=Sh(),LS=Zf();Ii.AST_PARSER_NAME="JSONata";Ii.AST_FORMAT_NAME="JSONataASTNode";Ii.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[Ii.AST_PARSER_NAME]}];Ii.parsers={[Ii.AST_PARSER_NAME]:{astFormat:Ii.AST_FORMAT_NAME,parse:Nh.parse,locStart:Nh.locStart,locEnd:Nh.locEnd}};Ii.printers={[Ii.AST_FORMAT_NAME]:{print:LS.print}}});var sp=j(gn=>{"use strict";var FS=gn&&gn.__createBinding||(Object.create?function(i,t,e,n){n===void 0&&(n=e),Object.defineProperty(i,n,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,n){n===void 0&&(n=e),i[n]=t[e]}),RS=gn&&gn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),ip=gn&&gn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&FS(t,i,e);return RS(t,i),t};Object.defineProperty(gn,"__esModule",{value:!0});gn.serializeJsonata=gn.formatJsonata=void 0;var ir=ip(tp()),ea=ip(require("prettier")),ep=Sh();function BS(i,t){return np(),ea.format(i,Object.assign({parser:ir.AST_PARSER_NAME,plugins:[ir],printWidth:150,tabWidth:2,useTabs:!1},t))}gn.formatJsonata=BS;function MS(i,t){let e=US(i);return np(),ea.format("ignore text input",Object.assign({parser:ir.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}gn.serializeJsonata=MS;var US=i=>Object.assign(Object.assign({},ir),{parsers:{[ir.AST_PARSER_NAME]:{astFormat:ir.AST_FORMAT_NAME,parse:()=>i,locStart:ep.locStart,locEnd:ep.locEnd}}});function np(){"clearConfigCache"in ea&&ea.clearConfigCache()}});var $,ia=Dt(()=>{"use strict";$=class{};$.IfStatement="if",$.CallStatement="call",$.TernaryStatement="ternary",$.Addition="addition",$.Substraction="subtraction",$.Multiplication="multiplication",$.Division="division",$.Modulus="modulus",$.Exponentiation="exponentiation",$.BinCompare="compare",$.Concat="concat",$.GreaterThan="greater_than",$.GreaterThanEqual="greater_than_equal",$.LessThan="less_than",$.LessThanEqual="less_than_equal",$.BitwiseAnd="bitwise_and",$.BitwiseOr="bitiwse_or",$.BitwiseXor="bitiwse_xor",$.LeftShift="left_shift",$.RightShift="right_shift",$.Equality="equality",$.Identity="identitiy",$.Inequality="inequality",$.NotIdentity="not_identity",$.CompAnd="and",$.CompOr="or",$.Xor="xor",$.Assignment="assign",$.AdditionAssignment="assign_addition",$.SubtractionAssignment="assign_subtraciton",$.MultiplicationAssignment="assign_multiplication",$.DivisionAssignment="assign_division",$.ModulusAssignment="assign_modulus",$.ConcatenationAssignment="assign_concat",$.BitwiseAndAssignment="assign_bitwise_and",$.BitwiseOrAssignment="assign_bitwise_or",$.BitwiseXorAssignment="assign_bitwise_xor",$.LeftShiftAssignment="assign_left_shift",$.RightShiftAssignment="assign_right_shift"});function sr(){return{enabled:!0,directivesEnabled:!0,excludedDirectives:["if","unless","elseif","for","forelse","foreach"],allowedMethodNames:["class"],directives:[],bladePhpEnabled:!0,phpTagsEnabled:!0,phpTagRules:[],ignoredLanguageStructures:[$.CallStatement,$.IfStatement,$.TernaryStatement,$.BinCompare,$.Addition,$.Substraction,$.Multiplication,$.Division,$.Modulus,$.Exponentiation,$.Concat,$.GreaterThan,$.GreaterThanEqual,$.LessThan,$.LessThanEqual,$.BitwiseAnd,$.BitwiseOr,$.BitwiseXor,$.LeftShift,$.RightShift,$.Equality,$.Identity,$.Inequality,$.NotIdentity,$.CompAnd,$.CompOr,$.Xor,$.AdditionAssignment,$.SubtractionAssignment,$.MultiplicationAssignment,$.DivisionAssignment,$.ModulusAssignment,$.ConcatenationAssignment,$.BitwiseAndAssignment,$.BitwiseOrAssignment,$.BitwiseXorAssignment,$.LeftShiftAssignment,$.RightShiftAssignment],bladeEchoEnabled:!0,bladeEchoRules:[],documentRules:{includeWhen:[],excludeWhen:[]},stringRules:{includeWhen:[],excludeWhen:[]}}}function rp(i){var r,a,l,c,p,v,m,k,_,u,f;let t=sr();function e(d){var x,A;return{includeWhen:(x=d.includeWhen)!=null?x:[],excludeWhen:(A=d.excludeWhen)!=null?A:[]}}function n(d,x){var A,w;return!d||!d.includeWhen&&!d.excludeWhen?x:{excludeWhen:(A=d.excludeWhen)!=null?A:[],includeWhen:(w=d.includeWhen)!=null?w:[]}}return{enabled:(r=i.enabled)!=null?r:t.enabled,allowedMethodNames:(a=i.allowedMethodNames)!=null?a:t.allowedMethodNames,directivesEnabled:(l=i.directivesEnabled)!=null?l:t.directivesEnabled,excludedDirectives:(c=i.excludedDirectives)!=null?c:t.excludedDirectives,directives:((p=i.directives)!=null?p:t.directives).map(e),bladePhpEnabled:(v=i.bladePhpEnabled)!=null?v:t.bladePhpEnabled,phpTagsEnabled:(m=i.phpTagsEnabled)!=null?m:t.phpTagsEnabled,phpTagRules:((k=i.phpTagRules)!=null?k:t.phpTagRules).map(e),ignoredLanguageStructures:(_=i.ignoredLanguageStructures)!=null?_:t.ignoredLanguageStructures,bladeEchoEnabled:(u=i.bladeEchoEnabled)!=null?u:t.bladeEchoEnabled,bladeEchoRules:((f=i.bladeEchoRules)!=null?f:t.bladeEchoRules).map(e),documentRules:n(i.documentRules,t.documentRules),stringRules:n(i.stringRules,t.stringRules)}}var nr,wr=Dt(()=>{"use strict";ia();Pe();nr=class{constructor(t){this.directiveExcludeRules=[];this.directiveIncludeRules=[];this.phpTagExcludeRules=[];this.phpTagIncludeRules=[];this.echoExcludeRules=[];this.echoIncludeRules=[];this.documentExcludeRules=[];this.documentIncludeRules=[];this.stringExcludeRules=[];this.stringIncludeRules=[];this.config=t,this.directiveExcludeRules=this.getExcludeRules(t.directives),this.directiveIncludeRules=this.getIncludeRules(t.directives),this.phpTagExcludeRules=this.getExcludeRules(t.phpTagRules),this.phpTagIncludeRules=this.getIncludeRules(t.phpTagRules),this.echoExcludeRules=this.getExcludeRules(t.bladeEchoRules),this.echoIncludeRules=this.getIncludeRules(t.bladeEchoRules),this.documentExcludeRules=t.documentRules.excludeWhen,this.documentIncludeRules=t.documentRules.includeWhen,this.stringExcludeRules=t.stringRules.excludeWhen,this.stringIncludeRules=t.stringRules.includeWhen}getIncludeRules(t){let e=[];return t.forEach(n=>{e=e.concat(n.includeWhen)}),e}getExcludeRules(t){let e=[];return t.forEach(n=>{e=e.concat(n.excludeWhen)}),e}passes(t,e){if(e.length==0)return!0;for(let n=0;n<e.length;n++)if(new RegExp(e[n]).test(t))return!0;return!1}canTransformDocument(t){if(!this.config.enabled)return!1;let e=t.getContent();return this.documentExcludeRules.length>0&&!this.passes(e,this.documentExcludeRules)?!1:this.passes(e,this.documentIncludeRules)}canTransformString(t){return this.stringExcludeRules.length>0&&this.passes(t,this.stringExcludeRules)?!1:this.passes(t,this.stringIncludeRules)}canTransform(t,e,n){return e.length>0&&this.passes(t,e)||!this.passes(t,n)||this.stringExcludeRules.length>0&&this.passes(t,this.stringExcludeRules)?!1:this.passes(t,this.stringIncludeRules)}canTransformBladeEcho(t){return!this.config.enabled||!this.config.bladeEchoEnabled?!1:this.canTransform(t.content,this.echoExcludeRules,this.echoIncludeRules)}canTransformBladePhp(t){return!this.config.enabled||!this.config.bladePhpEnabled?!1:this.canTransform(t.documentContent,this.phpTagExcludeRules,this.phpTagIncludeRules)}canTransformInlinePhp(t){return!this.config.enabled||!this.config.phpTagsEnabled?!1:this.canTransform(t.sourceContent,this.phpTagExcludeRules,this.phpTagIncludeRules)}canTransformDirective(t){if(!this.config.enabled||!this.config.directivesEnabled)return!1;let e=t.directiveName;return t.originalAbstractNode!=null&&t.originalAbstractNode instanceof _t&&(e=t.originalAbstractNode.directiveName),e=e.toLowerCase(),this.config.excludedDirectives.length>0&&(this.config.excludedDirectives.includes(e)||this.config.excludedDirectives.includes(t.directiveName.toLocaleLowerCase()))?!1:this.canTransform(t.sourceContent,this.directiveExcludeRules,this.directiveIncludeRules)}}});function op(i){Oh=i}function ap(){return VS}function hp(i){if(Oh!=null)return Oh;let t=WS(i);if(t==null||ws.existsSync(t)==!1)return Lr;let e=ws.readFileSync(t,{encoding:"utf8"});try{let n=JSON.parse(e),r=HS(n);if(r.useLaravelPint){if(r.pintCommand.length==0){let a=t.substring(0,t.length-Ph.length)+"/vendor/bin/pint";ws.existsSync(a)&&(r.pintCommand=`php ${a} {file}`)}if(r.pintTempDirectory.trim().length==0&&(r.pintTempDirectory=__dirname+"/_temp/"),r.pintCacheDirectory.trim().length==0&&(r.pintCacheDirectory=__dirname+"/_cache/"),r.pintTempDirectory.trim().length>0&&(r.pintTempDirectory=Ih(r.pintTempDirectory.trim())),r.pintCacheDirectory.trim().length>0&&(r.pintCacheDirectory=Ih(r.pintCacheDirectory.trim())),r.pintConfigPath.trim().length>0)r.pintConfigPath=Ih(r.pintConfigPath.trim());else{let a=t.substring(0,t.length-Ph.length)+"/pint.json";ws.existsSync(a)&&(r.pintConfigPath=a)}}return r}catch(n){console.log(n)}return Lr}function HS(i){let t=Nr,e=0,n=1,r=4,a=!0,l=!0,c=!0,p=[],v=[],m=null,k="block",_=!1,u="",f="",d="",x=!0,A="",w=sr();return typeof i.ignoreDirectives!="undefined"&&i.ignoreDirectives!==null&&(t=i.ignoreDirectives),typeof i.spacesAfterDirective!="undefined"&&i.spacesAfterDirective!==null&&(e=i.spacesAfterDirective),typeof i.spacesAfterControlDirective!="undefined"&&i.spacesAfterControlDirective!==null&&(n=i.spacesAfterControlDirective),typeof i.tabSize!="undefined"&&i.tabSize!==null&&(r=i.tabSize),typeof i.formatDirectivePhpParameters!="undefined"&&i.formatDirectivePhpParameters!==null&&(a=i.formatDirectivePhpParameters),typeof i.formatDirectiveJsonParameters!="undefined"&&i.formatDirectiveJsonParameters!==null&&(l=i.formatDirectiveJsonParameters),typeof i.customIfs!="undefined"&&i.customIfs!==null&&(p=i.customIfs),typeof i.useLaravelPint!="undefined"&&i.useLaravelPint!==null&&(_=i.useLaravelPint),typeof i.directives!="undefined"&&i.directives!==null&&(v=i.directives),typeof i.echoStyle!="undefined"&&i.echoStyle==="inline"&&(k="inline"),typeof i.formatInsideEcho!="undefined"&&i.formatInsideEcho!==null&&(c=i.formatInsideEcho),typeof i.phpOptions!="undefined"&&(m=i.phpOptions),typeof i.pintCommand!="undefined"&&(u=i.pintCommand.trim()),typeof i.pintConfig!="undefined"&&(A=i.pintConfig.trim()),typeof i.pintTempDirectory!="undefined"&&(f=i.pintTempDirectory.trim()),typeof i.pintCacheDirectory!="undefined"&&(d=i.pintCacheDirectory.trim()),typeof i.pintCacheEnabled!="undefined"&&(x=i.pintCacheEnabled),e<0&&(e=0),n<0&&(n=1),e>3&&(e=3),n>3&&(n=3),typeof i.classStrings!="undefined"&&i.classStrings!=null&&(w=rp(i.classStrings)),{ignoreDirectives:t,spacesAfterDirective:e,spacesAfterControlDirective:n,tabSize:r,formatDirectivePhpParameters:a,formatDirectiveJsonParameters:l,formatInsideEcho:c,customIfs:p,directives:v,phpOptions:m,echoStyle:k,useLaravelPint:_,pintCommand:u,pintCacheDirectory:d,pintTempDirectory:f,pintCacheEnabled:x,pintConfigPath:A,classStrings:w}}function Ih(i){let t=/[\\/]+/g,e=i.replace(t,"/");return e.endsWith("/")||(e+="/"),e}function WS(i){let t=Ls.dirname(i);t=="."&&(t=process.cwd());let e=t.split(Ls.sep);for(;e.length>0;){let n=e.join(Ls.sep),r=Ls.join(n,Ph);if(ws.existsSync(r))return r;e.pop()}return null}var ws,Ls,Ph,Lr,Oh,VS,wh=Dt(()=>{"use strict";ws=Yi(require("fs")),Ls=Yi(require("path"));Th();kh();wr();Ph=".blade.format.json",Lr={ignoreDirectives:[...Nr,...Jo],spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,customIfs:[],directives:[],echoStyle:"block",useLaravelPint:!1,pintCommand:"",phpOptions:{phpVersion:"8.0"},pintCacheDirectory:"",pintTempDirectory:"",pintCacheEnabled:!0,pintConfigPath:"",classStrings:sr()}});function cp(){return Rh}function rr(){return na}function Lh(i){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete i[t]}),i}function fp(){return Fr}function pp(i){return(0,lp.formatJsonata)(i,{printWidth:20})}function Bh(i,t=null,e=null){return op(t),e==null?Qn.default.format(i,{parser:"blade",plugins:[up]}):Qn.default.format(i,{...e,parser:"blade",plugins:[up]})}function dp(i,t=null,e=null,n=null){let r=__dirname+"/../../../pint/pint",a=__dirname+"/../../../pint/pint.json",l=__dirname+"/../../../_test/_cache/",c=__dirname+"/../../../_test/_temp/",p=`php ${r} {file}`;e!=null&&(p=e.pintCommand,l=e.pintCacheDirectory,c=e.pintTempDirectory,a=e.pintConfigPath);let v={...Lr,useLaravelPint:!0,pintCommand:p,pintCacheDirectory:l,pintTempDirectory:c,pintConfigPath:a};return t!=null&&(v={...v,...t,useLaravelPint:!0,pintCommand:p,pintCacheDirectory:l,pintTempDirectory:c,pintConfigPath:a}),Bh(i,v,n)}function mp(){return qS}function sa(i){GS=i,Fr=Lh(Object.assign({},i,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:i.plugins})),na=Lh(Object.assign({},i,{parser:"php",plugins:[Fh.default]})),Rh=Lh(Object.assign({},i,{parser:"php",plugins:[Fh.default],printWidth:1/0}))}function gp(i){return Qn.default.format(i,{...Fr,parser:"babel",printWidth:80,singleQuote:!0,quoteProps:"preserve"})}function _p(i){return Qn.default.format(i,{...Fr,parser:"html"})}function xp(i){return Qn.default.format(i,{...Fr,proseWrap:"never",parser:"html"})}function Mh(i,t,e=null){let n=i;if(e!=null&&(n=e),typeof t.phpOptions!="undefined"&&t.phpOptions!=null){let r=t.phpOptions;n={...n,...r}}else n={...n,phpVersion:"8.0"};return n}function vp(i,t,e=null){let n=Mh(Rh,t,e),r=Qn.default.format(i,n).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function Ep(i,t,e=null){let n=Mh(na,t,e),r=Qn.default.format(i,n).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function yp(i,t,e=null){let n=Mh(na,t,e);return Qn.default.format(i,n).trim().trim()}var Qn,up,Fh,lp,na,Fr,Rh,GS,qS,gs=Dt(()=>{"use strict";Qn=Yi(require("prettier")),up=Yi(kp()),Fh=Yi(Jf()),lp=Yi(sp());wh();qS=null});function Tp(i,t,e,n,r,a){let l=!1,c=i.content.substring(1,i.content.length-1).trim(),p=`
`;c.startsWith("{")&&c.endsWith("}")&&(p+="let _tmpFormat = ",l=!0),p+=c,p+=`
`;let v=i.content,m="";try{let d=new me;d.getParser().withParserOptions(a.getParser().getParserOptions()),d.getParser().withPhpValidator(a.getParser().getPhpValidator()),d.loadString("<script>"+p+"<\/script>"),d.getParser();let x=d.transform();x.setParentTransformer(r),x.withOptions(t),x.setFormattingOptions(r.getFormattingOptions()),x.withJsonFormatter(r.getJsonFormatter()),x.withBlockPhpFormatter(r.getBlockPhpFormatter()),x.withPhpTagFormatter(r.getPhpTagFormatter()),x.withPhpFormatter(r.getPhpFormatter()),m=x.toStructure().trim(),m=m.substring(8),m=m.trim(),m=m.substring(0,m.length-9),v=gp(m),v=x.fromStructure(v),l&&(v=v.trimLeft(),v=v.substring(3),v=v.trimLeft(),v=v.substring(10),v=v.trimLeft(),v=v.substring(1),v=v.trimLeft()),v=v.trim(),c.trim().endsWith(";")==!1&&v.endsWith(";")&&(v=v.substring(0,v.length-1)),v=r.transformStructures(v)}catch{return i.content}let k=Re.relativeIndentLevel(e,n),_=v,u=" ".repeat(k),f=v.trim();return f.startsWith("{")&&f.endsWith("}")?_='"'+Re.shiftIndent(We.instance.safeReflow(f),k,!0,t,!1,!1)+'"':_.includes(`
`)==!1?_='"'+We.instance.safeReflow(_.trim())+'"':_=`"
`+Re.shiftIndent(We.instance.safeReflow(f),k+t.tabSize,!1,t,!1,!1)+`
${u}"`,_}var Cp=Dt(()=>{"use strict";mn();Ir();Or();gs()});var Uh,hi,ra=Dt(()=>{"use strict";Pe();pn();Sn();ds();ms();Dn();qe();Uh=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return t.includes("fn(")&&t.includes("=>")}parse(t){for(this.tokens=[],this.content=q.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),q.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ti(this.cur)){let e=this.cur,n=Ri(this);this.pushChar(e),this.currentContent=this.currentContent.concat(n.value.split("")),this.pushChar(e),this.currentIndex=n.endedOn;continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==ot.Punctuation_ForwardSlash&&this.next==ot.Punctuation_Asterisk){Vi(this,!0);continue}if(this.cur!=null)if(this.cur==="f"&&this.next=="n")if(q.ctypePunct(this.prev)||q.ctypeSpace(this.prev)||this.prev==null){this.currentContent.push(this.cur),this.currentContent.push(this.next),this.currentContent.push(" "),this.currentIndex+=1;continue}else this.currentContent.push(this.cur);else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Zt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="";return this.tokens.forEach(n=>{n instanceof Zt&&(e+=n.content)}),e}},hi=Uh;hi.instance=new Uh});var or,Vh=Dt(()=>{"use strict";Pe();qe();pn();Sn();Dn();or=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[];this.keyValueTokens=0;this.elements=0}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getNumberOfElements(){return this.elements}getNumberOfKeyValuePairs(){return this.keyValueTokens}getIsAssoc(){return this.elements==this.keyValueTokens}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new ze;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=q.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!q.ctypeSpace(this.cur)){if(ti(this.cur)){let n=this.cur,r=Ri(this);this.pushChar(n),this.currentContent=this.currentContent.concat(r.value.split("")),this.pushChar(n),this.currentIndex=r.endedOn;continue}if(this.cur==ot.LeftBracket){this.checkCurrentContent(),this.tokens.push(new ps);continue}else if(this.cur==ot.RightBracket)this.checkCurrentContent(),this.tokens.push(new Ar);else if(this.cur==ot.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new Xs),this.currentContent=[];else if(this.cur==ot.Punctuation_Equals&&this.next==ot.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new br);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e==null||e.elements.filter(function(n){return!(n.value instanceof Xs)}).forEach(n=>{this.elements+=1,n.key!=null&&n.value!=null&&(this.keyValueTokens+=1)}),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,n)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=n==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof ps){let r=this.findEndOfArray(t.slice(e));return e+=r.length,r.shift(),r.pop(),this.createArray(r,!0)}return null}createArray(t,e){let n=new Is;this.createdArrays.push(n);for(let r=0;r<t.length;r++){let a=t[r],l=null;if(r+1<t.length&&(l=t[r+1]),l instanceof Xs||l==null){let c=new Ns;c.value=a,n.elements.push(c),r+=1;continue}else if(l instanceof br){let c=t[r+2];if(c instanceof ps){let p=this.findEndOfArray(t.slice(r+2)),v=new Ns;r+=p.length+1,p.shift(),p.pop(),v.key=a,v.value=this.createArray(p,!1),n.elements.push(v);continue}else{let p=new Ns;p.key=a,p.value=c,n.elements.push(p),r+=3;continue}}else if(a instanceof ps){let c=this.findEndOfArray(t.slice(r)),p=new Ns;r+=c.length,c.shift(),c.pop(),p.value=this.createArray(c,!1);continue}}return n}findEndOfArray(t){let e=[],n=0;for(let r=0;r<t.length;r++){let a=t[r];if(e.push(a),a instanceof ps){n+=1;continue}else if(a instanceof Ar){if(n-=1,n<=0)break;continue}}return e}}});function Ap(){aa=!1}function bp(){aa=!0}var aa,oa,Hh=Dt(()=>{"use strict";qe();aa=!0;oa=class{constructor(){this.attributeMapping=new Map;this.slugs=[]}makeSlug(t){let e=q.makeSlug(t);return this.slugs.includes(e)?this.makeSlug(t+1):(this.slugs.push(e),e)}remove(t,e){e=e.sort((a,l)=>a.startedOn-l.startedOn);let n="",r=0;for(let a=0;a<e.length;a++){let l=e[a],c=this.makeSlug(l.content.length);if(this.attributeMapping.set(c,l),a==0){let p=t.substring(0,l.startedOn);r=l.startedOn+l.content.length,n+=p,n+='"'+c+'"',e.length==1&&(n+=t.substring(r))}else if(a==e.length-1){e.length==1&&(n+=t.substring(0,l.startedOn));let p=t.substring(r,l.startedOn);r=l.startedOn+l.content.length,n+=p,n+='"'+c+'"',n+=t.substring(r)}else{let p=t.substring(r,l.startedOn);r=l.startedOn+l.content.length,n+=p,n+='"'+c+'"'}}return n}getRemovedAttributes(){return this.attributeMapping}}});var Sp,ar,ha,Dp=Dt(()=>{"use strict";Sp=Yi(require("crypto")),ar=Yi(require("fs")),ha=class{constructor(t){this.cacheDir="";this.cacheVersion="3";this.cacheDir=t}generateSHA1Hash(t){let e=Sp.default.createHash("sha1");return e.update(t),"_pint"+this.cacheVersion+"_"+e.digest("hex")}getCachePath(t){return this.cacheDir+this.generateSHA1Hash(t)+".json"}canCache(t){return typeof t=="undefined"?!1:t.trim().length>0}has(t){return typeof t=="undefined"?!1:ar.existsSync(this.getCachePath(t))}serializeMap(t){return JSON.stringify(Array.from(t.entries()))}unserializeMap(t){let e=JSON.parse(t);return new Map(e)}put(t,e,n){let r=this.getCachePath(t),a={resultMapping:this.serializeMap(e),contentMapping:this.serializeMap(n)};ar.writeFileSync(r,JSON.stringify(a))}get(t){let e=ar.readFileSync(this.getCachePath(t),{encoding:"utf8"}),n=JSON.parse(e);return{contentMapping:this.unserializeMap(n.contentMapping),resultMapping:this.unserializeMap(n.resultMapping)}}isValid(t,e){if(t.size!==e.size)return!1;for(let[n,r]of t.entries())if(!e.has(n)||e.get(n)!==r)return!1;return!0}}});var Be,Wh,Np,_s,Rr,Ip=Dt(()=>{"use strict";Be=Yi(require("fs")),Wh=Yi(require("path"));Pe();qe();Dp();({execSync:Np}=require("child_process")),_s=class{constructor(t,e,n,r){this.tmpDir="";this.cacheDir="";this.resultMapping=new Map;this.contentMapping=new Map;this.pintCommand="";this.templateFile="";this.wasCached=!1;this.outputPintResults=!1;this.markerSuffix="";this.pintConfigPath="";this.phpDocs=new Map;this.phpTagDocs=new Map;this.cleanupFiles=[];this.cleanupDirs=[];this.didFail=!1;this.defaultConfig={preset:"laravel",rules:{blank_line_before_statement:!1,concat_space:{spacing:"one"},no_unused_imports:!1,declare_strict_types:!1,method_argument_space:!0,single_trait_insert_per_statement:!0,types_spaces:{space:"single"}}};this.tmpDir=t,this.cacheDir=e,this.pintConfigPath=r,this.markerSuffix=this.markerSuffix+q.makeSlug(27);let a=this.tmpDir+"/pint.json";if(_s.processConfigPath==null)if(this.pintConfigPath.trim().length==0||!Be.existsSync(this.pintConfigPath))Be.writeFileSync(a,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),_s.processConfigPath=a;else try{let l=JSON.parse(Be.readFileSync(this.pintConfigPath,{encoding:"utf8"}));typeof l.rules!="undefined"?(l.rules.no_unused_imports=!1,l.rules.declare_strict_types=!1):l.rules={no_unused_imports:!1,declare_strict_types:!1},Be.writeFileSync(a,JSON.stringify(l),{encoding:"utf8"}),_s.processConfigPath=a}catch{Be.writeFileSync(a,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),_s.processConfigPath=a}Be.existsSync(this.cacheDir)||Be.mkdirSync(this.cacheDir),this.cache=new ha(this.cacheDir),Be.existsSync(this.tmpDir)||Be.mkdirSync(this.tmpDir),this.pintCommand=n}getDidFail(){return this.didFail}setTemplateFilePath(t){this.templateFile=t}getTemplateFile(){return this.templateFile}prepareContent(t){let e=/[^\S\n]/g,n=/['"`]/g,r=t.replace(e,"");return r=r.replace(n,""),r}getResultMapping(){return this.resultMapping}getPhpBlockContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.sourceContent);if(this.contentMapping.has(e)){let n=this.contentMapping.get(e);if(this.resultMapping.has(n))return this.resultMapping.get(n)}return t.sourceContent}getEchoContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.content);if(this.contentMapping.has(e)){let n=this.contentMapping.get(e);if(this.resultMapping.has(n))return this.resultMapping.get(n)}return t.content}getComponentParameterContent(t){if(t.overrideValue!=null&&this.resultMapping.has(t.overrideValue)){let n=this.resultMapping.get(t.overrideValue);return n.includes(`
`)?`${t.name}="
${n}
"`:t.name+'="'+n.trim()+'"'}let e=this.prepareContent(t.value);if(this.contentMapping.has(e)){let n=this.contentMapping.get(e);if(this.resultMapping.has(n)){let r=this.resultMapping.get(n);return r.includes(`
`)?`${t.name}="
${r}
"`:t.name+'="'+r.trim()+'"'}}return t.content}getDirectiveContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return"("+this.resultMapping.get(t.overrideParams)+")";let e=this.prepareContent(t.directiveParameters);if(this.contentMapping.has(e)){let n=this.contentMapping.get(e);if(this.resultMapping.has(n))return"("+this.resultMapping.get(n)+")"}return t.directiveParameters}getDirectivePhpContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return this.resultMapping.get(t.overrideParams);let e=this.prepareContent(t.documentContent);if(this.contentMapping.has(e)){let n=this.contentMapping.get(e);if(this.resultMapping.has(n))return this.resultMapping.get(n)}return t.documentContent}transform(t){let e=`<?php 
`,n=0;return t.getAllNodes().forEach(r=>{if(r instanceof _t){if(r.directiveName=="php"&&r.isClosedBy!=null&&r.hasValidPhp()){if(r.documentContent.trim().length==0)return;let l="";l+=`<?php 
`,l+=r.documentContent,l+=`
`,r.overrideParams="__pint"+n.toString();let c=this.prepareContent(r.documentContent);this.contentMapping.has(c)||this.contentMapping.set(c,r.overrideParams),this.phpDocs.set(r.overrideParams,l),n+=1}else if(r.hasDirectiveParameters&&!r.hasJsonParameters&&r.hasValidPhp())if(r.directiveName=="php"){let a=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(a.length==0)return;e+="// "+n.toString()+"=IPD"+this.markerSuffix,e+=`
`,q.breakByNewLine(a).forEach(c=>{e+=c.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideParams="__pint"+n.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),n+=1}else if(r.directiveName=="forelse"||r.directiveName=="foreach"){let a=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(a.length==0)return;e+="// "+n.toString()+"=FRL"+this.markerSuffix,e+=`
`,e+="foreach(",q.breakByNewLine(a).forEach(c=>{e+=c.trimLeft()+`
`}),e+=") {}",e+=`
`,r.overrideParams="__pint"+n.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),n+=1}else{let a=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(a.length==0)return;e+="// "+n.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",q.breakByNewLine(a).forEach(c=>{e+=c.trimLeft()+`
`}),e+=";",e+=`
`,r.overrideParams="__pint"+n.toString();let l=this.prepareContent(r.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),n+=1}}else if(r instanceof Ie&&r.hasValidPhp()){let a=r.content.trim();if(a.length==0)return;e+="// "+n.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",q.breakByNewLine(a).forEach(c=>{e+=c.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideContent="__pint"+n.toString();let l=this.prepareContent(r.content);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideContent),n+=1}else if(r instanceof xi)r.parameters.length&&r.parameters.forEach(a=>{if(a.type==1&&a.directive!=null&&!a.directive.hasJsonParameters&&a.directive.hasValidPhp()){let l=a.directive.directiveParameters.substring(1,a.directive.directiveParameters.length-1).trim();if(l.length==0)return;e+="// "+n.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",q.breakByNewLine(l).forEach(p=>{e+=p.trimLeft()+`
`}),e+=";",e+=`
`,a.directive.overrideParams="__pint"+n.toString();let c=this.prepareContent(a.directive.directiveParameters);this.contentMapping.has(c)||this.contentMapping.set(c,a.directive.overrideParams),n+=1}else if(a.type==3&&a.inlineEcho!=null&&a.inlineEcho.hasValidPhp()){let l=a.inlineEcho.content.trim();e+="// "+n.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",q.breakByNewLine(l).forEach(p=>{e+=p.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,a.inlineEcho.overrideContent="__pint"+n.toString();let c=this.prepareContent(a.inlineEcho.content);this.contentMapping.has(c)||this.contentMapping.set(c,a.inlineEcho.overrideContent),n+=1}else if(a.isExpression&&!a.isEscapedExpression&&a.hasValidPhpExpression()){let l=a.value.trim();e+="// "+n.toString()+"=CPV"+this.markerSuffix,e+=`
`,e+="echo ",q.breakByNewLine(l).forEach(p=>{e+=p.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,a.overrideValue="__pint"+n.toString();let c=this.prepareContent(a.value);this.contentMapping.has(c)||this.contentMapping.set(c,a.overrideValue),n+=1}});else if(r instanceof oi&&r.hasValidPhp()){let l=r.sourceContent.trim().substring(5).trimLeft();if(l=l.trimRight().substring(0,l.length-2).trim(),l.length==0)return;r.overrideContent="__pint"+n.toString();let c=this.prepareContent(r.sourceContent);this.contentMapping.has(c)||this.contentMapping.set(c,r.overrideContent),this.phpTagDocs.set(r.overrideContent,r.sourceContent+"KEEP"),n+=1}}),e}format(t){let e=this.transform(t);if(this.wasCached=!1,this.cache.canCache(this.templateFile)&&this.cache.has(this.templateFile))try{let m=this.cache.get(this.templateFile);if(this.cache.isValid(m.contentMapping,this.contentMapping))return this.contentMapping=m.contentMapping,this.resultMapping=m.resultMapping,this.wasCached=!0,this.resultMapping}catch{}let n="";try{n=this.callLaravelPint(e)}catch(m){return this.didFail=!0,this.cleanupFiles.forEach(k=>{Be.unlinkSync(k)}),this.cleanupDirs.forEach(k=>{Be.rmdirSync(k,{recursive:!0})}),this.outputPintResults&&console.error(m),this.resultMapping}this.cleanupFiles.forEach(m=>{Be.unlinkSync(m)});let r=q.breakByNewLine(n),a=[],l=this.markerSuffix,c=-1,p="",v=!1;return r.forEach(m=>{if(m.endsWith(l)){v=!0;var k=parseInt(m.substring(2).trim().substring(0,m.indexOf("="))),_=m.substring(m.indexOf("=")+1,m.indexOf("=")+4);if(p==""&&(p=_),c==-1){c=k;return}else{this.resultMapping.set("__pint"+c.toString(),this.cleanPintOutput(a.join(`
`),p)),a=[],c=k,p=_;return}}v&&a.push(m)}),a.length>0&&(this.resultMapping.set("__pint"+c.toString(),this.cleanPintOutput(a.join(`
`),p)),a=[],c=-1),this.cache.canCache(this.templateFile)&&this.cache.put(this.templateFile,this.resultMapping,this.contentMapping),this.resultMapping}cleanPintOutput(t,e){let n=t;return e=="DIR"?(n=n.trim().trimRight(),n=n.substring(7).trimLeft(),n.endsWith(";")&&(n=n.substring(0,n.length-1).trimRight())):e=="PHP"?(n=t.trim().substring(5).trimLeft(),n=n.trimRight(),n=n.trimRight(),n.endsWith("?")&&(n=n.substring(0,n.length-1).trimRight())):e=="IPD"?(n=t.trim().trimRight(),n.endsWith("?")&&(n=n.substring(0,n.length-1).trimRight()),n.endsWith(";")&&(n=n.substring(0,n.length-1).trimRight())):e=="FRL"?(n=n.trimLeft().substring(8).trimLeft().substring(1).trimLeft(),n=n.trimRight(),n=n.trimRight(),n.endsWith("?")&&(n=n.substring(0,n.length-1).trimRight()),n.endsWith(";")&&(n=n.substring(0,n.length-1).trimRight()),n=n.substring(0,n.length-1).trimRight(),n=n.substring(0,n.length-1).trimRight(),n=n.substring(0,n.length-1).trimRight()):e=="ECH"||e=="CPV"?(n=t.trim(),n=n.substring(4).trimLeft(),n=n.trimRight(),n=n.trimRight(),n.endsWith("?")&&(n=n.substring(0,n.length-1).trimRight()),n.endsWith(";")&&(n=n.substring(0,n.length-1).trimRight())):e=="BHP"&&(n=t.trim()),n}callLaravelPint(t){if(this.wasCached)return"";let e=q.makeSlug(26),n="",r="",a="";if(this.phpDocs.size>0||this.phpTagDocs.size>0){let l=this.tmpDir+"/"+q.makeSlug(32)+"/";Be.mkdirSync(l);let c=l+e+".php";Be.writeFileSync(c,t,{encoding:"utf8"}),this.cleanupFiles.push(c),this.cleanupDirs.push(l),this.phpDocs.forEach((v,m)=>{let k=l+e+"php_"+m+".php";Be.writeFileSync(k,v,{encoding:"utf8"}),this.cleanupFiles.push(k)}),this.phpTagDocs.forEach((v,m)=>{let k=l+e+"tag_php_"+m+".php";Be.writeFileSync(k,v,{encoding:"utf8"}),this.cleanupFiles.push(k)});let p=this.pintCommand.replace("{file}",`"${l}"`)+` --config "${_s.processConfigPath}"`;r=Np(p).toString(),this.phpDocs.forEach((v,m)=>{let k=l+e+"php_"+m+".php",u=Be.readFileSync(k,{encoding:"utf8"}).trim().substring(5);this.resultMapping.set(m,u)}),this.phpTagDocs.forEach((v,m)=>{let k=l+e+"tag_php_"+m+".php",u=Be.readFileSync(k,{encoding:"utf8"}).trim();u=u.substring(0,u.length-4),this.resultMapping.set(m,u)}),a=Be.readFileSync(c,{encoding:"utf8"})}else{let l=this.tmpDir+e+".php";Be.writeFileSync(l,t,{encoding:"utf8"});let c=this.pintCommand.replace("{file}",`"${l}"`)+` --config "${_s.processConfigPath}"`;n=Wh.basename(l),r=Np(c).toString(),this.cleanupFiles.push(l),a=Be.readFileSync(l,{encoding:"utf8"})}if(this.outputPintResults&&typeof this.templateFile!="undefined"&&this.templateFile!=null&&r.includes(n)){let l=q.breakByNewLine(r),c=[];for(let p=0;p<l.length;p++){let v=l[p].trim();v.length==0||v=="\u2713"||(v.startsWith("\u2713")&&(v=v.substring(1).trim()),v.includes(n)&&(v=Wh.basename(this.templateFile)+v.substring(v.indexOf(n)+n.length)),c.push(v))}console.log(c.join(`
`))}return a}},Rr=_s;Rr.processConfigPath=null});var ua,Pp=Dt(()=>{"use strict";ua=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var $n,Gh=Dt(()=>{"use strict";Pe();Pp();$n=class{static print(t,e,n){let r=new ua(e,n);if(r.append("[").newLine(),t.elements.length>0){let a="";r.indent(),t.elements.forEach(l=>{t.maxKeyLength>0&&l.key!=null&&(a=""),l.key!=null?(r.append(l.key.sourceContent+a).append(" => "),l.value!=null&&(l.value instanceof Is?l.value.elements.length==0?r.append("[],"):r.append($n.print(l.value,e,n+1)):r.append(l.value.sourceContent))):l.value!=null&&(l.value instanceof Is?r.append($n.print(l.value,e,n+1)):r.append(l.value.sourceContent)),r.appendNoRepeat(",").newLine(),l.isLast||r.indent()})}return n>1&&r.outdent(),r.append("]"),r.getContents()}}});var Br,Op=Dt(()=>{"use strict";qe();Br=class{static printComment(t,e,n){if(t.isMultiline()){let r=q.breakByNewLine(t.innerContent.trim()),a=[];r.forEach(p=>{a.push(" ".repeat(e+n)+p.trim())});let l=a.join(`
`),c=`{{--
`;return c+=l,c+=`
`+" ".repeat(n)+"--}}",c}return"{{-- "+t.innerContent.trim()+" --}}"}}});function hr(i,t){if(i.includes(`
`)&&(i.includes("match")||i.includes("=>")||i.includes("&&")||i.includes(",")||i.includes("("))){let e=q.breakByNewLine(i),n=0;return e.forEach(r=>{let a=r.trim().length;a>n&&(n=a)}),n+Math.ceil(n/2)}return t}function la(i){let t=q.breakByNewLine(i),e=[],n=!1;for(let r=0;r<t.length;r++){let a=t[r];if(a.trimRight().endsWith("//")&&!n){e.push(a.trimRight().substring(0,a.trimRight().length-2).trimRight()),n=!0;continue}e.push(a)}return e.join(`
`)}function ca(i){let t=q.breakByNewLine(i),e=[],n=!1,r=!1,a=!0;for(let l=0;l<t.length;l++){let c=t[l];if(!n&&c.trimRight().endsWith("[")){r=!0,e.push(c);continue}if(c.trimRight().endsWith(",")&&r&&!n)if(c.trimRight().endsWith("//")){a=!1;break}else e.push(c+"//"),n=!0;else e.push(c)}return a?{content:e.join(`
`),addedHack:n}:{content:i,addedHack:!1}}var fa=Dt(()=>{"use strict";qe()});function zS(i){let t="",e=q.breakByNewLine(i);for(let n=0;n<e.length;n++)t+=e[n].trim();return t}var xs,Mr,wp=Dt(()=>{"use strict";gs();ra();Vh();qe();Gh();Ir();fa();Or();xs=class{static getReasonableDirectivePhpOptions(t,e){return xs.defaultControlDirectiveNames.includes(t.name)?{...e,trailingCommaPHP:!1}:e}static printDirective(t,e,n,r,a,l){var v,m,k,_;let c=t.directiveName.trim(),p="@"+c;if(t.hasDirectiveParameters){let u=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&r&&t.hasValidJson()){let d=t.getPhpContent().trim();d.startsWith("(")&&d.endsWith(")")&&(d=d.substring(1),d=d.substring(0,d.length-1));let x=r(d);x.includes(`
`)&&(x=Re.shiftIndent(x,a,!0,e)),u="("+x+")"}}else if(e.formatDirectivePhpParameters&&n!=null&&t.hasValidPhp()){if(l!=null){let H=e.spacesAfterDirective;xs.defaultControlDirectiveNames.includes(c)&&(H=e.spacesAfterControlDirective);let V="@"+c+" ".repeat(H),Y=l.getDirectiveContent(t);if(Y=Re.shiftIndent(Y,a,!0,e),xs.defaultControlDirectiveNames.includes(c)&&Y.includes(`
`)){let F=q.breakByNewLine(Y),z=[];for(let it=0;it<F.length;it++){let tt=F[it];if(it==0){z.push(tt);continue}z.push(" ".repeat(V.length+1)+tt)}Y=z.join(`
`)}return V+Y}let d=t.getPhpContent().trim();d.startsWith("(")&&d.endsWith(")")&&(d=d.substring(1),d=d.substring(0,d.length-1));let x=d,A=!1,w=rr();if(d.startsWith("[")&&d.endsWith("]")&&((v=t.startPosition)==null?void 0:v.line)!=((m=t.endPosition)==null?void 0:m.line)){let H="<?php "+d,V=ca(H);V.addedHack&&(H=V.content),x=n(H,e,xs.getReasonableDirectivePhpOptions(t,{...w,printWidth:hr(d,w.printWidth)})),V.addedHack&&(x=la(x));let Y=new or,F=Y.parse(q.replaceAllInString(x,`
`," ")),z=0;return Y.getIsAssoc()||x.includes("match")||x.includes("=>")?(x.includes(`
`)&&!A&&(x=Re.shiftIndent(x,a,!0,e)),We.couldReflow(x)&&(x=We.instance.reflow(x)),hi.couldReflow(x)&&(x=hi.instance.reflow(x)),x="@"+c+" ".repeat(e.spacesAfterDirective)+"("+x+")"):F!=null&&(x=$n.print(F,e.tabSize,1),z>0&&(x=q.removeEmptyNewLines(Re.shiftIndent(x,z,!0,e))),x.includes(`
`)&&!A&&(x=Re.shiftIndent(x,a,!0,e)),x="@"+c+" ".repeat(e.spacesAfterDirective)+"("+x+")"),x}else try{let H=rr();((k=t.startPosition)==null?void 0:k.line)==((_=t.endPosition)==null?void 0:_.line)&&(H={...rr(),printWidth:1/0},A=!0),x=n("<?php "+d,e,xs.getReasonableDirectivePhpOptions(t,H))}catch{}t.directiveName.toLowerCase()=="forelse"&&(x=x.substring(9),x=x.substring(0,x.length-14)),We.couldReflow(x)&&(x=We.instance.reflow(x)),hi.couldReflow(x)&&(x=hi.instance.reflow(x)),x.includes(`
`)&&!A?u="("+Re.shiftIndent(x,a,!0,e)+")":(A&&(x=zS(x)),u="("+x+")")}let f=e.spacesAfterDirective;xs.defaultControlDirectiveNames.includes(c)&&(f=e.spacesAfterControlDirective),p+=" ".repeat(f)+u}return p}},Mr=xs;Mr.defaultControlDirectiveNames=["if","elseif","unless","while","for","foreach","forelse"]});var vs,Lp=Dt(()=>{"use strict";Or();gs();ra();Pe();qe();Ir();fa();vs=class{static printEcho(t,e,n,r,a){var m,k;let l="{{ ",c=" }}";t instanceof In?(l="{!! ",c=" !!}"):t instanceof Pn&&(l="{{{ ",c=" }}}");let p=l,v=t.content.trim();if(e.formatInsideEcho&&n!=null&&t.hasValidPhp()){let _=cp(),u=v;if(((m=t.startPosition)==null?void 0:m.line)!=((k=t.endPosition)==null?void 0:k.line)){if(_={..._,printWidth:hr(v,_.printWidth)},e.useLaravelPint)a!=null&&(u=a.getEchoContent(t));else{let d=ca(v);d.addedHack&&(v=d.content),u=n("<?php "+v,e,_),d.addedHack&&(u=la(u)),We.couldReflow(u)&&(u=We.instance.reflow(u)),hi.couldReflow(u)&&(u=hi.instance.reflow(u))}if(e.echoStyle=="inline"){let d=Re.shiftIndentWithLastLineInline(u,e.tabSize,r+e.tabSize,!0).trim();return l.trimRight()+" "+d+" "+c.trim()}return l.trim()+`
`+Re.shiftIndent(u,r+e.tabSize,!1,e,!0)+`
`+" ".repeat(r)+c.trim()}else e.useLaravelPint?a!=null&&(u=a.getEchoContent(t)):(u=n("<?php "+v+";",e,{..._,printWidth:1/0}),u=u.trimRight().substring(0,u.trimRight().length-1),We.couldReflow(u)&&(u=We.instance.reflow(u)),hi.couldReflow(u)&&(u=hi.instance.reflow(u))),u.includes(`
`)&&(u=q.collapse(u));v=u}return p+=v+c,p}}});var Mn,qh=Dt(()=>{"use strict";Mn=class{};Mn.FormatIgnoreStart="format-ignore-start",Mn.FormatIgnoreEnd="format-ignore-end"});var pa,Fp=Dt(()=>{"use strict";Cp();wr();Or();gs();ra();Pe();Vh();qe();Hh();mn();Ip();Gh();Op();wp();Lp();Ir();fa();qh();pa=class{constructor(t){this.isInsideIgnoreFormatter=!1;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.shadowDoc=null;this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.attachedDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.echoParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.useLaravelPint=!1;this.pintTransformer=null;this.filePath="";this.formattingOptions=null;this.didPintFail=!1;this.removedAttributes=new Map;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,phpOptions:null,echoStyle:"block",useLaravelPint:!1,pintCommand:"pint {filename}",pintTempDirectory:"",pintCacheDirectory:"",pintCacheEnabled:!0,pintConfigPath:"",classStrings:sr()};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}withShadowDocument(t=null){return this.shadowDoc=t,this}getPintTransformer(){return this.pintTransformer}setPintTransformer(t){this.pintTransformer=t}setUsingLaravelPint(t){this.useLaravelPint=t}getUsingLaravelPint(){return this.useLaravelPint}withRemovedAttributes(t){return this.removedAttributes=t,this}setParentTransformer(t){return this.parentTransformer=t,this.cloneOptions(t),this}cloneOptions(t){return this.setUsingLaravelPint(t.getUsingLaravelPint()),this.setPintTransformer(t.getPintTransformer()),this}getFormattingOptions(){return this.formattingOptions}setFormattingOptions(t){return this.formattingOptions=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}getJsonFormatter(){return this.jsonFormatter}withFilePath(t){return this.filePath=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}getBlockPhpFormatter(){return this.blockPhpFormatter}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}getPhpTagFormatter(){return this.phpTagFormatter}withPhpFormatter(t){return this.phpFormatter=t,this}getPhpFormatter(){return this.phpFormatter}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(n=>{n instanceof Zt?e+=n.getOutputContent():n instanceof oi?e+=n.sourceContent:n instanceof _t&&n.directiveName=="verbatim"&&(e+=n.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t,e){return Mr.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter,e,this.pintTransformer)}makeSlug(t){let e=q.makeSlug(t);return this.slugs.includes(e)?this.makeSlug(t+1):(this.slugs.push(e),e)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerEchoParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerEchoParameter(t,e):this.echoParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerAttachedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerAttachedDirective(t,e):this.attachedDirectives.set(t,e)}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline||t.fragmentPosition==2||t.fragmentPosition==1)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let n=this.open(e),r=this.close(e);return`
`+n+r+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((n,r)=>{let a=this.open(r),l=this.indentLevel(a),c=n.sourceContent;this.transformOptions.formatDirectivePhpParameters&&n.hasValidPhp()&&(this.useLaravelPint?this.pintTransformer!=null&&(c=this.pintTransformer.getPhpBlockContent(n)):this.phpTagFormatter!=null&&(c=this.phpTagFormatter(c,this.transformOptions,null),We.couldReflow(c)&&(c=We.instance.reflow(c)),hi.couldReflow(c)&&(c=hi.instance.reflow(c))),c=Re.shiftIndent(c,l,!0,this.transformOptions)),e=q.safeReplace(e,a,c)}),this.dynamicElementPhpNodes.forEach((n,r)=>{e=q.safeReplaceAllInString(e,r,this.printInlinePhp(n))}),this.inlinePhpNodes.forEach((n,r)=>{e=q.safeReplace(e,r,this.printInlinePhp(n))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e,this.transformOptions,null),We.couldReflow(e)&&(e=We.instance.reflow(e)),hi.couldReflow(e)&&(e=hi.instance.reflow(e)),e=q.safeReplaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let n=!0,r=!0,a=0,l=0,c=0,p=!0;for(let v=0;v<e.length;v++){let m=e[v];m instanceof Ie&&m.isInlineEcho?(n=!1,a+=1,l+=1):m instanceof Zt?(c+=1,m.content.trim().length>0&&(r=!1)):l+=1}return a==0&&(p=!0),l>0&&n==!0?!1:(r==!1&&l==0&&(p=!0),r==!0&&l==0&&(p=!0),p)}preparePairedDirective(t){var l,c,p,v,m,k,_;let e=this.makeSlug(t.sourceContent.length),n=t.directiveName.toLowerCase(),r=(l=t.childrenDocument)==null?void 0:l.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){if(t.originalAbstractNode!=null&&t.originalAbstractNode.prevNode instanceof Ie&&t.originalAbstractNode instanceof _t&&t.originalAbstractNode.directiveName=="if"){let d=((p=(c=t.originalAbstractNode.startPosition)==null?void 0:c.index)!=null?p:0)-((m=(v=t.originalAbstractNode.prevNode.endPosition)==null?void 0:v.index)!=null?m:0);if(d>0&&d<3)return this.registerAttachedDirective(e,{directive:t,innerDoc:r,slug:e,isInline:!1,virtualElementSlug:""}),e}let u="",f=`${this.open(e)}
`;if(n=="php"||n=="verbatim")u=this.makeSlug(15),f+=this.pair(u);else{let d=this.isAllInlineNodes((k=t.children)!=null?k:[]),x=this.containsBladeStructures((_=t.children)!=null?_:[]);this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1&&!d&&!x||!t.containsAnyFragments&&d&&x?(u=this.makeSlug(15),f+=this.pair(u,r)):f+=r}return f+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(u)),this.virtualStructureClose.push(this.close(u)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:r,slug:e,directive:t,virtualElementSlug:u,isInline:!1}),f}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let a=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:r,slug:a,directive:t,virtualElementSlug:"",isInline:!0}),a+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var n,r,a,l,c,p,v,m,k;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let w=this.makeSlug((r=(n=t.constructedFrom)==null?void 0:n.sourceContent.length)!=null?r:0),H=this.makeSlug((l=(a=t.elseNode)==null?void 0:a.sourceContent.length)!=null?l:0),V=(c=t.truthDocument)==null?void 0:c.document.transform().setParentTransformer(this).toStructure(),Y=(p=t.falseDocument)==null?void 0:p.document.transform().setParentTransformer(this).toStructure(),F={truthDoc:V,falseDoc:Y,forElse:t,truthClose:this.close(w),emptyOpen:this.open(H),pairClose:this.close(H),truthSlug:w,falseSlug:H},z=this.open(w);return z+=V,z+=F.truthClose,z+=`
`+F.emptyOpen+`
`,z+=Y+"",z+=F.pairClose,this.registerForElseWithEmpty(F),z}let _=t.constructedFrom,u=(v=t.truthDocument)==null?void 0:v.document.transform().setParentTransformer(this).toStructure(),f=this.makeSlug(_.sourceContent.length),d=this.makeSlug((k=(m=_.isClosedBy)==null?void 0:m.sourceContent.length)!=null?k:0),x={truthDoc:u,falseDoc:"",forElse:t,truthSlug:f,falseSlug:"",pairClose:this.close(d),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push(x);let A=this.open(f);return A+=u,A+=this.close(f),A}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,n){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,n):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:n}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let n=this.makeSlug(10),r=this.makeSlug(10),a={node:t,pairOpen:this.open(n),pairClose:this.close(n),virtualElement:this.selfClosing(r)};return this.registerVirtualComment(a),a.pairOpen+`
`+a.virtualElement+`
`+a.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var n,r;if(t.isClosingTag)return((n=t.name)==null?void 0:n.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((r=t.name)==null?void 0:r.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let a=t.name.inlineName;a.startsWith(":")&&(a=a.substring(1)),e+='slot name="'+a+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(a=>{var l,c;if(a.type==0)if(a.isExpression){let p=this.makeSlug(a.content.length);this.registerExpressionParameter(p,a),e+=p+" "}else e+=a.content+" ";else if(a.type==2)e+=a.name+" ";else if(a.type==1){let p=this.makeSlug((c=(l=a.directive)==null?void 0:l.sourceContent.length)!=null?c:0);this.registerDirectiveParameter(p,a),e+=p+" "}else if(a.type==3&&a.inlineEcho!=null){let p=this.makeSlug(a.inlineEcho.content.length);this.registerEchoParameter(p,a),e+=p+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let n=[],r="";t.cases.forEach((_,u)=>{var H,V;let f=_.head,d=(H=_.childDocument)==null?void 0:H.document.transform().setParentTransformer(this).toStructure(),x=this.makeSlug(f.sourceContent.length),A=this.makeSlug(5),w={case:_,slug:x,doc:d,virtualOpen:this.selfClosing(A),virtualClose:this.close(A),pairOpen:this.open(x),pairClose:this.close(x),isFirst:u==0,isLast:u==t.cases.length-1,leadingClose:"",leadingOpen:""};if(_.leadingDocument!=null){let Y=this.makeSlug(25);w.leadingOpen=this.open(Y),w.leadingClose=this.close(Y),r+=`
`+_.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}r+=w.pairOpen,((V=_.head)==null?void 0:V.directiveName)=="default"&&(r+=w.virtualOpen),r+=d,r+=w.pairClose,n.push(w)});let a=n[0].pairOpen,l=n[n.length-1].pairClose,c=this.makeSlug(10),p=this.open(c),v=this.close(c),m={switchNode:t,pairOpen:a,pairClose:l,structures:n,virtualSwitchClose:v,virtualSwitchOpen:p},k=`
`+p+`
`+r+`
`+v;return this.registerSwitchStatement(m),k}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}containsComponents(t){for(let e=0;e<t.length;e++)if(t[e]instanceof xi)return!0;return!1}containsBladeStructures(t){for(let e=0;e<t.length;e++){let n=t[e];if(!(n instanceof Zt)){if(n instanceof _t&&(n.isClosingDirective||n.isClosingDirective||n.name=="elseif"||n.name=="else"))continue;return!0}}return!1}isAllInlineNodes(t){let e=0;for(let n=0;n<t.length;n++){let r=t[n];if(!(r instanceof Zt))if(r instanceof Ie){if(!r.isInlineEcho)return!1;e+=1}else if(r instanceof _t){if(r.isClosingDirective||r.name=="elseif"||r.name=="else")continue;return!1}else return!1}return e!=0}prepareConditions(t){if(t.fragmentPosition==3){if(t.chain.length==1&&t.constructedFrom!=null){let p=t.constructedFrom.clone();return p.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(p)}let n=[],r="";t.logicBranches.forEach((p,v)=>{var d,x,A,w,H,V,Y,F,z,it,tt,pt,Ct,qt;let m=p.head,k=(d=p.childDocument)==null?void 0:d.document.transform().setParentTransformer(this).toStructure(),_=this.makeSlug(m.sourceContent.length),u=this.makeSlug(10),f={branch:p,slug:_,doc:k,pairOpen:this.open(_),pairClose:this.close(_),virtualOpen:this.open(u),virtualClose:this.close(u),isFirst:v==0,isLast:v==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:"",isLiteralContent:!1};if(((x=p.head)==null?void 0:x.directiveName)=="else"){r+=`
`+f.pairOpen;let wt=this.makeSlug(25),At=this.containsBladeStructures((A=p.head.children)!=null?A:[]);p.head.containsChildStructures==!1&&p.head.containsAnyFragments==!1&&(((w=p.head)==null?void 0:w.children.length)<=2||((H=p.head)==null?void 0:H.children.length)>4)&&!this.isAllInlineNodes(p.head.children)&&!At?(f.virtualBreakOpen=this.open(wt),f.virtualBreakClose=this.close(wt),r+=`
`+f.virtualBreakOpen+`
`,r+=k,r+=`
`+f.virtualBreakClose+`
`+f.pairClose):(f.virtualBreakOpen=this.selfClosing(wt),r+=f.virtualBreakOpen+`
`,r+=k,r+=`
`+f.pairClose)}else{let wt=this.isAllInlineNodes((Y=(V=p.head)==null?void 0:V.children)!=null?Y:[]),At=this.containsBladeStructures((z=(F=p.head)==null?void 0:F.children)!=null?z:[]);if(((it=p.head)==null?void 0:it.containsAnyFragments)==!1&&((tt=p.head)==null?void 0:tt.containsChildStructures)==!1&&(((pt=p.head)==null?void 0:pt.children.length)<=2||((Ct=p.head)==null?void 0:Ct.children.length)>4)&&!wt&&!At){let vt=this.makeSlug(25);f.virtualBreakOpen=this.open(vt),f.virtualBreakClose=this.close(vt),((qt=p.head)==null?void 0:qt.children.length)<=2&&p.head.children[0]instanceof Zt?(r+=f.pairOpen,r+=`
`+f.virtualBreakOpen,r+=`
`+f.virtualBreakClose,r+=f.pairClose,f.isLiteralContent=!0):(r+=f.pairOpen,r+=`
`+f.virtualBreakOpen,r+=k,r+=`
`+f.virtualBreakClose,r+=f.pairClose)}else if(wt){r+=`
`+f.pairOpen;let vt=this.makeSlug(25);f.virtualBreakOpen=this.selfClosing(vt),r+=f.virtualBreakOpen+`
`,r+=k,r+=`
`+f.pairClose}else r+=f.pairOpen,r+=`
`,r+=k,r+=`
`,r+=f.pairClose}n.push(f)});let a=n[0].pairOpen,l=n[n.length-1].pairClose,c={pairOpen:a,pairClose:l,structures:n,condition:t};return this.registerCondition(c),r}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),t.fragmentPosition==1||t.fragmentPosition==2?e:e+" "}toStructure(){let t="";this.useLaravelPint&&this.parentTransformer==null&&(this.pintTransformer=new Rr(this.transformOptions.pintTempDirectory,this.transformOptions.pintCacheDirectory,this.transformOptions.pintCommand,this.transformOptions.pintConfigPath),this.pintTransformer.setTemplateFilePath(this.filePath),this.shadowDoc!=null?this.pintTransformer.format(this.shadowDoc):this.pintTransformer.format(this.doc),this.didPintFail=this.pintTransformer.getDidFail()),this.doc.getRenderNodes().forEach(r=>{if(this.isInsideIgnoreFormatter){if(this.pushLiteralBlock(this.activeLiteralSlug,r),r instanceof sn&&r.innerContent.trim().toLowerCase()==Mn.FormatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}r instanceof Zt?t+=r.content:r instanceof Bi?r.cases.length>0?t+=this.prepareSwitch(r):t+=this.preparePairedDirective(r.constructedFrom):r instanceof yi?t+=this.prepareConditions(r):r instanceof _t?t+=this.prepareDirective(r):r instanceof Ie?t+=this.prepareEcho(r):r instanceof Mi?t+=this.prepareForElse(r):r instanceof sn?r.innerContent.trim()==Mn.FormatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.pushStartLiteralBlock(this.activeLiteralSlug,r),t+=this.selfClosing(this.activeLiteralSlug)):t+=this.prepareComment(r):r instanceof xi?t+=this.prepareComponent(r):r instanceof oi&&(t+=this.preparePhpBlock(r))});let n=this.doc.getParser().getFragmentsContainingStructures();if(n.length>0){let r=me.fromText(t);n.forEach(a=>{var u,f,d,x,A,w,H,V;let l=this.doc.getParser().getText(((f=(u=a.start.endPosition)==null?void 0:u.offset)!=null?f:0)+1,(x=(d=a.end.startPosition)==null?void 0:d.offset)!=null?x:0),c=r.getParser().getFragmentsParser().getEmbeddedFragment(a.start.embeddedIndex),p=r.getParser().getFragmentsParser().getClosingFragmentAfter(c),v=r.getParser().getText(((w=(A=c.endPosition)==null?void 0:A.offset)!=null?w:0)+1,(V=(H=p==null?void 0:p.startPosition)==null?void 0:H.offset)!=null?V:0),m=this.makeSlug(16),k=a.start.name.toLowerCase()=="script",_=m;k?_="//"+m:_="/*"+m+"*/",t=t.replace(v,_),this.registerEmbeddedDocument(m,l,k)})}return t}withOptions(t){return this.transformOptions=t,this.useLaravelPint=this.transformOptions.useLaravelPint,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((n,r)=>{let a=this.selfClosing(r),l=this.printDirective(n,this.indentLevel(a));e=q.safeReplace(e,a,l)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((n,r)=>{let a=this.printDirective(n,0);if(a.includes(`
`)){let l=this.indentLevel(r);l>0&&(a=Re.shiftIndent(a,l,!0,this.transformOptions))}e=q.safeReplace(e,r,a)}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((n,r)=>{let a=vs.printEcho(n,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer);e=q.safeReplaceAllInString(e,r,a)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((n,r)=>{let a=this.printDirective(n,this.indentLevel(r));e=q.safeReplaceAllInString(e,r,a)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let n=t.trim();n.startsWith("<?php")==!1&&(n="<?php "+n);let r=rr();return n=this.blockPhpFormatter(n,this.transformOptions,{...r,printWidth:hr(t,r.printWidth)}),e&&(n=`
`+n+`
`),We.couldReflow(n)&&(n=We.instance.reflow(n)),hi.couldReflow(n)&&(n=hi.instance.reflow(n)),n}removeLeadingWhitespace(t,e){let n=t.indexOf(e);if(n===-1)return t;let r=t.slice(0,n),a=t.slice(n+e.length);return r.replace(/[\s\uFEFF\xA0]+$/g,"")+e+a}findNewLeadingStart(t,e){let n=q.breakByNewLine(t);for(let r=0;r<n.length;r++){let a=n[r];if(a.includes(e))return a.length-a.trim().length}return-1}transformPairedDirectives(t){let e=t;return this.attachedDirectives.forEach((n,r)=>{var m;e=this.removeLeadingWhitespace(e,r);let a=n.directive.documentContent;Ap(),this.transformOptions.useLaravelPint?a=dp(a,this.formattingOptions,this.transformOptions).trim():a=Bh(a,this.formattingOptions).trim(),bp();let l=this.printDirective(n.directive,this.indentLevel(r)).trim(),c=this.findNewLeadingStart(e,r),p=l+a+`
`+((m=n.directive.isClosedBy)==null?void 0:m.sourceContent),v=Re.shiftIndent(p,c+this.transformOptions.tabSize,!0,this.transformOptions,!1,!0);e=q.safeReplace(e,r,v)}),this.pairedDirectives.forEach((n,r)=>{var p;let a=n.directive;if(n.virtualElementSlug.length>0){let v=this.open(n.virtualElementSlug),m=this.close(n.virtualElementSlug);this.virtualStructureOpens.push(v),this.removeLines.push(v),this.removeLines.push(m)}let l=this.open(r),c=this.close(r);if(a.directiveName.trim().toLowerCase()=="php"){let v=this.open(n.virtualElementSlug),m=this.indentLevel(v),k=n.directive.sourceContent,_=a.documentContent;if(this.transformOptions.formatDirectivePhpParameters)if(!this.useLaravelPint)_=Re.shiftIndent(this.transformBlockPhp(a.innerContent,!0),m,!0,this.transformOptions),e=q.safeReplace(e,l,k),e=q.safeReplace(e,v,_);else if(this.pintTransformer!=null){_=this.pintTransformer.getDirectivePhpContent(a).trim();let u=q.breakByNewLine(_),f=[];for(let d=0;d<u.length;d++){if(u[d].trim().length==0){f.push("");continue}f.push(" ".repeat(m)+u[d])}_=f.join(`
`),e=q.safeReplace(e,l,k+`
`+_),e=q.safeReplace(e,v,"")}else e=q.safeReplace(e,l,k),e=q.safeReplace(e,v,_);else e=q.safeReplace(e,l,k+`
`+_),e=q.safeReplace(e,v,"")}else if(a.directiveName.trim().toLowerCase()=="verbatim"){let v=n.directive.sourceContent+`
`+Re.shiftClean(a.innerContent,this.transformOptions.tabSize);e=q.safeReplace(e,l,v)}else e=q.safeReplace(e,l,this.printDirective(n.directive,this.indentLevel(l)));e=q.safeReplace(e,c,(p=n.directive.isClosedBy)==null?void 0:p.sourceContent)}),this.inlineDirectives.forEach((n,r)=>{e=q.safeReplaceAllInString(e,r,n.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(n=>{var v;let r=n.forElse.constructedFrom,a=this.open(n.truthSlug),l=this.close(n.truthSlug),c=this.printDirective(r,this.indentLevel(a)),p=(v=r.isClosedBy)==null?void 0:v.sourceContent;e=q.safeReplace(e,a,c),e=q.safeReplace(e,l,p)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(n=>{var c,p;let r=this.open(n.truthSlug),a=n.forElse.constructedFrom,l=this.printDirective(a,this.indentLevel(r));e=q.safeReplace(e,r,l),e=q.safeReplace(e,n.pairClose,(c=a.isClosedBy)==null?void 0:c.sourceContent),e=q.safeReplace(e,n.emptyOpen,(p=n.forElse.elseNode)==null?void 0:p.sourceContent),this.removeLines.push(n.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((n,r)=>{let a=this.selfClosing(r);e=q.safeReplace(e,a,vs.printEcho(n,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),this.spanEchos.forEach((n,r)=>{e=q.safeReplace(e,r,vs.printEcho(n,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),e}pushStartLiteralBlock(t,e){var n;this.parentTransformer!=null?this.parentTransformer.pushStartLiteralBlock(t,e):(this.ignoredLiteralBlocks.set(t,[]),(n=this.ignoredLiteralBlocks.get(t))==null||n.push(e))}pushLiteralBlock(t,e){var n;this.parentTransformer!=null?this.parentTransformer.pushLiteralBlock(t,e):(n=this.ignoredLiteralBlocks.get(t))==null||n.push(e)}transformConditions(t){let e=t;return this.conditions.forEach(n=>{n.structures.forEach(r=>{let a=r.branch.head;if(r.isLiteralContent&&(e=q.safeReplace(e,r.virtualBreakOpen,r.doc.trim())),r.virtualBreakOpen.length>0&&this.removeLines.push(r.virtualBreakOpen),r.virtualBreakClose.length>0&&(e=q.safeReplace(e,r.virtualBreakClose,r.virtualBreakClose+`
`),this.removeLines.push(r.virtualBreakClose)),this.virtualStructureOpens.push(r.virtualOpen),this.removeLines.push(r.virtualOpen),this.removeLines.push(r.virtualClose),!r.isLast)this.removeLines.push(r.pairClose),e=q.safeReplace(e,r.pairOpen,this.printDirective(a,this.indentLevel(r.pairOpen)));else{e=q.safeReplace(e,r.pairOpen,this.printDirective(a,this.indentLevel(r.pairOpen)));let l=a.isClosedBy;e=q.safeReplace(e,r.pairClose,this.printDirective(l,this.indentLevel(r.pairClose)))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(n=>{let r=n.switchNode.constructedFrom;e=q.safeReplace(e,n.virtualSwitchOpen,this.printDirective(r,this.indentLevel(n.virtualSwitchOpen)));let a=r.isClosedBy;e=q.safeReplace(e,n.virtualSwitchClose,a.sourceContent),n.structures.forEach(l=>{let c=l.case.head;this.removeLines.push(l.virtualClose),this.removeLines.push(l.virtualOpen),l.isLast?(e=q.safeReplace(e,l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen))),this.removeLines.push(l.pairClose)):l.isFirst?(this.removeLines.push(l.pairClose),e=q.safeReplace(e,l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen)))):(this.removeLines.push(l.pairClose),e=q.safeReplace(e,l.pairOpen,this.printDirective(c,this.indentLevel(l.pairOpen))))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((n,r)=>{let a=this.close(r),l=this.open(r);this.removeLines.push(a);let c=n.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters){if(this.useLaravelPint)c=this.printDirective(n,this.indentLevel(l));else if(this.phpFormatter!=null&&n.hasValidPhp()){let p=n.getPhpContent().trim();p.startsWith("(")&&p.endsWith(")")&&(p=p.substring(1),p=p.substring(0,p.length-1));let v=this.phpFormatter("<?php "+p,this.transformOptions,null),m=new or,k=m.parse(q.safeReplaceAllInString(v,`
`," ")),_=this.indentLevel(l);m.getIsAssoc()?c="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+v+")":k!=null&&(v=$n.print(k,this.transformOptions.tabSize,1),_>0&&(v=q.removeEmptyNewLines(Re.shiftIndent(v,_,!0,this.transformOptions))),c="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+v+")")}}}catch{c=n.sourceContent}e=q.safeReplace(e,l,c)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((n,r)=>{let a=this.close(r),l=this.open(r);this.removeLines.push(a),e=q.safeReplace(e,l,n.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((n,r)=>{let a=this.selfClosing(r);e=q.safeReplace(e,a,Br.printComment(n,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let n=this.structureLines[e];if(n.includes(t)){let r=n.trimLeft();return n.length-r.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(n=>{let r=n.node;e=q.safeReplace(e,n.pairOpen,Br.printComment(r,this.transformOptions.tabSize,this.indentLevel(n.pairOpen))),this.removeLines.push(n.pairClose),this.removeLines.push(n.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((n,r)=>{e=q.safeReplaceAllInString(e,r,n.nodeContent)}),e}removeTrailingWhitespaceAfterSubstring(t,e){let n=q.breakByNewLine(t),r=[];for(let a=0;a<n.length;a++){let l=n[a];l.trimRight().endsWith(e)?r.push(l.trimRight()):r.push(l)}return r.join(`
`)}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((n,r)=>{e=this.removeTrailingWhitespaceAfterSubstring(e,r),e=q.safeReplaceAllInString(e,r,n.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((n,r)=>{e=q.safeReplaceAllInString(e,r,n.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((n,r)=>{let a=n.directive;e=q.safeReplace(e,r,this.printDirective(a,this.indentLevel(r)))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((n,r)=>{let a=n.content;if(this.transformOptions.useLaravelPint&&this.pintTransformer!=null&&(a=this.pintTransformer.getComponentParameterContent(n)),a.includes(`
`)){let l=this.indentLevel(r);a=Re.shiftIndent(a,l+this.transformOptions.tabSize,!0,this.transformOptions,!1,!0)}e=q.safeReplace(e,r,a)}),e}transformEchoParameters(t){let e=t;return this.echoParameters.forEach((n,r)=>{var a;if(((a=n.inlineEcho)==null?void 0:a.sourceContent.startsWith("{{--"))&&n.inlineEcho.sourceContent.endsWith("--}}")){let l=n.inlineEcho.content.substring(2,n.inlineEcho.content.length-2);e=q.safeReplace(e,r,"{{-- "+l.trim()+" --}}")}n.inlineEcho!=null?e=q.safeReplace(e,r,vs.printEcho(n.inlineEcho,this.transformOptions,this.phpFormatter,0,this.pintTransformer)):e=q.safeReplace(e,r,"")}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((n,r)=>{let a=this.indentLevel(r);a==0&&(a=this.transformOptions.tabSize),e=q.safeReplace(e,r,vs.printEcho(n,this.transformOptions,this.phpFormatter,a,this.pintTransformer))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((n,r)=>{e=q.safeReplace(e,r,this.printDirective(n,this.indentLevel(r)))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((n,r)=>{let a="",l=0;n.isScript?a="//"+r:a="/*"+r+"*/",l=this.indentLevel(a),l==this.transformOptions.tabSize&&(l=0),e.includes(a)&&(e=q.safeReplace(e,a,Re.indentRelative(n.content,l,this.transformOptions.tabSize)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(n=>{e=q.safeReplace(e,n,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],n=q.breakByNewLine(t),r=!1;for(let a=0;a<n.length;a++){let l=n[a].trim();if(r){if(l.length==0)continue;r=!1}else r=this.shouldCleanAfter(l);if(this.shouldCleanLine(l))for(let c=e.length-1;c>0&&e[c].trim().length==0;c--)e.pop();if(!this.removeLines.includes(l)){let c=n[a];this.removeLines.forEach(p=>{c.includes(p)&&(c=q.safeReplace(c,p,""))}),e.push(c)}}return e.join(`
`)}reflowSlugs(t){let e=t,n=q.breakByNewLine(e),r=[];for(let a=0;a<n.length;a++){let l=n[a].trimRight(),c=!1;for(let p=0;p<this.slugs.length;p++){let v=this.slugs[p];if(l.endsWith("<"+v)&&a+1<n.length){let m=n[a+1];if(m.trimLeft().startsWith("/>")){let k=m.indexOf("/>"),_=m.substring(k+2);r.push(l.trimRight()+" />");let u=l.indexOf("<"+v);r.push(" ".repeat(u)+_.trimLeft()),a+=1,c=!0;break}}}c||r.push(l)}return e=r.join(`
`),this.slugs.forEach(a=>{let l=this.open(a),c=this.close(a),p=this.selfClosing(a),v="/<"+a+"(.*?)>/gms",m="/</"+a+"(.*?)>/gms",k="/<"+a+"(.*?)/>/gms";e=e.replace(v,l),e=e.replace(m,c),e=e.replace(k,p)}),e}transformRemovedAttibutes(t){let e=t;return this.removedAttributes.forEach((n,r)=>{let a=Tp(n,this.transformOptions,r,e,this,this.doc);e=q.safeReplace(e,'"'+r+'"',a)}),e}fromStructure(t){if(this.didPintFail)return this.doc.getContent();let e=this.reflowSlugs(t);this.structureLines=q.breakByNewLine(e);let n=this.transformRemovedAttibutes(e);return this.transformStructures(n)}transformStructures(t){let e=t;return e=this.transformInlineDirectives(e),e=this.transformContentDirectives(e),e=this.transformDynamicEcho(e),e=this.transformPairedDirectives(e),e=this.transformForElseWithEmpty(e),e=this.transformForElseWithNoEmpty(e),e=this.transformDynamicElementForElse(e),e=this.transformInlineEcho(e),e=this.transformConditions(e),e=this.transformDynamicElementConditions(e),e=this.transformSwitchStatements(e),e=this.transformDynamicElementSwitch(e),e=this.transformBreaks(e),e=this.transformProps(e),e=this.transformComments(e),e=this.transformVirtualComments(e),e=this.transformDirectiveParameters(e),e=this.transformExpressionParameters(e),e=this.transformEchoParameters(e),e=this.transformDynamicDirectives(e),e=this.cleanVirtualStructures(e),e=this.removeVirtualStructures(e),e=this.transformEmbeddedEcho(e),e=this.transformEmbeddedDirectives(e),e=this.transformExtractedDocuments(e),e=this.transformPhpBlock(e),this.ignoredLiteralBlocks.forEach((n,r)=>{let a=this.selfClosing(r),l=this.indentLevel(a);e=q.safeReplace(e,a,this.dumpPreservedNodes(n))}),e}dumpPreservedNodes(t){let e="";return t.forEach(n=>{n instanceof Zt?e+=n.content:n instanceof Bi||n instanceof yi?e+=n.nodeContent:n instanceof _t||n instanceof Ie?e+=n.sourceContent:n instanceof Mi?e+=n.nodeContent:(n instanceof sn||n instanceof xi||n instanceof oi)&&(e+=n.sourceContent)}),e}}});var me,mn=Dt(()=>{"use strict";pn();Wf();Gf();qf();Fp();me=class{constructor(){this.documentParser=new ot;this.transformer=null;this.cursor=new Xo(this);this.nodes=new Qo(this);this.errors=new Ko(this)}static fromText(t,e=null){let n=new me;return e!=null&&n.getParser().setSeedPosition(e),n.loadString(t)}static childFromText(t,e,n=null){let r=new me;return n!=null&&r.getParser().setSeedPosition(n),r.getParser().withPhpValidator(e.getPhpValidator()),r.loadString(t),{renderNodes:r.getRenderNodes(),content:t,document:r}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new pa(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});var Bp=j((ew,Rp)=>{"use strict";Rp.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":case".":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${i}" at line ${this.yylineno} (offset ${this.offset})`)}}});var Up=j((iw,Mp)=>{"use strict";Mp.exports={T_COMMENT:function(){for(;this.offset<this.size;){let i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let i=this.input(),t=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),i==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(i=this.input(),i==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var Hp=j((nw,Vp)=>{"use strict";Vp.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let i=this.input();if(i=="<"){if(i=this.ahead(1),i=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(i=this._input[this.offset+4],i===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var qp=j((sw,Gp)=>{"use strict";var da=10,Wp="2147483648";process.arch=="x64"&&(da=19,Wp="9223372036854775808");Gp.exports={consume_NUM:function(){let i=this.yytext[0],t=i===".";if(i==="0")if(i=this.input(),i==="x"||i==="X"){if(i=this.input(),i!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if(i=this.input(),i!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else if(i==="o"||i==="O"){if(i=this.input(),i!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){let e=i;if(i=this.input(),i==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(i==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(i==="e"||i==="E"){if(e==="_"){this.unput(1);break}let n=2;if(i=this.input(),(i==="+"||i==="-")&&(n=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?n:n-1);break}if(!this.is_NUM()){i&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<da-1?this.tok.T_LNUMBER:this.yytext.length<da||this.yytext.length==da&&this.yytext<Wp?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_OCTAL()){i&&this.unput(1);break}}return this.tok.T_LNUMBER}}});var Jp=j((rw,zp)=>{"use strict";zp.exports={matchST_LOOKING_FOR_PROPERTY:function(){let i=this.input();if(i==="-"){if(i=this.input(),i===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),i=this.input(),i==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}}}});var jp=j((ow,Yp)=>{"use strict";Yp.exports={matchST_IN_SCRIPTING:function(){let i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),i=this._input[this.offset],(i===`
`||i==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!(i===" "||i==="	"||i===`
`||i==="\r")){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var Qp=j((aw,Kp)=>{"use strict";var Es=[`
`,"\r"],Xp=[`
`,"\r",";"],JS=Xp.concat(["	"," ",",","]",")","/","=","!"]);Kp.exports={T_CONSTANT_ENCAPSED_STRING:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let n=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,Es.includes(this._input[this.offset-1])))return this.heredoc_label.label=n,this.heredoc_label.length=n.length,this.heredoc_label.finished=!1,e=this.offset-i,this.offset=i,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else{if(i=='"')break;if(i=="$"){if(i=this.input(),i=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if(i=this.input(),i=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(i,t){let e=this._input[i-2];if(!Es.includes(e))return!1;let n=!1,r=!1,a=0,l=this._input[i-1];if(this.version>=703){for(;l==="	"||l===" ";)l===" "?n=!0:l==="	"&&(r=!0),l=this._input[i+a],a++;if(i=i+a,Es.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){let c=this._input[i-1+this.heredoc_label.length];if((this.version>=703?JS:Xp).includes(c)){if(t){if(this.consume(a),n&&r)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=a,this.heredoc_label.indentation_uses_spaces=n,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let i=this.offset+1;for(;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!Es.includes(this._input[i-1]))for(;!Es.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let i=this._input[this.offset-1];for(;this.offset<this.size;)if(Es.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),Es.includes(i)||(i=this.input())),Es.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}i&&this.unput(1)}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var Zp=j((hw,$p)=>{"use strict";$p.exports={T_STRING:function(){let i=this.yytext.toLowerCase(),t=this.keywords[i];if(typeof t!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,i==="b"||i==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,n=this.input();for(;n==" ";)n=this.input();let r=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)n+=this.input();let a=n.slice(0,-1).toLowerCase();r=a!=="extends"&&a!=="implements"}return this.unput(this.offset-e),r?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let i=this._input[this.offset-1],t=this.tokenTerminals[i];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),n=this.castKeywords[e];if(typeof n=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return n}return this.unput(this.offset-i),"("},"=":function(){let i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var ed=j((uw,td)=>{"use strict";var YS=";:,.\\[]()|^&+-/*=%!~$<>?@";td.exports={is_NUM:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){let i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){let i=this._input[this.offset-1];return YS.indexOf(i)!==-1},is_WHITESPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95},is_OCTAL:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<56||i===95}}});var nd=j((lw,id)=>{"use strict";var Pi=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};Pi.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};Pi.prototype.input=function(){let i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""};Pi.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};Pi.prototype.tryMatch=function(i){return i===this.ahead(i.length)};Pi.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()};Pi.prototype.ahead=function(i){let t=this._input.substring(this.offset,this.offset+i);return t[t.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(t+=`
`),t};Pi.prototype.consume=function(i){for(let t=0;t<i;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};Pi.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};Pi.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this};Pi.prototype.appendToken=function(i,t){return this.tokens.push([i,t]),this};Pi.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i};Pi.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this};Pi.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};Pi.prototype.next=function(){let i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(i=this.tokens.shift(),typeof i[1]=="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=i;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return i};[Bp(),Up(),Hp(),qp(),Jp(),jp(),Qp(),Zp(),ed()].forEach(function(i){for(let t in i)Pi.prototype[t]=i[t]});id.exports=Pi});var zh=j((cw,sd)=>{"use strict";var jS=function(i,t,e){this.line=i,this.column=t,this.offset=e};sd.exports=jS});var od=j((fw,rd)=>{"use strict";rd.exports={read_array:function(){let i=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(t=!0,i="]");let n=[];return this.next().token!==i&&(n=this.read_array_pair_list(t)),this.expect(i),this.next(),e(t,n)},read_array_pair_list:function(i){let t=this;return this.read_list(function(){return t.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!i&&this.token===")"||i&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,n=null,r=!1,a=!1;if(this.token==="&")this.next(),r=!0,n=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),a=!0,n=this.read_expr();else{let l=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=l,this.token==="&"?(this.next(),r=!0,n=this.read_variable(!0,!1)):n=this.read_expr()):n=l}return t(e,n,r,a)}}});var hd=j((pw,ad)=>{"use strict";ad.exports={read_class_declaration_statement:function(i){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let n=this.node("identifier"),r=this.text();this.next(),n=n(r);let a=this.read_extends_from(),l=this.read_implements_list();this.expect("{");let c=this.next().read_class_body(!0,!1),p=t(n,a,l,c,e);return i&&(p.attrGroups=i),p},read_class_modifiers:function(){let i=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,i.final_or_abstract,i.readonly]},read_class_modifier:function(i){return this.token===this.tok.T_READ_ONLY?(this.next(),i.readonly=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),i.final_or_abstract=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),i.final_or_abstract=2,i=this.read_class_modifier(i)),i},read_class_body:function(i,t){let e=[],n=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let l=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(l);continue}this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list());let r=this.position(),a=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let l=this.read_constant_list(a,n);this.expect(";")&&this.next(),e=e.concat(l);continue}if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),a[0]=null,a[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,a,n,r)),n=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){let l=this.read_variable_list(a,n);n=[],this.expect(";"),this.next(),e=e.concat(l)}else this.error([this.tok.T_CONST,...i?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(i,t){let e=this.node("propertystatement"),n=this.read_list(function(){let a=this.node("property"),l=!1;this.token===this.tok.T_READ_ONLY&&(l=!0,this.next());let[c,p]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let v=this.node("identifier"),m=this.text().substring(1);return this.next(),v=v(m),this.token===";"||this.token===","?a(v,null,l,c,p,t||[]):this.token==="="?a(v,this.next().read_expr(),l,c,p,t||[]):(this.expect([",",";","="]),a(v,null,c,p,t||[]))},",");return e(null,n,i)},read_constant_list:function(i,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),n=this.read_list(function(){let a=this.node("constant"),l=null,c=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){l=this.node("identifier");let p=this.text();this.next(),l=l(p)}else this.expect("IDENTIFIER");return this.expect("=")&&(c=this.next().read_expr()),a(l,c)},",");return e(null,n,i,t||[])},read_member_flags:function(i){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,n=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,n=0;break;case this.tok.T_PROTECTED:e=0,n=1;break;case this.tok.T_PRIVATE:e=0,n=2;break;case this.tok.T_STATIC:e=1,n=1;break;case this.tok.T_ABSTRACT:e=2,n=1;break;case this.tok.T_FINAL:e=2,n=2;break}i&&(e==0&&n==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),n=-1):e==2&&n==1&&(this.error(),n=-1)),t[e]!==-1?this.error():n!==-1&&(t[e]=n)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let i=!1;this.token==="?"&&(i=!0,this.next());let t=this.read_types();if(i&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[i,t]},read_interface_declaration_statement:function(i){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),n=this.text();this.next(),e=e(n);let r=this.read_interface_extends_list();this.expect("{");let a=this.next().read_interface_body();return t(e,r,a,i||[])},read_interface_body:function(){let i=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let n=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let r=this.read_constant_list(n,t);this.expect(";")&&this.next(),i=i.concat(r),t=[]}else if(this.token===this.tok.T_FUNCTION){let r=this.read_function_declaration(2,n,t,e);r.parseFlags(n),i.push(r),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){let i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let n=this.next().read_class_body(!0,!1);return i(t,n)},read_trait_use_statement:function(){let i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(t,e)},read_trait_use_alias:function(){let i=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let n=this.text();this.next(),e=e(n)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let n=this.text();this.next(),e=e(n)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return i("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let n=null,r=null;if(this.next().is("T_MEMBER_FLAGS")&&(n=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){r=this.node("identifier");let a=this.text();this.next(),r=r(a)}else n===!1&&this.expect(this.tok.T_STRING);return i("traitalias",t,e,r,n)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),i("traitalias",t,e,null,null)}}});var ld=j((dw,ud)=>{"use strict";ud.exports={read_comment:function(){let i=this.text(),t=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=n,t},read_doc_comment:function(){let i=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),n=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),i=i(e),i.offset=t,this.prev=n,i}}});var fd=j((mw,cd)=>{"use strict";cd.exports={read_expr:function(i){let t=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),t("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return t("bin","|",i,this.next().read_expr());if(this.token==="&")return t("bin","&",i,this.next().read_expr());if(this.token==="^")return t("bin","^",i,this.next().read_expr());if(this.token===".")return t("bin",".",i,this.next().read_expr());if(this.token==="+")return t("bin","+",i,this.next().read_expr());if(this.token==="-")return t("bin","-",i,this.next().read_expr());if(this.token==="*")return t("bin","*",i,this.next().read_expr());if(this.token==="/")return t("bin","/",i,this.next().read_expr());if(this.token==="%")return t("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",i,this.next().read_expr());if(this.token==="<")return t("bin","<",i,this.next().read_expr());if(this.token===">")return t("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=t("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return t("bin","??",i,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",i,e,this.read_expr())}else t.destroy(i);return i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let i=null;switch(this.token){case this.tok.T_ISSET:{i=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_EMPTY:{i=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{i=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr());break}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){let i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){let i,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let n=null,r=this.innerList;i=this.node("list"),r||(n=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let a=this.read_array_pair_list(!1);this.expect(")")&&this.next();let l=!1;for(let c=0;c<a.length;c++)if(a[c]!==null&&a[c].kind!=="noop"){l=!0;break}return l||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),r?i(a,!1):(this.innerList=!1,this.expect("=")?n(i(a,!1),this.next().read_expr(),"="):i(a,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let n=this.node("throw"),r=this.next().read_expr();return n(r)}case this.tok.T_EXIT:{let n=this.lexer.yytext.toLowerCase()==="die";i=this.node("exit"),this.next();let r=this.read_exit_expr();return i(r,n)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let n=null,r=null;return i=this.node("yield"),this.next().is("EXPR")&&(n=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(r=n,n=this.next().read_expr())),i(n,r)}case this.tok.T_YIELD_FROM:return i=this.node("yieldfrom"),t=this.next().read_expr(),i(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let n=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(n),this.next()}}if(this.is("VARIABLE")){i=this.node(),t=this.read_variable(!1,!1);let n=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return n&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,t):i("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return n&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return n&&this.error("VARIABLE"),this.next(),i("post","+",t);case this.tok.T_DEC:return n&&this.error("VARIABLE"),this.next(),i("post","-",t);default:i.destroy(t)}}else if(this.is("SCALAR")){if(i=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let n=this.convertToList(t);t.loc&&(n.loc=t.loc);let r=this.next().read_expr();return i("assign",n,r,"=")}else i.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(i){let t=i.items.map(n=>(n.value&&n.value.kind==="array"&&n.value.shortForm&&(n.value=this.convertToList(n.value)),n)),e=this.node("list")(t,!0);return i.loc&&(e.loc=i.loc),i.leadingComments&&(e.leadingComments=i.leadingComments),i.trailingComments&&(e.trailingComments=i.trailingComments),e},read_assignref:function(i,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),i("assignref",t,e)},read_inline_function:function(i,t){if(this.token===this.tok.T_FUNCTION){let v=this.read_function(!0,i,t);return v.attrGroups=t,v}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let n=this.is_reference();this.expect("(")&&this.next();let r=this.read_parameter_list();this.expect(")")&&this.next();let a=!1,l=null;this.token===":"&&(this.next().token==="?"&&(a=!0,this.next()),l=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let c=this.read_expr(),p=e(r,n,c,l,a,!!i);return p.attrGroups=t,p},read_match_expression:function(){let i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),i(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute(){let i=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(i,t)},read_attr_list(){let i=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());i.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){let i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[];if(this.token==="("){this.next();let r=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(t=this.read_argument_list()),i(r,t)}let e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let r=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let a=this.read_extends_from(),l=this.read_implements_list(),c=null;this.expect("{")&&(c=this.next().read_class_body(!0,!1));let p=r(null,a,l,c,[0,0,0]);return p.attrGroups=e,i(p,t)}let n=this.read_new_class_name();for(;this.token==="[";){let r=this.node("offsetlookup"),a=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),n=r(n,a)}return this.token==="("&&(t=this.read_argument_list()),i(n,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else if(this.token==="(")i=this.node("call")(i,this.read_argument_list());else return i;return i}}});var dd=j((gw,pd)=>{"use strict";pd.exports={read_enum_declaration_statement:function(i){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),n=this.text();this.next(),e=e(n);let r=this.read_enum_value_type(),a=this.read_implements_list();this.expect("{");let l=this.next().read_class_body(!1,!0),c=t(e,r,a,l);return i&&(c.attrGroups=i),c},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let i=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let n=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(t,n)}}});var gd=j((_w,md)=>{"use strict";md.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(i,t,e,n){let r=this.read_function_declaration(i?1:t?2:0,t&&t[1]===1,e||[],n);return t&&t[2]==1?(r.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(r.body=this.read_code_block(!1),r.loc&&r.body.loc&&(r.loc.end=r.body.loc.end)),!i&&t&&r.parseFlags(t)),r},read_function_declaration:function(i,t,e,n){let r="function";i===1?r="closure":i===2&&(r="method");let a=this.node(r);this.expect(this.tok.T_FUNCTION)&&this.next();let l=this.is_reference(),c=!1,p=[],v=null,m=!1;if(i!==1){let u=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(c=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(c=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(c=this.text()),this.next()),c=u(c)}this.expect("(")&&this.next();let k=this.read_parameter_list(c.name==="__construct");this.expect(")")&&this.next(),i===1&&(p=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(m=!0,this.next()),v=this.read_types());let _=u=>(u.attrGroups=e||[],n&&u.loc&&(u.loc.start=n,u.loc.source&&(u.loc.source=this.lexer._input.substr(u.loc.start.offset,u.loc.end.offset-u.loc.start.offset))),u);return _(i===1?a(k,l,p,v,m,t):a(c,k,l,v,m))},read_lexical_vars:function(){let i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){let t=[];for(;this.token!=this.EOF;)if(t.push(i()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let i=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),i(t,!1)},read_parameter_list:function(i){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(i);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(i){let t=this.node("parameter"),e=null,n=null,r=null,a=!1,l=!1,c=[];this.token===this.tok.T_ATTRIBUTE&&(c=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor"));let p=this.read_promoted();!l&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),l=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),a=!0),r=this.read_types(),a&&!r&&this.raiseError("Expecting a type definition combined with nullable operator");let v=this.is_reference(),m=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let _=this.text().substring(1);this.next(),e=e(_)}this.token=="="&&(n=this.next().read_expr());let k=t(e,r,n,v,m,l,a,p);return c&&(k.attrGroups=c),k},read_types(){let i="unset",t="union",e="intersection",n=[],r=i,a=this.read_type();if(!a)return null;for(n.push(a);this.token==="|"||this.version>=801&&this.token==="&";){let l=this.peek();if(l===this.tok.T_ELLIPSIS||l===this.tok.T_VARIABLE)break;r===i?r=this.token==="|"?t:e:(r===t&&this.token!=="|"||r===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),n.push(this.read_type())}return n.length===1?n[0]:r===e?this.node("intersectiontype")(n):this.node("uniontype")(n)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){let i=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";i&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(i=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),i("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?i("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}}});var xd=j((xw,_d)=>{"use strict";_d.exports={read_if:function(){let i=this.node("if"),t=this.next().read_if_expr(),e=null,n=null,r=!1;if(this.token===":"){r=!0,this.next(),e=this.node("block");let a=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}a.push(this.read_inner_statement())}e=e(null,a),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?n=this.read_if():this.token===this.tok.T_ELSE&&(n=this.next().read_statement());return i(t,e,n,r)},read_if_expr:function(){this.expect("(")&&this.next();let i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){let i=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let n=this.node("block"),r=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}r.push(this.read_inner_statement())}return t(e,n(null,r),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let i=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return i(null,t)}}});var Ed=j((vw,vd)=>{"use strict";vd.exports={read_while:function(){let i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,n=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(n=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),i(t,e,n)},read_do:function(){let i=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(t,e)},read_for:function(){let i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],n=[],r=null,a=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(n=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(a=!0,r=this.read_short_form(this.tok.T_ENDFOR)):r=this.read_statement(),i(t,e,n,r,a)},read_foreach:function(){let i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,n=null,r=null,a=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),n=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=n,n=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(a=!0,r=this.read_short_form(this.tok.T_ENDFOREACH)):r=this.read_statement(),i(t,e,n,r,a)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let i=this.token==="[",t=this.node("list");this.next(),!i&&this.expect("(")&&this.next();let e=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),t(e,i)}else return this.read_variable(!1,!1)}}});var kd=j((Ew,yd)=>{"use strict";yd.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var Cd=j((yw,Td)=>{"use strict";Td.exports={read_namespace:function(){let i=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(i){let t=this.node(),e,n=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,n=n.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(n.toLowerCase()==="parent")return t("parentreference",n);if(n.toLowerCase()==="self")return t("selfreference",n)}return t("name",n,e)},read_use_statement:function(){let i=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let n=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(n===null),this.expect("}")&&this.next()),i=i(e,n,t),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){let t=this.node("useitem"),e=null;i&&(e=this.read_use_type());let n=this.read_namespace_name(),r=this.read_use_alias();return t(n.name,r,e)},read_use_declarations:function(i){let t=[this.read_use_declaration(i)];for(;this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(i))}return t},read_use_alias:function(){let i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),i=t(e)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var Sd=j((kw,bd)=>{"use strict";var Ad={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};bd.exports={resolve_special_chars:function(i,t){return t?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,n,r)=>Ad[n]?Ad[n]:n[0]==="x"||n[0]==="X"?String.fromCodePoint(parseInt(n.substr(1),16)):n[0]==="u"?String.fromCodePoint(parseInt(r,16)):String.fromCodePoint(parseInt(n,8))):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,t,e,n){if(t===0)return i;this.check_heredoc_indentation_level(i,t,e,n);let r=e?" ":"	",a=new RegExp(`\\n${r}{${t}}`,"g"),l=new RegExp(`^${r}{${t}}`);return n&&(i=i.replace(l,"")),i.replace(a,`
`)},check_heredoc_indentation_level:function(i,t,e,n){let r=i.length,a=0,l=0,c=!0,p=e?" ":"	",v=!1;if(!n){if(a=i.indexOf(`
`),a===-1)return;a++}for(;a<r;)c?i[a]===p?l++:v=!0:c=!1,i[a]!==`
`&&v&&l<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):v=!1,i[a]===`
`&&(c=!0,l=0),a++},read_dereferencable_scalar:function(){let i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),n=0;(e[0]==="b"||e[0]==="B")&&(n=1);let r=e[n]==='"';this.next();let a=this.resolve_special_chars(e.substring(n+1,e.length-1),r);t=t(r,a,n===1,e),this.token===this.tok.T_DOUBLE_COLON?i=this.read_static_getter(t):i=t}break;case this.tok.T_ARRAY:i=this.read_array();break;case"[":i=this.read_array();break}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let i,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return i=this.text(),this.next(),e(i,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));let n=i[i.length-1];n===`
`?i[i.length-2]==="\r"?i=i.substring(0,i.length-2):i=i.substring(0,i.length-1):n==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let r=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),r,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(i){let t,e,n=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=n(i,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=n(i,e)),t},read_encapsed_string_item:function(i){let t=this.node("encapsedpart"),e=null,n=!1,r=this.node(),a,l,c;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let p=this.text();this.next(),r=r("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(p,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):p,!1,p)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",n=!0,c=null,this.next().token===this.tok.T_STRING_VARNAME){c=this.node("variable");let p=this.text();this.next(),r.destroy(),this.token==="["?(c=c(p,!1),l=this.node("offsetlookup"),a=this.next().read_expr(),this.expect("]")&&this.next(),r=l(c,a)):r=c(p,!1)}else r=r("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",r.destroy(),r=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",r.destroy(),r=this.read_simple_variable(),this.token==="["&&(l=this.node("offsetlookup"),a=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),r=l(r,a)),this.token===this.tok.T_OBJECT_OPERATOR){l=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let p=this.node("identifier");c=this.text(),this.next(),r=l(r,p(c))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let p=this.text();this.next(),r.destroy(),r=r("string",!1,p,!1,p)}return this.lexer.heredoc_label.first_encaps_node=!1,t(r,e,n)},read_encapsed_string:function(i,t=!1){let e=this.lexer.yylloc.first_offset,n=this.node("encapsed");this.next();let r=this.lexer.yylloc.prev_offset-(t?1:0),a=[],l=null;for(i==="`"?l=this.ast.encapsed.TYPE_SHELL:i==='"'?l=this.ast.encapsed.TYPE_STRING:l=this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)a.push(this.read_encapsed_string_item(!0));if(a.length>0&&a[a.length-1].kind==="encapsedpart"&&a[a.length-1].expression.kind==="string"){let p=a[a.length-1].expression,v=p.value[p.value.length-1];v===`
`?p.value[p.value.length-2]==="\r"?p.value=p.value.substring(0,p.value.length-2):p.value=p.value.substring(0,p.value.length-1):v==="\r"&&(p.value=p.value.substring(0,p.value.length-1))}this.expect(i)&&this.next();let c=this.lexer._input.substring(l==="heredoc"?e:r-1,this.lexer.yylloc.first_offset);return n=n(a,c,l),i===this.tok.T_END_HEREDOC&&(n.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),n},get_magic_constant:function(){let i=this.node("magic"),t=this.text();return this.next(),i(t.toUpperCase(),t)}}});var Nd=j((Tw,Dd)=>{"use strict";Dd.exports={read_top_statements:function(){let i=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_top_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let i=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let i=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?i(t,this.next().read_expr()):i(t,null)},",",!1)},read_declare_list:function(){let i=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),n=this.text();this.next(),e=e(n);let r=null;if(this.expect("=")&&(r=this.next().read_expr()),i.push(t(e,r)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=i,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let i=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_GLOBAL:{let i=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),i(t)}case this.tok.T_STATIC:{let i=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(i);let n=this.next().read_expr();return this.expectEndOfStatement(n),t("expressionstatement",n)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let i=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",n=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),i(n,e)}case this.tok.T_INLINE_HTML:{let i=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let n=this.node("inline");return this.next(),n(i,e?t+i:i)}case this.tok.T_UNSET:{let i=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),i(t)}case this.tok.T_DECLARE:{let i=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let n=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return i(n,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let i=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),i(t)}case";":return this.next(),null;case this.tok.T_STRING:{let i=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),n=this.node("identifier");if(this.next().token===":")return n=n(e),this.next(),i("label",n);n.destroy(),i.destroy(),this.lexer.tokens.push(t);let r=this.node("expressionstatement"),a=this.next().read_expr();return this.expectEndOfStatement(a),r(a)}case this.tok.T_GOTO:{let i=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return i(t)}default:{let i=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),i(t)}}},read_code_block:function(i){let t=this.node("block");this.expect("{")&&this.next();let e=i?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var Pd=j((Cw,Id)=>{"use strict";Id.exports={read_switch:function(){let i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",n=this.read_switch_case_list();return i(t,n,e)},read_switch_case_list:function(){let i=null,t=this.node("block"),e=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)e.push(this.read_case_list(i));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(i){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let n=this.node("block"),r=[];for(;this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)r.push(this.read_inner_statement());return t(e,n(null,r))}}});var wd=j((Aw,Od)=>{"use strict";Od.exports={read_try:function(){this.expect(this.tok.T_TRY);let i=this.node("try"),t=null,e=[],n=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let r=this.node("catch");this.next().expect("(")&&this.next();let a=this.read_list(this.read_namespace_name,"|",!1),l=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(l=this.read_variable(!0,!1)),this.expect(")"),e.push(r(this.next().read_statement(),a,l))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),i(n,e,t)}}});var Fd=j((bw,Ld)=>{"use strict";Ld.exports={read_short_form:function(i){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(i,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(i.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(i,t,e){let n=[];if(this.token==t&&(e&&n.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{let r=i.apply(this,[]);if(r&&n.push(r),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(i))n.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=i);)n.push(this.text())}return n},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){let t=this.node("byref");this.next(),t=t(null);let e=i();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let i=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?i(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var Bd=j((Sw,Rd)=>{"use strict";Rd.exports={read_variable:function(i,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let n=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(n.kind)===-1){let r=n.name.toLowerCase();r==="true"?e=n.destroy(e("boolean",!0,n.name)):r==="false"?e=n.destroy(e("boolean",!1,n.name)):r==="null"?e=n.destroy(e("nullkeyword",n.name)):(e.destroy(n),e=n)}else e.destroy(n),e=n}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let n=this.text();this.next(),e=e(n)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,i,t)},read_static_getter:function(i,t){let e=this.node("staticlookup"),n,r;return this.next().is([this.tok.T_VARIABLE,"$"])?n=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(n=this.node("identifier"),r=this.text(),this.next(),n=n(r)):this.token==="{"?(n=this.node("literal"),r=this.next().read_expr(),this.expect("}")&&this.next(),n=n("literal",r,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),n=this.node("identifier"),r=this.text(),this.next(),n=n(r)),e(i,n)},read_what:function(i=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(i,t,e){let n,r;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":{let l=this.token==="[";n=this.node("offsetlookup"),this.next(),r=!1,e?(r=this.read_encaps_var_offset(),this.expect(l?"]":"}")&&this.next()):(l?this.token!=="]":this.token!=="}")?(r=this.read_expr(),this.expect(l?"]":"}")&&this.next()):this.next(),i=n(i,r);break}case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),n=this.node("staticlookup"),i=n(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{n=this.node("propertylookup"),i=n(i,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{n=this.node("nullsafepropertylookup"),i=n(i,this.read_what());break}default:break t}return i},read_encaps_var_offset:function(){let i=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),i=i("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),i=i("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),i=i("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),i=i("identifier",t)}return i},read_reference_variable:function(i){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let n=this.node();if(this.token=="{"&&!i)e=this.next().read_expr(),this.expect("}")&&this.next(),t=n("offsetlookup",t,e);else{n.destroy();break}}return t},read_simple_variable:function(){let i=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),i=i(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),i=i(e,!0);break}case"$":i=i(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),i=i(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),i=i(t,!1)}return i}}});var Ud=j((Dw,Md)=>{"use strict";var XS=zh();function Yh(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}var ki=function(i,t){this.lexer=i,this.ast=t,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(n){return[n,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};ki.prototype.getTokenName=function(i){return Yh(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"};ki.prototype.parse=function(i,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),n=[];for(this.next();this.token!=this.EOF;)n.push(this.read_start());n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let r=e(n,this._errors,this._docs,this._tokens);if(this.debug){let a=this.ast.checkNodes();if(a.length>0)throw a.forEach(function(l){l.position&&console.log("Node at line "+l.position.line+", column "+l.position.column),console.log(l.stack.join(`
`))}),new Error("Some nodes are not closed")}return r};ki.prototype.raiseError=function(i,t,e,n){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let a=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw a.lineNumber=this.lexer.yylloc.first_line,a.fileName=this.filename,a.columnNumber=this.lexer.yylloc.first_column,a}let r=this.ast.prepare("error",null,this)(i,n,this.lexer.yylloc.first_line,e);return this._errors.push(r),r};ki.prototype.error=function(i){let t="Parse Error : syntax error",e=this.getTokenName(this.token),n="";if(this.token!==this.EOF){if(Yh(this.token)){let r=this.text();r.length>10&&(r=r.substring(0,7)+"..."),e="'"+r+"' ("+e+")"}t+=", unexpected "+e}return i&&!Array.isArray(i)&&((Yh(i)||i.length===1)&&(n=", expecting "+this.getTokenName(i)),t+=n),this.raiseError(t,n,i,e)};ki.prototype.position=function(){return new XS(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};ki.prototype.node=function(i){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(t)));let e=this.ast.prepare(i,t,this);return e.postBuild=function(n){if(this._docIndex<this._docs.length)if(this._lastNode){let r=this.prev[2],a=this._docIndex;for(;a<this._docs.length&&!(this._docs[a].offset>r);a++);a>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,a)),this._docIndex=a)}else this.token===this.EOF&&(n.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=n}.bind(this),e}return this.ast.prepare(i,null,this)};ki.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var Jh=["parser.next","parser.node","parser.showlog"];ki.prototype.showlog=function(){let i=new Error().stack.split(`
`),t;for(let e=2;e<i.length;e++){t=i[e].trim();let n=!1;for(let r=0;r<Jh.length;r++)if(t.substring(3,3+Jh[r].length)===Jh[r]){n=!0;break}if(!n)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};ki.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0};ki.prototype.text=function(){return this.lexer.yytext};ki.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};ki.prototype.peek=function(){let i=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(i),t};ki.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let i=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?i=[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:i=[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};ki.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)};[od(),hd(),ld(),fd(),dd(),gd(),xd(),Ed(),kd(),Cd(),Sd(),Nd(),Pd(),wd(),Fd(),Bd()].forEach(function(i){for(let t in i){if(Object.prototype.hasOwnProperty.call(ki.prototype,t))throw new Error("Function "+t+" is already defined - collision");ki.prototype[t]=i[t]}});Md.exports=ki});var Wd=j((Nw,Hd)=>{"use strict";var Vd={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},KS={values:Object.entries(Vd).reduce((i,[t,e])=>({...i,[e]:t}),{}),names:Vd};Hd.exports=Object.freeze(KS)});var qd=j((Iw,Gd)=>{"use strict";var QS=function(i,t,e){this.source=i,this.start=t,this.end=e};Gd.exports=QS});var ui=j((Pw,zd)=>{"use strict";var Ur=function(t,e,n){this.kind=t,e&&(this.leadingComments=e),n&&(this.loc=n)};Ur.prototype.setTrailingComments=function(i){this.trailingComments=i};Ur.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i};Ur.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this};Ur.extends=function(i,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=i,t};zd.exports=Ur});var Ee=j((Ow,jd)=>{"use strict";var Jd=ui(),Yd="expression";jd.exports=Jd.extends(Yd,function(t,e,n){Jd.apply(this,[t||Yd,e,n])})});var $d=j((ww,Qd)=>{"use strict";var Xd=Ee(),Kd="array";Qd.exports=Xd.extends(Kd,function(t,e,n,r){Xd.apply(this,[Kd,n,r]),this.items=e,this.shortForm=t})});var im=j((Lw,em)=>{"use strict";var Zd=Ee(),tm="arrowfunc";em.exports=Zd.extends(tm,function(t,e,n,r,a,l,c,p){Zd.apply(this,[tm,c,p]),this.arguments=t,this.byref=e,this.body=n,this.type=r,this.nullable=a,this.isStatic=l||!1})});var om=j((Fw,rm)=>{"use strict";var nm=Ee(),sm="assign";rm.exports=nm.extends(sm,function(t,e,n,r,a){nm.apply(this,[sm,r,a]),this.left=t,this.right=e,this.operator=n})});var lm=j((Rw,um)=>{"use strict";var am=Ee(),hm="assignref";um.exports=am.extends(hm,function(t,e,n,r){am.apply(this,[hm,n,r]),this.left=t,this.right=e})});var dm=j((Bw,pm)=>{"use strict";var cm=ui(),fm="attribute";pm.exports=cm.extends(fm,function(t,e,n,r){cm.apply(this,[fm,n,r]),this.name=t,this.args=e})});var xm=j((Mw,_m)=>{"use strict";var mm=ui(),gm="attrgroup";_m.exports=mm.extends(gm,function(t,e,n){mm.apply(this,[gm,e,n]),this.attrs=t||[]})});var Fs=j((Uw,ym)=>{"use strict";var vm=Ee(),Em="operation";ym.exports=vm.extends(Em,function(t,e,n){vm.apply(this,[t||Em,e,n])})});var Am=j((Vw,Cm)=>{"use strict";var km=Fs(),Tm="bin";Cm.exports=km.extends(Tm,function(t,e,n,r,a){km.apply(this,[Tm,r,a]),this.type=t,this.left=e,this.right=n})});var Ae=j((Hw,Dm)=>{"use strict";var bm=ui(),Sm="statement";Dm.exports=bm.extends(Sm,function(t,e,n){bm.apply(this,[t||Sm,e,n])})});var Vr=j((Ww,Pm)=>{"use strict";var Nm=Ae(),Im="block";Pm.exports=Nm.extends(Im,function(t,e,n,r){Nm.apply(this,[t||Im,n,r]),this.children=e.filter(Boolean)})});var Zn=j((Gw,Lm)=>{"use strict";var Om=Ee(),wm="literal";Lm.exports=Om.extends(wm,function(t,e,n,r,a){Om.apply(this,[t||wm,r,a]),this.value=e,n&&(this.raw=n)})});var Mm=j((qw,Bm)=>{"use strict";var Fm=Zn(),Rm="boolean";Bm.exports=Fm.extends(Rm,function(t,e,n,r){Fm.apply(this,[Rm,t,e,n,r])})});var Wm=j((zw,Hm)=>{"use strict";var Um=Ae(),Vm="break";Hm.exports=Um.extends(Vm,function(t,e,n){Um.apply(this,[Vm,e,n]),this.level=t})});var Jm=j((Jw,zm)=>{"use strict";var Gm=Ee(),qm="byref";zm.exports=Gm.extends(qm,function(t,e,n){Gm.apply(this,[qm,e,n]),this.what=t})});var Km=j((Yw,Xm)=>{"use strict";var Ym=Ee(),jm="call";Xm.exports=Ym.extends(jm,function(t,e,n,r){Ym.apply(this,[jm,n,r]),this.what=t,this.arguments=e})});var tg=j((jw,Zm)=>{"use strict";var Qm=Ae(),$m="case";Zm.exports=Qm.extends($m,function(t,e,n,r){Qm.apply(this,[$m,n,r]),this.test=t,this.body=e})});var sg=j((Xw,ng)=>{"use strict";var eg=Fs(),ig="cast";ng.exports=eg.extends(ig,function(t,e,n,r,a){eg.apply(this,[ig,r,a]),this.type=t,this.raw=e,this.expr=n})});var hg=j((Kw,ag)=>{"use strict";var rg=Ae(),og="catch";ag.exports=rg.extends(og,function(t,e,n,r,a){rg.apply(this,[og,r,a]),this.body=t,this.what=e,this.variable=n})});var Un=j((Qw,fg)=>{"use strict";var ug=Ae(),lg="declaration",$S="",ZS="public",tD="protected",eD="private",cg=ug.extends(lg,function(t,e,n,r){ug.apply(this,[t||lg,n,r]),this.name=e});cg.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.isReadonly=i[3]===1,this.kind!=="class"&&(i[0]===-1?this.visibility=$S:i[0]===null?this.visibility=null:i[0]===0?this.visibility=ZS:i[0]===1?this.visibility=tD:i[0]===2&&(this.visibility=eD),this.isStatic=i[1]===1)};fg.exports=cg});var gg=j(($w,mg)=>{"use strict";var pg=Un(),dg="class";mg.exports=pg.extends(dg,function(t,e,n,r,a,l,c){pg.apply(this,[dg,t,l,c]),this.isAnonymous=!t,this.extends=e,this.implements=n,this.body=r,this.attrGroups=[],this.parseFlags(a)})});var jh=j((Zw,vg)=>{"use strict";var _g=Ae(),xg="constantstatement";vg.exports=_g.extends(xg,function(t,e,n,r){_g.apply(this,[t||xg,n,r]),this.constants=e})});var Cg=j((tL,Tg)=>{"use strict";var Eg=jh(),yg="classconstant",iD="",nD="public",sD="protected",rD="private",kg=Eg.extends(yg,function(t,e,n,r,a,l){Eg.apply(this,[t||yg,e,a,l]),this.parseFlags(n),this.attrGroups=r});kg.prototype.parseFlags=function(i){i[0]===-1?this.visibility=iD:i[0]===null?this.visibility=null:i[0]===0?this.visibility=nD:i[0]===1?this.visibility=sD:i[0]===2&&(this.visibility=rD)};Tg.exports=kg});var Dg=j((eL,Sg)=>{"use strict";var Ag=Ee(),bg="clone";Sg.exports=Ag.extends(bg,function(t,e,n){Ag.apply(this,[bg,e,n]),this.what=t})});var Og=j((iL,Pg)=>{"use strict";var Ng=Ee(),Ig="closure";Pg.exports=Ng.extends(Ig,function(t,e,n,r,a,l,c,p){Ng.apply(this,[Ig,c,p]),this.uses=n,this.arguments=t,this.byref=e,this.type=r,this.nullable=a,this.isStatic=l||!1,this.body=null,this.attrGroups=[]})});var ma=j((nL,Lg)=>{"use strict";var wg=ui();Lg.exports=wg.extends("comment",function(t,e,n,r){wg.apply(this,[t,n,r]),this.value=e})});var Mg=j((sL,Bg)=>{"use strict";var Fg=ma(),Rg="commentblock";Bg.exports=Fg.extends(Rg,function(t,e,n){Fg.apply(this,[Rg,t,e,n])})});var Wg=j((rL,Hg)=>{"use strict";var Ug=ma(),Vg="commentline";Hg.exports=Ug.extends(Vg,function(t,e,n){Ug.apply(this,[Vg,t,e,n])})});var Jg=j((oL,zg)=>{"use strict";var Gg=ui(),qg="constant";zg.exports=Gg.extends(qg,function(t,e,n,r){Gg.apply(this,[qg,n,r]),this.name=t,this.value=e})});var Kg=j((aL,Xg)=>{"use strict";var Yg=Ae(),jg="continue";Xg.exports=Yg.extends(jg,function(t,e,n){Yg.apply(this,[jg,e,n]),this.level=t})});var t_=j((hL,Zg)=>{"use strict";var Qg=Vr(),$g="declare",ga=Qg.extends($g,function(t,e,n,r,a){Qg.apply(this,[$g,e,r,a]),this.directives=t,this.mode=n});ga.MODE_SHORT="short";ga.MODE_BLOCK="block";ga.MODE_NONE="none";Zg.exports=ga});var s_=j((uL,n_)=>{"use strict";var e_=ui(),i_="declaredirective";n_.exports=e_.extends(i_,function(t,e,n,r){e_.apply(this,[i_,n,r]),this.key=t,this.value=e})});var h_=j((lL,a_)=>{"use strict";var r_=Ae(),o_="do";a_.exports=r_.extends(o_,function(t,e,n,r){r_.apply(this,[o_,n,r]),this.test=t,this.body=e})});var f_=j((cL,c_)=>{"use strict";var u_=Ae(),l_="echo";c_.exports=u_.extends(l_,function(t,e,n,r){u_.apply(this,[l_,n,r]),this.shortForm=e,this.expressions=t})});var g_=j((fL,m_)=>{"use strict";var p_=Ee(),d_="empty";m_.exports=p_.extends(d_,function(t,e,n){p_.apply(this,[d_,e,n]),this.expression=t})});var E_=j((pL,v_)=>{"use strict";var __=Zn(),x_="encapsed",Hr=__.extends(x_,function(t,e,n,r,a){__.apply(this,[x_,t,e,r,a]),this.type=n});Hr.TYPE_STRING="string";Hr.TYPE_SHELL="shell";Hr.TYPE_HEREDOC="heredoc";Hr.TYPE_OFFSET="offset";v_.exports=Hr});var C_=j((dL,T_)=>{"use strict";var y_=Ee(),k_="encapsedpart";T_.exports=y_.extends(k_,function(t,e,n,r,a){y_.apply(this,[k_,r,a]),this.expression=t,this.syntax=e,this.curly=n})});var D_=j((mL,S_)=>{"use strict";var A_=Ee(),b_="entry";S_.exports=A_.extends(b_,function(t,e,n,r,a,l){A_.apply(this,[b_,a,l]),this.key=t,this.value=e,this.byRef=n,this.unpack=r})});var O_=j((gL,P_)=>{"use strict";var N_=Un(),I_="enum";P_.exports=N_.extends(I_,function(t,e,n,r,a,l){N_.apply(this,[I_,t,a,l]),this.valueType=e,this.implements=n,this.body=r,this.attrGroups=[]})});var R_=j((_L,F_)=>{"use strict";var w_=ui(),L_="enumcase";F_.exports=w_.extends(L_,function(t,e,n,r){w_.apply(this,[L_,n,r]),this.name=t,this.value=e})});var V_=j((xL,U_)=>{"use strict";var B_=ui(),M_="error";U_.exports=B_.extends(M_,function(t,e,n,r,a,l){B_.apply(this,[M_,a,l]),this.message=t,this.token=e,this.line=n,this.expected=r})});var q_=j((vL,G_)=>{"use strict";var H_=Ee(),W_="eval";G_.exports=H_.extends(W_,function(t,e,n){H_.apply(this,[W_,e,n]),this.source=t})});var j_=j((EL,Y_)=>{"use strict";var z_=Ee(),J_="exit";Y_.exports=z_.extends(J_,function(t,e,n,r){z_.apply(this,[J_,n,r]),this.expression=t,this.useDie=e})});var $_=j((yL,Q_)=>{"use strict";var X_=Ae(),K_="expressionstatement";Q_.exports=X_.extends(K_,function(t,e,n){X_.apply(this,[K_,e,n]),this.expression=t})});var ix=j((kL,ex)=>{"use strict";var Z_=Ae(),tx="for";ex.exports=Z_.extends(tx,function(t,e,n,r,a,l,c){Z_.apply(this,[tx,l,c]),this.init=t,this.test=e,this.increment=n,this.shortForm=a,this.body=r})});var ox=j((TL,rx)=>{"use strict";var nx=Ae(),sx="foreach";rx.exports=nx.extends(sx,function(t,e,n,r,a,l,c){nx.apply(this,[sx,l,c]),this.source=t,this.key=e,this.value=n,this.shortForm=a,this.body=r})});var Xh=j((CL,ux)=>{"use strict";var ax=Un(),hx="function";ux.exports=ax.extends(hx,function(t,e,n,r,a,l,c){ax.apply(this,[hx,t,l,c]),this.arguments=e,this.byref=n,this.type=r,this.nullable=a,this.body=null,this.attrGroups=[]})});var px=j((AL,fx)=>{"use strict";var lx=Ae(),cx="global";fx.exports=lx.extends(cx,function(t,e,n){lx.apply(this,[cx,e,n]),this.items=t})});var _x=j((bL,gx)=>{"use strict";var dx=Ae(),mx="goto";gx.exports=dx.extends(mx,function(t,e,n){dx.apply(this,[mx,e,n]),this.label=t})});var yx=j((SL,Ex)=>{"use strict";var xx=Ae(),vx="halt";Ex.exports=xx.extends(vx,function(t,e,n){xx.apply(this,[vx,e,n]),this.after=t})});var Ax=j((DL,Cx)=>{"use strict";var kx=ui(),Tx="identifier",oD=kx.extends(Tx,function(t,e,n){kx.apply(this,[Tx,e,n]),this.name=t});Cx.exports=oD});var Nx=j((NL,Dx)=>{"use strict";var bx=Ae(),Sx="if";Dx.exports=bx.extends(Sx,function(t,e,n,r,a,l){bx.apply(this,[Sx,a,l]),this.test=t,this.body=e,this.alternate=n,this.shortForm=r})});var wx=j((IL,Ox)=>{"use strict";var Ix=Ee(),Px="include";Ox.exports=Ix.extends(Px,function(t,e,n,r,a){Ix.apply(this,[Px,r,a]),this.once=t,this.require=e,this.target=n})});var Bx=j((PL,Rx)=>{"use strict";var Lx=Zn(),Fx="inline";Rx.exports=Lx.extends(Fx,function(t,e,n,r){Lx.apply(this,[Fx,t,e,n,r])})});var Hx=j((OL,Vx)=>{"use strict";var Mx=Un(),Ux="interface";Vx.exports=Mx.extends(Ux,function(t,e,n,r,a,l){Mx.apply(this,[Ux,t,a,l]),this.extends=e,this.body=n,this.attrGroups=r})});var zx=j((wL,qx)=>{"use strict";var Wx=Un(),Gx="intersectiontype";qx.exports=Wx.extends(Gx,function(t,e,n){Wx.apply(this,[Gx,null,e,n]),this.types=t})});var Xx=j((LL,jx)=>{"use strict";var Jx=Ee(),Yx="isset";jx.exports=Jx.extends(Yx,function(t,e,n){Jx.apply(this,[Yx,e,n]),this.variables=t})});var Zx=j((FL,$x)=>{"use strict";var Kx=Ae(),Qx="label";$x.exports=Kx.extends(Qx,function(t,e,n){Kx.apply(this,[Qx,e,n]),this.name=t})});var nv=j((RL,iv)=>{"use strict";var tv=Ee(),ev="list";iv.exports=tv.extends(ev,function(t,e,n,r){tv.apply(this,[ev,n,r]),this.items=t,this.shortForm=e})});var ur=j((BL,ov)=>{"use strict";var sv=Ee(),rv="lookup";ov.exports=sv.extends(rv,function(t,e,n,r,a){sv.apply(this,[t||rv,r,a]),this.what=e,this.offset=n})});var lv=j((ML,uv)=>{"use strict";var av=Zn(),hv="magic";uv.exports=av.extends(hv,function(t,e,n,r){av.apply(this,[hv,t,e,n,r])})});var dv=j((UL,pv)=>{"use strict";var cv=Ee(),fv="match";pv.exports=cv.extends(fv,function(t,e,n,r){cv.apply(this,[fv,n,r]),this.cond=t,this.arms=e})});var xv=j((VL,_v)=>{"use strict";var mv=Ee(),gv="matcharm";_v.exports=mv.extends(gv,function(t,e,n,r){mv.apply(this,[gv,n,r]),this.conds=t,this.body=e})});var kv=j((HL,yv)=>{"use strict";var vv=Xh(),Ev="method";yv.exports=vv.extends(Ev,function(){vv.apply(this,arguments),this.kind=Ev})});var Rs=j((WL,Av)=>{"use strict";var Tv=ui(),Cv="reference",aD=Tv.extends(Cv,function(t,e,n){Tv.apply(this,[t||Cv,e,n])});Av.exports=aD});var Nv=j((GL,Dv)=>{"use strict";var bv=Rs(),Sv="name",Wr=bv.extends(Sv,function(t,e,n,r){bv.apply(this,[Sv,n,r]),this.name=t.replace(/\\$/,""),this.resolution=e});Wr.UNQUALIFIED_NAME="uqn";Wr.QUALIFIED_NAME="qn";Wr.FULL_QUALIFIED_NAME="fqn";Wr.RELATIVE_NAME="rn";Dv.exports=Wr});var wv=j((qL,Ov)=>{"use strict";var Iv=Vr(),Pv="namespace";Ov.exports=Iv.extends(Pv,function(t,e,n,r,a){Iv.apply(this,[Pv,e,r,a]),this.name=t,this.withBrackets=n||!1})});var Bv=j((zL,Rv)=>{"use strict";var Lv=Ee(),Fv="namedargument";Rv.exports=Lv.extends(Fv,function(t,e,n,r){Lv.apply(this,[Fv,n,r]),this.name=t,this.value=e})});var Hv=j((JL,Vv)=>{"use strict";var Mv=Ee(),Uv="new";Vv.exports=Mv.extends(Uv,function(t,e,n,r){Mv.apply(this,[Uv,n,r]),this.what=t,this.arguments=e})});var zv=j((YL,qv)=>{"use strict";var Wv=ui(),Gv="noop";qv.exports=Wv.extends(Gv,function(t,e){Wv.apply(this,[Gv,t,e])})});var Xv=j((jL,jv)=>{"use strict";var Jv=Zn(),Yv="nowdoc";jv.exports=Jv.extends(Yv,function(t,e,n,r,a){Jv.apply(this,[Yv,t,e,r,a]),this.label=n})});var Zv=j((XL,$v)=>{"use strict";var Kv=ui(),Qv="nullkeyword";$v.exports=Kv.extends(Qv,function(t,e,n){Kv.apply(this,[Qv,e,n]),this.raw=t})});var nE=j((KL,iE)=>{"use strict";var tE=ur(),eE="nullsafepropertylookup";iE.exports=tE.extends(eE,function(t,e,n,r){tE.apply(this,[eE,t,e,n,r])})});var aE=j((QL,oE)=>{"use strict";var sE=Zn(),rE="number";oE.exports=sE.extends(rE,function(t,e,n,r){sE.apply(this,[rE,t,e,n,r])})});var cE=j(($L,lE)=>{"use strict";var hE=ur(),uE="offsetlookup";lE.exports=hE.extends(uE,function(t,e,n,r){hE.apply(this,[uE,t,e,n,r])})});var mE=j((ZL,dE)=>{"use strict";var fE=Un(),pE="parameter";dE.exports=fE.extends(pE,function(t,e,n,r,a,l,c,p,v,m){fE.apply(this,[pE,t,v,m]),this.value=n,this.type=e,this.byref=r,this.variadic=a,this.readonly=l,this.nullable=c,this.flags=p||0,this.attrGroups=[]})});var vE=j((tF,xE)=>{"use strict";var gE=Rs(),_E="parentreference",hD=gE.extends(_E,function(t,e,n){gE.apply(this,[_E,e,n]),this.raw=t});xE.exports=hD});var TE=j((eF,kE)=>{"use strict";var EE=Fs(),yE="post";kE.exports=EE.extends(yE,function(t,e,n,r){EE.apply(this,[yE,n,r]),this.type=t,this.what=e})});var SE=j((iF,bE)=>{"use strict";var CE=Fs(),AE="pre";bE.exports=CE.extends(AE,function(t,e,n,r){CE.apply(this,[AE,n,r]),this.type=t,this.what=e})});var PE=j((nF,IE)=>{"use strict";var DE=Ee(),NE="print";IE.exports=DE.extends(NE,function(t,e,n){DE.apply(this,[NE,e,n]),this.expression=t})});var FE=j((sF,LE)=>{"use strict";var OE=Vr(),wE="program";LE.exports=OE.extends(wE,function(t,e,n,r,a,l){OE.apply(this,[wE,t,a,l]),this.errors=e,n&&(this.comments=n),r&&(this.tokens=r)})});var UE=j((rF,ME)=>{"use strict";var RE=Ae(),BE="property";ME.exports=RE.extends(BE,function(t,e,n,r,a,l,c,p){RE.apply(this,[BE,c,p]),this.name=t,this.value=e,this.readonly=n,this.nullable=r,this.type=a,this.attrGroups=l})});var GE=j((oF,WE)=>{"use strict";var VE=ur(),HE="propertylookup";WE.exports=VE.extends(HE,function(t,e,n,r){VE.apply(this,[HE,t,e,n,r])})});var jE=j((aF,YE)=>{"use strict";var qE=Ae(),zE="propertystatement",uD="",lD="public",cD="protected",fD="private",JE=qE.extends(zE,function(t,e,n,r,a){qE.apply(this,[zE,r,a]),this.properties=e,this.parseFlags(n)});JE.prototype.parseFlags=function(i){i[0]===-1?this.visibility=uD:i[0]===null?this.visibility=null:i[0]===0?this.visibility=lD:i[0]===1?this.visibility=cD:i[0]===2&&(this.visibility=fD),this.isStatic=i[1]===1};YE.exports=JE});var $E=j((hF,QE)=>{"use strict";var XE=Ee(),KE="retif";QE.exports=XE.extends(KE,function(t,e,n,r,a){XE.apply(this,[KE,r,a]),this.test=t,this.trueExpr=e,this.falseExpr=n})});var iy=j((uF,ey)=>{"use strict";var ZE=Ae(),ty="return";ey.exports=ZE.extends(ty,function(t,e,n){ZE.apply(this,[ty,e,n]),this.expr=t})});var oy=j((lF,ry)=>{"use strict";var ny=Rs(),sy="selfreference",pD=ny.extends(sy,function(t,e,n){ny.apply(this,[sy,e,n]),this.raw=t});ry.exports=pD});var ly=j((cF,uy)=>{"use strict";var ay=Ee(),hy="silent";uy.exports=ay.extends(hy,function(t,e,n){ay.apply(this,[hy,e,n]),this.expr=t})});var dy=j((fF,py)=>{"use strict";var cy=Ae(),fy="static";py.exports=cy.extends(fy,function(t,e,n){cy.apply(this,[fy,e,n]),this.variables=t})});var xy=j((pF,_y)=>{"use strict";var my=ui(),gy="staticvariable";_y.exports=my.extends(gy,function(t,e,n,r){my.apply(this,[gy,n,r]),this.variable=t,this.defaultValue=e})});var ky=j((dF,yy)=>{"use strict";var vy=ur(),Ey="staticlookup";yy.exports=vy.extends(Ey,function(t,e,n,r){vy.apply(this,[Ey,t,e,n,r])})});var by=j((mF,Ay)=>{"use strict";var Ty=Rs(),Cy="staticreference",dD=Ty.extends(Cy,function(t,e,n){Ty.apply(this,[Cy,e,n]),this.raw=t});Ay.exports=dD});var Iy=j((gF,Ny)=>{"use strict";var Sy=Zn(),Dy="string";Ny.exports=Sy.extends(Dy,function(t,e,n,r,a,l){Sy.apply(this,[Dy,e,r,a,l]),this.unicode=n,this.isDoubleQuote=t})});var Ly=j((_F,wy)=>{"use strict";var Py=Ae(),Oy="switch";wy.exports=Py.extends(Oy,function(t,e,n,r,a){Py.apply(this,[Oy,r,a]),this.test=t,this.body=e,this.shortForm=n})});var My=j((xF,By)=>{"use strict";var Fy=Ae(),Ry="throw";By.exports=Fy.extends(Ry,function(t,e,n){Fy.apply(this,[Ry,e,n]),this.what=t})});var Wy=j((vF,Hy)=>{"use strict";var Uy=Un(),Vy="trait";Hy.exports=Uy.extends(Vy,function(t,e,n,r){Uy.apply(this,[Vy,t,n,r]),this.body=e})});var Jy=j((EF,zy)=>{"use strict";var Gy=ui(),qy="traitalias",mD="",gD="public",_D="protected",xD="private";zy.exports=Gy.extends(qy,function(t,e,n,r,a,l){Gy.apply(this,[qy,a,l]),this.trait=t,this.method=e,this.as=n,this.visibility=mD,r&&(r[0]===0?this.visibility=gD:r[0]===1?this.visibility=_D:r[0]===2&&(this.visibility=xD))})});var Ky=j((yF,Xy)=>{"use strict";var Yy=ui(),jy="traitprecedence";Xy.exports=Yy.extends(jy,function(t,e,n,r,a){Yy.apply(this,[jy,r,a]),this.trait=t,this.method=e,this.instead=n})});var tk=j((kF,Zy)=>{"use strict";var Qy=ui(),$y="traituse";Zy.exports=Qy.extends($y,function(t,e,n,r){Qy.apply(this,[$y,n,r]),this.traits=t,this.adaptations=e})});var sk=j((TF,nk)=>{"use strict";var ek=Ae(),ik="try";nk.exports=ek.extends(ik,function(t,e,n,r,a){ek.apply(this,[ik,r,a]),this.body=t,this.catches=e,this.always=n})});var uk=j((CF,hk)=>{"use strict";var rk=Rs(),ok="typereference",ak=rk.extends(ok,function(t,e,n,r){rk.apply(this,[ok,n,r]),this.name=t,this.raw=e});ak.types=["int","float","string","bool","object","array","callable","iterable","void","static"];hk.exports=ak});var pk=j((AF,fk)=>{"use strict";var lk=Fs(),ck="unary";fk.exports=lk.extends(ck,function(t,e,n,r){lk.apply(this,[ck,n,r]),this.type=t,this.what=e})});var _k=j((bF,gk)=>{"use strict";var dk=Un(),mk="uniontype";gk.exports=dk.extends(mk,function(t,e,n){dk.apply(this,[mk,null,e,n]),this.types=t})});var yk=j((SF,Ek)=>{"use strict";var xk=Ae(),vk="unset";Ek.exports=xk.extends(vk,function(t,e,n){xk.apply(this,[vk,e,n]),this.variables=t})});var Ak=j((DF,Ck)=>{"use strict";var kk=Ae(),Tk="usegroup";Ck.exports=kk.extends(Tk,function(t,e,n,r,a){kk.apply(this,[Tk,r,a]),this.name=t,this.type=e,this.items=n})});var Nk=j((NF,Dk)=>{"use strict";var bk=Ae(),Sk="useitem",Kh=bk.extends(Sk,function(t,e,n,r,a){bk.apply(this,[Sk,r,a]),this.name=t,this.alias=e,this.type=n});Kh.TYPE_CONST="const";Kh.TYPE_FUNCTION="function";Dk.exports=Kh});var wk=j((IF,Ok)=>{"use strict";var Ik=Ee(),Pk="variable";Ok.exports=Ik.extends(Pk,function(t,e,n,r){Ik.apply(this,[Pk,n,r]),this.name=t,this.curly=e||!1})});var Bk=j((PF,Rk)=>{"use strict";var Lk=Ee(),Fk="variadic";Rk.exports=Lk.extends(Fk,function(t,e,n){Lk.apply(this,[Fk,e,n]),this.what=t})});var Hk=j((OF,Vk)=>{"use strict";var Mk=ui(),Uk="variadicplaceholder";Vk.exports=Mk.extends(Uk,function(t,e){Mk.apply(this,[Uk,t,e])})});var zk=j((wF,qk)=>{"use strict";var Wk=Ae(),Gk="while";qk.exports=Wk.extends(Gk,function(t,e,n,r,a){Wk.apply(this,[Gk,r,a]),this.test=t,this.body=e,this.shortForm=n})});var Xk=j((LF,jk)=>{"use strict";var Jk=Ee(),Yk="yield";jk.exports=Jk.extends(Yk,function(t,e,n,r){Jk.apply(this,[Yk,n,r]),this.value=t,this.key=e})});var Zk=j((FF,$k)=>{"use strict";var Kk=Ee(),Qk="yieldfrom";$k.exports=Kk.extends(Qk,function(t,e,n){Kk.apply(this,[Qk,e,n]),this.value=t})});var eT=j((RF,tT)=>{"use strict";var vD=qd(),ED=zh(),Oi=function(i,t){this.withPositions=i,this.withSource=t};Oi.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,t){i.forEach(function(e){Oi.precedence[e]=t+1})});Oi.prototype.isRightAssociative=function(i){return i==="**"||i==="??"};Oi.prototype.swapLocations=function(i,t,e,n){this.withPositions&&(i.loc.start=t.loc.start,i.loc.end=e.loc.end,this.withSource&&(i.loc.source=n.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Oi.prototype.resolveLocations=function(i,t,e,n){this.withPositions&&(i.loc.start.offset>t.loc.start.offset&&(i.loc.start=t.loc.start),i.loc.end.offset<e.loc.end.offset&&(i.loc.end=e.loc.end),this.withSource&&(i.loc.source=n.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Oi.prototype.resolvePrecedence=function(i,t){let e,n,r;return i.kind==="call"?this.resolveLocations(i,i.what,i,t):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,t):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(n=Oi.precedence[i.type],r=Oi.precedence[i.right.type],n&&r&&r<=n&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(e=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e)):i.right.kind==="retif"&&(n=Oi.precedence[i.type],r=Oi.precedence["?"],n&&r&&r<=n&&(e=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e))):(i.kind==="silent"||i.kind==="cast")&&i.expr&&!i.expr.parenthesizedExpression?i.expr.kind==="bin"?(e=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.expr.kind==="retif"&&(e=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(e=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.what.kind==="retif"&&(e=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(e=i.falseExpr,i.falseExpr=e.test,this.swapLocations(i,i.test,i.falseExpr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(n=Oi.precedence["="],r=Oi.precedence[i.right.type],n&&r&&r<n&&(e=i.right,i.right=i.right.left,e.left=i,this.swapLocations(e,e.left,i.right,t),i=e)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,t),i};Oi.prototype.prepare=function(i,t,e){let n=null;(this.withPositions||this.withSource)&&(n=e.position());let r=this,a=function(){let l=null,c=Array.prototype.slice.call(arguments);if(c.push(t),r.withPositions||r.withSource){let m=null;r.withSource&&(m=e.lexer._input.substring(n.offset,e.prev[2])),l=new vD(m,n,new ED(e.prev[0],e.prev[1],e.prev[2])),c.push(l)}i||(i=c.shift());let p=r[i];if(typeof p!="function")throw new Error('Undefined node "'+i+'"');let v=Object.create(p.prototype);return p.apply(v,c),a.instance=v,a.trailingComments&&(v.trailingComments=a.trailingComments),typeof a.postBuild=="function"&&a.postBuild(v),e.debug&&delete r.stack[a.stackUid],r.resolvePrecedence(v,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:n,stack:new Error().stack.split(`
`).slice(3,5)},a.stackUid=this.stackUid),a.setTrailingComments=function(l){a.instance?a.instance.setTrailingComments(l):a.trailingComments=l},a.destroy=function(l){t&&(l?l.leadingComments?l.leadingComments=t.concat(l.leadingComments):l.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete r.stack[a.stackUid]},a};Oi.prototype.checkNodes=function(){let i=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,i.push(this.stack[t]));return this.stack={},i};[$d(),im(),om(),lm(),dm(),xm(),Am(),Vr(),Mm(),Wm(),Jm(),Km(),tg(),sg(),hg(),gg(),Cg(),Dg(),Og(),ma(),Mg(),Wg(),Jg(),jh(),Kg(),Un(),t_(),s_(),h_(),f_(),g_(),E_(),C_(),D_(),O_(),R_(),V_(),q_(),j_(),Ee(),$_(),ix(),ox(),Xh(),px(),_x(),yx(),Ax(),Nx(),wx(),Bx(),Hx(),zx(),Xx(),Zx(),nv(),Zn(),ur(),lv(),dv(),xv(),kv(),Nv(),wv(),Bv(),Hv(),ui(),zv(),Xv(),Zv(),nE(),aE(),cE(),Fs(),mE(),vE(),TE(),SE(),PE(),FE(),UE(),GE(),jE(),Rs(),$E(),iy(),oy(),ly(),Ae(),dy(),xy(),ky(),by(),Iy(),Ly(),My(),Wy(),Jy(),Ky(),tk(),sk(),uk(),pk(),_k(),yk(),Ak(),Nk(),wk(),Bk(),Hk(),zk(),Xk(),Zk()].forEach(function(i){Oi.prototype[i.kind]=i});tT.exports=Oi});var Zh=j((BF,ts)=>{"use strict";var iT=nd(),nT=Ud(),sT=Wd(),rT=eT();function Qh(i,t){let e=Object.keys(i),n=e.length;for(;n--;){let r=e[n],a=i[r];a===null?delete t[r]:typeof a=="function"?t[r]=a.bind(t):Array.isArray(a)?t[r]=Array.isArray(t[r])?t[r].concat(a):a:typeof a=="object"?t[r]=typeof t[r]=="object"?Qh(a,t[r]):a:t[r]=a}return t}var $i=function(i){if(typeof this=="function")return new this(i);if(this.tokens=sT,this.lexer=new iT(this),this.ast=new rT,this.parser=new nT(this.lexer,this.ast),i&&typeof i=="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){let t=i.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+i.parser.version);i.parser.version=t}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Qh(i,this),this.lexer.version=this.parser.version}},$h=function(i){return typeof i.write=="function"?i.toString():i};$i.create=function(i){return new $i(i)};$i.parseEval=function(i,t){return new $i(t).parseEval(i)};$i.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=$h(i),this.parser.parse(i,"eval")};$i.parseCode=function(i,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new $i(e).parseCode(i,t)};$i.prototype.parseCode=function(i,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=$h(i),this.parser.parse(i,t)};$i.tokenGetAll=function(i,t){return new $i(t).tokenGetAll(i)};$i.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=$h(i);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(i);let n=this.lexer.lex()||t,r=[];for(;n!=t;){let a=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,n)&&(a=[e[n],a,this.lexer.yylloc.first_line]),r.push(a),n=this.lexer.lex()||t}return r};ts.exports=$i;ts.exports.tokens=sT;ts.exports.lexer=iT;ts.exports.AST=rT;ts.exports.parser=nT;ts.exports.combine=Qh;ts.exports.Engine=$i;ts.exports.default=$i});var oT,_a,aT=Dt(()=>{"use strict";oT=Yi(Zh()),_a=class{constructor(){this.lastError=null}isValid(t,e=!0){let n=new oT.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?n.parseEval(t):n.parseCode(t,"test.php")}catch(r){return r instanceof SyntaxError&&(this.lastError=r),!1}return this.lastError=null,!0}getLastError(){return this.lastError}}});var xa,hT=Dt(()=>{"use strict";xa=class{static printError(t,e){var c,p;let n=t.message+`

`,r=(p=(c=t.node)==null?void 0:c.startPosition)==null?void 0:p.line,a=r;e.forEach((v,m)=>{a=m});let l=a.toString().length;return e.forEach((v,m)=>{let k=m.toString(),_="",u=0;u=l-k.length,r==m?_=" >"+"0".repeat(u)+k+"| ":_="  "+"0".repeat(u)+k+"| ",n+=_+v+`
`}),n}}});var va,uT=Dt(()=>{"use strict";mn();va=class{constructor(){this.filePath="";this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null;this.removedAttributes=new Map}withRemovedAttributes(t){return this.removedAttributes=t,this}withTransformOptions(t){return this.transformOptions=t,this}withFilePath(t){return this.filePath=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(me.fromText(t))}formatDocument(t,e=null){if(this.preFormatter!=null){let a=this.preFormatter(t);if(a!=null)return a}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withShadowDocument(e).withFilePath(this.filePath).withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter).withRemovedAttributes(this.removedAttributes),t.transform().setFormattingOptions(this.formattingOptions),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let n=t.transform().toStructure(),r=this.htmlFormatter(n);return t.transform().fromStructure(r)}}});var Ea,lT=Dt(()=>{"use strict";hT();uT();gs();Ea=class extends va{constructor(t,e){super(),sa(t),this.withHtmlFormatter(_p).withFilePath(t.filepath).withPhpFormatter(vp).withBlockPhpFormatter(Ep).withPhpTagFormatter(yp).withJsonFormatter(pp).withTransformOptions(e).withPreFormatter(n=>{var r,a,l;if(n.errors.hasStructureErrors()){let c=n.errors.getFirstStructureError(),p=n.getLinesAround((l=(a=(r=c.node)==null?void 0:r.startPosition)==null?void 0:a.line)!=null?l:1),v=xa.printError(c,p);throw new SyntaxError(v)}return null})}}});var cT=j((Gr,tu)=>{(function(t,e){typeof Gr=="object"&&typeof tu=="object"?tu.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Gr=="object"?Gr.esprima=e():t.esprima=e()})(Gr,function(){return function(i){var t={};function e(n){if(t[n])return t[n].exports;var r=t[n]={exports:{},id:n,loaded:!1};return i[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}return e.m=i,e.c=t,e.p="",e(0)}([function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(1),r=e(3),a=e(8),l=e(15);function c(_,u,f){var d=null,x=function(it,tt){f&&f(it,tt),d&&d.visit(it,tt)},A=typeof f=="function"?x:null,w=!1;if(u){w=typeof u.comment=="boolean"&&u.comment;var H=typeof u.attachComment=="boolean"&&u.attachComment;(w||H)&&(d=new n.CommentHandler,d.attach=H,u.comment=!0,A=x)}var V=!1;u&&typeof u.sourceType=="string"&&(V=u.sourceType==="module");var Y;u&&typeof u.jsx=="boolean"&&u.jsx?Y=new r.JSXParser(_,u,A):Y=new a.Parser(_,u,A);var F=V?Y.parseModule():Y.parseScript(),z=F;return w&&d&&(z.comments=d.comments),Y.config.tokens&&(z.tokens=Y.tokens),Y.config.tolerant&&(z.errors=Y.errorHandler.errors),z}t.parse=c;function p(_,u,f){var d=u||{};return d.sourceType="module",c(_,d,f)}t.parseModule=p;function v(_,u,f){var d=u||{};return d.sourceType="script",c(_,d,f)}t.parseScript=v;function m(_,u,f){var d=new l.Tokenizer(_,u),x;x=[];try{for(;;){var A=d.getNextToken();if(!A)break;f&&(A=f(A)),x.push(A)}}catch(w){d.errorHandler.tolerate(w)}return d.errorHandler.tolerant&&(x.errors=d.errors()),x}t.tokenize=m;var k=e(2);t.Syntax=k.Syntax,t.version="4.0.1"},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(2),r=function(){function a(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return a.prototype.insertInnerComments=function(l,c){if(l.type===n.Syntax.BlockStatement&&l.body.length===0){for(var p=[],v=this.leading.length-1;v>=0;--v){var m=this.leading[v];c.end.offset>=m.start&&(p.unshift(m.comment),this.leading.splice(v,1),this.trailing.splice(v,1))}p.length&&(l.innerComments=p)}},a.prototype.findTrailingComments=function(l){var c=[];if(this.trailing.length>0){for(var p=this.trailing.length-1;p>=0;--p){var v=this.trailing[p];v.start>=l.end.offset&&c.unshift(v.comment)}return this.trailing.length=0,c}var m=this.stack[this.stack.length-1];if(m&&m.node.trailingComments){var k=m.node.trailingComments[0];k&&k.range[0]>=l.end.offset&&(c=m.node.trailingComments,delete m.node.trailingComments)}return c},a.prototype.findLeadingComments=function(l){for(var c=[],p;this.stack.length>0;){var v=this.stack[this.stack.length-1];if(v&&v.start>=l.start.offset)p=v.node,this.stack.pop();else break}if(p){for(var m=p.leadingComments?p.leadingComments.length:0,k=m-1;k>=0;--k){var _=p.leadingComments[k];_.range[1]<=l.start.offset&&(c.unshift(_),p.leadingComments.splice(k,1))}return p.leadingComments&&p.leadingComments.length===0&&delete p.leadingComments,c}for(var k=this.leading.length-1;k>=0;--k){var v=this.leading[k];v.start<=l.start.offset&&(c.unshift(v.comment),this.leading.splice(k,1))}return c},a.prototype.visitNode=function(l,c){if(!(l.type===n.Syntax.Program&&l.body.length>0)){this.insertInnerComments(l,c);var p=this.findTrailingComments(c),v=this.findLeadingComments(c);v.length>0&&(l.leadingComments=v),p.length>0&&(l.trailingComments=p),this.stack.push({node:l,start:c.start.offset})}},a.prototype.visitComment=function(l,c){var p=l.type[0]==="L"?"Line":"Block",v={type:p,value:l.value};if(l.range&&(v.range=l.range),l.loc&&(v.loc=l.loc),this.comments.push(v),this.attach){var m={comment:{type:p,value:l.value,range:[c.start.offset,c.end.offset]},start:c.start.offset};l.loc&&(m.comment.loc=l.loc),l.type=p,this.leading.push(m),this.trailing.push(m)}},a.prototype.visit=function(l,c){l.type==="LineComment"?this.visitComment(l,c):l.type==="BlockComment"?this.visitComment(l,c):this.attach&&this.visitNode(l,c)},a}();t.CommentHandler=r},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(i,t,e){"use strict";var n=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var x in d)d.hasOwnProperty(x)&&(f[x]=d[x])};return function(f,d){u(f,d);function x(){this.constructor=f}f.prototype=d===null?Object.create(d):(x.prototype=d.prototype,new x)}}();Object.defineProperty(t,"__esModule",{value:!0});var r=e(4),a=e(5),l=e(6),c=e(7),p=e(8),v=e(13),m=e(14);v.TokenName[100]="JSXIdentifier",v.TokenName[101]="JSXText";function k(u){var f;switch(u.type){case l.JSXSyntax.JSXIdentifier:var d=u;f=d.name;break;case l.JSXSyntax.JSXNamespacedName:var x=u;f=k(x.namespace)+":"+k(x.name);break;case l.JSXSyntax.JSXMemberExpression:var A=u;f=k(A.object)+"."+k(A.property);break;default:break}return f}var _=function(u){n(f,u);function f(d,x,A){return u.call(this,d,x,A)||this}return f.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():u.prototype.parsePrimaryExpression.call(this)},f.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},f.prototype.finishJSX=function(){this.nextToken()},f.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},f.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},f.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},f.prototype.scanXHTMLEntity=function(d){for(var x="&",A=!0,w=!1,H=!1,V=!1;!this.scanner.eof()&&A&&!w;){var Y=this.scanner.source[this.scanner.index];if(Y===d)break;if(w=Y===";",x+=Y,++this.scanner.index,!w)switch(x.length){case 2:H=Y==="#";break;case 3:H&&(V=Y==="x",A=V||r.Character.isDecimalDigit(Y.charCodeAt(0)),H=H&&!V);break;default:A=A&&!(H&&!r.Character.isDecimalDigit(Y.charCodeAt(0))),A=A&&!(V&&!r.Character.isHexDigit(Y.charCodeAt(0)));break}}if(A&&w&&x.length>2){var F=x.substr(1,x.length-2);H&&F.length>1?x=String.fromCharCode(parseInt(F.substr(1),10)):V&&F.length>2?x=String.fromCharCode(parseInt("0"+F.substr(1),16)):!H&&!V&&m.XHTMLEntities[F]&&(x=m.XHTMLEntities[F])}return x},f.prototype.lexJSX=function(){var d=this.scanner.source.charCodeAt(this.scanner.index);if(d===60||d===62||d===47||d===58||d===61||d===123||d===125){var x=this.scanner.source[this.scanner.index++];return{type:7,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(d===34||d===39){for(var A=this.scanner.index,w=this.scanner.source[this.scanner.index++],H="";!this.scanner.eof();){var V=this.scanner.source[this.scanner.index++];if(V===w)break;V==="&"?H+=this.scanXHTMLEntity(w):H+=V}return{type:8,value:H,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:A,end:this.scanner.index}}if(d===46){var Y=this.scanner.source.charCodeAt(this.scanner.index+1),F=this.scanner.source.charCodeAt(this.scanner.index+2),x=Y===46&&F===46?"...":".",A=this.scanner.index;return this.scanner.index+=x.length,{type:7,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:A,end:this.scanner.index}}if(d===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(r.Character.isIdentifierStart(d)&&d!==92){var A=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var V=this.scanner.source.charCodeAt(this.scanner.index);if(r.Character.isIdentifierPart(V)&&V!==92)++this.scanner.index;else if(V===45)++this.scanner.index;else break}var z=this.scanner.source.slice(A,this.scanner.index);return{type:100,value:z,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:A,end:this.scanner.index}}return this.scanner.lex()},f.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var d=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(d)),d},f.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var d=this.scanner.index,x="";!this.scanner.eof();){var A=this.scanner.source[this.scanner.index];if(A==="{"||A==="<")break;++this.scanner.index,x+=A,r.Character.isLineTerminator(A.charCodeAt(0))&&(++this.scanner.lineNumber,A==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var w={type:101,value:x,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:d,end:this.scanner.index};return x.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(w)),w},f.prototype.peekJSXToken=function(){var d=this.scanner.saveState();this.scanner.scanComments();var x=this.lexJSX();return this.scanner.restoreState(d),x},f.prototype.expectJSX=function(d){var x=this.nextJSXToken();(x.type!==7||x.value!==d)&&this.throwUnexpectedToken(x)},f.prototype.matchJSX=function(d){var x=this.peekJSXToken();return x.type===7&&x.value===d},f.prototype.parseJSXIdentifier=function(){var d=this.createJSXNode(),x=this.nextJSXToken();return x.type!==100&&this.throwUnexpectedToken(x),this.finalize(d,new a.JSXIdentifier(x.value))},f.prototype.parseJSXElementName=function(){var d=this.createJSXNode(),x=this.parseJSXIdentifier();if(this.matchJSX(":")){var A=x;this.expectJSX(":");var w=this.parseJSXIdentifier();x=this.finalize(d,new a.JSXNamespacedName(A,w))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var H=x;this.expectJSX(".");var V=this.parseJSXIdentifier();x=this.finalize(d,new a.JSXMemberExpression(H,V))}return x},f.prototype.parseJSXAttributeName=function(){var d=this.createJSXNode(),x,A=this.parseJSXIdentifier();if(this.matchJSX(":")){var w=A;this.expectJSX(":");var H=this.parseJSXIdentifier();x=this.finalize(d,new a.JSXNamespacedName(w,H))}else x=A;return x},f.prototype.parseJSXStringLiteralAttribute=function(){var d=this.createJSXNode(),x=this.nextJSXToken();x.type!==8&&this.throwUnexpectedToken(x);var A=this.getTokenRaw(x);return this.finalize(d,new c.Literal(x.value,A))},f.prototype.parseJSXExpressionAttribute=function(){var d=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var x=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(d,new a.JSXExpressionContainer(x))},f.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},f.prototype.parseJSXNameValueAttribute=function(){var d=this.createJSXNode(),x=this.parseJSXAttributeName(),A=null;return this.matchJSX("=")&&(this.expectJSX("="),A=this.parseJSXAttributeValue()),this.finalize(d,new a.JSXAttribute(x,A))},f.prototype.parseJSXSpreadAttribute=function(){var d=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var x=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(d,new a.JSXSpreadAttribute(x))},f.prototype.parseJSXAttributes=function(){for(var d=[];!this.matchJSX("/")&&!this.matchJSX(">");){var x=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();d.push(x)}return d},f.prototype.parseJSXOpeningElement=function(){var d=this.createJSXNode();this.expectJSX("<");var x=this.parseJSXElementName(),A=this.parseJSXAttributes(),w=this.matchJSX("/");return w&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(d,new a.JSXOpeningElement(x,w,A))},f.prototype.parseJSXBoundaryElement=function(){var d=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var x=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(d,new a.JSXClosingElement(x))}var A=this.parseJSXElementName(),w=this.parseJSXAttributes(),H=this.matchJSX("/");return H&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(d,new a.JSXOpeningElement(A,H,w))},f.prototype.parseJSXEmptyExpression=function(){var d=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(d,new a.JSXEmptyExpression)},f.prototype.parseJSXExpressionContainer=function(){var d=this.createJSXNode();this.expectJSX("{");var x;return this.matchJSX("}")?(x=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),x=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(d,new a.JSXExpressionContainer(x))},f.prototype.parseJSXChildren=function(){for(var d=[];!this.scanner.eof();){var x=this.createJSXChildNode(),A=this.nextJSXText();if(A.start<A.end){var w=this.getTokenRaw(A),H=this.finalize(x,new a.JSXText(A.value,w));d.push(H)}if(this.scanner.source[this.scanner.index]==="{"){var V=this.parseJSXExpressionContainer();d.push(V)}else break}return d},f.prototype.parseComplexJSXElement=function(d){for(var x=[];!this.scanner.eof();){d.children=d.children.concat(this.parseJSXChildren());var A=this.createJSXChildNode(),w=this.parseJSXBoundaryElement();if(w.type===l.JSXSyntax.JSXOpeningElement){var H=w;if(H.selfClosing){var V=this.finalize(A,new a.JSXElement(H,[],null));d.children.push(V)}else x.push(d),d={node:A,opening:H,closing:null,children:[]}}if(w.type===l.JSXSyntax.JSXClosingElement){d.closing=w;var Y=k(d.opening.name),F=k(d.closing.name);if(Y!==F&&this.tolerateError("Expected corresponding JSX closing tag for %0",Y),x.length>0){var V=this.finalize(d.node,new a.JSXElement(d.opening,d.children,d.closing));d=x[x.length-1],d.children.push(V),x.pop()}else break}}return d},f.prototype.parseJSXElement=function(){var d=this.createJSXNode(),x=this.parseJSXOpeningElement(),A=[],w=null;if(!x.selfClosing){var H=this.parseComplexJSXElement({node:d,opening:x,closing:w,children:A});A=H.children,w=H.closing}return this.finalize(d,new a.JSXElement(x,A,w))},f.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var d=this.parseJSXElement();return this.finishJSX(),d},f.prototype.isStartOfExpression=function(){return u.prototype.isStartOfExpression.call(this)||this.match("<")},f}(p.Parser);t.JSXParser=_},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};t.Character={fromCodePoint:function(n){return n<65536?String.fromCharCode(n):String.fromCharCode(55296+(n-65536>>10))+String.fromCharCode(56320+(n-65536&1023))},isWhiteSpace:function(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(n)>=0},isLineTerminator:function(n){return n===10||n===13||n===8232||n===8233},isIdentifierStart:function(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&e.NonAsciiIdentifierStart.test(t.Character.fromCodePoint(n))},isIdentifierPart:function(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&e.NonAsciiIdentifierPart.test(t.Character.fromCodePoint(n))},isDecimalDigit:function(n){return n>=48&&n<=57},isHexDigit:function(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102},isOctalDigit:function(n){return n>=48&&n<=55}}},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(6),r=function(){function d(x){this.type=n.JSXSyntax.JSXClosingElement,this.name=x}return d}();t.JSXClosingElement=r;var a=function(){function d(x,A,w){this.type=n.JSXSyntax.JSXElement,this.openingElement=x,this.children=A,this.closingElement=w}return d}();t.JSXElement=a;var l=function(){function d(){this.type=n.JSXSyntax.JSXEmptyExpression}return d}();t.JSXEmptyExpression=l;var c=function(){function d(x){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=x}return d}();t.JSXExpressionContainer=c;var p=function(){function d(x){this.type=n.JSXSyntax.JSXIdentifier,this.name=x}return d}();t.JSXIdentifier=p;var v=function(){function d(x,A){this.type=n.JSXSyntax.JSXMemberExpression,this.object=x,this.property=A}return d}();t.JSXMemberExpression=v;var m=function(){function d(x,A){this.type=n.JSXSyntax.JSXAttribute,this.name=x,this.value=A}return d}();t.JSXAttribute=m;var k=function(){function d(x,A){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=x,this.name=A}return d}();t.JSXNamespacedName=k;var _=function(){function d(x,A,w){this.type=n.JSXSyntax.JSXOpeningElement,this.name=x,this.selfClosing=A,this.attributes=w}return d}();t.JSXOpeningElement=_;var u=function(){function d(x){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=x}return d}();t.JSXSpreadAttribute=u;var f=function(){function d(x,A){this.type=n.JSXSyntax.JSXText,this.value=x,this.raw=A}return d}();t.JSXText=f},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(2),r=function(){function C(b){this.type=n.Syntax.ArrayExpression,this.elements=b}return C}();t.ArrayExpression=r;var a=function(){function C(b){this.type=n.Syntax.ArrayPattern,this.elements=b}return C}();t.ArrayPattern=a;var l=function(){function C(b,D,E){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=b,this.body=D,this.generator=!1,this.expression=E,this.async=!1}return C}();t.ArrowFunctionExpression=l;var c=function(){function C(b,D,E){this.type=n.Syntax.AssignmentExpression,this.operator=b,this.left=D,this.right=E}return C}();t.AssignmentExpression=c;var p=function(){function C(b,D){this.type=n.Syntax.AssignmentPattern,this.left=b,this.right=D}return C}();t.AssignmentPattern=p;var v=function(){function C(b,D,E){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=b,this.body=D,this.generator=!1,this.expression=E,this.async=!0}return C}();t.AsyncArrowFunctionExpression=v;var m=function(){function C(b,D,E){this.type=n.Syntax.FunctionDeclaration,this.id=b,this.params=D,this.body=E,this.generator=!1,this.expression=!1,this.async=!0}return C}();t.AsyncFunctionDeclaration=m;var k=function(){function C(b,D,E){this.type=n.Syntax.FunctionExpression,this.id=b,this.params=D,this.body=E,this.generator=!1,this.expression=!1,this.async=!0}return C}();t.AsyncFunctionExpression=k;var _=function(){function C(b){this.type=n.Syntax.AwaitExpression,this.argument=b}return C}();t.AwaitExpression=_;var u=function(){function C(b,D,E){var N=b==="||"||b==="&&";this.type=N?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=b,this.left=D,this.right=E}return C}();t.BinaryExpression=u;var f=function(){function C(b){this.type=n.Syntax.BlockStatement,this.body=b}return C}();t.BlockStatement=f;var d=function(){function C(b){this.type=n.Syntax.BreakStatement,this.label=b}return C}();t.BreakStatement=d;var x=function(){function C(b,D){this.type=n.Syntax.CallExpression,this.callee=b,this.arguments=D}return C}();t.CallExpression=x;var A=function(){function C(b,D){this.type=n.Syntax.CatchClause,this.param=b,this.body=D}return C}();t.CatchClause=A;var w=function(){function C(b){this.type=n.Syntax.ClassBody,this.body=b}return C}();t.ClassBody=w;var H=function(){function C(b,D,E){this.type=n.Syntax.ClassDeclaration,this.id=b,this.superClass=D,this.body=E}return C}();t.ClassDeclaration=H;var V=function(){function C(b,D,E){this.type=n.Syntax.ClassExpression,this.id=b,this.superClass=D,this.body=E}return C}();t.ClassExpression=V;var Y=function(){function C(b,D){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=b,this.property=D}return C}();t.ComputedMemberExpression=Y;var F=function(){function C(b,D,E){this.type=n.Syntax.ConditionalExpression,this.test=b,this.consequent=D,this.alternate=E}return C}();t.ConditionalExpression=F;var z=function(){function C(b){this.type=n.Syntax.ContinueStatement,this.label=b}return C}();t.ContinueStatement=z;var it=function(){function C(){this.type=n.Syntax.DebuggerStatement}return C}();t.DebuggerStatement=it;var tt=function(){function C(b,D){this.type=n.Syntax.ExpressionStatement,this.expression=b,this.directive=D}return C}();t.Directive=tt;var pt=function(){function C(b,D){this.type=n.Syntax.DoWhileStatement,this.body=b,this.test=D}return C}();t.DoWhileStatement=pt;var Ct=function(){function C(){this.type=n.Syntax.EmptyStatement}return C}();t.EmptyStatement=Ct;var qt=function(){function C(b){this.type=n.Syntax.ExportAllDeclaration,this.source=b}return C}();t.ExportAllDeclaration=qt;var wt=function(){function C(b){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=b}return C}();t.ExportDefaultDeclaration=wt;var At=function(){function C(b,D,E){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=b,this.specifiers=D,this.source=E}return C}();t.ExportNamedDeclaration=At;var vt=function(){function C(b,D){this.type=n.Syntax.ExportSpecifier,this.exported=D,this.local=b}return C}();t.ExportSpecifier=vt;var Ut=function(){function C(b){this.type=n.Syntax.ExpressionStatement,this.expression=b}return C}();t.ExpressionStatement=Ut;var dt=function(){function C(b,D,E){this.type=n.Syntax.ForInStatement,this.left=b,this.right=D,this.body=E,this.each=!1}return C}();t.ForInStatement=dt;var ft=function(){function C(b,D,E){this.type=n.Syntax.ForOfStatement,this.left=b,this.right=D,this.body=E}return C}();t.ForOfStatement=ft;var ce=function(){function C(b,D,E,N){this.type=n.Syntax.ForStatement,this.init=b,this.test=D,this.update=E,this.body=N}return C}();t.ForStatement=ce;var It=function(){function C(b,D,E,N){this.type=n.Syntax.FunctionDeclaration,this.id=b,this.params=D,this.body=E,this.generator=N,this.expression=!1,this.async=!1}return C}();t.FunctionDeclaration=It;var ne=function(){function C(b,D,E,N){this.type=n.Syntax.FunctionExpression,this.id=b,this.params=D,this.body=E,this.generator=N,this.expression=!1,this.async=!1}return C}();t.FunctionExpression=ne;var pe=function(){function C(b){this.type=n.Syntax.Identifier,this.name=b}return C}();t.Identifier=pe;var M=function(){function C(b,D,E){this.type=n.Syntax.IfStatement,this.test=b,this.consequent=D,this.alternate=E}return C}();t.IfStatement=M;var U=function(){function C(b,D){this.type=n.Syntax.ImportDeclaration,this.specifiers=b,this.source=D}return C}();t.ImportDeclaration=U;var st=function(){function C(b){this.type=n.Syntax.ImportDefaultSpecifier,this.local=b}return C}();t.ImportDefaultSpecifier=st;var Et=function(){function C(b){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=b}return C}();t.ImportNamespaceSpecifier=Et;var Gt=function(){function C(b,D){this.type=n.Syntax.ImportSpecifier,this.local=b,this.imported=D}return C}();t.ImportSpecifier=Gt;var rt=function(){function C(b,D){this.type=n.Syntax.LabeledStatement,this.label=b,this.body=D}return C}();t.LabeledStatement=rt;var G=function(){function C(b,D){this.type=n.Syntax.Literal,this.value=b,this.raw=D}return C}();t.Literal=G;var K=function(){function C(b,D){this.type=n.Syntax.MetaProperty,this.meta=b,this.property=D}return C}();t.MetaProperty=K;var J=function(){function C(b,D,E,N,L){this.type=n.Syntax.MethodDefinition,this.key=b,this.computed=D,this.value=E,this.kind=N,this.static=L}return C}();t.MethodDefinition=J;var nt=function(){function C(b){this.type=n.Syntax.Program,this.body=b,this.sourceType="module"}return C}();t.Module=nt;var lt=function(){function C(b,D){this.type=n.Syntax.NewExpression,this.callee=b,this.arguments=D}return C}();t.NewExpression=lt;var at=function(){function C(b){this.type=n.Syntax.ObjectExpression,this.properties=b}return C}();t.ObjectExpression=at;var Q=function(){function C(b){this.type=n.Syntax.ObjectPattern,this.properties=b}return C}();t.ObjectPattern=Q;var ct=function(){function C(b,D,E,N,L,W){this.type=n.Syntax.Property,this.key=D,this.computed=E,this.value=N,this.kind=b,this.method=L,this.shorthand=W}return C}();t.Property=ct;var bt=function(){function C(b,D,E,N){this.type=n.Syntax.Literal,this.value=b,this.raw=D,this.regex={pattern:E,flags:N}}return C}();t.RegexLiteral=bt;var Yt=function(){function C(b){this.type=n.Syntax.RestElement,this.argument=b}return C}();t.RestElement=Yt;var xt=function(){function C(b){this.type=n.Syntax.ReturnStatement,this.argument=b}return C}();t.ReturnStatement=xt;var Nt=function(){function C(b){this.type=n.Syntax.Program,this.body=b,this.sourceType="script"}return C}();t.Script=Nt;var et=function(){function C(b){this.type=n.Syntax.SequenceExpression,this.expressions=b}return C}();t.SequenceExpression=et;var $t=function(){function C(b){this.type=n.Syntax.SpreadElement,this.argument=b}return C}();t.SpreadElement=$t;var Lt=function(){function C(b,D){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=b,this.property=D}return C}();t.StaticMemberExpression=Lt;var Xe=function(){function C(){this.type=n.Syntax.Super}return C}();t.Super=Xe;var Ti=function(){function C(b,D){this.type=n.Syntax.SwitchCase,this.test=b,this.consequent=D}return C}();t.SwitchCase=Ti;var ei=function(){function C(b,D){this.type=n.Syntax.SwitchStatement,this.discriminant=b,this.cases=D}return C}();t.SwitchStatement=ei;var Je=function(){function C(b,D){this.type=n.Syntax.TaggedTemplateExpression,this.tag=b,this.quasi=D}return C}();t.TaggedTemplateExpression=Je;var Ke=function(){function C(b,D){this.type=n.Syntax.TemplateElement,this.value=b,this.tail=D}return C}();t.TemplateElement=Ke;var Zi=function(){function C(b,D){this.type=n.Syntax.TemplateLiteral,this.quasis=b,this.expressions=D}return C}();t.TemplateLiteral=Zi;var an=function(){function C(){this.type=n.Syntax.ThisExpression}return C}();t.ThisExpression=an;var Vn=function(){function C(b){this.type=n.Syntax.ThrowStatement,this.argument=b}return C}();t.ThrowStatement=Vn;var yt=function(){function C(b,D,E){this.type=n.Syntax.TryStatement,this.block=b,this.handler=D,this.finalizer=E}return C}();t.TryStatement=yt;var es=function(){function C(b,D){this.type=n.Syntax.UnaryExpression,this.operator=b,this.argument=D,this.prefix=!0}return C}();t.UnaryExpression=es;var Hn=function(){function C(b,D,E){this.type=n.Syntax.UpdateExpression,this.operator=b,this.argument=D,this.prefix=E}return C}();t.UpdateExpression=Hn;var Ue=function(){function C(b,D){this.type=n.Syntax.VariableDeclaration,this.declarations=b,this.kind=D}return C}();t.VariableDeclaration=Ue;var Wn=function(){function C(b,D){this.type=n.Syntax.VariableDeclarator,this.id=b,this.init=D}return C}();t.VariableDeclarator=Wn;var Ci=function(){function C(b,D){this.type=n.Syntax.WhileStatement,this.test=b,this.body=D}return C}();t.WhileStatement=Ci;var St=function(){function C(b,D){this.type=n.Syntax.WithStatement,this.object=b,this.body=D}return C}();t.WithStatement=St;var I=function(){function C(b,D){this.type=n.Syntax.YieldExpression,this.argument=b,this.delegate=D}return C}();t.YieldExpression=I},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(9),r=e(10),a=e(11),l=e(7),c=e(12),p=e(2),v=e(13),m="ArrowParameterPlaceHolder",k=function(){function _(u,f,d){f===void 0&&(f={}),this.config={range:typeof f.range=="boolean"&&f.range,loc:typeof f.loc=="boolean"&&f.loc,source:null,tokens:typeof f.tokens=="boolean"&&f.tokens,comment:typeof f.comment=="boolean"&&f.comment,tolerant:typeof f.tolerant=="boolean"&&f.tolerant},this.config.loc&&f.source&&f.source!==null&&(this.config.source=String(f.source)),this.delegate=d,this.errorHandler=new r.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new c.Scanner(u,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return _.prototype.throwError=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var x=Array.prototype.slice.call(arguments,1),A=u.replace(/%(\d)/g,function(Y,F){return n.assert(F<x.length,"Message reference must be in range"),x[F]}),w=this.lastMarker.index,H=this.lastMarker.line,V=this.lastMarker.column+1;throw this.errorHandler.createError(w,H,V,A)},_.prototype.tolerateError=function(u){for(var f=[],d=1;d<arguments.length;d++)f[d-1]=arguments[d];var x=Array.prototype.slice.call(arguments,1),A=u.replace(/%(\d)/g,function(Y,F){return n.assert(F<x.length,"Message reference must be in range"),x[F]}),w=this.lastMarker.index,H=this.scanner.lineNumber,V=this.lastMarker.column+1;this.errorHandler.tolerateError(w,H,V,A)},_.prototype.unexpectedTokenError=function(u,f){var d=f||a.Messages.UnexpectedToken,x;if(u?(f||(d=u.type===2?a.Messages.UnexpectedEOS:u.type===3?a.Messages.UnexpectedIdentifier:u.type===6?a.Messages.UnexpectedNumber:u.type===8?a.Messages.UnexpectedString:u.type===10?a.Messages.UnexpectedTemplate:a.Messages.UnexpectedToken,u.type===4&&(this.scanner.isFutureReservedWord(u.value)?d=a.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(u.value)&&(d=a.Messages.StrictReservedWord))),x=u.value):x="ILLEGAL",d=d.replace("%0",x),u&&typeof u.lineNumber=="number"){var A=u.start,w=u.lineNumber,H=this.lastMarker.index-this.lastMarker.column,V=u.start-H+1;return this.errorHandler.createError(A,w,V,d)}else{var A=this.lastMarker.index,w=this.lastMarker.line,V=this.lastMarker.column+1;return this.errorHandler.createError(A,w,V,d)}},_.prototype.throwUnexpectedToken=function(u,f){throw this.unexpectedTokenError(u,f)},_.prototype.tolerateUnexpectedToken=function(u,f){this.errorHandler.tolerate(this.unexpectedTokenError(u,f))},_.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var u=this.scanner.scanComments();if(u.length>0&&this.delegate)for(var f=0;f<u.length;++f){var d=u[f],x=void 0;x={type:d.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(d.slice[0],d.slice[1])},this.config.range&&(x.range=d.range),this.config.loc&&(x.loc=d.loc);var A={start:{line:d.loc.start.line,column:d.loc.start.column,offset:d.range[0]},end:{line:d.loc.end.line,column:d.loc.end.column,offset:d.range[1]}};this.delegate(x,A)}}},_.prototype.getTokenRaw=function(u){return this.scanner.source.slice(u.start,u.end)},_.prototype.convertToken=function(u){var f={type:v.TokenName[u.type],value:this.getTokenRaw(u)};if(this.config.range&&(f.range=[u.start,u.end]),this.config.loc&&(f.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),u.type===9){var d=u.pattern,x=u.flags;f.regex={pattern:d,flags:x}}return f},_.prototype.nextToken=function(){var u=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var f=this.scanner.lex();return this.hasLineTerminator=u.lineNumber!==f.lineNumber,f&&this.context.strict&&f.type===3&&this.scanner.isStrictModeReservedWord(f.value)&&(f.type=4),this.lookahead=f,this.config.tokens&&f.type!==2&&this.tokens.push(this.convertToken(f)),u},_.prototype.nextRegexToken=function(){this.collectComments();var u=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(u))),this.lookahead=u,this.nextToken(),u},_.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},_.prototype.startNode=function(u,f){f===void 0&&(f=0);var d=u.start-u.lineStart,x=u.lineNumber;return d<0&&(d+=f,x--),{index:u.start,line:x,column:d}},_.prototype.finalize=function(u,f){if(this.config.range&&(f.range=[u.index,this.lastMarker.index]),this.config.loc&&(f.loc={start:{line:u.line,column:u.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(f.loc.source=this.config.source)),this.delegate){var d={start:{line:u.line,column:u.column,offset:u.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(f,d)}return f},_.prototype.expect=function(u){var f=this.nextToken();(f.type!==7||f.value!==u)&&this.throwUnexpectedToken(f)},_.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var u=this.lookahead;u.type===7&&u.value===","?this.nextToken():u.type===7&&u.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(u)):this.tolerateUnexpectedToken(u,a.Messages.UnexpectedToken)}else this.expect(",")},_.prototype.expectKeyword=function(u){var f=this.nextToken();(f.type!==4||f.value!==u)&&this.throwUnexpectedToken(f)},_.prototype.match=function(u){return this.lookahead.type===7&&this.lookahead.value===u},_.prototype.matchKeyword=function(u){return this.lookahead.type===4&&this.lookahead.value===u},_.prototype.matchContextualKeyword=function(u){return this.lookahead.type===3&&this.lookahead.value===u},_.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var u=this.lookahead.value;return u==="="||u==="*="||u==="**="||u==="/="||u==="%="||u==="+="||u==="-="||u==="<<="||u===">>="||u===">>>="||u==="&="||u==="^="||u==="|="},_.prototype.isolateCoverGrammar=function(u){var f=this.context.isBindingElement,d=this.context.isAssignmentTarget,x=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var A=u.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=f,this.context.isAssignmentTarget=d,this.context.firstCoverInitializedNameError=x,A},_.prototype.inheritCoverGrammar=function(u){var f=this.context.isBindingElement,d=this.context.isAssignmentTarget,x=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var A=u.call(this);return this.context.isBindingElement=this.context.isBindingElement&&f,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&d,this.context.firstCoverInitializedNameError=x||this.context.firstCoverInitializedNameError,A},_.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},_.prototype.parsePrimaryExpression=function(){var u=this.createNode(),f,d,x;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),f=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(u,new l.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),f=this.finalize(u,new l.Literal(d.value,x));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),f=this.finalize(u,new l.Literal(d.value==="true",x));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,d=this.nextToken(),x=this.getTokenRaw(d),f=this.finalize(u,new l.Literal(null,x));break;case 10:f=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,f=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":f=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":f=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,d=this.nextRegexToken(),x=this.getTokenRaw(d),f=this.finalize(u,new l.RegexLiteral(d.regex,x,d.pattern,d.flags));break;default:f=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?f=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?f=this.finalize(u,new l.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?f=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),f=this.finalize(u,new l.ThisExpression)):this.matchKeyword("class")?f=this.parseClassExpression():f=this.throwUnexpectedToken(this.nextToken()));break;default:f=this.throwUnexpectedToken(this.nextToken())}return f},_.prototype.parseSpreadElement=function(){var u=this.createNode();this.expect("...");var f=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(u,new l.SpreadElement(f))},_.prototype.parseArrayInitializer=function(){var u=this.createNode(),f=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),f.push(null);else if(this.match("...")){var d=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),f.push(d)}else f.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(u,new l.ArrayExpression(f))},_.prototype.parsePropertyMethod=function(u){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var f=this.context.strict,d=this.context.allowStrictDirective;this.context.allowStrictDirective=u.simple;var x=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&u.firstRestricted&&this.tolerateUnexpectedToken(u.firstRestricted,u.message),this.context.strict&&u.stricted&&this.tolerateUnexpectedToken(u.stricted,u.message),this.context.strict=f,this.context.allowStrictDirective=d,x},_.prototype.parsePropertyMethodFunction=function(){var u=!1,f=this.createNode(),d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters(),A=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(f,new l.FunctionExpression(null,x.params,A,u))},_.prototype.parsePropertyMethodAsyncFunction=function(){var u=this.createNode(),f=this.context.allowYield,d=this.context.await;this.context.allowYield=!1,this.context.await=!0;var x=this.parseFormalParameters(),A=this.parsePropertyMethod(x);return this.context.allowYield=f,this.context.await=d,this.finalize(u,new l.AsyncFunctionExpression(null,x.params,A))},_.prototype.parseObjectPropertyKey=function(){var u=this.createNode(),f=this.nextToken(),d;switch(f.type){case 8:case 6:this.context.strict&&f.octal&&this.tolerateUnexpectedToken(f,a.Messages.StrictOctalLiteral);var x=this.getTokenRaw(f);d=this.finalize(u,new l.Literal(f.value,x));break;case 3:case 1:case 5:case 4:d=this.finalize(u,new l.Identifier(f.value));break;case 7:f.value==="["?(d=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):d=this.throwUnexpectedToken(f);break;default:d=this.throwUnexpectedToken(f)}return d},_.prototype.isPropertyKey=function(u,f){return u.type===p.Syntax.Identifier&&u.name===f||u.type===p.Syntax.Literal&&u.value===f},_.prototype.parseObjectProperty=function(u){var f=this.createNode(),d=this.lookahead,x,A=null,w=null,H=!1,V=!1,Y=!1,F=!1;if(d.type===3){var z=d.value;this.nextToken(),H=this.match("["),F=!this.hasLineTerminator&&z==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),A=F?this.parseObjectPropertyKey():this.finalize(f,new l.Identifier(z))}else this.match("*")?this.nextToken():(H=this.match("["),A=this.parseObjectPropertyKey());var it=this.qualifiedPropertyName(this.lookahead);if(d.type===3&&!F&&d.value==="get"&&it)x="get",H=this.match("["),A=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod();else if(d.type===3&&!F&&d.value==="set"&&it)x="set",H=this.match("["),A=this.parseObjectPropertyKey(),w=this.parseSetterMethod();else if(d.type===7&&d.value==="*"&&it)x="init",H=this.match("["),A=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),V=!0;else if(A||this.throwUnexpectedToken(this.lookahead),x="init",this.match(":")&&!F)!H&&this.isPropertyKey(A,"__proto__")&&(u.value&&this.tolerateError(a.Messages.DuplicateProtoProperty),u.value=!0),this.nextToken(),w=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))w=F?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),V=!0;else if(d.type===3){var z=this.finalize(f,new l.Identifier(d.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),Y=!0;var tt=this.isolateCoverGrammar(this.parseAssignmentExpression);w=this.finalize(f,new l.AssignmentPattern(z,tt))}else Y=!0,w=z}else this.throwUnexpectedToken(this.nextToken());return this.finalize(f,new l.Property(x,A,H,w,V,Y))},_.prototype.parseObjectInitializer=function(){var u=this.createNode();this.expect("{");for(var f=[],d={value:!1};!this.match("}");)f.push(this.parseObjectProperty(d)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(u,new l.ObjectExpression(f))},_.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var u=this.createNode(),f=this.nextToken(),d=f.value,x=f.cooked;return this.finalize(u,new l.TemplateElement({raw:d,cooked:x},f.tail))},_.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var u=this.createNode(),f=this.nextToken(),d=f.value,x=f.cooked;return this.finalize(u,new l.TemplateElement({raw:d,cooked:x},f.tail))},_.prototype.parseTemplateLiteral=function(){var u=this.createNode(),f=[],d=[],x=this.parseTemplateHead();for(d.push(x);!x.tail;)f.push(this.parseExpression()),x=this.parseTemplateElement(),d.push(x);return this.finalize(u,new l.TemplateLiteral(d,f))},_.prototype.reinterpretExpressionAsPattern=function(u){switch(u.type){case p.Syntax.Identifier:case p.Syntax.MemberExpression:case p.Syntax.RestElement:case p.Syntax.AssignmentPattern:break;case p.Syntax.SpreadElement:u.type=p.Syntax.RestElement,this.reinterpretExpressionAsPattern(u.argument);break;case p.Syntax.ArrayExpression:u.type=p.Syntax.ArrayPattern;for(var f=0;f<u.elements.length;f++)u.elements[f]!==null&&this.reinterpretExpressionAsPattern(u.elements[f]);break;case p.Syntax.ObjectExpression:u.type=p.Syntax.ObjectPattern;for(var f=0;f<u.properties.length;f++)this.reinterpretExpressionAsPattern(u.properties[f].value);break;case p.Syntax.AssignmentExpression:u.type=p.Syntax.AssignmentPattern,delete u.operator,this.reinterpretExpressionAsPattern(u.left);break;default:break}},_.prototype.parseGroupExpression=function(){var u;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),u={type:m,params:[],async:!1};else{var f=this.lookahead,d=[];if(this.match("..."))u=this.parseRestElement(d),this.expect(")"),this.match("=>")||this.expect("=>"),u={type:m,params:[u],async:!1};else{var x=!1;if(this.context.isBindingElement=!0,u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var A=[];for(this.context.isAssignmentTarget=!1,A.push(u);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var w=0;w<A.length;w++)this.reinterpretExpressionAsPattern(A[w]);x=!0,u={type:m,params:A,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),A.push(this.parseRestElement(d)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var w=0;w<A.length;w++)this.reinterpretExpressionAsPattern(A[w]);x=!0,u={type:m,params:A,async:!1}}else A.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(x)break}x||(u=this.finalize(this.startNode(f),new l.SequenceExpression(A)))}if(!x){if(this.expect(")"),this.match("=>")&&(u.type===p.Syntax.Identifier&&u.name==="yield"&&(x=!0,u={type:m,params:[u],async:!1}),!x)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),u.type===p.Syntax.SequenceExpression)for(var w=0;w<u.expressions.length;w++)this.reinterpretExpressionAsPattern(u.expressions[w]);else this.reinterpretExpressionAsPattern(u);var H=u.type===p.Syntax.SequenceExpression?u.expressions:[u];u={type:m,params:H,async:!1}}this.context.isBindingElement=!1}}}return u},_.prototype.parseArguments=function(){this.expect("(");var u=[];if(!this.match(")"))for(;;){var f=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(u.push(f),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),u},_.prototype.isIdentifierName=function(u){return u.type===3||u.type===4||u.type===1||u.type===5},_.prototype.parseIdentifierName=function(){var u=this.createNode(),f=this.nextToken();return this.isIdentifierName(f)||this.throwUnexpectedToken(f),this.finalize(u,new l.Identifier(f.value))},_.prototype.parseNewExpression=function(){var u=this.createNode(),f=this.parseIdentifierName();n.assert(f.name==="new","New expression must start with `new`");var d;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var x=this.parseIdentifierName();d=new l.MetaProperty(f,x)}else this.throwUnexpectedToken(this.lookahead);else{var A=this.isolateCoverGrammar(this.parseLeftHandSideExpression),w=this.match("(")?this.parseArguments():[];d=new l.NewExpression(A,w),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(u,d)},_.prototype.parseAsyncArgument=function(){var u=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,u},_.prototype.parseAsyncArguments=function(){this.expect("(");var u=[];if(!this.match(")"))for(;;){var f=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(u.push(f),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),u},_.prototype.parseLeftHandSideExpressionAllowCall=function(){var u=this.lookahead,f=this.matchContextualKeyword("async"),d=this.context.allowIn;this.context.allowIn=!0;var x;for(this.matchKeyword("super")&&this.context.inFunctionBody?(x=this.createNode(),this.nextToken(),x=this.finalize(x,new l.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):x=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var A=this.parseIdentifierName();x=this.finalize(this.startNode(u),new l.StaticMemberExpression(x,A))}else if(this.match("(")){var w=f&&u.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var H=w?this.parseAsyncArguments():this.parseArguments();if(x=this.finalize(this.startNode(u),new l.CallExpression(x,H)),w&&this.match("=>")){for(var V=0;V<H.length;++V)this.reinterpretExpressionAsPattern(H[V]);x={type:m,params:H,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var A=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),x=this.finalize(this.startNode(u),new l.ComputedMemberExpression(x,A))}else if(this.lookahead.type===10&&this.lookahead.head){var Y=this.parseTemplateLiteral();x=this.finalize(this.startNode(u),new l.TaggedTemplateExpression(x,Y))}else break;return this.context.allowIn=d,x},_.prototype.parseSuper=function(){var u=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(u,new l.Super)},_.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var u=this.startNode(this.lookahead),f=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var d=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),f=this.finalize(u,new l.ComputedMemberExpression(f,d))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var d=this.parseIdentifierName();f=this.finalize(u,new l.StaticMemberExpression(f,d))}else if(this.lookahead.type===10&&this.lookahead.head){var x=this.parseTemplateLiteral();f=this.finalize(u,new l.TaggedTemplateExpression(f,x))}else break;return f},_.prototype.parseUpdateExpression=function(){var u,f=this.lookahead;if(this.match("++")||this.match("--")){var d=this.startNode(f),x=this.nextToken();u=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&u.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(u.name)&&this.tolerateError(a.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment);var A=!0;u=this.finalize(d,new l.UpdateExpression(x.value,u,A)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(u=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&u.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(u.name)&&this.tolerateError(a.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var w=this.nextToken().value,A=!1;u=this.finalize(this.startNode(f),new l.UpdateExpression(w,u,A))}return u},_.prototype.parseAwaitExpression=function(){var u=this.createNode();this.nextToken();var f=this.parseUnaryExpression();return this.finalize(u,new l.AwaitExpression(f))},_.prototype.parseUnaryExpression=function(){var u;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var f=this.startNode(this.lookahead),d=this.nextToken();u=this.inheritCoverGrammar(this.parseUnaryExpression),u=this.finalize(f,new l.UnaryExpression(d.value,u)),this.context.strict&&u.operator==="delete"&&u.argument.type===p.Syntax.Identifier&&this.tolerateError(a.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?u=this.parseAwaitExpression():u=this.parseUpdateExpression();return u},_.prototype.parseExponentiationExpression=function(){var u=this.lookahead,f=this.inheritCoverGrammar(this.parseUnaryExpression);if(f.type!==p.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var d=f,x=this.isolateCoverGrammar(this.parseExponentiationExpression);f=this.finalize(this.startNode(u),new l.BinaryExpression("**",d,x))}return f},_.prototype.binaryPrecedence=function(u){var f=u.value,d;return u.type===7?d=this.operatorPrecedence[f]||0:u.type===4?d=f==="instanceof"||this.context.allowIn&&f==="in"?7:0:d=0,d},_.prototype.parseBinaryExpression=function(){var u=this.lookahead,f=this.inheritCoverGrammar(this.parseExponentiationExpression),d=this.lookahead,x=this.binaryPrecedence(d);if(x>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var A=[u,this.lookahead],w=f,H=this.isolateCoverGrammar(this.parseExponentiationExpression),V=[w,d.value,H],Y=[x];x=this.binaryPrecedence(this.lookahead),!(x<=0);){for(;V.length>2&&x<=Y[Y.length-1];){H=V.pop();var F=V.pop();Y.pop(),w=V.pop(),A.pop();var z=this.startNode(A[A.length-1]);V.push(this.finalize(z,new l.BinaryExpression(F,w,H)))}V.push(this.nextToken().value),Y.push(x),A.push(this.lookahead),V.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var it=V.length-1;f=V[it];for(var tt=A.pop();it>1;){var pt=A.pop(),Ct=tt&&tt.lineStart,z=this.startNode(pt,Ct),F=V[it-1];f=this.finalize(z,new l.BinaryExpression(F,V[it-2],f)),it-=2,tt=pt}}return f},_.prototype.parseConditionalExpression=function(){var u=this.lookahead,f=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var d=this.context.allowIn;this.context.allowIn=!0;var x=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=d,this.expect(":");var A=this.isolateCoverGrammar(this.parseAssignmentExpression);f=this.finalize(this.startNode(u),new l.ConditionalExpression(f,x,A)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return f},_.prototype.checkPatternParam=function(u,f){switch(f.type){case p.Syntax.Identifier:this.validateParam(u,f,f.name);break;case p.Syntax.RestElement:this.checkPatternParam(u,f.argument);break;case p.Syntax.AssignmentPattern:this.checkPatternParam(u,f.left);break;case p.Syntax.ArrayPattern:for(var d=0;d<f.elements.length;d++)f.elements[d]!==null&&this.checkPatternParam(u,f.elements[d]);break;case p.Syntax.ObjectPattern:for(var d=0;d<f.properties.length;d++)this.checkPatternParam(u,f.properties[d].value);break;default:break}u.simple=u.simple&&f instanceof l.Identifier},_.prototype.reinterpretAsCoverFormalsList=function(u){var f=[u],d,x=!1;switch(u.type){case p.Syntax.Identifier:break;case m:f=u.params,x=u.async;break;default:return null}d={simple:!0,paramSet:{}};for(var A=0;A<f.length;++A){var w=f[A];w.type===p.Syntax.AssignmentPattern?w.right.type===p.Syntax.YieldExpression&&(w.right.argument&&this.throwUnexpectedToken(this.lookahead),w.right.type=p.Syntax.Identifier,w.right.name="yield",delete w.right.argument,delete w.right.delegate):x&&w.type===p.Syntax.Identifier&&w.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(d,w),f[A]=w}if(this.context.strict||!this.context.allowYield)for(var A=0;A<f.length;++A){var w=f[A];w.type===p.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(d.message===a.Messages.StrictParamDupe){var H=this.context.strict?d.stricted:d.firstRestricted;this.throwUnexpectedToken(H,d.message)}return{simple:d.simple,params:f,stricted:d.stricted,firstRestricted:d.firstRestricted,message:d.message}},_.prototype.parseAssignmentExpression=function(){var u;if(!this.context.allowYield&&this.matchKeyword("yield"))u=this.parseYieldExpression();else{var f=this.lookahead,d=f;if(u=this.parseConditionalExpression(),d.type===3&&d.lineNumber===this.lookahead.lineNumber&&d.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var x=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(x),u={type:m,params:[x],async:!0}}if(u.type===m||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var A=u.async,w=this.reinterpretAsCoverFormalsList(u);if(w){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var H=this.context.strict,V=this.context.allowStrictDirective;this.context.allowStrictDirective=w.simple;var Y=this.context.allowYield,F=this.context.await;this.context.allowYield=!0,this.context.await=A;var z=this.startNode(f);this.expect("=>");var it=void 0;if(this.match("{")){var tt=this.context.allowIn;this.context.allowIn=!0,it=this.parseFunctionSourceElements(),this.context.allowIn=tt}else it=this.isolateCoverGrammar(this.parseAssignmentExpression);var pt=it.type!==p.Syntax.BlockStatement;this.context.strict&&w.firstRestricted&&this.throwUnexpectedToken(w.firstRestricted,w.message),this.context.strict&&w.stricted&&this.tolerateUnexpectedToken(w.stricted,w.message),u=A?this.finalize(z,new l.AsyncArrowFunctionExpression(w.params,it,pt)):this.finalize(z,new l.ArrowFunctionExpression(w.params,it,pt)),this.context.strict=H,this.context.allowStrictDirective=V,this.context.allowYield=Y,this.context.await=F}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(a.Messages.InvalidLHSInAssignment),this.context.strict&&u.type===p.Syntax.Identifier){var Ct=u;this.scanner.isRestrictedWord(Ct.name)&&this.tolerateUnexpectedToken(d,a.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(Ct.name)&&this.tolerateUnexpectedToken(d,a.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(u):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),d=this.nextToken();var qt=d.value,wt=this.isolateCoverGrammar(this.parseAssignmentExpression);u=this.finalize(this.startNode(f),new l.AssignmentExpression(qt,u,wt)),this.context.firstCoverInitializedNameError=null}}return u},_.prototype.parseExpression=function(){var u=this.lookahead,f=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var d=[];for(d.push(f);this.lookahead.type!==2&&this.match(",");)this.nextToken(),d.push(this.isolateCoverGrammar(this.parseAssignmentExpression));f=this.finalize(this.startNode(u),new l.SequenceExpression(d))}return f},_.prototype.parseStatementListItem=function(){var u;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalExportDeclaration),u=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,a.Messages.IllegalImportDeclaration),u=this.parseImportDeclaration();break;case"const":u=this.parseLexicalDeclaration({inFor:!1});break;case"function":u=this.parseFunctionDeclaration();break;case"class":u=this.parseClassDeclaration();break;case"let":u=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:u=this.parseStatement();break}else u=this.parseStatement();return u},_.prototype.parseBlock=function(){var u=this.createNode();this.expect("{");for(var f=[];!this.match("}");)f.push(this.parseStatementListItem());return this.expect("}"),this.finalize(u,new l.BlockStatement(f))},_.prototype.parseLexicalBinding=function(u,f){var d=this.createNode(),x=[],A=this.parsePattern(x,u);this.context.strict&&A.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(A.name)&&this.tolerateError(a.Messages.StrictVarName);var w=null;return u==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),w=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(a.Messages.DeclarationMissingInitializer,"const")):(!f.inFor&&A.type!==p.Syntax.Identifier||this.match("="))&&(this.expect("="),w=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(d,new l.VariableDeclarator(A,w))},_.prototype.parseBindingList=function(u,f){for(var d=[this.parseLexicalBinding(u,f)];this.match(",");)this.nextToken(),d.push(this.parseLexicalBinding(u,f));return d},_.prototype.isLexicalDeclaration=function(){var u=this.scanner.saveState();this.scanner.scanComments();var f=this.scanner.lex();return this.scanner.restoreState(u),f.type===3||f.type===7&&f.value==="["||f.type===7&&f.value==="{"||f.type===4&&f.value==="let"||f.type===4&&f.value==="yield"},_.prototype.parseLexicalDeclaration=function(u){var f=this.createNode(),d=this.nextToken().value;n.assert(d==="let"||d==="const","Lexical declaration must be either let or const");var x=this.parseBindingList(d,u);return this.consumeSemicolon(),this.finalize(f,new l.VariableDeclaration(x,d))},_.prototype.parseBindingRestElement=function(u,f){var d=this.createNode();this.expect("...");var x=this.parsePattern(u,f);return this.finalize(d,new l.RestElement(x))},_.prototype.parseArrayPattern=function(u,f){var d=this.createNode();this.expect("[");for(var x=[];!this.match("]");)if(this.match(","))this.nextToken(),x.push(null);else{if(this.match("...")){x.push(this.parseBindingRestElement(u,f));break}else x.push(this.parsePatternWithDefault(u,f));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(d,new l.ArrayPattern(x))},_.prototype.parsePropertyPattern=function(u,f){var d=this.createNode(),x=!1,A=!1,w=!1,H,V;if(this.lookahead.type===3){var Y=this.lookahead;H=this.parseVariableIdentifier();var F=this.finalize(d,new l.Identifier(Y.value));if(this.match("=")){u.push(Y),A=!0,this.nextToken();var z=this.parseAssignmentExpression();V=this.finalize(this.startNode(Y),new l.AssignmentPattern(F,z))}else this.match(":")?(this.expect(":"),V=this.parsePatternWithDefault(u,f)):(u.push(Y),A=!0,V=F)}else x=this.match("["),H=this.parseObjectPropertyKey(),this.expect(":"),V=this.parsePatternWithDefault(u,f);return this.finalize(d,new l.Property("init",H,x,V,w,A))},_.prototype.parseObjectPattern=function(u,f){var d=this.createNode(),x=[];for(this.expect("{");!this.match("}");)x.push(this.parsePropertyPattern(u,f)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(d,new l.ObjectPattern(x))},_.prototype.parsePattern=function(u,f){var d;return this.match("[")?d=this.parseArrayPattern(u,f):this.match("{")?d=this.parseObjectPattern(u,f):(this.matchKeyword("let")&&(f==="const"||f==="let")&&this.tolerateUnexpectedToken(this.lookahead,a.Messages.LetInLexicalBinding),u.push(this.lookahead),d=this.parseVariableIdentifier(f)),d},_.prototype.parsePatternWithDefault=function(u,f){var d=this.lookahead,x=this.parsePattern(u,f);if(this.match("=")){this.nextToken();var A=this.context.allowYield;this.context.allowYield=!0;var w=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=A,x=this.finalize(this.startNode(d),new l.AssignmentPattern(x,w))}return x},_.prototype.parseVariableIdentifier=function(u){var f=this.createNode(),d=this.nextToken();return d.type===4&&d.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(d,a.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(d):d.type!==3?this.context.strict&&d.type===4&&this.scanner.isStrictModeReservedWord(d.value)?this.tolerateUnexpectedToken(d,a.Messages.StrictReservedWord):(this.context.strict||d.value!=="let"||u!=="var")&&this.throwUnexpectedToken(d):(this.context.isModule||this.context.await)&&d.type===3&&d.value==="await"&&this.tolerateUnexpectedToken(d),this.finalize(f,new l.Identifier(d.value))},_.prototype.parseVariableDeclaration=function(u){var f=this.createNode(),d=[],x=this.parsePattern(d,"var");this.context.strict&&x.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(x.name)&&this.tolerateError(a.Messages.StrictVarName);var A=null;return this.match("=")?(this.nextToken(),A=this.isolateCoverGrammar(this.parseAssignmentExpression)):x.type!==p.Syntax.Identifier&&!u.inFor&&this.expect("="),this.finalize(f,new l.VariableDeclarator(x,A))},_.prototype.parseVariableDeclarationList=function(u){var f={inFor:u.inFor},d=[];for(d.push(this.parseVariableDeclaration(f));this.match(",");)this.nextToken(),d.push(this.parseVariableDeclaration(f));return d},_.prototype.parseVariableStatement=function(){var u=this.createNode();this.expectKeyword("var");var f=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(u,new l.VariableDeclaration(f,"var"))},_.prototype.parseEmptyStatement=function(){var u=this.createNode();return this.expect(";"),this.finalize(u,new l.EmptyStatement)},_.prototype.parseExpressionStatement=function(){var u=this.createNode(),f=this.parseExpression();return this.consumeSemicolon(),this.finalize(u,new l.ExpressionStatement(f))},_.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(a.Messages.StrictFunction),this.parseStatement()},_.prototype.parseIfStatement=function(){var u=this.createNode(),f,d=null;this.expectKeyword("if"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),f=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),f=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),d=this.parseIfClause())),this.finalize(u,new l.IfStatement(x,f,d))},_.prototype.parseDoWhileStatement=function(){var u=this.createNode();this.expectKeyword("do");var f=this.context.inIteration;this.context.inIteration=!0;var d=this.parseStatement();this.context.inIteration=f,this.expectKeyword("while"),this.expect("(");var x=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(u,new l.DoWhileStatement(d,x))},_.prototype.parseWhileStatement=function(){var u=this.createNode(),f;this.expectKeyword("while"),this.expect("(");var d=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),f=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var x=this.context.inIteration;this.context.inIteration=!0,f=this.parseStatement(),this.context.inIteration=x}return this.finalize(u,new l.WhileStatement(d,f))},_.prototype.parseForStatement=function(){var u=null,f=null,d=null,x=!0,A,w,H=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){u=this.createNode(),this.nextToken();var V=this.context.allowIn;this.context.allowIn=!1;var Y=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=V,Y.length===1&&this.matchKeyword("in")){var F=Y[0];F.init&&(F.id.type===p.Syntax.ArrayPattern||F.id.type===p.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(a.Messages.ForInOfLoopInitializer,"for-in"),u=this.finalize(u,new l.VariableDeclaration(Y,"var")),this.nextToken(),A=u,w=this.parseExpression(),u=null}else Y.length===1&&Y[0].init===null&&this.matchContextualKeyword("of")?(u=this.finalize(u,new l.VariableDeclaration(Y,"var")),this.nextToken(),A=u,w=this.parseAssignmentExpression(),u=null,x=!1):(u=this.finalize(u,new l.VariableDeclaration(Y,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){u=this.createNode();var z=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")u=this.finalize(u,new l.Identifier(z)),this.nextToken(),A=u,w=this.parseExpression(),u=null;else{var V=this.context.allowIn;this.context.allowIn=!1;var Y=this.parseBindingList(z,{inFor:!0});this.context.allowIn=V,Y.length===1&&Y[0].init===null&&this.matchKeyword("in")?(u=this.finalize(u,new l.VariableDeclaration(Y,z)),this.nextToken(),A=u,w=this.parseExpression(),u=null):Y.length===1&&Y[0].init===null&&this.matchContextualKeyword("of")?(u=this.finalize(u,new l.VariableDeclaration(Y,z)),this.nextToken(),A=u,w=this.parseAssignmentExpression(),u=null,x=!1):(this.consumeSemicolon(),u=this.finalize(u,new l.VariableDeclaration(Y,z)))}}else{var it=this.lookahead,V=this.context.allowIn;if(this.context.allowIn=!1,u=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=V,this.matchKeyword("in"))(!this.context.isAssignmentTarget||u.type===p.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(u),A=u,w=this.parseExpression(),u=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||u.type===p.Syntax.AssignmentExpression)&&this.tolerateError(a.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(u),A=u,w=this.parseAssignmentExpression(),u=null,x=!1;else{if(this.match(",")){for(var tt=[u];this.match(",");)this.nextToken(),tt.push(this.isolateCoverGrammar(this.parseAssignmentExpression));u=this.finalize(this.startNode(it),new l.SequenceExpression(tt))}this.expect(";")}}typeof A>"u"&&(this.match(";")||(f=this.parseExpression()),this.expect(";"),this.match(")")||(d=this.parseExpression()));var pt;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),pt=this.finalize(this.createNode(),new l.EmptyStatement);else{this.expect(")");var Ct=this.context.inIteration;this.context.inIteration=!0,pt=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=Ct}return typeof A>"u"?this.finalize(H,new l.ForStatement(u,f,d,pt)):x?this.finalize(H,new l.ForInStatement(A,w,pt)):this.finalize(H,new l.ForOfStatement(A,w,pt))},_.prototype.parseContinueStatement=function(){var u=this.createNode();this.expectKeyword("continue");var f=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var d=this.parseVariableIdentifier();f=d;var x="$"+d.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,x)||this.throwError(a.Messages.UnknownLabel,d.name)}return this.consumeSemicolon(),f===null&&!this.context.inIteration&&this.throwError(a.Messages.IllegalContinue),this.finalize(u,new l.ContinueStatement(f))},_.prototype.parseBreakStatement=function(){var u=this.createNode();this.expectKeyword("break");var f=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var d=this.parseVariableIdentifier(),x="$"+d.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,x)||this.throwError(a.Messages.UnknownLabel,d.name),f=d}return this.consumeSemicolon(),f===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(a.Messages.IllegalBreak),this.finalize(u,new l.BreakStatement(f))},_.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(a.Messages.IllegalReturn);var u=this.createNode();this.expectKeyword("return");var f=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,d=f?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(u,new l.ReturnStatement(d))},_.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(a.Messages.StrictModeWith);var u=this.createNode(),f;this.expectKeyword("with"),this.expect("(");var d=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),f=this.finalize(this.createNode(),new l.EmptyStatement)):(this.expect(")"),f=this.parseStatement()),this.finalize(u,new l.WithStatement(d,f))},_.prototype.parseSwitchCase=function(){var u=this.createNode(),f;this.matchKeyword("default")?(this.nextToken(),f=null):(this.expectKeyword("case"),f=this.parseExpression()),this.expect(":");for(var d=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)d.push(this.parseStatementListItem());return this.finalize(u,new l.SwitchCase(f,d))},_.prototype.parseSwitchStatement=function(){var u=this.createNode();this.expectKeyword("switch"),this.expect("(");var f=this.parseExpression();this.expect(")");var d=this.context.inSwitch;this.context.inSwitch=!0;var x=[],A=!1;for(this.expect("{");!this.match("}");){var w=this.parseSwitchCase();w.test===null&&(A&&this.throwError(a.Messages.MultipleDefaultsInSwitch),A=!0),x.push(w)}return this.expect("}"),this.context.inSwitch=d,this.finalize(u,new l.SwitchStatement(f,x))},_.prototype.parseLabelledStatement=function(){var u=this.createNode(),f=this.parseExpression(),d;if(f.type===p.Syntax.Identifier&&this.match(":")){this.nextToken();var x=f,A="$"+x.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,A)&&this.throwError(a.Messages.Redeclaration,"Label",x.name),this.context.labelSet[A]=!0;var w=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),w=this.parseClassDeclaration();else if(this.matchKeyword("function")){var H=this.lookahead,V=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(H,a.Messages.StrictFunction):V.generator&&this.tolerateUnexpectedToken(H,a.Messages.GeneratorInLegacyContext),w=V}else w=this.parseStatement();delete this.context.labelSet[A],d=new l.LabeledStatement(x,w)}else this.consumeSemicolon(),d=new l.ExpressionStatement(f);return this.finalize(u,d)},_.prototype.parseThrowStatement=function(){var u=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(a.Messages.NewlineAfterThrow);var f=this.parseExpression();return this.consumeSemicolon(),this.finalize(u,new l.ThrowStatement(f))},_.prototype.parseCatchClause=function(){var u=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var f=[],d=this.parsePattern(f),x={},A=0;A<f.length;A++){var w="$"+f[A].value;Object.prototype.hasOwnProperty.call(x,w)&&this.tolerateError(a.Messages.DuplicateBinding,f[A].value),x[w]=!0}this.context.strict&&d.type===p.Syntax.Identifier&&this.scanner.isRestrictedWord(d.name)&&this.tolerateError(a.Messages.StrictCatchVariable),this.expect(")");var H=this.parseBlock();return this.finalize(u,new l.CatchClause(d,H))},_.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},_.prototype.parseTryStatement=function(){var u=this.createNode();this.expectKeyword("try");var f=this.parseBlock(),d=this.matchKeyword("catch")?this.parseCatchClause():null,x=this.matchKeyword("finally")?this.parseFinallyClause():null;return!d&&!x&&this.throwError(a.Messages.NoCatchOrFinally),this.finalize(u,new l.TryStatement(f,d,x))},_.prototype.parseDebuggerStatement=function(){var u=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(u,new l.DebuggerStatement)},_.prototype.parseStatement=function(){var u;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:u=this.parseExpressionStatement();break;case 7:var f=this.lookahead.value;f==="{"?u=this.parseBlock():f==="("?u=this.parseExpressionStatement():f===";"?u=this.parseEmptyStatement():u=this.parseExpressionStatement();break;case 3:u=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":u=this.parseBreakStatement();break;case"continue":u=this.parseContinueStatement();break;case"debugger":u=this.parseDebuggerStatement();break;case"do":u=this.parseDoWhileStatement();break;case"for":u=this.parseForStatement();break;case"function":u=this.parseFunctionDeclaration();break;case"if":u=this.parseIfStatement();break;case"return":u=this.parseReturnStatement();break;case"switch":u=this.parseSwitchStatement();break;case"throw":u=this.parseThrowStatement();break;case"try":u=this.parseTryStatement();break;case"var":u=this.parseVariableStatement();break;case"while":u=this.parseWhileStatement();break;case"with":u=this.parseWithStatement();break;default:u=this.parseExpressionStatement();break}break;default:u=this.throwUnexpectedToken(this.lookahead)}return u},_.prototype.parseFunctionSourceElements=function(){var u=this.createNode();this.expect("{");var f=this.parseDirectivePrologues(),d=this.context.labelSet,x=this.context.inIteration,A=this.context.inSwitch,w=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)f.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=d,this.context.inIteration=x,this.context.inSwitch=A,this.context.inFunctionBody=w,this.finalize(u,new l.BlockStatement(f))},_.prototype.validateParam=function(u,f,d){var x="$"+d;this.context.strict?(this.scanner.isRestrictedWord(d)&&(u.stricted=f,u.message=a.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(u.paramSet,x)&&(u.stricted=f,u.message=a.Messages.StrictParamDupe)):u.firstRestricted||(this.scanner.isRestrictedWord(d)?(u.firstRestricted=f,u.message=a.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(d)?(u.firstRestricted=f,u.message=a.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(u.paramSet,x)&&(u.stricted=f,u.message=a.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(u.paramSet,x,{value:!0,enumerable:!0,writable:!0,configurable:!0}):u.paramSet[x]=!0},_.prototype.parseRestElement=function(u){var f=this.createNode();this.expect("...");var d=this.parsePattern(u);return this.match("=")&&this.throwError(a.Messages.DefaultRestParameter),this.match(")")||this.throwError(a.Messages.ParameterAfterRestParameter),this.finalize(f,new l.RestElement(d))},_.prototype.parseFormalParameter=function(u){for(var f=[],d=this.match("...")?this.parseRestElement(f):this.parsePatternWithDefault(f),x=0;x<f.length;x++)this.validateParam(u,f[x],f[x].value);u.simple=u.simple&&d instanceof l.Identifier,u.params.push(d)},_.prototype.parseFormalParameters=function(u){var f;if(f={simple:!0,params:[],firstRestricted:u},this.expect("("),!this.match(")"))for(f.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(f),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:f.simple,params:f.params,stricted:f.stricted,firstRestricted:f.firstRestricted,message:f.message}},_.prototype.matchAsyncFunction=function(){var u=this.matchContextualKeyword("async");if(u){var f=this.scanner.saveState();this.scanner.scanComments();var d=this.scanner.lex();this.scanner.restoreState(f),u=f.lineNumber===d.lineNumber&&d.type===4&&d.value==="function"}return u},_.prototype.parseFunctionDeclaration=function(u){var f=this.createNode(),d=this.matchContextualKeyword("async");d&&this.nextToken(),this.expectKeyword("function");var x=d?!1:this.match("*");x&&this.nextToken();var A,w=null,H=null;if(!u||!this.match("(")){var V=this.lookahead;w=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(V.value)&&this.tolerateUnexpectedToken(V,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(V.value)?(H=V,A=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(V.value)&&(H=V,A=a.Messages.StrictReservedWord)}var Y=this.context.await,F=this.context.allowYield;this.context.await=d,this.context.allowYield=!x;var z=this.parseFormalParameters(H),it=z.params,tt=z.stricted;H=z.firstRestricted,z.message&&(A=z.message);var pt=this.context.strict,Ct=this.context.allowStrictDirective;this.context.allowStrictDirective=z.simple;var qt=this.parseFunctionSourceElements();return this.context.strict&&H&&this.throwUnexpectedToken(H,A),this.context.strict&&tt&&this.tolerateUnexpectedToken(tt,A),this.context.strict=pt,this.context.allowStrictDirective=Ct,this.context.await=Y,this.context.allowYield=F,d?this.finalize(f,new l.AsyncFunctionDeclaration(w,it,qt)):this.finalize(f,new l.FunctionDeclaration(w,it,qt,x))},_.prototype.parseFunctionExpression=function(){var u=this.createNode(),f=this.matchContextualKeyword("async");f&&this.nextToken(),this.expectKeyword("function");var d=f?!1:this.match("*");d&&this.nextToken();var x,A=null,w,H=this.context.await,V=this.context.allowYield;if(this.context.await=f,this.context.allowYield=!d,!this.match("(")){var Y=this.lookahead;A=!this.context.strict&&!d&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(Y.value)&&this.tolerateUnexpectedToken(Y,a.Messages.StrictFunctionName):this.scanner.isRestrictedWord(Y.value)?(w=Y,x=a.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(Y.value)&&(w=Y,x=a.Messages.StrictReservedWord)}var F=this.parseFormalParameters(w),z=F.params,it=F.stricted;w=F.firstRestricted,F.message&&(x=F.message);var tt=this.context.strict,pt=this.context.allowStrictDirective;this.context.allowStrictDirective=F.simple;var Ct=this.parseFunctionSourceElements();return this.context.strict&&w&&this.throwUnexpectedToken(w,x),this.context.strict&&it&&this.tolerateUnexpectedToken(it,x),this.context.strict=tt,this.context.allowStrictDirective=pt,this.context.await=H,this.context.allowYield=V,f?this.finalize(u,new l.AsyncFunctionExpression(A,z,Ct)):this.finalize(u,new l.FunctionExpression(A,z,Ct,d))},_.prototype.parseDirective=function(){var u=this.lookahead,f=this.createNode(),d=this.parseExpression(),x=d.type===p.Syntax.Literal?this.getTokenRaw(u).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(f,x?new l.Directive(d,x):new l.ExpressionStatement(d))},_.prototype.parseDirectivePrologues=function(){for(var u=null,f=[];;){var d=this.lookahead;if(d.type!==8)break;var x=this.parseDirective();f.push(x);var A=x.directive;if(typeof A!="string")break;A==="use strict"?(this.context.strict=!0,u&&this.tolerateUnexpectedToken(u,a.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(d,a.Messages.IllegalLanguageModeDirective)):!u&&d.octal&&(u=d)}return f},_.prototype.qualifiedPropertyName=function(u){switch(u.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return u.value==="[";default:break}return!1},_.prototype.parseGetterMethod=function(){var u=this.createNode(),f=!1,d=this.context.allowYield;this.context.allowYield=!f;var x=this.parseFormalParameters();x.params.length>0&&this.tolerateError(a.Messages.BadGetterArity);var A=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(u,new l.FunctionExpression(null,x.params,A,f))},_.prototype.parseSetterMethod=function(){var u=this.createNode(),f=!1,d=this.context.allowYield;this.context.allowYield=!f;var x=this.parseFormalParameters();x.params.length!==1?this.tolerateError(a.Messages.BadSetterArity):x.params[0]instanceof l.RestElement&&this.tolerateError(a.Messages.BadSetterRestParameter);var A=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(u,new l.FunctionExpression(null,x.params,A,f))},_.prototype.parseGeneratorMethod=function(){var u=this.createNode(),f=!0,d=this.context.allowYield;this.context.allowYield=!0;var x=this.parseFormalParameters();this.context.allowYield=!1;var A=this.parsePropertyMethod(x);return this.context.allowYield=d,this.finalize(u,new l.FunctionExpression(null,x.params,A,f))},_.prototype.isStartOfExpression=function(){var u=!0,f=this.lookahead.value;switch(this.lookahead.type){case 7:u=f==="["||f==="("||f==="{"||f==="+"||f==="-"||f==="!"||f==="~"||f==="++"||f==="--"||f==="/"||f==="/=";break;case 4:u=f==="class"||f==="delete"||f==="function"||f==="let"||f==="new"||f==="super"||f==="this"||f==="typeof"||f==="void"||f==="yield";break;default:break}return u},_.prototype.parseYieldExpression=function(){var u=this.createNode();this.expectKeyword("yield");var f=null,d=!1;if(!this.hasLineTerminator){var x=this.context.allowYield;this.context.allowYield=!1,d=this.match("*"),d?(this.nextToken(),f=this.parseAssignmentExpression()):this.isStartOfExpression()&&(f=this.parseAssignmentExpression()),this.context.allowYield=x}return this.finalize(u,new l.YieldExpression(f,d))},_.prototype.parseClassElement=function(u){var f=this.lookahead,d=this.createNode(),x="",A=null,w=null,H=!1,V=!1,Y=!1,F=!1;if(this.match("*"))this.nextToken();else{H=this.match("["),A=this.parseObjectPropertyKey();var z=A;if(z.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(f=this.lookahead,Y=!0,H=this.match("["),this.match("*")?this.nextToken():A=this.parseObjectPropertyKey()),f.type===3&&!this.hasLineTerminator&&f.value==="async"){var it=this.lookahead.value;it!==":"&&it!=="("&&it!=="*"&&(F=!0,f=this.lookahead,A=this.parseObjectPropertyKey(),f.type===3&&f.value==="constructor"&&this.tolerateUnexpectedToken(f,a.Messages.ConstructorIsAsync))}}var tt=this.qualifiedPropertyName(this.lookahead);return f.type===3?f.value==="get"&&tt?(x="get",H=this.match("["),A=this.parseObjectPropertyKey(),this.context.allowYield=!1,w=this.parseGetterMethod()):f.value==="set"&&tt&&(x="set",H=this.match("["),A=this.parseObjectPropertyKey(),w=this.parseSetterMethod()):f.type===7&&f.value==="*"&&tt&&(x="init",H=this.match("["),A=this.parseObjectPropertyKey(),w=this.parseGeneratorMethod(),V=!0),!x&&A&&this.match("(")&&(x="init",w=F?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),V=!0),x||this.throwUnexpectedToken(this.lookahead),x==="init"&&(x="method"),H||(Y&&this.isPropertyKey(A,"prototype")&&this.throwUnexpectedToken(f,a.Messages.StaticPrototype),!Y&&this.isPropertyKey(A,"constructor")&&((x!=="method"||!V||w&&w.generator)&&this.throwUnexpectedToken(f,a.Messages.ConstructorSpecialMethod),u.value?this.throwUnexpectedToken(f,a.Messages.DuplicateConstructor):u.value=!0,x="constructor")),this.finalize(d,new l.MethodDefinition(A,H,w,x,Y))},_.prototype.parseClassElementList=function(){var u=[],f={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():u.push(this.parseClassElement(f));return this.expect("}"),u},_.prototype.parseClassBody=function(){var u=this.createNode(),f=this.parseClassElementList();return this.finalize(u,new l.ClassBody(f))},_.prototype.parseClassDeclaration=function(u){var f=this.createNode(),d=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var x=u&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),A=null;this.matchKeyword("extends")&&(this.nextToken(),A=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var w=this.parseClassBody();return this.context.strict=d,this.finalize(f,new l.ClassDeclaration(x,A,w))},_.prototype.parseClassExpression=function(){var u=this.createNode(),f=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var d=this.lookahead.type===3?this.parseVariableIdentifier():null,x=null;this.matchKeyword("extends")&&(this.nextToken(),x=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var A=this.parseClassBody();return this.context.strict=f,this.finalize(u,new l.ClassExpression(d,x,A))},_.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var u=this.createNode(),f=this.parseDirectivePrologues();this.lookahead.type!==2;)f.push(this.parseStatementListItem());return this.finalize(u,new l.Module(f))},_.prototype.parseScript=function(){for(var u=this.createNode(),f=this.parseDirectivePrologues();this.lookahead.type!==2;)f.push(this.parseStatementListItem());return this.finalize(u,new l.Script(f))},_.prototype.parseModuleSpecifier=function(){var u=this.createNode();this.lookahead.type!==8&&this.throwError(a.Messages.InvalidModuleSpecifier);var f=this.nextToken(),d=this.getTokenRaw(f);return this.finalize(u,new l.Literal(f.value,d))},_.prototype.parseImportSpecifier=function(){var u=this.createNode(),f,d;return this.lookahead.type===3?(f=this.parseVariableIdentifier(),d=f,this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseVariableIdentifier())):(f=this.parseIdentifierName(),d=f,this.matchContextualKeyword("as")?(this.nextToken(),d=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(u,new l.ImportSpecifier(d,f))},_.prototype.parseNamedImports=function(){this.expect("{");for(var u=[];!this.match("}");)u.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),u},_.prototype.parseImportDefaultSpecifier=function(){var u=this.createNode(),f=this.parseIdentifierName();return this.finalize(u,new l.ImportDefaultSpecifier(f))},_.prototype.parseImportNamespaceSpecifier=function(){var u=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(a.Messages.NoAsAfterImportNamespace),this.nextToken();var f=this.parseIdentifierName();return this.finalize(u,new l.ImportNamespaceSpecifier(f))},_.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalImportDeclaration);var u=this.createNode();this.expectKeyword("import");var f,d=[];if(this.lookahead.type===8)f=this.parseModuleSpecifier();else{if(this.match("{")?d=d.concat(this.parseNamedImports()):this.match("*")?d.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(d.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?d.push(this.parseImportNamespaceSpecifier()):this.match("{")?d=d.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var x=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}this.nextToken(),f=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(u,new l.ImportDeclaration(d,f))},_.prototype.parseExportSpecifier=function(){var u=this.createNode(),f=this.parseIdentifierName(),d=f;return this.matchContextualKeyword("as")&&(this.nextToken(),d=this.parseIdentifierName()),this.finalize(u,new l.ExportSpecifier(f,d))},_.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(a.Messages.IllegalExportDeclaration);var u=this.createNode();this.expectKeyword("export");var f;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var d=this.parseFunctionDeclaration(!0);f=this.finalize(u,new l.ExportDefaultDeclaration(d))}else if(this.matchKeyword("class")){var d=this.parseClassDeclaration(!0);f=this.finalize(u,new l.ExportDefaultDeclaration(d))}else if(this.matchContextualKeyword("async")){var d=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();f=this.finalize(u,new l.ExportDefaultDeclaration(d))}else{this.matchContextualKeyword("from")&&this.throwError(a.Messages.UnexpectedToken,this.lookahead.value);var d=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),f=this.finalize(u,new l.ExportDefaultDeclaration(d))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var x=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}this.nextToken();var A=this.parseModuleSpecifier();this.consumeSemicolon(),f=this.finalize(u,new l.ExportAllDeclaration(A))}else if(this.lookahead.type===4){var d=void 0;switch(this.lookahead.value){case"let":case"const":d=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":d=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}f=this.finalize(u,new l.ExportNamedDeclaration(d,[],null))}else if(this.matchAsyncFunction()){var d=this.parseFunctionDeclaration();f=this.finalize(u,new l.ExportNamedDeclaration(d,[],null))}else{var w=[],H=null,V=!1;for(this.expect("{");!this.match("}");)V=V||this.matchKeyword("default"),w.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),H=this.parseModuleSpecifier(),this.consumeSemicolon();else if(V){var x=this.lookahead.value?a.Messages.UnexpectedToken:a.Messages.MissingFromClause;this.throwError(x,this.lookahead.value)}else this.consumeSemicolon();f=this.finalize(u,new l.ExportNamedDeclaration(null,w,H))}return f},_}();t.Parser=k},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function e(n,r){if(!n)throw new Error("ASSERT: "+r)}t.assert=e},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=function(){function n(){this.errors=[],this.tolerant=!1}return n.prototype.recordError=function(r){this.errors.push(r)},n.prototype.tolerate=function(r){if(this.tolerant)this.recordError(r);else throw r},n.prototype.constructError=function(r,a){var l=new Error(r);try{throw l}catch(c){Object.create&&Object.defineProperty&&(l=Object.create(c),Object.defineProperty(l,"column",{value:a}))}return l},n.prototype.createError=function(r,a,l,c){var p="Line "+a+": "+c,v=this.constructError(p,l);return v.index=r,v.lineNumber=a,v.description=c,v},n.prototype.throwError=function(r,a,l,c){throw this.createError(r,a,l,c)},n.prototype.tolerateError=function(r,a,l,c){var p=this.createError(r,a,l,c);if(this.tolerant)this.recordError(p);else throw p},n}();t.ErrorHandler=e},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(9),r=e(4),a=e(11);function l(v){return"0123456789abcdef".indexOf(v.toLowerCase())}function c(v){return"01234567".indexOf(v)}var p=function(){function v(m,k){this.source=m,this.errorHandler=k,this.trackComment=!1,this.isModule=!1,this.length=m.length,this.index=0,this.lineNumber=m.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return v.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},v.prototype.restoreState=function(m){this.index=m.index,this.lineNumber=m.lineNumber,this.lineStart=m.lineStart},v.prototype.eof=function(){return this.index>=this.length},v.prototype.throwUnexpectedToken=function(m){return m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},v.prototype.tolerateUnexpectedToken=function(m){m===void 0&&(m=a.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,m)},v.prototype.skipSingleLineComment=function(m){var k=[],_,u;for(this.trackComment&&(k=[],_=this.index-m,u={start:{line:this.lineNumber,column:this.index-this.lineStart-m},end:{}});!this.eof();){var f=this.source.charCodeAt(this.index);if(++this.index,r.Character.isLineTerminator(f)){if(this.trackComment){u.end={line:this.lineNumber,column:this.index-this.lineStart-1};var d={multiLine:!1,slice:[_+m,this.index-1],range:[_,this.index-1],loc:u};k.push(d)}return f===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,k}}if(this.trackComment){u.end={line:this.lineNumber,column:this.index-this.lineStart};var d={multiLine:!1,slice:[_+m,this.index],range:[_,this.index],loc:u};k.push(d)}return k},v.prototype.skipMultiLineComment=function(){var m=[],k,_;for(this.trackComment&&(m=[],k=this.index-2,_={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var u=this.source.charCodeAt(this.index);if(r.Character.isLineTerminator(u))u===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(u===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){_.end={line:this.lineNumber,column:this.index-this.lineStart};var f={multiLine:!0,slice:[k+2,this.index-2],range:[k,this.index],loc:_};m.push(f)}return m}++this.index}else++this.index}if(this.trackComment){_.end={line:this.lineNumber,column:this.index-this.lineStart};var f={multiLine:!0,slice:[k+2,this.index],range:[k,this.index],loc:_};m.push(f)}return this.tolerateUnexpectedToken(),m},v.prototype.scanComments=function(){var m;this.trackComment&&(m=[]);for(var k=this.index===0;!this.eof();){var _=this.source.charCodeAt(this.index);if(r.Character.isWhiteSpace(_))++this.index;else if(r.Character.isLineTerminator(_))++this.index,_===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,k=!0;else if(_===47)if(_=this.source.charCodeAt(this.index+1),_===47){this.index+=2;var u=this.skipSingleLineComment(2);this.trackComment&&(m=m.concat(u)),k=!0}else if(_===42){this.index+=2;var u=this.skipMultiLineComment();this.trackComment&&(m=m.concat(u))}else break;else if(k&&_===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var u=this.skipSingleLineComment(3);this.trackComment&&(m=m.concat(u))}else break;else if(_===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var u=this.skipSingleLineComment(4);this.trackComment&&(m=m.concat(u))}else break;else break}return m},v.prototype.isFutureReservedWord=function(m){switch(m){case"enum":case"export":case"import":case"super":return!0;default:return!1}},v.prototype.isStrictModeReservedWord=function(m){switch(m){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},v.prototype.isRestrictedWord=function(m){return m==="eval"||m==="arguments"},v.prototype.isKeyword=function(m){switch(m.length){case 2:return m==="if"||m==="in"||m==="do";case 3:return m==="var"||m==="for"||m==="new"||m==="try"||m==="let";case 4:return m==="this"||m==="else"||m==="case"||m==="void"||m==="with"||m==="enum";case 5:return m==="while"||m==="break"||m==="catch"||m==="throw"||m==="const"||m==="yield"||m==="class"||m==="super";case 6:return m==="return"||m==="typeof"||m==="delete"||m==="switch"||m==="export"||m==="import";case 7:return m==="default"||m==="finally"||m==="extends";case 8:return m==="function"||m==="continue"||m==="debugger";case 10:return m==="instanceof";default:return!1}},v.prototype.codePointAt=function(m){var k=this.source.charCodeAt(m);if(k>=55296&&k<=56319){var _=this.source.charCodeAt(m+1);if(_>=56320&&_<=57343){var u=k;k=(u-55296)*1024+_-56320+65536}}return k},v.prototype.scanHexEscape=function(m){for(var k=m==="u"?4:2,_=0,u=0;u<k;++u)if(!this.eof()&&r.Character.isHexDigit(this.source.charCodeAt(this.index)))_=_*16+l(this.source[this.index++]);else return null;return String.fromCharCode(_)},v.prototype.scanUnicodeCodePointEscape=function(){var m=this.source[this.index],k=0;for(m==="}"&&this.throwUnexpectedToken();!this.eof()&&(m=this.source[this.index++],!!r.Character.isHexDigit(m.charCodeAt(0)));)k=k*16+l(m);return(k>1114111||m!=="}")&&this.throwUnexpectedToken(),r.Character.fromCodePoint(k)},v.prototype.getIdentifier=function(){for(var m=this.index++;!this.eof();){var k=this.source.charCodeAt(this.index);if(k===92)return this.index=m,this.getComplexIdentifier();if(k>=55296&&k<57343)return this.index=m,this.getComplexIdentifier();if(r.Character.isIdentifierPart(k))++this.index;else break}return this.source.slice(m,this.index)},v.prototype.getComplexIdentifier=function(){var m=this.codePointAt(this.index),k=r.Character.fromCodePoint(m);this.index+=k.length;var _;for(m===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,_=this.scanUnicodeCodePointEscape()):(_=this.scanHexEscape("u"),(_===null||_==="\\"||!r.Character.isIdentifierStart(_.charCodeAt(0)))&&this.throwUnexpectedToken()),k=_);!this.eof()&&(m=this.codePointAt(this.index),!!r.Character.isIdentifierPart(m));)_=r.Character.fromCodePoint(m),k+=_,this.index+=_.length,m===92&&(k=k.substr(0,k.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,_=this.scanUnicodeCodePointEscape()):(_=this.scanHexEscape("u"),(_===null||_==="\\"||!r.Character.isIdentifierPart(_.charCodeAt(0)))&&this.throwUnexpectedToken()),k+=_);return k},v.prototype.octalToDecimal=function(m){var k=m!=="0",_=c(m);return!this.eof()&&r.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(k=!0,_=_*8+c(this.source[this.index++]),"0123".indexOf(m)>=0&&!this.eof()&&r.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(_=_*8+c(this.source[this.index++]))),{code:_,octal:k}},v.prototype.scanIdentifier=function(){var m,k=this.index,_=this.source.charCodeAt(k)===92?this.getComplexIdentifier():this.getIdentifier();if(_.length===1?m=3:this.isKeyword(_)?m=4:_==="null"?m=5:_==="true"||_==="false"?m=1:m=3,m!==3&&k+_.length!==this.index){var u=this.index;this.index=k,this.tolerateUnexpectedToken(a.Messages.InvalidEscapedReservedWord),this.index=u}return{type:m,value:_,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}},v.prototype.scanPunctuator=function(){var m=this.index,k=this.source[this.index];switch(k){case"(":case"{":k==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,k="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:k=this.source.substr(this.index,4),k===">>>="?this.index+=4:(k=k.substr(0,3),k==="==="||k==="!=="||k===">>>"||k==="<<="||k===">>="||k==="**="?this.index+=3:(k=k.substr(0,2),k==="&&"||k==="||"||k==="=="||k==="!="||k==="+="||k==="-="||k==="*="||k==="/="||k==="++"||k==="--"||k==="<<"||k===">>"||k==="&="||k==="|="||k==="^="||k==="%="||k==="<="||k===">="||k==="=>"||k==="**"?this.index+=2:(k=this.source[this.index],"<>=!+-*%&|^/".indexOf(k)>=0&&++this.index)))}return this.index===m&&this.throwUnexpectedToken(),{type:7,value:k,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanHexLiteral=function(m){for(var k="";!this.eof()&&r.Character.isHexDigit(this.source.charCodeAt(this.index));)k+=this.source[this.index++];return k.length===0&&this.throwUnexpectedToken(),r.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+k,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanBinaryLiteral=function(m){for(var k="",_;!this.eof()&&(_=this.source[this.index],!(_!=="0"&&_!=="1"));)k+=this.source[this.index++];return k.length===0&&this.throwUnexpectedToken(),this.eof()||(_=this.source.charCodeAt(this.index),(r.Character.isIdentifierStart(_)||r.Character.isDecimalDigit(_))&&this.throwUnexpectedToken()),{type:6,value:parseInt(k,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanOctalLiteral=function(m,k){var _="",u=!1;for(r.Character.isOctalDigit(m.charCodeAt(0))?(u=!0,_="0"+this.source[this.index++]):++this.index;!this.eof()&&r.Character.isOctalDigit(this.source.charCodeAt(this.index));)_+=this.source[this.index++];return!u&&_.length===0&&this.throwUnexpectedToken(),(r.Character.isIdentifierStart(this.source.charCodeAt(this.index))||r.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(_,8),octal:u,lineNumber:this.lineNumber,lineStart:this.lineStart,start:k,end:this.index}},v.prototype.isImplicitOctalLiteral=function(){for(var m=this.index+1;m<this.length;++m){var k=this.source[m];if(k==="8"||k==="9")return!1;if(!r.Character.isOctalDigit(k.charCodeAt(0)))return!0}return!0},v.prototype.scanNumericLiteral=function(){var m=this.index,k=this.source[m];n.assert(r.Character.isDecimalDigit(k.charCodeAt(0))||k===".","Numeric literal must start with a decimal digit or a decimal point");var _="";if(k!=="."){if(_=this.source[this.index++],k=this.source[this.index],_==="0"){if(k==="x"||k==="X")return++this.index,this.scanHexLiteral(m);if(k==="b"||k==="B")return++this.index,this.scanBinaryLiteral(m);if(k==="o"||k==="O")return this.scanOctalLiteral(k,m);if(k&&r.Character.isOctalDigit(k.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(k,m)}for(;r.Character.isDecimalDigit(this.source.charCodeAt(this.index));)_+=this.source[this.index++];k=this.source[this.index]}if(k==="."){for(_+=this.source[this.index++];r.Character.isDecimalDigit(this.source.charCodeAt(this.index));)_+=this.source[this.index++];k=this.source[this.index]}if(k==="e"||k==="E")if(_+=this.source[this.index++],k=this.source[this.index],(k==="+"||k==="-")&&(_+=this.source[this.index++]),r.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;r.Character.isDecimalDigit(this.source.charCodeAt(this.index));)_+=this.source[this.index++];else this.throwUnexpectedToken();return r.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(_),lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanStringLiteral=function(){var m=this.index,k=this.source[m];n.assert(k==="'"||k==='"',"String literal must starts with a quote"),++this.index;for(var _=!1,u="";!this.eof();){var f=this.source[this.index++];if(f===k){k="";break}else if(f==="\\")if(f=this.source[this.index++],!f||!r.Character.isLineTerminator(f.charCodeAt(0)))switch(f){case"u":if(this.source[this.index]==="{")++this.index,u+=this.scanUnicodeCodePointEscape();else{var d=this.scanHexEscape(f);d===null&&this.throwUnexpectedToken(),u+=d}break;case"x":var x=this.scanHexEscape(f);x===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),u+=x;break;case"n":u+=`
`;break;case"r":u+="\r";break;case"t":u+="	";break;case"b":u+="\b";break;case"f":u+="\f";break;case"v":u+="\v";break;case"8":case"9":u+=f,this.tolerateUnexpectedToken();break;default:if(f&&r.Character.isOctalDigit(f.charCodeAt(0))){var A=this.octalToDecimal(f);_=A.octal||_,u+=String.fromCharCode(A.code)}else u+=f;break}else++this.lineNumber,f==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(r.Character.isLineTerminator(f.charCodeAt(0)))break;u+=f}}return k!==""&&(this.index=m,this.throwUnexpectedToken()),{type:8,value:u,octal:_,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.scanTemplate=function(){var m="",k=!1,_=this.index,u=this.source[_]==="`",f=!1,d=2;for(++this.index;!this.eof();){var x=this.source[this.index++];if(x==="`"){d=1,f=!0,k=!0;break}else if(x==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,k=!0;break}m+=x}else if(x==="\\")if(x=this.source[this.index++],r.Character.isLineTerminator(x.charCodeAt(0)))++this.lineNumber,x==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(x){case"n":m+=`
`;break;case"r":m+="\r";break;case"t":m+="	";break;case"u":if(this.source[this.index]==="{")++this.index,m+=this.scanUnicodeCodePointEscape();else{var A=this.index,w=this.scanHexEscape(x);w!==null?m+=w:(this.index=A,m+=x)}break;case"x":var H=this.scanHexEscape(x);H===null&&this.throwUnexpectedToken(a.Messages.InvalidHexEscapeSequence),m+=H;break;case"b":m+="\b";break;case"f":m+="\f";break;case"v":m+="\v";break;default:x==="0"?(r.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral),m+="\0"):r.Character.isOctalDigit(x.charCodeAt(0))?this.throwUnexpectedToken(a.Messages.TemplateOctalLiteral):m+=x;break}else r.Character.isLineTerminator(x.charCodeAt(0))?(++this.lineNumber,x==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,m+=`
`):m+=x}return k||this.throwUnexpectedToken(),u||this.curlyStack.pop(),{type:10,value:this.source.slice(_+1,this.index-d),cooked:m,head:u,tail:f,lineNumber:this.lineNumber,lineStart:this.lineStart,start:_,end:this.index}},v.prototype.testRegExp=function(m,k){var _="\uFFFF",u=m,f=this;k.indexOf("u")>=0&&(u=u.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(d,x,A){var w=parseInt(x||A,16);return w>1114111&&f.throwUnexpectedToken(a.Messages.InvalidRegExp),w<=65535?String.fromCharCode(w):_}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,_));try{RegExp(u)}catch{this.throwUnexpectedToken(a.Messages.InvalidRegExp)}try{return new RegExp(m,k)}catch{return null}},v.prototype.scanRegExpBody=function(){var m=this.source[this.index];n.assert(m==="/","Regular expression literal must start with a slash");for(var k=this.source[this.index++],_=!1,u=!1;!this.eof();)if(m=this.source[this.index++],k+=m,m==="\\")m=this.source[this.index++],r.Character.isLineTerminator(m.charCodeAt(0))&&this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),k+=m;else if(r.Character.isLineTerminator(m.charCodeAt(0)))this.throwUnexpectedToken(a.Messages.UnterminatedRegExp);else if(_)m==="]"&&(_=!1);else if(m==="/"){u=!0;break}else m==="["&&(_=!0);return u||this.throwUnexpectedToken(a.Messages.UnterminatedRegExp),k.substr(1,k.length-2)},v.prototype.scanRegExpFlags=function(){for(var m="",k="";!this.eof();){var _=this.source[this.index];if(!r.Character.isIdentifierPart(_.charCodeAt(0)))break;if(++this.index,_==="\\"&&!this.eof())if(_=this.source[this.index],_==="u"){++this.index;var u=this.index,f=this.scanHexEscape("u");if(f!==null)for(k+=f,m+="\\u";u<this.index;++u)m+=this.source[u];else this.index=u,k+="u",m+="\\u";this.tolerateUnexpectedToken()}else m+="\\",this.tolerateUnexpectedToken();else k+=_,m+=_}return k},v.prototype.scanRegExp=function(){var m=this.index,k=this.scanRegExpBody(),_=this.scanRegExpFlags(),u=this.testRegExp(k,_);return{type:9,value:"",pattern:k,flags:_,regex:u,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},v.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var m=this.source.charCodeAt(this.index);return r.Character.isIdentifierStart(m)?this.scanIdentifier():m===40||m===41||m===59?this.scanPunctuator():m===39||m===34?this.scanStringLiteral():m===46?r.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():r.Character.isDecimalDigit(m)?this.scanNumericLiteral():m===96||m===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():m>=55296&&m<57343&&r.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},v}();t.Scanner=p},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenName={},t.TokenName[1]="Boolean",t.TokenName[2]="<end>",t.TokenName[3]="Identifier",t.TokenName[4]="Keyword",t.TokenName[5]="Null",t.TokenName[6]="Numeric",t.TokenName[7]="Punctuator",t.TokenName[8]="String",t.TokenName[9]="RegularExpression",t.TokenName[10]="Template"},function(i,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=e(10),r=e(12),a=e(13),l=function(){function p(){this.values=[],this.curly=this.paren=-1}return p.prototype.beforeFunctionExpression=function(v){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(v)>=0},p.prototype.isRegexStart=function(){var v=this.values[this.values.length-1],m=v!==null;switch(v){case"this":case"]":m=!1;break;case")":var k=this.values[this.paren-1];m=k==="if"||k==="while"||k==="for"||k==="with";break;case"}":if(m=!1,this.values[this.curly-3]==="function"){var _=this.values[this.curly-4];m=_?!this.beforeFunctionExpression(_):!1}else if(this.values[this.curly-4]==="function"){var _=this.values[this.curly-5];m=_?!this.beforeFunctionExpression(_):!0}break;default:break}return m},p.prototype.push=function(v){v.type===7||v.type===4?(v.value==="{"?this.curly=this.values.length:v.value==="("&&(this.paren=this.values.length),this.values.push(v.value)):this.values.push(null)},p}(),c=function(){function p(v,m){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=m?typeof m.tolerant=="boolean"&&m.tolerant:!1,this.scanner=new r.Scanner(v,this.errorHandler),this.scanner.trackComment=m?typeof m.comment=="boolean"&&m.comment:!1,this.trackRange=m?typeof m.range=="boolean"&&m.range:!1,this.trackLoc=m?typeof m.loc=="boolean"&&m.loc:!1,this.buffer=[],this.reader=new l}return p.prototype.errors=function(){return this.errorHandler.errors},p.prototype.getNextToken=function(){if(this.buffer.length===0){var v=this.scanner.scanComments();if(this.scanner.trackComment)for(var m=0;m<v.length;++m){var k=v[m],_=this.scanner.source.slice(k.slice[0],k.slice[1]),u={type:k.multiLine?"BlockComment":"LineComment",value:_};this.trackRange&&(u.range=k.range),this.trackLoc&&(u.loc=k.loc),this.buffer.push(u)}if(!this.scanner.eof()){var f=void 0;this.trackLoc&&(f={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var d=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),x=d?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(x);var A={type:a.TokenName[x.type],value:this.scanner.source.slice(x.start,x.end)};if(this.trackRange&&(A.range=[x.start,x.end]),this.trackLoc&&(f.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},A.loc=f),x.type===9){var w=x.pattern,H=x.flags;A.regex={pattern:w,flags:H}}this.buffer.push(A)}}return this.buffer.shift()},p}();t.Tokenizer=c}])})});function yD(i){return typeof i=="object"&&i!==null}var fT,ya,pT=Dt(()=>{"use strict";fT=Yi(cT());ia();ya=class{constructor(){this.structures=[];this.hasStructuresWithUnknownLocations=!1;this.excludedStructures=[];this.allowedMethods=[]}hasUnknownLocations(){return this.hasStructuresWithUnknownLocations}getStructureLocations(t,e){try{let n=(0,fT.parseScript)(t,{loc:!0});this.findStructureLocations(n,t,e)}catch{}}setExcludedStructures(t){this.excludedStructures=t}setAllowedMethods(t){this.allowedMethods=t}getStructures(){return this.structures}findStructureLocations(t,e,n){let r=[],a=this.excludedStructures,l=this.allowedMethods,c=!1;function p(m,k){let _=e.split(`
`),u=0;for(let f=0;f<m-1;f++)u+=_[f].length+1;return u+=k-1,u}function v(m){if(m.loc){let k=p(m.loc.start.line,m.loc.start.column)-n,_=p(m.loc.end.line,m.loc.end.column)-n;if(m.type==="IfStatement")m.test.loc==null&&(c=!0),a.includes($.IfStatement)&&r.push({label:$.IfStatement,start:k,end:_});else if(m.type==="ConditionalExpression")m.test.loc==null&&(c=!0),a.includes($.TernaryStatement)&&r.push({label:$.TernaryStatement,start:k,end:_});else if(m.type==="AssignmentExpression"){let u=!0;(m.left.loc==null||m.right.loc==null)&&(c=!0),a.includes($.Assignment)||(u=!1),u&&r.push({label:$.Assignment,start:k,end:_})}else if(m.type==="BinaryExpression"){let u=!0;(m.left.loc==null||m.right.loc==null)&&(c=!0),a.includes($.BinCompare)||(u=!1),u&&r.push({label:$.BinCompare,start:k,end:_})}else if(m.type==="CallExpression"){let u=!0;if(m.callee.type==="MemberExpression"){let f=m.callee;if(f.property.type==="Identifier"){let d=f.property;l.includes(d.name)&&(u=!1)}}a.includes($.CallStatement)||(u=!1),u&&(m.loc==null&&(c=!0),r.push({label:$.CallStatement,start:k,end:_}))}}for(let k in m)yD(m[k])&&v(m[k])}v(t),this.hasStructuresWithUnknownLocations=c,this.structures=r}}});var dT,ka,mT=Dt(()=>{"use strict";dT=Yi(Zh());ia();ka=class{constructor(){this.structures=[];this.hasStructuresWithUnknownLocations=!1;this.excludedStructures=[];this.allowedMethods=[];this.phpAssignToGeneric=new Map([["=",$.Assignment],["+=",$.AdditionAssignment],["-=",$.SubtractionAssignment],["*=",$.MultiplicationAssignment],["/=",$.DivisionAssignment],["%=",$.ModulusAssignment],[".=",$.ConcatenationAssignment],["%=",$.BitwiseAndAssignment],["|=",$.BitwiseOrAssignment],["^=",$.BitwiseXorAssignment],["<<=",$.LeftShiftAssignment],[">>=",$.RightShiftAssignment]]);this.phpOperatorsToGeneric=new Map([[".",$.Concat],["+",$.Addition],["-",$.Substraction],["*",$.Multiplication],["/",$.Division],["%",$.Modulus],["**",$.Exponentiation],[">",$.GreaterThan],["&",$.BitwiseAnd],["|",$.BitwiseOr],["^",$.BitwiseXor],["<<",$.LeftShift],[">>",$.RightShift],["==",$.Equality],["===",$.Identity],["<",$.LessThan],["<>",$.Inequality],["!=",$.Inequality],["!==",$.NotIdentity],[">=",$.GreaterThanEqual],["<=",$.LessThanEqual],["&&",$.CompAnd],["and",$.CompAnd],["||",$.CompOr],["or",$.CompOr],["xor",$.Xor]]);this.parser=new dT.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}})}hasUnknownLocations(){return this.hasStructuresWithUnknownLocations}getStructureLocations(t,e){let n=this.parser.parseCode(t,"code.php");this.findStructureLocations(n,e)}setExcludedStructures(t){this.excludedStructures=t}setAllowedMethods(t){this.allowedMethods=t}getStructures(){return this.structures}findStructureLocations(t,e){let n=[],r=this.excludedStructures,a=this.phpOperatorsToGeneric,l=this.phpAssignToGeneric,c=this.allowedMethods,p=!1;function v(m){var k,_,u,f,d,x,A,w,H,V,Y,F,z,it,tt,pt,Ct,qt,wt,At;if(m.kind==="if"){let vt=m;vt.test.loc==null&&(p=!0),r.includes($.IfStatement)&&n.push({label:$.IfStatement,start:((_=(k=vt.test.loc)==null?void 0:k.start.offset)!=null?_:-1)-e,end:((f=(u=vt.test.loc)==null?void 0:u.end.offset)!=null?f:-1)-e})}else if(m.kind=="retif"){let vt=m;vt.test.loc==null&&(p=!0),r.includes($.TernaryStatement)&&n.push({label:$.TernaryStatement,start:((x=(d=vt.test.loc)==null?void 0:d.start.offset)!=null?x:-1)-e,end:((w=(A=vt.test.loc)==null?void 0:A.end.offset)!=null?w:-1)-e+2})}else if(m.kind=="assign"){let vt=m,Ut=!0;(vt.left.loc==null||vt.right.loc==null)&&(p=!0);let dt=vt.operator;l.has(dt)?dt=l.get(dt):dt=$.Assignment,r.includes(dt)||(Ut=!1),Ut&&n.push({label:dt,start:((V=(H=vt.left.loc)==null?void 0:H.start.offset)!=null?V:-1)-e,end:((F=(Y=vt.right.loc)==null?void 0:Y.end.offset)!=null?F:-1)-e})}else if(m.kind=="bin"){let vt=m,Ut=!0;(vt.left.loc==null||vt.right.loc==null)&&(p=!0);let dt=vt.kind.toLowerCase();a.has(dt)?dt=a.get(dt):dt=$.BinCompare,r.includes(dt)||(Ut=!1),Ut&&n.push({label:dt,start:((it=(z=vt.left.loc)==null?void 0:z.start.offset)!=null?it:-1)-e,end:((pt=(tt=vt.right.loc)==null?void 0:tt.end.offset)!=null?pt:-1)-e})}else if(m.kind=="call"){let vt=m,Ut=!0;if(vt.what.kind=="propertylookup"){let dt=vt.what;if(dt.offset.kind=="identifier"){let ft=dt.offset;c.includes(ft.name)&&(Ut=!1)}}r.includes($.CallStatement)||(Ut=!1),Ut&&(vt.loc==null&&(p=!0),n.push({label:$.CallStatement,start:((qt=(Ct=vt.loc)==null?void 0:Ct.start.offset)!=null?qt:-1)-e,end:((At=(wt=vt.loc)==null?void 0:wt.end.offset)!=null?At:-1)-e}))}for(let vt in m)m.hasOwnProperty(vt)&&typeof m[vt]=="object"&&m[vt]&&v(m[vt])}v(t),this.hasStructuresWithUnknownLocations=p,this.structures=n}}});var Ta,gT=Dt(()=>{"use strict";Sn();ds();ms();Dn();Ta=class{constructor(){this.ignoreRanges=[];this.strings=[];this.nodes=[];this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.nodeIndex=0;this.hasStringNodesInResult=!1}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}setIgnoreRanges(t){this.ignoreRanges=t}hasStringNodes(){return this.hasStringNodesInResult}parse(t){for(this.nodes=[],this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur=="/"&&this.next=="/"){Ui(this,!0);continue}if(this.cur=="/"&&this.next=="*"){Vi(this,!0);continue}if(ti(this.cur)){let e=this.cur,n=this.currentIndex;if(this.currentContent.length>0){let l={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(l),this.currentContent=[]}let r=Ri(this),a=!1;for(let l=0;l<this.ignoreRanges.length;l++){let c=this.ignoreRanges[l];if(n>=c.start&&this.currentIndex<=c.end){a=!0;break}}if(a){this.currentContent.push(e);for(let l=0;l<r.value.length;l++)this.currentContent.push(r.value[l]);this.currentContent.push(e)}else{this.strings.push(r.value);let l={content:e+r.value+e,type:"string",index:this.nodeIndex};this.hasStringNodesInResult=!0,this.nodeIndex++,this.nodes.push(l)}if(this.currentIndex=r.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(e),this.currentContent=[]}}getParsedNodes(){return this.nodes}}});var lr,eu=Dt(()=>{"use strict";pT();mT();gs();qe();gT();ah();lr=class{constructor(t){this.mergeRanges=[];this.charsToAvoid=[`
`,"$","{",'"',"'"];this.foundAnyStrings=!0;this.classRuleEngine=t,this.phpStructuresAnalyzer=new ka,this.jsStructuresAnalyzer=new ya,this.stringParser=new Ta}setAllowedMethodNames(t){this.phpStructuresAnalyzer.setAllowedMethods(t),this.jsStructuresAnalyzer.setAllowedMethods(t)}setExcludedLanguageStructures(t){this.phpStructuresAnalyzer.setExcludedStructures(t),this.jsStructuresAnalyzer.setExcludedStructures(t)}withAdditionalRanges(t){this.mergeRanges=this.mergeRanges.concat(t)}isSafeToProcess(t){if(!t.includes(" ")||t.includes(", "))return!1;for(let e=0;e<this.charsToAvoid.length;e++)if(t.includes(this.charsToAvoid[e]))return!1;return this.classRuleEngine.canTransformString(t)}getFoundAnyStrings(){return this.foundAnyStrings}emulateString(t){let e=q.makeSlug(32),n=`Emulate:${e}=`;if(this.stringParser.setIgnoreRanges(this.phpStructuresAnalyzer.getStructures().concat(this.mergeRanges).concat(this.jsStructuresAnalyzer.getStructures())),this.stringParser.parse(t),!this.stringParser.hasStringNodes())return this.foundAnyStrings=!1,t;let r=this.stringParser.getParsedNodes(),a=new Map,l=new Map,c="",p=0;r.forEach(_=>{if(_.type=="string"){let u=_.content.substring(1,_.content.length-1);if(!this.isSafeToProcess(u))return;a.set(_.index,_.content[0]),c+=`<!-- "${n}${_.index}"-->
`,c+=`<div class="${u}"></div>
`,p+=2}});try{c=xp(c)}catch{return t}let v=new fs;v.remove(c);let m=v.getStrings();if(m.length!=p)return t;for(let _=0;_<m.length;_++){let u=m[_];if(u.startsWith(n)){u=u.substring(n.length).trim();let f=parseInt(u);if(_+1<m.length){let d=m[_+1];l.set(f,d),_++}}}let k="";return r.forEach(_=>{if(_.type=="literal"||!l.has(_.index)){k+=_.content;return}let u=a.get(_.index),f=l.get(_.index);k+=u+f+u}),k}emulatePhpNode(t){let e="<?php "+t;return this.phpStructuresAnalyzer.getStructureLocations(e,0),this.emulateString(e).trimLeft().substring(6)}emulatePhpTag(t){return this.phpStructuresAnalyzer.getStructureLocations(t,0),this.emulateString(t)}emulateJavaScriptString(t){return this.jsStructuresAnalyzer.getStructureLocations(t,0),this.emulateString(t).trimLeft()}}});var Ca,_T=Dt(()=>{"use strict";qe();mn();Pe();eu();Ch();wr();qh();Ca=class{constructor(t){this.phpValidator=null;this.isIgnoring=!1;this.classStringConfig=t,this.classRuleEngine=new nr(this.classStringConfig),this.parserOptions=Yo()}withPhpValidator(t){return this.phpValidator=t,this}withParserOptions(t){return this.parserOptions=t,this}getEmulator(){let t=new lr(this.classRuleEngine);return t.setExcludedLanguageStructures(this.classStringConfig.ignoredLanguageStructures),t.setAllowedMethodNames(this.classStringConfig.allowedMethodNames),t}transform(t){var a;let e=new me;e.getParser().withParserOptions(this.parserOptions).withPhpValidator(this.phpValidator),e.loadString(t);let n=e.getAllNodes();if(e.getParser().getDidRecovery())return t;let r="";for(let l=0;l<n.length;l++){let c=n[l];if(c instanceof Zt)r+=c.content;else if(c instanceof Bi)r+=c.nodeContent;else if(c instanceof yi)r+=c.nodeContent;else if(c instanceof _t){if(this.isIgnoring||this.classStringConfig.excludedDirectives.includes(c.directiveName.toLowerCase()))r+=c.sourceContent;else if(c.directiveName=="php")if(c.isClosedBy!=null)if(this.isIgnoring||!this.classRuleEngine.canTransformBladePhp(c))r+=c.sourceContent+c.documentContent;else if((a=this.phpValidator)!=null&&a.isValid(c.documentContent,!0)){let p=this.getEmulator();r+="@php"+p.emulatePhpNode(c.documentContent)}else r+=c.sourceContent+c.documentContent;else r+=c.sourceContent;else if(c.directiveName=="verbatim")r+=c.sourceContent+c.innerContent;else if(this.isIgnoring||c.hasJsonParameters||!this.classRuleEngine.canTransformDirective(c))r+=c.sourceContent;else if(!c.hasDirectiveParameters||!c.hasValidPhp()?r+=c.sourceContent:r+=this.getEmulator().emulateString(c.sourceContent),l+1<n.length&&n[l+1]instanceof Zt){let p=n[l+1];if(p.content.length==0)continue;let v=p.content[0];if(q.ctypePunct(v))continue;q.ctypeSpace(v)||(r+=" ")}}else if(c instanceof Ie)if(this.isIgnoring||!this.classRuleEngine.canTransformBladeEcho(c)||!c.hasValidPhp())r+=c.sourceContent;else{let p=this.getEmulator(),v=p.emulatePhpNode(c.content).trim(),m="{{ ",k=" }}";c instanceof In?(m="{!! ",k=" !!}"):c instanceof Pn&&(m="{{{ ",k=" }}}"),r+=m+v+k}else c instanceof Mi?r+=c.nodeContent:c instanceof sn?(r+=c.sourceContent,c.innerContent.trim()==Mn.FormatIgnoreStart?this.isIgnoring=!0:c.innerContent.trim()==Mn.FormatIgnoreEnd&&(this.isIgnoring=!1)):c instanceof xi?r+=c.sourceContent:c instanceof oi&&(this.isIgnoring||!this.classRuleEngine.canTransformInlinePhp(c)||!c.hasValidPhp()?r+=c.sourceContent:r+=this.getEmulator().emulatePhpTag(c.sourceContent))}return r}}});var kp=j((MR,vT)=>{mn();aT();wh();lT();gs();_T();Hh();yh();wr();eu();Pe();var xT,Aa,qr,iu=null,kD={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(i,t,e){let n=ap(),r=mp();r!=null&&(e=r(e)),n!=null&&(e.filepath=n),sa(e),xT=e,iu=hp(__dirname),Aa=iu,qr=iu,Aa.tabSize=fp().tabWidth;let a=i,l=i,c=Aa.classStrings,p=new _a,v=new Map;if(aa){let u=new tr,f=me.fromText(a);u.setIndexRanges(f.getParser().getNodeIndexRanges()),u.setExtractAttributeNames(["x-data","ax-load","ax-load-src"]),u.setExtractAttributes(!0),u.parse(a);let d=u.getExtractedAttributes();if(f.getAllNodes().forEach(x=>{x instanceof xi&&x.hasParameters&&x.parameters.forEach(A=>{A.isEscapedExpression&&A.valuePosition!=null&&A.valuePosition.start!=null&&A.valuePosition.end!=null&&d.push({content:A.wrappedValue,name:A.name,startedOn:A.valuePosition.start.offset,endedOn:A.valuePosition.end.offset})})}),d.length>0){let x=new oa,A=x.remove(a,d);v=x.getRemovedAttributes(),a=A}}if(c.enabled){let u=new Ca(c);a=u.withParserOptions(qr).withPhpValidator(p).transform(a),l=u.withParserOptions(qr).withPhpValidator(p).transform(l),v.size>0&&v.forEach(f=>{try{let d=new nr(c),x=new lr(d);x.setAllowedMethodNames(c.allowedMethodNames),x.setExcludedLanguageStructures(c.ignoredLanguageStructures);let A=f.content.substring(1,f.content.length-1),w=x.emulateJavaScriptString(A);A==w&&!x.getFoundAnyStrings()?f.content=x.emulateJavaScriptString(f.content):f.content='"'+A+'"'}catch{return}})}let m=new me,k=new me;return m.getParser().withParserOptions(qr).withPhpValidator(p),k.getParser().withParserOptions(qr).withPhpValidator(p),m.loadString(a),k.loadString(l),{doc:m,attributeMap:v,shadowDocument:k}},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(i){let t=i.stack[0];return new Ea(xT,Aa).withRemovedAttributes(t.attributeMap).formatDocument(t.doc,t.shadowDocument)}}},defaultOptions:{tabWidth:4}};vT.exports=kD});module.exports=kp();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
