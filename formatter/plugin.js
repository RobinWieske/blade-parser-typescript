"use strict";var PN=Object.create;var _c=Object.defineProperty;var DN=Object.getOwnPropertyDescriptor;var RN=Object.getOwnPropertyNames;var wN=Object.getPrototypeOf,FN=Object.prototype.hasOwnProperty;var Bt=(n,t)=>()=>(n&&(t=n(n=0)),t);var H=(n,t)=>()=>(t||n((t={exports:{}}).exports,t),t.exports);var BN=(n,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of RN(t))!FN.call(n,o)&&o!==e&&_c(n,o,{get:()=>t[o],enumerable:!(s=DN(t,o))||s.enumerable});return n};var es=(n,t,e)=>(e=n!=null?PN(wN(n)):{},BN(t||!n||!n.__esModule?_c(e,"default",{value:n,enumerable:!0}):e,n));function mc(n){return(typeof n=="number"||typeof n=="string"&&UN.indexOf(n.slice(-1))===-1)&&n!==""&&!isNaN(n)}var UN,Tc=Bt(()=>{"use strict";UN=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var K,di=Bt(()=>{"use strict";Tc();K=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,s){return t.substr(e,s)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return mc(t)}static substringCount(t,e){let s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(s,"gi"))||[]).length}static lastWord(t){let e=t.split(""),s=[];for(let o=e.length;o>=0&&e[o]!=" ";o--)s.push(e[o]);return s.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return K.breakByNewLine(K.normalizeLineEndings(t)).forEach(o=>{o.trim().length>0&&e.push(o)}),e.join(`
`)}static replaceAllInString(t,e,s){return t.replace(new RegExp(e,"g"),s)}static getTrimmedMatch(t,e,s){let o=t.exec(e);if(o==null||o.length<s)return null;let h=o[s].trim();return h.length==0?null:h}static assertMatchIs(t,e,s,o){let h=K.getTrimmedMatch(t,e,s);return h!=null&&h==o}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=K.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=K.breakByNewLine(t);return e.length==0?"":e[0]}static collapse(t){let e=K.breakByNewLine(t),s="";for(let o=0;o<e.length;o++){let h=e[o].trim();if(o+1<e.length){let c=e[o+1].trim();if(c.length>0&&K.ctypePunct(c[0])){let u=c[0];s+=h,(u=="?"||u==":"||u=="&")&&(s+=" ")}else s+=h+" "}else s+=h}return s.trimRight()}}});function ti(n){return n==null?!1:n=='"'||n=="'"}var Un=Bt(()=>{"use strict"});function is(n){let t=n.getCurrent();for(n.incrementIndex(),n.getCurrentIndex();n.getCurrentIndex()<n.inputLength()&&(n.checkCurrentOffsets(),!(n.getCurrent()==t&&n.getPrev()!=X.String_EscapeCharacter));n.incrementIndex());}function ji(n){let t=n.getCurrent(),e=[];for(n.incrementIndex(),n.getCurrentIndex();n.getCurrentIndex()<n.inputLength()&&(n.checkCurrentOffsets(),!(n.getCurrent()==t&&n.getPrev()!=X.String_EscapeCharacter));n.incrementIndex())e.push(n.getCurrent());return{value:e.join(""),endedOn:n.getCurrentIndex()}}var Mn=Bt(()=>{"use strict";on()});var Hs,gc=Bt(()=>{"use strict";di();Un();Mn();Hs=class{constructor(){this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}static fromText(t){return new Hs().remove(t)}remove(t){for(this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)){let s=ji(this);if(this.currentIndex=s.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}let e=[];for(let s=0;s<this.currentContent.length;s++){let o=this.currentContent[s];if(s==0&&o=="@"){e.push(o);continue}if(o!="."&&K.ctypePunct(o))break;e.push(o)}return e.join("")}}});var Da=H(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.default=VN;var MN=HN(require("crypto"));function HN(n){return n&&n.__esModule?n:{default:n}}var Zr=new Uint8Array(256),Xr=Zr.length;function VN(){return Xr>Zr.length-16&&(MN.default.randomFillSync(Zr),Xr=0),Zr.slice(Xr,Xr+=16)}});var kc=H(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.default=void 0;var GN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;to.default=GN});var or=H(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.default=void 0;var qN=WN(kc());function WN(n){return n&&n.__esModule?n:{default:n}}function YN(n){return typeof n=="string"&&qN.default.test(n)}var QN=YN;eo.default=QN});var ar=H(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.default=void 0;var jN=KN(or());function KN(n){return n&&n.__esModule?n:{default:n}}var mi=[];for(let n=0;n<256;++n)mi.push((n+256).toString(16).substr(1));function zN(n,t=0){let e=(mi[n[t+0]]+mi[n[t+1]]+mi[n[t+2]]+mi[n[t+3]]+"-"+mi[n[t+4]]+mi[n[t+5]]+"-"+mi[n[t+6]]+mi[n[t+7]]+"-"+mi[n[t+8]]+mi[n[t+9]]+"-"+mi[n[t+10]]+mi[n[t+11]]+mi[n[t+12]]+mi[n[t+13]]+mi[n[t+14]]+mi[n[t+15]]).toLowerCase();if(!(0,jN.default)(e))throw TypeError("Stringified UUID is invalid");return e}var $N=zN;io.default=$N});var vc=H(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.default=void 0;var JN=Ec(Da()),XN=Ec(ar());function Ec(n){return n&&n.__esModule?n:{default:n}}var xc,Ra,wa=0,Fa=0;function ZN(n,t,e){let s=t&&e||0,o=t||new Array(16);n=n||{};let h=n.node||xc,c=n.clockseq!==void 0?n.clockseq:Ra;if(h==null||c==null){let y=n.random||(n.rng||JN.default)();h==null&&(h=xc=[y[0]|1,y[1],y[2],y[3],y[4],y[5]]),c==null&&(c=Ra=(y[6]<<8|y[7])&16383)}let u=n.msecs!==void 0?n.msecs:Date.now(),f=n.nsecs!==void 0?n.nsecs:Fa+1,T=u-wa+(f-Fa)/1e4;if(T<0&&n.clockseq===void 0&&(c=c+1&16383),(T<0||u>wa)&&n.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");wa=u,Fa=f,Ra=c,u+=122192928e5;let k=((u&268435455)*1e4+f)%4294967296;o[s++]=k>>>24&255,o[s++]=k>>>16&255,o[s++]=k>>>8&255,o[s++]=k&255;let B=u/4294967296*1e4&268435455;o[s++]=B>>>8&255,o[s++]=B&255,o[s++]=B>>>24&15|16,o[s++]=B>>>16&255,o[s++]=c>>>8|128,o[s++]=c&255;for(let y=0;y<6;++y)o[s+y]=h[y];return t||(0,XN.default)(o)}var tb=ZN;no.default=tb});var Ba=H(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.default=void 0;var eb=ib(or());function ib(n){return n&&n.__esModule?n:{default:n}}function nb(n){if(!(0,eb.default)(n))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(n.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(n.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(n.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(n.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(n.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var sb=nb;so.default=sb});var Ua=H(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.default=hb;_s.URL=_s.DNS=void 0;var rb=yc(ar()),ob=yc(Ba());function yc(n){return n&&n.__esModule?n:{default:n}}function ab(n){n=unescape(encodeURIComponent(n));let t=[];for(let e=0;e<n.length;++e)t.push(n.charCodeAt(e));return t}var Cc="6ba7b810-9dad-11d1-80b4-00c04fd430c8";_s.DNS=Cc;var Nc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";_s.URL=Nc;function hb(n,t,e){function s(o,h,c,u){if(typeof o=="string"&&(o=ab(o)),typeof h=="string"&&(h=(0,ob.default)(h)),h.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+o.length);if(f.set(h),f.set(o,h.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){u=u||0;for(let T=0;T<16;++T)c[u+T]=f[T];return c}return(0,rb.default)(f)}try{s.name=n}catch{}return s.DNS=Cc,s.URL=Nc,s}});var bc=H(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.default=void 0;var lb=ub(require("crypto"));function ub(n){return n&&n.__esModule?n:{default:n}}function cb(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),lb.default.createHash("md5").update(n).digest()}var fb=cb;ro.default=fb});var Ic=H(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.default=void 0;var db=Ac(Ua()),pb=Ac(bc());function Ac(n){return n&&n.__esModule?n:{default:n}}var _b=(0,db.default)("v3",48,pb.default),mb=_b;oo.default=mb});var Oc=H(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.default=void 0;var Tb=Sc(Da()),gb=Sc(ar());function Sc(n){return n&&n.__esModule?n:{default:n}}function kb(n,t,e){n=n||{};let s=n.random||(n.rng||Tb.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let o=0;o<16;++o)t[e+o]=s[o];return t}return(0,gb.default)(s)}var xb=kb;ao.default=xb});var Lc=H(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.default=void 0;var Eb=vb(require("crypto"));function vb(n){return n&&n.__esModule?n:{default:n}}function yb(n){return Array.isArray(n)?n=Buffer.from(n):typeof n=="string"&&(n=Buffer.from(n,"utf8")),Eb.default.createHash("sha1").update(n).digest()}var Cb=yb;ho.default=Cb});var Dc=H(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.default=void 0;var Nb=Pc(Ua()),bb=Pc(Lc());function Pc(n){return n&&n.__esModule?n:{default:n}}var Ab=(0,Nb.default)("v5",80,bb.default),Ib=Ab;lo.default=Ib});var Rc=H(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.default=void 0;var Sb="00000000-0000-0000-0000-000000000000";uo.default=Sb});var wc=H(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var Ob=Lb(or());function Lb(n){return n&&n.__esModule?n:{default:n}}function Pb(n){if(!(0,Ob.default)(n))throw TypeError("Invalid UUID");return parseInt(n.substr(14,1),16)}var Db=Pb;co.default=Db});var Fc=H(_n=>{"use strict";Object.defineProperty(_n,"__esModule",{value:!0});Object.defineProperty(_n,"v1",{enumerable:!0,get:function(){return Rb.default}});Object.defineProperty(_n,"v3",{enumerable:!0,get:function(){return wb.default}});Object.defineProperty(_n,"v4",{enumerable:!0,get:function(){return Fb.default}});Object.defineProperty(_n,"v5",{enumerable:!0,get:function(){return Bb.default}});Object.defineProperty(_n,"NIL",{enumerable:!0,get:function(){return Ub.default}});Object.defineProperty(_n,"version",{enumerable:!0,get:function(){return Mb.default}});Object.defineProperty(_n,"validate",{enumerable:!0,get:function(){return Hb.default}});Object.defineProperty(_n,"stringify",{enumerable:!0,get:function(){return Vb.default}});Object.defineProperty(_n,"parse",{enumerable:!0,get:function(){return Gb.default}});var Rb=Hn(vc()),wb=Hn(Ic()),Fb=Hn(Oc()),Bb=Hn(Dc()),Ub=Hn(Rc()),Mb=Hn(wc()),Hb=Hn(or()),Vb=Hn(ar()),Gb=Hn(Ba());function Hn(n){return n&&n.__esModule?n:{default:n}}});var yn,qI,WI,Bc,YI,QI,jI,KI,zI,$I,Uc=Bt(()=>{yn=es(Fc(),1),qI=yn.default.v1,WI=yn.default.v3,Bc=yn.default.v4,YI=yn.default.v5,QI=yn.default.NIL,jI=yn.default.version,KI=yn.default.validate,zI=yn.default.stringify,$I=yn.default.parse});function Mc(){return K.replaceAllInString(Bc(),"-","_")}var hr,fo,Be,ms,po,an,ne,mn,Ui,_o,Tt,Ts,Si,Ki,lr,zi,li,ns,ss,mo,ur,rs,cr,Vs,fr,gs,ks,Ve=Bt(()=>{"use strict";Uc();di();hr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=Mc()}},fo=class{constructor(){this.startPosition=null;this.endPosition=null}},Be=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=Mc()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,s;return t+((s=(e=this.startPosition)==null?void 0:e.index)!=null?s:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},ms=class extends Be{constructor(){super(...arguments);this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1}},po=class extends Be{constructor(){super(...arguments);this.name="";this.inlineName=""}},an=class extends Be{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return!0;return!1}getParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return this.parameters[s];return null}getParametersExcept(e){return this.parameters.filter(s=>!e.includes(s.realName))}},ne=class extends Be{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=K.replaceAllInString(this.content,"@{","{");return e=K.replaceAllInString(e,"@@","@"),e}},mn=class extends Be{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},Ui=class extends Be{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.sourceContent,!1),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},_o=class extends Ui{},Tt=class extends Be{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){var e;if(this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.getPhpContent(),!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){var s;let e=[];for(let o=0;o<this.children.length;o++){let h=this.children[o];if(((s=h.parent)==null?void 0:s.refId)==this.refId){if(h==this.isClosedBy)break;e.push(h)}}return e}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof Tt&&o.refId==this.isClosedBy.refId)break;e.push(o)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof Tt&&o.directiveName==e)return o}return null}findFirstDirectChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof Tt&&o.directiveName==e&&o.parent!=null&&o.parent.refId==this.refId)return o}return null}findDirectivesOfType(e){let s=[];return this.children.forEach(o=>{o instanceof Tt&&o.directiveName==e&&s.push(o)}),s}findDirectChildDirectivesOfType(e){let s=[];return this.children.forEach(o=>{o instanceof Tt&&o.directiveName==e&&o.parent!=null&&o.parent.refId==this.refId&&s.push(o)}),s}clone(){let e=new Tt;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition;let s=this.getParser();return s!=null&&e.withParser(s),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},Ts=class extends Be{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},Si=class extends Tt{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof Tt?this.logicBranches[0].head.parent:null}},Ki=class extends Be{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},lr=class extends Be{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},zi=class extends Be{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},li=class extends Be{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.content,!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},ns=class extends li{},ss=class extends li{},mo=class extends Be{},ur=class extends Be{},rs=class extends Be{constructor(){super(...arguments);this.tokenLength=0}},cr=class extends Be{},Vs=class extends Be{},fr=class extends Be{},gs=class extends Be{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},ks=class extends Be{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var At,xs=Bt(()=>{"use strict";At=class{};At.Verbatim="verbatim",At.EndVerbatim="endverbatim",At.Php="php",At.EndPhp="endphp",At.If="if",At.ElseIf="elseif",At.Else="else",At.Unless="unless",At.ForElse="forelse",At.EndForElse="endforelse",At.Switch="switch",At.EndSwitch="endswitch",At.Default="default",At.Case="case"});var je,dr=Bt(()=>{"use strict";Ve();je=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(s=>{if(!(s instanceof Tt))return;let o=s;o.directiveName.toLowerCase().startsWith("end")||e.set(o.directiveName.toLowerCase(),1)}),t.forEach(s=>{if(!(s instanceof Tt))return;let o=s;if(o.directiveName.toLowerCase().startsWith("unless")){let h=o.directiveName.substring(6);h.length>0&&(this.speculativeConditions.set(o.directiveName,1),this.speculativeEndIfs.set("end"+h,1))}if(this.speculativeEndIfs.has(o.directiveName)&&(o.isClosingDirective=!0),o.directiveName.toLowerCase().startsWith("else")){let h=o.directiveName.substring(4);h!="if"&&h.length>0&&this.speculativeConditions.set(h,1)}if(o.directiveName.toLowerCase().startsWith("end")){let h=o.directiveName.substring(3).toLowerCase();e.has(h)&&(this.possibleClosingNode.set(o.directiveName.toLowerCase(),1),o.isClosingDirective=!0)}})}};je.possibleClosingNode=new Map,je.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],je.customIfs=new Map,je.speculativeConditions=new Map,je.speculativeEndIfs=new Map});var To,Hc=Bt(()=>{"use strict";Ve();xs();dr();To=class{static getNewName(t){if(t.name==At.Unless)return At.If;if(je.isSpeculativeEndIf(t.directiveName))return At.If;if(je.alwaysRewrite.includes(t.name))return At.If;if(je.isSpeculativeCondition(t.name))return At.If;if(je.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,At.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,At.If):At.If}return t.directiveName=="auth"?At.If:t.name}static rewrite(t){let e=[];return t.forEach(s=>{if(s instanceof Tt)if(je.shouldRewrite(s)){let o=s.clone();o.name=this.getNewName(s),e.push(o)}else e.push(s);else e.push(s)}),e}}});function Mi(n){return n.length==0?null:n[0].startPosition}var Gs=Bt(()=>{"use strict"});function Vc(n,t){let e=new Set(n),s=new Set(t),o=new Set([...e].filter(h=>s.has(h)));return Array.from(o)}var Gc=Bt(()=>{"use strict"});var we,Ma=Bt(()=>{"use strict";we=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,s,o,h;let t="";return this.node!=null&&(t=((s=(e=this.node.endPosition)==null?void 0:e.offset)!=null?s:0).toString()+"|"+((h=(o=this.node.startPosition)==null?void 0:o.offset)!=null?h:0).toString()+"|"),t+"|"+this.errorCode}static makeSyntaxError(t,e,s,o){o==null&&(o=0);let h=new we;return h.errorCode=t,h.node=e,h.message=s,h.level=o,h}}});var Yt,Ha=Bt(()=>{"use strict";Yt=class{};Yt.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Yt.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Yt.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Yt.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Yt.TYPE_UNCLOSED_COMMENT="BLADE_005",Yt.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Yt.TYPE_UNCLOSED_VERBATIM="BLADE_008",Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Yt.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Yt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var hn,qs,qc=Bt(()=>{"use strict";Ma();Ha();Ve();xs();hn=class{static isConditionalStructure(t){if(!(t instanceof Tt))return!1;let e=t,s=e.name;return s==At.If||s==At.ElseIf||s==At.Else}static requiresClose(t){let e=t.name;return e==At.ElseIf||e==At.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==At.If||t==At.ElseIf?hn.conditionClosingPairs:[]}static findClosestStructurePair(t,e,s){let o=[],h=t.length,c=new Map;o.push({node:e,index:s});for(let u=0;u<h;u+=1){let f=t[u];if(f instanceof Tt){let T=f.name;if(f.isClosingDirective&&T==At.If){c.set(u,u);continue}else if(T==At.ElseIf||T==At.Else){c.set(u,u);continue}}}for(;o.length>0;){let u=o.pop();if(u==null)continue;if(u.node._conditionParserAbandonPairing)break;let f=u.node,T=hn.getValidClosingPairs(f.name),k=u.index,B=!1;for(let y=k;y<h;y++){let N=t[y];if(N instanceof Tt&&hn.isConditionalStructure(N)){if(hn.requiresClose(N)){if(y==h-1){B=!1;break}o.push(u),o.push({node:N,index:y+1}),B=!0;break}if(f.isClosedBy!=null)continue;let I=N.name,R=!1;if(N.ref==0&&(N.isClosingDirective&&I==At.If||T.includes(I))&&(R=!0),N.refId==f.refId&&(R=!1),R){c.delete(y),f.isClosedBy=N,N.isOpenedBy=f,N.ref+=1,B=!0;break}}}if(!B&&f instanceof Tt){let y=f.name;(y==At.ElseIf||y==At.Else)&&f.isOpenedBy==null&&(f.pushError(we.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0),f.isClosedBy==null&&hn.requiresClose(f)&&(f.pushError(we.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let s=t[e];s instanceof Tt&&hn.isConditionalStructure(s)&&hn.requiresClose(s)&&hn.findClosestStructurePair(t,s,e+1)}return t.forEach(e=>{if(e instanceof Tt&&hn.isConditionalStructure(e)){let s=e.name;if((s==At.ElseIf||s==At.Else)&&e.isOpenedBy==null){e.pushError(we.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&hn.requiresClose(e)){e.pushError(we.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},qs=hn;qs.conditionClosingPairs=["elseif","else"]});var go,Wc=Bt(()=>{"use strict";Vn();Gs();Ve();xs();go=class{static associate(t,e){let s=[];return t.forEach(o=>{o instanceof Tt&&o.name.toLowerCase()==At.ForElse&&o.directiveName.toLowerCase()!=At.EndForElse?s.push(this.createForElseNode(o,e)):s.push(o)}),s}static createForElseNode(t,e){var f,T,k,B,y,N,I,R,tt,rt,ht,z,Q,ft,U,q,kt,st,vt,Ut,qt,Mt,Nt,se,Qt,yt,lt,ce,It,oe,de,O,P,J,pt;let s=new zi;s.withParser(e),s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.constructedFrom=t;let o=t.findFirstDirectChildDirectiveOfType("empty");if(o==null){s.tailNode=t.children.pop(),s.truthNodes=t.children;let Ht=((T=(f=t.startPosition)==null?void 0:f.index)!=null?T:0)-1,Z=((y=(B=(k=t.isClosedBy)==null?void 0:k.startPosition)==null?void 0:B.index)!=null?y:0)-1,F=Z-Ht,G=((I=(N=t.endPosition)==null?void 0:N.index)!=null?I:0)+1,M=((rt=(tt=(R=t.isClosedBy)==null?void 0:R.startPosition)==null?void 0:tt.index)!=null?rt:0)-1,$=M-G;s.truthDocumentContent=e.getText(Ht,Z),s.truthDocumentOffset={start:Ht,end:Z,length:F},s.truthInnerContent=e.getText(G,M),s.truthInnerOffset={start:G,end:M,length:$}}else{let Ht=t.children,Z=[],F=[];s.elseNode=o;for(let $t=0;$t<Ht.length;$t++){let Lt=Ht[$t];if(Lt.refId==o.refId){F=Ht.slice($t+1);break}else Z.push(Lt)}s.truthNodes=Z,F.length>0&&(s.tailNode=F.pop()),s.falseNodes=F;let G=((z=(ht=t.startPosition)==null?void 0:ht.index)!=null?z:0)-1,M=((ft=(Q=o.startPosition)==null?void 0:Q.index)!=null?ft:0)-1,$=M-G,ot=((q=(U=t.endPosition)==null?void 0:U.index)!=null?q:0)+1,et=((st=(kt=o.startPosition)==null?void 0:kt.index)!=null?st:0)-1,W=et-ot;s.truthDocumentContent=e.getText(G,M),s.truthDocumentOffset={start:G,end:M,length:$},s.truthInnerContent=e.getText(ot,et),s.truthInnerOffset={start:ot,end:et,length:W};let at=((Ut=(vt=o.startPosition)==null?void 0:vt.index)!=null?Ut:0)-1,xt=((Nt=(Mt=(qt=t.isClosedBy)==null?void 0:qt.startPosition)==null?void 0:Mt.index)!=null?Nt:0)-1,zt=xt-at,dt=((Qt=(se=o.endPosition)==null?void 0:se.index)!=null?Qt:0)+1,bt=((ce=(lt=(yt=t.isClosedBy)==null?void 0:yt.startPosition)==null?void 0:lt.index)!=null?ce:0)-1,j=bt-dt;s.falseDocumentContent=e.getText(at,xt),s.falseDocumentOffset={start:at,end:xt,length:zt},s.falseInnerContent=e.getText(dt,bt),s.falseInnerOffset={start:dt,end:bt,length:j}}s.truthDocument=De.childFromText(e.getNodeText(s.truthNodes),e,Mi(s.truthNodes)),s.falseDocument=De.childFromText(e.getNodeText(s.falseNodes),e,Mi(s.falseNodes));let h=((oe=(It=t.startPosition)==null?void 0:It.index)!=null?oe:0)-1,c=(pt=(O=(de=t.isClosedBy)==null?void 0:de.endPosition)==null?void 0:O.index)!=null?pt:0-((J=(P=t.startPosition)==null?void 0:P.index)!=null?J:0),u=c-h;return s.nodeContent=e.getText(h,c),s.documentContent=e.getText(h,c),s.offset={start:h,end:c,length:u},s}}});var ko,Yc=Bt(()=>{"use strict";Vn();Gs();Ve();dr();ko=class{static analyze(t,e){let s=[];return t.forEach(o=>{if(o instanceof Tt&&o.isClosedBy!=null){let h=o.findFirstChildDirectiveOfType("else");h!=null&&h.isClosedBy==null?s.push(this.convertToConditionalNode(o,h,e)):s.push(o)}else s.push(o)}),s}static convertToConditionalNode(t,e,s){var Mt,Nt,se,Qt,yt,lt,ce,It,oe,de,O,P,J,pt,Ht,Z,F,G,M,$,ot,et,W,at,xt,zt;let o=new Si,h=t.getFinalClosingDirective(),c=t.children,u=[],f=[],T=c.pop();o.withParser(s),o.parent=t.parent,o.startPosition=t.startPosition,o.endPosition=h.endPosition,o.constructedFrom=t;let k=((Nt=(Mt=t.startPosition)==null?void 0:Mt.index)!=null?Nt:0)-1,B=(lt=(se=h==null?void 0:h.endPosition)==null?void 0:se.index)!=null?lt:0-((yt=(Qt=t.startPosition)==null?void 0:Qt.index)!=null?yt:0),y=k+B;o.nodeContent=s.getText(k,B),o.offset={start:k,end:y,length:B};for(let dt=0;dt<c.length;dt++){let bt=c[dt];if(bt instanceof Tt&&bt.refId==e.refId){f=c.slice(dt+1);break}else u.push(bt)}let N=new Ts,I=new Ts;N.withParser(s),I.withParser(s),t.isClosedBy=e,e.isOpenedBy=t,T.isOpenedBy=e,e.isClosedBy=T;let R=[...u],tt=[...f];u.push(e),N.head=t,N.nodes=u,N.index=t.index;let rt=(It=(ce=t.endPosition)==null?void 0:ce.index)!=null?It:0,ht=((O=(de=(oe=t.isClosedBy)==null?void 0:oe.startPosition)==null?void 0:de.index)!=null?O:0)-1,z=ht-rt,Q=((J=(P=t.startPosition)==null?void 0:P.index)!=null?J:0)-1,ft=((Z=(Ht=(pt=t.isClosedBy)==null?void 0:pt.startPosition)==null?void 0:Ht.index)!=null?Z:0)-1,U=ft-Q;N.innerContent=s.getText(rt,ht),N.documentContent=s.getText(Q,ft),N.innerOffset={start:rt,end:ht,length:z},N.offset={start:Q,end:ft,length:U},f.push(T),I.head=e,I.nodes=f,I.index=e.index;let q=(G=(F=e.endPosition)==null?void 0:F.index)!=null?G:0,kt=((ot=($=(M=e.isClosedBy)==null?void 0:M.startPosition)==null?void 0:$.index)!=null?ot:0)-1,st=kt-q,vt=((W=(et=e.startPosition)==null?void 0:et.index)!=null?W:0)-1,Ut=((zt=(xt=(at=e.isClosedBy)==null?void 0:at.startPosition)==null?void 0:xt.index)!=null?zt:0)-1,qt=Ut-vt;return I.innerContent=s.getText(q,kt),I.documentContent=s.getText(vt,Ut),I.innerOffset={start:q,end:kt,length:st},I.offset={start:vt,end:Ut,length:qt},o.chain=[t.index,e.index],o.logicBranches.push(N),o.logicBranches.push(I),N.startPosition=N.nodes[0].startPosition,N.endPosition=N.nodes[N.nodes.length-1].startPosition,N.childDocument=De.childFromText(s.getNodeText(R),s,Mi(R)),I.childDocument=De.childFromText(s.getNodeText(tt),s,Mi(tt)),I.startPosition=I.nodes[0].startPosition,I.endPosition=I.nodes[I.nodes.length-1].startPosition,je.registerSpeculativeCondition(t.directiveName),o}}});var xo,Qc=Bt(()=>{"use strict";Vn();Gs();Ve();xs();xo=class{static associate(t,e){let s=[];return t.forEach(o=>{o instanceof Tt&&o.directiveName.toLowerCase()==At.Switch?s.push(this.createSwitchNode(o,e)):s.push(o)}),s}static createSwitchNode(t,e){var T,k,B,y,N,I,R,tt,rt,ht,z,Q,ft,U,q,kt,st,vt,Ut,qt,Mt,Nt,se,Qt,yt,lt,ce,It,oe,de,O,P;let s=new Ki,o=t.children;s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.parent=t.parent,s.withParser(e),s.constructedFrom=t;let h=[];for(let J=0;J<o.length;J++){let pt=o[J];if(pt instanceof Tt&&pt.name==At.Switch&&(J+=pt.children.length),pt instanceof Tt&&pt.name==At.Case){let Ht=this.collectUntil(t,o.slice(J+1),[At.Case,At.Default,At.EndSwitch]),Z=new lr;if(Z.parent=pt.parent,s.cases.length==0&&h.length>0){if(Z.leadingNodes=h,h.length>0){let W=h[0],at=h[h.length-1],xt=(k=(T=W.startPosition)==null?void 0:T.index)!=null?k:0,zt=((y=(B=at.endPosition)==null?void 0:B.index)!=null?y:0)+1,dt=e.getText(xt,zt);Z.leadingDocument=De.childFromText(dt,e,W.startPosition)}h=[]}if(Z.refId=pt.refId,Z.index=pt.index,Z.startPosition=pt.startPosition,Z.endPosition=pt.endPosition,Z.order=s.cases.length,Z.head=pt,Z.isDefault=!1,Z.children=Ht.children,Z.withParser(e),Z.isClosedBy=Ht.brokeOn,pt.isClosedBy=Ht.brokeOn,Z.children.length>0){let W=Z.children[Z.children.length-1];W instanceof Tt&&W==t.isClosedBy&&Z.children.pop()}Z.childDocument=De.childFromText(e.getNodeText(Z.children),e,Mi(Z.children)),Ht.brokeOn!=null&&(Z.endPosition=Ht.brokeOn.startPosition);let F=((I=(N=Z.startPosition)==null?void 0:N.index)!=null?I:0)-1,G=((rt=(tt=(R=Z.isClosedBy)==null?void 0:R.startPosition)==null?void 0:tt.index)!=null?rt:0)-1,M=G-F,$=((z=(ht=pt.endPosition)==null?void 0:ht.index)!=null?z:0)+1,ot=((U=(ft=(Q=Z.isClosedBy)==null?void 0:Q.startPosition)==null?void 0:ft.index)!=null?U:0)-1,et=ot-$;Z.documentContent=e.getText(F,G),Z.innerContent=e.getText($,ot),Z.offset={start:F,end:G,length:M},Z.innerOffset={start:$,end:ot,length:et},s.cases.push(Z)}else if(pt instanceof Tt&&pt.name==At.Default){let Ht=o.slice(J+1),Z=new lr;Z.parent=pt.parent,Z.refId=pt.refId,Z.index=pt.index,Z.startPosition=pt.startPosition,Z.endPosition=t.startPosition,Z.order=s.cases.length,Z.head=pt,Z.isDefault=!0,Z.children=Ht,Z.withParser(e),Z.isClosedBy=t.isClosedBy,pt.isClosedBy=t.isClosedBy;let F=[...Z.children],G=F[F.length-1];G instanceof Tt&&G.refId==((q=t.isClosedBy)==null?void 0:q.refId)&&F.pop();let M=((st=(kt=Z.startPosition)==null?void 0:kt.index)!=null?st:0)-1,$=((qt=(Ut=(vt=Z.isClosedBy)==null?void 0:vt.startPosition)==null?void 0:Ut.index)!=null?qt:0)-1,ot=$-M,et=((Nt=(Mt=pt.endPosition)==null?void 0:Mt.index)!=null?Nt:0)+1,W=((yt=(Qt=(se=Z.isClosedBy)==null?void 0:se.startPosition)==null?void 0:Qt.index)!=null?yt:0)-1,at=W-et;Z.documentContent=e.getText(M,$),Z.innerContent=e.getText(et,W),Z.offset={start:M,end:$,length:ot},Z.innerOffset={start:et,end:W,length:at},Z.childDocument=De.childFromText(e.getNodeText(F),e,Mi(F)),s.cases.push(Z);break}else h.push(pt)}if(s.cases.length>0){let J=s.cases[s.cases.length-1];J.children.length>0&&(s.tail=J.children.pop())}if(s.cases.length==0){let J=[...t.children];J.length>0&&J[J.length-1]==t.isClosedBy&&J.pop(),t.childrenDocument=De.childFromText(e.getNodeText(J),e,Mi(J))}let c=((ce=(lt=t.startPosition)==null?void 0:lt.index)!=null?ce:0)-1,u=(P=(oe=(It=t.isClosedBy)==null?void 0:It.endPosition)==null?void 0:oe.index)!=null?P:0-((O=(de=t.startPosition)==null?void 0:de.index)!=null?O:0),f=c+u;if(s.nodeContent=e.getText(c,u),s.offset={start:c,end:f,length:u},s.cases.length>0){let J=s.cases[s.cases.length-1];J.isClosedBy==null&&(J.isClosedBy=t.isClosedBy)}return s}static collectUntil(t,e,s){var c;let o=[],h=null;for(let u=0;u<e.length;u++){let f=e[u];if(f instanceof Tt&&s.includes(f.name)&&((c=f.parent)==null?void 0:c.refId)==t.refId){h=f;break}o.push(f)}return{children:o,brokeOn:h}}}});var Va,pr,jc=Bt(()=>{"use strict";Vn();Gs();Ve();xs();Gc();qc();Wc();dr();Yc();Qc();Va=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.stackCount=0}buildCloseIndex(t){var e,s,o;t.forEach(h=>{var T,k,B,y,N,I,R,tt;if(!(h instanceof Tt))return;let c=h;if(c.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let u=c.name;((T=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:T.has(u))==!1&&((k=this.closingDirectiveIndex.get(this.stackCount))==null||k.set(u,[]),(B=this.closingDirectiveIndexCount.get(this.stackCount))==null||B.set(u,0)),(N=(y=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:y.get(u))==null||N.push(h);let f=(R=(I=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:I.get(u))!=null?R:0;(tt=this.closingDirectiveIndexCount.get(this.stackCount))==null||tt.set(u,f+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((s=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?s:[])),(o=this.closingDirectiveIndex.get(this.stackCount))==null||o.forEach((h,c)=>{var T,k,B,y,N;let u=h.length;if(u==0)return;let f=h[u-1];for(let I=0;I<u;I++){let R=t[I];if(R instanceof Tt){if(R.index>=f.index)break;let tt=R.name;if(R.isClosingDirective==!1&&tt==c){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((T=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:T.has(c))==!1&&((k=this.openDirectiveIndexCount.get(this.stackCount))==null||k.set(c,0));let rt=(y=(B=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:B.get(c))!=null?y:0;(N=this.openDirectiveIndexCount.get(this.stackCount))==null||N.set(c,rt+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),s=this.closingDirectiveNames.get(this.stackCount);return Vc(e,s)}return[]}associate(t,e,s=null){var c;this.document=e;let o=[],h=[{documentNodes:t,parent:s}];for(;h.length>0;){let u=h.pop();if(u==null)continue;let f=u.documentNodes;this.parentNode=u.parent,this.stackCount+=1,this.buildCloseIndex(f),f=qs.pairConditionals(f),f.forEach(y=>{if(y instanceof Tt&&je.canClose(y)){if(qs.isConditionalStructure(y))return;let N=this.getScanForList(y);this.findClosingPair(f,y,N)}});let T=f.length;for(let y=0;y<T;y++){let N=f[y];if(N instanceof Tt&&N.isClosedBy!=null)for(let I=y+1;I<T;I++){let R=f[I];if(R.index>N.isClosedBy.index)break;if(R.parent=N,N.children.push(R),R instanceof Tt&&R.index==N.index){R.parent=N;break}}}f.forEach(y=>{if(y instanceof Tt&&y.children.length>0){let N=[],I=[];y.children.forEach(R=>{if(R.parent!=null&&R.parent.index==y.index){let tt=R.refId;if(!I.includes(tt))R.parent=y,N.push(R),I.push(tt);else return}}),h.push({documentNodes:N,parent:y})}});let k=[];f.forEach(y=>{var N;this.parentNode==null?y.parent==null&&k.push(y):((N=y.parent)==null?void 0:N.refId)==this.parentNode.refId&&k.push(y)}),k=this.reduceConditions(k,e),k=xo.associate(k,e),k=go.associate(k,e),k=ko.analyze(k,e),k=this.cleanNodes(k);let B=new Map;f.forEach(y=>{var N,I,R,tt;if(y instanceof Tt&&y.isClosedBy!=null&&this.document!=null){let rt=this.document.getText((I=(N=y.endPosition)==null?void 0:N.index)!=null?I:0,((tt=(R=y.isClosedBy.startPosition)==null?void 0:R.index)!=null?tt:0)-1);y.documentContent=rt,(y.name=="php"||y.name=="verbatim")&&y.innerContent.trim().length==0&&(y.innerContent=y.documentContent)}});for(let y=0;y<k.length;y++){let N=k[y],I=(c=N.refId)!=null?c:"";B.set(I,1)}if(this.parentNode!=null&&this.parentNode instanceof Tt&&(this.parentNode.children=this.cleanNodes(k),this.parentNode.parent!=null&&this.parentNode.parent instanceof Tt)){let y=this.parentNode.parent.children,N=[];y.forEach(I=>{var R;B.has((R=I.refId)!=null?R:"")==!1&&N.push(I)}),this.parentNode.parent.children=this.cleanNodes(N)}this.stackCount<=1&&(o=this.cleanNodes(k))}return o}cleanNodes(t){let e=[],s=[];for(let o=0;o<t.length;o++){let h=t[o],c=h.refId;if(s.includes(c))break;e.push(h),s.push(c)}return e}reduceConditions(t,e){var o,h,c,u,f,T,k,B,y,N,I,R,tt,rt,ht,z,Q;let s=[];for(let ft=0;ft<t.length;ft++){let U=t[ft];if(U instanceof Tt&&U.isClosingDirective==!1&&U.isClosedBy!=null)if(U.name==At.If){let kt=new Si,st=U.getFinalClosingDirective();kt.withParser(e),kt.index=U.index,kt.chain.push(U.index),kt.startPosition=U.startPosition,kt.endPosition=st.endPosition,kt.constructedFrom=U;let vt=((h=(o=U.startPosition)==null?void 0:o.index)!=null?h:0)-1,Ut=(T=(c=st==null?void 0:st.endPosition)==null?void 0:c.index)!=null?T:0-((f=(u=U.startPosition)==null?void 0:u.index)!=null?f:0),qt=vt+Ut;kt.nodeContent=e.getText(vt,Ut),kt.offset={start:vt,end:qt,length:Ut},this.parentNode!=null&&(kt.parent=this.parentNode);let Mt=null,Nt=!0,se=0;for(;Nt;){if(se+=1,se>Va.ForceBreakLimit){Nt=!1;break}if(U instanceof Tt){let Qt=this.findEndOfBranch(t.slice(ft+1),U,ft),yt=new Ts;yt.withParser(e);let lt=Qt.tail;yt.head=U,yt.tail=lt,yt.nodes=this.cleanNodes(U.children);let ce=[...yt.nodes],It=ce[ce.length-1];It instanceof Tt&&It.refId==((k=U.isClosedBy)==null?void 0:k.refId)&&ce.pop();let oe=(y=(B=U.endPosition)==null?void 0:B.index)!=null?y:0,de=((R=(I=(N=U.isClosedBy)==null?void 0:N.startPosition)==null?void 0:I.index)!=null?R:0)-1,O=de-oe,P=((rt=(tt=U.startPosition)==null?void 0:tt.index)!=null?rt:0)-1,J=((Q=(z=(ht=U.isClosedBy)==null?void 0:ht.startPosition)==null?void 0:z.index)!=null?Q:0)-1,pt=J-P;if(yt.innerContent=e.getText(oe,de),yt.documentContent=e.getText(P,J),yt.innerOffset={start:oe,end:de,length:O},yt.offset={start:P,end:J,length:pt},yt.childDocument=De.childFromText(e.getNodeText(ce),e,Mi(ce)),lt==null&&(lt=yt.head.isClosedBy),lt!=null&&lt.startPosition!=null&&(yt.startPosition=lt.startPosition),lt!=null&&(yt.index=lt.index),yt.nodes.length>0){let Ht=yt.nodes[yt.nodes.length-1];Ht.endPosition!=null&&(yt.endPosition=Ht.endPosition)}else lt!=null&&lt.endPosition!=null&&(yt.endPosition=lt.endPosition);if(this.createdExecutionBranches.push(yt),kt.logicBranches.push(yt),(lt==null?void 0:lt.isClosingDirective)&&lt.name==At.If){Mt=Qt.offset,Nt=!1;break}else lt!=null&&kt.chain.push(lt.index),ft=Qt.offset,lt instanceof Tt&&(U=lt)}else Nt=!1}if(s.push(kt),Mt!=null&&Mt==t.length)break}else s.push(U);else s.push(U)}return s}findEndOfBranch(t,e,s){let o=[],h=s,c=null;for(let u=0;u<t.length;u++){let f=t[u];if(f instanceof Tt&&f.isOpenedBy!=null&&f.isOpenedBy==e){c=f;break}else o.push(f)}return{children:o,tail:c,offset:h}}findClosingPair(t,e,s){let o=t.length,h=0;for(let c=0;c<o;c++){let u=t[c];if(!(u instanceof Tt)||u.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(u.startPosition))continue;let f=u;if(f.isClosingDirective&&f.isOpenedBy!=null||!f.isClosingDirective&&f.isClosedBy!=null)continue;let T=f.name;if(!f.isClosingDirective&&s.includes(T)){h+=1;continue}if(s.includes(T)&&h>0){h-=1;continue}if(h==0&&s.includes(T)){f.isOpenedBy=e,e.isClosedBy=f;break}}}},pr=Va;pr.ForceBreakLimit=1e5});var Eo,Kc=Bt(()=>{"use strict";Ve();Eo=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof Tt))return;let s=e;s.getImmediateChildren().forEach(o=>{let h="*unknown",c=0;o instanceof ne?h="*literal":o instanceof ss?h="*entities_echo":o instanceof ns?h="*escaped_echo":o instanceof li?h="*echo":o instanceof mo?h="*verbatim":o instanceof Tt&&(h=o.directiveName),s.childTypeCounts.has(h)==!1&&s.childTypeCounts.set(h,0);let u=s.childTypeCounts.get(h),f=u+1;s.childTypeCounts.set(h,f),o.parentTypeIndex=f,o.parentIndex=c,c+=1})})}}});var vo,$c=Bt(()=>{"use strict";Ve();vo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var o,h,c,u,f;let e=(h=(o=t.endPosition)==null?void 0:o.index)!=null?h:0,s=(f=(u=(c=t.isClosedBy)==null?void 0:c.startPosition)==null?void 0:u.index)!=null?f:0;return this.fragmentsParser.getFragmentsBetween(e,s).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let s=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(s=="script"||s=="style")){let o=this.fragmentsParser.getClosingFragmentAfter(e);if(o==null)return;e.endPosition!=null&&o.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,o.startPosition).forEach(c=>{(c instanceof Si||c instanceof zi||c instanceof an||c instanceof Ki||c instanceof Tt&&c.isClosedBy!=null)&&(e.containsStructures=!0),s=="style"?c.isInStyleTag=!0:c.isInScriptTag=!0})}}),t.forEach(e=>{var c,u,f,T,k,B;if(e instanceof ne||e.startPosition==null)return;e instanceof Tt&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let s=this.fragmentsParser.getFragmentContaining(e.startPosition);if(s==null)return;if(e.fragment=s,e.startPosition.index-((u=(c=s.startPosition)==null?void 0:c.index)!=null?u:0)<=3){e.fragmentPosition=0;return}if(s.parameters.length==0){e.fragmentPosition=2;return}let h=!1;for(let y=0;y<s.parameters.length;y++){let N=s.parameters[y];if(((T=(f=N.startPosition)==null?void 0:f.index)!=null?T:0)<e.startPosition.index&&((B=(k=N.endPosition)==null?void 0:k.index)!=null?B:0)>e.startPosition.index){e.fragmentPosition=1,h=!0;break}}h||(e.fragmentPosition=2)}))}}});var yo,Jc=Bt(()=>{"use strict";Ve();di();yo=class{static analyze(t){t.forEach(e=>{var s,o,h,c;if(e instanceof li){let u=!1,f=!1;if(e.nextNode==null)u=!0;else if(e.nextNode instanceof ne){let T=K.getFirstLine(e.nextNode.content);(K.trimLeft(T," 	").startsWith(`
`)==!1&&T.trim().length>0||e.nextNode.nextNode instanceof li&&((s=e.nextNode.nextNode.startPosition)==null?void 0:s.line)==((o=e.endPosition)==null?void 0:o.line))&&(u=!0)}if(e.prevNode==null)f=!0;else if(e.prevNode instanceof ne){let T=K.getLastLine(e.prevNode.content);(K.trimRight(T," 	").endsWith(`
`)==!1&&T.trim().length>0||e.prevNode.prevNode instanceof li&&((h=e.prevNode.prevNode.endPosition)==null?void 0:h.line)==((c=e.startPosition)==null?void 0:c.line))&&(f=!0)}e.isInlineEcho=u||f}})}}});var Co,Xc=Bt(()=>{"use strict";Ve();di();Co=class{static analyze(t){t.forEach(e=>{var s,o;if(e instanceof Ui){if(((s=e.startPosition)==null?void 0:s.line)!=((o=e.endPosition)==null?void 0:o.line))return;let h=!1,c=!1;if(e.nextNode==null)h=!0;else if(e.nextNode instanceof ne){let u=K.getFirstLine(e.nextNode.content);K.trimLeft(u," 	").startsWith(`
`)==!1&&u.trim().length>0&&(h=!0)}if(e.prevNode==null)c=!0;else if(e.prevNode instanceof ne){let u=K.getLastLine(e.prevNode.content);K.trimRight(u," 	").endsWith(`
`)==!1&&u.trim().length>0&&(c=!0)}e.isInline=h&&c}})}}});var Cn,Zc=Bt(()=>{"use strict";on();di();Cn=class{static findRightBeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t+1;h<e.length;h++){let c=e[h];if(K.ctypeSpace(c)&&(o=!0),o&&(K.ctypeAlpha(c)||K.ctypeDigit(c)))return null;if(K.ctypePunct(c)||c==X.String_Terminator_SingleQuote||c==X.String_Terminator_DoubleQuote)return c}return null}static findRightNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t+1;h<e.length;h++){let c=e[h];if((K.ctypeSpace(c)||K.ctypePunct(c)&&c!=X.Punctuation_Underscore)&&(o=!0),o&&(K.ctypeAlpha(c)||K.ctypeDigit(c)))return h+1}return null}static findLeftNeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t-2;h>=0;h--){let c=e[h];if(K.ctypeSpace(c)&&(o=!0),o&&(K.ctypeAlpha(c)||K.ctypeDigit(c)))return null;if(K.ctypePunct(c))return c}return null}static findLeftNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t-1;h>=0;h--){let c=e[h];if((K.ctypeSpace(c)||K.ctypePunct(c)&&c!=X.Punctuation_Underscore)&&(o=!0),o&&(K.ctypeAlpha(c)||K.ctypeDigit(c)))return h+1}return null}static scanWordAt(t,e,s=4){if(e=e.replace("	"," ".repeat(s)),t<0||t>e.length)return null;let o=[],h=[];for(let c=t-1;c>=0;c--){let u=e[c];if(K.ctypePunct(u)&&u!=X.Punctuation_Underscore||K.ctypeSpace(u))break;o.push(u)}for(let c=t;c<e.length;c++){let u=e[c];if(K.ctypePunct(u)&&u!=X.Punctuation_Underscore||K.ctypeSpace(u))break;h.push(u)}return o.reverse().join("")+h.join("")}}});var Nn,Ga=Bt(()=>{"use strict";Nn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new Nn;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,s=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+s}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function Ws(n){for(let t=n.getCurrentIndex()+1;t<n.inputLength();t++){let e=n.getChar(t);if(!K.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var qa=Bt(()=>{"use strict";di()});function $i(n,t){for(n.getCurrentIndex();n.getCurrentIndex()<n.inputLength()&&(n.checkCurrentOffsets(),t&&n.pushChar(n.getCurrent()),n.getCurrent()!=X.NewLine);n.incrementIndex());}var Es=Bt(()=>{"use strict";on()});function Ji(n,t){for(n.getCurrentIndex();n.getCurrentIndex()<n.inputLength();n.incrementIndex())if(n.checkCurrentOffsets(),t&&n.pushChar(n.getCurrent()),n.getCurrent()==X.Punctuation_Asterisk&&n.getNext()==X.Punctuation_ForwardSlash){t&&n.pushChar(X.Punctuation_ForwardSlash),n.incrementIndex(),n.checkCurrentOffsets();break}}var vs=Bt(()=>{"use strict";on()});function Ys(n){let t=n.getCurrentIndex()+n.getSeedOffset(),e=0,s=0;for(n.incrementIndex(),n.getCurrentIndex();n.getCurrentIndex()<n.inputLength();n.incrementIndex()){if(n.checkCurrentOffsets(),ti(n.getCurrent())){is(n);continue}if(n.getCurrent()==X.Punctuation_ForwardSlash&&n.getNext()==X.Punctuation_Asterisk){Ji(n,!1);continue}if(n.getCurrent()==X.Punctuation_ForwardSlash&&n.getNext()==X.Punctuation_ForwardSlash){$i(n,!1);continue}if(n.getCurrent()==X.LeftParen){s+=1;continue}if(n.getCurrent()==X.RightParen){if(s>0){s-=1;continue}e=n.getCurrentIndex()+n.getSeedOffset()+1;break}if(n.getCurrent()==null)break}let o=n.getContentSubstring(t,e-t);return{start:t,end:e,content:o}}var Wa=Bt(()=>{"use strict";on();Un();Es();vs();Mn()});var No,tf=Bt(()=>{"use strict";Ve();di();on();Un();qa();Wa();Es();vs();Mn();No=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,s){let o=new Tt,h=this.getComponentOffset();o.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),o.directiveName=t.trim(),o.name=t.trim(),t.startsWith("end")?o.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(o.name="elseif");let c=this.document.positionFromOffset(h+e,h+e),u=this.document.positionFromOffset(h+s,h+s);if(o.startPosition=c,o.endPosition=u,o.namePosition={start:c,end:u},o.hasDirectiveParameters=!1,o.startPosition!=null&&o.endPosition!=null){let f=o.startPosition.index,T=o.endPosition.index-o.startPosition.index,k=f+T;o.sourceContent=this.document.getContentSubstring(f,T),o.offset={start:f,end:k,length:T}}return o}getComponentOffset(){var t,e,s;return((s=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?s:0)+3}makeDirectiveWithParameters(t,e,s,o){var k,B;let h=this.makeDirective(t,e,s),c=this.getComponentOffset();h.hasDirectiveParameters=!0,h.directiveParameters=o.content;let u=o.content.trim();u.startsWith("(")&&u.endsWith(")")&&(u=u.substring(1),u=u.substring(0,u.length-1),u=u.trim(),h.hasJsonParameters=u.startsWith("{")&&u.endsWith("}"));let f=this.document.positionFromOffset(o.start+c,o.start+c),T=this.document.positionFromOffset(o.end+c,o.end+c);if(h.startPosition=(B=(k=h.namePosition)==null?void 0:k.start)!=null?B:null,h.endPosition=T,h.directiveParametersPosition={start:f,end:T},h.startPosition!=null&&h.endPosition!=null){let y=h.startPosition.index,N=h.endPosition.index-h.startPosition.index,I=y+N;h.sourceContent=this.document.getContentSubstring(y,N),h.offset={start:y,end:I,length:N}}return h}prepare(t){return this.content=K.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,s="",o=0,h=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_Asterisk){Ji(this,!0);continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_ForwardSlash){$i(this,!0);continue}if(this.cur==X.NewLine){o=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}else if(this.next==null){this.currentContent.push(this.cur),o=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}let c=Ws(this);if(this.cur!=X.LeftParen&&c.didFind&&K.ctypePunct(c.char)&&c.char!=X.LeftParen&&c.char!=X.Punctuation_Minus){this.currentContent.push(this.cur),o=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}if(K.ctypeSpace(this.cur)){let u=Ws(this);if(u.didFind&&u.char==X.LeftParen){o=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[],this.currentIndex=u.index,this.checkCurrentOffsets();let f=Ys(this);h=this.makeDirectiveWithParameters(s,t,o,f);break}else{o=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}}else if(this.cur==X.LeftParen){o=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[];let u=Ys(this);h=this.makeDirectiveWithParameters(s,t,o,u);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return h}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(K.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),s=new li;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==X.RightBrace&&this.next==X.RightBrace){let o=this.currentIndex+1;s.startPosition=this.document.positionFromOffset(t+e,t+e),s.endPosition=this.document.positionFromOffset(o+e,o+e),s.withParser(this.document);let h=s.startPosition.index-5,c=s.endPosition.index-s.startPosition.index+3,u=h+c;s.sourceContent=this.content.substr(h,c),s.offset={start:h,end:u,length:c},s.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return s}parse(t){var f;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),s=!1,o=-1,h=-1,c=-1,u='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==X.LeftBrace&&this.next==X.LeftBrace){this.currentIndex+=2;let T=this.scanToEndOfBladeEcho(this.currentIndex);if(T!=null){let k=new ms;k.type=1,k.startPosition=T.startPosition,k.endPosition=T.endPosition,k.inlineEcho=T,k.type=3,t.hasParameters=!0,t.parameters.push(k),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==X.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=X.Punctuation_Equals){let T=this.scanToEndOfDirective();if(T!=null){let k=new ms;k.type=1,k.startPosition=T.startPosition,k.endPosition=T.endPosition,k.name=T.directiveName,k.directive=T,t.hasParameters=!0,t.parameters.push(k);continue}}if(this.hasFoundName){if(K.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let T=new ms,k=this.getComponentOffset();T.type=2,this.next==null&&!K.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),T.name=this.currentContent.join("");let B=this.currentIndex+k-T.name.length;T.startPosition=this.document.positionFromCursor(B,B),T.endPosition=this.document.positionFromCursor(this.currentIndex+k,this.currentIndex+k),T.namePosition={start:T.startPosition,end:T.endPosition},t.parameters.push(T),t.hasParameters=!0,this.currentContent=[];continue}continue}else s||(s=!0,o=this.currentIndex);if(this.cur==X.Punctuation_Equals&&ti(this.next)){u=this.next,h=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),c=this.currentIndex;let T=ji(this),k=new ms;k.withParser(e),k.name=this.currentContent.join(""),k.value=T.value;let B=t.relativeOffset(o+3),y=t.relativeOffset(h+3),N=t.relativeOffset(c+3),I=t.relativeOffset(T.endedOn+3);k.namePosition={start:e.positionFromOffset(B,B),end:e.positionFromOffset(y,y)},k.valuePosition={start:e.positionFromOffset(N,N),end:e.positionFromOffset(I,I)},k.terminatorStyle=u,k.wrappedValue=u+k.value+u,k.content=k.name+"="+k.wrappedValue,k.realName=k.name,k.realName.startsWith(":")&&(k.isExpression=!0,k.realName=k.realName.substring(1),k.realName.startsWith(":")&&(k.isExpression=!1,k.realName=k.realName.substring(1),k.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(k),this.currentContent=[],s=!1,o=-1,h=-1,c=-1,u='"';continue}}else if((K.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!K.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let T=0;T<t.parameters.length;T++){let k=t.parameters[T];if(k.type==3&&((f=k.inlineEcho)==null?void 0:f.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),s=new po,o=t.relativeOffset(this.nameStartsOn+3),h=t.relativeOffset(this.nameEndsOn+3);if(s.withParser(e),s.name=this.name,t.isClosingTag&&(s.name=t.innerContent.trim().substring(1)),s.name.includes(":")){let c=s.name.split(":");s.name=c[0],s.inlineName=c.slice(1).join(":")}return s.startPosition=e.positionFromOffset(o,o),s.endPosition=e.positionFromOffset(h,h),s}}});var bo,ef=Bt(()=>{"use strict";Ve();Ga();di();on();Un();Es();vs();Mn();bo=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let s=0;s<this.fragments.length;s++){let o=this.fragments[s];if(o.isClosingFragment&&!o.isSelfClosing&&o.name.toLowerCase()==e&&o.index>t.index)return o}return null}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,s=!1){let o=0,h=0;if(this.documentOffsets.has(t)){let u=this.documentOffsets.get(t);o=u.line,h=u.char}else if(this.documentOffsets.size==0)o=1,h=t+1;else{let u=null,f=null,T=null,k=null;for(let B of this.documentOffsets.keys()){if(B>=t){k!=null&&t>k?(u=T,f=k):(u=this.documentOffsets.get(B),f=B);break}T=this.documentOffsets.get(B),k=B}u==null&&(u=T,f=k),u!=null?(h=t-(f!=null?f:0),o=u.line,t<=(f!=null?f:0)?(o=u.line,h=t+1):o=u.line+1):this.lastDocumentOffsetKey!=null&&(o=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let c=new Nn;return c.index=e,c.offset=t,c.line=o+this.shiftLine,c.char=h,c}getFragments(){return this.fragments}getFragmentsBetween(t,e){let s=[];return this.fragments.forEach(o=>{var u,f,T,k;let h=(f=(u=o.startPosition)==null?void 0:u.index)!=null?f:0,c=(k=(T=o.endPosition)==null?void 0:T.index)!=null?k:0;h>t&&c<e&&s.push(o)}),s}getFragmentContaining(t){var e,s,o,h;for(let c=0;c<this.fragments.length;c++){let u=this.fragments[c];if(((s=(e=u.startPosition)==null?void 0:e.index)!=null?s:0)<t.index&&((h=(o=u.endPosition)==null?void 0:o.index)!=null?h:0)>t.index)return u}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=K.split(K.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],s=[];e.forEach(o=>{var c;let h=(c=o.index)!=null?c:0;for(let u=0;u<this.nodeIndex.length;u++){let f=this.nodeIndex[u];if(h>=f.start&&h<=f.end)return}s.push(h)}),this.fragmentStartIndex=s}setIndexRanges(t){return this.nodeIndex=t,this}fetchAt(t,e){return this.content.substr(t,e)}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}parse(t){if(this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let h=0;h<this.fragmentStartIndex.length;h++){let c=this.fragmentStartIndex[h];if(this.resetIntermediateState(),this.seedOffset=c,this.currentChunkOffset=c,this.parseIntermediateText(),this.isScript){let u=!1;for(let f=h+1;f<this.fragmentStartIndex.length;f++){let T=this.fragmentStartIndex[f];if(this.fetchAt(T,8).toLowerCase()=="<\/script"){h=f-1,this.isScript=!1,u=!0;break}}if(!u)break}}let s=0,o=0;return this.fragments.forEach(h=>{let c=h.name.toLowerCase();(c=="script"||c=="style")&&(h.embeddedIndex=o,this.embeddedIndexedFragments.set(o,h),o+=1),h.index=s,this.indexedFragments.set(s,h),s+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)&&is(this),this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_ForwardSlash){$i(this,!0);continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_Asterisk){Ji(this,!0);continue}if(this.cur==X.Punctuation_QuestionMark&&this.next==X.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],s=[],o=!1,h=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),K.ctypeSpace(this.cur)&&(o=!0),this.next==X.Punctuation_LessThan){let c=1;this.cur==X.Punctuation_ForwardSlash&&(c=2);let u=this.fetchAt(this.currentChunkOffset+c,5);if(u.toLowerCase()=="<?php"||u.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==X.Punctuation_LessThan||this.next==null&&this.cur!=X.Punctuation_GreaterThan)break;if(!o&&this.cur==X.Punctuation_LessThan&&this.next==X.Punctuation_ForwardSlash&&(h=!0),!o&&this.cur!=X.Punctuation_LessThan&&this.cur!=X.Punctuation_ForwardSlash&&this.cur!=X.Punctuation_GreaterThan&&s.push(this.cur),ti(this.cur)){let c=this.currentIndex;is(this);let u=new fo;u.startPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),u.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(u);continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_GreaterThan){let c=new hr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),c.parameters=e,c.isSelfClosing=!0,c.name=s.join(""),c.isClosingFragment=h,this.fragments.push(c),h?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1);break}if(this.cur==X.Punctuation_GreaterThan){let c=new hr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),c.parameters=e,c.name=s.join(""),c.isClosingFragment=h,this.fragments.push(c),h?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1),c.name.toLowerCase()=="script"&&c.isClosingFragment==!1&&(this.isScript=!0);break}}}}});var _r,Ya=Bt(()=>{"use strict";_r=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var Ao,Qa=Bt(()=>{"use strict";Ao=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function nf(){return Wb}var Wb,sf=Bt(()=>{"use strict";Ya();Qa();Wb={ignoreDirectives:[..._r,...Ao],directives:[],customIfs:[]}});var St,X,on=Bt(()=>{"use strict";gc();Hc();jc();Kc();$c();Jc();Xc();dr();Vn();Zc();Ma();Ha();Gs();Ve();Ga();di();xs();tf();ef();sf();Un();qa();Wa();Es();vs();Mn();St=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.parsingOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.phpValidator=null;this.unclosedRegionErrors=[Yt.TYPE_UNEXPECTED_END_OF_INPUT,Yt.TYPE_UNCLOSED_PHP_DIRECTIVE,Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_VERBATIM,Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_FOR_DIRECTIVE,Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new No(this),this.fragmentsParser=new bo,this.fragmentsAnalyzer=new vo(this,this.fragmentsParser),this.parserOptions=nf()}withPhpValidator(t){return this.phpValidator=t,this}getPhpValidator(){return this.phpValidator}withParserOptions(t){return this.parserOptions=t,this}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}isStartingPhp(){return this.cur==St.Punctuation_LessThan&&this.next==St.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==St.Punctuation_LessThan&&this.next==St.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!K.ctypeAlpha(this.next)?!1:this.cur==St.AtChar&&this.next!=null&&this.prev!=St.AtChar}isClosingComponent(){return this.cur==St.Punctuation_GreaterThan&&this.prev!=St.Punctuation_Minus&&this.prev!=St.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==St.Punctuation_LessThan&&this.next==St.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==St.Punctuation_Minus||this.peekRelative(3)==St.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==St.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==St.Punctuation_Minus||this.peekRelative(2)==St.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=St.AtChar)&&this.next==St.Punctuation_Exclamation&&this.cur==St.LeftBrace&&this.peek(2)==St.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=St.AtChar)&&this.next==St.LeftBrace&&this.cur==St.LeftBrace&&this.next==St.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}endsWithTld(t){return/\.[a-z]{2,63}$/i.test(t)}processInputText(t){var B;this.originalContent=t,this.content=K.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],s=e.length,o=this.seedStartLine,h=null,c=0,u=0;for(let y=0;y<s;y++){let N=e[y],I=(B=N.index)!=null?B:0,R=I;h!=null?R=I-h:R=R+1,this.documentOffsets.set(I,{char:R,line:o});let tt=0,rt=0;y==0?(rt=R-1,tt=0):(tt=u+1,rt=I),this.lineIndex.set(o,{char:R,line:o,startIndex:tt,endIndex:rt}),this.lastDocumentOffsetKey=I,this.maxLine=o,o+=1,h=I,u=rt,c=tt}this.maxLine+=1;let f=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],T=0,k=!1;return f.forEach(y=>{let N=y[0],I=this.content.indexOf(N,T),R=this.content.substr(I,10);if(R.startsWith("@@")||R.startsWith("@{{")){T=this.content.indexOf(N,T),k=!0;return}let tt=this.content.indexOf(N,T);if(k&&T==tt){T=tt;return}let rt=3,ht=!1,z=!1,Q=[],ft=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(q=>{Q.push(q.toLowerCase()),q.length>rt&&(rt=q.length)}),rt+=5,ht=!0),this.parserOptions.directives.length>0&&(rt=3,this.parserOptions.directives.forEach(q=>{ft.push(q.toLowerCase()),q.length>rt&&(rt=q.length)}),rt+=5,ht=!1,z=!0);let U=this.fetchAt(tt,rt);if(U.includes(".")){let q=U;U.includes(`
`)&&(q=K.breakByNewLine(q)[0]);let kt=Hs.fromText(q);if(kt.includes(".")&&this.endsWithTld(kt))return}if(U.startsWith("@{")==!1){let q=U.substring(0,1),kt=U.substring(1,2);if(q=="@"&&K.ctypeAlpha(kt))if(z){let st=this.breakPreFetch(U).toLowerCase();ft.includes(st)&&this.bladeStartIndex.push(tt)}else if(ht){let st=this.breakPreFetch(U).toLowerCase();Q.includes(st)||this.bladeStartIndex.push(tt)}else this.bladeStartIndex.push(tt);else q!="@"&&this.bladeStartIndex.push(tt)}this.bladeStartPositionIndex.set(tt,1),T=tt+2,k=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let o=K.replaceAllInString(K.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return o.startsWith("@")&&(o=o.substring(1)),o.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof Tt&&(this.lastNode.directiveName==At.Verbatim||this.lastNode.directiveName==At.Php))}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Yt.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Yt.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Yt.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Cn.findLeftNeighboringNextPunctuation(t.char,s,e)}punctuationLeftAtCursor(t,e,s=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),s)}punctuationRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Cn.findRightBeighboringNextPunctuation(t.char,s,e)}punctuationRightAtCursor(t,e,s=4){return this.punctuationRightAt(this.positionFromCursor(t,e),s)}wordRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let o=Cn.findRightNeighboringNextAlphaNumeric(t.char,s,e);return o==null?null:Cn.scanWordAt(o,s,e)}wordRightAtCursor(t,e,s=4){return this.wordRightAt(this.positionFromCursor(t,e),s)}wordLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let o=Cn.findLeftNeighboringNextAlphaNumeric(t.char,s,e);return o==null?null:Cn.scanWordAt(o,s,e)}wordLeftAtCursor(t,e,s=4){return this.wordLeftAt(this.positionFromCursor(t,e),s)}wordAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Cn.scanWordAt(t.char,s,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?K.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,s=4){return this.wordAt(this.positionFromCursor(t,e),s)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var h;let e=new Map,s=t-3,o=t+3;s<1&&(s=1),o>this.maxLine&&(o=this.maxLine);for(let c=s;c<=o;c++)e.set(c,(h=this.getLineText(c))!=null?h:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let s=this.lineIndex.get(t-1);if(s!=null){let o=s.endIndex+1;return{end:this.inputLen-1,start:o}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}positionFromCursor(t,e){if(t==this.maxLine){let o=this.lineIndex.get(t-1);if(o!=null){let h=o.endIndex+1,c=h+(e-1),u=new Nn;return u.offset=c,u.line=t,u.char=e,u.index=c,u}return null}let s=this.lineIndex.get(t);if(s!=null){let o=new Nn;return o.offset=s.startIndex+(e-1),o.line=s.line,o.char=e,o.index=s.startIndex+(e-1),o}return null}parse(t){if(je.customIfs.clear(),this.parserOptions.customIfs.forEach(u=>{je.customIfs.set(u,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,s=e-1;if(e==0&&!this.isVerbatim){let u=new ne;u.withParser(this),u.content=this.prepareLiteralContent(this.content),u.startPosition=this.positionFromOffset(0,0),u.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(u)}else for(let u=0;u<e;u+=1){let f=this.bladeStartIndex[u];if(this.seedOffset=f,u==0&&f>0&&!this.isVerbatim){let k=new ne;k.withParser(this),k.content=this.prepareLiteralContent(this.content.substr(0,f)),k.content.length>0&&(k.startPosition=this.positionFromOffset(0,0),k.endPosition=this.positionFromOffset(f,f-1),this.nodes.push(k))}if(f<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=f,this.parsingOffset=f,this.resetIntermediateState(),this.parseIntermediateText(f),this.isVerbatim){let k=!1;for(let B=u+1;B<this.bladeStartIndex.length;B++){let y=this.bladeStartIndex[B];if(this.fetchAt(y,12)=="@endverbatim"){u=B-1,this.isVerbatim=!1,k=!0;break}}if(k)continue}if(this.isPhpNode){let k=!1;for(let B=u+1;B<this.bladeStartIndex.length;B++){let y=this.bladeStartIndex[B];if(this.fetchAt(y,7)=="@endphp"){u=B-1,this.isPhpNode=!1,k=!0;break}}if(k)continue}if(this.lastNode instanceof mn||this.lastNode instanceof Ui){let k=-1;for(let B=u;B<this.bladeStartIndex.length;B++){let y=this.bladeStartIndex[B];if(y>this.lastBladeEndIndex){k=y;break}}if(k!=-1){let B=1;this.lastNode instanceof Ui&&(B=0);let y=this.lastBladeEndIndex+B,N=this.content.substr(this.lastBladeEndIndex+B,k-this.lastBladeEndIndex-B),I=k-1,R=new ne;R.withParser(this),R.startPosition=this.positionFromOffset(y,y),R.endPosition=this.positionFromOffset(I,I),R.content=N,this.nodes.push(R),this.lastNode=R,this.lastBladeEndIndex=I;continue}}this.lastNode instanceof an&&(f-=2);let T=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(T=!0):T=!0,T){if(u+1<e){let k=this.bladeStartIndex[u+1],B=1;this.lastNode instanceof Ui&&(B=0);let y=this.lastBladeEndIndex+B;if(k<y)if(this.lastBladeEndIndex>k)u+2<e&&(k=this.bladeStartIndex[u+2]);else continue;if(this.shouldSkipForward())for(let N=u;N<this.bladeStartIndex.length;N++){let I=this.bladeStartIndex[N];if(I>this.lastBladeEndIndex){k=I;break}}if(u+1==s&&k<=this.lastBladeEndIndex){if(this.isVerbatim)break;let N=this.currentChunkOffset,I=this.content.substr(y),R=new ne;R.withParser(this),R.content=this.prepareLiteralContent(I),R.content.length>0&&(R.startPosition=this.positionFromOffset(N,N),R.endPosition=this.positionFromOffset(k,k-1),this.nodes.push(R));break}else{let N=k-this.lastBladeEndIndex-1;if(N<0&&this.lastNode instanceof an){let tt=!0;for(let rt=u;rt<this.bladeStartIndex.length;rt++){let ht=this.bladeStartIndex[rt];if(ht>this.lastBladeEndIndex){k=ht,tt=!1;break}}if(tt){let rt=this.currentIndex+f;if(rt<this.inputLen&&!this.isVerbatim){let ht=new ne;ht.withParser(this),ht.content=this.prepareLiteralContent(this.content.substr(rt)),ht.content.length>0&&(ht.startPosition=this.positionFromOffset(rt,rt),ht.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(ht));break}}}if(N==0||this.isVerbatim)continue;let I=this.content.substr(y,N),R=new ne;R.withParser(this),R.content=this.prepareLiteralContent(I),R.content.length>0&&(R.startPosition=this.positionFromOffset(y,y),R.endPosition=this.positionFromOffset(k,k-1),this.nodes.push(R))}continue}if(u!==s&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(f,f).isBefore(this.lastNode.endPosition)){if(u+1<e){if(this.bladeStartIndex[u+1]<this.lastNode.endPosition.offset)continue}else if(u+1!=s)continue}if(u==s){let k=this.currentIndex+f;if(k<this.inputLen&&!this.isVerbatim){let B=new ne;B.withParser(this),B.content=this.prepareLiteralContent(this.content.substr(k)),B.content.length>0&&(B.startPosition=this.positionFromOffset(k,k),B.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(B));break}}}}let o=0;this.nodes.forEach(u=>{u.index=o,o+=1});let h=null;for(let u=0;u<this.nodes.length;u++){let f=this.nodes[u],T=null;u+1<this.nodes.length&&(T=this.nodes[u+1]),f.prevNode=h,f.nextNode=T,h=f}je.determineCandidates(this.nodes),this.nodes=To.rewrite(this.nodes);let c=new pr;return this.renderNodes=c.associate(this.nodes,this),yo.analyze(this.nodes),Co.analyze(this.nodes),this.nodes.forEach(u=>{if(u instanceof Tt){let f=u,T=f.directiveName.toLowerCase();if(f.isClosedBy!=null){let k=f.getImmediateChildren();for(let B=0;B<k.length;B++){let y=k[B];if(y instanceof Tt&&y!=f.isClosedBy&&y.isClosedBy!=null){f.containsChildStructures=!0;break}else if(y instanceof Si||y instanceof Ki||y instanceof zi){f.containsChildStructures=!0;break}}}T=="switch"&&f.isClosedBy==null||T=="endswitch"&&f.isOpenedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_PARSE_UNCLOSED_SWITCH,f,"Unclosed switch control structure",0)):T=="php"?f.hasDirectiveParameters==!1&&f.isClosedBy==null&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNCLOSED_PHP_DIRECTIVE,f,"Unclosed @php directive",0)):T=="endphp"&&f.isOpenedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,f,"Unpaired @endphp directive",0)):T=="verbatim"&&f.isClosedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_UNCLOSED_VERBATIM,f,"Unclosed @verbatim directive",0)):T=="endverbatim"&&f.isOpenedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,f,"Unpaired @endverbatim directive",0)):T=="for"&&f.isClosedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_UNCLOSED_FOR_DIRECTIVE,f,"Unclosed @for directive",0)):T=="for"&&f.isClosingDirective==!0&&f.isOpenedBy==null?f.pushError(we.makeSyntaxError(Yt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,f,"Unpaired @endfor directive",0)):T=="forelse"?(f.isClosedBy==null&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,f,"Unclosed @forelse directive",0)),f.findFirstDirectChildDirectiveOfType("empty")==null&&f.pushError(we.makeSyntaxError(Yt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,f,"@forelse missing @empty directive",1))):T=="endforelse"&&f.isOpenedBy==null&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,f,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(u=>{var f,T,k,B,y,N,I,R,tt,rt,ht,z;u instanceof Si?(u.fragment=(T=(f=u.constructedFrom)==null?void 0:f.fragment)!=null?T:null,u.fragmentPosition=(B=(k=u.constructedFrom)==null?void 0:k.fragmentPosition)!=null?B:3):u instanceof zi?(u.fragment=(N=(y=u.constructedFrom)==null?void 0:y.fragment)!=null?N:null,u.fragmentPosition=(R=(I=u.constructedFrom)==null?void 0:I.fragmentPosition)!=null?R:3):u instanceof Ki&&(u.fragment=(rt=(tt=u.constructedFrom)==null?void 0:tt.fragment)!=null?rt:null,u.fragmentPosition=(z=(ht=u.constructedFrom)==null?void 0:ht.fragmentPosition)!=null?z:3)}),Eo.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var s,o,h,c;e instanceof ne||t.push({start:(o=(s=e.startPosition)==null?void 0:s.index)!=null?o:0,end:(c=(h=e.endPosition)==null?void 0:h.index)!=null?c:0})}),t}createChildDocuments(t){t.forEach(e=>{var s,o,h,c,u,f,T,k;if(e instanceof Tt&&e.isClosedBy!=null){let B=e.isClosedBy,y=((o=(s=e.startPosition)==null?void 0:s.index)!=null?o:0)-1,N=((c=(h=B.endPosition)==null?void 0:h.index)!=null?c:0)-y;e.nodeContent=this.content.substr(y,N);let I=(f=(u=e.endPosition)==null?void 0:u.index)!=null?f:0,R=((k=(T=B.startPosition)==null?void 0:T.index)!=null?k:0)-1-I,tt=this.content.substr(I,R);e.childrenDocument=De.childFromText(tt,this,Mi(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}let t=Math.ceil(this.currentIndex/5);t>0&&(this.currentChunkOffset=this.parsingOffset+this.chunkSize*t),this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}parseIntermediateText(t){this.currentContent=[],this.chars=this.content.substring(t).split(""),this.charLen=this.chars.length;let e=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,e=!0;break}if(this.isStartingClosingComponentTag()){let s=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],e=!0;break}if(this.isStartingOpeningComponentTag()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingEscapedEcho()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(s),this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingBladeNodeStructure()){let s=this.peek(2),o=this.peek(3);if(s==St.Punctuation_Minus&&o==St.Punctuation_Minus){let h=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(h),this.currentContent=[],this.currentIndex+=4,e=!0;break}else if(s==St.LeftBrace){let h=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(h+1),this.currentContent=[],this.currentIndex+=3,e=!0;break}else{let h=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(h+1),this.currentContent=[],this.currentIndex+=2,e=!0;break}}}return e}peek(t){return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),ti(this.cur)&&is(this),this.cur==St.Punctuation_ForwardSlash&&this.next==St.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,$i(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==St.Punctuation_ForwardSlash&&this.next==St.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Ji(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==St.Punctuation_QuestionMark&&this.next==St.Punctuation_GreaterThan||this.next==null){let s=new Ui;e&&(s=new _o),s.withParser(this),s.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),s.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let o=s.startPosition.index,h=s.endPosition.index-s.startPosition.index+1;s.sourceContent=this.content.substr(o,h),this.nodes.push(s),this.lastNode=s;break}}}scanToEndOfComponentTag(t,e){let s=!1,o=!1,h=-1,c=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.NewLine&&!s&&(s=!0,h=this.currentIndex),K.ctypeSpace(this.cur)&&!o&&(o=!0,c=this.currentIndex),ti(this.cur)){this.shouldIgnoreStructures=!0,is(this),this.shouldIgnoreStructures=!1;continue}let f=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!f)&&(u=!0,h!=-1?(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2)):c!=-1&&(this.currentIndex=c-2,this.currentContent=this.currentContent.slice(0,c-2))),f||u){let T=new an;T.withParser(this),T.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),T.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let k=T.startPosition.index,B=T.endPosition.index-T.startPosition.index+1,y=k+B;T.sourceContent=this.content.substr(k,B),T.isClosingTag=e,T.isSelfClosing=this.prev==St.Punctuation_ForwardSlash,T.offset={start:k,end:y,length:B};let N=3;T.isSelfClosing&&(N+=1),T.innerContent=this.content.substr(T.startPosition.index+3,T.endPosition.index-T.startPosition.index-N),u&&T.pushError(we.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,T,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(T),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=T,this.nodes.push(T);break}}}scanToEndOfEscapedEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.NewLine&&!e&&(e=!0,o=this.currentIndex),K.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==St.Punctuation_Exclamation&&this.next==St.Punctuation_Exclamation&&this.peekRelative(2)==St.RightBrace||c){let u=this.currentIndex+2,f=new ns;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let T=f.startPosition.index,k=f.endPosition.index-f.startPosition.index+1,B=T+k;f.sourceContent=this.content.substr(T,k),f.offset={start:T,end:B,length:k},c&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var u,f,T,k,B,y,N,I,R;let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.NewLine&&!e&&(e=!0,o=this.currentIndex),K.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),this.next==null&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==St.Punctuation_Minus&&this.next==St.Punctuation_Minus||this.next==null){let tt=this.peekRelative(2),rt=this.peekRelative(3);if(tt==St.RightBrace&&rt==St.RightBrace||this.next==null){let ht=this.currentIndex+3,z=new mn;z.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),z.endPosition=this.positionFromOffset(ht+this.seedOffset,ht+this.seedOffset),z.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(ht-4+this.seedOffset,ht-4+this.seedOffset)},z.withParser(this);let Q=z.startPosition.index,ft=z.endPosition.index-z.startPosition.index+1,U=Q+ft;z.sourceContent=this.content.substr(Q,ft),z.offset={start:Q,end:U,length:ft},c&&z.pushError(we.makeSyntaxError(Yt.TYPE_UNCLOSED_COMMENT,z,"Unexpected end of input while parsing comment",0)),z.innerContent=this.content.substr((T=(f=(u=z.innerContentPosition)==null?void 0:u.start)==null?void 0:f.index)!=null?T:0,((y=(B=(k=z.innerContentPosition)==null?void 0:k.end)==null?void 0:B.index)!=null?y:0)-((R=(I=(N=z.innerContentPosition)==null?void 0:N.start)==null?void 0:I.index)!=null?R:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=z,this.nodes.push(z);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.NewLine&&!e&&(e=!0,o=this.currentIndex),K.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),ti(this.cur)){let u=this.cur;this.shouldIgnoreStructures=!0;let f=ji(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(u),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(u),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==St.RightBrace&&this.next==St.RightBrace&&this.peekRelative(2)==St.RightBrace||c){let u=this.currentIndex+1,f=new ss;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let T=f.startPosition.index-1,k=f.endPosition.index-f.startPosition.index+3,B=T+k;f.sourceContent=this.content.substr(T,k),f.offset={start:T,end:B,length:k},c&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.NewLine&&!e&&(e=!0,o=this.currentIndex),K.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),ti(this.cur)){let u=this.cur;this.shouldIgnoreStructures=!0;let f=ji(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(u),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(u),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==St.RightBrace&&this.next==St.RightBrace||c){let u=this.currentIndex+1,f=new li;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let T=f.startPosition.index-1,k=f.endPosition.index-f.startPosition.index+2,B=T+k;f.sourceContent=this.content.substr(T,k),f.offset={start:T,end:B,length:k},c&&f.pushError(we.makeSyntaxError(Yt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,s){let o=new Tt;if(o.withParser(this),t==At.Verbatim)this.isVerbatim=!0;else if(t==At.Php)this.isPhpNode=!0;else if((t==At.EndVerbatim||t==At.EndPhp)&&this.nodes[this.nodes.length-1]instanceof ne){let T=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof Tt){let k=this.nodes[this.nodes.length-1];(k.directiveName==At.Verbatim||k.directiveName==At.Php)&&(k.innerContent=T.content)}}o.directiveName=t.trim(),o.name=t.trim();let h=o.name.toLowerCase();h=="endcan"||h=="endcannot"||h=="endauth"||h=="endguest"||h=="endenv"||h=="endproduction"?(o.name="if",o.isClosingDirective=!0):t.startsWith("end")?o.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(o.name="elseif");let c=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),u=this.positionFromOffset(this.seedOffset+s,this.seedOffset+s);if(o.startPosition=c,o.endPosition=u,o.namePosition={start:c,end:u},o.hasDirectiveParameters=!1,o.startPosition!=null&&o.endPosition!=null){let f=o.startPosition.index-1,T=o.endPosition.index-o.startPosition.index+1,k=f+T;o.sourceContent=this.content.substr(f,T),o.offset={start:f,end:k,length:T}}return o}makeDirectiveWithParameters(t,e,s,o){var T,k;let h=this.makeDirective(t.trim(),e,s);this.isPhpNode&&t==At.Php&&(this.isPhpNode=!1),h.hasDirectiveParameters=!0,h.directiveParameters=o.content;let c=o.content.trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1),c=c.trim(),h.hasJsonParameters=c.startsWith("{")&&c.endsWith("}"));let u=this.positionFromOffset(o.start,o.start),f=this.positionFromOffset(o.end,o.end);if(h.startPosition=(k=(T=h.namePosition)==null?void 0:T.start)!=null?k:null,h.endPosition=f,h.directiveParametersPosition={start:u,end:f},h.startPosition!=null&&h.endPosition!=null){let B=h.startPosition.index-1,y=h.endPosition.index-h.startPosition.index+1,N=B+y;h.sourceContent=this.content.substr(B,y),h.offset={start:B,end:N,length:y}}return h}scanToEndOfDirective(){let t=this.currentIndex,e="",s=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==St.Punctuation_ForwardSlash&&this.next==St.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Ji(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==St.Punctuation_ForwardSlash&&this.next==St.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,$i(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==St.NewLine){s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let o=Ws(this);if(this.cur!=St.LeftParen&&o.didFind&&K.ctypePunct(o.char)&&o.char!=St.LeftParen&&o.char!=St.Punctuation_Minus){let h=0,c=!1;K.ctypeSpace(this.cur)?(h=1,c=!0):this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let u=this.makeDirective(e.trim(),t,s-h);this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-h,c&&(this.currentIndex-=1);break}if(K.ctypeSpace(this.cur)){let h=Ws(this);if(h.didFind&&h.char==St.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=h.index,this.checkCurrentOffsets();let c=Ys(this),u=this.makeDirectiveWithParameters(e.trim(),t,s,c);this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let c=this.makeDirective(e.trim(),t,s);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==St.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let h=Ys(this),c=this.makeDirectiveWithParameters(e.trim(),t,s,h);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(s=>{var o,h,c,u,f;if(s instanceof ne)e+=s.content;else if(s instanceof zi)e+=s.nodeContent;else if(s instanceof Ki)e+=s.nodeContent;else if(s instanceof Si)e+=s.nodeContent;else if(s instanceof Tt)if((s.name=="php"||s.name=="verbatim")&&s.isClosedBy!=null){if(s.documentContent.trim().length==0){let T=(f=s.getParser())==null?void 0:f.getText((h=(o=s.endPosition)==null?void 0:o.index)!=null?h:0,((u=(c=s.isClosedBy.startPosition)==null?void 0:c.index)!=null?u:0)-1);e+=s.sourceContent,e+=T}}else e+=s.sourceContent;else e+=s.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let s=[];return this.nodes.forEach(o=>{var h,c,u,f;((c=(h=o.startPosition)==null?void 0:h.offset)!=null?c:0)>t.offset&&((f=(u=o.endPosition)==null?void 0:u.offset)!=null?f:0)<e.offset&&s.push(o)}),s}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,s=!1){let o=0,h=0;if(this.documentOffsets.has(t)){let u=this.documentOffsets.get(t);o=u.line,h=u.char}else if(this.documentOffsets.size==0)o=1,h=t+1;else{let u=null,f=null,T=null,k=null;for(let B of this.documentOffsets.keys()){if(B>=t){k!=null&&t>k?(u=T,f=k):(u=this.documentOffsets.get(B),f=B);break}T=this.documentOffsets.get(B),k=B}u==null&&(u=T,f=k),u!=null?(h=t-(f!=null?f:0),o=u.line,t<=(f!=null?f:0)?(o=u.line,h=t+1):o=u.line+1):this.lastDocumentOffsetKey!=null&&(o=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let c=new Nn;return c.index=e,c.offset=t,c.line=o+this.shiftLine,c.char=h,c}},X=St;X.K_CHAR="char",X.K_LINE="line",X.NewLine=`
`,X.AtChar="@",X.Punctuation_Colon=":",X.Punctuation_QuestionMark="?",X.LeftParen="(",X.RightParen=")",X.LeftBrace="{",X.RightBrace="}",X.String_Terminator_DoubleQuote='"',X.String_Terminator_SingleQuote="'",X.Punctuation_LessThan="<",X.Punctuation_GreaterThan=">",X.Punctuation_Equals="=",X.Punctuation_Exclamation="!",X.LeftBracket="[",X.RightBracket="]",X.Punctuation_Comma=",",X.Punctuation_Minus="-",X.Punctuation_Asterisk="*",X.Punctuation_ForwardSlash="/",X.Punctuation_Underscore="_",X.String_EscapeCharacter="\\"});var ei,ja=Bt(()=>{"use strict";Ve();ei=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let o=e[s];if(!ei.isLiteralType(o)&&o.startPosition!=null&&o.startPosition.index>t.index)return o}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let s=null;for(let o=0;o<e.length;o++){let h=e[o];if(!ei.isLiteralType(h)&&h.startPosition!=null){if(h.startPosition.index>t.index)break;s=h}}return s}static findNodeAtPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let o=e[s];if(!ei.isLiteralType(o)&&o.startPosition!=null&&o.endPosition!=null&&t.index>=o.startPosition.index&&t.index<=o.endPosition.index)return o}return null}static isLiteralType(t){return t instanceof ne}static findNodesBeforePosition(t,e){let s=[];if(t==null)return s;for(let o=0;o<e.length;o++){let h=e[o];if(!ei.isLiteralType(h)&&h.startPosition!=null&&h.endPosition!=null){if(h.startPosition.index>t.index)break;s.push(h)}}return s}static findNodesAfterPosition(t,e){let s=[];if(t==null)return s;for(let o=0;o<e.length;o++){let h=e[o];ei.isLiteralType(h)||h.startPosition!=null&&h.startPosition.index>t.index&&s.push(h)}return s}}});var Io,rf=Bt(()=>{"use strict";ja();Io=class{constructor(t){this.doc=t}getNodeAt(t,e){return ei.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return ei.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return ei.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return ei.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return ei.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,s=4){return this.doc.getParser().wordLeftAtCursor(t,e,s)}wordRightAt(t,e,s=4){return this.doc.getParser().wordRightAtCursor(t,e,s)}wordAt(t,e,s=4){return this.doc.getParser().wordAtCursor(t,e,s)}punctuationLeftAt(t,e,s=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,s)}punctuationRightAt(t,e,s=4){return this.doc.getParser().punctuationRightAtCursor(t,e,s)}}});var So,of=Bt(()=>{"use strict";So=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(s=>{s.getErrors().forEach(o=>{t.includes(o.hash())==!1&&(t.push(o.hash()),e.push(o))})}),this.doc.getParser().getErrors().forEach(s=>{t.includes(s.hash())==!1&&(t.push(s.hash()),e.push(s))}),e}}});var Oo,af=Bt(()=>{"use strict";Ve();ja();Oo=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let s=0;s<e.length;s++){let o=e[s];if(o instanceof Tt&&o.directiveName==t)return o}return null}getNodeAt(t){return ei.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return ei.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return ei.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return ei.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return ei.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof mn&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof ne&&t.push(e)}),t}}});var Lo,Ke,Po=Bt(()=>{"use strict";Ve();on();Un();Es();vs();Mn();di();Lo=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return Lo.breakOperators.some(e=>t.includes(e))}parse(t){for(this.tokens=[],this.content=K.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),K.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ti(this.cur)){let e=this.cur,s=ji(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_ForwardSlash){$i(this,!0);continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_Asterisk){Ji(this,!0);continue}if(this.cur!=null)if(this.cur==="!"&&this.next!=="="){if(this.currentContent.length>0){let s=new ne;s.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(s)}let e=new ur;e.sourceContent=this.cur,this.tokens.push(e),this.currentContent=[];continue}else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new ne;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="",s=!1;return this.tokens.forEach(o=>{if(o instanceof ur){s=!0,e+=o.sourceContent+" ";return}o instanceof ne&&(s?e+=o.content.trimLeft():e+=o.content),s=!1}),e}},Ke=Lo;Ke.breakOperators=["!"],Ke.instance=new Lo});var Ka,ze,Do=Bt(()=>{"use strict";Ve();on();Un();Es();vs();Mn();di();Ka=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return t.includes("fn(")&&t.includes("=>")}parse(t){for(this.tokens=[],this.content=K.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),K.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(ti(this.cur)){let e=this.cur,s=ji(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_ForwardSlash){$i(this,!0);continue}if(this.cur==X.Punctuation_ForwardSlash&&this.next==X.Punctuation_Asterisk){Ji(this,!0);continue}if(this.cur!=null)if(this.cur==="f"&&this.next=="n")if(K.ctypePunct(this.prev)||K.ctypeSpace(this.prev)||this.prev==null){this.currentContent.push(this.cur),this.currentContent.push(this.next),this.currentContent.push(" "),this.currentIndex+=1;continue}else this.currentContent.push(this.cur);else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new ne;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="";return this.tokens.forEach(s=>{s instanceof ne&&(e+=s.content)}),e}},ze=Ka;ze.breakOperators=["!"],ze.instance=new Ka});var Qs,za=Bt(()=>{"use strict";Ve();di();on();Un();Mn();Qs=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[];this.keyValueTokens=0;this.elements=0}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getNumberOfElements(){return this.elements}getNumberOfKeyValuePairs(){return this.keyValueTokens}getIsAssoc(){return this.elements==this.keyValueTokens}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new Be;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=K.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!K.ctypeSpace(this.cur)){if(ti(this.cur)){let s=this.cur,o=ji(this);this.pushChar(s),this.currentContent=this.currentContent.concat(o.value.split("")),this.pushChar(s),this.currentIndex=o.endedOn;continue}if(this.cur==X.LeftBracket){this.checkCurrentContent(),this.tokens.push(new rs);continue}else if(this.cur==X.RightBracket)this.checkCurrentContent(),this.tokens.push(new cr);else if(this.cur==X.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new Vs),this.currentContent=[];else if(this.cur==X.Punctuation_Equals&&this.next==X.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new fr);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e==null||e.elements.filter(function(s){return!(s.value instanceof Vs)}).forEach(s=>{this.elements+=1,s.key!=null&&s.value!=null&&(this.keyValueTokens+=1)}),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,s)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=s==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof rs){let o=this.findEndOfArray(t.slice(e));return e+=o.length,o.shift(),o.pop(),this.createArray(o,!0)}return null}createArray(t,e){let s=new ks;this.createdArrays.push(s);for(let o=0;o<t.length;o++){let h=t[o],c=null;if(o+1<t.length&&(c=t[o+1]),c instanceof Vs||c==null){let u=new gs;u.value=h,s.elements.push(u),o+=1;continue}else if(c instanceof fr){let u=t[o+2];if(u instanceof rs){let f=this.findEndOfArray(t.slice(o+2)),T=new gs;o+=f.length+1,f.shift(),f.pop(),T.key=h,T.value=this.createArray(f,!1),s.elements.push(T);continue}else{let f=new gs;f.key=h,f.value=u,s.elements.push(f),o+=3;continue}}else if(h instanceof rs){let u=this.findEndOfArray(t.slice(o)),f=new gs;o+=u.length,u.shift(),u.pop(),f.value=this.createArray(u,!1);continue}}return s}findEndOfArray(t){let e=[],s=0;for(let o=0;o<t.length;o++){let h=t[o];if(e.push(h),h instanceof rs){s+=1;continue}else if(h instanceof cr){if(s-=1,s<=0)break;continue}}return e}}});var Ro,hf=Bt(()=>{"use strict";Ro=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var Gn,$a=Bt(()=>{"use strict";Ve();hf();Gn=class{static print(t,e,s){let o=new Ro(e,s);if(o.append("[").newLine(),t.elements.length>0){let h="";o.indent(),t.elements.forEach(c=>{t.maxKeyLength>0&&c.key!=null&&(h=""),c.key!=null?(o.append(c.key.sourceContent+h).append(" => "),c.value!=null&&(c.value instanceof ks?c.value.elements.length==0?o.append("[],"):o.append(Gn.print(c.value,e,s+1)):o.append(c.value.sourceContent))):c.value!=null&&(c.value instanceof ks?o.append(Gn.print(c.value,e,s+1)):o.append(c.value.sourceContent)),o.appendNoRepeat(",").newLine(),c.isLast||o.indent()})}return s>1&&o.outdent(),o.append("]"),o.getContents()}}});var mr,lf=Bt(()=>{"use strict";di();mr=class{static printComment(t,e,s){if(t.isMultiline()){let o=K.breakByNewLine(t.innerContent.trim()),h=[];o.forEach(f=>{h.push(" ".repeat(e+s)+f.trim())});let c=h.join(`
`),u=`{{--
`;return u+=c,u+=`
`+" ".repeat(s)+"--}}",u}return"{{-- "+t.innerContent.trim()+" --}}"}}});var cf=H((wo,uf)=>{(function(n,t){typeof wo=="object"&&typeof uf<"u"?t(wo,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((n=typeof globalThis<"u"?globalThis:n||self).prettierPlugins=n.prettierPlugins||{},n.prettierPlugins.php={}),n.prettier)})(wo,function(n,t){"use strict";function e(i){return i&&typeof i=="object"&&"default"in i?i:{default:i}}var s=e(t);function o(i,r){var a=Object.keys(i);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(i);r&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(i,d).enumerable})),a.push.apply(a,l)}return a}function h(i){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?o(Object(a),!0).forEach(function(l){f(i,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(l){Object.defineProperty(i,l,Object.getOwnPropertyDescriptor(a,l))})}return i}function c(){c=function(){return i};var i={},r=Object.prototype,a=r.hasOwnProperty,l=typeof Symbol=="function"?Symbol:{},d=l.iterator||"@@iterator",m=l.asyncIterator||"@@asyncIterator",v=l.toStringTag||"@@toStringTag";function _(nt,it,Vt){return Object.defineProperty(nt,it,{value:Vt,enumerable:!0,configurable:!0,writable:!0}),nt[it]}try{_({},"")}catch{_=function(it,Vt,Wt){return it[Vt]=Wt}}function A(nt,it,Vt,Wt){var Ot=it&&it.prototype instanceof wt?it:wt,Ce=Object.create(Ot.prototype),Le=new Re(Wt||[]);return Ce._invoke=function(qe,fi,re){var Me="suspendedStart";return function(Ai,Zn){if(Me==="executing")throw new Error("Generator is already running");if(Me==="completed"){if(Ai==="throw")throw Zn;return ci()}for(re.method=Ai,re.arg=Zn;;){var ts=re.delegate;if(ts){var sn=Te(ts,re);if(sn){if(sn===E)continue;return sn}}if(re.method==="next")re.sent=re._sent=re.arg;else if(re.method==="throw"){if(Me==="suspendedStart")throw Me="completed",re.arg;re.dispatchException(re.arg)}else re.method==="return"&&re.abrupt("return",re.arg);Me="executing";var Yi=b(qe,fi,re);if(Yi.type==="normal"){if(Me=re.done?"completed":"suspendedYield",Yi.arg===E)continue;return{value:Yi.arg,done:re.done}}Yi.type==="throw"&&(Me="completed",re.method="throw",re.arg=Yi.arg)}}}(nt,Vt,Le),Ce}function b(nt,it,Vt){try{return{type:"normal",arg:nt.call(it,Vt)}}catch(Wt){return{type:"throw",arg:Wt}}}i.wrap=A;var E={};function wt(){}function Rt(){}function le(){}var _e={};_(_e,d,function(){return this});var Ft=Object.getPrototypeOf,Ee=Ft&&Ft(Ft(nn([])));Ee&&Ee!==r&&a.call(Ee,d)&&(_e=Ee);var Jt=le.prototype=wt.prototype=Object.create(_e);function be(nt){["next","throw","return"].forEach(function(it){_(nt,it,function(Vt){return this._invoke(it,Vt)})})}function Ae(nt,it){function Vt(Ot,Ce,Le,qe){var fi=b(nt[Ot],nt,Ce);if(fi.type!=="throw"){var re=fi.arg,Me=re.value;return Me&&typeof Me=="object"&&a.call(Me,"__await")?it.resolve(Me.__await).then(function(Ai){Vt("next",Ai,Le,qe)},function(Ai){Vt("throw",Ai,Le,qe)}):it.resolve(Me).then(function(Ai){re.value=Ai,Le(re)},function(Ai){return Vt("throw",Ai,Le,qe)})}qe(fi.arg)}var Wt;this._invoke=function(Ot,Ce){function Le(){return new it(function(qe,fi){Vt(Ot,Ce,qe,fi)})}return Wt=Wt?Wt.then(Le,Le):Le()}}function Te(nt,it){var Vt=nt.iterator[it.method];if(Vt===void 0){if(it.delegate=null,it.method==="throw"){if(nt.iterator.return&&(it.method="return",it.arg=void 0,Te(nt,it),it.method==="throw"))return E;it.method="throw",it.arg=new TypeError("The iterator does not provide a 'throw' method")}return E}var Wt=b(Vt,nt.iterator,it.arg);if(Wt.type==="throw")return it.method="throw",it.arg=Wt.arg,it.delegate=null,E;var Ot=Wt.arg;return Ot?Ot.done?(it[nt.resultName]=Ot.value,it.next=nt.nextLoc,it.method!=="return"&&(it.method="next",it.arg=void 0),it.delegate=null,E):Ot:(it.method="throw",it.arg=new TypeError("iterator result is not an object"),it.delegate=null,E)}function Xt(nt){var it={tryLoc:nt[0]};1 in nt&&(it.catchLoc=nt[1]),2 in nt&&(it.finallyLoc=nt[2],it.afterLoc=nt[3]),this.tryEntries.push(it)}function ve(nt){var it=nt.completion||{};it.type="normal",delete it.arg,nt.completion=it}function Re(nt){this.tryEntries=[{tryLoc:"root"}],nt.forEach(Xt,this),this.reset(!0)}function nn(nt){if(nt){var it=nt[d];if(it)return it.call(nt);if(typeof nt.next=="function")return nt;if(!isNaN(nt.length)){var Vt=-1,Wt=function Ot(){for(;++Vt<nt.length;)if(a.call(nt,Vt))return Ot.value=nt[Vt],Ot.done=!1,Ot;return Ot.value=void 0,Ot.done=!0,Ot};return Wt.next=Wt}}return{next:ci}}function ci(){return{value:void 0,done:!0}}return Rt.prototype=le,_(Jt,"constructor",le),_(le,"constructor",Rt),Rt.displayName=_(le,v,"GeneratorFunction"),i.isGeneratorFunction=function(nt){var it=typeof nt=="function"&&nt.constructor;return!!it&&(it===Rt||(it.displayName||it.name)==="GeneratorFunction")},i.mark=function(nt){return Object.setPrototypeOf?Object.setPrototypeOf(nt,le):(nt.__proto__=le,_(nt,v,"GeneratorFunction")),nt.prototype=Object.create(Jt),nt},i.awrap=function(nt){return{__await:nt}},be(Ae.prototype),_(Ae.prototype,m,function(){return this}),i.AsyncIterator=Ae,i.async=function(nt,it,Vt,Wt,Ot){Ot===void 0&&(Ot=Promise);var Ce=new Ae(A(nt,it,Vt,Wt),Ot);return i.isGeneratorFunction(it)?Ce:Ce.next().then(function(Le){return Le.done?Le.value:Ce.next()})},be(Jt),_(Jt,v,"Generator"),_(Jt,d,function(){return this}),_(Jt,"toString",function(){return"[object Generator]"}),i.keys=function(nt){var it=[];for(var Vt in nt)it.push(Vt);return it.reverse(),function Wt(){for(;it.length;){var Ot=it.pop();if(Ot in nt)return Wt.value=Ot,Wt.done=!1,Wt}return Wt.done=!0,Wt}},i.values=nn,Re.prototype={constructor:Re,reset:function(nt){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(ve),!nt)for(var it in this)it.charAt(0)==="t"&&a.call(this,it)&&!isNaN(+it.slice(1))&&(this[it]=void 0)},stop:function(){this.done=!0;var nt=this.tryEntries[0].completion;if(nt.type==="throw")throw nt.arg;return this.rval},dispatchException:function(nt){if(this.done)throw nt;var it=this;function Vt(fi,re){return Ce.type="throw",Ce.arg=nt,it.next=fi,re&&(it.method="next",it.arg=void 0),!!re}for(var Wt=this.tryEntries.length-1;Wt>=0;--Wt){var Ot=this.tryEntries[Wt],Ce=Ot.completion;if(Ot.tryLoc==="root")return Vt("end");if(Ot.tryLoc<=this.prev){var Le=a.call(Ot,"catchLoc"),qe=a.call(Ot,"finallyLoc");if(Le&&qe){if(this.prev<Ot.catchLoc)return Vt(Ot.catchLoc,!0);if(this.prev<Ot.finallyLoc)return Vt(Ot.finallyLoc)}else if(Le){if(this.prev<Ot.catchLoc)return Vt(Ot.catchLoc,!0)}else{if(!qe)throw new Error("try statement without catch or finally");if(this.prev<Ot.finallyLoc)return Vt(Ot.finallyLoc)}}}},abrupt:function(nt,it){for(var Vt=this.tryEntries.length-1;Vt>=0;--Vt){var Wt=this.tryEntries[Vt];if(Wt.tryLoc<=this.prev&&a.call(Wt,"finallyLoc")&&this.prev<Wt.finallyLoc){var Ot=Wt;break}}Ot&&(nt==="break"||nt==="continue")&&Ot.tryLoc<=it&&it<=Ot.finallyLoc&&(Ot=null);var Ce=Ot?Ot.completion:{};return Ce.type=nt,Ce.arg=it,Ot?(this.method="next",this.next=Ot.finallyLoc,E):this.complete(Ce)},complete:function(nt,it){if(nt.type==="throw")throw nt.arg;return nt.type==="break"||nt.type==="continue"?this.next=nt.arg:nt.type==="return"?(this.rval=this.arg=nt.arg,this.method="return",this.next="end"):nt.type==="normal"&&it&&(this.next=it),E},finish:function(nt){for(var it=this.tryEntries.length-1;it>=0;--it){var Vt=this.tryEntries[it];if(Vt.finallyLoc===nt)return this.complete(Vt.completion,Vt.afterLoc),ve(Vt),E}},catch:function(nt){for(var it=this.tryEntries.length-1;it>=0;--it){var Vt=this.tryEntries[it];if(Vt.tryLoc===nt){var Wt=Vt.completion;if(Wt.type==="throw"){var Ot=Wt.arg;ve(Vt)}return Ot}}throw new Error("illegal catch attempt")},delegateYield:function(nt,it,Vt){return this.delegate={iterator:nn(nt),resultName:it,nextLoc:Vt},this.method==="next"&&(this.arg=void 0),E}},i}function u(i){return u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u(i)}function f(i,r,a){return r in i?Object.defineProperty(i,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[r]=a,i}function T(i,r){return function(a){if(Array.isArray(a))return a}(i)||function(a,l){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var m,v,_=[],A=!0,b=!1;try{for(d=d.call(a);!(A=(m=d.next()).done)&&(_.push(m.value),!l||_.length!==l);A=!0);}catch(E){b=!0,v=E}finally{try{A||d.return==null||d.return()}finally{if(b)throw v}}return _}}(i,r)||B(i,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function k(i){return function(r){if(Array.isArray(r))return y(r)}(i)||function(r){if(typeof Symbol<"u"&&r[Symbol.iterator]!=null||r["@@iterator"]!=null)return Array.from(r)}(i)||B(i)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function B(i,r){if(i){if(typeof i=="string")return y(i,r);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?y(i,r):void 0}}function y(i,r){(r==null||r>i.length)&&(r=i.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=i[a];return l}function N(i,r){var a=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!a){if(Array.isArray(i)||(a=B(i))||r&&i&&typeof i.length=="number"){a&&(i=a);var l=0,d=function(){};return{s:d,n:function(){return l>=i.length?{done:!0}:{done:!1,value:i[l++]}},e:function(A){throw A},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var m,v=!0,_=!1;return{s:function(){a=a.call(i)},n:function(){var A=a.next();return v=A.done,A},e:function(A){_=!0,m=A},f:function(){try{v||a.return==null||a.return()}finally{if(_)throw m}}}}var I={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){var i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){var r=this.input();if(!this.is_LABEL()&&r!=="\\"){r&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(i,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};I.attributeIndex,I.attributeListDepth,I.matchST_ATTRIBUTE;var R={T_COMMENT:function(){for(;this.offset<this.size;){var i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var i=this.input(),r=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(r=this.tok.T_DOC_COMMENT),i==="/")return r;this.unput(1)}for(;this.offset<this.size;)if((i=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return r}};R.T_COMMENT,R.T_DOC_COMMENT;var tt={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var i=this.input();if(i=="<"){if((i=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((i=this._input[this.offset+4])===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};tt.nextINITIAL,tt.matchINITIAL;var rt={consume_NUM:function(){var i=this.yytext[0],r=i===".";if(i==="0")if((i=this.input())==="x"||i==="X"){if((i=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if((i=this.input())!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else if(i==="o"||i==="O"){if((i=this.input())!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){var a=i;if((i=this.input())==="_"){if(a==="_"){this.unput(2);break}if(a==="."){this.unput(1);break}if(a==="e"||a==="E"){this.unput(2);break}}else{if(i==="."){if(r){this.unput(1);break}if(a==="_"){this.unput(2);break}r=!0;continue}if(i==="e"||i==="E"){if(a==="_"){this.unput(1);break}var l=2;if((i=this.input())!=="+"&&i!=="-"||(l=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?l:l-1);break}}if(!this.is_NUM()){i&&this.unput(1);break}}return r?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var i;this.offset<this.size;)if((i=this.input())!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){var i=this.input();if(!this.is_OCTAL()){i&&this.unput(1);break}}return this.tok.T_LNUMBER}};rt.consume_NUM,rt.consume_HNUM,rt.consume_LNUM,rt.consume_BNUM,rt.consume_ONUM;var ht={matchST_LOOKING_FOR_PROPERTY:function(){var i=this.input();if(i==="-"){if((i=this.input())===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(i=this.input())==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}};ht.matchST_LOOKING_FOR_PROPERTY,ht.matchST_LOOKING_FOR_VARNAME,ht.matchST_VAR_OFFSET;var z={matchST_IN_SCRIPTING:function(){var i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var r=this._input[this.offset];return r!==`
`&&r!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(i=this._input[this.offset])!==`
`&&i!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var i=this.input();if(i!==" "&&i!=="	"&&i!==`
`&&i!=="\r"){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}};z.matchST_IN_SCRIPTING,z.T_WHITESPACE;var Q=[`
`,"\r"],ft=[`
`,"\r",";"],U=ft.concat(["	"," ",",","]",")","/","=","!"]),q={T_CONSTANT_ENCAPSED_STRING:function(){for(var i;this.offset<this.size;)if((i=this.input())=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var r=this._input[this.offset-1];if(r==="'"||r==='"'?this.offset++:r=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var l=this._input.substring(a,this.offset-1);if((!r||r===this._input[this.offset-1])&&(r&&this.offset++,Q.includes(this._input[this.offset-1])))return this.heredoc_label.label=l,this.heredoc_label.length=l.length,this.heredoc_label.finished=!1,a=this.offset-i,this.offset=i,this.consume(a),r==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){for(var i;this.offset<this.size;)if((i=this.input())=="\\")this.input();else{if(i=='"')break;if(i=="$"){if((i=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if((i=this.input())=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var r=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(r=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-r),this.unput(this.yytext.length-r),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(i,r){var a=this._input[i-2];if(!Q.includes(a))return!1;var l=!1,d=!1,m=0,v=this._input[i-1];if(this.version>=703){for(;v==="	"||v===" ";)v===" "?l=!0:v==="	"&&(d=!0),v=this._input[i+m],m++;if(i+=m,Q.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){var _=this._input[i-1+this.heredoc_label.length];if((this.version>=703?U:ft).includes(_)){if(r){if(this.consume(m),l&&d)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=m,this.heredoc_label.indentation_uses_spaces=l,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var i=this.offset+1;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!Q.includes(this._input[i-1]))for(;!Q.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var i=this._input[this.offset-1];this.offset<this.size;)if(Q.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),Q.includes(i)||(i=this.input())),Q.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if((i=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}}else if(i==="{"){if((i=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var i=this.input();if(i==="$"){if((i=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else{if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(i==="$"){if((i=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}continue}if(i==="{"){if((i=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var i=this.input();if(i==="$"){if((i=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else{if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(i==="$"){if((i=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}i&&this.unput(1)}else if(i==="{"){if((i=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};q.T_CONSTANT_ENCAPSED_STRING,q.is_HEREDOC,q.ST_DOUBLE_QUOTES,q.isDOC_MATCH,q.prematch_ENDOFDOC,q.matchST_NOWDOC,q.matchST_HEREDOC,q.consume_VARIABLE,q.matchST_BACKQUOTE,q.matchST_DOUBLE_QUOTES;var kt={T_STRING:function(){var i=this.yytext.toLowerCase(),r=this.keywords[i];if(typeof r!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),r=this.tok.T_YIELD_FROM):r=this.tok.T_YIELD;else if(r=this.tok.T_STRING,i==="b"||i==="B"){var a=this.input();if(a==='"')return this.ST_DOUBLE_QUOTES();if(a==="'")return this.T_CONSTANT_ENCAPSED_STRING();a&&this.unput(1)}}if(r===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;for(var l=this.offset,d=this.input();d==" ";)d=this.input();var m=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)d+=this.input();var v=d.slice(0,-1).toLowerCase();m=v!=="extends"&&v!=="implements"}return this.unput(this.offset-l),m?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&r!==this.tok.T_YIELD_FROM){var _=this.input();if(_==="\\"){r=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),_=this.input()}while(_==="\\")}_&&this.unput(1)}return r},consume_TOKEN:function(){var i=this._input[this.offset-1],r=this.tokenTerminals[i];return r?r.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){var i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var r=this.yytext.length;this.consume_LABEL();var a=this.yytext.substring(r-1).toLowerCase(),l=this.castKeywords[a];if(typeof l=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return l}return this.unput(this.offset-i),"("},"=":function(){var i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};kt.T_STRING,kt.consume_TOKEN,kt.tokenTerminals;var st={is_NUM:function(){var i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){var i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){var i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){var i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){var i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){var i=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(i)!==-1},is_WHITESPACE:function(){var i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){var i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){var i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95},is_OCTAL:function(){var i=this._input.charCodeAt(this.offset-1);return i>47&&i<56||i===95}};st.is_NUM,st.is_NUM_START,st.is_LABEL,st.is_LABEL_START,st.consume_LABEL,st.is_TOKEN,st.is_WHITESPACE,st.is_TABSPACE,st.consume_TABSPACE,st.is_HEX,st.is_OCTAL;var vt=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};vt.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},vt.prototype.input=function(){var i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""},vt.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var r=0;r<this.yytext.length;r++){var a=this.yytext[r];a==="\r"?(a=this.yytext[++r],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,a!==`
`&&(a==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):a===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},vt.prototype.tryMatch=function(i){return i===this.ahead(i.length)},vt.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()},vt.prototype.ahead=function(i){var r=this._input.substring(this.offset,this.offset+i);return r[r.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(r+=`
`),r},vt.prototype.consume=function(i){for(var r=0;r<i;r++){var a=this._input[this.offset];if(!a)break;this.yytext+=a,this.offset++,a==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,r++),a===`
`||a==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},vt.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},vt.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this},vt.prototype.appendToken=function(i,r){return this.tokens.push([i,r]),this},vt.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i},vt.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this},vt.prototype.popState=function(){var i=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return i},vt.prototype.next=function(){var i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(u((i=this.tokens.shift())[1])==="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var r=i;r=typeof r=="number"?this.engine.tokens.values[r]:'"'+r+'"';var a=new Error(r+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(a.stack)}return i},[I,R,tt,rt,ht,z,q,kt,st].forEach(function(i){for(var r in i)vt.prototype[r]=i[r]});var Ut=vt,qt=function(i,r,a){this.line=i,this.column=r,this.offset=a},Mt={read_array:function(){var i=null,r=!1,a=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(r=!0,i="]");var l=[];return this.next().token!==i&&(l=this.read_array_pair_list(r)),this.expect(i),this.next(),a(r,l)},read_array_pair_list:function(i){var r=this;return this.read_list(function(){return r.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!(!i&&this.token===")"||i&&this.token==="]")){if(this.token===",")return this.node("noop")();var r=this.node("entry"),a=null,l=null,d=!1,m=!1;if(this.token==="&")this.next(),d=!0,l=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),m=!0,l=this.read_expr();else{var v=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),a=v,this.token==="&"?(this.next(),d=!0,l=this.read_variable(!0,!1)):l=this.read_expr()):l=v}return r(a,l,d,m)}}};Mt.read_array,Mt.read_array_pair_list,Mt.read_array_pair;var Nt={read_class_declaration_statement:function(i){var r=this.node("class"),a=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var l=this.node("identifier"),d=this.text();this.next(),l=l(d);var m=this.read_extends_from(),v=this.read_implements_list();this.expect("{");var _=r(l,m,v,this.next().read_class_body(!0,!1),a);return i&&(_.attrGroups=i),_},read_class_modifiers:function(){var i=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,i.final_or_abstract,i.readonly]},read_class_modifier:function(i){return this.token===this.tok.T_READ_ONLY?(this.next(),i.readonly=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),i.final_or_abstract=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),i.final_or_abstract=2,i=this.read_class_modifier(i)),i},read_class_body:function(i,r){for(var a=[],l=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE)if(r&&this.token===this.tok.T_CASE){var d=this.read_enum_case();this.expect(";")&&this.next(),a=a.concat(d)}else{this.token===this.tok.T_ATTRIBUTE&&(l=this.read_attr_list());var m=this.position(),v=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),v[0]=null,v[1]=0),this.token===this.tok.T_FUNCTION)a.push(this.read_function(!1,v,l,m)),l=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){var _=this.read_variable_list(v,l);l=[],this.expect(";"),this.next(),a=a.concat(_)}else this.error([this.tok.T_CONST].concat(k(i?[this.tok.T_VARIABLE]:[]),k(r?[this.tok.T_CASE]:[]),[this.tok.T_FUNCTION])),this.next();else{var A=this.read_constant_list(v,l);this.expect(";")&&this.next(),a=a.concat(A)}}else a=a.concat(this.read_trait_use_statement());else a.push(this.read_doc_comment());else a.push(this.read_comment());return this.expect("}"),this.next(),a},read_variable_list:function(i,r){var a=this.node("propertystatement"),l=this.read_list(function(){var d=this.node("property"),m=!1;this.token===this.tok.T_READ_ONLY&&(m=!0,this.next());var v=T(this.read_optional_type(),2),_=v[0],A=v[1];this.expect(this.tok.T_VARIABLE);var b=this.node("identifier"),E=this.text().substring(1);return this.next(),b=b(E),this.token===";"||this.token===","?d(b,null,m,_,A,r||[]):this.token==="="?d(b,this.next().read_expr(),m,_,A,r||[]):(this.expect([",",";","="]),d(b,null,_,A,r||[]))},",");return a(null,l,i)},read_constant_list:function(i,r){this.expect(this.tok.T_CONST)&&this.next();var a=this.node("classconstant"),l=this.read_list(function(){var d=this.node("constant"),m=null,v=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){m=this.node("identifier");var _=this.text();this.next(),m=m(_)}else this.expect("IDENTIFIER");return this.expect("=")&&(v=this.next().read_expr()),d(m,v)},",");return a(null,l,i,r||[])},read_member_flags:function(i){var r=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var a=0,l=0;do{switch(this.token){case this.tok.T_PUBLIC:a=0,l=0;break;case this.tok.T_PROTECTED:a=0,l=1;break;case this.tok.T_PRIVATE:a=0,l=2;break;case this.tok.T_STATIC:a=1,l=1;break;case this.tok.T_ABSTRACT:a=2,l=1;break;case this.tok.T_FINAL:a=2,l=2}i&&(a==0&&l==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),l=-1):a==2&&l==1&&(this.error(),l=-1)),r[a]!==-1?this.error():l!==-1&&(r[a]=l)}while(this.next().is("T_MEMBER_FLAGS"))}return r[1]==-1&&(r[1]=0),r[2]==-1&&(r[2]=0),r},read_optional_type:function(){var i=!1;this.token==="?"&&(i=!0,this.next());var r=this.read_types();if(i&&!r&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!r)return[!1,null];if(this.token==="|"){r=[r];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}r.push(a)}while(this.token==="|")}return[i,r]},read_interface_declaration_statement:function(i){var r=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),l=this.text();this.next(),a=a(l);var d=this.read_interface_extends_list();return this.expect("{"),r(a,d,this.next().read_interface_body(),i||[])},read_interface_body:function(){for(var i=[],r=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var a=this.position();r=this.read_attr_list();var l=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var d=this.read_constant_list(l,r);this.expect(";")&&this.next(),i=i.concat(d),r=[]}else if(this.token===this.tok.T_FUNCTION){var m=this.read_function_declaration(2,l,r,a);m.parseFlags(l),i.push(m),this.expect(";")&&this.next(),r=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else i.push(this.read_doc_comment());else i.push(this.read_comment());return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){var i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var r=this.node("identifier"),a=this.text();return this.next(),r=r(a),this.expect("{"),i(r,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){var i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var r=[this.read_namespace_name()],a=null;this.token===",";)r.push(this.next().read_namespace_name());if(this.token==="{"){for(a=[];this.next().token!==this.EOF&&this.token!=="}";)a.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(r,a)},read_trait_use_alias:function(){var i,r=this.node(),a=null;if(this.is("IDENTIFIER")){i=this.node("identifier");var l=this.text();this.next(),i=i(l)}else if(i=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){a=i,i=this.node("identifier");var d=this.text();this.next(),i=i(d)}else this.expect(this.tok.T_STRING);else i=i.name;if(this.token===this.tok.T_INSTEADOF)return r("traitprecedence",a,i,this.next().read_name_list());if(this.token===this.tok.T_AS){var m=null,v=null;if(this.next().is("T_MEMBER_FLAGS")&&(m=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){v=this.node("identifier");var _=this.text();this.next(),v=v(_)}else m===!1&&this.expect(this.tok.T_STRING);return r("traitalias",a,i,v,m)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),r("traitalias",a,i,null,null)}};Nt.read_class_declaration_statement,Nt.read_class_modifiers,Nt.read_class_modifier,Nt.read_class_body,Nt.read_variable_list,Nt.read_constant_list,Nt.read_member_flags,Nt.read_optional_type,Nt.read_interface_declaration_statement,Nt.read_interface_body,Nt.read_trait_declaration_statement,Nt.read_trait_use_statement,Nt.read_trait_use_alias;var se={read_comment:function(){var i=this.text(),r=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,l=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(r=r(i)).offset=a,this.prev=l,r},read_doc_comment:function(){var i=this.ast.prepare("commentblock",null,this),r=this.lexer.yylloc.first_offset,a=this.text(),l=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(i=i(a)).offset=r,this.prev=l,i}};se.read_comment,se.read_doc_comment;var Qt={read_expr:function(i){var r=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),r("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return r("bin","|",i,this.next().read_expr());if(this.token==="&")return r("bin","&",i,this.next().read_expr());if(this.token==="^")return r("bin","^",i,this.next().read_expr());if(this.token===".")return r("bin",".",i,this.next().read_expr());if(this.token==="+")return r("bin","+",i,this.next().read_expr());if(this.token==="-")return r("bin","-",i,this.next().read_expr());if(this.token==="*")return r("bin","*",i,this.next().read_expr());if(this.token==="/")return r("bin","/",i,this.next().read_expr());if(this.token==="%")return r("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return r("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return r("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return r("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return r("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return r("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return r("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return r("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return r("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return r("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return r("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return r("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return r("bin","!=",i,this.next().read_expr());if(this.token==="<")return r("bin","<",i,this.next().read_expr());if(this.token===">")return r("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return r("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return r("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return r("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=r("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return r("bin","??",i,this.next().read_expr());if(this.token==="?"){var a=null;return this.next().token!==":"&&(a=this.read_expr()),this.expect(":")&&this.next(),r("retif",i,a,this.read_expr())}return r.destroy(i),i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var i=null;switch(this.token){case this.tok.T_ISSET:i=this.node("isset"),this.next().expect("(")&&this.next();var r=this.read_isset_variables();this.expect(")")&&this.next(),i=i(r);break;case this.tok.T_EMPTY:i=this.node("empty"),this.next().expect("(")&&this.next();var a=this.read_expr();this.expect(")")&&this.next(),i=i(a);break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:i=this.node("eval"),this.next().expect("(")&&this.next();var l=this.read_expr();this.expect(")")&&this.next(),i=i(l);break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr())}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){var i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){var i,r,a=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(r=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(r);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var l=null,d=this.innerList;i=this.node("list"),d||(l=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var m=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var v=!1,_=0;_<m.length;_++)if(m[_]!==null&&m[_].kind!=="noop"){v=!0;break}return v||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),d?i(m,!1):(this.innerList=!1,this.expect("=")?l(i(m,!1),this.next().read_expr(),"="):i(m,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var A=this.lexer.yytext.toLowerCase()==="die";return i=this.node("exit"),this.next(),i(this.read_exit_expr(),A);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var b=null,E=null;return i=this.node("yield"),this.next().is("EXPR")&&(b=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(E=b,b=this.next().read_expr())),i(b,E);case this.tok.T_YIELD_FROM:return(i=this.node("yieldfrom"))(r=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,a);case this.tok.T_STATIC:var wt=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],a);this.lexer.tokens.push(wt),this.next()}if(this.is("VARIABLE")){i=this.node();var Rt=(r=this.read_variable(!1,!1)).kind==="identifier"||r.kind==="staticlookup"&&r.offset.kind==="identifier";switch(this.token){case"=":return Rt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,r):i("assign",r,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return Rt&&this.error("VARIABLE"),i("assign",r,this.next().read_expr(),"??=");case this.tok.T_INC:return Rt&&this.error("VARIABLE"),this.next(),i("post","+",r);case this.tok.T_DEC:return Rt&&this.error("VARIABLE"),this.next(),i("post","-",r);default:i.destroy(r)}}else{if(this.is("SCALAR")){if(i=this.node(),(r=this.read_scalar()).kind==="array"&&r.shortForm&&this.token==="="){var le=this.convertToList(r);return r.loc&&(le.loc=r.loc),i("assign",le,this.next().read_expr(),"=")}return i.destroy(r),this.handleDereferencable(r)}this.error("EXPR"),this.next()}return r},convertToList:function(i){var r=this,a=i.items.map(function(d){return d.value&&d.value.kind==="array"&&d.value.shortForm&&(d.value=r.convertToList(d.value)),d}),l=this.node("list")(a,!0);return i.loc&&(l.loc=i.loc),i.leadingComments&&(l.leadingComments=i.leadingComments),i.trailingComments&&(l.trailingComments=i.trailingComments),l},read_assignref:function(i,r){var a;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),a=this.read_new_expr()):a=this.read_variable(!1,!1),i("assignref",r,a)},read_inline_function:function(i,r){if(this.token===this.tok.T_FUNCTION){var a=this.read_function(!0,i,r);return a.attrGroups=r,a}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var l=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var d=this.is_reference();this.expect("(")&&this.next();var m=this.read_parameter_list();this.expect(")")&&this.next();var v=!1,_=null;this.token===":"&&(this.next().token==="?"&&(v=!0,this.next()),_=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var A=l(m,d,this.read_expr(),_,v,!!i);return A.attrGroups=r,A},read_match_expression:function(){var i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var r,a;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),a=this.read_match_arms(),this.expect("}")&&this.next(),i(r,a)},read_match_arms:function(){var i=this;return this.read_list(function(){return i.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute:function(){var i=this.text(),r=[];return this.next(),this.token==="("&&(r=this.read_argument_list()),this.node("attribute")(i,r)},read_attr_list:function(){var i=[];if(this.token===this.tok.T_ATTRIBUTE)do{var r=this.node("attrgroup")([]);for(this.next(),r.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&r.attrs.push(this.read_attribute());i.push(r),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){var i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var r=[];if(this.token==="("){this.next();var a=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(r=this.read_argument_list()),i(a,r)}var l=this.read_attr_list();if(this.token===this.tok.T_CLASS){var d=this.node("class");this.next().token==="("&&(r=this.read_argument_list());var m=this.read_extends_from(),v=this.read_implements_list(),_=null;this.expect("{")&&(_=this.next().read_class_body(!0,!1));var A=d(null,m,v,_,[0,0,0]);return A.attrGroups=l,i(A,r)}for(var b=this.read_new_class_name();this.token==="[";){var E=this.node("offsetlookup"),wt=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),b=E(b,wt)}return this.token==="("&&(r=this.read_argument_list()),i(b,r)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else{if(this.token!=="(")return i;i=this.node("call")(i,this.read_argument_list())}return i}};Qt.read_expr,Qt.read_expr_cast,Qt.read_isset_variable,Qt.read_isset_variables,Qt.read_internal_functions_in_yacc,Qt.read_optional_expr,Qt.read_exit_expr,Qt.read_expr_item,Qt.convertToList,Qt.read_assignref,Qt.read_inline_function,Qt.read_match_expression,Qt.read_match_arms,Qt.read_match_arm,Qt.read_match_arm_conds,Qt.read_attribute,Qt.read_attr_list,Qt.read_new_expr,Qt.read_new_class_name,Qt.handleDereferencable;var yt={read_enum_declaration_statement:function(i){var r=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),l=this.text();this.next(),a=a(l);var d=this.read_enum_value_type(),m=this.read_implements_list();this.expect("{");var v=r(a,d,m,this.next().read_class_body(!1,!0));return i&&(v.attrGroups=i),v},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);var i=this.node("enumcase"),r=this.node("identifier"),a=this.next().text();this.next(),r=r(a);var l=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(r,l)}};yt.read_enum_declaration_statement,yt.read_enum_value_type,yt.read_enum_case;var lt={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(i,r,a,l){var d=this.read_function_declaration(i?1:r?2:0,r&&r[1]===1,a||[],l);return r&&r[2]==1?(d.parseFlags(r),this.expect(";")&&this.next()):(this.expect("{")&&(d.body=this.read_code_block(!1),d.loc&&d.body.loc&&(d.loc.end=d.body.loc.end)),!i&&r&&d.parseFlags(r)),d},read_function_declaration:function(i,r,a,l){var d=this,m="function";i===1?m="closure":i===2&&(m="method");var v=this.node(m);this.expect(this.tok.T_FUNCTION)&&this.next();var _=this.is_reference(),A=!1,b=[],E=null,wt=!1;if(i!==1){var Rt=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(A=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(A=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(A=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(A=this.text()),this.next()),A=Rt(A)}this.expect("(")&&this.next();var le=this.read_parameter_list(A.name==="__construct");this.expect(")")&&this.next(),i===1&&(b=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(wt=!0,this.next()),E=this.read_types());var _e=function(Ft){return Ft.attrGroups=a||[],l&&Ft.loc&&(Ft.loc.start=l,Ft.loc.source&&(Ft.loc.source=d.lexer._input.substr(Ft.loc.start.offset,Ft.loc.end.offset-Ft.loc.start.offset))),Ft};return _e(i===1?v(le,_,b,E,wt,r):v(A,le,_,E,wt))},read_lexical_vars:function(){var i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){for(var r=[];this.token!=this.EOF;){if(r.push(i()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return r}return r},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var i=this.node("variable");this.expect(this.tok.T_VARIABLE);var r=this.text().substring(1);return this.next(),i(r,!1)},read_parameter_list:function(i){if(this.token!==")"){var r=!1;return this.read_list_with_dangling_comma(function(){var a=this.read_parameter(i);return a&&(r&&this.raiseError("Unexpected parameter after a variadic parameter"),a.variadic&&(r=!0)),a}.bind(this),",")}return[]},read_parameter:function(i){var r,a=this.node("parameter"),l=null,d=null,m=!1,v=!1,_=[];this.token===this.tok.T_ATTRIBUTE&&(_=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),v=!0):this.raiseError("readonly properties can be used only on class constructor"));var A=this.read_promoted();!v&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),v=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),m=!0),r=this.read_types(),m&&!r&&this.raiseError("Expecting a type definition combined with nullable operator");var b=this.is_reference(),E=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){l=this.node("identifier");var wt=this.text().substring(1);this.next(),l=l(wt)}this.token=="="&&(d=this.next().read_expr());var Rt=a(l,r,d,b,E,v,m,A);return _&&(Rt.attrGroups=_),Rt},read_types:function(){var i="unset",r="union",a="intersection",l=[],d=i,m=this.read_type();if(!m)return null;for(l.push(m);this.token==="|"||this.version>=801&&this.token==="&";){var v=this.peek();if(v===this.tok.T_ELLIPSIS||v===this.tok.T_VARIABLE)break;d===i?d=this.token==="|"?r:a:(d===r&&this.token!=="|"||d===a&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),l.push(this.read_type())}return l.length===1?l[0]:d===a?this.node("intersectiontype")(l):this.node("uniontype")(l)},read_promoted:function(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){var i=!1;return this.read_function_list(function(){var r=this.read_argument();if(r){var a=r.kind==="variadic";i&&!a&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),a&&(i=!0)}return r}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){var i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var r=this.text();return this.next(),i("typereference",r.toLowerCase(),r)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var a=this.text(),l=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(a.toLowerCase())>-1?i("typereference",a.toLowerCase(),a):(this.lexer.tokens.push(l),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}};lt.is_reference,lt.is_variadic,lt.read_function,lt.read_function_declaration,lt.read_lexical_vars,lt.read_list_with_dangling_comma,lt.read_lexical_var_list,lt.read_lexical_var,lt.read_parameter_list,lt.read_parameter,lt.read_types,lt.read_promoted,lt.read_argument_list,lt.read_non_empty_argument_list,lt.read_argument,lt.read_type;var ce={read_if:function(){var i=this.node("if"),r=this.next().read_if_expr(),a=null,l=null,d=!1;if(this.token===":"){d=!0,this.next(),a=this.node("block");for(var m=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){l=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){l=this.read_else_short();break}m.push(this.read_inner_statement())}a=a(null,m),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else a=this.read_statement(),this.token===this.tok.T_ELSEIF?l=this.read_if():this.token===this.tok.T_ELSE&&(l=this.next().read_statement());return i(r,a,l,d)},read_if_expr:function(){this.expect("(")&&this.next();var i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){var i=null,r=this.node("if"),a=this.next().read_if_expr();this.expect(":")&&this.next();for(var l=this.node("block"),d=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}d.push(this.read_inner_statement())}return r(a,l(null,d),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var i=this.node("block"),r=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)r.push(this.read_inner_statement());return i(null,r)}};ce.read_if,ce.read_if_expr,ce.read_elseif_short,ce.read_else_short;var It={read_while:function(){var i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var r,a=null,l=!1;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(l=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),i(r,a,l)},read_do:function(){var i=this.node("do");this.expect(this.tok.T_DO)&&this.next();var r,a=null;return r=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),a=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(a,r)},read_for:function(){var i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var r=[],a=[],l=[],d=null,m=!1;return this.expect("(")&&this.next(),this.token!==";"?(r=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(l=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(m=!0,d=this.read_short_form(this.tok.T_ENDFOR)):d=this.read_statement(),i(r,a,l,d,m)},read_foreach:function(){var i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var r,a=null,l=null,d=null,m=!1;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),l=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=l,l=this.next().read_foreach_variable())),a&&a.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(m=!0,d=this.read_short_form(this.tok.T_ENDFOREACH)):d=this.read_statement(),i(r,a,l,d,m)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var i=this.token==="[",r=this.node("list");this.next(),!i&&this.expect("(")&&this.next();var a=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),r(a,i)}return this.read_variable(!1,!1)}};It.read_while,It.read_do,It.read_for,It.read_foreach,It.read_foreach_variable;var oe={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};oe.read_start;var de={read_namespace:function(){var i,r,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),r=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=r,this.token===";"?(this.currentNamespace=r,i=this.next().read_top_statements(),this.expect(this.EOF),a(r.name,i,!1)):this.token==="{"?(this.currentNamespace=r,i=this.next().read_top_statements(),this.expect("}")&&this.next(),i.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&i.push(this.node("noop")()),a(r.name,i,!0)):(this.error(["{",";"]),this.currentNamespace=r,i=this.read_top_statements(),this.expect(this.EOF),a(r,i,!1))},read_namespace_name:function(i){var r,a=this.node(),l=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:r=this.ast.name.RELATIVE_NAME,l=l.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:r=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:r=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(r=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return a("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(l.toLowerCase()==="parent")return a("parentreference",l);if(l.toLowerCase()==="self")return a("selfreference",l)}return a("name",l,r)},read_use_statement:function(){var i=this.node("usegroup"),r=[],a=null;this.expect(this.tok.T_USE)&&this.next();var l=this.read_use_type();return r.push(this.read_use_declaration(!1)),this.token===","?r=r.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(a=r[0].name,r=this.next().read_use_declarations(l===null),this.expect("}")&&this.next()),i=i(a,l,r),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){var r=this.node("useitem"),a=null;i&&(a=this.read_use_type());var l=this.read_namespace_name(),d=this.read_use_alias();return r(l.name,d,a)},read_use_declarations:function(i){for(var r=[this.read_use_declaration(i)];this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;r.push(this.read_use_declaration(i))}return r},read_use_alias:function(){var i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var r=this.node("identifier"),a=this.text();this.next(),i=r(a)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};de.read_namespace,de.read_namespace_name,de.read_use_statement,de.read_class_name_reference,de.read_use_declaration,de.read_use_declarations,de.read_use_alias,de.read_use_type;var O={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},P={resolve_special_chars:function(i,r){return r?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(a,l,d){return O[l]?O[l]:l[0]==="x"||l[0]==="X"?String.fromCodePoint(parseInt(l.substr(1),16)):l[0]==="u"?String.fromCodePoint(parseInt(d,16)):String.fromCodePoint(parseInt(l,8))}):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,r,a,l){if(r===0)return i;this.check_heredoc_indentation_level(i,r,a,l);var d=a?" ":"	",m=new RegExp("\\n".concat(d,"{").concat(r,"}"),"g"),v=new RegExp("^".concat(d,"{").concat(r,"}"));return l&&(i=i.replace(v,"")),i.replace(m,`
`)},check_heredoc_indentation_level:function(i,r,a,l){var d=i.length,m=0,v=0,_=!0,A=a?" ":"	",b=!1;if(!l){if((m=i.indexOf(`
`))===-1)return;m++}for(;m<d;)_?i[m]===A?v++:b=!0:_=!1,i[m]!==`
`&&b&&v<r?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(r,")")):b=!1,i[m]===`
`&&(_=!0,v=0),m++},read_dereferencable_scalar:function(){var i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var r=this.node("string"),a=this.text(),l=0;a[0]!=="b"&&a[0]!=="B"||(l=1);var d=a[l]==='"';this.next(),r=r(d,this.resolve_special_chars(a.substring(l+1,a.length-1),d),l===1,a),i=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(r):r;break;case this.tok.T_ARRAY:case"[":i=this.read_array()}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var i,r;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var a=this.node("number");return i=this.text(),this.next(),a(i,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var l=this.lexer.yylloc.first_offset;r=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));var d=i[i.length-1];d===`
`?i=i[i.length-2]==="\r"?i.substring(0,i.length-2):i.substring(0,i.length-1):d==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var m=this.lexer._input.substring(l,this.lexer.yylloc.first_offset);return r=r(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),m,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,r}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var v=this.error("SCALAR");return this.next(),v}},read_dereferencable:function(i){var r,a,l=this.node("offsetlookup");return this.token==="["?(a=this.next().read_expr(),this.expect("]")&&this.next(),r=l(i,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(r=l(i,a=this.read_encapsed_string_item(!1))),r},read_encapsed_string_item:function(i){var r,a,l,d=this.node("encapsedpart"),m=null,v=!1,_=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var A=this.text();this.next(),_=_("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(A,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):A,!1,A)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(m="simple",v=!0,l=null,this.next().token===this.tok.T_STRING_VARNAME){l=this.node("variable");var b=this.text();this.next(),_.destroy(),this.token==="["?(l=l(b,!1),a=this.node("offsetlookup"),r=this.next().read_expr(),this.expect("]")&&this.next(),_=a(l,r)):_=l(b,!1)}else _=_("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)m="complex",_.destroy(),_=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(m="simple",_.destroy(),_=this.read_simple_variable(),this.token==="["&&(a=this.node("offsetlookup"),r=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),_=a(_,r)),this.token===this.tok.T_OBJECT_OPERATOR){a=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var E=this.node("identifier");l=this.text(),this.next(),_=a(_,E(l))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var wt=this.text();this.next(),_.destroy(),_=_("string",!1,wt,!1,wt)}return this.lexer.heredoc_label.first_encaps_node=!1,d(_,m,v)},read_encapsed_string:function(i){var r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=this.lexer.yylloc.first_offset,l=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(r?1:0),m=[],v=null;for(v=i==="`"?this.ast.encapsed.TYPE_SHELL:i==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)m.push(this.read_encapsed_string_item(!0));if(m.length>0&&m[m.length-1].kind==="encapsedpart"&&m[m.length-1].expression.kind==="string"){var _=m[m.length-1].expression,A=_.value[_.value.length-1];A===`
`?_.value[_.value.length-2]==="\r"?_.value=_.value.substring(0,_.value.length-2):_.value=_.value.substring(0,_.value.length-1):A==="\r"&&(_.value=_.value.substring(0,_.value.length-1))}this.expect(i)&&this.next();var b=this.lexer._input.substring(v==="heredoc"?a:d-1,this.lexer.yylloc.first_offset);return l=l(m,b,v),i===this.tok.T_END_HEREDOC&&(l.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),l},get_magic_constant:function(){var i=this.node("magic"),r=this.text();return this.next(),i(r.toUpperCase(),r)}};P.resolve_special_chars,P.remove_heredoc_leading_whitespace_chars,P.check_heredoc_indentation_level,P.read_dereferencable_scalar,P.read_scalar,P.read_dereferencable,P.read_encapsed_string_item,P.read_encapsed_string,P.get_magic_constant;var J={read_top_statements:function(){for(var i=[];this.token!==this.EOF&&this.token!=="}";){var r=this.read_top_statement();r&&(Array.isArray(r)?i=i.concat(r):i.push(r))}return i},read_top_statement:function(){var i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var r=this.node("constantstatement"),a=this.next().read_const_list();return this.expectEndOfStatement(),r(null,a);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var l=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,l(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var i=[];this.token!=this.EOF&&this.token!=="}";){var r=this.read_inner_statement();r&&(Array.isArray(r)?i=i.concat(r):i.push(r))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var i=this.node("constant"),r=this.node("identifier"),a=this.text();return this.next(),r=r(a),this.expect("=")?i(r,this.next().read_expr()):i(r,null)},",",!1)},read_declare_list:function(){for(var i=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var r=this.node("declaredirective"),a=this.node("identifier"),l=this.text();this.next(),a=a(l);var d=null;if(this.expect("=")&&(d=this.next().read_expr()),i.push(r(a,d)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){var i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var r=this.read_function(!1,!1);return r.attrGroups=i,r;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var a=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),a=a(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),a;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var i=this.node("return");this.next();var r=this.read_optional_expr(";");return this.expectEndOfStatement(),i(r);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var a=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var l=this.read_optional_expr(";");return this.expectEndOfStatement(),a(l);case this.tok.T_GLOBAL:var d=this.node("global"),m=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),d(m);case this.tok.T_STATIC:var v=[this.token,this.lexer.getState()],_=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(v);var A=this.next().read_expr();return this.expectEndOfStatement(A),_("expressionstatement",A)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var b=this.read_variable_declarations();return this.expectEndOfStatement(),_("static",b);case this.tok.T_ECHO:var E=this.node("echo"),wt=this.text(),Rt=wt==="<?="||wt==="<%=",le=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),E(le,Rt);case this.tok.T_INLINE_HTML:var _e=this.text(),Ft=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,Ee=Ft==="\r"||Ft===`
`;Ee&&Ft===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(Ft=`\r
`);var Jt=this.node("inline");return this.next(),Jt(_e,Ee?Ft+_e:_e);case this.tok.T_UNSET:var be=this.node("unset");this.next().expect("(")&&this.next();var Ae=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),be(Ae);case this.tok.T_DECLARE:var Te,Xt=this.node("declare"),ve=[];this.next().expect("(")&&this.next();var Re=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)ve.push(this.read_top_statement());ve.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&ve.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),Te=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)ve.push(this.read_top_statement());ve.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&ve.push(this.node("noop")()),this.expect("}")&&this.next(),Te=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),Te=this.ast.declare.MODE_NONE;return Xt(Re,ve,Te);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var nn=this.node("throw"),ci=this.next().read_expr();return this.expectEndOfStatement(),nn(ci);case";":return this.next(),null;case this.tok.T_STRING:var nt=this.node(),it=[this.token,this.lexer.getState()],Vt=this.text(),Wt=this.node("identifier");if(this.next().token===":")return Wt=Wt(Vt),this.next(),nt("label",Wt);Wt.destroy(),nt.destroy(),this.lexer.tokens.push(it);var Ot=this.node("expressionstatement"),Ce=this.next().read_expr();return this.expectEndOfStatement(Ce),Ot(Ce);case this.tok.T_GOTO:var Le=this.node("goto"),qe=null;if(this.next().expect(this.tok.T_STRING)){qe=this.node("identifier");var fi=this.text();this.next(),qe=qe(fi),this.expectEndOfStatement()}return Le(qe);default:var re=this.node("expressionstatement"),Me=this.read_expr();return this.expectEndOfStatement(Me),re(Me)}},read_code_block:function(i){var r=this.node("block");this.expect("{")&&this.next();var a=i?this.read_top_statements():this.read_inner_statements();return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect("}")&&this.next(),r(null,a)}};J.read_top_statements,J.read_top_statement,J.read_inner_statements,J.read_const_list,J.read_declare_list,J.read_inner_statement,J.read_statement,J.read_code_block;var pt={read_switch:function(){var i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var r=this.read_expr();this.expect(")")&&this.next();var a=this.token===":";return i(r,this.read_switch_case_list(),a)},read_switch_case_list:function(){var i=null,r=this.node("block"),a=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)a.push(this.read_case_list(i));return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),r(null,a)},read_case_list:function(i){var r=this.node("case"),a=null;this.token===this.tok.T_CASE?a=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var l=this.node("block"),d=[];this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)d.push(this.read_inner_statement());return r(a,l(null,d))}};pt.read_switch,pt.read_switch_case_list,pt.read_case_list;var Ht={read_try:function(){this.expect(this.tok.T_TRY);for(var i=this.node("try"),r=null,a=[],l=this.next().read_statement();this.token===this.tok.T_CATCH;){var d=this.node("catch");this.next().expect("(")&&this.next();var m=this.read_list(this.read_namespace_name,"|",!1),v=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(v=this.read_variable(!0,!1)),this.expect(")"),a.push(d(this.next().read_statement(),m,v))}return this.token===this.tok.T_FINALLY&&(r=this.next().read_statement()),i(l,a,r)}};Ht.read_try;var Z={read_short_form:function(i){var r=this.node("block"),a=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)a.push(this.read_inner_statement());return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),r(null,a)},read_function_list:function(i,r){var a=[];do{if(this.token==r&&this.version>=703&&a.length>0){a.push(this.node("noop")());break}if(a.push(i.apply(this,[])),this.token!=r||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return a},read_list:function(i,r,a){var l=[];if(this.token==r&&(a&&l.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{var d=i.apply(this,[]);if(d&&l.push(d),this.token!=r)break}while(this.next().token!=this.EOF);else{if(!this.expect(i))return[];for(l.push(this.text());this.next().token!=this.EOF&&this.token==r&&this.next().token==i;)l.push(this.text())}return l},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){var r=this.node("byref");this.next(),r=r(null);var a=i();return a&&(this.ast.swapLocations(a,r,a,this),a.byref=!0),a},read_variable_declarations:function(){return this.read_list(function(){var i=this.node("staticvariable"),r=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var a=this.text().substring(1);this.next(),r=r(a,!1)}else r=r("#ERR",!1);return this.token==="="?i(r,this.next().read_expr()):r},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};Z.read_short_form,Z.read_function_list,Z.read_list,Z.read_name_list,Z.read_byref,Z.read_variable_declarations,Z.read_extends_from,Z.read_interface_extends_list,Z.read_implements_list;var F={read_variable:function(i,r){var a;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,r));if(this.is([this.tok.T_VARIABLE,"$"]))a=this.read_reference_variable(r);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){a=this.node();var l=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(l.kind)===-1){var d=l.name.toLowerCase();d==="true"?a=l.destroy(a("boolean",!0,l.name)):d==="false"?a=l.destroy(a("boolean",!1,l.name)):d==="null"?a=l.destroy(a("nullkeyword",l.name)):(a.destroy(l),a=l)}else a.destroy(l),a=l}else if(this.token===this.tok.T_STATIC){a=this.node("staticreference");var m=this.text();this.next(),a=a(m)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(a=this.read_static_getter(a,r)),this.recursive_variable_chain_scan(a,i,r)},read_static_getter:function(i,r){var a,l,d=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?a=this.read_reference_variable(r):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(a=this.node("identifier"),l=this.text(),this.next(),a=a(l)):this.token==="{"?(a=this.node("literal"),l=this.next().read_expr(),this.expect("}")&&this.next(),a=a("literal",l,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),a=this.node("identifier"),l=this.text(),this.next(),a=a(l)),d(i,a)},read_what:function(){var i=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=null,a=null;switch(this.next().token){case this.tok.T_STRING:r=this.node("identifier"),a=this.text(),this.next(),r=r(a),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:r=this.node("variable"),a=this.text().substring(1),this.next(),r=r(a,!1);break;case"$":r=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(a=this.next().read_expr(),this.expect("}")&&this.next(),r=r("variable",a,!0)):r=r("variable",a=this.read_expr(),!1);break;case"{":r=this.node("encapsedpart"),a=this.next().read_expr(),this.expect("}")&&this.next(),r=r(a,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),r=this.node("identifier"),a=this.text(),this.next(),r=r(a)}return r},recursive_variable_chain_scan:function(i,r,a){var l,d;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(r)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":var m=this.token==="[";l=this.node("offsetlookup"),this.next(),d=!1,a?(d=this.read_encaps_var_offset(),this.expect(m?"]":"}")&&this.next()):(m?this.token!=="]":this.token!=="}")?(d=this.read_expr(),this.expect(m?"]":"}")&&this.next()):this.next(),i=l(i,d);break;case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),i=(l=this.node("staticlookup"))(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:i=(l=this.node("propertylookup"))(i,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:i=(l=this.node("nullsafepropertylookup"))(i,this.read_what());break;default:break t}return i},read_encaps_var_offset:function(){var i=this.node();if(this.token===this.tok.T_STRING){var r=this.text();this.next(),i=i("identifier",r)}else if(this.token===this.tok.T_NUM_STRING){var a=this.text();this.next(),i=i("number",a,null)}else if(this.token==="-"){this.next();var l=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",l,null)}else if(this.token===this.tok.T_VARIABLE){var d=this.text().substring(1);this.next(),i=i("variable",d,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var m=this.text();this.next(),i=i("identifier",m)}return i},read_reference_variable:function(i){for(var r,a=this.read_simple_variable();this.token!=this.EOF;){var l=this.node();if(this.token!="{"||i){l.destroy();break}r=this.next().read_expr(),this.expect("}")&&this.next(),a=l("offsetlookup",a,r)}return a},read_simple_variable:function(){var i,r=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)i=this.text().substring(1),this.next(),r=r(i,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var a=this.next().read_expr();this.expect("}")&&this.next(),r=r(a,!0);break;case"$":r=r(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:i=this.text().substring(1);var l=this.node("variable");this.next(),r=r(l(i,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),i=this.text(),this.next(),r=r(i,!1)}return r}};function G(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}F.read_variable,F.read_static_getter,F.read_what,F.recursive_variable_chain_scan,F.read_encaps_var_offset,F.read_reference_variable,F.read_simple_variable;var M=function(i,r){this.lexer=i,this.ast=r,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var a=function(l){return[l,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(a)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(a)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(a)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(a)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(a)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a))}};M.prototype.getTokenName=function(i){return G(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"},M.prototype.parse=function(i,r){this._errors=[],this.filename=r||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var a=this.node("program"),l=[];for(this.next();this.token!=this.EOF;)l.push(this.read_start());l.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&l.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var d=a(l,this._errors,this._docs,this._tokens);if(this.debug){var m=this.ast.checkNodes();if(m.length>0)throw m.forEach(function(v){v.position&&console.log("Node at line "+v.position.line+", column "+v.position.column),console.log(v.stack.join(`
`))}),new Error("Some nodes are not closed")}return d},M.prototype.raiseError=function(i,r,a,l){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var d=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw d.lineNumber=this.lexer.yylloc.first_line,d.fileName=this.filename,d.columnNumber=this.lexer.yylloc.first_column,d}var m=this.ast.prepare("error",null,this)(i,l,this.lexer.yylloc.first_line,a);return this._errors.push(m),m},M.prototype.error=function(i){var r="Parse Error : syntax error",a=this.getTokenName(this.token),l="";if(this.token!==this.EOF){if(G(this.token)){var d=this.text();d.length>10&&(d=d.substring(0,7)+"..."),a="'"+d+"' ("+a+")"}r+=", unexpected "+a}return i&&!Array.isArray(i)&&((G(i)||i.length===1)&&(l=", expecting "+this.getTokenName(i)),r+=l),this.raiseError(r,l,i,a)},M.prototype.position=function(){return new qt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},M.prototype.node=function(i){if(this.extractDoc){var r=null;this._docIndex<this._docs.length&&(r=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(r)));var a=this.ast.prepare(i,r,this);return a.postBuild=function(l){if(this._docIndex<this._docs.length)if(this._lastNode){for(var d=this.prev[2],m=this._docIndex;m<this._docs.length&&!(this._docs[m].offset>d);m++);m>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,m)),this._docIndex=m)}else this.token===this.EOF&&(l.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=l}.bind(this),a}return this.ast.prepare(i,null,this)},M.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var $=["parser.next","parser.node","parser.showlog"];M.prototype.showlog=function(){for(var i,r=new Error().stack.split(`
`),a=2;a<r.length;a++){i=r[a].trim();for(var l=!1,d=0;d<$.length;d++)if(i.substring(3,3+$[d].length)===$[d]){l=!0;break}if(!l)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+i),this},M.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0},M.prototype.text=function(){return this.lexer.yytext},M.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},M.prototype.peek=function(){var i=this.lexer.getState(),r=this.lexer.lex();return this.lexer.setState(i),r},M.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var i=this.lexer.yytext;if(i=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},M.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)},[Mt,Nt,se,Qt,yt,lt,ce,It,oe,de,P,J,pt,Ht,Z,F].forEach(function(i){for(var r in i){if(Object.prototype.hasOwnProperty.call(M.prototype,r))throw new Error("Function "+r+" is already defined - collision");M.prototype[r]=i[r]}});var ot=M,et={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},W={values:Object.entries(et).reduce(function(i,r){var a=T(r,2),l=a[0],d=a[1];return h(h({},i),{},f({},d,l))},{}),names:et},at=Object.freeze(W),xt=function(i,r,a){this.source=i,this.start=r,this.end=a},zt=function(i,r,a){this.kind=i,r&&(this.leadingComments=r),a&&(this.loc=a)};zt.prototype.setTrailingComments=function(i){this.trailingComments=i},zt.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i},zt.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this},zt.extends=function(i,r){return r.prototype=Object.create(this.prototype),r.extends=this.extends,r.prototype.constructor=r,r.kind=i,r};var dt=zt,bt="expression",j=dt.extends(bt,function(i,r,a){dt.apply(this,[i||bt,r,a])}),$t="array",Lt=j.extends($t,function(i,r,a,l){j.apply(this,[$t,a,l]),this.items=r,this.shortForm=i}),$e="arrowfunc",Li=j.extends($e,function(i,r,a,l,d,m,v,_){j.apply(this,[$e,v,_]),this.arguments=i,this.byref=r,this.body=a,this.type=l,this.nullable=d,this.isStatic=m||!1}),ni="assign",Ye=j.extends(ni,function(i,r,a,l,d){j.apply(this,[ni,l,d]),this.left=i,this.right=r,this.operator=a}),Je="assignref",un=j.extends(Je,function(i,r,a,l){j.apply(this,[Je,a,l]),this.left=i,this.right=r}),Tn="attribute",hs=dt.extends(Tn,function(i,r,a,l){dt.apply(this,[Tn,a,l]),this.name=i,this.args=r}),_t="attrgroup",As=dt.extends(_t,function(i,r,a){dt.apply(this,[_t,r,a]),this.attrs=i||[]}),ls="operation",Ue=j.extends(ls,function(i,r,a){j.apply(this,[i||ls,r,a])}),us=Ue.extends("bin",function(i,r,a,l,d){Ue.apply(this,["bin",l,d]),this.type=i,this.left=r,this.right=a}),Pi="statement",Et=dt.extends(Pi,function(i,r,a){dt.apply(this,[i||Pi,r,a])}),g="block",L=Et.extends(g,function(i,r,a,l){Et.apply(this,[i||g,a,l]),this.children=r.filter(Boolean)}),D="literal",S=j.extends(D,function(i,r,a,l,d){j.apply(this,[i||D,l,d]),this.value=r,a&&(this.raw=a)}),p="boolean",x=S.extends(p,function(i,r,a,l){S.apply(this,[p,i,r,a,l])}),C="break",w=Et.extends(C,function(i,r,a){Et.apply(this,[C,r,a]),this.level=i}),V="byref",Y=j.extends(V,function(i,r,a){j.apply(this,[V,r,a]),this.what=i}),ut="call",Pt=j.extends(ut,function(i,r,a,l){j.apply(this,[ut,a,l]),this.what=i,this.arguments=r}),jt="case",te=Et.extends(jt,function(i,r,a,l){Et.apply(this,[jt,a,l]),this.test=i,this.body=r}),fe="cast",pe=Ue.extends(fe,function(i,r,a,l,d){Ue.apply(this,[fe,l,d]),this.type=i,this.raw=r,this.expr=a}),me="catch",si=Et.extends(me,function(i,r,a,l,d){Et.apply(this,[me,l,d]),this.body=i,this.what=r,this.variable=a}),ke="declaration",gi=Et.extends(ke,function(i,r,a,l){Et.apply(this,[i||ke,a,l]),this.name=r});gi.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.isReadonly=i[3]===1,this.kind!=="class"&&(i[0]===-1?this.visibility="":i[0]===null?this.visibility=null:i[0]===0?this.visibility="public":i[0]===1?this.visibility="protected":i[0]===2&&(this.visibility="private"),this.isStatic=i[1]===1)};var Se=gi,ki="class",Yn=Se.extends(ki,function(i,r,a,l,d,m,v){Se.apply(this,[ki,i,m,v]),this.isAnonymous=!i,this.extends=r,this.implements=a,this.body=l,this.attrGroups=[],this.parseFlags(d)}),Fe="constantstatement",Ln=Et.extends(Fe,function(i,r,a,l){Et.apply(this,[i||Fe,a,l]),this.constants=r}),gn="classconstant",Pn=Ln.extends(gn,function(i,r,a,l,d,m){Ln.apply(this,[i||gn,r,d,m]),this.parseFlags(a),this.attrGroups=l});Pn.prototype.parseFlags=function(i){i[0]===-1?this.visibility="":i[0]===null?this.visibility=null:i[0]===0?this.visibility="public":i[0]===1?this.visibility="protected":i[0]===2&&(this.visibility="private")};var Jo=Pn,Nr="clone",Xo=j.extends(Nr,function(i,r,a){j.apply(this,[Nr,r,a]),this.what=i}),Js="closure",Zt=j.extends(Js,function(i,r,a,l,d,m,v,_){j.apply(this,[Js,v,_]),this.uses=a,this.arguments=i,this.byref=r,this.type=l,this.nullable=d,this.isStatic=m||!1,this.body=null,this.attrGroups=[]}),Ge=dt.extends("comment",function(i,r,a,l){dt.apply(this,[i,a,l]),this.value=r}),Qn="commentblock",br=Ge.extends(Qn,function(i,r,a){Ge.apply(this,[Qn,i,r,a])}),Ar="commentline",Is=Ge.extends(Ar,function(i,r,a){Ge.apply(this,[Ar,i,r,a])}),cs="constant",Gt=dt.extends(cs,function(i,r,a,l){dt.apply(this,[cs,a,l]),this.name=i,this.value=r}),Oe="continue",ui=Et.extends(Oe,function(i,r,a){Et.apply(this,[Oe,r,a]),this.level=i}),Ne="declare",ri=L.extends(Ne,function(i,r,a,l,d){L.apply(this,[Ne,r,l,d]),this.directives=i,this.mode=a});ri.MODE_SHORT="short",ri.MODE_BLOCK="block",ri.MODE_NONE="none";var kn=ri,_i="declaredirective",Dn=dt.extends(_i,function(i,r,a,l){dt.apply(this,[_i,a,l]),this.key=i,this.value=r}),bi=Et.extends("do",function(i,r,a,l){Et.apply(this,["do",a,l]),this.test=i,this.body=r}),Di="echo",Qe=Et.extends(Di,function(i,r,a,l){Et.apply(this,[Di,a,l]),this.shortForm=r,this.expressions=i}),xi="empty",Ir=j.extends(xi,function(i,r,a){j.apply(this,[xi,r,a]),this.expression=i}),Xe="encapsed",xn=S.extends(Xe,function(i,r,a,l,d){S.apply(this,[Xe,i,r,l,d]),this.type=a});xn.TYPE_STRING="string",xn.TYPE_SHELL="shell",xn.TYPE_HEREDOC="heredoc",xn.TYPE_OFFSET="offset";var fs=xn,tn="encapsedpart",Ss=j.extends(tn,function(i,r,a,l,d){j.apply(this,[tn,l,d]),this.expression=i,this.syntax=r,this.curly=a}),Rn="entry",mv=j.extends(Rn,function(i,r,a,l,d,m){j.apply(this,[Rn,d,m]),this.key=i,this.value=r,this.byRef=a,this.unpack=l}),gh="enum",Tv=Se.extends(gh,function(i,r,a,l,d,m){Se.apply(this,[gh,i,d,m]),this.valueType=r,this.implements=a,this.body=l,this.attrGroups=[]}),kh="enumcase",gv=dt.extends(kh,function(i,r,a,l){dt.apply(this,[kh,a,l]),this.name=i,this.value=r}),xh="error",kv=dt.extends(xh,function(i,r,a,l,d,m){dt.apply(this,[xh,d,m]),this.message=i,this.token=r,this.line=a,this.expected=l}),Eh="eval",xv=j.extends(Eh,function(i,r,a){j.apply(this,[Eh,r,a]),this.source=i}),vh="exit",Ev=j.extends(vh,function(i,r,a,l){j.apply(this,[vh,a,l]),this.expression=i,this.useDie=r}),yh="expressionstatement",vv=Et.extends(yh,function(i,r,a){Et.apply(this,[yh,r,a]),this.expression=i}),yv=Et.extends("for",function(i,r,a,l,d,m,v){Et.apply(this,["for",m,v]),this.init=i,this.test=r,this.increment=a,this.shortForm=d,this.body=l}),Ch="foreach",Cv=Et.extends(Ch,function(i,r,a,l,d,m,v){Et.apply(this,[Ch,m,v]),this.source=i,this.key=r,this.value=a,this.shortForm=d,this.body=l}),Nh="function",Zo=Se.extends(Nh,function(i,r,a,l,d,m,v){Se.apply(this,[Nh,i,m,v]),this.arguments=r,this.byref=a,this.type=l,this.nullable=d,this.body=null,this.attrGroups=[]}),bh="global",Nv=Et.extends(bh,function(i,r,a){Et.apply(this,[bh,r,a]),this.items=i}),Ah="goto",bv=Et.extends(Ah,function(i,r,a){Et.apply(this,[Ah,r,a]),this.label=i}),Ih="halt",Av=Et.extends(Ih,function(i,r,a){Et.apply(this,[Ih,r,a]),this.after=i}),Sh="identifier",Iv=dt.extends(Sh,function(i,r,a){dt.apply(this,[Sh,r,a]),this.name=i}),Sv=Iv,Ov=Et.extends("if",function(i,r,a,l,d,m){Et.apply(this,["if",d,m]),this.test=i,this.body=r,this.alternate=a,this.shortForm=l}),Oh="include",Lv=j.extends(Oh,function(i,r,a,l,d){j.apply(this,[Oh,l,d]),this.once=i,this.require=r,this.target=a}),Lh="inline",Pv=S.extends(Lh,function(i,r,a,l){S.apply(this,[Lh,i,r,a,l])}),Ph="interface",Dv=Se.extends(Ph,function(i,r,a,l,d,m){Se.apply(this,[Ph,i,d,m]),this.extends=r,this.body=a,this.attrGroups=l}),Dh="intersectiontype",Rv=Se.extends(Dh,function(i,r,a){Se.apply(this,[Dh,null,r,a]),this.types=i}),Rh="isset",wv=j.extends(Rh,function(i,r,a){j.apply(this,[Rh,r,a]),this.variables=i}),wh="label",Fv=Et.extends(wh,function(i,r,a){Et.apply(this,[wh,r,a]),this.name=i}),Fh="list",Bv=j.extends(Fh,function(i,r,a,l){j.apply(this,[Fh,a,l]),this.items=i,this.shortForm=r}),Bh="lookup",wn=j.extends(Bh,function(i,r,a,l,d){j.apply(this,[i||Bh,l,d]),this.what=r,this.offset=a}),Uh="magic",Uv=S.extends(Uh,function(i,r,a,l){S.apply(this,[Uh,i,r,a,l])}),Mh="match",Mv=j.extends(Mh,function(i,r,a,l){j.apply(this,[Mh,a,l]),this.cond=i,this.arms=r}),Hh="matcharm",Hv=j.extends(Hh,function(i,r,a,l){j.apply(this,[Hh,a,l]),this.conds=i,this.body=r}),Vh="method",Vv=Zo.extends(Vh,function(){Zo.apply(this,arguments),this.kind=Vh}),Gh="reference",cn=dt.extends(Gh,function(i,r,a){dt.apply(this,[i||Gh,r,a])}),qh="name",Xs=cn.extends(qh,function(i,r,a,l){cn.apply(this,[qh,a,l]),this.name=i.replace(/\\$/,""),this.resolution=r});Xs.UNQUALIFIED_NAME="uqn",Xs.QUALIFIED_NAME="qn",Xs.FULL_QUALIFIED_NAME="fqn",Xs.RELATIVE_NAME="rn";var Gv=Xs,Wh="namespace",qv=L.extends(Wh,function(i,r,a,l,d){L.apply(this,[Wh,r,l,d]),this.name=i,this.withBrackets=a||!1}),Yh="namedargument",Wv=j.extends(Yh,function(i,r,a,l){j.apply(this,[Yh,a,l]),this.name=i,this.value=r}),Yv=j.extends("new",function(i,r,a,l){j.apply(this,["new",a,l]),this.what=i,this.arguments=r}),Qh="noop",Qv=dt.extends(Qh,function(i,r){dt.apply(this,[Qh,i,r])}),jh="nowdoc",jv=S.extends(jh,function(i,r,a,l,d){S.apply(this,[jh,i,r,l,d]),this.label=a}),Kh="nullkeyword",Kv=dt.extends(Kh,function(i,r,a){dt.apply(this,[Kh,r,a]),this.raw=i}),zh="nullsafepropertylookup",zv=wn.extends(zh,function(i,r,a,l){wn.apply(this,[zh,i,r,a,l])}),$h="number",$v=S.extends($h,function(i,r,a,l){S.apply(this,[$h,i,r,a,l])}),Jh="offsetlookup",Jv=wn.extends(Jh,function(i,r,a,l){wn.apply(this,[Jh,i,r,a,l])}),Xh="parameter",Xv=Se.extends(Xh,function(i,r,a,l,d,m,v,_,A,b){Se.apply(this,[Xh,i,A,b]),this.value=a,this.type=r,this.byref=l,this.variadic=d,this.readonly=m,this.nullable=v,this.flags=_||0,this.attrGroups=[]}),Zh="parentreference",Zv=cn.extends(Zh,function(i,r,a){cn.apply(this,[Zh,r,a]),this.raw=i}),tl="post",ty=Ue.extends(tl,function(i,r,a,l){Ue.apply(this,[tl,a,l]),this.type=i,this.what=r}),ey=Ue.extends("pre",function(i,r,a,l){Ue.apply(this,["pre",a,l]),this.type=i,this.what=r}),el="print",iy=j.extends(el,function(i,r,a){j.apply(this,[el,r,a]),this.expression=i}),il="program",ny=L.extends(il,function(i,r,a,l,d,m){L.apply(this,[il,i,d,m]),this.errors=r,a&&(this.comments=a),l&&(this.tokens=l)}),nl="property",sy=Et.extends(nl,function(i,r,a,l,d,m,v,_){Et.apply(this,[nl,v,_]),this.name=i,this.value=r,this.readonly=a,this.nullable=l,this.type=d,this.attrGroups=m}),sl="propertylookup",ry=wn.extends(sl,function(i,r,a,l){wn.apply(this,[sl,i,r,a,l])}),rl="propertystatement",ol=Et.extends(rl,function(i,r,a,l,d){Et.apply(this,[rl,l,d]),this.properties=r,this.parseFlags(a)});ol.prototype.parseFlags=function(i){i[0]===-1?this.visibility="":i[0]===null?this.visibility=null:i[0]===0?this.visibility="public":i[0]===1?this.visibility="protected":i[0]===2&&(this.visibility="private"),this.isStatic=i[1]===1};var oy=ol,al="retif",ay=j.extends(al,function(i,r,a,l,d){j.apply(this,[al,l,d]),this.test=i,this.trueExpr=r,this.falseExpr=a}),hl="return",hy=Et.extends(hl,function(i,r,a){Et.apply(this,[hl,r,a]),this.expr=i}),ll="selfreference",ly=cn.extends(ll,function(i,r,a){cn.apply(this,[ll,r,a]),this.raw=i}),ul="silent",uy=j.extends(ul,function(i,r,a){j.apply(this,[ul,r,a]),this.expr=i}),cl="static",cy=Et.extends(cl,function(i,r,a){Et.apply(this,[cl,r,a]),this.variables=i}),fl="staticvariable",fy=dt.extends(fl,function(i,r,a,l){dt.apply(this,[fl,a,l]),this.variable=i,this.defaultValue=r}),dl="staticlookup",dy=wn.extends(dl,function(i,r,a,l){wn.apply(this,[dl,i,r,a,l])}),pl="staticreference",py=cn.extends(pl,function(i,r,a){cn.apply(this,[pl,r,a]),this.raw=i}),_l="string",_y=S.extends(_l,function(i,r,a,l,d,m){S.apply(this,[_l,r,l,d,m]),this.unicode=a,this.isDoubleQuote=i}),ml="switch",my=Et.extends(ml,function(i,r,a,l,d){Et.apply(this,[ml,l,d]),this.test=i,this.body=r,this.shortForm=a}),Tl="throw",Ty=Et.extends(Tl,function(i,r,a){Et.apply(this,[Tl,r,a]),this.what=i}),gl="trait",gy=Se.extends(gl,function(i,r,a,l){Se.apply(this,[gl,i,a,l]),this.body=r}),kl="traitalias",ky=dt.extends(kl,function(i,r,a,l,d,m){dt.apply(this,[kl,d,m]),this.trait=i,this.method=r,this.as=a,this.visibility="",l&&(l[0]===0?this.visibility="public":l[0]===1?this.visibility="protected":l[0]===2&&(this.visibility="private"))}),xl="traitprecedence",xy=dt.extends(xl,function(i,r,a,l,d){dt.apply(this,[xl,l,d]),this.trait=i,this.method=r,this.instead=a}),El="traituse",Ey=dt.extends(El,function(i,r,a,l){dt.apply(this,[El,a,l]),this.traits=i,this.adaptations=r}),vy=Et.extends("try",function(i,r,a,l,d){Et.apply(this,["try",l,d]),this.body=i,this.catches=r,this.always=a}),vl="typereference",yl=cn.extends(vl,function(i,r,a,l){cn.apply(this,[vl,a,l]),this.name=i,this.raw=r});yl.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var yy=yl,Cl="unary",Cy=Ue.extends(Cl,function(i,r,a,l){Ue.apply(this,[Cl,a,l]),this.type=i,this.what=r}),Nl="uniontype",Ny=Se.extends(Nl,function(i,r,a){Se.apply(this,[Nl,null,r,a]),this.types=i}),bl="unset",by=Et.extends(bl,function(i,r,a){Et.apply(this,[bl,r,a]),this.variables=i}),Al="usegroup",Ay=Et.extends(Al,function(i,r,a,l,d){Et.apply(this,[Al,l,d]),this.name=i,this.type=r,this.items=a}),Il="useitem",ta=Et.extends(Il,function(i,r,a,l,d){Et.apply(this,[Il,l,d]),this.name=i,this.alias=r,this.type=a});ta.TYPE_CONST="const",ta.TYPE_FUNCTION="function";var Iy=ta,Sl="variable",Sy=j.extends(Sl,function(i,r,a,l){j.apply(this,[Sl,a,l]),this.name=i,this.curly=r||!1}),Ol="variadic",Oy=j.extends(Ol,function(i,r,a){j.apply(this,[Ol,r,a]),this.what=i}),Ll="variadicplaceholder",Ly=dt.extends(Ll,function(i,r){dt.apply(this,[Ll,i,r])}),Pl="while",Py=Et.extends(Pl,function(i,r,a,l,d){Et.apply(this,[Pl,l,d]),this.test=i,this.body=r,this.shortForm=a}),Dl="yield",Dy=j.extends(Dl,function(i,r,a,l){j.apply(this,[Dl,a,l]),this.value=i,this.key=r}),Rl="yieldfrom",Ry=j.extends(Rl,function(i,r,a){j.apply(this,[Rl,r,a]),this.value=i}),Ei=function(i,r){this.withPositions=i,this.withSource=r};Ei.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,r){i.forEach(function(a){Ei.precedence[a]=r+1})}),Ei.prototype.isRightAssociative=function(i){return i==="**"||i==="??"},Ei.prototype.swapLocations=function(i,r,a,l){this.withPositions&&(i.loc.start=r.loc.start,i.loc.end=a.loc.end,this.withSource&&(i.loc.source=l.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))},Ei.prototype.resolveLocations=function(i,r,a,l){this.withPositions&&(i.loc.start.offset>r.loc.start.offset&&(i.loc.start=r.loc.start),i.loc.end.offset<a.loc.end.offset&&(i.loc.end=a.loc.end),this.withSource&&(i.loc.source=l.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))},Ei.prototype.resolvePrecedence=function(i,r){var a,l,d;return i.kind==="call"?this.resolveLocations(i,i.what,i,r):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,r):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(l=Ei.precedence[i.type],d=Ei.precedence[i.right.type],l&&d&&d<=l&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(a=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,r),a.left=this.resolvePrecedence(i,r),this.swapLocations(a,a.left,a.right,r),i=a)):i.right.kind==="retif"&&(l=Ei.precedence[i.type],d=Ei.precedence["?"],l&&d&&d<=l&&(a=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,r),a.test=this.resolvePrecedence(i,r),this.swapLocations(a,a.test,a.falseExpr,r),i=a))):i.kind!=="silent"&&i.kind!=="cast"||!i.expr||i.expr.parenthesizedExpression?i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(a=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,r),a.left=this.resolvePrecedence(i,r),this.swapLocations(a,a.left,a.right,r),i=a):i.what.kind==="retif"&&(a=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,r),a.test=this.resolvePrecedence(i,r),this.swapLocations(a,a.test,a.falseExpr,r),i=a)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(a=i.falseExpr,i.falseExpr=a.test,this.swapLocations(i,i.test,i.falseExpr,r),a.test=this.resolvePrecedence(i,r),this.swapLocations(a,a.test,a.falseExpr,r),i=a):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(l=Ei.precedence["="],d=Ei.precedence[i.right.type],l&&d&&d<l&&(a=i.right,i.right=i.right.left,a.left=i,this.swapLocations(a,a.left,i.right,r),i=a)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,r):i.expr.kind==="bin"?(a=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,r),a.left=this.resolvePrecedence(i,r),this.swapLocations(a,a.left,a.right,r),i=a):i.expr.kind==="retif"&&(a=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,r),a.test=this.resolvePrecedence(i,r),this.swapLocations(a,a.test,a.falseExpr,r),i=a),i},Ei.prototype.prepare=function(i,r,a){var l=null;(this.withPositions||this.withSource)&&(l=a.position());var d=this,m=function v(){var _=null,A=Array.prototype.slice.call(arguments);if(A.push(r),d.withPositions||d.withSource){var b=null;d.withSource&&(b=a.lexer._input.substring(l.offset,a.prev[2])),_=new xt(b,l,new qt(a.prev[0],a.prev[1],a.prev[2])),A.push(_)}i||(i=A.shift());var E=d[i];if(typeof E!="function")throw new Error('Undefined node "'+i+'"');var wt=Object.create(E.prototype);return E.apply(wt,A),v.instance=wt,v.trailingComments&&(wt.trailingComments=v.trailingComments),typeof v.postBuild=="function"&&v.postBuild(wt),a.debug&&delete d.stack[v.stackUid],d.resolvePrecedence(wt,a)};return a.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:l,stack:new Error().stack.split(`
`).slice(3,5)},m.stackUid=this.stackUid),m.setTrailingComments=function(v){m.instance?m.instance.setTrailingComments(v):m.trailingComments=v},m.destroy=function(v){r&&(v?v.leadingComments?v.leadingComments=r.concat(v.leadingComments):v.leadingComments=r:a._docIndex=a._docs.length-r.length),a.debug&&delete d.stack[m.stackUid]},m},Ei.prototype.checkNodes=function(){var i=[];for(var r in this.stack)Object.prototype.hasOwnProperty.call(this.stack,r)&&(this.stack[r].key=r,i.push(this.stack[r]));return this.stack={},i},[Lt,Li,Ye,un,hs,As,us,L,x,w,Y,Pt,te,pe,si,Yn,Jo,Xo,Zt,Ge,br,Is,Gt,Ln,ui,Se,kn,Dn,bi,Qe,Ir,fs,Ss,mv,Tv,gv,kv,xv,Ev,j,vv,yv,Cv,Zo,Nv,bv,Av,Sv,Ov,Lv,Pv,Dv,Rv,wv,Fv,Bv,S,wn,Uv,Mv,Hv,Vv,Gv,qv,Wv,Yv,dt,Qv,jv,Kv,zv,$v,Jv,Ue,Xv,Zv,ty,ey,iy,ny,sy,ry,oy,cn,ay,hy,ly,uy,Et,cy,fy,dy,py,_y,my,Ty,gy,ky,xy,Ey,vy,yy,Cy,Ny,by,Ay,Iy,Sy,Oy,Ly,Py,Dy,Ry].forEach(function(i){Ei.prototype[i.kind]=i});var wl=Ei;function ea(i,r){for(var a=Object.keys(i),l=a.length;l--;){var d=a[l],m=i[d];m===null?delete r[d]:typeof m=="function"?r[d]=m.bind(r):Array.isArray(m)?r[d]=Array.isArray(r[d])?r[d].concat(m):m:u(m)==="object"?r[d]=u(r[d])==="object"?ea(m,r[d]):m:r[d]=m}return r}var Ri=function(i){if(typeof this=="function")return new this(i);if(this.tokens=at,this.lexer=new Ut(this),this.ast=new wl,this.parser=new ot(this.lexer,this.ast),i&&u(i)==="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){var r=i.parser.version.split(".");if(r=100*parseInt(r[0])+parseInt(r[1]),isNaN(r))throw new Error("Bad version number : "+i.parser.version);i.parser.version=r}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}ea(i,this),this.lexer.version=this.parser.version}},ia=function(i){return typeof i.write=="function"?i.toString():i};Ri.create=function(i){return new Ri(i)},Ri.parseEval=function(i,r){return new Ri(r).parseEval(i)},Ri.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=ia(i),this.parser.parse(i,"eval")},Ri.parseCode=function(i,r,a){return u(r)!=="object"||a||(a=r,r="unknown"),new Ri(a).parseCode(i,r)},Ri.prototype.parseCode=function(i,r){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=ia(i),this.parser.parse(i,r)},Ri.tokenGetAll=function(i,r){return new Ri(r).tokenGetAll(i)},Ri.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=ia(i);var r=this.lexer.EOF,a=this.tokens.values;this.lexer.setInput(i);for(var l=this.lexer.lex()||r,d=[];l!=r;){var m=this.lexer.yytext;Object.prototype.hasOwnProperty.call(a,l)&&(m=[a[l],m,this.lexer.yylloc.first_line]),d.push(m),l=this.lexer.lex()||r}return d};var jn=Ri,wy=at,Fy=Ut,By=wl,Uy=ot,My=ea,Hy=Ri,Vy=Ri;jn.tokens=wy,jn.lexer=Fy,jn.AST=By,jn.parser=Uy,jn.combine=My,jn.Engine=Hy,jn.default=Vy;var Fl=function(i,r,a){var l=a&&a.parentParser==="markdown";if(!i&&l)return"";i=i.replace(/\?>\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var d,m=new jn({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),v=i.indexOf("<?php")!==-1,_=l&&!v;try{d=_?m.parseEval(i):m.parseCode(i)}catch(A){throw A instanceof SyntaxError&&"lineNumber"in A&&(A.loc={start:{line:A.lineNumber,column:A.columnNumber}},delete A.lineNumber,delete A.columnNumber),A}return d.extra={parseAsEval:_},d.comments.forEach(function(A){A.value[A.value.length-1]===`
`&&(A.value=A.value.slice(0,-1),A.loc.end.offset=A.loc.end.offset-1)}),d},Os=s.default.util,Gy=Os.hasNewline,qy=Os.skipEverythingButNewLine,Wy=Os.skipNewline,Yy=Os.isNextLineEmpty,Qy=Os.isPreviousLineEmpty,jy=Os.getNextNonSpaceNonCommentCharacterIndex,Ky=s.default.version;function na(i,r){return parseInt(Ky[0])>1?i[r]:i}var Bl={};function sa(i){return Bl[i]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(i,r){i.forEach(function(a){Bl[a]=r})});var Ul=["==","!=","===","!==","<>","<=>"],Sr=["*","/","%"],ra=[">>","<<"];function Ml(i){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(i.kind)}function Hl(i){var r=i.body;return r?(r.kind==="block"&&(r=r.children),r[0]):null}function Kn(i){var r=i.children||i.body||i.adaptations;return Array.isArray(r)?r:null}function Vl(i){var r=i.getParentNode();return r?Kn(r):null}function Or(i){return i.length>0?i[i.length-1]:null}function oa(i){var r=i.getValue();if(r.kind==="program"){var a=Kn(r);return!(!a||a.length===0)&&a[0].kind==="inline"}if(r.kind==="switch"){if(!r.body)return!1;var l=Kn(r.body);if(l.length===0)return!1;var d=T(l,1)[0];if(!d.body)return!1;var m=Kn(d.body);return m.length!==0&&m[0].kind==="inline"}var v=Hl(r);return!!v&&v.kind==="inline"}var Gl=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(i,r){return i[r.toLowerCase()]=r,i},{}),ae={printNumber:function(i){return i.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:sa,isBitwiseOperator:function(i){return!!ra[i]||i==="|"||i==="^"||i==="&"},shouldFlatten:function(i,r){return sa(r)===sa(i)&&i!=="**"&&(!Ul.includes(i)||!Ul.includes(r))&&!(r==="%"&&Sr.includes(i)||i==="%"&&Sr.includes(r))&&(r===i||!Sr.includes(r)||!Sr.includes(i))&&(!ra.includes(i)||!ra.includes(r))},nodeHasStatement:Ml,getNodeListProperty:Kn,getParentNodeListProperty:Vl,getLast:Or,getPenultimate:function(i){return i.length>1?i[i.length-2]:null},isLastStatement:function(i){var r=Vl(i);if(!r)return!0;var a=i.getValue();return r[r.length-1]===a},getBodyFirstChild:Hl,lineShouldEndWithSemicolon:function(i){var r=i.getValue(),a=i.getParentNode();if(!a)return!1;if(["for","foreach","while","do","if","switch"].includes(a.kind)&&r.kind!=="block"&&r.kind!=="if"&&(a.body===r||a.alternate===r))return!0;if(!Ml(a)||r.kind==="echo"&&r.shortForm)return!1;if(r.kind==="traituse")return!r.adaptations;if(r.kind==="method"&&r.isAbstract)return!0;if(r.kind==="method"){var l=i.getParentNode();if(l&&l.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(r.kind)},fileShouldEndWithHardline:function(i){var r=i.getValue(),a=r.kind==="program",l=r.children&&Or(r.children);if(!a||l&&["halt","inline"].includes(l.kind))return!1;if(l&&(l.kind==="declare"||l.kind==="namespace")){var d=l.children.length>0&&Or(l.children);if(d&&["halt","inline"].includes(d.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(i){var r=i.replace(/^\\/,"");return r.indexOf("\\")!==-1?r:i},hasDanglingComments:function(i){return i.comments&&i.comments.some(function(r){return!r.leading&&!r.trailing})},hasLeadingComment:function(i){return i.comments&&i.comments.some(function(r){return r.leading})},hasTrailingComment:function(i){return i.comments&&i.comments.some(function(r){return r.trailing})},docShouldHaveTrailingNewline:function i(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=r.getNode(a),d=r.getNode(a+1),m=r.getNode(a+2);if(!d)return!1;if(m&&["call","new","echo"].includes(m.kind)&&!["call","array"].includes(d.kind)||d.kind==="parameter"){var v=m.arguments.length-1,_=m.arguments.indexOf(d);return _!==v}if(m&&m.kind==="for"){var A=m.init.indexOf(d);if(A!==-1)return A!==m.init.length-1;var b=m.test.indexOf(d);if(b!==-1)return b!==m.test.length-1;var E=m.increment.indexOf(d);if(E!==-1)return E!==m.increment.length-1}if(d.kind==="bin")return d.left===l||i(r,a+1);if(d.kind==="case"&&d.test===l)return!0;if(d.kind==="staticvariable"){var wt=m.variables.length-1,Rt=m.variables.indexOf(d);return Rt!==wt}if(d.kind==="entry"){if(d.key===l)return!0;var le=m.items.length-1,_e=m.items.indexOf(d);return _e!==le}if(["call","new"].includes(d.kind)){var Ft=d.arguments.length-1,Ee=d.arguments.indexOf(l);return Ee!==Ft}if(d.kind==="echo"){var Jt=d.expressions.length-1,be=d.expressions.indexOf(l);return be!==Jt}if(d.kind==="array"){var Ae=d.items.length-1,Te=d.items.indexOf(l);return Te!==Ae}return d.kind==="retif"&&i(r,a+1)},isLookupNode:function(i){return i.kind==="propertylookup"||i.kind==="nullsafepropertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"},isFirstChildrenInlineNode:oa,shouldPrintHardLineAfterStartInControlStructure:function(i){var r=i.getValue();return!["try","catch"].includes(r.kind)&&oa(i)},shouldPrintHardLineBeforeEndInControlStructure:function(i){var r=i.getValue();if(["try","catch"].includes(r.kind))return!0;if(r.kind==="switch"){var a=Kn(r.body);if(a.length===0)return!0;var l=Or(a);if(!l.body)return!0;var d=Kn(l.body);return d.length===0||d[0].kind!=="inline"}return!oa(i)},getAlignment:function(i){var r=i.split(`
`).pop();return r.length-r.trimLeft().length+1},isProgramLikeNode:function(i){return["program","declare","namespace"].includes(i.kind)},isReferenceLikeNode:function(i){return["name","parentreference","selfreference","staticreference"].includes(i.kind)},getNodeKindIncludingLogical:function(i){return i.kind==="bin"&&["||","&&"].includes(i.type)?"logical":i.kind},useDoubleQuote:function(i,r){if(i.isDoubleQuote===r.singleQuote){var a=i.raw.slice(i.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return i.isDoubleQuote?a:!a}return i.isDoubleQuote},hasEmptyBody:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",a=i.getValue();return a[r]&&a[r].children&&a[r].children.length===0&&(!a[r].comments||a[r].comments.length===0)},isNextLineEmptyAfterNamespace:function(i,r,a){var l=a(r);return l=qy(i,l),l=Wy(i,l),Gy(i,l)},shouldPrintHardlineBeforeTrailingComma:function(i){return i.kind==="nowdoc"||i.kind==="encapsed"&&i.type==="heredoc"||i.kind==="entry"&&(i.value.kind==="nowdoc"||i.value.kind==="encapsed"&&i.value.type==="heredoc")},isDocNode:function(i){return i.kind==="nowdoc"||i.kind==="encapsed"&&i.type==="heredoc"},getAncestorNode:function(i,r){var a=function(l,d){for(var m,v=[].concat(d),_=-1;m=l.getParentNode(++_);)if(v.indexOf(m.kind)!==-1)return _;return-1}(i,r);return a===-1?null:i.getParentNode(a)},getNextNode:function(i,r){var a=i.getParentNode(),l=Kn(a);if(!l)return null;var d=l.indexOf(r);return d===-1?null:a.children[d+1]},normalizeMagicMethodName:function(i){var r=i.toLowerCase();return Gl[r]?Gl[r]:i},isPreviousLineEmpty:function(i,r,a){return Qy(i,r,na(a,"locStart"))},isNextLineEmpty:function(i,r,a){return Yy(i,r,na(a,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(i,r,a){return jy(i,r,na(a,"locEnd"))}},Ls=s.default.util,fn=Ls.addLeadingComment,wi=Ls.addDanglingComment,dn=Ls.addTrailingComment,zy=Ls.skipNewline,Lr=Ls.hasNewline,$y=Ls.hasNewlineInRange,Ps=s.default.doc.builders,ql=Ps.join,Jy=Ps.indent,En=Ps.hardline,Wl=Ps.cursor,Yl=Ps.lineSuffix,Xy=Ps.breakParent,Zs=ae.getNextNonSpaceNonCommentCharacterIndex,Zy=ae.isNextLineEmpty,tC=ae.isPreviousLineEmpty,eC=ae.isLookupNode;function Pr(i,r){var a=i.children;a.length===0?wi(i,r):fn(a[0],r)}function aa(i,r){i.kind==="block"?Pr(i,r):fn(i,r)}function Ql(i,r,a,l,d,m){var v=Zs(i,d,m),_=i.charAt(v);return r&&r.kind==="identifier"&&a&&(a.kind==="function"||a.kind==="method")&&_===")"?(dn(a,d),!0):!(!a||a.kind!=="function"&&a.kind!=="method"||!l||l.kind!=="block")&&(Pr(l,d),!0)}function ha(i,r,a,l,d,m){if(!a||a.kind!=="if"||!l)return!1;var v=Zs(i,d,m);return i.charAt(v)===")"?(dn(r,d),!0):r===a.body&&l===a.alternate?(wi(a,d),!0):l.kind==="if"?(aa(l.body,d),!0):a.body===l&&(fn(l,d),!0)}function la(i,r,a){if(i&&["class","interface","trait"].includes(i.kind)){if(r&&i.extends){if(Array.isArray(i.extends)){if(i.extends.some(function(l){if(r&&r===l)return wi(r,a),!0}))return!0}else if(r===i.extends)return wi(r,a),!0}if(r&&i.implements&&i.implements.some(function(l){if(r&&r===l)return wi(r,a),!0}))return!0;if(!(i.body&&i.body.length>0))return wi(i,a),!0}return!!(r&&r.kind==="class"&&r.isAnonymous&&r.leadingComments&&a.kind==="commentblock")}function ua(i,r,a,l,d){if(r&&(r.kind==="function"||r.kind==="method")){for(var m=0,v=0;v<r.arguments.length;v++)m=d.locEnd(r.arguments[v])>m?d.locEnd(r.arguments[v]):m;var _=r.body&&d.locStart(l)>m&&d.locEnd(l)<d.locStart(r.body),A=Zs(i,l,d);if(r.type&&_&&i.charAt(A)!==")")return d.locEnd(l)<d.locStart(r.type)?(wi(r.type,l),!0):(dn(r.type,l),!0)}return!1}function ca(i,r,a,l,d){return!(!a||!["function","method","parameter"].includes(a.kind))&&r.kind==="typereference"&&l.kind==="identifier"&&(dn(r,d),!0)}function jl(i,r){return!(!i||!["label","goto"].includes(i.kind))&&(dn(i,r),!0)}function fa(i,r,a,l){return a&&a.kind==="inline"?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.includes(l)||a.leadingComments.push(l),!0):!(i||a||!r||r.kind!=="inline")&&(wi(r,l),!0)}function Kl(i,r,a){return!(!i||i.kind!=="try"||!r)&&(r.kind==="block"?(Pr(r,a),!0):r.kind==="try"?(aa(r.always,a),!0):r.kind==="catch"&&(aa(r.body,a),!0))}function zl(i,r,a,l){return a||r||!i||i.kind!=="namespace"||i.withBrackets?!(r||!i||i.kind!=="namespace"||i.withBrackets)&&(wi(i,l),!0):(dn(i,l),!0)}function $l(i,r,a,l){return!(!i||i.kind!=="declare")&&(!r||r.kind!=="noop")&&(a&&i.directives[0]!==a?!(!a||!r)&&(fn(a,l),!0):(i.mode==="none"?dn(i,l):wi(i,l),!0))}function da(i,r,a,l,d,m){if(!a||a.kind!=="while"||!l)return!1;var v=Zs(i,d,m);return i.charAt(v)===")"?(dn(r,d),!0):l.kind==="block"&&(Pr(l,d),!0)}function pa(i,r){return i.getValue().printed=!0,r.printer.printComment(i,r)}function Jl(i,r,a){return i.getNode()===r.cursorNode&&i.getValue()?[Wl,a,Wl]:a}var ee={handleOwnLineComment:function(i,r,a){var l=i.precedingNode,d=i.enclosingNode,m=i.followingNode;return Ql(r,l,d,m,i,a)||function(v,_,A){return v&&eC(v)&&_&&["identifier","variable","encapsed"].includes(_.kind)?(fn(v,A),!0):!1}(d,m,i)||ha(r,l,d,m,i,a)||da(r,l,d,m,i,a)||Kl(d,m,i)||la(d,m,i)||ca(r,l,d,m,i)||ua(r,d,m,i,a)||function(v,_,A,b){return!A&&v&&(v.kind==="for"||v.kind==="foreach")?(v.body&&v.body.kind!=="block"?fn(A,b):fn(v,b),!0):!1}(d,0,m,i)||fa(d,l,m,i)||$l(d,l,m,i)},handleEndOfLineComment:function(i,r,a){var l=i.precedingNode,d=i.enclosingNode,m=i.followingNode;return function(v,_,A,b,E){return!_&&!b&&A&&A.kind==="array"?(dn(A,E),!0):!1}(0,l,d,m,i)||function(v,_,A,b,E){return A&&A.kind==="return"&&!A.expr?(dn(A,E),!0):!1}(0,0,d,0,i)||Ql(r,l,d,m,i,a)||function(v,_,A,b,E,wt){var Rt=_&&!$y(E,wt.locEnd(_),wt.locStart(b));return(!_||!Rt)&&v&&v.kind==="retif"&&A?(fn(A,b),!0):!1}(d,l,m,i,r,a)||ha(r,l,d,m,i,a)||da(r,l,d,m,i,a)||Kl(d,m,i)||la(d,m,i)||ca(r,l,d,m,i)||ua(r,d,m,i,a)||function(v,_){return v&&v.kind==="entry"?(fn(v,_),!0):!1}(d,i)||function(v,_,A){return _&&_.kind==="call"&&v&&_.what===v&&_.arguments.length>0?(fn(_.arguments[0],A),!0):!1}(l,d,i)||function(v,_,A){if(v&&v.kind==="assign"&&_){var b=v.loc.start.offset+v.loc.source.indexOf("=");if(A.loc.start.offset>b)return fn(_,A),!0}return!1}(d,m,i)||fa(d,l,m,i)||zl(d,l,m,i)||$l(d,l,m,i)||jl(d,i)},handleRemainingComment:function(i,r,a){var l=i.precedingNode,d=i.enclosingNode,m=i.followingNode;return ha(r,l,d,m,i,a)||da(r,l,d,m,i,a)||function(v,_,A,b){var E=Zs(v,A,b);return v.charAt(E)!==")"?!1:_&&(_.kind==="function"||_.kind==="closure"||_.kind==="method"||_.kind==="call"||_.kind==="new")&&_.arguments.length===0?(wi(_,A),!0):!1}(r,d,i,a)||la(d,m,i)||function(v,_,A){return v&&v.kind==="traituse"&&v.adaptations&&!v.adaptations.length?(wi(v,A),!0):!1}(d,0,i)||ca(r,l,d,m,i)||ua(r,d,m,i,a)||jl(d,i)||function(v,_,A,b){return _&&_.kind==="halt"?(wi(_,b),!0):v&&v.kind==="halt"?(wi(v,b),!0):!1}(l,d,0,i)||function(v,_){return v&&(v.kind==="continue"||v.kind==="break")&&!v.label?(dn(v,_),!0):!1}(d,i)||fa(d,l,m,i)||zl(d,l,m,i)},getCommentChildNodes:function(i){return u(i)!=="object"?[]:function(r){return Object.keys(r).filter(function(a){return a!=="kind"&&a!=="loc"&&a!=="errors"&&a!=="extra"&&a!=="comments"&&a!=="leadingComments"&&a!=="enclosingNode"&&a!=="precedingNode"&&a!=="followingNode"}).map(function(a){return r[a]})}(i)},canAttachComment:function(i){return i.kind&&i.kind!=="commentblock"&&i.kind!=="commentline"},isBlockComment:function(i){return i.kind==="commentblock"},printDanglingComments:function(i,r,a,l){var d=[],m=i.getValue();return m&&m.comments?(i.each(function(v){var _=v.getValue();!_||_.leading||_.trailing||l&&!l(_)||d.push(pa(v,r))},"comments"),d.length===0?"":a?ql(En,d):Jy([En,ql(En,d)])):""},hasLeadingComment:function(i){return i.comments&&i.comments.some(function(r){return r.leading})},hasTrailingComment:function(i){return i.comments&&i.comments.some(function(r){return r.trailing})},hasLeadingOwnLineComment:function(i,r,a){return r.comments&&r.comments.some(function(l){return l.leading&&Lr(i,a.locEnd(l))})},printComments:function(i,r){var a=[];return i.forEach(function(l,d,m){l.printed=!0;var v=m.length===d+1;a.push(l.value),v||a.push(En),Zy(r.originalText,l,r)&&!v&&a.push(En)}),a},printAllComments:function(i,r,a,l){var d=i.getValue(),m=r(i),v=d&&d.comments;if(!v||v.length===0)return Jl(i,a,m);var _=[],A=[l?";":"",m];return i.each(function(b){var E=b.getValue(),wt=E.leading,Rt=E.trailing;if(wt){var le=function(Ft,Ee,Jt){var be=Ft.getValue(),Ae=pa(Ft,Jt);return Ae?Jt.printer.isBlockComment&&Jt.printer.isBlockComment(be)?[Ae,Lr(Jt.originalText,Jt.locEnd(be))?En:" "]:[Ae,En]:""}(b,0,a);if(!le)return;_.push(le);var _e=a.originalText;Lr(_e,zy(_e,a.locEnd(E)))&&_.push(En)}else Rt&&A.push(function(Ft,Ee,Jt){var be=Ft.getValue(),Ae=pa(Ft,Jt);if(!Ae)return"";var Te=Jt.printer.isBlockComment&&Jt.printer.isBlockComment(be);if(Lr(Jt.originalText,Jt.locStart(be),{backwards:!0})){var Xt=tC(Jt.originalText,be,Jt);return Yl([En,Xt?En:"",Ae])}return Te?[" ",Ae]:[Yl([" ",Ae]),Te?"":Xy]}(b,0,a))},"comments"),Jl(i,a,_.concat(A))}};function Xl(){}Xl.strictEqual=function(){};var iC=Xl,Zl=ae.getPrecedence,nC=ae.shouldFlatten,sC=ae.isBitwiseOperator,tu=function(i){var r=i.getParentNode();if(!r)return!1;var a=i.getName(),l=i.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(r.kind))return!1;switch(l.kind){case"pre":case"post":if(r.kind==="unary")return l.kind==="pre"&&(l.type==="+"&&r.type==="+"||l.type==="-"&&r.type==="-");case"unary":switch(r.kind){case"unary":return l.type===r.type&&(l.type==="+"||l.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;case"bin":return r.type==="**"&&a==="left";default:return!1}case"bin":switch(r.kind){case"assign":case"retif":return["and","xor","or"].includes(l.type);case"silent":case"cast":return l.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return a==="what"&&r.what===l;case"bin":var d=r.type,m=Zl(d),v=l.type,_=Zl(v);return m>_||d==="||"&&v==="&&"||(m===_&&a==="right"?(iC.strictEqual(r.right,l),!0):m===_&&!nC(d,v)||(m<_&&v==="%"?d==="+"||d==="-":!!sC(d)));default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return r.kind==="call"&&a==="what"&&r.what===l&&l.parenthesizedExpression;case"clone":case"new":switch(r.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;default:return!1}case"yield":switch(r.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;case"retif":return r.test===l;default:return!(!l.key&&!l.value)}case"assign":return(r.kind!=="for"||!r.init.includes(l)&&!r.increment.includes(l))&&r.kind!=="assign"&&r.kind!=="static"&&!["if","do","while","foreach","switch"].includes(r.kind)&&r.kind!=="silent"&&r.kind!=="call";case"retif":switch(r.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(a==="test"&&!r.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;default:return!1}case"closure":switch(r.kind){case"call":return a==="what"&&r.what===l;case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return l.parenthesizedExpression;case"string":case"array":switch(r.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(l.kind)||r.kind!=="offsetlookup")&&a==="what"&&r.what===l;default:return!1}case"print":case"include":return r.kind==="bin"}return!1},Fi=s.default.doc.builders,eu=Fi.breakParent,oi=Fi.join,xe=Fi.line,rC=Fi.lineSuffix,Ct=Fi.group,Ds=Fi.conditionalGroup,Dt=Fi.indent,oC=Fi.dedent,zn=Fi.ifBreak,gt=Fi.hardline,ie=Fi.softline,Rs=Fi.literalline,aC=Fi.align,hC=Fi.dedentToRoot,$n=s.default.doc.utils.willBreak,_a=s.default.util,lC=_a.isNextLineEmptyAfterIndex,uC=_a.hasNewline,iu=_a.hasNewlineInRange,Jn=ae.getLast,cC=ae.getPenultimate,nu=ae.isLastStatement,fC=ae.lineShouldEndWithSemicolon,dC=ae.printNumber,su=ae.shouldFlatten,ru=ae.maybeStripLeadingSlashFromUse,pC=ae.fileShouldEndWithHardline,Wi=ae.hasDanglingComments,ou=ae.hasLeadingComment,au=ae.hasTrailingComment,hu=ae.docShouldHaveTrailingNewline,Bi=ae.isLookupNode,ma=ae.isFirstChildrenInlineNode,_C=ae.shouldPrintHardLineAfterStartInControlStructure,mC=ae.shouldPrintHardLineBeforeEndInControlStructure,TC=ae.getAlignment,Ta=ae.isProgramLikeNode,ws=ae.getNodeKindIncludingLogical,gC=ae.useDoubleQuote,lu=ae.hasEmptyBody,kC=ae.isNextLineEmptyAfterNamespace,uu=ae.shouldPrintHardlineBeforeTrailingComma,ga=ae.isDocNode,ka=ae.getAncestorNode,xa=ae.isReferenceLikeNode,xC=ae.getNextNode,EC=ae.normalizeMagicMethodName,vC=ae.getNextNonSpaceNonCommentCharacterIndex,ds=ae.isNextLineEmpty;function Fs(i,r){return parseFloat(i)>=parseFloat(r)}function tr(i,r){return!!i.trailingCommaPHP&&Fs(i.phpVersion,r)}function Ea(i){return i.braceStyle!=="1tbs"}function va(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return[l?"?":"","->",i.call(a,"offset")]}function cu(i,r,a){return va(i,r,a,!0)}function fu(i,r,a){var l=i.getValue(),d=!["variable","identifier"].includes(l.offset.kind);return["::",d?"{":"",i.call(a,"offset"),d?"}":""]}function du(i,r,a){var l=i.getValue(),d=l.offset&&l.offset.kind==="number"||ka(i,"encapsed");return["[",l.offset?Ct([Dt([d?"":ie,i.call(a,"offset")]),d?"":ie]):"","]"]}function pu(i){return i.kind==="array"&&(i.items.length>0||i.comments)||i.kind==="function"||i.kind==="method"||i.kind==="closure"}function yC(i){var r=Jn(i),a=cC(i);return!ou(r)&&!au(r)&&pu(r)&&(!a||a.kind!==r.kind)}function CC(i){if(i.length!==2)return!1;var r=T(i,2),a=r[0],l=r[1];return!(a.comments&&a.comments.length||a.kind!=="function"&&a.kind!=="method"&&a.kind!=="closure"||l.kind==="retif"||pu(l))}function vn(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",d=i.getValue()[l];if(d.length===0)return["(",ee.printDanglingComments(i,r,!0),")"];var m=!1,v=!1,_=d.length-1,A=i.map(function(Te,Xt){var ve=Te.getNode(),Re=[a(Te)];return Xt===_||(ds(r.originalText,ve,r)?(Xt===0&&(v=!0),m=!0,Re.push(",",gt,gt)):Re.push(",",xe)),Re},l),b=i.getValue(),E=Jn(d),wt=tr(r,"7.3")&&["call","new","unset","isset"].includes(b.kind)||tr(r,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(b.kind)?Dt([E&&uu(E)?gt:"",","]):"";function Rt(){return Ct(["(",Dt([xe].concat(k(A))),wt,xe,")"],{shouldBreak:!0})}var le=CC(d),_e=yC(d);if(le||_e){var Ft,Ee=(le?A.slice(1).some($n):A.slice(0,-1).some($n))||m,Jt=0;i.each(function(Te){le&&Jt===0&&(Ft=[Te.call(function(Xt){return a(Xt,{expandFirstArg:!0})}),A.length>1?",":"",v?gt:xe,v?gt:"",A.slice(1)]),_e&&Jt===d.length-1&&(Ft=[].concat(k(A.slice(0,-1)),[Te.call(function(Xt){return a(Xt,{expandLastArg:!0})})])),Jt++},l);var be=A.some($n),Ae=["("].concat(k(Ft),[")"]);return[be?eu:"",Ds([be?zn(Rt(),Ae):Ae,le?["(",Ct(Ft[0],{shouldBreak:!0})].concat(k(Ft.slice(1)),[")"]):["("].concat(k(A.slice(0,-1)),[Ct(Jn(Ft),{shouldBreak:!0}),")"]),Ct(["(",Dt([xe].concat(k(A))),zn(wt),xe,")"],{shouldBreak:!0})],{shouldBreak:Ee})]}return Ct(["(",Dt([ie].concat(k(A))),zn(wt),ie,")"],{shouldBreak:A.some($n)||m})}function _u(i){return i.kind==="array"&&i.items.length!==0}function er(i){return i.right.kind==="array"&&i.right.items.length!==0}function mu(i,r,a,l,d){var m=[],v=i.getValue();if(v.kind==="bin"){su(v.type,v.left.type)?m=m.concat(i.call(function(wt){return mu(wt,r,a,!0,d)},"left")):m.push(i.call(r,"left"));var _=er(v)?[v.type," ",i.call(r,"right")]:[v.type,xe,i.call(r,"right")],A=i.getParentNode(),b=!(d&&["||","&&"].includes(v.type))&&ws(A)!==ws(v)&&ws(v.left)!==ws(v)&&ws(v.right)!==ws(v),E=ga(v.left)||v.left.kind==="bin"&&ga(v.left.right);m.push(E?"":" ",b?Ct(_):_),l&&v.comments&&(m=ee.printAllComments(i,function(){return m},a))}else m.push(i.call(r));return m}function Tu(i,r,a){var l=i.getValue();switch(l.kind){case"propertylookup":return va(i,r,a);case"nullsafepropertylookup":return cu(i,r,a);case"staticlookup":return fu(i,0,a);case"offsetlookup":return du(i,0,a);default:return"Have not implemented lookup kind ".concat(l.kind," yet.")}}function gu(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.opening,l=a===void 0||a;if(i.type==="heredoc")return l?"<<<".concat(i.label):i.label;var d={string:'"',shell:"`"};return d[i.type]?d[i.type]:"Unimplemented encapsed type ".concat(i.type)}function NC(i,r,a){var l=[],d=[];return i.each(function(m){l.push(d),l.push(Ct(a(m))),d=[",",xe],m.getValue()&&ds(r.originalText,m.getValue(),r)&&d.push(ie)},"items"),l}function bC(i,r){if(r.length===0)return i;var a=0;return r.reduce(function(l,d){var m=d.start,v=d.end,_=d.alignment,A=d.before,b=d.after,E=[A||""].concat(k(i.slice(m,v)),[b||""]),wt=l.concat(i.slice(a,m),_?hC(Ct(aC(new Array(_).join(" "),E))):Ct(E),v===i.length-1?i.slice(v):"");return a=v,wt},[])}function ir(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",d=i.getValue(),m=i.getParentNode(),v=-1,_=[],A=[];i.map(function(Te,Xt){var ve=Te.getValue(),Re=ve.kind==="inline",nn=a(Te),ci=d[l],nt=ci[Xt+1],it=!nu(Te)&&!Re&&(nt&&nt.kind==="case"?!ma(i):nt&&nt.kind!=="inline"),Vt=[nn,it?gt:"",it&&ds(r.originalText,ve,r)?gt:""],Wt=Xt===0,Ot=ci.length-1===Xt,Ce=d.kind==="block"&&m&&["function","closure","method","try","catch"].includes(m.kind),Le=Ce&&Wt?"":" ";if(Re||!Re&&Ot&&v>=0){var qe=v;if(Re&&(v=Xt),Re&&!Wt||!Re&&Ot){var fi=(Re?qe:v)+1,re=Ot&&!Re?Xt+1:Xt,Me=ci[Re?qe:v],Ai=Me?TC(Me.raw):"",Zn=re-fi>1,ts=Zn?Ce&&!Me||Ta(d)&&fi===0?"":gt:"",sn=Zn&&ve.kind!=="halt"?Ce&&Ot?"":gt:"";Zn&&(Le=""),A.push({start:fi,end:re,alignment:Ai,before:ts,after:sn})}}if(Re){var Yi=nt&&nt.kind==="echo"&&nt.shortForm?"<?=":"<?php",Mr=ve.leadingComments&&ve.leadingComments.length?[Wt&&d.kind!=="namespace"&&!Ce?"<?php":"",d.kind!=="namespace"&&Ce?"":gt,ee.printComments(ve.leadingComments,r),gt,"?>"]:Ta(d)&&Wt&&d.kind!=="namespace"?"":[Le,"?>"],Bn=i.getNode(Xt+1),Us=Bn&&Bn.children&&Bn.children.length;Vt=[Mr,Vt,ve.comments&&ve.comments.length?[Yi,gt,Us?ee.printComments(ve.comments,r):"",gt]:Ta(d)&&Ot?"":[Yi," "]]}_.push(Vt)},l);var b=bC(_,A);if(d.kind==="program"&&!d.extra.parseAsEval){var E=[],wt=T(d.children,1),Rt=wt[0],le=!Rt||Rt.kind!=="inline";if(le){var _e=r.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),Ft=[_e&&_e[2]&&_e[2].includes(`
`)?[gt,_e[2].split(`
`).length>2?gt:""]:" ",d.comments?ee.printComments(d.comments,r):""],Ee=Rt&&Rt.kind==="echo"&&Rt.shortForm;E.push([Ee?"<?=":"<?php",Ft])}E.push(b);var Jt=/\?>\n?$/.test(r.originalText);if(Jt){var be=Jn(d.children),Ae=be?[iu(r.originalText.trimEnd(),r.locEnd(be),r.locEnd(d))?be.kind==="inline"&&be.comments&&be.comments.length?"":gt:" ",ds(r.originalText,be,r)?gt:""]:d.comments?gt:"";E.push(rC([Ae,"?>"]))}return E}return b}function ku(i,r,a,l){return i.map(function(d){var m=[];return m.push(a(d)),nu(d)||(m.push(gt),ds(r.originalText,d.getValue(),r)&&m.push(gt)),m},l)}function en(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",m=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",v=i.getValue(),_=Wi(v[l])?[gt,i.call(function(b){return ee.printDanglingComments(b,r,!0)},l),gt]:d,A=Array.isArray(v[l])?Ct(oi(",",i.map(function(b){var E=a(b);return Wi(b.getValue())?[gt,ee.printDanglingComments(b,r,!0),gt,E]:[m,E]},l))):[m,i.call(a,l)];return Dt([_,l,$n(_)?Dt(A):A])}function Xn(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=l.inline,m=d!==void 0&&d,v=[];return i.getValue().attrGroups?(i.each(function(_){var A=["#["];!m&&v.length>0&&v.push(gt),A.push(ie),_.each(function(b){var E=b.getValue();A.length>2&&A.push(",",xe);var wt=[E.name];E.args.length>0&&wt.push(vn(b,r,a,"args")),A.push(Ct(wt))},"attrs"),v.push(Ct([Dt(A),zn(tr(r,"8.0")?",":""),ie,"]",m?zn(ie," "):""]))},"attrGroups"),v.length===0?[]:[].concat(v,[m?"":gt])):[]}function Fn(i,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",d=i.getValue();if(!d[l])return";";var m=i.call(a,l);return[d.shortForm?":":" {",Dt(d[l].kind!=="block"||d[l].children&&d[l].children.length>0||d[l].comments&&d[l].comments.length>0?[_C(i)?d.kind==="switch"?" ":"":gt,m]:""),d.kind==="if"&&l==="body"?"":[mC(i)?gt:"",d.shortForm?["end",d.kind,";"]:"}"]]}function Dr(i,r,a,l,d,m,v){if(!l)return r;var _=Rr(i,l,d,m,v);return Ct([r,a,_])}function xu(i){return!!Bi(i)&&(!(i.what.kind!=="variable"&&!xa(i.what))||xu(i.what))}function Rr(i,r,a,l,d){var m=l?"&":"";if(ee.hasLeadingOwnLineComment(d.originalText,r,d))return Dt([gt,m,a]);var v=r.kind==="cast"?r.expr:r;return v.kind==="bin"&&!er(v)||v.kind==="retif"&&(!v.trueExpr&&!_u(v.falseExpr)||v.test.kind==="bin"&&!er(v.test))||(i.kind==="variable"||i.kind==="string"||Bi(i))&&(v.kind==="string"&&!Eu(v)||xu(v))?Ct(Dt([xe,m,a])):[" ",m,a]}function Eu(i){return i.raw.includes(`
`)}function wr(i,r,a){return(i.kind==="string"||i.kind==="encapsed"&&(i.type==="string"||i.type==="shell"))&&Eu(i)&&!uC(r,a.locStart(i),{backwards:!0})}function vu(i,r,a){return Ct(i.map(function(l,d){return d===0?[i.call(r)]:[a,i.call(r)]},"types"))}var AC=function(i,r,a){var l=i.getValue();if(!l)return"";if(typeof l=="string")return l;var d=function(_,A,b){var E=_.getValue();switch(E.kind){case"program":return Ct([ir(_,A,b),ee.printDanglingComments(_,A,!0,function(ct){return!ct.printed})]);case"expressionstatement":return _.call(b,"expression");case"block":return[ir(_,A,b),ee.printDanglingComments(_,A,!0)];case"declare":var wt=function(ct){return oi(", ",ct.map(function(Kt){return b(Kt)},"directives"))};if(["block","short"].includes(E.mode))return["declare(",wt(_),")",E.mode==="block"?" {":":",E.children.length>0?Dt([gt,ir(_,A,b)]):"",ee.printDanglingComments(_,A),gt,E.mode==="block"?"}":"enddeclare;"];var Rt=xC(_,E);return["declare(",wt(_),")",Rt&&Rt.kind==="inline"?"":";"];case"declaredirective":return[_.call(b,"key"),"=",_.call(b,"value")];case"namespace":return["namespace ",E.name&&typeof E.name=="string"?[E.name,E.withBrackets?" ":""]:"",E.withBrackets?"{":";",Wi(E)?[" ",ee.printDanglingComments(_,A,!0)]:"",E.children.length>0?E.withBrackets?Dt([gt,ir(_,A,b)]):[E.children[0].kind==="inline"?"":[gt,kC(A.originalText,E,A.locStart)?gt:""],ir(_,A,b)]:"",E.withBrackets?[gt,"}"]:""];case"usegroup":return Ct(["use ",E.type?[E.type," "]:"",Dt([E.name?[ru(E.name),"\\{",ie]:"",oi([",",xe],_.map(function(ct){return b(ct)},"items"))]),E.name?[zn(tr(A,"7.2")?",":""),ie,"}"]:""]);case"useitem":return[E.type?[E.type," "]:"",ru(E.name),Wi(E)?[" ",ee.printDanglingComments(_,A,!0)]:"",E.alias?[" as ",_.call(b,"alias")]:""];case"class":case"enum":case"interface":case"trait":return function(ct,Kt,ue){var mt=ct.getValue(),Ii=mt.kind==="class"&&mt.isAnonymous,Ze=Xn(ct,Kt,ue,{inline:Ii}),ai=Ii?[]:k(Ze);mt.isReadonly&&ai.push("readonly "),mt.isFinal&&ai.push("final "),mt.isAbstract&&ai.push("abstract "),ai.push(Ii?"":mt.kind),mt.name&&ai.push(" ",ct.call(ue,"name")),mt.kind==="enum"&&mt.valueType&&ai.push(": ",ct.call(ue,"valueType")),mt.extends&&mt.implements?ai.push(Ds([[en(ct,Kt,ue,"extends"),en(ct,Kt,ue,"implements")],[en(ct,Kt,ue,"extends"),en(ct,Kt,ue,"implements"," ",gt)],[en(ct,Kt,ue,"extends",gt," "),en(ct,Kt,ue,"implements",gt,mt.implements.length>1?gt:" ")]],{shouldBreak:Wi(mt.extends)})):(mt.extends&&ai.push(Ds([en(ct,Kt,ue,"extends"),en(ct,Kt,ue,"extends"," ",gt),en(ct,Kt,ue,"extends",gt,mt.extends.length>1?gt:" ")])),mt.implements&&ai.push(Ds([en(ct,Kt,ue,"implements"),en(ct,Kt,ue,"implements"," ",gt),en(ct,Kt,ue,"implements",gt,mt.implements.length>1?gt:" ")])));var Qi=Ct([Ct(ai),Ea(Kt)?Ii?xe:gt:" "]),Pe=mt.body&&mt.body.length===0&&!Wi(mt),vi=["{",Dt([Pe?"":gt,ku(ct,Kt,ue,"body")]),ee.printDanglingComments(ct,Kt,!0),Ii&&Pe?ie:gt,"}"];return[Qi,vi]}(_,A,b);case"traitprecedence":return[_.call(b,"trait"),"::",_.call(b,"method")," insteadof ",oi(", ",_.map(b,"instead"))];case"traitalias":return[E.trait?[_.call(b,"trait"),"::"]:"",E.method?_.call(b,"method"):""," as ",oi(" ",[].concat(k(E.visibility?[E.visibility]:[]),k(E.as?[_.call(b,"as")]:[])))];case"traituse":return Ct(["use ",Dt(Ct(oi([",",xe],_.map(b,"traits")))),E.adaptations?[" {",E.adaptations.length>0?[Dt([gt,ku(_,A,b,"adaptations")]),gt]:Wi(E)?[xe,ee.printDanglingComments(_,A,!0),xe]:"","}"]:""]);case"function":case"closure":case"method":return function(ct,Kt,ue){var mt=ct.getValue(),Ii=Xn(ct,Kt,ue,{inline:mt.kind==="closure"}),Ze=[];mt.isFinal&&Ze.push("final "),mt.isAbstract&&Ze.push("abstract "),mt.visibility&&Ze.push(mt.visibility," "),mt.isStatic&&Ze.push("static "),Ze.push("function "),mt.byref&&Ze.push("&"),mt.name&&Ze.push(ct.call(ue,"name")),Ze.push(vn(ct,Kt,ue)),mt.uses&&mt.uses.length>0&&Ze.push(Ct([" use ",vn(ct,Kt,ue,"uses")])),mt.type&&Ze.push([": ",Wi(mt.type)?[ct.call(function(vi){return ee.printDanglingComments(vi,Kt,!0)},"type")," "]:"",mt.nullable?"?":"",ct.call(ue,"type")]);var ai=Ze;if(!mt.body)return[].concat(k(Ii),[ai]);var Qi=mt.kind==="closure",Pe=["{",Dt([lu(ct)?"":gt,ct.call(ue,"body")]),Qi&&lu(ct)?"":gt,"}"];return Qi?[].concat(k(Ii),[ai," ",Pe]):mt.arguments.length===0?[].concat(k(Ii),[ai,Ea(Kt)?gt:" ",Pe]):Ze.some($n)?[ai," ",Pe]:[].concat(k(Ii),[Ds([[ai,Ea(Kt)?gt:" ",Pe],[ai," ",Pe]])])}(_,A,b);case"arrowfunc":return[E.parenthesizedExpression?"(":""].concat(k(Xn(_,A,b,{inline:!0})),[E.isStatic?"static ":"","fn",vn(_,A,b),E.type?[": ",E.nullable?"?":"",_.call(b,"type")]:""," => ",_.call(b,"body"),E.parenthesizedExpression?")":""]);case"parameter":var le="";E.flags===1?le="public ":E.flags===2?le="protected ":E.flags===4&&(le="private ");var _e=[].concat(k(Xn(_,A,b,{inline:!0})),[le,E.readonly?"readonly ":"",E.nullable?"?":"",E.type?[_.call(b,"type")," "]:"",E.byref?"&":"",E.variadic?"...":"","$",_.call(b,"name")]);return E.value?Ct([_e,Wi(E)?" ":"",ee.printDanglingComments(_,A,!0)," =",Rr(E.name,E.value,_.call(b,"value"),!1,A)]):_e;case"variadic":return["...",_.call(b,"what")];case"property":return Ct([E.readonly?"readonly ":"",E.type?[E.nullable?"?":"",_.call(b,"type")," "]:"","$",_.call(b,"name"),E.value?[" =",Rr(E.name,E.value,_.call(b,"value"),!1,A)]:""]);case"propertystatement":var Ft=[];_.map(function(ct){return Ft.push.apply(Ft,k(Xn(ct,A,b)))},"properties");var Ee,Jt=_.map(function(ct){return b(ct)},"properties"),be=E.properties.some(function(ct){return ct.value});Jt.length!==1||E.properties[0].comments?Jt.length>0&&(Ee=Dt(Jt[0])):Ee=T(Jt,1)[0];var Ae=E.visibility||E.visibility===null;return Ct([].concat(Ft,[Ae?[E.visibility===null?"var":E.visibility,""]:"",E.isStatic?[Ae?" ":"","static"]:"",Ee?[" ",Ee]:"",Dt(Jt.slice(1).map(function(ct){return[",",be?gt:xe,ct]}))]));case"if":var Te=[],Xt=Fn(_,A,b,"body"),ve=Ct(["if (",Ct([Dt([ie,_.call(b,"test")]),ie]),")",Xt]);if(Te.push(ve,ma(_)||!E.body?"":gt),E.alternate){Te.push(E.shortForm?"":"} ");var Re=au(E.body)&&E.body.comments.some(function(ct){return ct.trailing&&!ee.isBlockComment(ct)})||function(ct){if(!ct.comments)return!1;var Kt=Jn(ct.comments.filter(function(ue){return!ue.leading&&!ue.trailing}));return Kt&&!ee.isBlockComment(Kt)}(E),nn=!Re;Te.push(nn?"":gt),Wi(E)&&Te.push(ds(A.originalText,E.body,A)?gt:"",ee.printDanglingComments(_,A,!0),Re?gt:" "),Te.push("else",Ct(E.alternate.kind==="if"?_.call(b,"alternate"):Fn(_,A,b,"alternate")))}else Te.push(E.body?E.shortForm?"endif;":"}":"");return Te;case"do":return["do",Fn(_,A,b,"body")," while (",Ct([Dt([ie,_.call(b,"test")]),ie]),")"];case"while":case"switch":return Ct([E.kind," (",Ct([Dt([ie,_.call(b,"test")]),ie]),")",Fn(_,A,b,"body")]);case"for":var ci=Fn(_,A,b,"body"),nt=ee.printDanglingComments(_,A,!0),it=nt?[nt,ie]:"";return E.init.length||E.test.length||E.increment.length?[it,Ct(["for (",Ct([Dt([ie,Ct(oi([",",xe],_.map(b,"init"))),";",xe,Ct(oi([",",xe],_.map(b,"test"))),";",xe,Ct(oi([",",xe],_.map(b,"increment")))]),ie]),")",ci])]:[it,Ct(["for (;;)",ci])];case"foreach":var Vt=Fn(_,A,b,"body"),Wt=ee.printDanglingComments(_,A,!0);return[Wt?[Wt,ie]:"",Ct(["foreach (",Ct([Dt([ie,_.call(b,"source"),xe,"as ",Ct(E.key?Dt(oi([" =>",xe],[_.call(b,"key"),_.call(b,"value")])):_.call(b,"value"))]),ie]),")",Vt])];case"try":var Ot=[];return Ot.push("try",Fn(_,A,b,"body")),E.catches&&Ot.push(_.map(b,"catches")),E.always&&Ot.push(" finally",Fn(_,A,b,"always")),Ot;case"catch":return[" catch",E.what?[" (",oi(" | ",_.map(b,"what")),E.variable?[" ",_.call(b,"variable")]:"",")"]:"",Fn(_,A,b,"body")];case"case":return[E.test?["case ",E.test.comments?Dt(_.call(b,"test")):_.call(b,"test"),":"]:"default:",E.body&&E.body.children&&E.body.children.length?Dt([ma(_)?"":gt,_.call(b,"body")]):""];case"break":case"continue":return E.level&&E.level.kind==="number"&&E.level.value!=="1"?["".concat(E.kind," "),_.call(b,"level")]:E.kind;case"call":return E.arguments.length===1&&wr(E.arguments[0],A.originalText,A)?[_.call(b,"what"),"(",oi(", ",_.map(b,"arguments")),")"]:Bi(E.what)?function(ct,Kt,ue){var mt=[];function Ii(he){var We=Kt.originalText,hi=vC(We,he,Kt);return We.charAt(hi)===")"?lC(We,hi+1,Kt):ds(We,he,Kt)}function Ze(he){var We=he.getValue();if(We.kind!=="call"||!Bi(We.what)&&We.what.kind!=="call")if(Bi(We)){var hi=null;hi=We.kind==="propertylookup"?va(he,Kt,ue):We.kind==="nullsafepropertylookup"?cu(he,Kt,ue):We.kind==="staticlookup"?fu(he,Kt,ue):du(he,Kt,ue),mt.unshift({node:We,needsParens:tu(he),printed:ee.printAllComments(he,function(){return hi},Kt)}),he.call(function(rr){return Ze(rr)},"what")}else mt.unshift({node:We,printed:he.call(ue)});else mt.unshift({node:We,printed:[ee.printAllComments(he,function(){return vn(he,Kt,ue)},Kt),Ii(We)?gt:""]}),he.call(function(rr){return Ze(rr)},"what")}var ai=ct.getValue();mt.unshift({node:ai,printed:vn(ct,Kt,ue)}),ct.call(function(he){return Ze(he)},"what");for(var Qi=0;Qi<mt.length;++Qi)mt[Qi].node.kind==="call"&&mt[Qi-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(mt[Qi-1].node.kind)&&mt[Qi-1].needsParens&&(mt[0].printed=["(",mt[0].printed],mt[Qi-1].printed=[mt[Qi-1].printed,")"]);for(var Pe=[],vi=[mt[0]],He=1;He<mt.length&&(mt[He].node.kind==="call"||Bi(mt[He].node)&&mt[He].node.offset&&mt[He].node.offset.kind==="number");++He)vi.push(mt[He]);if(mt[0].node.kind!=="call")for(;He+1<mt.length&&Bi(mt[He].node)&&Bi(mt[He+1].node);++He)vi.push(mt[He]);Pe.push(vi),vi=[];for(var Kr=!1;He<mt.length;++He){if(Kr&&Bi(mt[He].node)){if(mt[He].node.kind==="offsetlookup"&&mt[He].node.offset&&mt[He].node.offset.kind==="number"){vi.push(mt[He]);continue}Pe.push(vi),vi=[],Kr=!1}mt[He].node.kind==="call"&&(Kr=!0),vi.push(mt[He]),mt[He].node.comments&&ee.hasTrailingComment(mt[He].node)&&(Pe.push(vi),vi=[],Kr=!1)}vi.length>0&&Pe.push(vi);function bN(he){var We=he[1].length&&he[1][0].node.kind==="offsetlookup";if(he[0].length===1){var hi=he[0][0].node;return hi.kind==="variable"&&(hi.name==="this"||AN&&rr(hi.name))||xa(hi)}function rr(LN){return LN.length<Kt.tabWidth}var La=Jn(he[0]).node;return Bi(La)&&(La.offset.kind==="identifier"||La.offset.kind==="variable")&&We}var AN=ct.getParentNode().kind==="expressionstatement",zr=Pe.length>=2&&!Pe[1][0].node.comments&&bN(Pe);function $r(he){for(var We=[],hi=0;hi<he.length;hi++)he[hi+1]&&he[hi+1].needsParens?(We.push("(",he[hi].printed,he[hi+1].printed,")"),hi++):We.push(he[hi].printed);return We}function IN(he){return he.length===0?"":Dt(Ct([gt,oi(gt,he.map($r))]))}var lc=Pe.map($r),Oa=lc,Jr=zr?3:2,uc=Pe.slice(0,Jr).flat(),cc=uc.slice(1,-1).some(function(he){return ee.hasLeadingComment(he.node)})||uc.slice(0,-1).some(function(he){return ee.hasTrailingComment(he.node)})||Pe[Jr]&&ee.hasLeadingComment(Pe[Jr][0].node),SN=ka(ct,"encapsed");if(Pe.length<=Jr&&!cc||SN)return Ct(Oa);var fc=Jn(zr?Pe.slice(1,2)[0]:Pe[0]).node,dc=fc.kind!=="call"&&Ii(fc),pc=[$r(Pe[0]),zr?Pe.slice(1,2).map($r):"",dc?gt:"",IN(Pe.slice(zr?2:1))],ON=mt.filter(function(he){return he.node.kind==="call"}).length;return cc||ON>=3||lc.slice(0,-1).some($n)?Ct(pc):[$n(Oa)||dc?eu:"",Ds([Oa,pc])]}(_,A,b):[_.call(b,"what"),vn(_,A,b)];case"new":var Ce=E.what&&E.what.kind==="class"&&E.what.isAnonymous;if(!Ce&&E.arguments.length===1&&wr(E.arguments[0],A.originalText,A))return["new "].concat(k(_.call(Xn,"what")),[_.call(b,"what"),"(",oi(", ",_.map(b,"arguments")),")"]);var Le=[];if(Le.push("new "),Ce)Le.push.apply(Le,[E.what.leadingComments&&E.what.leadingComments[0].kind==="commentblock"?[ee.printComments(E.what.leadingComments,A)," "]:""].concat(k(_.call(function(ct){return Xn(ct,A,b,{inline:!0})},"what")),["class",E.arguments.length>0?[" ",vn(_,A,b)]:"",Ct(_.call(b,"what"))]));else{var qe=["call","offsetlookup"].includes(E.what.kind),fi=[qe?"(":"",_.call(b,"what"),qe?")":"",vn(_,A,b)];Le.push(ou(E.what)?Dt(fi):fi)}return Le;case"clone":return["clone ",E.what.comments?Dt(_.call(b,"what")):_.call(b,"what")];case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var re,Me=_.getParentNode(),Ai=0;do re=_.getParentNode(Ai),Ai++;while(re&&Bi(re));var Zn=ka(_,"encapsed")||re&&(re.kind==="new"||re.kind==="assign"&&re.left.kind!=="variable")||E.kind==="offsetlookup"||(xa(E.what)||E.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(E.offset.kind)&&Me&&!Bi(Me);return[_.call(b,"what"),Zn?Tu(_,A,b):Ct(Dt([ie,Tu(_,A,b)]))];case"exit":return Ct([E.useDie?"die":"exit","(",E.expression?wr(E.expression,A.originalText,A)?_.call(b,"expression"):[Dt([ie,_.call(b,"expression")]),ie]:ee.printDanglingComments(_,A),")"]);case"global":return Ct(["global ",Dt(oi([",",xe],_.map(b,"items")))]);case"include":return[E.require?"require":"include",E.once?"_once":""," ",E.target.comments?Dt(_.call(b,"target")):_.call(b,"target")];case"label":return[_.call(b,"name"),":"];case"goto":return["goto ",_.call(b,"label")];case"throw":return["throw ",E.what.comments?Dt(_.call(b,"what")):_.call(b,"what")];case"silent":return["@",_.call(b,"expr")];case"halt":return[Wi(E)?[ee.printDanglingComments(_,A,!0),gt]:"","__halt_compiler();",E.after];case"eval":return Ct(["eval(",wr(E.source,A.originalText,A)?_.call(b,"source"):[Dt([ie,_.call(b,"source")]),ie],")"]);case"echo":var ts,sn=_.map(function(ct){return b(ct)},"expressions");return sn.length!==1||E.expressions[0].comments?sn.length>0&&(ts=ga(E.expressions[0])||E.expressions[0].comments?Dt(sn[0]):oC(sn[0])):ts=T(sn,1)[0],Ct([E.shortForm?"":"echo ",ts||"",Dt(sn.slice(1).map(function(ct){return[",",xe,ct]}))]);case"print":return["print ",E.expression.comments?Dt(_.call(b,"expression")):_.call(b,"expression")];case"return":var Yi=[];if(Yi.push("return"),E.expr){var Mr=_.call(b,"expr");Yi.push(" ",E.expr.comments?Dt(Mr):Mr)}return Wi(E)&&Yi.push(" ",ee.printDanglingComments(_,A,!0)),Yi;case"isset":case"unset":return Ct([E.kind,vn(_,A,b,"variables")]);case"empty":return Ct(["empty(",Dt([ie,_.call(b,"expression")]),ie,")"]);case"variable":var Bn=_.getParentNode(),Us=_.getParentNode(1),aN=Bn.kind==="assign"?"":E.byref?"&":"",hN=Bn.kind==="encapsedpart"&&Bn.syntax==="simple"&&Bn.curly||Us&&Bn.kind==="offsetlookup"&&Us.kind==="encapsedpart"&&Us.syntax==="simple"&&Us.curly?"":"$",lN=E.curly?"{":"",uN=E.curly?"}":"";return[aN,hN,lN,_.call(b,"name"),uN];case"constantstatement":case"classconstant":var Hr,cN=Xn(_,A,b),nr=_.map(function(ct){return b(ct)},"constants");return nr.length!==1||E.constants[0].comments?nr.length>0&&(Hr=Dt(nr[0])):Hr=T(nr,1)[0],Ct([].concat(k(cN),[E.visibility?[E.visibility," "]:"","const",Hr?[" ",Hr]:"",Dt(nr.slice(1).map(function(ct){return[",",gt,ct]}))]));case"constant":return Dr(E.name,_.call(b,"name")," =",E.value,_.call(b,"value"),!1,A);case"static":var Vr,sr=_.map(function(ct){return b(ct)},"variables"),fN=E.variables.some(function(ct){return ct.defaultValue});return sr.length!==1||E.variables[0].comments?sr.length>0&&(Vr=Dt(sr[0])):Vr=T(sr,1)[0],Ct(["static",Vr?[" ",Vr]:"",Dt(sr.slice(1).map(function(ct){return[",",fN?gt:xe,ct]}))]);case"staticvariable":return Dr(E.variable,_.call(b,"variable")," =",E.defaultValue,_.call(b,"defaultValue"),!1,A);case"list":case"array":var ju=E.kind==="array"&&Fs(A.phpVersion,"5.4")||E.kind==="list"&&(E.shortForm||Fs(A.phpVersion,"7.1")),Na=ju?"[":[E.kind,"("],ba=ju?"]":")";if(E.items.length===0)return Wi(E)?Ct([Na,ee.printDanglingComments(_,A),ie,ba]):[Na,ba];var Gr=Jn(E.items),Ku=Gr&&Gr.kind==="noop",qr=T(E.items.filter(function(ct){return ct.kind!=="noop"}).sort(function(ct,Kt){return A.locStart(ct)-A.locStart(Kt)}),1)[0],dN=!(!qr||!qr.key)&&qr&&iu(A.originalText,A.locStart(E),A.locStart(qr));return Ct([Na,Dt([ie,NC(_,A,b)]),Ku?",":"",zn(!Ku&&tr(A,"5.0")?[Gr&&uu(Gr)?gt:"",","]:""),ee.printDanglingComments(_,A,!0),ie,ba],{shouldBreak:dN});case"entry":var zu=E.byRef?"&":"",pN=E.unpack?"...":"";return E.key?Dr(E.key,_.call(b,"key")," =>",E.value,_.call(b,"value"),zu,A):[zu,pN,_.call(b,"value")];case"yield":var $u=[E.key?[_.call(b,"key")," => "]:"",_.call(b,"value")];return["yield",E.key||E.value?" ":"",E.value&&E.value.comments?Dt($u):$u];case"yieldfrom":return["yield from ",E.value.comments?Dt(_.call(b,"value")):_.call(b,"value")];case"unary":return[E.type,_.call(b,"what")];case"pre":return[E.type+E.type,_.call(b,"what")];case"post":return[_.call(b,"what"),E.type+E.type];case"cast":return["(",E.type,") ",E.expr.comments?Dt(_.call(b,"expr")):_.call(b,"expr")];case"assignref":case"assign":var Ju=E.kind==="assignref";return Dr(E.left,_.call(b,"left"),[" ",Ju?"=":E.operator],E.right,_.call(b,"right"),Ju,A);case"bin":var rn=_.getParentNode(),Xu=_.getParentNode(1),Zu=E!==rn.body&&(rn.kind==="if"||rn.kind==="while"||rn.kind==="switch"||rn.kind==="do"),Ms=mu(_,b,A,!1,Zu);if(Zu)return Ms;if(rn.kind==="unary"||Bi(rn)&&rn.kind!=="offsetlookup")return Ct([Dt([ie].concat(k(Ms))),ie]);var _N=E!==rn.body&&rn.kind==="for"||rn.kind==="retif"&&Xu&&Xu.kind!=="return",mN=["assign","property","constant","staticvariable","entry"].includes(rn.kind),TN=E.left.kind==="bin"&&su(E.type,E.left.type);if(_N||er(E)&&!TN||!er(E)&&mN)return Ct(Ms);var gN=Ms.slice(1);return Ct([Ms.length>0?Ms[0]:"",Dt(gN)]);case"retif":var Wr,Yr=[],Qr=_.getParentNode(),tc=0;do Wr=_.getParentNode(tc),tc++;while(Wr&&Wr.kind==="retif");var ec=Wr||Qr,ic=E.falseExpr.kind==="bin"?Dt(_.call(b,"falseExpr")):_.call(b,"falseExpr"),kN=[E.trueExpr?xe:" ","?",E.trueExpr?[" ",E.trueExpr.kind==="bin"?Dt(_.call(b,"trueExpr")):_.call(b,"trueExpr"),xe]:"",":",E.trueExpr?[" ",ic]:[_u(E.falseExpr)?" ":xe,ic]];Yr.push(kN);var nc=function(ct){return Qr===ec?Ct(ct):ct},sc=_.getParentNode(1),ps=Qr.kind==="cast"&&sc?sc:Qr,xN=["propertylookup","nullsafepropertylookup","staticlookup"].includes(ps.kind),Aa=_.call(b,"test");if(!E.trueExpr){var rc=[Aa,ps.kind==="bin"||["print","echo","return","include"].includes(ec.kind)?Dt(Yr):Yr];return ps.kind==="call"&&ps.what===E||ps.kind==="unary"||Bi(ps)&&ps.kind!=="offsetlookup"?Ct([Dt([ie,rc]),ie]):nc(rc)}return nc([E.test.kind==="retif"?Dt(Aa):Aa,Dt(Yr),xN?ie:""]);case"boolean":return E.value?"true":"false";case"number":return dC(E.value);case"string":if(_.getParentNode().kind==="encapsedpart"){var oc=_.getParentNode(1),Ia=0,EN=Fs(A.phpVersion,"7.3"),ac=Rs;if(oc.type==="heredoc"){ac=EN?gt:Rs;var jr=oc.raw.split(`
`);(Ia=jr[jr.length-1].search(/\S/))===-1&&(Ia=jr[jr.length-2].search(/\S/))}return oi(ac,E.raw.split(`
`).map(function(ct,Kt){return Kt>0||E.loc.start.column===0?ct.substring(Ia):ct}))}var hc=gC(E,A)?'"':"'",pn=E.raw;return E.raw[0]==="b"&&(pn=pn.slice(1)),['"',"'"].includes(pn[0])&&(pn=pn.substr(1)),['"',"'"].includes(pn[pn.length-1])&&(pn=pn.substr(0,pn.length-1)),[E.raw[0]==="b"?"b":"",hc,oi(Rs,pn.split(`
`)),hc];case"intersectiontype":return vu(_,b,"&");case"uniontype":return vu(_,b,"|");case"encapsedpart":var vN=E.syntax==="simple"&&E.curly||E.syntax==="complex"?[E.curly?"$":"","{"]:"",yN=E.syntax==="simple"&&E.curly||E.syntax==="complex"?"}":"";return[vN,_.call(b,"expression"),yN];case"encapsed":switch(E.type){case"string":case"shell":case"heredoc":var CN=Fs(A.phpVersion,"7.3")?gt:Rs;return[gu(E),E.type==="heredoc"?CN:""].concat(k(_.map(b,"value")),[gu(E,{opening:!1}),E.type==="heredoc"&&hu(_)?gt:""]);default:return"Have not implemented kind ".concat(E.type," yet.")}case"inline":return oi(Rs,E.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(`
`));case"magic":return E.value;case"nowdoc":var Sa=Fs(A.phpVersion,"7.3")?gt:Rs;return["<<<'",E.label,"'",Sa,oi(Sa,E.value.split(`
`)),Sa,E.label,hu(_)?gt:""];case"name":return[E.resolution==="rn"?"namespace\\":"",E.name];case"literal":return _.call(b,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return E.name;case"nullkeyword":return"null";case"identifier":return _.getParentNode().kind==="method"&&(E.name=EC(E.name)),_.call(b,"name");case"match":var NN=_.map(function(ct,Kt){var ue=ct.getValue().conds===null?"default":ct.map(function(Ii,Ze){return[",",xe,b(Ii)].slice(Ze===0?2:0)},"conds"),mt=ct.call(b,"body");return[",",gt,Ct([Ct([ue,Dt(xe)]),"=> ",mt])].slice(Kt>0?0:1)},"arms");return Ct(["match (",Ct([ie,Dt(_.call(b,"cond")),ie]),") {",Ct(Dt([].concat(k(NN),[A.trailingCommaPHP?zn(","):""])))," ",ie,"}"]);case"noop":return E.comments?ee.printComments(_.getValue().comments,A):"";case"namedargument":return[E.name,": ",_.call(b,"value")];case"enumcase":return Ct(["case ",_.call(b,"name"),E.value?[" =",Rr(E.name,E.value,_.call(b,"value"),!1,A)]:""]);case"variadicplaceholder":return"...";default:return"Have not implemented kind ".concat(E.kind," yet.")}}(i,r,a),m=[],v=tu(i);return v&&m.unshift("("),m.push(d),v&&m.push(")"),fC(i)&&m.push(";"),pC(i)&&m.push(gt),m},IC=new Set(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"]);function yu(i,r){if(i.kind==="string"&&delete r.isDoubleQuote,["array","list"].includes(i.kind)&&delete r.shortForm,i.kind==="inline"){if(i.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;r.value=r.value.replace(/\n/g,"")}if((i.kind==="continue"||i.kind==="break")&&i.level){var a=r.level;a.kind==="number"&&(r.level=a.value==="1"?null:a)}if(i.kind==="block"&&i.children.length===1&&i.children[0].kind==="block")for(;r.children[0].kind==="block";)r.children=r.children[0].children;if(i.kind==="number"&&(r.value=ae.printNumber(i.value)),["foreach","for","if","while","do"].includes(i.kind)&&(i.body&&i.body.kind!=="block"?r.body={kind:"block",children:[r.body]}:r.body=r.body?r.body:null,i.alternate&&i.alternate.kind!=="block"?r.alternate={kind:"block",children:[r.alternate]}:r.alternate=r.alternate?r.alternate:null),i.kind==="usegroup"&&typeof i.name=="string"&&(r.name=r.name.replace(/^\\/,"")),i.kind==="useitem"&&(r.name=r.name.replace(/^\\/,"")),i.kind==="method"&&i.name.kind==="identifier"&&(r.name.name=ae.normalizeMagicMethodName(r.name.name)),i.kind==="noop")return null}yu.ignoredProperties=IC;var SC=yu,ya="PHP",OC={phpVersion:{since:"0.13.0",category:ya,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"}]},trailingCommaPHP:{since:"0.0.0",category:ya,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:ya,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},LC=function(i,r,a,l){if(a!=="length"&&a!=="prototype"&&a!=="arguments"&&a!=="caller"){var d=Object.getOwnPropertyDescriptor(i,a),m=Object.getOwnPropertyDescriptor(r,a);!PC(d,m)&&l||Object.defineProperty(i,a,m)}},PC=function(i,r){return i===void 0||i.configurable||i.writable===r.writable&&i.enumerable===r.enumerable&&i.configurable===r.configurable&&(i.writable||i.value===r.value)},DC=function(i,r){var a=Object.getPrototypeOf(r);a!==Object.getPrototypeOf(i)&&Object.setPrototypeOf(i,a)},RC=function(i,r){return"/* Wrapped ".concat(i,`*/
`).concat(r)},wC=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),FC=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),BC=function(i,r,a){var l=a===""?"":"with ".concat(a.trim(),"() "),d=RC.bind(null,l,r.toString());Object.defineProperty(d,"name",FC),Object.defineProperty(i,"toString",h(h({},wC),{},{value:d}))},UC=function(i,r){var a,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=l.ignoreNonConfigurable,m=d!==void 0&&d,v=i.name,_=N(Reflect.ownKeys(r));try{for(_.s();!(a=_.n()).done;){var A=a.value;LC(i,r,A,m)}}catch(b){_.e(b)}finally{_.f()}return DC(i,r),BC(i,r,v),i},Fr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Cu(i){return i&&i.default||i}var Br,MC=function(){var i={};return i.promise=new Promise(function(r,a){i.resolve=r,i.reject=a}),i},Nu=function(i,r){return i(r={exports:{}},r.exports),r.exports}(function(i,r){var a=Fr&&Fr.__awaiter||function(v,_,A,b){return new(A||(A=Promise))(function(E,wt){function Rt(Ft){try{_e(b.next(Ft))}catch(Ee){wt(Ee)}}function le(Ft){try{_e(b.throw(Ft))}catch(Ee){wt(Ee)}}function _e(Ft){Ft.done?E(Ft.value):new A(function(Ee){Ee(Ft.value)}).then(Rt,le)}_e((b=b.apply(v,_||[])).next())})},l=Fr&&Fr.__importDefault||function(v){return v&&v.__esModule?v:{default:v}};Object.defineProperty(r,"__esModule",{value:!0});var d=l(MC);function m(v){var _,A,b,E=this,wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",Rt=function(){return a(E,void 0,void 0,c().mark(function Ft(){var Ee,Jt,be,Ae,Te=this;return c().wrap(function(Xt){for(;;)switch(Xt.prev=Xt.next){case 0:if(_===void 0){Xt.next=2;break}return Xt.abrupt("return");case 2:Ee=function(ve){return a(Te,void 0,void 0,c().mark(function Re(){var nn;return c().wrap(function(ci){for(;;)switch(ci.prev=ci.next){case 0:if(b=d.default(),!((nn=ve[1][wt]-Date.now())<=0)){ci.next=6;break}return v.delete(ve[0]),b.resolve(),ci.abrupt("return");case 6:return _=ve[0],typeof(A=setTimeout(function(){v.delete(ve[0]),b&&b.resolve()},nn)).unref=="function"&&A.unref(),ci.abrupt("return",b.promise);case 10:case"end":return ci.stop()}},Re)}))},Xt.prev=3,Jt=N(v),Xt.prev=5,Jt.s();case 7:if((be=Jt.n()).done){Xt.next=13;break}return Ae=be.value,Xt.next=11,Ee(Ae);case 11:Xt.next=7;break;case 13:Xt.next=18;break;case 15:Xt.prev=15,Xt.t0=Xt.catch(5),Jt.e(Xt.t0);case 18:return Xt.prev=18,Jt.f(),Xt.finish(18);case 21:Xt.next=25;break;case 23:Xt.prev=23,Xt.t1=Xt.catch(3);case 25:_=void 0;case 26:case"end":return Xt.stop()}},Ft,null,[[3,23],[5,15,18,21]])}))},le=function(){_=void 0,A!==void 0&&(clearTimeout(A),A=void 0),b!==void 0&&(b.reject(void 0),b=void 0)},_e=v.set.bind(v);return v.set=function(Ft,Ee){v.has(Ft)&&v.delete(Ft);var Jt=_e(Ft,Ee);return _&&_===Ft&&le(),Rt(),Jt},Rt(),v}r.default=m,i.exports=m,i.exports.default=m});(Br=Nu)&&Br.__esModule&&Object.prototype.hasOwnProperty.call(Br,"default")&&Br.default;var HC=Nu,Ca=new WeakMap,bu=new WeakMap,Ur=function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.cacheKey,l=r.cache,d=l===void 0?new Map:l,m=r.maxAge;typeof m=="number"&&HC(d);var v=function(){for(var _=arguments.length,A=new Array(_),b=0;b<_;b++)A[b]=arguments[b];var E=a?a(A):A[0],wt=d.get(E);if(wt)return wt.data;var Rt=i.apply(this,A);return d.set(E,{data:Rt,maxAge:m?Date.now()+m:Number.POSITIVE_INFINITY}),Rt};return UC(v,i,{ignoreNonConfigurable:!0}),bu.set(v,d),v};Ur.decorator=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,a,l){var d=r[a];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete l.value,delete l.writable,l.get=function(){if(!Ca.has(this)){var m=Ur(d,i);return Ca.set(this,m),m}return Ca.get(this)}}},Ur.clear=function(i){var r=bu.get(i);if(!r)throw new TypeError("Can't clear a function that was not memoized!");if(typeof r.clear!="function")throw new TypeError("The cache Map can't be cleared!");r.clear()};var Au=/@prettier|@format/,Iu=Ur(function(i){var r=Fl(i),a=T(r.children,1)[0],l=T(r.comments.filter(function(d){return d.kind==="commentblock"}),1)[0];if(a&&l&&l.loc.start.line<a.loc.start.line)return l}),VC=function(i){if(!Au.test(i))return!1;var r=Iu(i);if(r){var a=r.value;return Au.test(a)}return!1},GC=function(i){var r=Iu(i);if(r){var a=r.loc,l=a.start.offset,d=a.end.offset,m=i.substring(0,l),v=i.substring(d);return"".concat(m).concat(function(wt){var Rt=wt.split(`
`);if(Rt.length===1){var le=T(/\/*\*\*(.*)\*\//.exec(Rt[0]),2)[1];Rt=["/**"," * ".concat(le.trim())," */"]}var _e=Rt.findIndex(function(Ft){return/@\S/.test(Ft)})||1;return Rt.splice(_e,0," * @format"),Rt.join(`
`)}(r.value)).concat(v)}var _="<?php";if(!i.startsWith(_))return i;var A=_.length,b=i.substring(0,A),E=i.substring(A);return"".concat(b,`
/** 
 * @format 
 */
`).concat(E)},Su="programming",Ou="text.html.php",Lu="application/x-httpd-php",Pu="#4F5D95",Du=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],Ru=[".php",".php_cs",".php_cs.dist","Phakefile"],wu=["php"],Fu=["inc"],qC={name:"PHP",type:Su,tmScope:Ou,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Lu,color:Pu,extensions:Du,filenames:Ru,interpreters:wu,aliases:Fu,languageId:272},WC=Object.freeze({__proto__:null,name:"PHP",type:Su,tmScope:Ou,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Lu,color:Pu,extensions:Du,filenames:Ru,interpreters:wu,aliases:Fu,languageId:272,default:qC}),Bu="HTML+PHP",Uu="markup",Mu="#4f5d95",Hu="text.html.php",Vu="HTML",Gu=[".phtml"],qu="application/x-httpd-php",YC={name:Bu,type:Uu,color:Mu,tmScope:Hu,group:Vu,extensions:Gu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:qu,languageId:151},QC=Object.freeze({__proto__:null,name:Bu,type:Uu,color:Mu,tmScope:Hu,group:Vu,extensions:Gu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:qu,languageId:151,default:YC}),jC=Cu(WC),KC=Cu(QC),Wu=s.default.doc.builders,zC=Wu.join,$C=Wu.hardline,JC=VC,XC=GC;function Yu(i,r){var a=r.extend,l=r.override,d={};for(var m in i)d[m==="languageId"?"linguistLanguageId":m]=i[m];if(a)for(var v in a)d[v]=(d[v]||[]).concat(a[v]);for(var _ in l)d[_]=l[_];return d}var ZC=[Yu(jC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Yu(KC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Qu=function(i){return function(r){return r.loc&&r.loc[i]&&r.loc[i].offset}},tN={php:{parse:Fl,astFormat:"php",locStart:Qu("start"),locEnd:Qu("end"),hasPragma:JC}},eN={php:{print:AC,insertPragma:XC,massageAstNode:SC,getCommentChildNodes:ee.getCommentChildNodes,canAttachComment:ee.canAttachComment,isBlockComment:ee.isBlockComment,handleComments:{ownLine:ee.handleOwnLineComment,endOfLine:ee.handleEndOfLineComment,remaining:ee.handleRemainingComment},willPrintOwnComments:function(i){var r=i.getValue();return r&&r.kind==="noop"},printComment:function(i){var r=i.getValue();switch(r.kind){case"commentblock":if(!r.value.includes(`
`))return r.value;var a=r.value.split(`
`);return a.slice(1,a.length-1).every(function(l){return l.trim()[0]==="*"})?zC($C,a.map(function(l,d){return(d>0?" ":"")+(d<a.length-1?l.trim():l.trimLeft())})):r.value;case"commentline":return r.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(r)))}},hasPrettierIgnore:function(i){var r=function(d){return d.value.includes("prettier-ignore")&&!d.value.includes("prettier-ignore-start")&&!d.value.includes("prettier-ignore-end")},a=i.getParentNode(),l=i.getNode();return l&&l.kind!=="classconstant"&&l.comments&&l.comments.length>0&&l.comments.some(r)||l&&l.kind==="constant"&&a&&a.kind==="classconstant"&&a.comments&&a.comments.length>0&&a.comments.some(r)}}},Bs={languages:ZC,printers:eN,parsers:tN,options:OC,defaultOptions:{tabWidth:4}},iN=Bs.languages,nN=Bs.printers,sN=Bs.parsers,rN=Bs.options,oN=Bs.defaultOptions;n.default=Bs,n.defaultOptions=oN,n.languages=iN,n.options=rN,n.parsers=sN,n.printers=nN,Object.defineProperty(n,"__esModule",{value:!0})})});var df=H((ff,Ja)=>{(function(n){if(typeof ff=="object"&&typeof Ja<"u")Ja.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=n()}})(function(){var n,t,e;return function(){function s(o,h,c){function u(k,B){if(!h[k]){if(!o[k]){var y=typeof require=="function"&&require;if(!B&&y)return y(k,!0);if(f)return f(k,!0);var N=new Error("Cannot find module '"+k+"'");throw N.code="MODULE_NOT_FOUND",N}var I=h[k]={exports:{}};o[k][0].call(I.exports,function(R){var tt=o[k][1][R];return u(tt||R)},I,I.exports,s,o,h,c)}return h[k].exports}for(var f=typeof require=="function"&&require,T=0;T<c.length;T++)u(c[T]);return u}return s}()({1:[function(s,o,h){let c=s("./utils"),u=function(){"use strict";let f=c.stringToArray,T=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],k=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],B=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],y=["Thousand","Million","Billion","Trillion"];function N(F,G){var M=function(ot,et,W){var at="";if(ot<=19)at=(et?" and ":"")+(W?k[ot]:T[ot]);else if(ot<100){let zt=Math.floor(ot/10),dt=ot%10;at=(et?" and ":"")+B[zt-2],dt>0?at+="-"+M(dt,!1,W):W&&(at=at.substring(0,at.length-1)+"ieth")}else if(ot<1e3){let zt=Math.floor(ot/100),dt=ot%100;at=(et?", ":"")+T[zt]+" Hundred",dt>0?at+=M(dt,!0,W):W&&(at+="th")}else{var xt=Math.floor(Math.log10(ot)/3);xt>y.length&&(xt=y.length);let zt=Math.pow(10,xt*3),dt=Math.floor(ot/zt),bt=ot-dt*zt;at=(et?", ":"")+M(dt,!1,!1)+" "+y[xt-1],bt>0?at+=M(bt,!0,W):W&&(at+="th")}return at},$=M(F,!1,G);return $}let I={};T.forEach(function(F,G){I[F.toLowerCase()]=G}),k.forEach(function(F,G){I[F.toLowerCase()]=G}),B.forEach(function(F,G){let M=F.toLowerCase();I[M]=(G+2)*10,I[M.substring(0,F.length-1)+"ieth"]=I[M]}),I.hundredth=100,y.forEach(function(F,G){let M=F.toLowerCase(),$=Math.pow(10,(G+1)*3);I[M]=$,I[M+"th"]=$});function R(F){let M=F.split(/,\s|\sand\s|[\s\\-]/).map(et=>I[et]),$=[0];return M.forEach(et=>{if(et<100){let W=$.pop();W>=1e3&&($.push(W),W=0),$.push(W+et)}else $.push($.pop()*et)}),$.reduce((et,W)=>et+W,0)}let tt=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],rt={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function ht(F){for(var G=0;G<tt.length;G++){let M=tt[G];if(F>=M[0])return M[1]+ht(F-M[0])}return""}function z(F){for(var G=0,M=1,$=F.length-1;$>=0;$--){let ot=F[$],et=rt[ot];et<M?G-=et:(M=et,G+=et)}return G}function Q(F,G){for(var M=[],$=G.charCodeAt(0);F>0;)M.unshift(String.fromCharCode((F-1)%26+$)),F=Math.floor((F-1)/26);return M.join("")}function ft(F,G){for(var M=G.charCodeAt(0),$=0,ot=0;ot<F.length;ot++)$+=(F.charCodeAt(F.length-ot-1)-M+1)*Math.pow(26,ot);return $}function U(F,G){if(typeof F>"u")return;F=Math.floor(F);let M=Ut(G);return st(F,M)}let q={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},kt={UPPER:"upper",LOWER:"lower",TITLE:"title"};function st(F,G){let M,$=F<0;switch(F=Math.abs(F),G.primary){case q.LETTERS:M=Q(F,G.case===kt.UPPER?"A":"a");break;case q.ROMAN:M=ht(F),G.case===kt.UPPER&&(M=M.toUpperCase());break;case q.WORDS:M=N(F,G.ordinal),G.case===kt.UPPER?M=M.toUpperCase():G.case===kt.LOWER&&(M=M.toLowerCase());break;case q.DECIMAL:M=""+F;var ot=G.mandatoryDigits-M.length;if(ot>0){var et=new Array(ot+1).join("0");M=et+M}if(G.zeroCode!==48&&(M=f(M).map(zt=>String.fromCodePoint(zt.codePointAt(0)+G.zeroCode-48)).join("")),G.regular){let zt=Math.floor((M.length-1)/G.groupingSeparators.position);for(let dt=zt;dt>0;dt--){let bt=M.length-dt*G.groupingSeparators.position;M=M.substr(0,bt)+G.groupingSeparators.character+M.substr(bt)}}else G.groupingSeparators.reverse().forEach(zt=>{let dt=M.length-zt.position;M=M.substr(0,dt)+zt.character+M.substr(dt)});if(G.ordinal){var W={1:"st",2:"nd",3:"rd"},at=M[M.length-1],xt=W[at];(!xt||M.length>1&&M[M.length-2]==="1")&&(xt="th"),M=M+xt}break;case q.SEQUENCE:throw{code:"D3130",value:G.token}}return $&&(M="-"+M),M}let vt=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Ut(F){let G={type:"integer",primary:q.DECIMAL,case:kt.LOWER,ordinal:!1},M,$,ot=F.lastIndexOf(";");switch(ot===-1?M=F:(M=F.substring(0,ot),$=F.substring(ot+1),$[0]==="o"&&(G.ordinal=!0)),M){case"A":G.case=kt.UPPER;case"a":G.primary=q.LETTERS;break;case"I":G.case=kt.UPPER;case"i":G.primary=q.ROMAN;break;case"W":G.case=kt.UPPER,G.primary=q.WORDS;break;case"Ww":G.case=kt.TITLE,G.primary=q.WORDS;break;case"w":G.primary=q.WORDS;break;default:{let et=null,W=0,at=0,xt=[],zt=0;if(f(M).map(bt=>bt.codePointAt(0)).reverse().forEach(bt=>{let j=!1;for(let $t=0;$t<vt.length;$t++){let Lt=vt[$t];if(bt>=Lt&&bt<=Lt+9){if(j=!0,W++,zt++,et===null)et=Lt;else if(Lt!==et)throw{code:"D3131"};break}}j||(bt===35?(zt++,at++):xt.push({position:zt,character:String.fromCodePoint(bt)}))}),W>0){G.primary=q.DECIMAL,G.zeroCode=et,G.mandatoryDigits=W,G.optionalDigits=at;let j=function($t){if($t.length===0)return 0;let Lt=$t[0].character;for(let Ye=1;Ye<$t.length;Ye++)if($t[Ye].character!==Lt)return 0;let $e=$t.map(Ye=>Ye.position),Li=function(Ye,Je){return Je===0?Ye:Li(Je,Ye%Je)},ni=$e.reduce(Li);for(let Ye=1;Ye<=$e.length;Ye++)if($e.indexOf(Ye*ni)===-1)return 0;return ni}(xt);j>0?(G.regular=!0,G.groupingSeparators={position:j,character:xt[0].character}):(G.regular=!1,G.groupingSeparators=xt)}else G.primary=q.SEQUENCE,G.token=M}}return G}let qt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Mt(F){var G=[];let M={type:"datetime",parts:G},$=function(j,$t){if($t>j){let Lt=F.substring(j,$t);Lt=Lt.split("]]").join("]"),G.push({type:"literal",value:Lt})}};for(var ot=0,et=0;et<F.length;){if(F.charAt(et)==="["){if(F.charAt(et+1)==="["){$(ot,et),G.push({type:"literal",value:"["}),et+=2,ot=et;continue}if($(ot,et),ot=et,et=F.indexOf("]",ot),et===-1)throw{code:"D3135"};let j=F.substring(ot+1,et);j=j.split(/\s+/).join("");var W={type:"marker",component:j.charAt(0)},at=j.lastIndexOf(","),xt;if(at!==-1){let $t=j.substring(at+1),Lt=$t.indexOf("-"),$e,Li,ni=function(Je){if(!(typeof Je>"u"||Je==="*"))return parseInt(Je)};Lt===-1?$e=$t:($e=$t.substring(0,Lt),Li=$t.substring(Lt+1));let Ye={min:ni($e),max:ni(Li)};W.width=Ye,xt=j.substring(1,at)}else xt=j.substring(1);if(xt.length===1)W.presentation1=xt;else if(xt.length>1){var zt=xt.charAt(xt.length-1);"atco".indexOf(zt)!==-1?(W.presentation2=zt,zt==="o"&&(W.ordinal=!0),W.presentation1=xt.substring(0,xt.length-1)):W.presentation1=xt}else W.presentation1=qt[W.component];if(typeof W.presentation1>"u")throw{code:"D3132",value:W.component};if(W.presentation1[0]==="n")W.names=kt.LOWER;else if(W.presentation1[0]==="N")W.presentation1[1]==="n"?W.names=kt.TITLE:W.names=kt.UPPER;else if("YMDdFWwXxHhmsf".indexOf(W.component)!==-1){var dt=W.presentation1;if(W.presentation2&&(dt+=";"+W.presentation2),W.integerFormat=Ut(dt),W.width&&W.width.min!==void 0&&W.integerFormat.mandatoryDigits<W.width.min&&(W.integerFormat.mandatoryDigits=W.width.min),"YMD".indexOf(W.component)!==-1)if(W.n=-1,W.width&&W.width.max!==void 0)W.n=W.width.max,W.integerFormat.mandatoryDigits=W.n;else{var bt=W.integerFormat.mandatoryDigits+W.integerFormat.optionalDigits;bt>=2&&(W.n=bt)}}(W.component==="Z"||W.component==="z")&&(W.integerFormat=Ut(W.presentation1)),G.push(W),ot=et+1}et++}return $(ot,et),M}let Nt=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],se=["January","February","March","April","May","June","July","August","September","October","November","December"],Qt=1e3*60*60*24,yt=function(F){let G=Date.UTC(F.year,F.month);var M=new Date(G).getUTCDay();return M===0&&(M=7),M>4?G+(8-M)*Qt:G-(M-1)*Qt},lt=function(F,G){return{year:F,month:G,nextMonth:function(){return G===11?lt(F+1,0):lt(F,G+1)},previousMonth:function(){return G===0?lt(F-1,11):lt(F,G-1)},nextYear:function(){return lt(F+1,G)},previousYear:function(){return lt(F-1,G)}}},ce=function(F,G){return(G-F)/(Qt*7)+1},It=(F,G)=>{let M;switch(G){case"Y":M=F.getUTCFullYear();break;case"M":M=F.getUTCMonth()+1;break;case"D":M=F.getUTCDate();break;case"d":{let $=Date.UTC(F.getUTCFullYear(),F.getUTCMonth(),F.getUTCDate()),ot=Date.UTC(F.getUTCFullYear(),0);M=($-ot)/Qt+1;break}case"F":M=F.getUTCDay(),M===0&&(M=7);break;case"W":{let $=lt(F.getUTCFullYear(),0),ot=yt($),et=Date.UTC($.year,F.getUTCMonth(),F.getUTCDate()),W=ce(ot,et);if(W>52){let at=yt($.nextYear());et>=at&&(W=1)}else if(W<1){let at=yt($.previousYear());W=ce(at,et)}M=Math.floor(W);break}case"w":{let $=lt(F.getUTCFullYear(),F.getUTCMonth()),ot=yt($),et=Date.UTC($.year,$.month,F.getUTCDate()),W=ce(ot,et);if(W>4){let at=yt($.nextMonth());et>=at&&(W=1)}else if(W<1){let at=yt($.previousMonth());W=ce(at,et)}M=Math.floor(W);break}case"X":{let $=lt(F.getUTCFullYear(),0),ot=yt($),et=yt($.nextYear()),W=F.getTime();W<ot?M=$.year-1:W>=et?M=$.year+1:M=$.year;break}case"x":{let $=lt(F.getUTCFullYear(),F.getUTCMonth()),ot=yt($),et=$.nextMonth(),W=yt(et),at=F.getTime();at<ot?M=$.previousMonth().month+1:at>=W?M=et.month+1:M=$.month+1;break}case"H":M=F.getUTCHours();break;case"h":M=F.getUTCHours(),M=M%12,M===0&&(M=12);break;case"P":M=F.getUTCHours()>=12?"pm":"am";break;case"m":M=F.getUTCMinutes();break;case"s":M=F.getUTCSeconds();break;case"f":M=F.getUTCMilliseconds();break;case"Z":case"z":break;case"C":M="ISO";break;case"E":M="ISO";break}return M},oe=null;function de(F,G,M){var $=0,ot=0;if(typeof M<"u"){let dt=parseInt(M);$=Math.floor(dt/100),ot=dt%100}var et=function(dt,bt){var j=It(dt,bt.component);if("YMDdFWwXxHhms".indexOf(bt.component)!==-1)if(bt.component==="Y"&&bt.n!==-1&&(j=j%Math.pow(10,bt.n)),bt.names){if(bt.component==="M"||bt.component==="x")j=se[j-1];else if(bt.component==="F")j=Nt[j];else throw{code:"D3133",value:bt.component};bt.names===kt.UPPER?j=j.toUpperCase():bt.names===kt.LOWER&&(j=j.toLowerCase()),bt.width&&j.length>bt.width.max&&(j=j.substring(0,bt.width.max))}else j=st(j,bt.integerFormat);else if(bt.component==="f")j=st(j,bt.integerFormat);else if(bt.component==="Z"||bt.component==="z"){let $t=$*100+ot;if(bt.integerFormat.regular)j=st($t,bt.integerFormat);else{let Lt=bt.integerFormat.mandatoryDigits;if(Lt===1||Lt===2)j=st($,bt.integerFormat),ot!==0&&(j+=":"+U(ot,"00"));else if(Lt===3||Lt===4)j=st($t,bt.integerFormat);else throw{code:"D3134",value:Lt}}$t>=0&&(j="+"+j),bt.component==="z"&&(j="GMT"+j),$t===0&&bt.presentation2==="t"&&(j="Z")}return j};let W;typeof G>"u"?(oe===null&&(oe=Mt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),W=oe):W=Mt(G);let at=(60*$+ot)*60*1e3,xt=new Date(F+at),zt="";return W.parts.forEach(function(dt){dt.type==="literal"?zt+=dt.value:zt+=et(xt,dt)}),zt}function O(F){var G={};if(F.type==="datetime")G.type="datetime",G.parts=F.parts.map(function(M){var $={};if(M.type==="literal")$.regex=M.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(M.component==="Z"||M.component==="z"){let et;Array.isArray(M.integerFormat.groupingSeparators)||(et=M.integerFormat.groupingSeparators),$.regex="",M.component==="z"&&($.regex="GMT"),$.regex+="[-+][0-9]+",et&&($.regex+=et.character+"[0-9]+"),$.parse=function(W){M.component==="z"&&(W=W.substring(3));let at=0,xt=0;return et?(at=Number.parseInt(W.substring(0,W.indexOf(et.character))),xt=Number.parseInt(W.substring(W.indexOf(et.character)+1))):W.length-1<=2?at=Number.parseInt(W):(at=Number.parseInt(W.substring(0,3)),xt=Number.parseInt(W.substring(3))),at*60+xt}}else if(M.integerFormat)M.integerFormat.n=M.n,$=O(M.integerFormat);else{$.regex="[a-zA-Z]+";var ot={};if(M.component==="M"||M.component==="x")se.forEach(function(et,W){M.width&&M.width.max?ot[et.substring(0,M.width.max)]=W+1:ot[et]=W+1});else if(M.component==="F")Nt.forEach(function(et,W){W>0&&(M.width&&M.width.max?ot[et.substring(0,M.width.max)]=W:ot[et]=W)});else if(M.component==="P")ot={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:M.component};$.parse=function(et){return ot[et]}}return $.component=M.component,$});else{G.type="integer";let M=F.case===kt.UPPER,$;switch(F.n&&F.n>0?F.optionalDigits===0?$=`{${F.n}}`:$=`{${F.n-F.optionalDigits},${F.n}}`:$="+",F.primary){case q.LETTERS:G.regex=M?"[A-Z]+":"[a-z]+",G.parse=function(ot){return ft(ot,M?"A":"a")};break;case q.ROMAN:G.regex=M?"[MDCLXVI]+":"[mdclxvi]+",G.parse=function(ot){return z(M?ot:ot.toUpperCase())};break;case q.WORDS:G.regex="(?:"+Object.keys(I).concat("and","[\\-, ]").join("|")+")+",G.parse=function(ot){return R(ot.toLowerCase())};break;case q.DECIMAL:G.regex=`[0-9]${$}`,F.ordinal&&(G.regex+="(?:th|st|nd|rd)"),G.parse=function(ot){let et=ot;return F.ordinal&&(et=ot.substring(0,ot.length-2)),F.regular?et=et.split(",").join(""):F.groupingSeparators.forEach(W=>{et=et.split(W.character).join("")}),F.zeroCode!==48&&(et=et.split("").map(W=>String.fromCodePoint(W.codePointAt(0)-F.zeroCode+48)).join("")),parseInt(et)};break;case q.SEQUENCE:throw{code:"D3130",value:F.token}}}return G}function P(F,G){if(typeof F>"u")return;let M=Ut(G);return O(M).parse(F)}function J(F,G){let M=Mt(G),$=O(M),ot="^"+$.parts.map(xt=>"("+xt.regex+")").join("")+"$";var W=new RegExp(ot,"i").exec(F);if(W!==null){let Lt={};for(let g=1;g<W.length;g++){let L=$.parts[g-1];L.parse&&(Lt[L.component]=L.parse(W[g]))}if(Object.getOwnPropertyNames(Lt).length===0)return;let $e=0,Li=g=>{$e<<=1,$e+=g?1:0},ni=g=>!(~g&$e)&&!!(g&$e);"YXMxWwdD".split("").forEach(g=>Li(Lt[g]));let Je=!ni(161)&&ni(130),un=ni(84),Tn=!un&&ni(72);$e=0,"PHhmsf".split("").forEach(g=>Li(Lt[g]));let _t=!ni(23)&&ni(47),Ue=(Je?"YD":un?"XxwF":Tn?"XWF":"YMD")+(_t?"Phmsf":"Hmsf"),us=this.environment.timestamp,Pi=!1,Et=!1;if(Ue.split("").forEach(g=>{if(typeof Lt[g]>"u")Pi?(Lt[g]="MDd".indexOf(g)!==-1?1:0,Et=!0):Lt[g]=It(us,g);else if(Pi=!0,Et)throw{code:"D3136"}}),Lt.M>0?Lt.M-=1:Lt.M=0,Je){let g=Date.UTC(Lt.Y,0),L=(Lt.d-1)*1e3*60*60*24,D=new Date(g+L);Lt.M=D.getUTCMonth(),Lt.D=D.getUTCDate()}if(un)throw{code:"D3136"};if(Tn)throw{code:"D3136"};_t&&(Lt.H=Lt.h===12?0:Lt.h,Lt.P===1&&(Lt.H+=12));var at=Date.UTC(Lt.Y,Lt.M,Lt.D,Lt.H,Lt.m,Lt.s,Lt.f);return(Lt.Z||Lt.z)&&(at-=(Lt.Z||Lt.z)*60*1e3),at}}var pt=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function Ht(F,G){if(!(typeof F>"u"))if(typeof G>"u"){if(!pt.test(F))throw{stack:new Error().stack,code:"D3110",value:F};return Date.parse(F)}else return J.call(this,F,G)}function Z(F,G,M){if(!(typeof F>"u"))return de.call(this,F,G,M)}return{formatInteger:U,parseInteger:P,fromMillis:Z,toMillis:Ht}}();o.exports=u},{"./utils":6}],2:[function(s,o,h){(function(c){(function(){var u=s("./utils");let f=(()=>{"use strict";var T=u.isNumeric,k=u.isArrayOfStrings,B=u.isArrayOfNumbers,y=u.createSequence,N=u.isSequence,I=u.isFunction,R=u.isLambda,tt=u.isIterable,rt=u.getFunctionArity,ht=u.isDeepEqual,z=u.stringToArray;function Q(p){if(!(typeof p>"u")){var x=0;return p.forEach(function(C){x+=C}),x}}function ft(p){return typeof p>"u"?0:p.length}function U(p){if(!(typeof p>"u"||p.length===0))return Math.max.apply(Math,p)}function q(p){if(!(typeof p>"u"||p.length===0))return Math.min.apply(Math,p)}function kt(p){if(!(typeof p>"u"||p.length===0)){var x=0;return p.forEach(function(C){x+=C}),x/p.length}}function st(p,x=!1){if(!(typeof p>"u")){var C;if(typeof p=="string")C=p;else if(I(p))C="";else{if(typeof p=="number"&&!isFinite(p))throw{code:"D3001",value:p,stack:new Error().stack};var w=x?2:0;Array.isArray(p)&&p.outerWrapper&&(p=p[0]),C=JSON.stringify(p,function(V,Y){return typeof Y<"u"&&Y!==null&&Y.toPrecision&&T(Y)?Number(Y.toPrecision(15)):Y&&I(Y)?"":Y},w)}return C}}function vt(p,x,C){if(!(typeof p>"u")){var w=z(p),V=w.length;if(V+x<0&&(x=0),typeof C<"u"){if(C<=0)return"";var Y=x>=0?x+C:V+x+C;return w.slice(x,Y).join("")}return w.slice(x).join("")}}function Ut(p,x){if(!(typeof p>"u")){var C=p.indexOf(x);return C>-1?p.substr(0,C):p}}function qt(p,x){if(!(typeof p>"u")){var C=p.indexOf(x);return C>-1?p.substr(C+x.length):p}}function Mt(p){if(!(typeof p>"u"))return p.toLowerCase()}function Nt(p){if(!(typeof p>"u"))return p.toUpperCase()}function se(p){if(!(typeof p>"u"))return z(p).length}function Qt(p){if(!(typeof p>"u")){var x=p.replace(/[ \t\n\r]+/gm," ");return x.charAt(0)===" "&&(x=x.substring(1)),x.charAt(x.length-1)===" "&&(x=x.substring(0,x.length-1)),x}}function yt(p,x,C){if(!(typeof p>"u")){(typeof C>"u"||C.length===0)&&(C=" ");var w,V=Math.abs(x)-se(p);if(V>0){var Y=new Array(V+1).join(C);C.length>1&&(Y=vt(Y,0,V)),x>0?w=p+Y:w=Y+p}else w=p;return w}}function*lt(p,x){var C=p.apply(this,[x]);if(tt(C)&&(C=yield*C),C&&!(typeof C.start=="number"||C.end==="number"||Array.isArray(C.groups)||I(C.next)))throw{code:"T1010",stack:new Error().stack};return C}function*ce(p,x){if(!(typeof p>"u")){var C;if(typeof x=="string")C=p.indexOf(x)!==-1;else{var w=yield*lt(x,p);C=typeof w<"u"}return C}}function*It(p,x,C){if(!(typeof p>"u")){if(C<0)throw{stack:new Error().stack,value:C,code:"D3040",index:3};var w=y();if(typeof C>"u"||C>0){var V=0,Y=yield*lt(x,p);if(typeof Y<"u")for(;typeof Y<"u"&&(typeof C>"u"||V<C);)w.push({match:Y.match,index:Y.start,groups:Y.groups}),Y=yield*lt(Y.next),V++}return w}}function*oe(p,x,C,w){if(!(typeof p>"u")){var V=this;if(x==="")throw{code:"D3010",stack:new Error().stack,value:x,index:2};if(w<0)throw{code:"D3011",stack:new Error().stack,value:w,index:4};var Y;typeof C=="string"?Y=function(me){for(var si="",ke=0,gi=C.indexOf("$",ke);gi!==-1&&ke<C.length;){si+=C.substring(ke,gi),ke=gi+1;var Se=C.charAt(ke);if(Se==="$")si+="$",ke++;else if(Se==="0")si+=me.match,ke++;else{var ki;if(me.groups.length===0?ki=1:ki=Math.floor(Math.log(me.groups.length)*Math.LOG10E)+1,gi=parseInt(C.substring(ke,ke+ki),10),ki>1&&gi>me.groups.length&&(gi=parseInt(C.substring(ke,ke+ki-1),10)),isNaN(gi))si+="$";else{if(me.groups.length>0){var Yn=me.groups[gi-1];typeof Yn<"u"&&(si+=Yn)}ke+=gi.toString().length}}gi=C.indexOf("$",ke)}return si+=C.substring(ke),si}:Y=C;var ut="",Pt=0;if(typeof w>"u"||w>0){var jt=0;if(typeof x=="string"){for(var te=p.indexOf(x,Pt);te!==-1&&(typeof w>"u"||jt<w);)ut+=p.substring(Pt,te),ut+=C,Pt=te+x.length,jt++,te=p.indexOf(x,Pt);ut+=p.substring(Pt)}else{var fe=yield*lt(x,p);if(typeof fe<"u"){for(;typeof fe<"u"&&(typeof w>"u"||jt<w);){ut+=p.substring(Pt,fe.start);var pe=Y.apply(V,[fe]);if(tt(pe)&&(pe=yield*pe),typeof pe=="string")ut+=pe;else throw{code:"D3012",stack:new Error().stack,value:pe};Pt=fe.start+fe.match.length,jt++,fe=yield*lt(fe.next)}ut+=p.substring(Pt)}else ut=p}}else ut=p;return ut}}function de(p){if(!(typeof p>"u")){var x=typeof window<"u"?window.btoa:function(C){return new c.Buffer.from(C,"binary").toString("base64")};return x(p)}}function O(p){if(!(typeof p>"u")){var x=typeof window<"u"?window.atob:function(C){return new c.Buffer.from(C,"base64").toString("binary")};return x(p)}}function P(p){if(!(typeof p>"u")){var x;try{x=encodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrlComponent"}}return x}}function J(p){if(!(typeof p>"u")){var x;try{x=encodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrl"}}return x}}function pt(p){if(!(typeof p>"u")){var x;try{x=decodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrlComponent"}}return x}}function Ht(p){if(!(typeof p>"u")){var x;try{x=decodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrl"}}return x}}function*Z(p,x,C){if(!(typeof p>"u")){if(C<0)throw{code:"D3020",stack:new Error().stack,value:C,index:3};var w=[];if(typeof C>"u"||C>0)if(typeof x=="string")w=p.split(x,C);else{var V=0,Y=yield*lt(x,p);if(typeof Y<"u"){for(var ut=0;typeof Y<"u"&&(typeof C>"u"||V<C);)w.push(p.substring(ut,Y.start)),ut=Y.end,Y=yield*lt(Y.next),V++;(typeof C>"u"||V<C)&&w.push(p.substring(ut))}else w.push(p)}return w}}function F(p,x){if(!(typeof p>"u"))return typeof x>"u"&&(x=""),p.join(x)}function G(p,x,C){if(!(typeof p>"u")){var w={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},V=w;typeof C<"u"&&Object.keys(C).forEach(function(Gt){V[Gt]=C[Gt]});for(var Y=[],ut=V["zero-digit"].charCodeAt(0),Pt=ut;Pt<ut+10;Pt++)Y.push(String.fromCharCode(Pt));var jt=Y.concat([V["decimal-separator"],V["exponent-separator"],V["grouping-separator"],V.digit,V["pattern-separator"]]),te=x.split(V["pattern-separator"]);if(te.length>2)throw{code:"D3080",stack:new Error().stack};var fe=function(Gt){var Oe=function(){for(var Qe,xi=0;xi<Gt.length;xi++)if(Qe=Gt.charAt(xi),jt.indexOf(Qe)!==-1&&Qe!==V["exponent-separator"])return Gt.substring(0,xi)}(),ui=function(){for(var Qe,xi=Gt.length-1;xi>=0;xi--)if(Qe=Gt.charAt(xi),jt.indexOf(Qe)!==-1&&Qe!==V["exponent-separator"])return Gt.substring(xi+1)}(),Ne=Gt.substring(Oe.length,Gt.length-ui.length),ri,kn,_i,Dn,bi=Gt.indexOf(V["exponent-separator"],Oe.length);bi===-1||bi>Gt.length-ui.length?(ri=Ne,kn=void 0):(ri=Ne.substring(0,bi),kn=Ne.substring(bi+1));var Di=ri.indexOf(V["decimal-separator"]);return Di===-1?(_i=ri,Dn=ui):(_i=ri.substring(0,Di),Dn=ri.substring(Di+1)),{prefix:Oe,suffix:ui,activePart:Ne,mantissaPart:ri,exponentPart:kn,integerPart:_i,fractionalPart:Dn,subpicture:Gt}},pe=function(Gt){var Oe,ui,Ne=Gt.subpicture,ri=Ne.indexOf(V["decimal-separator"]);ri!==Ne.lastIndexOf(V["decimal-separator"])&&(Oe="D3081"),Ne.indexOf(V.percent)!==Ne.lastIndexOf(V.percent)&&(Oe="D3082"),Ne.indexOf(V["per-mille"])!==Ne.lastIndexOf(V["per-mille"])&&(Oe="D3083"),Ne.indexOf(V.percent)!==-1&&Ne.indexOf(V["per-mille"])!==-1&&(Oe="D3084");var kn=!1;for(ui=0;ui<Gt.mantissaPart.length;ui++){var _i=Gt.mantissaPart.charAt(ui);if(Y.indexOf(_i)!==-1||_i===V.digit){kn=!0;break}}kn||(Oe="D3085");var Dn=Gt.activePart.split("").map(function(Qe){return jt.indexOf(Qe)===-1?"p":"a"}).join("");Dn.indexOf("p")!==-1&&(Oe="D3086"),ri!==-1?(Ne.charAt(ri-1)===V["grouping-separator"]||Ne.charAt(ri+1)===V["grouping-separator"])&&(Oe="D3087"):Gt.integerPart.charAt(Gt.integerPart.length-1)===V["grouping-separator"]&&(Oe="D3088"),Ne.indexOf(V["grouping-separator"]+V["grouping-separator"])!==-1&&(Oe="D3089");var bi=Gt.integerPart.indexOf(V.digit);bi!==-1&&Gt.integerPart.substring(0,bi).split("").filter(function(Qe){return Y.indexOf(Qe)>-1}).length>0&&(Oe="D3090"),bi=Gt.fractionalPart.lastIndexOf(V.digit),bi!==-1&&Gt.fractionalPart.substring(bi).split("").filter(function(Qe){return Y.indexOf(Qe)>-1}).length>0&&(Oe="D3091");var Di=typeof Gt.exponentPart=="string";if(Di&&Gt.exponentPart.length>0&&(Ne.indexOf(V.percent)!==-1||Ne.indexOf(V["per-mille"])!==-1)&&(Oe="D3092"),Di&&(Gt.exponentPart.length===0||Gt.exponentPart.split("").filter(function(Qe){return Y.indexOf(Qe)===-1}).length>0)&&(Oe="D3093"),Oe)throw{code:Oe,stack:new Error().stack}},me=function(Gt){var Oe=function(Xe,xn){for(var fs=[],tn=Xe.indexOf(V["grouping-separator"]);tn!==-1;){var Ss=(xn?Xe.substring(0,tn):Xe.substring(tn)).split("").filter(function(Rn){return Y.indexOf(Rn)!==-1||Rn===V.digit}).length;fs.push(Ss),tn=Gt.integerPart.indexOf(V["grouping-separator"],tn+1)}return fs},ui=Oe(Gt.integerPart),Ne=function(Xe){if(Xe.length===0)return 0;for(var xn=function(Ss,Rn){return Rn===0?Ss:xn(Rn,Ss%Rn)},fs=Xe.reduce(xn),tn=1;tn<=Xe.length;tn++)if(Xe.indexOf(tn*fs)===-1)return 0;return fs},ri=Ne(ui),kn=Oe(Gt.fractionalPart,!0),_i=Gt.integerPart.split("").filter(function(Xe){return Y.indexOf(Xe)!==-1}).length,Dn=_i,bi=Gt.fractionalPart.split(""),Di=bi.filter(function(Xe){return Y.indexOf(Xe)!==-1}).length,Qe=bi.filter(function(Xe){return Y.indexOf(Xe)!==-1||Xe===V.digit}).length,xi=typeof Gt.exponentPart=="string";_i===0&&Qe===0&&(xi?(Di=1,Qe=1):_i=1),xi&&_i===0&&Gt.integerPart.indexOf(V.digit)!==-1&&(_i=1),_i===0&&Di===0&&(Di=1);var Ir=0;return xi&&(Ir=Gt.exponentPart.split("").filter(function(Xe){return Y.indexOf(Xe)!==-1}).length),{integerPartGroupingPositions:ui,regularGrouping:ri,minimumIntegerPartSize:_i,scalingFactor:Dn,prefix:Gt.prefix,fractionalPartGroupingPositions:kn,minimumFactionalPartSize:Di,maximumFactionalPartSize:Qe,minimumExponentSize:Ir,suffix:Gt.suffix,picture:Gt.subpicture}},si=te.map(fe);si.forEach(pe);var ke=si.map(me),gi=V["minus-sign"],Se=V["zero-digit"],ki=V["decimal-separator"],Yn=V["grouping-separator"];ke.length===1&&(ke.push(JSON.parse(JSON.stringify(ke[0]))),ke[1].prefix=gi+ke[1].prefix);var Fe;p>=0?Fe=ke[0]:Fe=ke[1];var Ln;Fe.picture.indexOf(V.percent)!==-1?Ln=p*100:Fe.picture.indexOf(V["per-mille"])!==-1?Ln=p*1e3:Ln=p;var gn,Pn;if(Fe.minimumExponentSize===0)gn=Ln;else{var Jo=Math.pow(10,Fe.scalingFactor),Nr=Math.pow(10,Fe.scalingFactor-1);for(gn=Ln,Pn=0;gn<Nr;)gn*=10,Pn-=1;for(;gn>Jo;)gn/=10,Pn+=1}var Xo=at(gn,Fe.maximumFactionalPartSize),Js=function(Gt,Oe){var ui=Math.abs(Gt).toFixed(Oe);return Se!=="0"&&(ui=ui.split("").map(function(Ne){return Ne>="0"&&Ne<="9"?Y[Ne.charCodeAt(0)-48]:Ne}).join("")),ui},Zt=Js(Xo,Fe.maximumFactionalPartSize),Ge=Zt.indexOf(".");for(Ge===-1?Zt=Zt+ki:Zt=Zt.replace(".",ki);Zt.charAt(0)===Se;)Zt=Zt.substring(1);for(;Zt.charAt(Zt.length-1)===Se;)Zt=Zt.substring(0,Zt.length-1);Ge=Zt.indexOf(ki);var Qn=Fe.minimumIntegerPartSize-Ge,br=Fe.minimumFactionalPartSize-(Zt.length-Ge-1);if(Zt=(Qn>0?new Array(Qn+1).join(Se):"")+Zt,Zt=Zt+(br>0?new Array(br+1).join(Se):""),Ge=Zt.indexOf(ki),Fe.regularGrouping>0)for(var Ar=Math.floor((Ge-1)/Fe.regularGrouping),Is=1;Is<=Ar;Is++)Zt=[Zt.slice(0,Ge-Is*Fe.regularGrouping),Yn,Zt.slice(Ge-Is*Fe.regularGrouping)].join("");else Fe.integerPartGroupingPositions.forEach(function(Gt){Zt=[Zt.slice(0,Ge-Gt),Yn,Zt.slice(Ge-Gt)].join(""),Ge++});if(Ge=Zt.indexOf(ki),Fe.fractionalPartGroupingPositions.forEach(function(Gt){Zt=[Zt.slice(0,Gt+Ge+1),Yn,Zt.slice(Gt+Ge+1)].join("")}),Ge=Zt.indexOf(ki),(Fe.picture.indexOf(ki)===-1||Ge===Zt.length-1)&&(Zt=Zt.substring(0,Zt.length-1)),typeof Pn<"u"){var cs=Js(Pn,0);Qn=Fe.minimumExponentSize-cs.length,Qn>0&&(cs=new Array(Qn+1).join(Se)+cs),Zt=Zt+V["exponent-separator"]+(Pn<0?gi:"")+cs}return Zt=Fe.prefix+Zt+Fe.suffix,Zt}}function M(p,x){if(!(typeof p>"u")){if(p=at(p),typeof x>"u"?x=10:x=at(x),x<2||x>36)throw{code:"D3100",stack:new Error().stack,value:x};var C=p.toString(x);return C}}function $(p){var x;if(!(typeof p>"u")){if(typeof p=="number")x=p;else if(typeof p=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(p)&&!isNaN(parseFloat(p))&&isFinite(p))x=parseFloat(p);else if(p===!0)x=1;else if(p===!1)x=0;else throw{code:"D3030",value:p,stack:new Error().stack,index:1};return x}}function ot(p){var x;if(!(typeof p>"u"))return x=Math.abs(p),x}function et(p){var x;if(!(typeof p>"u"))return x=Math.floor(p),x}function W(p){var x;if(!(typeof p>"u"))return x=Math.ceil(p),x}function at(p,x){var C;if(!(typeof p>"u")){if(x){var w=p.toString().split("e");p=+(w[0]+"e"+(w[1]?+w[1]+x:x))}C=Math.round(p);var V=C-p;return Math.abs(V)===.5&&Math.abs(C%2)===1&&(C=C-1),x&&(w=C.toString().split("e"),C=+(w[0]+"e"+(w[1]?+w[1]-x:-x))),Object.is(C,-0)&&(C=0),C}}function xt(p){var x;if(!(typeof p>"u")){if(p<0)throw{stack:new Error().stack,code:"D3060",index:1,value:p};return x=Math.sqrt(p),x}}function zt(p,x){var C;if(!(typeof p>"u")){if(C=Math.pow(p,x),!isFinite(C))throw{stack:new Error().stack,code:"D3061",index:1,value:p,exp:x};return C}}function dt(){return Math.random()}function bt(p){if(!(typeof p>"u")){var x=!1;if(Array.isArray(p)){if(p.length===1)x=bt(p[0]);else if(p.length>1){var C=p.filter(function(w){return bt(w)});x=C.length>0}}else typeof p=="string"?p.length>0&&(x=!0):T(p)?p!==0&&(x=!0):p!==null&&typeof p=="object"?Object.keys(p).length>0&&(x=!0):typeof p=="boolean"&&p===!0&&(x=!0);return x}}function j(p){if(!(typeof p>"u"))return!bt(p)}function $t(p,x,C,w){var V=[x],Y=rt(p);return Y>=2&&V.push(C),Y>=3&&V.push(w),V}function*Lt(p,x){if(!(typeof p>"u")){for(var C=y(),w=0;w<p.length;w++){var V=$t(x,p[w],w,p),Y=yield*x.apply(this,V);typeof Y<"u"&&C.push(Y)}return C}}function*$e(p,x){if(!(typeof p>"u")){for(var C=y(),w=0;w<p.length;w++){var V=p[w],Y=$t(x,V,w,p),ut=yield*x.apply(this,Y);bt(ut)&&C.push(V)}return C}}function*Li(p,x){if(!(typeof p>"u")){for(var C=!1,w,V=0;V<p.length;V++){var Y=p[V],ut=!0;if(typeof x<"u"){var Pt=$t(x,Y,V,p),jt=yield*x.apply(this,Pt);ut=bt(jt)}if(ut)if(!C)w=Y,C=!0;else throw{stack:new Error().stack,code:"D3138",index:V}}if(!C)throw{stack:new Error().stack,code:"D3139"};return w}}function ni(){for(var p=[],x=Array.prototype.slice.call(arguments),C=Math.min.apply(Math,x.map(function(Y){return Array.isArray(Y)?Y.length:0})),w=0;w<C;w++){var V=x.map(Y=>Y[w]);p.push(V)}return p}function*Ye(p,x,C){if(!(typeof p>"u")){var w,V=rt(x);if(V<2)throw{stack:new Error().stack,code:"D3050",index:1};var Y;for(typeof C>"u"&&p.length>0?(w=p[0],Y=1):(w=C,Y=0);Y<p.length;){var ut=[w,p[Y]];V>=3&&ut.push(Y),V>=4&&ut.push(p),w=yield*x.apply(this,ut),Y++}return w}}function Je(p){var x=y();if(Array.isArray(p)){var C={};p.forEach(function(w){var V=Je(w);V.forEach(function(Y){C[Y]=!0})}),x=Je(C)}else p!==null&&typeof p=="object"&&!R(p)&&Object.keys(p).forEach(w=>x.push(w));return x}function un(p,x){var C;if(Array.isArray(p)){C=y();for(var w=0;w<p.length;w++){var V=un(p[w],x);typeof V<"u"&&(Array.isArray(V)?V.forEach(Y=>C.push(Y)):C.push(V))}}else p!==null&&typeof p=="object"&&(C=p[x]);return C}function Tn(p,x){return typeof p>"u"?x:typeof x>"u"?p:(Array.isArray(p)||(p=y(p)),Array.isArray(x)||(x=[x]),p.concat(x))}function hs(p){return!(typeof p>"u")}function _t(p){var x=y();if(Array.isArray(p))p.forEach(function(V){x=Tn(x,_t(V))});else if(p!==null&&typeof p=="object"&&!R(p))for(var C in p){var w={};w[C]=p[C],x.push(w)}else x=p;return x}function As(p){if(!(typeof p>"u")){var x={};return p.forEach(function(C){for(var w in C)x[w]=C[w]}),x}}function ls(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var x=p.length,C=new Array(x),w=0;w<x;w++)C[x-w-1]=p[w];return C}}function*Ue(p,x){var C=y();for(var w in p){var V=$t(x,p[w],w,p),Y=yield*x.apply(this,V);typeof Y<"u"&&C.push(Y)}return C}function us(p){throw{code:"D3137",stack:new Error().stack,message:p||"$error() function evaluated"}}function Pi(p,x){if(!p)throw{code:"D3141",stack:new Error().stack,message:x||"$assert() statement failed"}}function Et(p){if(p!==void 0)return p===null?"null":T(p)?"number":typeof p=="string"?"string":typeof p=="boolean"?"boolean":Array.isArray(p)?"array":I(p)?"function":"object"}function*g(p,x){if(!(typeof p>"u")){if(p.length<=1)return p;var C;if(typeof x>"u"){if(!B(p)&&!k(p))throw{stack:new Error().stack,code:"D3070",index:1};C=function*(ut,Pt){return ut>Pt}}else C=x;var w=function*(ut,Pt){var jt=function*(fe,pe,me){pe.length===0?Array.prototype.push.apply(fe,me):me.length===0?Array.prototype.push.apply(fe,pe):(yield*C(pe[0],me[0]))?(fe.push(me[0]),yield*jt(fe,pe,me.slice(1))):(fe.push(pe[0]),yield*jt(fe,pe.slice(1),me))},te=[];return yield*jt(te,ut,Pt),te},V=function*(ut){if(!Array.isArray(ut)||ut.length<=1)return ut;var Pt=Math.floor(ut.length/2),jt=ut.slice(0,Pt),te=ut.slice(Pt);return jt=yield*V(jt),te=yield*V(te),yield*w(jt,te)},Y=yield*V(p);return Y}}function L(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var x=new Array(p.length),C=0;C<p.length;C++){var w=Math.floor(Math.random()*(C+1));C!==w&&(x[C]=x[w]),x[w]=p[C]}return x}}function D(p){if(!(typeof p>"u")){if(!Array.isArray(p)||p.length<=1)return p;for(var x=N(p)?y():[],C=0;C<p.length;C++){for(var w=p[C],V=!1,Y=0;Y<x.length;Y++)if(ht(w,x[Y])){V=!0;break}V||x.push(w)}return x}}function*S(p,x){var C={};for(var w in p){var V=p[w],Y=$t(x,V,w,p),ut=yield*x.apply(this,Y);bt(ut)&&(C[w]=V)}return Object.keys(C).length===0&&(C=void 0),C}return{sum:Q,count:ft,max:U,min:q,average:kt,string:st,substring:vt,substringBefore:Ut,substringAfter:qt,lowercase:Mt,uppercase:Nt,length:se,trim:Qt,pad:yt,match:It,contains:ce,replace:oe,split:Z,join:F,formatNumber:G,formatBase:M,number:$,floor:et,ceil:W,round:at,abs:ot,sqrt:xt,power:zt,random:dt,boolean:bt,not:j,map:Lt,zip:ni,filter:$e,single:Li,foldLeft:Ye,sift:S,keys:Je,lookup:un,append:Tn,exists:hs,spread:_t,merge:As,reverse:ls,each:Ue,error:us,assert:Pi,type:Et,sort:g,shuffle:L,distinct:D,base64encode:de,base64decode:O,encodeUrlComponent:P,encodeUrl:J,decodeUrlComponent:pt,decodeUrl:Ht}})();o.exports=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(s,o,h){var c=s("./datetime"),u=s("./functions"),f=s("./utils"),T=s("./parser"),k=s("./signature"),B=function(){"use strict";var y=f.isNumeric,N=f.isArrayOfStrings,I=f.isArrayOfNumbers,R=f.createSequence,tt=f.isSequence,rt=f.isFunction,ht=f.isLambda,z=f.isIterable,Q=f.getFunctionArity,ft=f.isDeepEqual,U=Ue(null);function*q(g,L,D){var S,p=D.lookup("__evaluate_entry");switch(p&&p(g,L,D),g.type){case"path":S=yield*kt(g,L,D);break;case"binary":S=yield*Nt(g,L,D);break;case"unary":S=yield*se(g,L,D);break;case"name":S=Qt(g,L,D);break;case"string":case"number":case"value":S=yt(g,L,D);break;case"wildcard":S=lt(g,L,D);break;case"descendant":S=It(g,L,D);break;case"parent":S=D.lookup(g.slot.label);break;case"condition":S=yield*ot(g,L,D);break;case"block":S=yield*et(g,L,D);break;case"bind":S=yield*$(g,L,D);break;case"regex":S=W(g,L,D);break;case"function":S=yield*j(g,L,D);break;case"variable":S=at(g,L,D);break;case"lambda":S=$e(g,L,D);break;case"partial":S=yield*Li(g,L,D);break;case"apply":S=yield*bt(g,L,D);break;case"transform":S=zt(g,L,D);break}if(D.async&&(typeof S>"u"||S===null||typeof S.then!="function")&&(S=Promise.resolve(S)),D.async&&typeof S.then=="function"&&g.nextFunction&&typeof S[g.nextFunction]=="function"||(S=yield S),Object.prototype.hasOwnProperty.call(g,"predicate"))for(var x=0;x<g.predicate.length;x++)S=yield*Mt(g.predicate[x].expr,S,D);g.type!=="path"&&Object.prototype.hasOwnProperty.call(g,"group")&&(S=yield*F(g.group,S,D));var C=D.lookup("__evaluate_exit");return C&&C(g,L,D,S),S&&tt(S)&&!S.tupleStream&&(g.keepArray&&(S.keepSingleton=!0),S.length===0?S=void 0:S.length===1&&(S=S.keepSingleton?S:S[0])),S}function*kt(g,L,D){var S;Array.isArray(L)&&g.steps[0].type!=="variable"?S=L:S=R(L);for(var p,x=!1,C=void 0,w=0;w<g.steps.length;w++){var V=g.steps[w];if(V.tuple&&(x=!0),w===0&&V.consarray?p=yield*q(V,S,D):x?C=yield*qt(V,S,C,D):p=yield*vt(V,S,D,w===g.steps.length-1),!x&&(typeof p>"u"||p.length===0))break;typeof V.focus>"u"&&(S=p)}if(x)if(g.tuple)p=C;else for(p=R(),w=0;w<C.length;w++)p.push(C[w]["@"]);return g.keepSingletonArray&&(Array.isArray(p)&&p.cons&&!p.sequence&&(p=R(p)),p.keepSingleton=!0),g.hasOwnProperty("group")&&(p=yield*F(g.group,x?C:p,D)),p}function st(g,L){var D=Ue(g);for(let S in L)D.bind(S,L[S]);return D}function*vt(g,L,D,S){var p;if(g.type==="sort")return p=yield*xt(g,L,D),g.stages&&(p=yield*Ut(g.stages,p,D)),p;p=R();for(var x=0;x<L.length;x++){var C=yield*q(g,L[x],D);if(g.stages)for(var w=0;w<g.stages.length;w++)C=yield*Mt(g.stages[w].expr,C,D);typeof C<"u"&&p.push(C)}var V=R();return S&&p.length===1&&Array.isArray(p[0])&&!tt(p[0])?V=p[0]:p.forEach(function(Y){!Array.isArray(Y)||Y.cons?V.push(Y):Y.forEach(ut=>V.push(ut))}),V}function*Ut(g,L,D){for(var S=L,p=0;p<g.length;p++){var x=g[p];switch(x.type){case"filter":S=yield*Mt(x.expr,S,D);break;case"index":for(var C=0;C<S.length;C++){var w=S[C];w[x.value]=C}break}}return S}function*qt(g,L,D,S){var p;if(g.type==="sort"){if(D)p=yield*xt(g,D,S);else{var x=yield*xt(g,L,S);p=R(),p.tupleStream=!0;for(var C=0;C<x.length;C++){var w={"@":x[C]};w[g.index]=C,p.push(w)}}return g.stages&&(p=yield*Ut(g.stages,p,S)),p}p=R(),p.tupleStream=!0;var V=S;D===void 0&&(D=L.map(jt=>({"@":jt})));for(var Y=0;Y<D.length;Y++){V=st(S,D[Y]);var ut=yield*q(g,D[Y]["@"],V);if(typeof ut<"u"){Array.isArray(ut)||(ut=[ut]);for(var Pt=0;Pt<ut.length;Pt++)w={},Object.assign(w,D[Y]),ut.tupleStream?Object.assign(w,ut[Pt]):(g.focus?(w[g.focus]=ut[Pt],w["@"]=D[Y]["@"]):w["@"]=ut[Pt],g.index&&(w[g.index]=Pt),g.ancestor&&(w[g.ancestor.label]=D[Y]["@"])),p.push(w)}}return g.stages&&(p=yield*Ut(g.stages,p,S)),p}function*Mt(g,L,D){var S=R();if(L&&L.tupleStream&&(S.tupleStream=!0),Array.isArray(L)||(L=R(L)),g.type==="number"){var p=Math.floor(g.value);p<0&&(p=L.length+p);var x=L[p];typeof x<"u"&&(Array.isArray(x)?S=x:S.push(x))}else for(p=0;p<L.length;p++){var x=L[p],C=x,w=D;L.tupleStream&&(C=x["@"],w=st(D,x));var V=yield*q(g,C,w);y(V)&&(V=[V]),I(V)?V.forEach(function(ut){var Pt=Math.floor(ut);Pt<0&&(Pt=L.length+Pt),Pt===p&&S.push(x)}):u.boolean(V)&&S.push(x)}return S}function*Nt(g,L,D){var S,p=yield*q(g.lhs,L,D),x=g.value,C=function*(){return yield*q(g.rhs,L,D)};if(x==="and"||x==="or")try{return yield*pt(p,C,x)}catch(V){throw V.position=g.position,V.token=x,V}var w=yield*C();try{switch(x){case"+":case"-":case"*":case"/":case"%":S=de(p,w,x);break;case"=":case"!=":S=O(p,w,x);break;case"<":case"<=":case">":case">=":S=P(p,w,x);break;case"&":S=Z(p,w);break;case"..":S=M(p,w);break;case"in":S=J(p,w);break}}catch(V){throw V.position=g.position,V.token=x,V}return S}function*se(g,L,D){var S;switch(g.value){case"-":if(S=yield*q(g.expression,L,D),typeof S>"u")S=void 0;else if(y(S))S=-S;else throw{code:"D1002",stack:new Error().stack,position:g.position,token:g.value,value:S};break;case"[":S=[];for(var p=0;p<g.expressions.length;p++){var x=g.expressions[p],C=yield*q(x,L,D);typeof C<"u"&&(x.value==="["?S.push(C):S=u.append(S,C))}g.consarray&&Object.defineProperty(S,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":S=yield*F(g,L,D);break}return S}function Qt(g,L,D){return u.lookup(L,g.value)}function yt(g){return g.value}function lt(g,L){var D=R();return Array.isArray(L)&&L.outerWrapper&&L.length>0&&(L=L[0]),L!==null&&typeof L=="object"&&Object.keys(L).forEach(function(S){var p=L[S];Array.isArray(p)?(p=ce(p),D=u.append(D,p)):D.push(p)}),D}function ce(g,L){return typeof L>"u"&&(L=[]),Array.isArray(g)?g.forEach(function(D){ce(D,L)}):L.push(g),L}function It(g,L){var D,S=R();return typeof L<"u"&&(oe(L,S),S.length===1?D=S[0]:D=S),D}function oe(g,L){Array.isArray(g)||L.push(g),Array.isArray(g)?g.forEach(function(D){oe(D,L)}):g!==null&&typeof g=="object"&&Object.keys(g).forEach(function(D){oe(g[D],L)})}function de(g,L,D){var S;if(typeof g<"u"&&!y(g))throw{code:"T2001",stack:new Error().stack,value:g};if(typeof L<"u"&&!y(L))throw{code:"T2002",stack:new Error().stack,value:L};if(typeof g>"u"||typeof L>"u")return S;switch(D){case"+":S=g+L;break;case"-":S=g-L;break;case"*":S=g*L;break;case"/":S=g/L;break;case"%":S=g%L;break}return S}function O(g,L,D){var S,p=typeof g,x=typeof L;if(p==="undefined"||x==="undefined")return!1;switch(D){case"=":S=ft(g,L);break;case"!=":S=!ft(g,L);break}return S}function P(g,L,D){var S,p=typeof g,x=typeof L,C=p==="undefined"||p==="string"||p==="number",w=x==="undefined"||x==="string"||x==="number";if(!C||!w)throw{code:"T2010",stack:new Error().stack,value:p==="string"||p==="number"?L:g};if(!(p==="undefined"||x==="undefined")){if(p!==x)throw{code:"T2009",stack:new Error().stack,value:g,value2:L};switch(D){case"<":S=g<L;break;case"<=":S=g<=L;break;case">":S=g>L;break;case">=":S=g>=L;break}return S}}function J(g,L){var D=!1;if(typeof g>"u"||typeof L>"u")return!1;Array.isArray(L)||(L=[L]);for(var S=0;S<L.length;S++)if(L[S]===g){D=!0;break}return D}function*pt(g,L,D){var S,p=Ht(g);switch(D){case"and":S=p&&Ht(yield*L());break;case"or":S=p||Ht(yield*L());break}return S}function Ht(g){var L=u.boolean(g);return typeof L>"u"?!1:L}function Z(g,L){var D,S="",p="";return typeof g<"u"&&(S=u.string(g)),typeof L<"u"&&(p=u.string(L)),D=S.concat(p),D}function*F(g,L,D){var S={},p={},x=!!(L&&L.tupleStream);Array.isArray(L)||(L=R(L)),L.length===0&&L.push(void 0);for(var C=0;C<L.length;C++)for(var w=L[C],V=x?st(D,w):D,Y=0;Y<g.lhs.length;Y++){var ut=g.lhs[Y],Pt=yield*q(ut[0],x?w["@"]:w,V);if(typeof Pt!="string"&&Pt!==void 0)throw{code:"T1003",stack:new Error().stack,position:g.position,value:Pt};if(Pt!==void 0){var jt={data:w,exprIndex:Y};if(p.hasOwnProperty(Pt)){if(p[Pt].exprIndex!==Y)throw{code:"D1009",stack:new Error().stack,position:g.position,value:Pt};p[Pt].data=u.append(p[Pt].data,w)}else p[Pt]=jt}}for(Pt in p){jt=p[Pt];var te=jt.data,V=D;if(x){var fe=G(jt.data);te=fe["@"],delete fe["@"],V=st(D,fe)}var pe=yield*q(g.lhs[jt.exprIndex][1],te,V);typeof pe<"u"&&(S[Pt]=pe)}return S}function G(g){if(!Array.isArray(g))return g;var L={};Object.assign(L,g[0]);for(var D=1;D<g.length;D++)for(let S in g[D])L[S]=u.append(L[S],g[D][S]);return L}function M(g,L){var D;if(typeof g<"u"&&!Number.isInteger(g))throw{code:"T2003",stack:new Error().stack,value:g};if(typeof L<"u"&&!Number.isInteger(L))throw{code:"T2004",stack:new Error().stack,value:L};if(typeof g>"u"||typeof L>"u"||g>L)return D;var S=L-g+1;if(S>1e7)throw{code:"D2014",stack:new Error().stack,value:S};D=new Array(S);for(var p=g,x=0;p<=L;p++,x++)D[x]=p;return D.sequence=!0,D}function*$(g,L,D){var S=yield*q(g.rhs,L,D);return D.bind(g.lhs.value,S),S}function*ot(g,L,D){var S,p=yield*q(g.condition,L,D);return u.boolean(p)?S=yield*q(g.then,L,D):typeof g.else<"u"&&(S=yield*q(g.else,L,D)),S}function*et(g,L,D){for(var S,p=Ue(D),x=0;x<g.expressions.length;x++)S=yield*q(g.expressions[x],L,p);return S}function W(g){var L=new Et.RegexEngine(g.value),D=function(S,p){var x;L.lastIndex=p||0;var C=L.exec(S);if(C!==null){if(x={match:C[0],start:C.index,end:C.index+C[0].length,groups:[]},C.length>1)for(var w=1;w<C.length;w++)x.groups.push(C[w]);x.next=function(){if(!(L.lastIndex>=S.length)){var V=D(S,L.lastIndex);if(V&&V.match==="")throw{code:"D1004",stack:new Error().stack,position:g.position,value:g.value.source};return V}}}return x};return D}function at(g,L,D){var S;return g.value===""?S=L&&L.outerWrapper?L[0]:L:S=D.lookup(g.value),S}function*xt(g,L,D){var S,p=L,x=!!L.tupleStream,C=function*(V,Y){for(var ut=0,Pt=0;ut===0&&Pt<g.terms.length;Pt++){var jt=g.terms[Pt],te=V,fe=D;x&&(te=V["@"],fe=st(D,V));var pe=yield*q(jt.expression,te,fe);te=Y,fe=D,x&&(te=Y["@"],fe=st(D,Y));var me=yield*q(jt.expression,te,fe),si=typeof pe,ke=typeof me;if(si==="undefined"){ut=ke==="undefined"?0:1;continue}if(ke==="undefined"){ut=-1;continue}if(!(si==="string"||si==="number")||!(ke==="string"||ke==="number"))throw{code:"T2008",stack:new Error().stack,position:g.position,value:si==="string"||si==="number"?me:pe};if(si!==ke)throw{code:"T2007",stack:new Error().stack,position:g.position,value:pe,value2:me};pe!==me&&(pe<me?ut=-1:ut=1,jt.descending===!0&&(ut=-ut))}return ut===1},w={environment:D,input:L};return S=yield*u.sort.apply(w,[p,C]),S}function zt(g,L,D){var S=function*(p){if(!(typeof p>"u")){var x=D.lookup("clone");if(!rt(x))throw{code:"T2013",stack:new Error().stack,position:g.position};var C=yield*$t(x,[p],null,D),w=yield*q(g.pattern,C,D);if(typeof w<"u"){Array.isArray(w)||(w=[w]);for(var V=0;V<w.length;V++){var Y=w[V],ut=yield*q(g.update,Y,D),Pt=typeof ut;if(Pt!=="undefined"){if(Pt!=="object"||ut===null||Array.isArray(ut))throw{code:"T2011",stack:new Error().stack,position:g.update.position,value:ut};for(var jt in ut)Y[jt]=ut[jt]}if(typeof g.delete<"u"){var te=yield*q(g.delete,Y,D);if(typeof te<"u"){var fe=te;if(Array.isArray(te)||(te=[te]),!N(te))throw{code:"T2012",stack:new Error().stack,position:g.delete.position,value:fe};for(var pe=0;pe<te.length;pe++)typeof Y=="object"&&Y!==null&&delete Y[te[pe]]}}}}return C}};return _t(S,"<(oa):o>")}var dt=T("function($f, $g) { function($x){ $g($f($x)) } }");function*bt(g,L,D){var S,p=yield*q(g.lhs,L,D);if(g.rhs.type==="function")S=yield*j(g.rhs,L,D,{context:p});else{var x=yield*q(g.rhs,L,D);if(!rt(x))throw{code:"T2006",stack:new Error().stack,position:g.position,value:x};if(rt(p)){var C=yield*q(dt,null,D);S=yield*$t(C,[p,x],null,D)}else S=yield*$t(x,[p],null,D)}return S}function*j(g,L,D,S){var p,x=yield*q(g.procedure,L,D);if(typeof x>"u"&&g.procedure.type==="path"&&D.lookup(g.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:g.position,token:g.procedure.steps[0].value};var C=[];typeof S<"u"&&C.push(S.context);for(var w=0;w<g.arguments.length;w++){let Y=yield*q(g.arguments[w],L,D);if(rt(Y)){let ut=function*(...Pt){return yield*$t(Y,Pt,null,D)};ut.arity=Q(Y),C.push(ut)}else C.push(Y)}var V=g.procedure.type==="path"?g.procedure.steps[0].value:g.procedure.value;try{typeof x=="object"&&(x.token=V,x.position=g.position),p=yield*$t(x,C,L,D)}catch(Y){throw Y.position||(Y.position=g.position),Y.token||(Y.token=V),Y}return p}function*$t(g,L,D,S){var p;for(p=yield*Lt(g,L,D,S);ht(p)&&p.thunk===!0;){var x=yield*q(p.body.procedure,p.input,p.environment);p.body.procedure.type==="variable"&&(x.token=p.body.procedure.value),x.position=p.body.procedure.position;for(var C=[],w=0;w<p.body.arguments.length;w++)C.push(yield*q(p.body.arguments[w],p.input,p.environment));p=yield*Lt(x,C,D,S)}return p}function*Lt(g,L,D,S){var p;try{var x=L;if(g&&(x=ni(g.signature,L,D)),ht(g))p=yield*Ye(g,x);else if(g&&g._jsonata_function===!0){var C={environment:S,input:D};p=g.implementation.apply(C,x),z(p)&&(p=yield*p)}else if(typeof g=="function")p=g.apply(D,x),z(p)&&(p=yield*p);else throw{code:"T1006",stack:new Error().stack}}catch(w){throw g&&(typeof w.token>"u"&&typeof g.token<"u"&&(w.token=g.token),w.position=g.position),w}return p}function $e(g,L,D){var S={_jsonata_lambda:!0,input:L,environment:D,arguments:g.arguments,signature:g.signature,body:g.body};return g.thunk===!0&&(S.thunk=!0),S.apply=function*(p,x){return yield*$t(S,x,L,p.environment)},S}function*Li(g,L,D){for(var S,p=[],x=0;x<g.arguments.length;x++){var C=g.arguments[x];C.type==="operator"&&C.value==="?"?p.push(C):p.push(yield*q(C,L,D))}var w=yield*q(g.procedure,L,D);if(typeof w>"u"&&g.procedure.type==="path"&&D.lookup(g.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:g.position,token:g.procedure.steps[0].value};if(ht(w))S=Je(w,p);else if(w&&w._jsonata_function===!0)S=un(w.implementation,p);else if(typeof w=="function")S=un(w,p);else throw{code:"T1008",stack:new Error().stack,position:g.position,token:g.procedure.type==="path"?g.procedure.steps[0].value:g.procedure.value};return S}function ni(g,L,D){if(typeof g>"u")return L;var S=g.validate(L,D);return S}function*Ye(g,L){var D,S=Ue(g.environment);return g.arguments.forEach(function(p,x){S.bind(p.value,L[x])}),typeof g.body=="function"?D=yield*Tn(g.body,S):D=yield*q(g.body,g.input,S),D}function Je(g,L){var D=Ue(g.environment),S=[];g.arguments.forEach(function(x,C){var w=L[C];w&&w.type==="operator"&&w.value==="?"?S.push(x):D.bind(x.value,w)});var p={_jsonata_lambda:!0,input:g.input,environment:D,arguments:S,body:g.body};return p}function un(g,L){var D=hs(g);D=D.map(function(C){return"$"+C.trim()});var S="function("+D.join(", ")+"){ _ }",p=T(S);p.body=g;var x=Je(p,L);return x}function*Tn(g,L){var D=hs(g),S=D.map(function(C){return L.lookup(C.trim())}),p={environment:L},x=g.apply(p,S);return z(x)&&(x=yield*x),x}function hs(g){var L=g.toString(),D=/\(([^)]*)\)/.exec(L)[1],S=D.split(",");return S}function _t(g,L){var D={_jsonata_function:!0,implementation:g};return typeof L<"u"&&(D.signature=k(L)),D}function*As(g,L){if(!(typeof g>"u")){var D=this.input;typeof L<"u"&&(D=L,Array.isArray(D)&&!tt(D)&&(D=R(D),D.outerWrapper=!0));try{var S=T(g,!1)}catch(x){throw Pi(x),{stack:new Error().stack,code:"D3120",value:x.message,error:x}}try{var p=yield*q(S,D,this.environment)}catch(x){throw Pi(x),{stack:new Error().stack,code:"D3121",value:x.message,error:x}}return p}}function ls(g){if(!(typeof g>"u"))return JSON.parse(u.string(g))}function Ue(g){var L={};return{bind:function(D,S){L[D]=S},lookup:function(D){var S;return L.hasOwnProperty(D)?S=L[D]:g&&(S=g.lookup(D)),S},timestamp:g?g.timestamp:null,async:g?g.async:!1,global:g?g.global:{ancestry:[null]}}}U.bind("sum",_t(u.sum,"<a<n>:n>")),U.bind("count",_t(u.count,"<a:n>")),U.bind("max",_t(u.max,"<a<n>:n>")),U.bind("min",_t(u.min,"<a<n>:n>")),U.bind("average",_t(u.average,"<a<n>:n>")),U.bind("string",_t(u.string,"<x-b?:s>")),U.bind("substring",_t(u.substring,"<s-nn?:s>")),U.bind("substringBefore",_t(u.substringBefore,"<s-s:s>")),U.bind("substringAfter",_t(u.substringAfter,"<s-s:s>")),U.bind("lowercase",_t(u.lowercase,"<s-:s>")),U.bind("uppercase",_t(u.uppercase,"<s-:s>")),U.bind("length",_t(u.length,"<s-:n>")),U.bind("trim",_t(u.trim,"<s-:s>")),U.bind("pad",_t(u.pad,"<s-ns?:s>")),U.bind("match",_t(u.match,"<s-f<s:o>n?:a<o>>")),U.bind("contains",_t(u.contains,"<s-(sf):b>")),U.bind("replace",_t(u.replace,"<s-(sf)(sf)n?:s>")),U.bind("split",_t(u.split,"<s-(sf)n?:a<s>>")),U.bind("join",_t(u.join,"<a<s>s?:s>")),U.bind("formatNumber",_t(u.formatNumber,"<n-so?:s>")),U.bind("formatBase",_t(u.formatBase,"<n-n?:s>")),U.bind("formatInteger",_t(c.formatInteger,"<n-s:s>")),U.bind("parseInteger",_t(c.parseInteger,"<s-s:n>")),U.bind("number",_t(u.number,"<(nsb)-:n>")),U.bind("floor",_t(u.floor,"<n-:n>")),U.bind("ceil",_t(u.ceil,"<n-:n>")),U.bind("round",_t(u.round,"<n-n?:n>")),U.bind("abs",_t(u.abs,"<n-:n>")),U.bind("sqrt",_t(u.sqrt,"<n-:n>")),U.bind("power",_t(u.power,"<n-n:n>")),U.bind("random",_t(u.random,"<:n>")),U.bind("boolean",_t(u.boolean,"<x-:b>")),U.bind("not",_t(u.not,"<x-:b>")),U.bind("map",_t(u.map,"<af>")),U.bind("zip",_t(u.zip,"<a+>")),U.bind("filter",_t(u.filter,"<af>")),U.bind("single",_t(u.single,"<af?>")),U.bind("reduce",_t(u.foldLeft,"<afj?:j>")),U.bind("sift",_t(u.sift,"<o-f?:o>")),U.bind("keys",_t(u.keys,"<x-:a<s>>")),U.bind("lookup",_t(u.lookup,"<x-s:x>")),U.bind("append",_t(u.append,"<xx:a>")),U.bind("exists",_t(u.exists,"<x:b>")),U.bind("spread",_t(u.spread,"<x-:a<o>>")),U.bind("merge",_t(u.merge,"<a<o>:o>")),U.bind("reverse",_t(u.reverse,"<a:a>")),U.bind("each",_t(u.each,"<o-f:a>")),U.bind("error",_t(u.error,"<s?:x>")),U.bind("assert",_t(u.assert,"<bs?:x>")),U.bind("type",_t(u.type,"<x:s>")),U.bind("sort",_t(u.sort,"<af?:a>")),U.bind("shuffle",_t(u.shuffle,"<a:a>")),U.bind("distinct",_t(u.distinct,"<x:x>")),U.bind("base64encode",_t(u.base64encode,"<s-:s>")),U.bind("base64decode",_t(u.base64decode,"<s-:s>")),U.bind("encodeUrlComponent",_t(u.encodeUrlComponent,"<s-:s>")),U.bind("encodeUrl",_t(u.encodeUrl,"<s-:s>")),U.bind("decodeUrlComponent",_t(u.decodeUrlComponent,"<s-:s>")),U.bind("decodeUrl",_t(u.decodeUrl,"<s-:s>")),U.bind("eval",_t(As,"<sx?:x>")),U.bind("toMillis",_t(c.toMillis,"<s-s?:n>")),U.bind("fromMillis",_t(c.fromMillis,"<n-s?s?:s>")),U.bind("clone",_t(ls,"<(oa)-:o>"));var us={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Pi(g){var L=us[g.code];if(typeof L<"u"){var D=L.replace(/\{\{\{([^}]+)}}}/g,function(){return g[arguments[1]]});D=D.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(g[arguments[1]])}),g.message=D}}function Et(g,L){var D,S;try{D=T(g,L&&L.recover),S=D.errors,delete D.errors}catch(C){throw Pi(C),C}var p=Ue(U),x=new Date;return p.bind("now",_t(function(C,w){return c.fromMillis(x.getTime(),C,w)},"<s?s?:s>")),p.bind("millis",_t(function(){return x.getTime()},"<:n>")),L&&L.RegexEngine?Et.RegexEngine=L.RegexEngine:Et.RegexEngine=RegExp,{evaluate:function(C,w,V){if(typeof S<"u"){var Y={code:"S0500",position:0};throw Pi(Y),Y}if(typeof w<"u"){var ut;ut=Ue(p);for(var Pt in w)ut.bind(Pt,w[Pt])}else ut=p;ut.bind("$",C),x=new Date,ut.timestamp=x,Array.isArray(C)&&!tt(C)&&(C=R(C),C.outerWrapper=!0);var jt,te;if(typeof V=="function"){ut.async=!0;var fe=function(me){Pi(me),V(me,null)},pe=function(me){jt=te.next(me),jt.done?V(null,jt.value):jt.value.then(pe).catch(fe)};te=q(D,C,ut),jt=te.next(),jt.value.then(pe).catch(fe)}else try{for(te=q(D,C,ut),jt=te.next();!jt.done;)jt=te.next(jt.value);return jt.value}catch(me){throw Pi(me),me}},assign:function(C,w){p.bind(C,w)},registerFunction:function(C,w,V){var Y=_t(w,V);p.bind(C,Y)},ast:function(){return D},errors:function(){return S}}}return Et.parser=T,Et}();o.exports=B},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(s,o,h){var c=s("./signature");let u=(()=>{"use strict";var f={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},T={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},k=function(y){var N=0,I=y.length,R=function(ht,z){var Q={type:ht,value:z,position:N};return Q},tt=function(){for(var ht=N,z=0,Q,ft;N<I;){var U=y.charAt(N);if(U==="/"&&y.charAt(N-1)!=="\\"&&z===0){if(Q=y.substring(ht,N),Q==="")throw{code:"S0301",stack:new Error().stack,position:N};for(N++,U=y.charAt(N),ht=N;U==="i"||U==="m";)N++,U=y.charAt(N);return ft=y.substring(ht,N)+"g",new RegExp(Q,ft)}(U==="("||U==="["||U==="{")&&y.charAt(N-1)!=="\\"&&z++,(U===")"||U==="]"||U==="}")&&y.charAt(N-1)!=="\\"&&z--,N++}throw{code:"S0302",stack:new Error().stack,position:N}},rt=function(ht){if(N>=I)return null;for(var z=y.charAt(N);N<I&&` 	
\r\v`.indexOf(z)>-1;)N++,z=y.charAt(N);if(z==="/"&&y.charAt(N+1)==="*"){var Q=N;for(N+=2,z=y.charAt(N);!(z==="*"&&y.charAt(N+1)==="/");)if(z=y.charAt(++N),N>=I)throw{code:"S0106",stack:new Error().stack,position:Q};return N+=2,z=y.charAt(N),rt(ht)}if(ht!==!0&&z==="/")return N++,R("regex",tt());if(z==="."&&y.charAt(N+1)===".")return N+=2,R("operator","..");if(z===":"&&y.charAt(N+1)==="=")return N+=2,R("operator",":=");if(z==="!"&&y.charAt(N+1)==="=")return N+=2,R("operator","!=");if(z===">"&&y.charAt(N+1)==="=")return N+=2,R("operator",">=");if(z==="<"&&y.charAt(N+1)==="=")return N+=2,R("operator","<=");if(z==="*"&&y.charAt(N+1)==="*")return N+=2,R("operator","**");if(z==="~"&&y.charAt(N+1)===">")return N+=2,R("operator","~>");if(Object.prototype.hasOwnProperty.call(f,z))return N++,R("operator",z);if(z==='"'||z==="'"){var ft=z;N++;for(var U="";N<I;){if(z=y.charAt(N),z==="\\")if(N++,z=y.charAt(N),Object.prototype.hasOwnProperty.call(T,z))U+=T[z];else if(z==="u"){var q=y.substr(N+1,4);if(/^[0-9a-fA-F]+$/.test(q)){var kt=parseInt(q,16);U+=String.fromCharCode(kt),N+=4}else throw{code:"S0104",stack:new Error().stack,position:N}}else throw{code:"S0103",stack:new Error().stack,position:N,token:z};else{if(z===ft)return N++,R("string",U);U+=z}N++}throw{code:"S0101",stack:new Error().stack,position:N}}var st=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,vt=st.exec(y.substring(N));if(vt!==null){var Ut=parseFloat(vt[0]);if(!isNaN(Ut)&&isFinite(Ut))return N+=vt[0].length,R("number",Ut);throw{code:"S0102",stack:new Error().stack,position:N,token:vt[0]}}var qt;if(z==="`"){N++;var Mt=y.indexOf("`",N);if(Mt!==-1)return qt=y.substring(N,Mt),N=Mt+1,R("name",qt);throw N=I,{code:"S0105",stack:new Error().stack,position:N}}for(var Nt=N,se;;)if(se=y.charAt(Nt),Nt===I||` 	
\r\v`.indexOf(se)>-1||Object.prototype.hasOwnProperty.call(f,se)){if(y.charAt(N)==="$")return qt=y.substring(N+1,Nt),N=Nt,R("variable",qt);switch(qt=y.substring(N,Nt),N=Nt,qt){case"or":case"in":case"and":return R("operator",qt);case"true":return R("value",!0);case"false":return R("value",!1);case"null":return R("value",null);default:return N===I&&qt===""?null:R("name",qt)}}else Nt++};return rt},B=function(y,N){var I,R,tt={},rt=[],ht=function(){var O=[];I.id!=="(end)"&&O.push({type:I.type,value:I.value,position:I.position});for(var P=R();P!==null;)O.push(P),P=R();return O},z={nud:function(){var O={code:"S0211",token:this.value,position:this.position};if(N)return O.remaining=ht(),O.type="error",rt.push(O),O;throw O.stack=new Error().stack,O}},Q=function(O,P){var J=tt[O];return P=P||0,J?P>=J.lbp&&(J.lbp=P):(J=Object.create(z),J.id=J.value=O,J.lbp=P,tt[O]=J),J},ft=function(O){if(N){O.remaining=ht(),rt.push(O);var P=tt["(error)"];return I=Object.create(P),I.error=O,I.type="(error)",I}else throw O.stack=new Error().stack,O},U=function(O,P){if(O&&I.id!==O){var J;I.id==="(end)"?J="S0203":J="S0202";var pt={code:J,position:I.position,token:I.value,value:O};return ft(pt)}var Ht=R(P);if(Ht===null)return I=tt["(end)"],I.position=y.length,I;var Z=Ht.value,F=Ht.type,G;switch(F){case"name":case"variable":G=tt["(name)"];break;case"operator":if(G=tt[Z],!G)return ft({code:"S0204",stack:new Error().stack,position:Ht.position,token:Z});break;case"string":case"number":case"value":G=tt["(literal)"];break;case"regex":F="regex",G=tt["(regex)"];break;default:return ft({code:"S0205",stack:new Error().stack,position:Ht.position,token:Z})}return I=Object.create(G),I.value=Z,I.type=F,I.position=Ht.position,I},q=function(O){var P,J=I;for(U(null,!0),P=J.nud();O<I.lbp;)J=I,U(),P=J.led(P);return P},kt=function(O){var P=Q(O,0);P.nud=function(){return this}},st=function(O,P,J){var pt=P||f[O],Ht=Q(O,pt);return Ht.led=J||function(Z){return this.lhs=Z,this.rhs=q(pt),this.type="binary",this},Ht},vt=function(O,P,J){var pt=Q(O,P);return pt.led=J,pt},Ut=function(O,P){var J=Q(O);return J.nud=P||function(){return this.expression=q(70),this.type="unary",this},J};kt("(end)"),kt("(name)"),kt("(literal)"),kt("(regex)"),Q(":"),Q(";"),Q(","),Q(")"),Q("]"),Q("}"),Q(".."),st("."),st("+"),st("-"),st("*"),st("/"),st("%"),st("="),st("<"),st(">"),st("!="),st("<="),st(">="),st("&"),st("and"),st("or"),st("in"),kt("and"),kt("or"),kt("in"),Ut("-"),st("~>"),vt("(error)",10,function(O){return this.lhs=O,this.error=I.error,this.remaining=ht(),this.type="error",this}),Ut("*",function(){return this.type="wildcard",this}),Ut("**",function(){return this.type="descendant",this}),Ut("%",function(){return this.type="parent",this}),st("(",f["("],function(O){if(this.procedure=O,this.type="function",this.arguments=[],I.id!==")")for(;I.type==="operator"&&I.id==="?"?(this.type="partial",this.arguments.push(I),U("?")):this.arguments.push(q(0)),I.id===",";)U(",");if(U(")",!0),O.type==="name"&&(O.value==="function"||O.value==="\u03BB")){if(this.arguments.forEach(function(Z,F){if(Z.type!=="variable")return ft({code:"S0208",stack:new Error().stack,position:Z.position,token:Z.value,value:F+1})}),this.type="lambda",I.id==="<"){for(var P=I.position,J=1,pt="<";J>0&&I.id!=="{"&&I.id!=="(end)";){var Ht=U();Ht.id===">"?J--:Ht.id==="<"&&J++,pt+=Ht.value}U(">");try{this.signature=c(pt)}catch(Z){return Z.position=P+Z.offset,ft(Z)}}U("{"),this.body=q(0),U("}")}return this}),Ut("(",function(){for(var O=[];I.id!==")"&&(O.push(q(0)),I.id===";");)U(";");return U(")",!0),this.type="block",this.expressions=O,this}),Ut("[",function(){var O=[];if(I.id!=="]")for(;;){var P=q(0);if(I.id===".."){var J={type:"binary",value:"..",position:I.position,lhs:P};U(".."),J.rhs=q(0),P=J}if(O.push(P),I.id!==",")break;U(",")}return U("]",!0),this.expressions=O,this.type="unary",this}),st("[",f["["],function(O){if(I.id==="]"){for(var P=O;P&&P.type==="binary"&&P.value==="[";)P=P.lhs;return P.keepArray=!0,U("]"),O}else return this.lhs=O,this.rhs=q(f["]"]),this.type="binary",U("]",!0),this}),st("^",f["^"],function(O){U("(");for(var P=[];;){var J={descending:!1};if(I.id==="<"?U("<"):I.id===">"&&(J.descending=!0,U(">")),J.expression=q(0),P.push(J),I.id!==",")break;U(",")}return U(")"),this.lhs=O,this.rhs=P,this.type="binary",this});var qt=function(O){var P=[];if(I.id!=="}")for(;;){var J=q(0);U(":");var pt=q(0);if(P.push([J,pt]),I.id!==",")break;U(",")}return U("}",!0),typeof O>"u"?(this.lhs=P,this.type="unary"):(this.lhs=O,this.rhs=P,this.type="binary"),this};Ut("{",qt),st("{",f["{"],qt),vt(":=",f[":="],function(O){return O.type!=="variable"?ft({code:"S0212",stack:new Error().stack,position:O.position,token:O.value}):(this.lhs=O,this.rhs=q(f[":="]-1),this.type="binary",this)}),st("@",f["@"],function(O){return this.lhs=O,this.rhs=q(f["@"]),this.rhs.type!=="variable"?ft({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),st("#",f["#"],function(O){return this.lhs=O,this.rhs=q(f["#"]),this.rhs.type!=="variable"?ft({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),st("?",f["?"],function(O){return this.type="condition",this.condition=O,this.then=q(0),I.id===":"&&(U(":"),this.else=q(0)),this}),Ut("|",function(){return this.type="transform",this.pattern=q(0),U("|"),this.update=q(0),I.id===","&&(U(","),this.delete=q(0)),U("|"),this});var Mt=function(O){var P;if(O.type==="function"&&!O.predicate){var J={type:"lambda",thunk:!0,arguments:[],position:O.position};J.body=O,P=J}else if(O.type==="condition")O.then=Mt(O.then),typeof O.else<"u"&&(O.else=Mt(O.else)),P=O;else if(O.type==="block"){var pt=O.expressions.length;pt>0&&(O.expressions[pt-1]=Mt(O.expressions[pt-1])),P=O}else P=O;return P},Nt=0,se=0,Qt=[],yt=function(O,P){switch(O.type){case"name":case"wildcard":P.level--,P.level===0&&(typeof O.ancestor>"u"||(Qt[P.index].slot.label=O.ancestor.label),O.ancestor=P,O.tuple=!0);break;case"parent":P.level++;break;case"block":O.expressions.length>0&&(O.tuple=!0,P=yt(O.expressions[O.expressions.length-1],P));break;case"path":O.tuple=!0;var J=O.steps.length-1;for(P=yt(O.steps[J--],P);P.level>0&&J>=0;)P=yt(O.steps[J--],P);break;default:throw{code:"S0217",token:O.type,position:O.position}}return P},lt=function(O,P){if(typeof P.seekingParent<"u"||P.type==="parent"){var J=typeof P.seekingParent<"u"?P.seekingParent:[];P.type==="parent"&&J.push(P.slot),typeof O.seekingParent>"u"?O.seekingParent=J:Array.prototype.push.apply(O.seekingParent,J)}},ce=function(O){var P=O.steps.length-1,J=O.steps[P],pt=typeof J.seekingParent<"u"?J.seekingParent:[];J.type==="parent"&&pt.push(J.slot);for(var Ht=0;Ht<pt.length;Ht++){var Z=pt[Ht];for(P=O.steps.length-2;Z.level>0;){if(P<0){typeof O.seekingParent>"u"?O.seekingParent=[Z]:O.seekingParent.push(Z);break}for(var F=O.steps[P--];P>=0&&F.focus&&O.steps[P].focus;)F=O.steps[P--];Z=yt(F,Z)}}},It=function(O){var P;switch(O.type){case"binary":switch(O.value){case".":var J=It(O.lhs);J.type==="path"?P=J:P={type:"path",steps:[J]},J.type==="parent"&&(P.seekingParent=[J.slot]);var pt=It(O.rhs);pt.type==="function"&&pt.procedure.type==="path"&&pt.procedure.steps.length===1&&pt.procedure.steps[0].type==="name"&&P.steps[P.steps.length-1].type==="function"&&(P.steps[P.steps.length-1].nextFunction=pt.procedure.steps[0].value),pt.type==="path"?Array.prototype.push.apply(P.steps,pt.steps):(typeof pt.predicate<"u"&&(pt.stages=pt.predicate,delete pt.predicate),P.steps.push(pt)),P.steps.filter(function(at){if(at.type==="number"||at.type==="value")throw{code:"S0213",stack:new Error().stack,position:at.position,value:at.value};return at.type==="string"}).forEach(function(at){at.type="name"}),P.steps.filter(function(at){return at.keepArray===!0}).length>0&&(P.keepSingletonArray=!0);var Ht=P.steps[0];Ht.type==="unary"&&Ht.value==="["&&(Ht.consarray=!0);var Z=P.steps[P.steps.length-1];Z.type==="unary"&&Z.value==="["&&(Z.consarray=!0),ce(P);break;case"[":P=It(O.lhs);var F=P,G="predicate";if(P.type==="path"&&(F=P.steps[P.steps.length-1],G="stages"),typeof F.group<"u")throw{code:"S0209",stack:new Error().stack,position:O.position};typeof F[G]>"u"&&(F[G]=[]);var M=It(O.rhs);typeof M.seekingParent<"u"&&(M.seekingParent.forEach(at=>{at.level===1?yt(F,at):at.level--}),lt(F,M)),F[G].push({type:"filter",expr:M,position:O.position});break;case"{":if(P=It(O.lhs),typeof P.group<"u")throw{code:"S0210",stack:new Error().stack,position:O.position};P.group={lhs:O.rhs.map(function(at){return[It(at[0]),It(at[1])]}),position:O.position};break;case"^":P=It(O.lhs),P.type!=="path"&&(P={type:"path",steps:[P]});var $={type:"sort",position:O.position};$.terms=O.rhs.map(function(at){var xt=It(at.expression);return lt($,xt),{descending:at.descending,expression:xt}}),P.steps.push($),ce(P);break;case":=":P={type:"bind",value:O.value,position:O.position},P.lhs=It(O.lhs),P.rhs=It(O.rhs),lt(P,P.rhs);break;case"@":if(P=It(O.lhs),F=P,P.type==="path"&&(F=P.steps[P.steps.length-1]),typeof F.stages<"u"||typeof F.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:O.position};if(F.type==="sort")throw{code:"S0216",stack:new Error().stack,position:O.position};O.keepArray&&(F.keepArray=!0),F.focus=O.rhs.value,F.tuple=!0;break;case"#":P=It(O.lhs),F=P,P.type==="path"?F=P.steps[P.steps.length-1]:(P={type:"path",steps:[P]},typeof F.predicate<"u"&&(F.stages=F.predicate,delete F.predicate)),typeof F.stages>"u"?F.index=O.rhs.value:F.stages.push({type:"index",value:O.rhs.value,position:O.position}),F.tuple=!0;break;case"~>":P={type:"apply",value:O.value,position:O.position},P.lhs=It(O.lhs),P.rhs=It(O.rhs);break;default:P={type:O.type,value:O.value,position:O.position},P.lhs=It(O.lhs),P.rhs=It(O.rhs),lt(P,P.lhs),lt(P,P.rhs)}break;case"unary":P={type:O.type,value:O.value,position:O.position},O.value==="["?P.expressions=O.expressions.map(function(at){var xt=It(at);return lt(P,xt),xt}):O.value==="{"?P.lhs=O.lhs.map(function(at){var xt=It(at[0]);lt(P,xt);var zt=It(at[1]);return lt(P,zt),[xt,zt]}):(P.expression=It(O.expression),O.value==="-"&&P.expression.type==="number"?(P=P.expression,P.value=-P.value):lt(P,P.expression));break;case"function":case"partial":P={type:O.type,name:O.name,value:O.value,position:O.position},P.arguments=O.arguments.map(function(at){var xt=It(at);return lt(P,xt),xt}),P.procedure=It(O.procedure);break;case"lambda":P={type:O.type,arguments:O.arguments,signature:O.signature,position:O.position};var ot=It(O.body);P.body=Mt(ot);break;case"condition":P={type:O.type,position:O.position},P.condition=It(O.condition),lt(P,P.condition),P.then=It(O.then),lt(P,P.then),typeof O.else<"u"&&(P.else=It(O.else),lt(P,P.else));break;case"transform":P={type:O.type,position:O.position},P.pattern=It(O.pattern),P.update=It(O.update),typeof O.delete<"u"&&(P.delete=It(O.delete));break;case"block":P={type:O.type,position:O.position},P.expressions=O.expressions.map(function(at){var xt=It(at);return lt(P,xt),(xt.consarray||xt.type==="path"&&xt.steps[0].consarray)&&(P.consarray=!0),xt});break;case"name":P={type:"path",steps:[O]},O.keepArray&&(P.keepSingletonArray=!0);break;case"parent":P={type:"parent",slot:{label:"!"+Nt++,level:1,index:se++}},Qt.push(P);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":P=O;break;case"operator":if(O.value==="and"||O.value==="or"||O.value==="in")O.type="name",P=It(O);else if(O.value==="?")P=O;else throw{code:"S0201",stack:new Error().stack,position:O.position,token:O.value};break;case"error":P=O,O.lhs&&(P=It(O.lhs));break;default:var et="S0206";O.id==="(end)"&&(et="S0207");var W={code:et,position:O.position,token:O.value};if(N)return rt.push(W),{type:"error",error:W};throw W.stack=new Error().stack,W}return O.keepArray&&(P.keepArray=!0),P};R=k(y),U();var oe=q(0);if(I.id!=="(end)"){var de={code:"S0201",position:I.position,token:I.value};ft(de)}if(oe=It(oe),oe.type==="parent"||typeof oe.seekingParent<"u")throw{code:"S0217",token:oe.type,position:oe.position};return rt.length>0&&(oe.errors=rt),oe};return B})();o.exports=u},{"./signature":5}],5:[function(s,o,h){var c=s("./utils");let u=(()=>{"use strict";var f={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function T(k){for(var B=1,y=[],N={},I=N;B<k.length;){var R=k.charAt(B);if(R===":")break;var tt=function(){y.push(N),I=N,N={}},rt=function(st,vt,Ut,qt){for(var Mt=1,Nt=vt;Nt<st.length;)if(Nt++,R=st.charAt(Nt),R===qt){if(Mt--,Mt===0)break}else R===Ut&&Mt++;return Nt};switch(R){case"s":case"n":case"b":case"l":case"o":N.regex="["+R+"m]",N.type=R,tt();break;case"a":N.regex="[asnblfom]",N.type=R,N.array=!0,tt();break;case"f":N.regex="f",N.type=R,tt();break;case"j":N.regex="[asnblom]",N.type=R,tt();break;case"x":N.regex="[asnblfom]",N.type=R,tt();break;case"-":I.context=!0,I.contextRegex=new RegExp(I.regex),I.regex+="?";break;case"?":case"+":I.regex+=R;break;case"(":var ht=rt(k,B,"(",")"),z=k.substring(B+1,ht);if(z.indexOf("<")===-1)N.regex="["+z+"m]";else throw{code:"S0402",stack:new Error().stack,value:z,offset:B};N.type="("+z+")",B=ht,tt();break;case"<":if(I.type==="a"||I.type==="f"){var Q=rt(k,B,"<",">");I.subtype=k.substring(B+1,Q),B=Q}else throw{code:"S0401",stack:new Error().stack,value:I.type,offset:B};break}B++}var ft="^"+y.map(function(st){return"("+st.regex+")"}).join("")+"$",U=new RegExp(ft),q=function(st){var vt;if(c.isFunction(st))vt="f";else{var Ut=typeof st;switch(Ut){case"string":vt="s";break;case"number":vt="n";break;case"boolean":vt="b";break;case"object":st===null?vt="l":Array.isArray(st)?vt="a":vt="o";break;case"undefined":default:vt="m"}}return vt},kt=function(st,vt){for(var Ut="^",qt=0,Mt=0;Mt<y.length;Mt++){Ut+=y[Mt].regex;var Nt=vt.match(Ut);if(Nt===null)throw{code:"T0410",stack:new Error().stack,value:st[qt],index:qt+1};qt=Nt[0].length}throw{code:"T0410",stack:new Error().stack,value:st[qt],index:qt+1}};return{definition:k,validate:function(st,vt){var Ut="";st.forEach(function(se){Ut+=q(se)});var qt=U.exec(Ut);if(qt){var Mt=[],Nt=0;return y.forEach(function(se,Qt){var yt=st[Nt],lt=qt[Qt+1];if(lt==="")if(se.context&&se.contextRegex){var ce=q(vt);if(se.contextRegex.test(ce))Mt.push(vt);else throw{code:"T0411",stack:new Error().stack,value:vt,index:Nt+1}}else Mt.push(yt),Nt++;else lt.split("").forEach(function(It){if(se.type==="a"){if(It==="m")yt=void 0;else{yt=st[Nt];var oe=!0;if(typeof se.subtype<"u"){if(It!=="a"&&lt!==se.subtype)oe=!1;else if(It==="a"&&yt.length>0){var de=q(yt[0]);if(de!==se.subtype.charAt(0))oe=!1;else{var O=yt.filter(function(P){return q(P)!==de});oe=O.length===0}}}if(!oe)throw{code:"T0412",stack:new Error().stack,value:yt,index:Nt+1,type:f[se.subtype]};It!=="a"&&(yt=[yt])}Mt.push(yt),Nt++}else Mt.push(yt),Nt++})}),Mt}kt(st,Ut)}}}return T})();o.exports=u},{"./utils":6}],6:[function(s,o,h){let c=(()=>{"use strict";function u(Q){var ft=!1;if(typeof Q=="number"&&(ft=!isNaN(Q),ft&&!isFinite(Q)))throw{code:"D1001",value:Q,stack:new Error().stack};return ft}function f(Q){var ft=!1;return Array.isArray(Q)&&(ft=Q.filter(function(U){return typeof U!="string"}).length===0),ft}function T(Q){var ft=!1;return Array.isArray(Q)&&(ft=Q.filter(function(U){return!u(U)}).length===0),ft}function k(){var Q=[];return Q.sequence=!0,arguments.length===1&&Q.push(arguments[0]),Q}function B(Q){return Q.sequence===!0&&Array.isArray(Q)}function y(Q){return Q&&(Q._jsonata_function===!0||Q._jsonata_lambda===!0)||typeof Q=="function"}function N(Q){var ft=typeof Q.arity=="number"?Q.arity:typeof Q.implementation=="function"?Q.implementation.length:typeof Q.length=="number"?Q.length:Q.arguments.length;return ft}function I(Q){return Q&&Q._jsonata_lambda===!0}var R=typeof Symbol=="function"?Symbol:{},tt=R.iterator||"@@iterator";function rt(Q){return typeof Q=="object"&&Q!==null&&tt in Q&&"next"in Q&&typeof Q.next=="function"}function ht(Q,ft){if(Q===ft)return!0;if(typeof Q=="object"&&typeof ft=="object"&&Q!==null&&ft!==null){if(Array.isArray(Q)&&Array.isArray(ft)){if(Q.length!==ft.length)return!1;for(var U=0;U<Q.length;U++)if(!ht(Q[U],ft[U]))return!1;return!0}var q=Object.getOwnPropertyNames(Q),kt=Object.getOwnPropertyNames(ft);if(q.length!==kt.length)return!1;for(q=q.sort(),kt=kt.sort(),U=0;U<q.length;U++)if(q[U]!==kt[U])return!1;for(U=0;U<q.length;U++){var st=q[U];if(!ht(Q[st],ft[st]))return!1}return!0}return!1}function z(Q){var ft=[];for(let U of Q)ft.push(U);return ft}return{isNumeric:u,isArrayOfStrings:f,isArrayOfNumbers:T,createSequence:k,isSequence:B,isFunction:y,isLambda:I,isIterable:rt,getFunctionArity:N,isDeepEqual:ht,stringToArray:z}})();o.exports=c},{}]},{},[3])(3)})});var Xa=H(bn=>{"use strict";var Yb=bn&&bn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(bn,"__esModule",{value:!0});bn.locEnd=bn.locStart=bn.parse=void 0;var Qb=Yb(df()),jb=n=>{try{let t=[],e=n.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let o of e){let h=o.index;if(h===void 0)continue;let c=o[1];!c||t.push({position:h,value:c.trim()})}let s=(0,Qb.default)(n).ast();return Object.assign(Object.assign({},s),{jsonataComments:t})}catch(t){let e=t,o=["code","position","token"].filter(c=>e[c]!==void 0).map(c=>`${c}: ${e[c]}`),h=[e.message,...o].join(", ");throw new Error(h)}};bn.parse=jb;var Kb=n=>n.position;bn.locStart=Kb;var zb=()=>0;bn.locEnd=zb});var gf=H(Sn=>{"use strict";var $b=Sn&&Sn.__createBinding||(Object.create?function(n,t,e,s){s===void 0&&(s=e),Object.defineProperty(n,s,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,s){s===void 0&&(s=e),n[s]=t[e]}),Jb=Sn&&Sn.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Xb=Sn&&Sn.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&$b(t,n,e);return Jb(t,n),t};Object.defineProperty(Sn,"__esModule",{value:!0});Sn.print=void 0;var Zb=Xb(require("prettier")),pf=[],Fo=-1,tA=(n,t,e)=>{var s,o;let h=n.getValue();"jsonataComments"in h&&(Fo=-1,pf=h.jsonataComments);let c=(o=h.type==="path"?(s=h.steps[0])===null||s===void 0?void 0:s.position:h.position)!==null&&o!==void 0?o:Fo,u=pf.filter(k=>k.position>Fo&&k.position<c);Fo=c;let f=u.map(iA),T=eA(h,n,t,e);return f.length>0?Ie([f,T]):T};Sn.print=tA;var eA=(n,...t)=>{if(n.type==="binary")return nA(n,...t);if(n.type==="function")return _f(n,...t);if(n.type==="partial")return _f(n,...t);if(n.type==="variable")return hA(n,...t);if(n.type==="wildcard")return uA(n,...t);if(n.type==="descendant")return cA(n,...t);if(n.type==="operator")return lA(n,...t);if(n.type==="number")return rA(n,...t);if(n.type==="string")return oA(n,...t);if(n.type==="name")return sA(n,...t);if(n.type==="filter")return fA(n,...t);if(n.type==="bind")return dA(n,...t);if(n.type==="lambda")return pA(n,...t);if(n.type==="condition")return _A(n,...t);if(n.type==="value")return mA(n,...t);if(n.type==="block")return gA(n,...t);if(n.type==="path")return aA(n,...t);if(n.type==="apply")return kA(n,...t);if(n.type==="sort")return xA(n,...t);if(n.type==="unary")return vA(n,...t);if(n.type==="parent")return AA(n,...t);if(n.type==="regex")return SA(n,...t);throw new Error(`Unknown node type: ${n.type}`)},{group:Ie,indent:Oi,join:js,line:An,hardline:ys,breakParent:Za,softline:In}=Zb.doc.builders,iA=n=>Ie(["/* ",n.value," */",ys]),nA=(n,t,e,s)=>n.value===".."?Ie([s("lhs"),Oi([In,n.value,s("rhs")])]):Ie([s("lhs"),Oi([An,n.value," ",s("rhs")])]),sA=(n,t,e,s)=>Ie([OA(n.value),Gi(n,t,e,s),Xi(n),Zi(n),Bo(n,t,e,s),Hi(n,t,e,s),Vi(n)]),rA=(n,t,e,s)=>Ie([JSON.stringify(n.value),Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),oA=(n,t,e,s)=>Ie([JSON.stringify(n.value),Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),aA=(n,t,e,s)=>{let o=n.steps.flatMap((h,c)=>c===0?s(["steps",c]):h.type==="sort"?Oi(["^",s(["steps",c])]):Oi([In,".",s(["steps",c])]));return Ie([...o,Gi(n,t,e,s)])},_f=(n,t,e,s)=>Ie([s("procedure"),"(",mf(n,t,e,s),")",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),mf=(n,t,e,s)=>{var o;if(!(!((o=n.arguments)===null||o===void 0)&&o.length))return"";if(n.arguments.length===1)return s(["arguments",0]);let h=js([",",An],t.map(s,"arguments"));return[Oi([In,h]),In]},hA=(n,t,e,s)=>Ie(["$",n.value,Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n),Bo(n,t,e,s)]),lA=n=>n.value,uA=n=>n.value,cA=n=>n.value,fA=(n,t,e,s)=>Ie(["[",Oi([In,s("expr")]),In,"]"]),dA=(n,t,e,s)=>Ie([s("lhs")," ",n.value," ",s("rhs")]),pA=(n,t,e,s)=>n.thunk?s("body"):Ie(["function(",mf(n,t,e,s),") {",Oi([An,s("body")]),An,"}",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),_A=(n,t,e,s)=>{let o=t.getParentNode(),c=o?.type==="condition"?[ys,Za]:An;return Ie([s("condition"),Oi([c,"? ",s("then")]),n.else?Oi([c,": ",s("else")]):""])},mA=(n,t,e,s)=>Ie([TA(n,t,e,s),Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),TA=n=>n.value===null?"null":n.value===!1?"false":n.value===!0?"true":JSON.stringify(n.value),gA=(n,t,e,s)=>{if(n.expressions.length===0)return Ie(["()",Hi(n,t,e,s),Vi(n)]);if(n.expressions.length===1)return Ie(["(",s(["expressions",0]),")",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n),Bo(n,t,e,s)]);let o=js([";",ys],t.map(s,"expressions"));return Ie(["(",Oi([ys,o]),ys,")",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)])},kA=(n,t,e,s)=>Ie([s("lhs"),Oi([An,n.value," ",s("rhs")])]),xA=(n,t,e,s)=>{let o=n.terms.map((c,u)=>[EA(c),s(["terms",u,"expression"])]),h=js([",",An],o);return Ie(["(",Oi([In,h]),In,")"])},EA=n=>n.descending?">":"<",vA=(n,t,e,s)=>{if(n.value==="{")return yA(n,t,e,s);if(n.value==="[")return NA(n,t,e,s);if(n.value==="-")return bA(n,t,e,s);throw new Error("Unhandled unary node "+n.value)},yA=(n,t,e,s)=>Ie(["{",CA(n,t,e,s),"}",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)]),CA=(n,t,e,s)=>{if(n.lhs.length===0)return"";let o=n.lhs.map((f,T)=>Ie([s(["lhs",T,0]),": ",s(["lhs",T,1])])),c=n.lhs.some(f=>Tf(f[1]))?[ys,Za]:An,u=js([",",c],o);return[Oi([c,u]),c]},Tf=n=>{if(n.type!=="unary")return!1;if(n.value==="["||n.value==="{")return!0},NA=(n,t,e,s)=>{let o=js([",",An],t.map(s,"expressions"));return Ie(["[",Oi([In,o]),In,"]",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)])},bA=(n,t,e,s)=>Ie(["-",s("expression")]),AA=(n,t,e,s)=>Ie(["%",Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n),Bo(n,t,e,s)]),IA=["i","m"],SA=(n,t,e,s)=>{let o=IA.filter(h=>n.value.flags.includes(h)).join("");return Ie([`/${n.value.source}/${o}`,Gi(n,t,e,s),Xi(n),Zi(n),Hi(n,t,e,s),Vi(n)])},Xi=n=>n.focus?"@$"+n.focus:"",Zi=n=>n.index?"#$"+n.index:"",Hi=(n,t,e,s)=>n.predicate?t.map(s,"predicate"):"",Bo=(n,t,e,s)=>n.stages?t.map(s,"stages"):"",Vi=n=>n.keepArray?"[]":"",Gi=(n,t,e,s)=>{if(n.group===void 0)return"";if(n.group.lhs.length===0)return"{}";let o=n.group.lhs.map((f,T)=>Ie([s(["group","lhs",T,0]),": ",s(["group","lhs",T,1])])),c=n.group.lhs.some(f=>Tf(f[1]))?[ys,Za]:An,u=js([",",c],o);return Ie(["{",Oi([c,u]),c,"}"])},OA=n=>n.startsWith("`")&&n.endsWith("`")?n:n.startsWith('"')&&n.endsWith('"')?`\`${n.slice(1,-1)}\``:/\s/.test(n)?`\`${n}\``:["null","false","true"].includes(n)?`\`${n}\``:/^\d+/.test(n)?`\`${n}\``:/[^a-zA-Z_[\]\d]/.test(n)?`\`${n}\``:n});var kf=H(yi=>{"use strict";Object.defineProperty(yi,"__esModule",{value:!0});yi.printers=yi.parsers=yi.languages=yi.AST_FORMAT_NAME=yi.AST_PARSER_NAME=void 0;var th=Xa(),LA=gf();yi.AST_PARSER_NAME="JSONata";yi.AST_FORMAT_NAME="JSONataASTNode";yi.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[yi.AST_PARSER_NAME]}];yi.parsers={[yi.AST_PARSER_NAME]:{astFormat:yi.AST_FORMAT_NAME,parse:th.parse,locStart:th.locStart,locEnd:th.locEnd}};yi.printers={[yi.AST_FORMAT_NAME]:{print:LA.print}}});var yf=H(ln=>{"use strict";var PA=ln&&ln.__createBinding||(Object.create?function(n,t,e,s){s===void 0&&(s=e),Object.defineProperty(n,s,{enumerable:!0,get:function(){return t[e]}})}:function(n,t,e,s){s===void 0&&(s=e),n[s]=t[e]}),DA=ln&&ln.__setModuleDefault||(Object.create?function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}:function(n,t){n.default=t}),Ef=ln&&ln.__importStar||function(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var e in n)e!=="default"&&Object.prototype.hasOwnProperty.call(n,e)&&PA(t,n,e);return DA(t,n),t};Object.defineProperty(ln,"__esModule",{value:!0});ln.serializeJsonata=ln.formatJsonata=void 0;var Ks=Ef(kf()),Uo=Ef(require("prettier")),xf=Xa();function RA(n,t){return vf(),Uo.format(n,Object.assign({parser:Ks.AST_PARSER_NAME,plugins:[Ks],printWidth:150,tabWidth:2,useTabs:!1},t))}ln.formatJsonata=RA;function wA(n,t){let e=FA(n);return vf(),Uo.format("ignore text input",Object.assign({parser:Ks.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}ln.serializeJsonata=wA;var FA=n=>Object.assign(Object.assign({},Ks),{parsers:{[Ks.AST_PARSER_NAME]:{astFormat:Ks.AST_FORMAT_NAME,parse:()=>n,locStart:xf.locStart,locEnd:xf.locEnd}}});function vf(){"clearConfigCache"in Uo&&Uo.clearConfigCache()}});function Nf(n){if(Cf!=null)return Cf;let t=MA(n);if(t==null||Tr.existsSync(t)==!1)return eh;let e=Tr.readFileSync(t,{encoding:"utf8"});try{let s=JSON.parse(e);return UA(s)}catch(s){console.log(s)}return eh}function UA(n){let t=_r,e=0,s=1,o=4,h=!0,c=!0,u=!0,f=[],T=[],k=null;return typeof n.ignoreDirectives!="undefined"&&n.ignoreDirectives!==null&&(t=n.ignoreDirectives),typeof n.spacesAfterDirective!="undefined"&&n.spacesAfterDirective!==null&&(e=n.spacesAfterDirective),typeof n.spacesAfterControlDirective!="undefined"&&n.spacesAfterControlDirective!==null&&(s=n.spacesAfterControlDirective),typeof n.tabSize!="undefined"&&n.tabSize!==null&&(o=n.tabSize),typeof n.formatDirectivePhpParameters!="undefined"&&n.formatDirectivePhpParameters!==null&&(h=n.formatDirectivePhpParameters),typeof n.formatDirectiveJsonParameters!="undefined"&&n.formatDirectiveJsonParameters!==null&&(c=n.formatDirectiveJsonParameters),typeof n.customIfs!="undefined"&&n.customIfs!==null&&(f=n.customIfs),typeof n.directives!="undefined"&&n.directives!==null&&(T=n.directives),typeof n.formatInsideEcho!="undefined"&&n.formatInsideEcho!==null&&(u=n.formatInsideEcho),typeof n.phpOptions!="undefined"&&(k=n.phpOptions),e<0&&(e=0),s<0&&(s=1),e>3&&(e=3),s>3&&(s=3),{ignoreDirectives:t,spacesAfterDirective:e,spacesAfterControlDirective:s,tabSize:o,formatDirectivePhpParameters:h,formatDirectiveJsonParameters:c,formatInsideEcho:u,customIfs:f,directives:T,phpOptions:k}}function MA(n){let t=Cs.dirname(n);t=="."&&(t=process.cwd());let e=t.split(Cs.sep);for(;e.length>0;){let s=e.join(Cs.sep),o=Cs.join(s,BA);if(Tr.existsSync(o))return o;e.pop()}return null}var Tr,Cs,BA,eh,Cf,ih=Bt(()=>{"use strict";Tr=es(require("fs")),Cs=es(require("path"));Qa();Ya();BA=".blade.format.json",eh={ignoreDirectives:[..._r,...Ao],spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,customIfs:[],directives:[]}});function Af(){return oh}function Ho(){return Mo}function nh(n){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete n[t]}),n}function If(){return rh}function Sf(n){return(0,bf.formatJsonata)(n,{printWidth:20})}function Vo(n){rh=nh(Object.assign({},n,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:n.plugins})),Mo=nh(Object.assign({},n,{parser:"php",plugins:[sh.default]})),oh=nh(Object.assign({},n,{parser:"php",plugins:[sh.default],printWidth:1/0}))}function Of(n){return gr.default.format(n,rh)}function ah(n,t,e=null){let s=n;if(e!=null&&(s=e),typeof t.phpOptions!="undefined"&&t.phpOptions!=null){let o=t.phpOptions;s={...s,...o}}else s={...s,phpVersion:"8.0"};return s}function Lf(n,t,e=null){let s=ah(oh,t,e),o=gr.default.format(n,s).trim();return o=o.substring(5),n.endsWith(";")==!1&&o.endsWith(";")&&(o=o.substring(0,o.length-1)),o.trim()}function Pf(n,t,e=null){let s=ah(Mo,t,e),o=gr.default.format(n,s).trim();return o=o.substring(5),n.endsWith(";")==!1&&o.endsWith(";")&&(o=o.substring(0,o.length-1)),o.trim()}function Df(n,t,e=null){let s=ah(Mo,t,e);return gr.default.format(n,s).trim().trim()}var gr,CL,sh,bf,Mo,rh,oh,kr=Bt(()=>{"use strict";gr=es(require("prettier")),CL=es(Rf()),sh=es(cf()),bf=es(yf());ih()});var pi,Go=Bt(()=>{"use strict";di();pi=class{static indentRelative(t,e){let s=K.breakByNewLine(t),o=[];for(let u=0;u<s.length;u++)if(s[u].trim().length>0){o=s.slice(u);break}for(let u=o.length-1;u>=0&&o[u].trim().length==0;u--)o.pop();let h=-1,c="";for(let u=0;u<o.length;u++){let f=o[u],T=f.trimLeft(),k=f.length-T.length;(u==0||k<h)&&(h=k,c=f)}if(h>=0){let u=" ".repeat(e);for(let f=0;f<o.length;f++){let T=o[f];if(T.trim().length==0){o[f]="";continue}let k=T.substring(h);if(f==0){o[f]=T.trimLeft();continue}else o[f]=u+k}}return o.join(`
`)}static shiftIndent(t,e,s=!1){let o=K.breakByNewLine(t.trim()),h=[];if(o.length>1){let c=!0;for(let u=1;u<o.length;u++){let f=o[u],T=f.length-f.trim().length;if(e-T!=0){c=!1;break}}if(c)return t.trim()}for(let c=0;c<o.length;c++){if(c==0&&s){h.push(o[c]);continue}let u=o[c];u.trim().length==0?h.push(""):h.push(" ".repeat(e)+u)}return h.join(`
`)}static shiftClean(t,e){let s=K.breakByNewLine(t),o=[],h=" ".repeat(e),c=!1;return s.forEach(u=>{u.trim().length>0&&(c=!0),c&&(u.trim().length==0?o.push(""):o.push(h+u))}),o.join(`
`)}static inferIndentLevel(t,e,s){let o=0,h=-1;for(let c=0;c<t.length;c++){let u=t[c];if(u.includes(e)){let f=u.trimLeft();o=u.length-f.length,h=c;break}}if(h>0)for(let c=h-1;c>=0;c--){let u=t[c],f=u.trim(),T=u.trimLeft(),k=u.length-f.length;if(T.length!=0&&k!=o&&k<o){let B=o-k;return{targetLevel:o,referenceLevel:k,sourceTabSize:B}}}return{targetLevel:o,referenceLevel:o,sourceTabSize:s}}static indent(t,e,s){let o=pi.inferIndentLevel(t,e,s);return" ".repeat(o.targetLevel)}}});function HA(n){let t="",e=K.breakByNewLine(n);for(let s=0;s<e.length;s++)t+=e[s].trim();return t}var zs,xr,wf=Bt(()=>{"use strict";Po();kr();Do();za();di();$a();Go();zs=class{static getReasonableDirectivePhpOptions(t,e){return zs.defaultControlDirectiveNames.includes(t.name)?{...e,trailingCommaPHP:!1}:e}static printDirective(t,e,s,o,h){var f,T,k,B;let c=t.directiveName.trim(),u="@"+c;if(t.hasDirectiveParameters){let y=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&o&&t.hasValidJson()){let I=t.getPhpContent().trim();I.startsWith("(")&&I.endsWith(")")&&(I=I.substring(1),I=I.substring(0,I.length-1));let R=o(I);y="("+R+")"}}else if(e.formatDirectivePhpParameters&&s!=null&&t.hasValidPhp()){let I=t.getPhpContent().trim();I.startsWith("(")&&I.endsWith(")")&&(I=I.substring(1),I=I.substring(0,I.length-1));let R=I,tt=!1;if(I.startsWith("[")&&I.endsWith("]")&&((f=t.startPosition)==null?void 0:f.line)!=((T=t.endPosition)==null?void 0:T.line)){R=s("<?php "+I,e,zs.getReasonableDirectivePhpOptions(t,Ho()));let rt=new Qs,ht=rt.parse(K.replaceAllInString(R,`
`," ")),z=0;return rt.getIsAssoc()||R.includes("match")||R.includes("=>")?(R.includes(`
`)&&!tt&&(R=pi.shiftIndent(R,h,!0)),Ke.couldReflow(R)&&(R=Ke.instance.reflow(R)),ze.couldReflow(R)&&(R=ze.instance.reflow(R)),R="@"+c+" ".repeat(e.spacesAfterDirective)+"("+R+")"):ht!=null&&(R=Gn.print(ht,e.tabSize,1),z>0&&(R=K.removeEmptyNewLines(pi.shiftIndent(R,z,!0))),R.includes(`
`)&&!tt&&(R=pi.shiftIndent(R,h,!0)),R="@"+c+" ".repeat(e.spacesAfterDirective)+"("+R+")"),R}else try{let rt=Ho();((k=t.startPosition)==null?void 0:k.line)==((B=t.endPosition)==null?void 0:B.line)&&(rt={...Ho(),printWidth:1/0},tt=!0),R=s("<?php "+I,e,zs.getReasonableDirectivePhpOptions(t,rt))}catch{}t.directiveName.toLowerCase()=="forelse"&&(R=R.substring(9),R=R.substring(0,R.length-14)),Ke.couldReflow(R)&&(R=Ke.instance.reflow(R)),ze.couldReflow(R)&&(R=ze.instance.reflow(R)),R.includes(`
`)&&!tt?y="("+pi.shiftIndent(R,h,!0)+")":(tt&&(R=HA(R)),y="("+R+")")}let N=e.spacesAfterDirective;zs.defaultControlDirectiveNames.includes(c)&&(N=e.spacesAfterControlDirective),u+=" ".repeat(N)+y}return u}},xr=zs;xr.defaultControlDirectiveNames=["if","elseif","unless","while","for","foreach","forelse"]});var os,Ff=Bt(()=>{"use strict";Po();kr();Do();Ve();di();Go();os=class{static printEcho(t,e,s,o){var T,k;let h="{{ ",c=" }}";t instanceof ns?(h="{!! ",c=" !!}"):t instanceof ss&&(h="{{{ ",c=" }}}");let u=h,f=t.content.trim();if(e.formatInsideEcho&&s!=null&&t.hasValidPhp()){let B=Af(),y=f;if(((T=t.startPosition)==null?void 0:T.line)!=((k=t.endPosition)==null?void 0:k.line))return B={...B,printWidth:45},y=s("<?php "+f,e,B),Ke.couldReflow(y)&&(y=Ke.instance.reflow(y)),ze.couldReflow(y)&&(y=ze.instance.reflow(y)),h.trim()+`
`+pi.shiftIndent(y,o+e.tabSize,!1)+`
`+" ".repeat(o)+c.trim();y=s("<?php "+f+";",e,{...B,printWidth:1/0}),y=y.trimRight().substring(0,y.trimRight().length-1),Ke.couldReflow(y)&&(y=Ke.instance.reflow(y)),ze.couldReflow(y)&&(y=ze.instance.reflow(y)),y.includes(`
`)&&(y=K.collapse(y)),f=y}return u+=f+c,u}}});var qo,Bf=Bt(()=>{"use strict";Po();Do();Ve();za();di();Vn();$a();lf();wf();Ff();Go();qo=class{constructor(t){this.formatIgnoreStart="format-ignore-start";this.formatIgnoreEnd="format-ignore-end";this.isInsideIgnoreFormatter=!1;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.echoParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,phpOptions:null};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}setParentTransformer(t){return this.parentTransformer=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(s=>{s instanceof ne?e+=s.getOutputContent():s instanceof Ui?e+=s.sourceContent:s instanceof Tt&&s.directiveName=="verbatim"&&(e+=s.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t,e){return xr.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter,e)}makeSlug(t){t<=2&&(t=7);let e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=s.length;for(let c=0;c<t-1;c++)e+=s.charAt(Math.floor(Math.random()*o));let h="B"+e+"B";return this.slugs.includes(h)?this.makeSlug(t+1):(this.slugs.push(h),h)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerEchoParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerEchoParameter(t,e):this.echoParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let s=this.open(e),o=this.close(e);return`
`+s+o+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((s,o)=>{let h=this.open(o),c=this.indentLevel(h),u=s.sourceContent;this.phpTagFormatter!=null&&s.hasValidPhp()&&(u=this.phpTagFormatter(u,this.transformOptions,null),Ke.couldReflow(u)&&(u=Ke.instance.reflow(u)),ze.couldReflow(u)&&(u=ze.instance.reflow(u)),u=pi.shiftIndent(u,c,!0)),e=e.replace(h,u)}),this.dynamicElementPhpNodes.forEach((s,o)=>{e=K.replaceAllInString(e,o,this.printInlinePhp(s))}),this.inlinePhpNodes.forEach((s,o)=>{e=e.replace(o,this.printInlinePhp(s))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e,this.transformOptions,null),Ke.couldReflow(e)&&(e=Ke.instance.reflow(e)),ze.couldReflow(e)&&(e=ze.instance.reflow(e)),e=K.replaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let s=!0,o=!0,h=0,c=0,u=0,f=!0;for(let T=0;T<e.length;T++){let k=e[T];k instanceof li&&k.isInlineEcho?(s=!1,h+=1,c+=1):k instanceof ne?(u+=1,k.content.trim().length>0&&(o=!1)):c+=1}return h==0&&(f=!0),c>0&&s==!0?!1:(o==!1&&c==0&&(f=!0),o==!0&&c==0&&(f=!0),f)}preparePairedDirective(t){var c,u,f;let e=this.makeSlug(t.sourceContent.length),s=t.directiveName.toLowerCase(),o=(c=t.childrenDocument)==null?void 0:c.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){let T="",k=`${this.open(e)}
`;if(s=="php"||s=="verbatim")T=this.makeSlug(15),k+=this.pair(T);else{let B=this.isAllInlineNodes((u=t.children)!=null?u:[]),y=this.containsBladeStructures((f=t.children)!=null?f:[]);this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1&&!B&&!y||!t.containsAnyFragments&&B&&y?(T=this.makeSlug(15),k+=this.pair(T,o)):k+=o}return k+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(T)),this.virtualStructureClose.push(this.close(T)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:o,slug:e,directive:t,virtualElementSlug:T,isInline:!1}),k}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let h=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:o,slug:h,directive:t,virtualElementSlug:"",isInline:!0}),h+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var s,o,h,c,u,f,T,k,B;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let ht=this.makeSlug((o=(s=t.constructedFrom)==null?void 0:s.sourceContent.length)!=null?o:0),z=this.makeSlug((c=(h=t.elseNode)==null?void 0:h.sourceContent.length)!=null?c:0),Q=(u=t.truthDocument)==null?void 0:u.document.transform().setParentTransformer(this).toStructure(),ft=(f=t.falseDocument)==null?void 0:f.document.transform().setParentTransformer(this).toStructure(),U={truthDoc:Q,falseDoc:ft,forElse:t,truthClose:this.close(ht),emptyOpen:this.open(z),pairClose:this.close(z),truthSlug:ht,falseSlug:z},q=this.open(ht);return q+=Q,q+=U.truthClose,q+=`
`+U.emptyOpen+`
`,q+=ft+"",q+=U.pairClose,this.registerForElseWithEmpty(U),q}let y=t.constructedFrom,N=(T=t.truthDocument)==null?void 0:T.document.transform().setParentTransformer(this).toStructure(),I=this.makeSlug(y.sourceContent.length),R=this.makeSlug((B=(k=y.isClosedBy)==null?void 0:k.sourceContent.length)!=null?B:0),tt={truthDoc:N,falseDoc:"",forElse:t,truthSlug:I,falseSlug:"",pairClose:this.close(R),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push(tt);let rt=this.open(I);return rt+=N,rt+=this.close(I),rt}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,s){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,s):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:s}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let s=this.makeSlug(10),o=this.makeSlug(10),h={node:t,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(o)};return this.registerVirtualComment(h),h.pairOpen+`
`+h.virtualElement+`
`+h.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var s,o;if(t.isClosingTag)return((s=t.name)==null?void 0:s.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((o=t.name)==null?void 0:o.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let h=t.name.inlineName;h.startsWith(":")&&(h=h.substring(1)),e+='slot name="'+h+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(h=>{var c,u;if(h.type==0)if(h.isExpression){let f=this.makeSlug(h.content.length);this.registerExpressionParameter(f,h),e+=f+" "}else e+=h.content+" ";else if(h.type==2)e+=h.name+" ";else if(h.type==1){let f=this.makeSlug((u=(c=h.directive)==null?void 0:c.sourceContent.length)!=null?u:0);this.registerDirectiveParameter(f,h),e+=f+" "}else if(h.type==3&&h.inlineEcho!=null){let f=this.makeSlug(h.inlineEcho.content.length);this.registerEchoParameter(f,h),e+=f+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let s=[],o="";t.cases.forEach((y,N)=>{var z,Q;let I=y.head,R=(z=y.childDocument)==null?void 0:z.document.transform().setParentTransformer(this).toStructure(),tt=this.makeSlug(I.sourceContent.length),rt=this.makeSlug(5),ht={case:y,slug:tt,doc:R,virtualOpen:this.selfClosing(rt),virtualClose:this.close(rt),pairOpen:this.open(tt),pairClose:this.close(tt),isFirst:N==0,isLast:N==t.cases.length-1,leadingClose:"",leadingOpen:""};if(y.leadingDocument!=null){let ft=this.makeSlug(25);ht.leadingOpen=this.open(ft),ht.leadingClose=this.close(ft),o+=`
`+y.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}o+=ht.pairOpen,((Q=y.head)==null?void 0:Q.directiveName)=="default"&&(o+=ht.virtualOpen),o+=R,o+=ht.pairClose,s.push(ht)});let h=s[0].pairOpen,c=s[s.length-1].pairClose,u=this.makeSlug(10),f=this.open(u),T=this.close(u),k={switchNode:t,pairOpen:h,pairClose:c,structures:s,virtualSwitchClose:T,virtualSwitchOpen:f},B=`
`+f+`
`+o+`
`+T;return this.registerSwitchStatement(k),B}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}containsComponents(t){for(let e=0;e<t.length;e++)if(t[e]instanceof an)return!0;return!1}containsBladeStructures(t){for(let e=0;e<t.length;e++){let s=t[e];if(!(s instanceof ne)){if(s instanceof Tt&&(s.isClosingDirective||s.isClosingDirective||s.name=="elseif"||s.name=="else"))continue;return!0}}return!1}isAllInlineNodes(t){let e=0;for(let s=0;s<t.length;s++){let o=t[s];if(!(o instanceof ne))if(o instanceof li){if(!o.isInlineEcho)return!1;e+=1}else if(o instanceof Tt){if(o.isClosingDirective||o.name=="elseif"||o.name=="else")continue;return!1}else return!1}return e!=0}prepareConditions(t){if(t.fragmentPosition==3){if(t.chain.length==1&&t.constructedFrom!=null){let f=t.constructedFrom.clone();return f.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(f)}let s=[],o="";t.logicBranches.forEach((f,T)=>{var R,tt,rt,ht,z,Q,ft,U,q,kt,st,vt,Ut;let k=f.head,B=(R=f.childDocument)==null?void 0:R.document.transform().setParentTransformer(this).toStructure(),y=this.makeSlug(k.sourceContent.length),N=this.makeSlug(10),I={branch:f,slug:y,doc:B,pairOpen:this.open(y),pairClose:this.close(y),virtualOpen:this.open(N),virtualClose:this.close(N),isFirst:T==0,isLast:T==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if(((tt=f.head)==null?void 0:tt.directiveName)=="else"){o+=`
`+I.pairOpen;let qt=this.makeSlug(25),Mt=this.containsBladeStructures((rt=f.head.children)!=null?rt:[]);f.head.containsChildStructures==!1&&f.head.containsAnyFragments==!1&&(((ht=f.head)==null?void 0:ht.children.length)<=2||((z=f.head)==null?void 0:z.children.length)>4)&&!this.isAllInlineNodes(f.head.children)&&!Mt?(I.virtualBreakOpen=this.open(qt),I.virtualBreakClose=this.close(qt),o+=`
`+I.virtualBreakOpen+`
`,o+=B,o+=`
`+I.virtualBreakClose+`
`+I.pairClose):(I.virtualBreakOpen=this.selfClosing(qt),o+=I.virtualBreakOpen+`
`,o+=B,o+=`
`+I.pairClose)}else{let qt=this.isAllInlineNodes((ft=(Q=f.head)==null?void 0:Q.children)!=null?ft:[]),Mt=this.containsBladeStructures((q=(U=f.head)==null?void 0:U.children)!=null?q:[]);if(((kt=f.head)==null?void 0:kt.containsAnyFragments)==!1&&((st=f.head)==null?void 0:st.containsChildStructures)==!1&&(((vt=f.head)==null?void 0:vt.children.length)<=2||((Ut=f.head)==null?void 0:Ut.children.length)>4)&&!qt&&!Mt){let Nt=this.makeSlug(25);I.virtualBreakOpen=this.open(Nt),I.virtualBreakClose=this.close(Nt),o+=I.pairOpen,o+=`
`+I.virtualBreakOpen,o+=B,o+=`
`+I.virtualBreakClose,o+=I.pairClose}else if(qt){o+=`
`+I.pairOpen;let Nt=this.makeSlug(25);I.virtualBreakOpen=this.selfClosing(Nt),o+=I.virtualBreakOpen+`
`,o+=B,o+=`
`+I.pairClose}else o+=I.pairOpen,o+=`
`,o+=B,o+=`
`,o+=I.pairClose}s.push(I)});let h=s[0].pairOpen,c=s[s.length-1].pairClose,u={pairOpen:h,pairClose:c,structures:s,condition:t};return this.registerCondition(u),o}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),e+" "}toStructure(){let t="";this.doc.getRenderNodes().forEach(s=>{var o,h;if(this.isInsideIgnoreFormatter){if((o=this.ignoredLiteralBlocks.get(this.activeLiteralSlug))==null||o.push(s),s instanceof mn&&s.innerContent.trim().toLowerCase()==this.formatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}s instanceof ne?t+=s.content:s instanceof Ki?s.cases.length>0?t+=this.prepareSwitch(s):t+=this.preparePairedDirective(s.constructedFrom):s instanceof Si?t+=this.prepareConditions(s):s instanceof Tt?t+=this.prepareDirective(s):s instanceof li?t+=this.prepareEcho(s):s instanceof zi?t+=this.prepareForElse(s):s instanceof mn?s.innerContent.trim()==this.formatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.ignoredLiteralBlocks.set(this.activeLiteralSlug,[]),(h=this.ignoredLiteralBlocks.get(this.activeLiteralSlug))==null||h.push(s),t+=this.selfClosing(this.activeLiteralSlug)):t+=this.prepareComment(s):s instanceof an?t+=this.prepareComponent(s):s instanceof Ui&&(t+=this.preparePhpBlock(s))});let e=this.doc.getParser().getFragmentsContainingStructures();if(e.length>0){let s=De.fromText(t);e.forEach(o=>{var y,N,I,R,tt,rt,ht,z;let h=this.doc.getParser().getText(((N=(y=o.start.endPosition)==null?void 0:y.offset)!=null?N:0)+1,(R=(I=o.end.startPosition)==null?void 0:I.offset)!=null?R:0),c=s.getParser().getFragmentsParser().getEmbeddedFragment(o.start.embeddedIndex),u=s.getParser().getFragmentsParser().getClosingFragmentAfter(c),f=s.getParser().getText(((rt=(tt=c.endPosition)==null?void 0:tt.offset)!=null?rt:0)+1,(z=(ht=u==null?void 0:u.startPosition)==null?void 0:ht.offset)!=null?z:0),T=this.makeSlug(16),k=o.start.name.toLowerCase()=="script",B=T;k?B="//"+T:B="/*"+T+"*/",t=t.replace(f,B),this.registerEmbeddedDocument(T,h,k)})}return t}withOptions(t){return this.transformOptions=t,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((s,o)=>{let h=this.selfClosing(o),c=this.printDirective(s,this.indentLevel(h));e=e.replace(h,c)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((s,o)=>{let h=this.printDirective(s,0);if(h.includes(`
`)){let c=this.indentLevel(o);c>0&&(h=pi.shiftIndent(h,c,!0))}e=e.replace(o,h)}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((s,o)=>{let h=os.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o));e=K.replaceAllInString(e,o,h)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((s,o)=>{let h=this.printDirective(s,this.indentLevel(o));e=K.replaceAllInString(e,o,h)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let s=t.trim();return s.startsWith("<?php")==!1&&(s="<?php "+s),s=this.blockPhpFormatter(s,this.transformOptions,null),e&&(s=`
`+s+`
`),Ke.couldReflow(s)&&(s=Ke.instance.reflow(s)),ze.couldReflow(s)&&(s=ze.instance.reflow(s)),s}transformPairedDirectives(t){let e=t;return this.pairedDirectives.forEach((s,o)=>{var f;let h=s.directive;if(s.virtualElementSlug.length>0){let T=this.open(s.virtualElementSlug),k=this.close(s.virtualElementSlug);this.virtualStructureOpens.push(T),this.removeLines.push(T),this.removeLines.push(k)}let c=this.open(o),u=this.close(o);if(h.directiveName.trim().toLowerCase()=="php"){let T=this.open(s.virtualElementSlug),k=this.indentLevel(T),B=s.directive.sourceContent,y=pi.shiftIndent(this.transformBlockPhp(h.innerContent,!0),k,!0);e=e.replace(c,B),e=e.replace(T,y)}else if(h.directiveName.trim().toLowerCase()=="verbatim"){let T=s.directive.sourceContent+`
`+pi.shiftClean(h.innerContent,this.transformOptions.tabSize);e=e.replace(c,T)}else e=e.replace(c,this.printDirective(s.directive,this.indentLevel(c)));e=e.replace(u,(f=s.directive.isClosedBy)==null?void 0:f.sourceContent)}),this.inlineDirectives.forEach((s,o)=>{e=K.replaceAllInString(e,o,s.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(s=>{var T;let o=s.forElse.constructedFrom,h=this.open(s.truthSlug),c=this.close(s.truthSlug),u=this.printDirective(o,this.indentLevel(h)),f=(T=o.isClosedBy)==null?void 0:T.sourceContent;e=e.replace(h,u),e=e.replace(c,f)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(s=>{var u,f;let o=this.open(s.truthSlug),h=s.forElse.constructedFrom,c=this.printDirective(h,this.indentLevel(o));e=e.replace(o,c),e=e.replace(s.pairClose,(u=h.isClosedBy)==null?void 0:u.sourceContent),e=e.replace(s.emptyOpen,(f=s.forElse.elseNode)==null?void 0:f.sourceContent),this.removeLines.push(s.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((s,o)=>{let h=this.selfClosing(o);e=e.replace(h,os.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),this.spanEchos.forEach((s,o)=>{e=e.replace(o,os.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),e}transformConditions(t){let e=t;return this.conditions.forEach(s=>{s.structures.forEach(o=>{let h=o.branch.head;if(o.virtualBreakOpen.length>0&&this.removeLines.push(o.virtualBreakOpen),o.virtualBreakClose.length>0&&(e=e.replace(o.virtualBreakClose,o.virtualBreakClose+`
`),this.removeLines.push(o.virtualBreakClose)),this.virtualStructureOpens.push(o.virtualOpen),this.removeLines.push(o.virtualOpen),this.removeLines.push(o.virtualClose),!o.isLast)this.removeLines.push(o.pairClose),e=e.replace(o.pairOpen,this.printDirective(h,this.indentLevel(o.pairOpen)));else{e=e.replace(o.pairOpen,this.printDirective(h,this.indentLevel(o.pairOpen)));let c=h.isClosedBy;e=e.replace(o.pairClose,this.printDirective(c,this.indentLevel(o.pairClose)))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(s=>{let o=s.switchNode.constructedFrom;e=e.replace(s.virtualSwitchOpen,this.printDirective(o,this.indentLevel(s.virtualSwitchOpen)));let h=o.isClosedBy;e=e.replace(s.virtualSwitchClose,h.sourceContent),s.structures.forEach(c=>{let u=c.case.head;this.removeLines.push(c.virtualClose),this.removeLines.push(c.virtualOpen),c.isLast?(e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen))),this.removeLines.push(c.pairClose)):c.isFirst?(this.removeLines.push(c.pairClose),e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen)))):(this.removeLines.push(c.pairClose),e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen))))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((s,o)=>{let h=this.close(o),c=this.open(o);this.removeLines.push(h);let u=s.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters&&this.phpFormatter!=null&&s.hasValidPhp()){let f=s.getPhpContent().trim();f.startsWith("(")&&f.endsWith(")")&&(f=f.substring(1),f=f.substring(0,f.length-1));let T=this.phpFormatter("<?php "+f,this.transformOptions,null),k=new Qs,B=k.parse(K.replaceAllInString(T,`
`," ")),y=this.indentLevel(c);k.getIsAssoc()?u="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+T+")":B!=null&&(T=Gn.print(B,this.transformOptions.tabSize,1),y>0&&(T=K.removeEmptyNewLines(pi.shiftIndent(T,y,!0))),u="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+T+")")}}catch{u=s.sourceContent}e=e.replace(c,u)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((s,o)=>{let h=this.close(o),c=this.open(o);this.removeLines.push(h),e=e.replace(c,s.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((s,o)=>{let h=this.selfClosing(o);e=e.replace(h,mr.printComment(s,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let s=this.structureLines[e];if(s.includes(t)){let o=s.trimLeft();return s.length-o.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(s=>{let o=s.node;e=e.replace(s.pairOpen,mr.printComment(o,this.transformOptions.tabSize,this.indentLevel(s.pairOpen))),this.removeLines.push(s.pairClose),this.removeLines.push(s.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((s,o)=>{e=K.replaceAllInString(e,o,s.nodeContent)}),e}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((s,o)=>{e=K.replaceAllInString(e,o,s.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((s,o)=>{e=K.replaceAllInString(e,o,s.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((s,o)=>{let h=s.directive;e=e.replace(o,this.printDirective(h,this.indentLevel(o)))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((s,o)=>{e=e.replace(o,s.content)}),e}transformEchoParameters(t){let e=t;return this.echoParameters.forEach((s,o)=>{s.inlineEcho!=null?e=e.replace(o,os.printEcho(s.inlineEcho,this.transformOptions,this.phpFormatter,0)):e=e.replace(o,"")}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((s,o)=>{e=e.replace(o,os.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((s,o)=>{e=e.replace(o,this.printDirective(s,this.indentLevel(o)))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((s,o)=>{let h="",c=0;s.isScript?h="//"+o:h="/*"+o+"*/",c=this.indentLevel(h),e.includes(h)&&(e=e.replace(h,pi.indentRelative(s.content,c)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(s=>{e=e.replace(s,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],s=K.breakByNewLine(t),o=!1;for(let h=0;h<s.length;h++){let c=s[h].trim();if(o){if(c.length==0)continue;o=!1}else o=this.shouldCleanAfter(c);if(this.shouldCleanLine(c))for(let u=e.length-1;u>0&&e[u].trim().length==0;u--)e.pop();if(!this.removeLines.includes(c)){let u=s[h];this.removeLines.forEach(f=>{u.includes(f)&&(u=u.replace(f,""))}),e.push(u)}}return e.join(`
`)}reflowSlugs(t){let e=t;return this.slugs.forEach(s=>{let o=this.open(s),h=this.close(s),c=this.selfClosing(s),u="/<"+s+"(.*?)>/gms",f="/</"+s+"(.*?)>/gms",T="/<"+s+"(.*?)/>/gms";e=e.replace(u,o),e=e.replace(f,h),e=e.replace(T,c)}),e}fromStructure(t){let e=this.reflowSlugs(t);this.structureLines=K.breakByNewLine(e);let s=this.transformInlineDirectives(e);return s=this.transformContentDirectives(s),s=this.transformDynamicEcho(s),s=this.transformPairedDirectives(s),s=this.transformForElseWithEmpty(s),s=this.transformForElseWithNoEmpty(s),s=this.transformDynamicElementForElse(s),s=this.transformInlineEcho(s),s=this.transformConditions(s),s=this.transformDynamicElementConditions(s),s=this.transformSwitchStatements(s),s=this.transformDynamicElementSwitch(s),s=this.transformBreaks(s),s=this.transformProps(s),s=this.transformComments(s),s=this.transformVirtualComments(s),s=this.transformDirectiveParameters(s),s=this.transformExpressionParameters(s),s=this.transformEchoParameters(s),s=this.transformDynamicDirectives(s),s=this.cleanVirtualStructures(s),s=this.removeVirtualStructures(s),s=this.transformEmbeddedEcho(s),s=this.transformEmbeddedDirectives(s),s=this.transformExtractedDocuments(s),s=this.transformPhpBlock(s),this.ignoredLiteralBlocks.forEach((o,h)=>{let c=this.selfClosing(h),u=this.indentLevel(c);s=s.replace(c,this.dumpPreservedNodes(o,u))}),s}dumpPreservedNodes(t,e){let s="";return t.forEach(o=>{o instanceof ne?s+=o.content:o instanceof Ki||o instanceof Si?s+=o.nodeContent:o instanceof Tt||o instanceof li?s+=o.sourceContent:o instanceof zi?s+=o.nodeContent:(o instanceof mn||o instanceof an||o instanceof Ui)&&(s+=o.sourceContent)}),s}}});var De,Vn=Bt(()=>{"use strict";on();rf();of();af();Bf();De=class{constructor(){this.documentParser=new X;this.transformer=null;this.cursor=new Io(this);this.nodes=new Oo(this);this.errors=new So(this)}static fromText(t,e=null){let s=new De;return e!=null&&s.getParser().setSeedPosition(e),s.loadString(t)}static childFromText(t,e,s=null){let o=new De;return s!=null&&o.getParser().setSeedPosition(s),o.getParser().withPhpValidator(e.getPhpValidator()),o.loadString(t),{renderNodes:o.getRenderNodes(),content:t,document:o}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new qo(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});var Mf=H((d1,Uf)=>{"use strict";Uf.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let n=this.input();if(this.is_WHITESPACE()){do n=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(n){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||n==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${n}" at line ${this.yylineno} (offset ${this.offset})`)}}});var Vf=H((p1,Hf)=>{"use strict";Hf.exports={T_COMMENT:function(){for(;this.offset<this.size;){let n=this.input();if(n===`
`||n==="\r")return this.tok.T_COMMENT;if(n==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(n==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let n=this.input(),t=this.tok.T_COMMENT;if(n==="*"){if(n=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),n==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(n=this.input(),n==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var qf=H((_1,Gf)=>{"use strict";Gf.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let n=this.input();if(n=="<"){if(n=this.ahead(1),n=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(n=this._input[this.offset+4],n===" "||n==="	"||n===`
`||n==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&n=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var Qf=H((m1,Yf)=>{"use strict";var Wo=10,Wf="2147483648";process.arch=="x64"&&(Wo=19,Wf="9223372036854775808");Yf.exports={consume_NUM:function(){let n=this.yytext[0],t=n===".";if(n==="0")if(n=this.input(),n==="x"||n==="X"){if(n=this.input(),n!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(n?2:1)}else if(n==="b"||n==="B"){if(n=this.input(),n!=="_"&&n==="0"||n==="1")return this.consume_BNUM();this.unput(n?2:1)}else this.is_NUM()||n&&this.unput(1);for(;this.offset<this.size;){let e=n;if(n=this.input(),n==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(n==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(n==="e"||n==="E"){if(e==="_"){this.unput(1);break}let s=2;if(n=this.input(),(n==="+"||n==="-")&&(s=3,n=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(n?s:s-1);break}if(!this.is_NUM()){n&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<Wo-1?this.tok.T_LNUMBER:this.yytext.length<Wo||this.yytext.length==Wo&&this.yytext<Wf?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let n=this.input();if(!this.is_HEX()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let n=this.input();if(!this.is_NUM()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let n;for(;this.offset<this.size;)if(n=this.input(),n!=="0"&&n!=="1"&&n!=="_"){n&&this.unput(1);break}return this.tok.T_LNUMBER}}});var Kf=H((T1,jf)=>{"use strict";jf.exports={matchST_LOOKING_FOR_PROPERTY:function(){let n=this.input();if(n==="-"){if(n=this.input(),n===">")return this.tok.T_OBJECT_OPERATOR;n&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),n&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let n=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),n=this.input(),n==="["||n==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else n&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let n=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(n==="]")return this.popState(),"]";if(n==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||n==="\\"||n==="'"||n==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(n==="["||n==="{"||n==="}"||n==='"'||n==="`"||this.is_TOKEN())return n;throw new Error("Unexpected terminal")}}}});var $f=H((g1,zf)=>{"use strict";zf.exports={matchST_IN_SCRIPTING:function(){let n=this.input();switch(n){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),n=this._input[this.offset],(n===`
`||n==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(n==="."){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+n+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let n=this.input();if(!(n===" "||n==="	"||n===`
`||n==="\r")){n&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var Zf=H((k1,Xf)=>{"use strict";var as=[`
`,"\r"],Jf=[`
`,"\r",";"],VA=Jf.concat(["	"," ",",","]",")","/","=","!"]);Xf.exports={T_CONSTANT_ENCAPSED_STRING:function(){let n;for(;this.offset<this.size;)if(n=this.input(),n=="\\")this.input();else if(n=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let n=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let s=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,as.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,e=this.offset-n,this.offset=n,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=n,!1},ST_DOUBLE_QUOTES:function(){let n;for(;this.offset<this.size;)if(n=this.input(),n=="\\")this.input();else{if(n=='"')break;if(n=="$"){if(n=this.input(),n=="{"||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if(n=="{"){if(n=this.input(),n=="$"){this.unput(2);break}n&&this.unput(1)}}if(n=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(n,t){let e=this._input[n-2];if(!as.includes(e))return!1;let s=!1,o=!1,h=0,c=this._input[n-1];if(this.version>=703){for(;c==="	"||c===" ";)c===" "?s=!0:c==="	"&&(o=!0),c=this._input[n+h],h++;if(n=n+h,as.includes(this._input[n-1]))return!1}if(this._input.substring(n-1,n-1+this.heredoc_label.length)===this.heredoc_label.label){let u=this._input[n-1+this.heredoc_label.length];if((this.version>=703?VA:Jf).includes(u)){if(t){if(this.consume(h),s&&o)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=h,this.heredoc_label.indentation_uses_spaces=s,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let n=this.offset+1;for(;n<this._input.length;){if(this.isDOC_MATCH(n,!1))return;if(!as.includes(this._input[n-1]))for(;!as.includes(this._input[n++])&&n<this._input.length;);n++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let n=this._input[this.offset-1];for(;this.offset<this.size;)if(as.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(n==="\\"&&(n=this.input(),as.includes(n)||(n=this.input())),as.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(n==="$"){if(n=this.input(),n==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(n==="{"){if(n=this.input(),n==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let n=this.input();if(n=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(n==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else n&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let n=this.input();if(n==="$"){if(n=this.input(),n==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==="`")return this.popState(),"`";for(;this.offset<this.size;){if(n==="\\")this.input();else if(n==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(n==="$"){if(n=this.input(),n==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(n==="{"){if(n=this.input(),n==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let n=this.input();if(n==="$"){if(n=this.input(),n==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==='"')return this.popState(),'"';for(;this.offset<this.size;){if(n==="\\")this.input();else if(n==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(n==="$"){if(n=this.input(),n==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}n&&this.unput(1)}else if(n==="{"){if(n=this.input(),n==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var ed=H((x1,td)=>{"use strict";td.exports={T_STRING:function(){let n=this.yytext.toLowerCase(),t=this.keywords[n];if(typeof t!="number"){if(n==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,n==="b"||n==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,s=this.input();for(;s==" ";)s=this.input();let o=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();let h=s.slice(0,-1).toLowerCase();o=h!=="extends"&&h!=="implements"}return this.unput(this.offset-e),o?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=n==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let n=this._input[this.offset-1],t=this.tokenTerminals[n];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let n=this._input[this.offset];return n===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):n==="-"?(this.input(),this.tok.T_DEC):n==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let n;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),n=this.input()}while(n==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let n=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),s=this.castKeywords[e];if(typeof s=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return s}return this.unput(this.offset-n),"("},"=":function(){let n=this._input[this.offset];return n===">"?(this.input(),this.tok.T_DOUBLE_ARROW):n==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let n=this._input[this.offset];return n==="+"?(this.input(),this.tok.T_INC):n==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let n=this._input[this.offset];return n==="<"?(n=this._input[this.offset+1],n==="="?(this.consume(2),this.tok.T_SL_EQUAL):n==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):n==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):n===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):n===">"?(n=this._input[this.offset+1],n==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_MUL_EQUAL):n==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_CONCAT_EQUAL):n==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_AND_EQUAL):n==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_OR_EQUAL):n==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var nd=H((E1,id)=>{"use strict";var GA=";:,.\\[]()|^&+-/*=%!~$<>?@";id.exports={is_NUM:function(){let n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n===95},is_NUM_START:function(){let n=this._input.charCodeAt(this.offset-1);return n>47&&n<58},is_LABEL:function(){let n=this._input.charCodeAt(this.offset-1);return n>96&&n<123||n>64&&n<91||n===95||n>47&&n<58||n>126},is_LABEL_START:function(){let n=this._input.charCodeAt(this.offset-1);return n>64&&n<91||n>96&&n<123||n===95||n>126},consume_LABEL:function(){for(;this.offset<this.size;){let n=this.input();if(!this.is_LABEL()){n&&this.unput(1);break}}return this},is_TOKEN:function(){let n=this._input[this.offset-1];return GA.indexOf(n)!==-1},is_WHITESPACE:function(){let n=this._input[this.offset-1];return n===" "||n==="	"||n===`
`||n==="\r"},is_TABSPACE:function(){let n=this._input[this.offset-1];return n===" "||n==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let n=this.input();if(!this.is_TABSPACE()){n&&this.unput(1);break}}return this},is_HEX:function(){let n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n>64&&n<71||n>96&&n<103||n===95}}});var rd=H((v1,sd)=>{"use strict";var Ci=function(n){this.engine=n,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};Ci.prototype.setInput=function(n){return this._input=n,this.size=n.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};Ci.prototype.input=function(){let n=this._input[this.offset];return n?(this.yytext+=n,this.offset++,n==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),n===`
`||n==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,n):""};Ci.prototype.unput=function(n){if(n===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,n++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(n>0)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};Ci.prototype.tryMatch=function(n){return n===this.ahead(n.length)};Ci.prototype.tryMatchCaseless=function(n){return n===this.ahead(n.length).toLowerCase()};Ci.prototype.ahead=function(n){let t=this._input.substring(this.offset,this.offset+n);return t[t.length-1]==="\r"&&this._input[this.offset+n+1]===`
`&&(t+=`
`),t};Ci.prototype.consume=function(n){for(let t=0;t<n;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};Ci.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};Ci.prototype.setState=function(n){return this.yytext=n.yytext,this.offset=n.offset,this.yylineno=n.yylineno,this.yyprevcol=n.yyprevcol,this.yylloc=n.yylloc,n.heredoc_label&&(this.heredoc_label=n.heredoc_label),this};Ci.prototype.appendToken=function(n,t){return this.tokens.push([n,t]),this};Ci.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let n=this.next()||this.lex();if(!this.all_tokens){for(;n===this.tok.T_WHITESPACE||!this.comment_tokens&&(n===this.tok.T_COMMENT||n===this.tok.T_DOC_COMMENT)||n===this.tok.T_OPEN_TAG;)n=this.next()||this.lex();if(n==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(n===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),n};Ci.prototype.begin=function(n){if(this.conditionStack.push(n),this.curCondition=n,this.stateCb=this["match"+n],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+n+'"');return this};Ci.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};Ci.prototype.next=function(){let n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(n=this.tokens.shift(),typeof n[1]=="object"?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=n;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return n};[Mf(),Vf(),qf(),Qf(),Kf(),$f(),Zf(),ed(),nd()].forEach(function(n){for(let t in n)Ci.prototype[t]=n[t]});sd.exports=Ci});var hh=H((y1,od)=>{"use strict";var qA=function(n,t,e){this.line=n,this.column=t,this.offset=e};od.exports=qA});var hd=H((C1,ad)=>{"use strict";ad.exports={read_array:function(){let n=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),n=")"):(t=!0,n="]");let s=[];return this.next().token!==n&&(s=this.read_array_pair_list(t)),this.expect(n),this.next(),e(t,s)},read_array_pair_list:function(n){let t=this;return this.read_list(function(){return t.read_array_pair(n)},",",!0)},read_array_pair:function(n){if(!n&&this.token===")"||n&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,s=null,o=!1,h=!1;if(this.token==="&")this.next(),o=!0,s=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),h=!0,s=this.read_expr();else{let c=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=c,this.token==="&"?(this.next(),o=!0,s=this.read_variable(!0,!1)):s=this.read_expr()):s=c}return t(e,s,o,h)}}});var ud=H((N1,ld)=>{"use strict";ld.exports={read_class_declaration_statement:function(n){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let s=this.node("identifier"),o=this.text();this.next(),s=s(o);let h=this.read_extends_from(),c=this.read_implements_list();this.expect("{");let u=this.next().read_class_body(!0,!1),f=t(s,h,c,u,e);return n&&(f.attrGroups=n),f},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(n,t){let e=[],s=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let c=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(c);continue}this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list());let o=this.position(),h=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let c=this.read_constant_list(h,s);this.expect(";")&&this.next(),e=e.concat(c);continue}if(n&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),h[0]=null,h[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,h,s,o)),s=[];else if(n&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE))){let c=this.read_variable_list(h,s);s=[],this.expect(";"),this.next(),e=e.concat(c)}else this.error([this.tok.T_CONST,...n?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(n,t){let e=this.node("propertystatement"),s=this.read_list(function(){let h=this.node("property"),c=!1;this.token===this.tok.T_READ_ONLY&&(c=!0,this.next());let[u,f]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let T=this.node("identifier"),k=this.text().substring(1);return this.next(),T=T(k),this.token===";"||this.token===","?h(T,null,c,u,f,t||[]):this.token==="="?h(T,this.next().read_expr(),c,u,f,t||[]):(this.expect([",",";","="]),h(T,null,u,f,t||[]))},",");return e(null,s,n)},read_constant_list:function(n,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),s=this.read_list(function(){let h=this.node("constant"),c=null,u=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){c=this.node("identifier");let f=this.text();this.next(),c=c(f)}else this.expect("IDENTIFIER");return this.expect("=")&&(u=this.next().read_expr()),h(c,u)},",");return e(null,s,n,t||[])},read_member_flags:function(n){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,s=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,s=0;break;case this.tok.T_PROTECTED:e=0,s=1;break;case this.tok.T_PRIVATE:e=0,s=2;break;case this.tok.T_STATIC:e=1,s=1;break;case this.tok.T_ABSTRACT:e=2,s=1;break;case this.tok.T_FINAL:e=2,s=2;break}n&&(e==0&&s==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),s=-1):e==2&&s==1&&(this.error(),s=-1)),t[e]!==-1?this.error():s!==-1&&(t[e]=s)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let n=!1;this.token==="?"&&(n=!0,this.next());let t=this.read_types();if(n&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[n,t]},read_interface_declaration_statement:function(n){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=this.read_interface_extends_list();this.expect("{");let h=this.next().read_interface_body();return t(e,o,h,n||[])},read_interface_body:function(){let n=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){n.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){n.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let s=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let o=this.read_constant_list(s,t);this.expect(";")&&this.next(),n=n.concat(o),t=[]}else if(this.token===this.tok.T_FUNCTION){let o=this.read_function_declaration(2,s,t,e);o.parseFlags(s),n.push(o),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),n},read_trait_declaration_statement:function(){let n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let s=this.next().read_class_body(!0,!1);return n(t,s)},read_trait_use_statement:function(){let n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(t,e)},read_trait_use_alias:function(){let n=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return n("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let s=null,o=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){o=this.node("identifier");let h=this.text();this.next(),o=o(h)}else s===!1&&this.expect(this.tok.T_STRING);return n("traitalias",t,e,o,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),n("traitalias",t,e,null,null)}}});var fd=H((b1,cd)=>{"use strict";cd.exports={read_comment:function(){let n=this.text(),t=this.ast.prepare(n.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(n),t.offset=e,this.prev=s,t},read_doc_comment:function(){let n=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),n=n(e),n.offset=t,this.prev=s,n}}});var pd=H((A1,dd)=>{"use strict";dd.exports={read_expr:function(n){let t=this.node();if(this.token==="@")return n||(n=this.next().read_expr()),t("silent",n);if(n||(n=this.read_expr_item()),this.token==="|")return t("bin","|",n,this.next().read_expr());if(this.token==="&")return t("bin","&",n,this.next().read_expr());if(this.token==="^")return t("bin","^",n,this.next().read_expr());if(this.token===".")return t("bin",".",n,this.next().read_expr());if(this.token==="+")return t("bin","+",n,this.next().read_expr());if(this.token==="-")return t("bin","-",n,this.next().read_expr());if(this.token==="*")return t("bin","*",n,this.next().read_expr());if(this.token==="/")return t("bin","/",n,this.next().read_expr());if(this.token==="%")return t("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",n,this.next().read_expr());if(this.token==="<")return t("bin","<",n,this.next().read_expr());if(this.token===">")return t("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=t("bin","instanceof",n,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return t("bin","??",n,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",n,e,this.read_expr())}else t.destroy(n);return n},read_expr_cast:function(n){return this.node("cast")(n,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let n=null;switch(this.token){case this.tok.T_ISSET:{n=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),n=n(t)}break;case this.tok.T_EMPTY:{n=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),n=n(t)}break;case this.tok.T_INCLUDE:n=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:n=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{n=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),n=n(t)}break;case this.tok.T_REQUIRE:n=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:n=this.node("include")(!0,!0,this.next().read_expr());break}return n},read_optional_expr:function(n){return this.token!==n?this.read_expr():null},read_exit_expr:function(){let n=null;return this.token==="("&&(this.next(),n=this.read_optional_expr(")"),this.expect(")")&&this.next()),n},read_expr_item:function(){let n,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let s=null,o=this.innerList;n=this.node("list"),o||(s=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let h=this.read_array_pair_list(!1);this.expect(")")&&this.next();let c=!1;for(let u=0;u<h.length;u++)if(h[u]!==null&&h[u].kind!=="noop"){c=!0;break}return c||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),o?n(h,!1):(this.innerList=!1,this.expect("=")?s(n(h,!1),this.next().read_expr(),"="):n(h,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let s=this.node("throw"),o=this.next().read_expr();return s(o)}case this.tok.T_EXIT:{let s=this.lexer.yytext.toLowerCase()==="die";n=this.node("exit"),this.next();let o=this.read_exit_expr();return n(o,s)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let s=null,o=null;return n=this.node("yield"),this.next().is("EXPR")&&(s=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(o=s,s=this.next().read_expr())),n(s,o)}case this.tok.T_YIELD_FROM:return n=this.node("yieldfrom"),t=this.next().read_expr(),n(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let s=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(s),this.next()}}if(this.is("VARIABLE")){n=this.node(),t=this.read_variable(!1,!1);let s=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return s&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(n,t):n("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return s&&this.error("VARIABLE"),n("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return s&&this.error("VARIABLE"),this.next(),n("post","+",t);case this.tok.T_DEC:return s&&this.error("VARIABLE"),this.next(),n("post","-",t);default:n.destroy(t)}}else if(this.is("SCALAR")){if(n=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let s=this.convertToList(t);t.loc&&(s.loc=t.loc);let o=this.next().read_expr();return n("assign",s,o,"=")}else n.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(n){let t=n.items.map(s=>(s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=this.convertToList(s.value)),s)),e=this.node("list")(t,!0);return n.loc&&(e.loc=n.loc),n.leadingComments&&(e.leadingComments=n.leadingComments),n.trailingComments&&(e.trailingComments=n.trailingComments),e},read_assignref:function(n,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),n("assignref",t,e)},read_inline_function:function(n,t){if(this.token===this.tok.T_FUNCTION){let T=this.read_function(!0,n,t);return T.attrGroups=t,T}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let s=this.is_reference();this.expect("(")&&this.next();let o=this.read_parameter_list();this.expect(")")&&this.next();let h=!1,c=null;this.token===":"&&(this.next().token==="?"&&(h=!0,this.next()),c=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let u=this.read_expr(),f=e(o,s,u,c,h,!!n);return f.attrGroups=t,f},read_match_expression:function(){let n=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),n(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let n=[];if(this.token===this.tok.T_DEFAULT)n=null,this.next();else for(n.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),n;n.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),n},read_attribute(){let n=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(n,t)},read_attr_list(){let n=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());n.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return n},read_new_expr:function(){let n=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[],e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let o=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let h=this.read_extends_from(),c=this.read_implements_list(),u=null;this.expect("{")&&(u=this.next().read_class_body(!0,!1));let f=o(null,h,c,u,[0,0,0]);return f.attrGroups=e,n(f,t)}let s=this.read_new_class_name();for(;this.token==="[";){let o=this.node("offsetlookup"),h=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),s=o(s,h)}return this.token==="("&&(t=this.read_argument_list()),n(s,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let n=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(n=this.read_static_getter(n)),n}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(n){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)n=this.recursive_variable_chain_scan(n,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")n=this.read_dereferencable(n);else if(this.token==="(")n=this.node("call")(n,this.read_argument_list());else return n;return n}}});var md=H((I1,_d)=>{"use strict";_d.exports={read_enum_declaration_statement:function(n){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=this.read_enum_value_type(),h=this.read_implements_list();this.expect("{");let c=this.next().read_class_body(!1,!0),u=t(e,o,h,c);return n&&(u.attrGroups=n),u},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let n=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let s=this.token==="="?this.next().read_expr():null;return this.expect(";"),n(t,s)}}});var gd=H((S1,Td)=>{"use strict";Td.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(n,t,e,s){let o=this.read_function_declaration(n?1:t?2:0,t&&t[1]===1,e||[],s);return t&&t[2]==1?(o.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(o.body=this.read_code_block(!1),o.loc&&o.body.loc&&(o.loc.end=o.body.loc.end)),!n&&t&&o.parseFlags(t)),o},read_function_declaration:function(n,t,e,s){let o="function";n===1?o="closure":n===2&&(o="method");let h=this.node(o);this.expect(this.tok.T_FUNCTION)&&this.next();let c=this.is_reference(),u=!1,f=[],T=null,k=!1;if(n!==1){let N=this.node("identifier");n===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(u=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(u=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(u=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(u=this.text()),this.next()),u=N(u)}this.expect("(")&&this.next();let B=this.read_parameter_list(u.name==="__construct");this.expect(")")&&this.next(),n===1&&(f=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(k=!0,this.next()),T=this.read_types());let y=N=>(N.attrGroups=e||[],s&&N.loc&&(N.loc.start=s,N.loc.source&&(N.loc.source=this.lexer._input.substr(N.loc.start.offset,N.loc.end.offset-N.loc.start.offset))),N);return y(n===1?h(B,c,f,T,k,t):h(u,B,c,T,k))},read_lexical_vars:function(){let n=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),n=this.read_lexical_var_list(),this.expect(")")&&this.next()),n},read_list_with_dangling_comma:function(n){let t=[];for(;this.token!=this.EOF;)if(t.push(n()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let n=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),n(t,!1)},read_parameter_list:function(n){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(n);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(n){let t=this.node("parameter"),e=null,s=null,o=null,h=!1,c=!1,u=[];this.token===this.tok.T_ATTRIBUTE&&(u=this.read_attr_list());let f=this.read_promoted();this.version>=801&&this.token===this.tok.T_READ_ONLY&&(n?(this.next(),c=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),h=!0),o=this.read_types(),h&&!o&&this.raiseError("Expecting a type definition combined with nullable operator");let T=this.is_reference(),k=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let y=this.text().substring(1);this.next(),e=e(y)}this.token=="="&&(s=this.next().read_expr());let B=t(e,o,s,T,k,c,h,f);return u&&(B.attrGroups=u),B},read_types(){let n="unset",t="union",e="intersection",s=[],o=n,h=this.read_type();if(!h)return null;for(s.push(h);this.token==="|"||this.version>=801&&this.token==="&";){let c=this.peek();if(c===this.tok.T_ELLIPSIS||c===this.tok.T_VARIABLE)break;o===n?o=this.token==="|"?t:e:(o===t&&this.token!=="|"||o===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),s.push(this.read_type())}return s.length===1?s[0]:o===e?this.node("intersectiontype")(s):this.node("uniontype")(s)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let n=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(n.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(n=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),n},read_non_empty_argument_list:function(){let n=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";n&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(n=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let n=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),n("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?n("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),n.destroy(),this.read_namespace_name())}return n.destroy(),null}}});var xd=H((O1,kd)=>{"use strict";kd.exports={read_if:function(){let n=this.node("if"),t=this.next().read_if_expr(),e=null,s=null,o=!1;if(this.token===":"){o=!0,this.next(),e=this.node("block");let h=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}h.push(this.read_inner_statement())}e=e(null,h),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?s=this.read_if():this.token===this.tok.T_ELSE&&(s=this.next().read_statement());return n(t,e,s,o)},read_if_expr:function(){this.expect("(")&&this.next();let n=this.read_expr();return this.expect(")")&&this.next(),n},read_elseif_short:function(){let n=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let s=this.node("block"),o=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}o.push(this.read_inner_statement())}return t(e,s(null,o),n,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let n=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return n(null,t)}}});var vd=H((L1,Ed)=>{"use strict";Ed.exports={read_while:function(){let n=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,s=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(s=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),n(t,e,s)},read_do:function(){let n=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(t,e)},read_for:function(){let n=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],s=[],o=null,h=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(s=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(h=!0,o=this.read_short_form(this.tok.T_ENDFOR)):o=this.read_statement(),n(t,e,s,o,h)},read_foreach:function(){let n=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,s=null,o=null,h=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),s=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=s,s=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(h=!0,o=this.read_short_form(this.tok.T_ENDFOREACH)):o=this.read_statement(),n(t,e,s,o,h)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let n=this.token==="[",t=this.node("list");this.next(),!n&&this.expect("(")&&this.next();let e=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),t(e,n)}else return this.read_variable(!1,!1)}}});var Cd=H((P1,yd)=>{"use strict";yd.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var bd=H((D1,Nd)=>{"use strict";Nd.exports={read_namespace:function(){let n=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),n(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),n(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),n(e,t,!1))},read_namespace_name:function(n){let t=this.node(),e,s=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,s=s.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),n||this.token!=="("){if(s.toLowerCase()==="parent")return t("parentreference",s);if(s.toLowerCase()==="self")return t("selfreference",s)}return t("name",s,e)},read_use_statement:function(){let n=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let s=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(s===null),this.expect("}")&&this.next()),n=n(e,s,t),this.expect(";")&&this.next(),n},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(n){let t=this.node("useitem"),e=null;n&&(e=this.read_use_type());let s=this.read_namespace_name(),o=this.read_use_alias();return t(s.name,o,e)},read_use_declarations:function(n){let t=[this.read_use_declaration(n)];for(;this.token===",";){if(this.next(),n){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(n))}return t},read_use_alias:function(){let n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),n=t(e)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var Sd=H((R1,Id)=>{"use strict";var Ad={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};Id.exports={resolve_special_chars:function(n,t){return t?n.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,s,o)=>Ad[s]?Ad[s]:s[0]==="x"||s[0]==="X"?String.fromCodePoint(parseInt(s.substr(1),16)):s[0]==="u"?String.fromCodePoint(parseInt(o,16)):String.fromCodePoint(parseInt(s,8))):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(n,t,e,s){if(t===0)return n;this.check_heredoc_indentation_level(n,t,e,s);let o=e?" ":"	",h=new RegExp(`\\n${o}{${t}}`,"g"),c=new RegExp(`^${o}{${t}}`);return s&&(n=n.replace(c,"")),n.replace(h,`
`)},check_heredoc_indentation_level:function(n,t,e,s){let o=n.length,h=0,c=0,u=!0,f=e?" ":"	",T=!1;if(!s){if(h=n.indexOf(`
`),h===-1)return;h++}for(;h<o;)u?n[h]===f?c++:T=!0:u=!1,n[h]!==`
`&&T&&c<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):T=!1,n[h]===`
`&&(u=!0,c=0),h++},read_dereferencable_scalar:function(){let n=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),s=0;(e[0]==="b"||e[0]==="B")&&(s=1);let o=e[s]==='"';this.next();let h=this.resolve_special_chars(e.substring(s+1,e.length-1),o);t=t(o,h,s===1,e),this.token===this.tok.T_DOUBLE_COLON?n=this.read_static_getter(t):n=t}break;case this.tok.T_ARRAY:n=this.read_array();break;case"[":n=this.read_array();break}return n},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let n,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return n=this.text(),this.next(),e(n,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),n=this.next().text(),this.lexer.heredoc_label.indentation>0&&(n=n.substring(0,n.length-this.lexer.heredoc_label.indentation));let s=n[n.length-1];s===`
`?n[n.length-2]==="\r"?n=n.substring(0,n.length-2):n=n.substring(0,n.length-1):s==="\r"&&(n=n.substring(0,n.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let o=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(n,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),o,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(n){let t,e,s=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=s(n,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=s(n,e)),t},read_encapsed_string_item:function(n){let t=this.node("encapsedpart"),e=null,s=!1,o=this.node(),h,c,u;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let f=this.text();this.next(),o=o("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(f,n),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):f,!1,f)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",s=!0,u=null,this.next().token===this.tok.T_STRING_VARNAME){u=this.node("variable");let f=this.text();this.next(),o.destroy(),this.token==="["?(u=u(f,!1),c=this.node("offsetlookup"),h=this.next().read_expr(),this.expect("]")&&this.next(),o=c(u,h)):o=u(f,!1)}else o=o("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",o.destroy(),o=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",o.destroy(),o=this.read_simple_variable(),this.token==="["&&(c=this.node("offsetlookup"),h=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),o=c(o,h)),this.token===this.tok.T_OBJECT_OPERATOR){c=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let f=this.node("identifier");u=this.text(),this.next(),o=c(o,f(u))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let f=this.text();this.next(),o.destroy(),o=o("string",!1,f,!1,f)}return this.lexer.heredoc_label.first_encaps_node=!1,t(o,e,s)},read_encapsed_string:function(n,t=!1){let e=this.lexer.yylloc.first_offset,s=this.node("encapsed");this.next();let o=this.lexer.yylloc.prev_offset-(t?1:0),h=[],c=null;for(n==="`"?c=this.ast.encapsed.TYPE_SHELL:n==='"'?c=this.ast.encapsed.TYPE_STRING:c=this.ast.encapsed.TYPE_HEREDOC;this.token!==n&&this.token!==this.EOF;)h.push(this.read_encapsed_string_item(!0));if(h.length>0&&h[h.length-1].kind==="encapsedpart"&&h[h.length-1].expression.kind==="string"){let f=h[h.length-1].expression,T=f.value[f.value.length-1];T===`
`?f.value[f.value.length-2]==="\r"?f.value=f.value.substring(0,f.value.length-2):f.value=f.value.substring(0,f.value.length-1):T==="\r"&&(f.value=f.value.substring(0,f.value.length-1))}this.expect(n)&&this.next();let u=this.lexer._input.substring(c==="heredoc"?e:o-1,this.lexer.yylloc.first_offset);return s=s(h,u,c),n===this.tok.T_END_HEREDOC&&(s.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),s},get_magic_constant:function(){let n=this.node("magic"),t=this.text();return this.next(),n(t.toUpperCase(),t)}}});var Ld=H((w1,Od)=>{"use strict";Od.exports={read_top_statements:function(){let n=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?n=n.concat(t):n.push(t))}return n},read_top_statement:function(){let n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,n);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(n);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(n);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(n);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let n=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?n=n.concat(t):n.push(t))}return n},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let n=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?n(t,this.next().read_expr()):n(t,null)},",",!1)},read_declare_list:function(){let n=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=null;if(this.expect("=")&&(o=this.next().read_expr()),n.push(t(e,o)),this.token!==",")break;this.next()}return n},read_inner_statement:function(){let n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=n,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let n=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),n(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let n=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),n(t)}case this.tok.T_GLOBAL:{let n=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),n(t)}case this.tok.T_STATIC:{let n=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(n);let s=this.next().read_expr();return this.expectEndOfStatement(s),t("expressionstatement",s)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let n=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",s=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),n(s,e)}case this.tok.T_INLINE_HTML:{let n=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let s=this.node("inline");return this.next(),s(n,e?t+n:n)}case this.tok.T_UNSET:{let n=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),n(t)}case this.tok.T_DECLARE:{let n=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let s=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return n(s,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let n=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),n(t)}case";":return this.next(),null;case this.tok.T_STRING:{let n=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),s=this.node("identifier");if(this.next().token===":")return s=s(e),this.next(),n("label",s);s.destroy(),n.destroy(),this.lexer.tokens.push(t);let o=this.node("expressionstatement"),h=this.next().read_expr();return this.expectEndOfStatement(h),o(h)}case this.tok.T_GOTO:{let n=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return n(t)}default:{let n=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),n(t)}}},read_code_block:function(n){let t=this.node("block");this.expect("{")&&this.next();let e=n?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var Dd=H((F1,Pd)=>{"use strict";Pd.exports={read_switch:function(){let n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",s=this.read_switch_case_list();return n(t,s,e)},read_switch_case_list:function(){let n=null,t=this.node("block"),e=[];for(this.token==="{"?n="}":this.token===":"?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==n;)e.push(this.read_case_list(n));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(n){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let s=this.node("block"),o=[];for(;this.token!==this.EOF&&this.token!==n&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)o.push(this.read_inner_statement());return t(e,s(null,o))}}});var wd=H((B1,Rd)=>{"use strict";Rd.exports={read_try:function(){this.expect(this.tok.T_TRY);let n=this.node("try"),t=null,e=[],s=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let o=this.node("catch");this.next().expect("(")&&this.next();let h=this.read_list(this.read_namespace_name,"|",!1),c=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(c=this.read_variable(!0,!1)),this.expect(")"),e.push(o(this.next().read_statement(),h,c))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),n(s,e,t)}}});var Bd=H((U1,Fd)=>{"use strict";Fd.exports={read_short_form:function(n){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(n,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(n.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(n,t,e){let s=[];if(this.token==t&&(e&&s.push(typeof n=="function"?this.node("noop")():null),this.next()),typeof n=="function")do{let o=n.apply(this,[]);if(o&&s.push(o),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(n))s.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=n);)s.push(this.text())}return s},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){let t=this.node("byref");this.next(),t=t(null);let e=n();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let n=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?n(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var Md=H((M1,Ud)=>{"use strict";Ud.exports={read_variable:function(n,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,n,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let s=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(s.kind)===-1){let o=s.name.toLowerCase();o==="true"?e=s.destroy(e("boolean",!0,s.name)):o==="false"?e=s.destroy(e("boolean",!1,s.name)):o==="null"?e=s.destroy(e("nullkeyword",s.name)):(e.destroy(s),e=s)}else e.destroy(s),e=s}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,n,t)},read_static_getter:function(n,t){let e=this.node("staticlookup"),s,o;return this.next().is([this.tok.T_VARIABLE,"$"])?s=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(s=this.node("identifier"),o=this.text(),this.next(),s=s(o)):this.token==="{"?(s=this.node("literal"),o=this.next().read_expr(),this.expect("}")&&this.next(),s=s("literal",o,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),s=this.node("identifier"),o=this.text(),this.next(),s=s(o)),e(n,s)},read_what:function(n=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(n,t,e){let s,o;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return n;n=this.node("call")(n,this.read_argument_list());break;case"[":case"{":{let c=this.token==="[";s=this.node("offsetlookup"),this.next(),o=!1,e?(o=this.read_encaps_var_offset(),this.expect(c?"]":"}")&&this.next()):(c?this.token!=="]":this.token!=="}")?(o=this.read_expr(),this.expect(c?"]":"}")&&this.next()):this.next(),n=s(n,o);break}case this.tok.T_DOUBLE_COLON:n.kind==="staticlookup"&&n.offset.kind==="identifier"&&this.error(),s=this.node("staticlookup"),n=s(n,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{s=this.node("propertylookup"),n=s(n,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{s=this.node("nullsafepropertylookup"),n=s(n,this.read_what());break}default:break t}return n},read_encaps_var_offset:function(){let n=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),n=n("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),n=n("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),n=n("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),n=n("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),n=n("identifier",t)}return n},read_reference_variable:function(n){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let s=this.node();if(this.token=="{"&&!n)e=this.next().read_expr(),this.expect("}")&&this.next(),t=s("offsetlookup",t,e);else{s.destroy();break}}return t},read_simple_variable:function(){let n=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),n=n(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),n=n(e,!0);break}case"$":n=n(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),n=n(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),n=n(t,!1)}return n}}});var Vd=H((H1,Hd)=>{"use strict";var WA=hh();function uh(n){return n!="."&&n!=","&&!isNaN(parseFloat(n))&&isFinite(n)}var Ti=function(n,t){this.lexer=n,this.ast=t,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(s){return[s,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};Ti.prototype.getTokenName=function(n){return uh(n)?n==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[n]:"'"+n+"'"};Ti.prototype.parse=function(n,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(n),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),s=[];for(this.next();this.token!=this.EOF;)s.push(this.read_start());s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let o=e(s,this._errors,this._docs,this._tokens);if(this.debug){let h=this.ast.checkNodes();if(h.length>0)throw h.forEach(function(c){c.position&&console.log("Node at line "+c.position.line+", column "+c.position.column),console.log(c.stack.join(`
`))}),new Error("Some nodes are not closed")}return o};Ti.prototype.raiseError=function(n,t,e,s){if(n+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let h=new SyntaxError(n,this.filename,this.lexer.yylloc.first_line);throw h.lineNumber=this.lexer.yylloc.first_line,h.fileName=this.filename,h.columnNumber=this.lexer.yylloc.first_column,h}let o=this.ast.prepare("error",null,this)(n,s,this.lexer.yylloc.first_line,e);return this._errors.push(o),o};Ti.prototype.error=function(n){let t="Parse Error : syntax error",e=this.getTokenName(this.token),s="";if(this.token!==this.EOF){if(uh(this.token)){let o=this.text();o.length>10&&(o=o.substring(0,7)+"..."),e="'"+o+"' ("+e+")"}t+=", unexpected "+e}return n&&!Array.isArray(n)&&((uh(n)||n.length===1)&&(s=", expecting "+this.getTokenName(n)),t+=s),this.raiseError(t,s,n,e)};Ti.prototype.position=function(){return new WA(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};Ti.prototype.node=function(n){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(t)));let e=this.ast.prepare(n,t,this);return e.postBuild=function(s){if(this._docIndex<this._docs.length)if(this._lastNode){let o=this.prev[2],h=this._docIndex;for(;h<this._docs.length&&!(this._docs[h].offset>o);h++);h>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,h)),this._docIndex=h)}else this.token===this.EOF&&(s.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=s}.bind(this),e}return this.ast.prepare(n,null,this)};Ti.prototype.expectEndOfStatement=function(n){if(this.token===";")n&&this.lexer.yytext===";"&&n.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var lh=["parser.next","parser.node","parser.showlog"];Ti.prototype.showlog=function(){let n=new Error().stack.split(`
`),t;for(let e=2;e<n.length;e++){t=n[e].trim();let s=!1;for(let o=0;o<lh.length;o++)if(t.substring(3,3+lh[o].length)===lh[o]){s=!0;break}if(!s)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};Ti.prototype.expect=function(n){if(Array.isArray(n)){if(n.indexOf(this.token)===-1)return this.error(n),!1}else if(this.token!=n)return this.error(n),!1;return!0};Ti.prototype.text=function(){return this.lexer.yytext};Ti.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};Ti.prototype.peek=function(){let n=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(n),t};Ti.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let n=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?n=[this.lexer.engine.tokens.values[this.token],n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:n=[null,n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(n),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};Ti.prototype.is=function(n){return Array.isArray(n)?n.indexOf(this.token)!==-1:this.entries[n].has(this.token)};[hd(),ud(),fd(),pd(),md(),gd(),xd(),vd(),Cd(),bd(),Sd(),Ld(),Dd(),wd(),Bd(),Md()].forEach(function(n){for(let t in n){if(Object.prototype.hasOwnProperty.call(Ti.prototype,t))throw new Error("Function "+t+" is already defined - collision");Ti.prototype[t]=n[t]}});Hd.exports=Ti});var qd=H((V1,Gd)=>{"use strict";var YA={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE",239:"T_ENUM",240:"T_READ_ONLY",241:"T_NAME_RELATIVE",242:"T_NAME_QUALIFIED",243:"T_NAME_FULLY_QUALIFIED"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243}};Gd.exports=Object.freeze(YA)});var Yd=H((G1,Wd)=>{"use strict";var QA=function(n,t,e){this.source=n,this.start=t,this.end=e};Wd.exports=QA});var ii=H((q1,Qd)=>{"use strict";var Er=function(t,e,s){this.kind=t,e&&(this.leadingComments=e),s&&(this.loc=s)};Er.prototype.setTrailingComments=function(n){this.trailingComments=n};Er.prototype.destroy=function(n){if(!n)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(n.leadingComments?n.leadingComments=Array.concat(this.leadingComments,n.leadingComments):n.leadingComments=this.leadingComments),this.trailingComments&&(n.trailingComments?n.trailingComments=Array.concat(this.trailingComments,n.trailingComments):n.trailingComments=this.trailingComments),n};Er.prototype.includeToken=function(n){return this.loc&&(this.loc.end&&(this.loc.end.line=n.lexer.yylloc.last_line,this.loc.end.column=n.lexer.yylloc.last_column,this.loc.end.offset=n.lexer.offset),n.ast.withSource&&(this.loc.source=n.lexer._input.substring(this.loc.start.offset,n.lexer.offset))),this};Er.extends=function(n,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=n,t};Qd.exports=Er});var ge=H((W1,zd)=>{"use strict";var jd=ii(),Kd="expression";zd.exports=jd.extends(Kd,function(t,e,s){jd.apply(this,[t||Kd,e,s])})});var Zd=H((Y1,Xd)=>{"use strict";var $d=ge(),Jd="array";Xd.exports=$d.extends(Jd,function(t,e,s,o){$d.apply(this,[Jd,s,o]),this.items=e,this.shortForm=t})});var np=H((Q1,ip)=>{"use strict";var tp=ge(),ep="arrowfunc";ip.exports=tp.extends(ep,function(t,e,s,o,h,c,u,f){tp.apply(this,[ep,u,f]),this.arguments=t,this.byref=e,this.body=s,this.type=o,this.nullable=h,this.isStatic=c||!1})});var ap=H((j1,op)=>{"use strict";var sp=ge(),rp="assign";op.exports=sp.extends(rp,function(t,e,s,o,h){sp.apply(this,[rp,o,h]),this.left=t,this.right=e,this.operator=s})});var cp=H((K1,up)=>{"use strict";var hp=ge(),lp="assignref";up.exports=hp.extends(lp,function(t,e,s,o){hp.apply(this,[lp,s,o]),this.left=t,this.right=e})});var _p=H((z1,pp)=>{"use strict";var fp=ii(),dp="attribute";pp.exports=fp.extends(dp,function(t,e,s,o){fp.apply(this,[dp,s,o]),this.name=t,this.args=e})});var kp=H(($1,gp)=>{"use strict";var mp=ii(),Tp="attrgroup";gp.exports=mp.extends(Tp,function(t,e,s){mp.apply(this,[Tp,e,s]),this.attrs=t||[]})});var Ns=H((J1,vp)=>{"use strict";var xp=ge(),Ep="operation";vp.exports=xp.extends(Ep,function(t,e,s){xp.apply(this,[t||Ep,e,s])})});var bp=H((X1,Np)=>{"use strict";var yp=Ns(),Cp="bin";Np.exports=yp.extends(Cp,function(t,e,s,o,h){yp.apply(this,[Cp,o,h]),this.type=t,this.left=e,this.right=s})});var ye=H((Z1,Sp)=>{"use strict";var Ap=ii(),Ip="statement";Sp.exports=Ap.extends(Ip,function(t,e,s){Ap.apply(this,[t||Ip,e,s])})});var vr=H((tP,Pp)=>{"use strict";var Op=ye(),Lp="block";Pp.exports=Op.extends(Lp,function(t,e,s,o){Op.apply(this,[t||Lp,s,o]),this.children=e.filter(Boolean)})});var qn=H((eP,wp)=>{"use strict";var Dp=ge(),Rp="literal";wp.exports=Dp.extends(Rp,function(t,e,s,o,h){Dp.apply(this,[t||Rp,o,h]),this.value=e,s&&(this.raw=s)})});var Mp=H((iP,Up)=>{"use strict";var Fp=qn(),Bp="boolean";Up.exports=Fp.extends(Bp,function(t,e,s,o){Fp.apply(this,[Bp,t,e,s,o])})});var qp=H((nP,Gp)=>{"use strict";var Hp=ye(),Vp="break";Gp.exports=Hp.extends(Vp,function(t,e,s){Hp.apply(this,[Vp,e,s]),this.level=t})});var jp=H((sP,Qp)=>{"use strict";var Wp=ge(),Yp="byref";Qp.exports=Wp.extends(Yp,function(t,e,s){Wp.apply(this,[Yp,e,s]),this.what=t})});var Jp=H((rP,$p)=>{"use strict";var Kp=ge(),zp="call";$p.exports=Kp.extends(zp,function(t,e,s,o){Kp.apply(this,[zp,s,o]),this.what=t,this.arguments=e})});var e_=H((oP,t_)=>{"use strict";var Xp=ye(),Zp="case";t_.exports=Xp.extends(Zp,function(t,e,s,o){Xp.apply(this,[Zp,s,o]),this.test=t,this.body=e})});var r_=H((aP,s_)=>{"use strict";var i_=Ns(),n_="cast";s_.exports=i_.extends(n_,function(t,e,s,o,h){i_.apply(this,[n_,o,h]),this.type=t,this.raw=e,this.expr=s})});var l_=H((hP,h_)=>{"use strict";var o_=ye(),a_="catch";h_.exports=o_.extends(a_,function(t,e,s,o,h){o_.apply(this,[a_,o,h]),this.body=t,this.what=e,this.variable=s})});var On=H((lP,d_)=>{"use strict";var u_=ye(),c_="declaration",jA="",KA="public",zA="protected",$A="private",f_=u_.extends(c_,function(t,e,s,o){u_.apply(this,[t||c_,s,o]),this.name=e});f_.prototype.parseFlags=function(n){this.isAbstract=n[2]===1,this.isFinal=n[2]===2,this.kind!=="class"&&(n[0]===-1?this.visibility=jA:n[0]===null?this.visibility=null:n[0]===0?this.visibility=KA:n[0]===1?this.visibility=zA:n[0]===2&&(this.visibility=$A),this.isStatic=n[1]===1)};d_.exports=f_});var T_=H((uP,m_)=>{"use strict";var p_=On(),__="class";m_.exports=p_.extends(__,function(t,e,s,o,h,c,u){p_.apply(this,[__,t,c,u]),this.isAnonymous=!t,this.extends=e,this.implements=s,this.body=o,this.attrGroups=[],this.parseFlags(h)})});var ch=H((cP,x_)=>{"use strict";var g_=ye(),k_="constantstatement";x_.exports=g_.extends(k_,function(t,e,s,o){g_.apply(this,[t||k_,s,o]),this.constants=e})});var N_=H((fP,C_)=>{"use strict";var E_=ch(),v_="classconstant",JA="",XA="public",ZA="protected",tI="private",y_=E_.extends(v_,function(t,e,s,o,h,c){E_.apply(this,[t||v_,e,h,c]),this.parseFlags(s),this.attrGroups=o});y_.prototype.parseFlags=function(n){n[0]===-1?this.visibility=JA:n[0]===null?this.visibility=null:n[0]===0?this.visibility=XA:n[0]===1?this.visibility=ZA:n[0]===2&&(this.visibility=tI)};C_.exports=y_});var S_=H((dP,I_)=>{"use strict";var b_=ge(),A_="clone";I_.exports=b_.extends(A_,function(t,e,s){b_.apply(this,[A_,e,s]),this.what=t})});var D_=H((pP,P_)=>{"use strict";var O_=ge(),L_="closure";P_.exports=O_.extends(L_,function(t,e,s,o,h,c,u,f){O_.apply(this,[L_,u,f]),this.uses=s,this.arguments=t,this.byref=e,this.type=o,this.nullable=h,this.isStatic=c||!1,this.body=null,this.attrGroups=[]})});var Yo=H((_P,w_)=>{"use strict";var R_=ii();w_.exports=R_.extends("comment",function(t,e,s,o){R_.apply(this,[t,s,o]),this.value=e})});var M_=H((mP,U_)=>{"use strict";var F_=Yo(),B_="commentblock";U_.exports=F_.extends(B_,function(t,e,s){F_.apply(this,[B_,t,e,s])})});var q_=H((TP,G_)=>{"use strict";var H_=Yo(),V_="commentline";G_.exports=H_.extends(V_,function(t,e,s){H_.apply(this,[V_,t,e,s])})});var j_=H((gP,Q_)=>{"use strict";var W_=ii(),Y_="constant";Q_.exports=W_.extends(Y_,function(t,e,s,o){W_.apply(this,[Y_,s,o]),this.name=t,this.value=e})});var J_=H((kP,$_)=>{"use strict";var K_=ye(),z_="continue";$_.exports=K_.extends(z_,function(t,e,s){K_.apply(this,[z_,e,s]),this.level=t})});var em=H((xP,tm)=>{"use strict";var X_=vr(),Z_="declare",Qo=X_.extends(Z_,function(t,e,s,o,h){X_.apply(this,[Z_,e,o,h]),this.directives=t,this.mode=s});Qo.MODE_SHORT="short";Qo.MODE_BLOCK="block";Qo.MODE_NONE="none";tm.exports=Qo});var rm=H((EP,sm)=>{"use strict";var im=ii(),nm="declaredirective";sm.exports=im.extends(nm,function(t,e,s,o){im.apply(this,[nm,s,o]),this.key=t,this.value=e})});var lm=H((vP,hm)=>{"use strict";var om=ye(),am="do";hm.exports=om.extends(am,function(t,e,s,o){om.apply(this,[am,s,o]),this.test=t,this.body=e})});var dm=H((yP,fm)=>{"use strict";var um=ye(),cm="echo";fm.exports=um.extends(cm,function(t,e,s,o){um.apply(this,[cm,s,o]),this.shortForm=e,this.expressions=t})});var Tm=H((CP,mm)=>{"use strict";var pm=ge(),_m="empty";mm.exports=pm.extends(_m,function(t,e,s){pm.apply(this,[_m,e,s]),this.expression=t})});var Em=H((NP,xm)=>{"use strict";var gm=qn(),km="encapsed",yr=gm.extends(km,function(t,e,s,o,h){gm.apply(this,[km,t,e,o,h]),this.type=s});yr.TYPE_STRING="string";yr.TYPE_SHELL="shell";yr.TYPE_HEREDOC="heredoc";yr.TYPE_OFFSET="offset";xm.exports=yr});var Nm=H((bP,Cm)=>{"use strict";var vm=ge(),ym="encapsedpart";Cm.exports=vm.extends(ym,function(t,e,s,o,h){vm.apply(this,[ym,o,h]),this.expression=t,this.syntax=e,this.curly=s})});var Sm=H((AP,Im)=>{"use strict";var bm=ge(),Am="entry";Im.exports=bm.extends(Am,function(t,e,s,o,h,c){bm.apply(this,[Am,h,c]),this.key=t,this.value=e,this.byRef=s,this.unpack=o})});var Dm=H((IP,Pm)=>{"use strict";var Om=On(),Lm="enum";Pm.exports=Om.extends(Lm,function(t,e,s,o,h,c){Om.apply(this,[Lm,t,h,c]),this.valueType=e,this.implements=s,this.body=o,this.attrGroups=[]})});var Bm=H((SP,Fm)=>{"use strict";var Rm=ii(),wm="enumcase";Fm.exports=Rm.extends(wm,function(t,e,s,o){Rm.apply(this,[wm,s,o]),this.name=t,this.value=e})});var Vm=H((OP,Hm)=>{"use strict";var Um=ii(),Mm="error";Hm.exports=Um.extends(Mm,function(t,e,s,o,h,c){Um.apply(this,[Mm,h,c]),this.message=t,this.token=e,this.line=s,this.expected=o})});var Ym=H((LP,Wm)=>{"use strict";var Gm=ge(),qm="eval";Wm.exports=Gm.extends(qm,function(t,e,s){Gm.apply(this,[qm,e,s]),this.source=t})});var zm=H((PP,Km)=>{"use strict";var Qm=ge(),jm="exit";Km.exports=Qm.extends(jm,function(t,e,s,o){Qm.apply(this,[jm,s,o]),this.expression=t,this.useDie=e})});var Zm=H((DP,Xm)=>{"use strict";var $m=ye(),Jm="expressionstatement";Xm.exports=$m.extends(Jm,function(t,e,s){$m.apply(this,[Jm,e,s]),this.expression=t})});var nT=H((RP,iT)=>{"use strict";var tT=ye(),eT="for";iT.exports=tT.extends(eT,function(t,e,s,o,h,c,u){tT.apply(this,[eT,c,u]),this.init=t,this.test=e,this.increment=s,this.shortForm=h,this.body=o})});var aT=H((wP,oT)=>{"use strict";var sT=ye(),rT="foreach";oT.exports=sT.extends(rT,function(t,e,s,o,h,c,u){sT.apply(this,[rT,c,u]),this.source=t,this.key=e,this.value=s,this.shortForm=h,this.body=o})});var fh=H((FP,uT)=>{"use strict";var hT=On(),lT="function";uT.exports=hT.extends(lT,function(t,e,s,o,h,c,u){hT.apply(this,[lT,t,c,u]),this.arguments=e,this.byref=s,this.type=o,this.nullable=h,this.body=null,this.attrGroups=[]})});var pT=H((BP,dT)=>{"use strict";var cT=ye(),fT="global";dT.exports=cT.extends(fT,function(t,e,s){cT.apply(this,[fT,e,s]),this.items=t})});var gT=H((UP,TT)=>{"use strict";var _T=ye(),mT="goto";TT.exports=_T.extends(mT,function(t,e,s){_T.apply(this,[mT,e,s]),this.label=t})});var vT=H((MP,ET)=>{"use strict";var kT=ye(),xT="halt";ET.exports=kT.extends(xT,function(t,e,s){kT.apply(this,[xT,e,s]),this.after=t})});var bT=H((HP,NT)=>{"use strict";var yT=ii(),CT="identifier",eI=yT.extends(CT,function(t,e,s){yT.apply(this,[CT,e,s]),this.name=t});NT.exports=eI});var OT=H((VP,ST)=>{"use strict";var AT=ye(),IT="if";ST.exports=AT.extends(IT,function(t,e,s,o,h,c){AT.apply(this,[IT,h,c]),this.test=t,this.body=e,this.alternate=s,this.shortForm=o})});var RT=H((GP,DT)=>{"use strict";var LT=ge(),PT="include";DT.exports=LT.extends(PT,function(t,e,s,o,h){LT.apply(this,[PT,o,h]),this.once=t,this.require=e,this.target=s})});var UT=H((qP,BT)=>{"use strict";var wT=qn(),FT="inline";BT.exports=wT.extends(FT,function(t,e,s,o){wT.apply(this,[FT,t,e,s,o])})});var GT=H((WP,VT)=>{"use strict";var MT=On(),HT="interface";VT.exports=MT.extends(HT,function(t,e,s,o,h,c){MT.apply(this,[HT,t,h,c]),this.extends=e,this.body=s,this.attrGroups=o})});var QT=H((YP,YT)=>{"use strict";var qT=On(),WT="intersectiontype";YT.exports=qT.extends(WT,function(t,e,s){qT.apply(this,[WT,null,e,s]),this.types=t})});var $T=H((QP,zT)=>{"use strict";var jT=ge(),KT="isset";zT.exports=jT.extends(KT,function(t,e,s){jT.apply(this,[KT,e,s]),this.variables=t})});var tg=H((jP,ZT)=>{"use strict";var JT=ye(),XT="label";ZT.exports=JT.extends(XT,function(t,e,s){JT.apply(this,[XT,e,s]),this.name=t})});var sg=H((KP,ng)=>{"use strict";var eg=ge(),ig="list";ng.exports=eg.extends(ig,function(t,e,s,o){eg.apply(this,[ig,s,o]),this.items=t,this.shortForm=e})});var $s=H((zP,ag)=>{"use strict";var rg=ge(),og="lookup";ag.exports=rg.extends(og,function(t,e,s,o,h){rg.apply(this,[t||og,o,h]),this.what=e,this.offset=s})});var cg=H(($P,ug)=>{"use strict";var hg=qn(),lg="magic";ug.exports=hg.extends(lg,function(t,e,s,o){hg.apply(this,[lg,t,e,s,o])})});var _g=H((JP,pg)=>{"use strict";var fg=ge(),dg="match";pg.exports=fg.extends(dg,function(t,e,s,o){fg.apply(this,[dg,s,o]),this.cond=t,this.arms=e})});var kg=H((XP,gg)=>{"use strict";var mg=ge(),Tg="matcharm";gg.exports=mg.extends(Tg,function(t,e,s,o){mg.apply(this,[Tg,s,o]),this.conds=t,this.body=e})});var yg=H((ZP,vg)=>{"use strict";var xg=fh(),Eg="method";vg.exports=xg.extends(Eg,function(){xg.apply(this,arguments),this.kind=Eg})});var bs=H((tD,bg)=>{"use strict";var Cg=ii(),Ng="reference",iI=Cg.extends(Ng,function(t,e,s){Cg.apply(this,[t||Ng,e,s])});bg.exports=iI});var Og=H((eD,Sg)=>{"use strict";var Ag=bs(),Ig="name",Cr=Ag.extends(Ig,function(t,e,s,o){Ag.apply(this,[Ig,s,o]),this.name=t.replace(/\\$/,""),this.resolution=e});Cr.UNQUALIFIED_NAME="uqn";Cr.QUALIFIED_NAME="qn";Cr.FULL_QUALIFIED_NAME="fqn";Cr.RELATIVE_NAME="rn";Sg.exports=Cr});var Rg=H((iD,Dg)=>{"use strict";var Lg=vr(),Pg="namespace";Dg.exports=Lg.extends(Pg,function(t,e,s,o,h){Lg.apply(this,[Pg,e,o,h]),this.name=t,this.withBrackets=s||!1})});var Ug=H((nD,Bg)=>{"use strict";var wg=ge(),Fg="namedargument";Bg.exports=wg.extends(Fg,function(t,e,s,o){wg.apply(this,[Fg,s,o]),this.name=t,this.value=e})});var Gg=H((sD,Vg)=>{"use strict";var Mg=ge(),Hg="new";Vg.exports=Mg.extends(Hg,function(t,e,s,o){Mg.apply(this,[Hg,s,o]),this.what=t,this.arguments=e})});var Qg=H((rD,Yg)=>{"use strict";var qg=ii(),Wg="noop";Yg.exports=qg.extends(Wg,function(t,e){qg.apply(this,[Wg,t,e])})});var $g=H((oD,zg)=>{"use strict";var jg=qn(),Kg="nowdoc";zg.exports=jg.extends(Kg,function(t,e,s,o,h){jg.apply(this,[Kg,t,e,o,h]),this.label=s})});var tk=H((aD,Zg)=>{"use strict";var Jg=ii(),Xg="nullkeyword";Zg.exports=Jg.extends(Xg,function(t,e,s){Jg.apply(this,[Xg,e,s]),this.raw=t})});var sk=H((hD,nk)=>{"use strict";var ek=$s(),ik="nullsafepropertylookup";nk.exports=ek.extends(ik,function(t,e,s,o){ek.apply(this,[ik,t,e,s,o])})});var hk=H((lD,ak)=>{"use strict";var rk=qn(),ok="number";ak.exports=rk.extends(ok,function(t,e,s,o){rk.apply(this,[ok,t,e,s,o])})});var fk=H((uD,ck)=>{"use strict";var lk=$s(),uk="offsetlookup";ck.exports=lk.extends(uk,function(t,e,s,o){lk.apply(this,[uk,t,e,s,o])})});var mk=H((cD,_k)=>{"use strict";var dk=On(),pk="parameter";_k.exports=dk.extends(pk,function(t,e,s,o,h,c,u,f,T,k){dk.apply(this,[pk,t,T,k]),this.value=s,this.type=e,this.byref=o,this.variadic=h,this.readonly=c,this.nullable=u,this.flags=f||0,this.attrGroups=[]})});var xk=H((fD,kk)=>{"use strict";var Tk=bs(),gk="parentreference",nI=Tk.extends(gk,function(t,e,s){Tk.apply(this,[gk,e,s]),this.raw=t});kk.exports=nI});var Ck=H((dD,yk)=>{"use strict";var Ek=Ns(),vk="post";yk.exports=Ek.extends(vk,function(t,e,s,o){Ek.apply(this,[vk,s,o]),this.type=t,this.what=e})});var Ik=H((pD,Ak)=>{"use strict";var Nk=Ns(),bk="pre";Ak.exports=Nk.extends(bk,function(t,e,s,o){Nk.apply(this,[bk,s,o]),this.type=t,this.what=e})});var Pk=H((_D,Lk)=>{"use strict";var Sk=ge(),Ok="print";Lk.exports=Sk.extends(Ok,function(t,e,s){Sk.apply(this,[Ok,e,s]),this.expression=t})});var Fk=H((mD,wk)=>{"use strict";var Dk=vr(),Rk="program";wk.exports=Dk.extends(Rk,function(t,e,s,o,h,c){Dk.apply(this,[Rk,t,h,c]),this.errors=e,s&&(this.comments=s),o&&(this.tokens=o)})});var Hk=H((TD,Mk)=>{"use strict";var Bk=ye(),Uk="property";Mk.exports=Bk.extends(Uk,function(t,e,s,o,h,c,u,f){Bk.apply(this,[Uk,u,f]),this.name=t,this.value=e,this.readonly=s,this.nullable=o,this.type=h,this.attrGroups=c})});var Wk=H((gD,qk)=>{"use strict";var Vk=$s(),Gk="propertylookup";qk.exports=Vk.extends(Gk,function(t,e,s,o){Vk.apply(this,[Gk,t,e,s,o])})});var zk=H((kD,Kk)=>{"use strict";var Yk=ye(),Qk="propertystatement",sI="",rI="public",oI="protected",aI="private",jk=Yk.extends(Qk,function(t,e,s,o,h){Yk.apply(this,[Qk,o,h]),this.properties=e,this.parseFlags(s)});jk.prototype.parseFlags=function(n){n[0]===-1?this.visibility=sI:n[0]===null?this.visibility=null:n[0]===0?this.visibility=rI:n[0]===1?this.visibility=oI:n[0]===2&&(this.visibility=aI),this.isStatic=n[1]===1};Kk.exports=jk});var Zk=H((xD,Xk)=>{"use strict";var $k=ge(),Jk="retif";Xk.exports=$k.extends(Jk,function(t,e,s,o,h){$k.apply(this,[Jk,o,h]),this.test=t,this.trueExpr=e,this.falseExpr=s})});var nx=H((ED,ix)=>{"use strict";var tx=ye(),ex="return";ix.exports=tx.extends(ex,function(t,e,s){tx.apply(this,[ex,e,s]),this.expr=t})});var ax=H((vD,ox)=>{"use strict";var sx=bs(),rx="selfreference",hI=sx.extends(rx,function(t,e,s){sx.apply(this,[rx,e,s]),this.raw=t});ox.exports=hI});var cx=H((yD,ux)=>{"use strict";var hx=ge(),lx="silent";ux.exports=hx.extends(lx,function(t,e,s){hx.apply(this,[lx,e,s]),this.expr=t})});var _x=H((CD,px)=>{"use strict";var fx=ye(),dx="static";px.exports=fx.extends(dx,function(t,e,s){fx.apply(this,[dx,e,s]),this.variables=t})});var kx=H((ND,gx)=>{"use strict";var mx=ii(),Tx="staticvariable";gx.exports=mx.extends(Tx,function(t,e,s,o){mx.apply(this,[Tx,s,o]),this.variable=t,this.defaultValue=e})});var yx=H((bD,vx)=>{"use strict";var xx=$s(),Ex="staticlookup";vx.exports=xx.extends(Ex,function(t,e,s,o){xx.apply(this,[Ex,t,e,s,o])})});var Ax=H((AD,bx)=>{"use strict";var Cx=bs(),Nx="staticreference",lI=Cx.extends(Nx,function(t,e,s){Cx.apply(this,[Nx,e,s]),this.raw=t});bx.exports=lI});var Lx=H((ID,Ox)=>{"use strict";var Ix=qn(),Sx="string";Ox.exports=Ix.extends(Sx,function(t,e,s,o,h,c){Ix.apply(this,[Sx,e,o,h,c]),this.unicode=s,this.isDoubleQuote=t})});var wx=H((SD,Rx)=>{"use strict";var Px=ye(),Dx="switch";Rx.exports=Px.extends(Dx,function(t,e,s,o,h){Px.apply(this,[Dx,o,h]),this.test=t,this.body=e,this.shortForm=s})});var Mx=H((OD,Ux)=>{"use strict";var Fx=ye(),Bx="throw";Ux.exports=Fx.extends(Bx,function(t,e,s){Fx.apply(this,[Bx,e,s]),this.what=t})});var qx=H((LD,Gx)=>{"use strict";var Hx=On(),Vx="trait";Gx.exports=Hx.extends(Vx,function(t,e,s,o){Hx.apply(this,[Vx,t,s,o]),this.body=e})});var jx=H((PD,Qx)=>{"use strict";var Wx=ii(),Yx="traitalias",uI="",cI="public",fI="protected",dI="private";Qx.exports=Wx.extends(Yx,function(t,e,s,o,h,c){Wx.apply(this,[Yx,h,c]),this.trait=t,this.method=e,this.as=s,this.visibility=uI,o&&(o[0]===0?this.visibility=cI:o[0]===1?this.visibility=fI:o[0]===2&&(this.visibility=dI))})});var Jx=H((DD,$x)=>{"use strict";var Kx=ii(),zx="traitprecedence";$x.exports=Kx.extends(zx,function(t,e,s,o,h){Kx.apply(this,[zx,o,h]),this.trait=t,this.method=e,this.instead=s})});var eE=H((RD,tE)=>{"use strict";var Xx=ii(),Zx="traituse";tE.exports=Xx.extends(Zx,function(t,e,s,o){Xx.apply(this,[Zx,s,o]),this.traits=t,this.adaptations=e})});var rE=H((wD,sE)=>{"use strict";var iE=ye(),nE="try";sE.exports=iE.extends(nE,function(t,e,s,o,h){iE.apply(this,[nE,o,h]),this.body=t,this.catches=e,this.always=s})});var uE=H((FD,lE)=>{"use strict";var oE=bs(),aE="typereference",hE=oE.extends(aE,function(t,e,s,o){oE.apply(this,[aE,s,o]),this.name=t,this.raw=e});hE.types=["int","float","string","bool","object","array","callable","iterable","void","static"];lE.exports=hE});var pE=H((BD,dE)=>{"use strict";var cE=Ns(),fE="unary";dE.exports=cE.extends(fE,function(t,e,s,o){cE.apply(this,[fE,s,o]),this.type=t,this.what=e})});var gE=H((UD,TE)=>{"use strict";var _E=On(),mE="uniontype";TE.exports=_E.extends(mE,function(t,e,s){_E.apply(this,[mE,null,e,s]),this.types=t})});var vE=H((MD,EE)=>{"use strict";var kE=ye(),xE="unset";EE.exports=kE.extends(xE,function(t,e,s){kE.apply(this,[xE,e,s]),this.variables=t})});var bE=H((HD,NE)=>{"use strict";var yE=ye(),CE="usegroup";NE.exports=yE.extends(CE,function(t,e,s,o,h){yE.apply(this,[CE,o,h]),this.name=t,this.type=e,this.items=s})});var OE=H((VD,SE)=>{"use strict";var AE=ye(),IE="useitem",dh=AE.extends(IE,function(t,e,s,o,h){AE.apply(this,[IE,o,h]),this.name=t,this.alias=e,this.type=s});dh.TYPE_CONST="const";dh.TYPE_FUNCTION="function";SE.exports=dh});var RE=H((GD,DE)=>{"use strict";var LE=ge(),PE="variable";DE.exports=LE.extends(PE,function(t,e,s,o){LE.apply(this,[PE,s,o]),this.name=t,this.curly=e||!1})});var UE=H((qD,BE)=>{"use strict";var wE=ge(),FE="variadic";BE.exports=wE.extends(FE,function(t,e,s){wE.apply(this,[FE,e,s]),this.what=t})});var GE=H((WD,VE)=>{"use strict";var ME=ii(),HE="variadicplaceholder";VE.exports=ME.extends(HE,function(t,e){ME.apply(this,[HE,t,e])})});var QE=H((YD,YE)=>{"use strict";var qE=ye(),WE="while";YE.exports=qE.extends(WE,function(t,e,s,o,h){qE.apply(this,[WE,o,h]),this.test=t,this.body=e,this.shortForm=s})});var $E=H((QD,zE)=>{"use strict";var jE=ge(),KE="yield";zE.exports=jE.extends(KE,function(t,e,s,o){jE.apply(this,[KE,s,o]),this.value=t,this.key=e})});var tv=H((jD,ZE)=>{"use strict";var JE=ge(),XE="yieldfrom";ZE.exports=JE.extends(XE,function(t,e,s){JE.apply(this,[XE,e,s]),this.value=t})});var iv=H((KD,ev)=>{"use strict";var pI=Yd(),_I=hh(),Ni=function(n,t){this.withPositions=n,this.withSource=t};Ni.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,t){n.forEach(function(e){Ni.precedence[e]=t+1})});Ni.prototype.isRightAssociative=function(n){return n==="**"||n==="??"};Ni.prototype.swapLocations=function(n,t,e,s){this.withPositions&&(n.loc.start=t.loc.start,n.loc.end=e.loc.end,this.withSource&&(n.loc.source=s.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))};Ni.prototype.resolveLocations=function(n,t,e,s){this.withPositions&&(n.loc.start.offset>t.loc.start.offset&&(n.loc.start=t.loc.start),n.loc.end.offset<e.loc.end.offset&&(n.loc.end=e.loc.end),this.withSource&&(n.loc.source=s.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))};Ni.prototype.resolvePrecedence=function(n,t){let e,s,o;return n.kind==="call"?this.resolveLocations(n,n.what,n,t):n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"&&n.offset?this.resolveLocations(n,n.what,n.offset,t):n.kind==="bin"?n.right&&!n.right.parenthesizedExpression&&(n.right.kind==="bin"?(s=Ni.precedence[n.type],o=Ni.precedence[n.right.type],s&&o&&o<=s&&(n.type!==n.right.type||!this.isRightAssociative(n.type))&&(e=n.right,n.right=n.right.left,this.swapLocations(n,n.left,n.right,t),e.left=this.resolvePrecedence(n,t),this.swapLocations(e,e.left,e.right,t),n=e)):n.right.kind==="retif"&&(s=Ni.precedence[n.type],o=Ni.precedence["?"],s&&o&&o<=s&&(e=n.right,n.right=n.right.test,this.swapLocations(n,n.left,n.right,t),e.test=this.resolvePrecedence(n,t),this.swapLocations(e,e.test,e.falseExpr,t),n=e))):(n.kind==="silent"||n.kind==="cast")&&n.expr&&!n.expr.parenthesizedExpression?n.expr.kind==="bin"?(e=n.expr,n.expr=n.expr.left,this.swapLocations(n,n,n.expr,t),e.left=this.resolvePrecedence(n,t),this.swapLocations(e,e.left,e.right,t),n=e):n.expr.kind==="retif"&&(e=n.expr,n.expr=n.expr.test,this.swapLocations(n,n,n.expr,t),e.test=this.resolvePrecedence(n,t),this.swapLocations(e,e.test,e.falseExpr,t),n=e):n.kind==="unary"?n.what&&!n.what.parenthesizedExpression&&(n.what.kind==="bin"?(e=n.what,n.what=n.what.left,this.swapLocations(n,n,n.what,t),e.left=this.resolvePrecedence(n,t),this.swapLocations(e,e.left,e.right,t),n=e):n.what.kind==="retif"&&(e=n.what,n.what=n.what.test,this.swapLocations(n,n,n.what,t),e.test=this.resolvePrecedence(n,t),this.swapLocations(e,e.test,e.falseExpr,t),n=e)):n.kind==="retif"?n.falseExpr&&n.falseExpr.kind==="retif"&&!n.falseExpr.parenthesizedExpression&&(e=n.falseExpr,n.falseExpr=e.test,this.swapLocations(n,n.test,n.falseExpr,t),e.test=this.resolvePrecedence(n,t),this.swapLocations(e,e.test,e.falseExpr,t),n=e):n.kind==="assign"?n.right&&n.right.kind==="bin"&&!n.right.parenthesizedExpression&&(s=Ni.precedence["="],o=Ni.precedence[n.right.type],s&&o&&o<s&&(e=n.right,n.right=n.right.left,e.left=n,this.swapLocations(e,e.left,n.right,t),n=e)):n.kind==="expressionstatement"&&this.swapLocations(n,n.expression,n,t),n};Ni.prototype.prepare=function(n,t,e){let s=null;(this.withPositions||this.withSource)&&(s=e.position());let o=this,h=function(){let c=null,u=Array.prototype.slice.call(arguments);if(u.push(t),o.withPositions||o.withSource){let k=null;o.withSource&&(k=e.lexer._input.substring(s.offset,e.prev[2])),c=new pI(k,s,new _I(e.prev[0],e.prev[1],e.prev[2])),u.push(c)}n||(n=u.shift());let f=o[n];if(typeof f!="function")throw new Error('Undefined node "'+n+'"');let T=Object.create(f.prototype);return f.apply(T,u),h.instance=T,h.trailingComments&&(T.trailingComments=h.trailingComments),typeof h.postBuild=="function"&&h.postBuild(T),e.debug&&delete o.stack[h.stackUid],o.resolvePrecedence(T,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:s,stack:new Error().stack.split(`
`).slice(3,5)},h.stackUid=this.stackUid),h.setTrailingComments=function(c){h.instance?h.instance.setTrailingComments(c):h.trailingComments=c},h.destroy=function(c){t&&(c?c.leadingComments?c.leadingComments=t.concat(c.leadingComments):c.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete o.stack[h.stackUid]},h};Ni.prototype.checkNodes=function(){let n=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,n.push(this.stack[t]));return this.stack={},n};[Zd(),np(),ap(),cp(),_p(),kp(),bp(),vr(),Mp(),qp(),jp(),Jp(),e_(),r_(),l_(),T_(),N_(),S_(),D_(),Yo(),M_(),q_(),j_(),ch(),J_(),On(),em(),rm(),lm(),dm(),Tm(),Em(),Nm(),Sm(),Dm(),Bm(),Vm(),Ym(),zm(),ge(),Zm(),nT(),aT(),fh(),pT(),gT(),vT(),bT(),OT(),RT(),UT(),GT(),QT(),$T(),tg(),sg(),qn(),$s(),cg(),_g(),kg(),yg(),Og(),Rg(),Ug(),Gg(),ii(),Qg(),$g(),tk(),sk(),hk(),fk(),Ns(),mk(),xk(),Ck(),Ik(),Pk(),Fk(),Hk(),Wk(),zk(),bs(),Zk(),nx(),ax(),cx(),ye(),_x(),kx(),yx(),Ax(),Lx(),wx(),Mx(),qx(),jx(),Jx(),eE(),rE(),uE(),pE(),gE(),vE(),bE(),OE(),RE(),UE(),GE(),QE(),$E(),tv()].forEach(function(n){Ni.prototype[n.kind]=n});ev.exports=Ni});var av=H((zD,Wn)=>{"use strict";var nv=rd(),sv=Vd(),rv=qd(),ov=iv();function ph(n,t){let e=Object.keys(n),s=e.length;for(;s--;){let o=e[s],h=n[o];h===null?delete t[o]:typeof h=="function"?t[o]=h.bind(t):Array.isArray(h)?t[o]=Array.isArray(t[o])?t[o].concat(h):h:typeof h=="object"?t[o]=typeof t[o]=="object"?ph(h,t[o]):h:t[o]=h}return t}var qi=function(n){if(typeof this=="function")return new this(n);if(this.tokens=rv,this.lexer=new nv(this),this.ast=new ov,this.parser=new sv(this.lexer,this.ast),n&&typeof n=="object"){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if(typeof n.parser.version=="string"){let t=n.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+n.parser.version);n.parser.version=t}else if(typeof n.parser.version!="number")throw new Error("Expecting a number for version");if(n.parser.version<500||n.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}ph(n,this),this.lexer.version=this.parser.version}},_h=function(n){return typeof n.write=="function"?n.toString():n};qi.create=function(n){return new qi(n)};qi.parseEval=function(n,t){return new qi(t).parseEval(n)};qi.prototype.parseEval=function(n){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,n=_h(n),this.parser.parse(n,"eval")};qi.parseCode=function(n,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new qi(e).parseCode(n,t)};qi.prototype.parseCode=function(n,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=_h(n),this.parser.parse(n,t)};qi.tokenGetAll=function(n,t){return new qi(t).tokenGetAll(n)};qi.prototype.tokenGetAll=function(n){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,n=_h(n);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(n);let s=this.lexer.lex()||t,o=[];for(;s!=t;){let h=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,s)&&(h=[e[s],h,this.lexer.yylloc.first_line]),o.push(h),s=this.lexer.lex()||t}return o};Wn.exports=qi;Wn.exports.tokens=rv;Wn.exports.lexer=nv;Wn.exports.AST=ov;Wn.exports.parser=sv;Wn.exports.combine=ph;Wn.exports.Engine=qi;Wn.exports.default=qi});var hv,jo,lv=Bt(()=>{"use strict";hv=es(av()),jo=class{constructor(){this.lastError=null}isValid(t,e=!0){let s=new hv.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?s.parseEval(t):s.parseCode(t,"test.php")}catch(o){return o instanceof SyntaxError&&(this.lastError=o),!1}return this.lastError=null,!0}getLastError(){return this.lastError}}});var Ko,uv=Bt(()=>{"use strict";Ko=class{static printError(t,e){var u,f;let s=t.message+`

`,o=(f=(u=t.node)==null?void 0:u.startPosition)==null?void 0:f.line,h=o;e.forEach((T,k)=>{h=k});let c=h.toString().length;return e.forEach((T,k)=>{let B=k.toString(),y="",N=0;N=c-B.length,o==k?y=" >"+"0".repeat(N)+B+"| ":y="  "+"0".repeat(N)+B+"| ",s+=y+T+`
`}),s}}});var zo,cv=Bt(()=>{"use strict";Vn();zo=class{constructor(){this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null}withTransformOptions(t){return this.transformOptions=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(De.fromText(t))}formatDocument(t){if(this.preFormatter!=null){let o=this.preFormatter(t);if(o!=null)return o}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let e=t.transform().toStructure(),s=this.htmlFormatter(e);return t.transform().fromStructure(s)}}});var $o,fv=Bt(()=>{"use strict";uv();cv();kr();$o=class extends zo{constructor(t,e){super(),Vo(t),this.withHtmlFormatter(Of).withPhpFormatter(Lf).withBlockPhpFormatter(Pf).withPhpTagFormatter(Df).withJsonFormatter(Sf).withTransformOptions(e).withPreFormatter(s=>{var o,h,c;if(s.errors.hasStructureErrors()){let u=s.errors.getFirstStructureError(),f=s.getLinesAround((c=(h=(o=u.node)==null?void 0:o.startPosition)==null?void 0:h.line)!=null?c:1),T=Ko.printError(u,f);throw new SyntaxError(T)}return null})}}});var Rf=H((lR,_v)=>{Vn();lv();ih();fv();kr();var dv,mh,pv,Th=null,mI={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(n,t,e){Vo(e),dv=e,Th=Nf(__dirname),mh=Th,pv=Th,mh.tabSize=If().tabWidth;let s=new De;return s.getParser().withParserOptions(pv).withPhpValidator(new jo),s.loadString(n)},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(n){let t=n.stack[0];return new $o(dv,mh).formatDocument(t)}}},defaultOptions:{tabWidth:4}};_v.exports=mI});module.exports=Rf();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
