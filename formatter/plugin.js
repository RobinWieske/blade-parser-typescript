"use strict";var LN=Object.create;var Jc=Object.defineProperty;var DN=Object.getOwnPropertyDescriptor;var RN=Object.getOwnPropertyNames;var wN=Object.getPrototypeOf,FN=Object.prototype.hasOwnProperty;var bt=(i,t)=>()=>(i&&(t=i(i=0)),t);var V=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var BN=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of RN(t))!FN.call(i,r)&&r!==e&&Jc(i,r,{get:()=>t[r],enumerable:!(s=DN(t,r))||s.enumerable});return i};var en=(i,t,e)=>(e=i!=null?LN(wN(i)):{},BN(t||!i||!i.__esModule?Jc(e,"default",{value:i,enumerable:!0}):e,i));function Xc(i){return(typeof i=="number"||typeof i=="string"&&MN.indexOf(i.slice(-1))===-1)&&i!==""&&!isNaN(i)}var MN,Zc=bt(()=>{"use strict";MN=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var Y,We=bt(()=>{"use strict";Zc();Y=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,s){return t.substr(e,s)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return Xc(t)}static substringCount(t,e){let s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(s,"gi"))||[]).length}static lastWord(t){let e=t.split(""),s=[];for(let r=e.length;r>=0&&e[r]!=" ";r--)s.push(e[r]);return s.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return Y.breakByNewLine(Y.normalizeLineEndings(t)).forEach(r=>{r.trim().length>0&&e.push(r)}),e.join(`
`)}static replaceAllInString(t,e,s){return t.replace(new RegExp(e,"g"),s)}static getTrimmedMatch(t,e,s){let r=t.exec(e);if(r==null||r.length<s)return null;let h=r[s].trim();return h.length==0?null:h}static assertMatchIs(t,e,s,r){let h=Y.getTrimmedMatch(t,e,s);return h!=null&&h==r}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=Y.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=Y.breakByNewLine(t);return e.length==0?"":e[0]}static collapse(t){let e=Y.breakByNewLine(t),s="";for(let r=0;r<e.length;r++){let h=e[r].trim();if(r+1<e.length){let u=e[r+1].trim();if(u.length>0&&Y.ctypePunct(u[0])){let l=u[0];s+=h,(l=="?"||l==":"||l=="&")&&(s+=" ")}else s+=h+" "}else s+=h}return s.trimRight()}static makeSlug(t){t<=2&&(t=7);let e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length;for(let h=0;h<t-1;h++)e+=s.charAt(Math.floor(Math.random()*r));return"B"+e+"B"}static replaceWithFillerExceptNewlines(t){return t.replace(/./g,s=>s===`
`?s:"P")}}});function $e(i){return i==null?!1:i=='"'||i=="'"}var In=bt(()=>{"use strict"});function bs(i){let t=i.getCurrent();for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=et.String_EscapeCharacter));i.incrementIndex());}function Ri(i){let t=i.getCurrent(),e=[];for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=et.String_EscapeCharacter));i.incrementIndex())e.push(i.getCurrent());return{value:e.join(""),endedOn:i.getCurrentIndex()}}var An=bt(()=>{"use strict";cn()});var hs,sh=bt(()=>{"use strict";We();In();An();hs=class{constructor(){this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.strings=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}static fromText(t){return new hs().remove(t)}getStrings(){return this.strings}remove(t){for(this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),$e(this.cur)){let s=Ri(this);if(this.strings.push(s.value),this.currentIndex=s.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}let e=[];for(let s=0;s<this.currentContent.length;s++){let r=this.currentContent[s];if(s==0&&r=="@"){e.push(r);continue}if(r!="."&&Y.ctypePunct(r))break;e.push(r)}return e.join("")}}});var oh=V(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});rh.default=HN;var UN=VN(require("crypto"));function VN(i){return i&&i.__esModule?i:{default:i}}var po=new Uint8Array(256),fo=po.length;function HN(){return fo>po.length-16&&(UN.default.randomFillSync(po),fo=0),po.slice(fo,fo+=16)}});var tf=V(_o=>{"use strict";Object.defineProperty(_o,"__esModule",{value:!0});_o.default=void 0;var WN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;_o.default=WN});var Tr=V(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.default=void 0;var qN=GN(tf());function GN(i){return i&&i.__esModule?i:{default:i}}function YN(i){return typeof i=="string"&&qN.default.test(i)}var jN=YN;mo.default=jN});var xr=V(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.default=void 0;var QN=zN(Tr());function zN(i){return i&&i.__esModule?i:{default:i}}var xi=[];for(let i=0;i<256;++i)xi.push((i+256).toString(16).substr(1));function KN(i,t=0){let e=(xi[i[t+0]]+xi[i[t+1]]+xi[i[t+2]]+xi[i[t+3]]+"-"+xi[i[t+4]]+xi[i[t+5]]+"-"+xi[i[t+6]]+xi[i[t+7]]+"-"+xi[i[t+8]]+xi[i[t+9]]+"-"+xi[i[t+10]]+xi[i[t+11]]+xi[i[t+12]]+xi[i[t+13]]+xi[i[t+14]]+xi[i[t+15]]).toLowerCase();if(!(0,QN.default)(e))throw TypeError("Stringified UUID is invalid");return e}var $N=KN;go.default=$N});var sf=V(To=>{"use strict";Object.defineProperty(To,"__esModule",{value:!0});To.default=void 0;var JN=nf(oh()),XN=nf(xr());function nf(i){return i&&i.__esModule?i:{default:i}}var ef,ah,hh=0,lh=0;function ZN(i,t,e){let s=t&&e||0,r=t||new Array(16);i=i||{};let h=i.node||ef,u=i.clockseq!==void 0?i.clockseq:ah;if(h==null||u==null){let v=i.random||(i.rng||JN.default)();h==null&&(h=ef=[v[0]|1,v[1],v[2],v[3],v[4],v[5]]),u==null&&(u=ah=(v[6]<<8|v[7])&16383)}let l=i.msecs!==void 0?i.msecs:Date.now(),f=i.nsecs!==void 0?i.nsecs:lh+1,_=l-hh+(f-lh)/1e4;if(_<0&&i.clockseq===void 0&&(u=u+1&16383),(_<0||l>hh)&&i.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");hh=l,lh=f,ah=u,l+=122192928e5;let m=((l&268435455)*1e4+f)%4294967296;r[s++]=m>>>24&255,r[s++]=m>>>16&255,r[s++]=m>>>8&255,r[s++]=m&255;let I=l/4294967296*1e4&268435455;r[s++]=I>>>8&255,r[s++]=I&255,r[s++]=I>>>24&15|16,r[s++]=I>>>16&255,r[s++]=u>>>8|128,r[s++]=u&255;for(let v=0;v<6;++v)r[s+v]=h[v];return t||(0,XN.default)(r)}var tI=ZN;To.default=tI});var uh=V(xo=>{"use strict";Object.defineProperty(xo,"__esModule",{value:!0});xo.default=void 0;var eI=iI(Tr());function iI(i){return i&&i.__esModule?i:{default:i}}function nI(i){if(!(0,eI.default)(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var sI=nI;xo.default=sI});var ch=V(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.default=hI;Cs.URL=Cs.DNS=void 0;var rI=rf(xr()),oI=rf(uh());function rf(i){return i&&i.__esModule?i:{default:i}}function aI(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}var of="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Cs.DNS=of;var af="6ba7b811-9dad-11d1-80b4-00c04fd430c8";Cs.URL=af;function hI(i,t,e){function s(r,h,u,l){if(typeof r=="string"&&(r=aI(r)),typeof h=="string"&&(h=(0,oI.default)(h)),h.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+r.length);if(f.set(h),f.set(r,h.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,u){l=l||0;for(let _=0;_<16;++_)u[l+_]=f[_];return u}return(0,rI.default)(f)}try{s.name=i}catch{}return s.DNS=of,s.URL=af,s}});var hf=V(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.default=void 0;var lI=uI(require("crypto"));function uI(i){return i&&i.__esModule?i:{default:i}}function cI(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),lI.default.createHash("md5").update(i).digest()}var fI=cI;ko.default=fI});var uf=V(Eo=>{"use strict";Object.defineProperty(Eo,"__esModule",{value:!0});Eo.default=void 0;var dI=lf(ch()),pI=lf(hf());function lf(i){return i&&i.__esModule?i:{default:i}}var _I=(0,dI.default)("v3",48,pI.default),mI=_I;Eo.default=mI});var ff=V(vo=>{"use strict";Object.defineProperty(vo,"__esModule",{value:!0});vo.default=void 0;var gI=cf(oh()),TI=cf(xr());function cf(i){return i&&i.__esModule?i:{default:i}}function xI(i,t,e){i=i||{};let s=i.random||(i.rng||gI.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let r=0;r<16;++r)t[e+r]=s[r];return t}return(0,TI.default)(s)}var kI=xI;vo.default=kI});var df=V(yo=>{"use strict";Object.defineProperty(yo,"__esModule",{value:!0});yo.default=void 0;var EI=vI(require("crypto"));function vI(i){return i&&i.__esModule?i:{default:i}}function yI(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),EI.default.createHash("sha1").update(i).digest()}var bI=yI;yo.default=bI});var _f=V(bo=>{"use strict";Object.defineProperty(bo,"__esModule",{value:!0});bo.default=void 0;var CI=pf(ch()),NI=pf(df());function pf(i){return i&&i.__esModule?i:{default:i}}var II=(0,CI.default)("v5",80,NI.default),AI=II;bo.default=AI});var mf=V(Co=>{"use strict";Object.defineProperty(Co,"__esModule",{value:!0});Co.default=void 0;var SI="00000000-0000-0000-0000-000000000000";Co.default=SI});var gf=V(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.default=void 0;var OI=PI(Tr());function PI(i){return i&&i.__esModule?i:{default:i}}function LI(i){if(!(0,OI.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var DI=LI;No.default=DI});var Tf=V(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});Object.defineProperty(kn,"v1",{enumerable:!0,get:function(){return RI.default}});Object.defineProperty(kn,"v3",{enumerable:!0,get:function(){return wI.default}});Object.defineProperty(kn,"v4",{enumerable:!0,get:function(){return FI.default}});Object.defineProperty(kn,"v5",{enumerable:!0,get:function(){return BI.default}});Object.defineProperty(kn,"NIL",{enumerable:!0,get:function(){return MI.default}});Object.defineProperty(kn,"version",{enumerable:!0,get:function(){return UI.default}});Object.defineProperty(kn,"validate",{enumerable:!0,get:function(){return VI.default}});Object.defineProperty(kn,"stringify",{enumerable:!0,get:function(){return HI.default}});Object.defineProperty(kn,"parse",{enumerable:!0,get:function(){return WI.default}});var RI=Qn(sf()),wI=Qn(uf()),FI=Qn(ff()),BI=Qn(_f()),MI=Qn(mf()),UI=Qn(gf()),VI=Qn(Tr()),HI=Qn(xr()),WI=Qn(uh());function Qn(i){return i&&i.__esModule?i:{default:i}}});var Sn,GS,YS,xf,jS,QS,zS,KS,$S,JS,kf=bt(()=>{Sn=en(Tf(),1),GS=Sn.default.v1,YS=Sn.default.v3,xf=Sn.default.v4,jS=Sn.default.v5,QS=Sn.default.NIL,zS=Sn.default.version,KS=Sn.default.validate,$S=Sn.default.stringify,JS=Sn.default.parse});function Ef(){return Y.replaceAllInString(xf(),"-","_")}var kr,Io,qe,Ns,Ao,Ii,Xt,nn,ri,So,pt,Is,ki,wi,Er,Fi,Oe,On,Pn,Oo,vr,ls,yr,Ks,br,As,Ss,we=bt(()=>{"use strict";kf();We();kr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=Ef()}},Io=class{constructor(){this.startPosition=null;this.endPosition=null}},qe=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=Ef()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,s;return t+((s=(e=this.startPosition)==null?void 0:e.index)!=null?s:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},Ns=class extends qe{constructor(){super(...arguments);this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1}},Ao=class extends qe{constructor(){super(...arguments);this.name="";this.inlineName=""}},Ii=class extends qe{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return!0;return!1}getParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return this.parameters[s];return null}getParametersExcept(e){return this.parameters.filter(s=>!e.includes(s.realName))}},Xt=class extends qe{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=Y.replaceAllInString(this.content,"@{","{");return e=Y.replaceAllInString(e,"@@","@"),e}},nn=class extends qe{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},ri=class extends qe{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.sourceContent,!1),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},So=class extends ri{},pt=class extends qe{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.overrideParams=null;this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){var e;if(this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.getPhpContent(),!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){var s;let e=[];for(let r=0;r<this.children.length;r++){let h=this.children[r];if(((s=h.parent)==null?void 0:s.refId)==this.refId){if(h==this.isClosedBy)break;e.push(h)}}return e}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof pt&&r.refId==this.isClosedBy.refId)break;e.push(r)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof pt&&r.directiveName==e)return r}return null}findFirstDirectChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let r=this.children[s];if(r instanceof pt&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId)return r}return null}findDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof pt&&r.directiveName==e&&s.push(r)}),s}findDirectChildDirectivesOfType(e){let s=[];return this.children.forEach(r=>{r instanceof pt&&r.directiveName==e&&r.parent!=null&&r.parent.refId==this.refId&&s.push(r)}),s}clone(){let e=new pt;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition,e.overrideParams=this.overrideParams;let s=this.getParser();return s!=null&&e.withParser(s),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},Is=class extends qe{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},ki=class extends pt{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof pt?this.logicBranches[0].head.parent:null}},wi=class extends qe{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},Er=class extends qe{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},Fi=class extends qe{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},Oe=class extends qe{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1;this.overrideContent=null}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.content,!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},On=class extends Oe{},Pn=class extends Oe{},Oo=class extends qe{},vr=class extends qe{},ls=class extends qe{constructor(){super(...arguments);this.tokenLength=0}},yr=class extends qe{},Ks=class extends qe{},br=class extends qe{},As=class extends qe{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},Ss=class extends qe{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var Ot,Os=bt(()=>{"use strict";Ot=class{};Ot.Verbatim="verbatim",Ot.EndVerbatim="endverbatim",Ot.Php="php",Ot.EndPhp="endphp",Ot.If="if",Ot.ElseIf="elseif",Ot.Else="else",Ot.Unless="unless",Ot.ForElse="forelse",Ot.EndForElse="endforelse",Ot.Switch="switch",Ot.EndSwitch="endswitch",Ot.Default="default",Ot.Case="case"});var Ze,Cr=bt(()=>{"use strict";we();Ze=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(s=>{if(!(s instanceof pt))return;let r=s;r.directiveName.toLowerCase().startsWith("end")||e.set(r.directiveName.toLowerCase(),1)}),t.forEach(s=>{if(!(s instanceof pt))return;let r=s;if(r.directiveName.toLowerCase().startsWith("unless")){let h=r.directiveName.substring(6);h.length>0&&(this.speculativeConditions.set(r.directiveName,1),this.speculativeEndIfs.set("end"+h,1))}if(this.speculativeEndIfs.has(r.directiveName)&&(r.isClosingDirective=!0),r.directiveName.toLowerCase().startsWith("else")){let h=r.directiveName.substring(4);h!="if"&&h.length>0&&this.speculativeConditions.set(h,1)}if(r.directiveName.toLowerCase().startsWith("end")){let h=r.directiveName.substring(3).toLowerCase();e.has(h)&&(this.possibleClosingNode.set(r.directiveName.toLowerCase(),1),r.isClosingDirective=!0)}})}};Ze.possibleClosingNode=new Map,Ze.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],Ze.customIfs=new Map,Ze.speculativeConditions=new Map,Ze.speculativeEndIfs=new Map});var Po,vf=bt(()=>{"use strict";we();Os();Cr();Po=class{static getNewName(t){if(t.name==Ot.Unless)return Ot.If;if(Ze.isSpeculativeEndIf(t.directiveName))return Ot.If;if(Ze.alwaysRewrite.includes(t.name))return Ot.If;if(Ze.isSpeculativeCondition(t.name))return Ot.If;if(Ze.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,Ot.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,Ot.If):Ot.If}return t.directiveName=="auth"?Ot.If:t.name}static rewrite(t){let e=[];return t.forEach(s=>{if(s instanceof pt)if(Ze.shouldRewrite(s)){let r=s.clone();r.name=this.getNewName(s),e.push(r)}else e.push(s);else e.push(s)}),e}}});function Qi(i){return i.length==0?null:i[0].startPosition}var $s=bt(()=>{"use strict"});function yf(i,t){let e=new Set(i),s=new Set(t),r=new Set([...e].filter(h=>s.has(h)));return Array.from(r)}var bf=bt(()=>{"use strict"});var Ve,fh=bt(()=>{"use strict";Ve=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,s,r,h;let t="";return this.node!=null&&(t=((s=(e=this.node.endPosition)==null?void 0:e.offset)!=null?s:0).toString()+"|"+((h=(r=this.node.startPosition)==null?void 0:r.offset)!=null?h:0).toString()+"|"),t+"|"+this.errorCode}static makeSyntaxError(t,e,s,r){r==null&&(r=0);let h=new Ve;return h.errorCode=t,h.node=e,h.message=s,h.level=r,h}}});var Qt,dh=bt(()=>{"use strict";Qt=class{};Qt.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Qt.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Qt.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Qt.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Qt.TYPE_UNCLOSED_COMMENT="BLADE_005",Qt.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Qt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Qt.TYPE_UNCLOSED_VERBATIM="BLADE_008",Qt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Qt.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Qt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Qt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Qt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Qt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var fn,Js,Cf=bt(()=>{"use strict";fh();dh();we();Os();fn=class{static isConditionalStructure(t){if(!(t instanceof pt))return!1;let e=t,s=e.name;return s==Ot.If||s==Ot.ElseIf||s==Ot.Else}static requiresClose(t){let e=t.name;return e==Ot.ElseIf||e==Ot.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==Ot.If||t==Ot.ElseIf?fn.conditionClosingPairs:[]}static findClosestStructurePair(t,e,s){let r=[],h=t.length,u=new Map;r.push({node:e,index:s});for(let l=0;l<h;l+=1){let f=t[l];if(f instanceof pt){let _=f.name;if(f.isClosingDirective&&_==Ot.If){u.set(l,l);continue}else if(_==Ot.ElseIf||_==Ot.Else){u.set(l,l);continue}}}for(;r.length>0;){let l=r.pop();if(l==null)continue;if(l.node._conditionParserAbandonPairing)break;let f=l.node,_=fn.getValidClosingPairs(f.name),m=l.index,I=!1;for(let v=m;v<h;v++){let x=t[v];if(x instanceof pt&&fn.isConditionalStructure(x)){if(fn.requiresClose(x)){if(v==h-1){I=!1;break}r.push(l),r.push({node:x,index:v+1}),I=!0;break}if(f.isClosedBy!=null)continue;let N=x.name,R=!1;if(x.ref==0&&(x.isClosingDirective&&N==Ot.If||_.includes(N))&&(R=!0),x.refId==f.refId&&(R=!1),R){u.delete(v),f.isClosedBy=x,x.isOpenedBy=f,x.ref+=1,I=!0;break}}}if(!I&&f instanceof pt){let v=f.name;(v==Ot.ElseIf||v==Ot.Else)&&f.isOpenedBy==null&&(f.pushError(Ve.makeSyntaxError(Qt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0),f.isClosedBy==null&&fn.requiresClose(f)&&(f.pushError(Ve.makeSyntaxError(Qt.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let s=t[e];s instanceof pt&&fn.isConditionalStructure(s)&&fn.requiresClose(s)&&fn.findClosestStructurePair(t,s,e+1)}return t.forEach(e=>{if(e instanceof pt&&fn.isConditionalStructure(e)){let s=e.name;if((s==Ot.ElseIf||s==Ot.Else)&&e.isOpenedBy==null){e.pushError(Ve.makeSyntaxError(Qt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&fn.requiresClose(e)){e.pushError(Ve.makeSyntaxError(Qt.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},Js=fn;Js.conditionClosingPairs=["elseif","else"]});var Lo,Nf=bt(()=>{"use strict";dn();$s();we();Os();Lo=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof pt&&r.name.toLowerCase()==Ot.ForElse&&r.directiveName.toLowerCase()!=Ot.EndForElse?s.push(this.createForElseNode(r,e)):s.push(r)}),s}static createForElseNode(t,e){var f,_,m,I,v,x,N,R,H,X,at,$,z,ht,F,q,gt,nt,yt,Ht,zt,Bt,Ct,Tt,Ut,_t,ct,fe,Pt,ae,pe,P,D,tt,xt;let s=new Fi;s.withParser(e),s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.constructedFrom=t;let r=t.findFirstDirectChildDirectiveOfType("empty");if(r==null){s.tailNode=t.children.pop(),s.truthNodes=t.children;let qt=((_=(f=t.startPosition)==null?void 0:f.index)!=null?_:0)-1,it=((v=(I=(m=t.isClosedBy)==null?void 0:m.startPosition)==null?void 0:I.index)!=null?v:0)-1,M=it-qt,G=((N=(x=t.endPosition)==null?void 0:x.index)!=null?N:0)+1,U=((X=(H=(R=t.isClosedBy)==null?void 0:R.startPosition)==null?void 0:H.index)!=null?X:0)-1,Z=U-G;s.truthDocumentContent=e.getText(qt,it),s.truthDocumentOffset={start:qt,end:it,length:M},s.truthInnerContent=e.getText(G,U),s.truthInnerOffset={start:G,end:U,length:Z}}else{let qt=t.children,it=[],M=[];s.elseNode=r;for(let Zt=0;Zt<qt.length;Zt++){let Rt=qt[Zt];if(Rt.refId==r.refId){M=qt.slice(Zt+1);break}else it.push(Rt)}s.truthNodes=it,M.length>0&&(s.tailNode=M.pop()),s.falseNodes=M;let G=(($=(at=t.startPosition)==null?void 0:at.index)!=null?$:0)-1,U=((ht=(z=r.startPosition)==null?void 0:z.index)!=null?ht:0)-1,Z=U-G,lt=((q=(F=t.endPosition)==null?void 0:F.index)!=null?q:0)+1,st=((nt=(gt=r.startPosition)==null?void 0:gt.index)!=null?nt:0)-1,j=st-lt;s.truthDocumentContent=e.getText(G,U),s.truthDocumentOffset={start:G,end:U,length:Z},s.truthInnerContent=e.getText(lt,st),s.truthInnerOffset={start:lt,end:st,length:j};let ut=((Ht=(yt=r.startPosition)==null?void 0:yt.index)!=null?Ht:0)-1,Nt=((Ct=(Bt=(zt=t.isClosedBy)==null?void 0:zt.startPosition)==null?void 0:Bt.index)!=null?Ct:0)-1,Jt=Nt-ut,mt=((Ut=(Tt=r.endPosition)==null?void 0:Tt.index)!=null?Ut:0)+1,St=((fe=(ct=(_t=t.isClosedBy)==null?void 0:_t.startPosition)==null?void 0:ct.index)!=null?fe:0)-1,J=St-mt;s.falseDocumentContent=e.getText(ut,Nt),s.falseDocumentOffset={start:ut,end:Nt,length:Jt},s.falseInnerContent=e.getText(mt,St),s.falseInnerOffset={start:mt,end:St,length:J}}s.truthDocument=ge.childFromText(e.getNodeText(s.truthNodes),e,Qi(s.truthNodes)),s.falseDocument=ge.childFromText(e.getNodeText(s.falseNodes),e,Qi(s.falseNodes));let h=((ae=(Pt=t.startPosition)==null?void 0:Pt.index)!=null?ae:0)-1,u=(xt=(P=(pe=t.isClosedBy)==null?void 0:pe.endPosition)==null?void 0:P.index)!=null?xt:0-((tt=(D=t.startPosition)==null?void 0:D.index)!=null?tt:0),l=u-h;return s.nodeContent=e.getText(h,u),s.documentContent=e.getText(h,u),s.offset={start:h,end:u,length:l},s}}});var Do,If=bt(()=>{"use strict";dn();$s();we();Cr();Do=class{static analyze(t,e){let s=[];return t.forEach(r=>{if(r instanceof pt&&r.isClosedBy!=null){let h=r.findFirstChildDirectiveOfType("else");h!=null&&h.isClosedBy==null?s.push(this.convertToConditionalNode(r,h,e)):s.push(r)}else s.push(r)}),s}static convertToConditionalNode(t,e,s){var Bt,Ct,Tt,Ut,_t,ct,fe,Pt,ae,pe,P,D,tt,xt,qt,it,M,G,U,Z,lt,st,j,ut,Nt,Jt;let r=new ki,h=t.getFinalClosingDirective(),u=t.children,l=[],f=[],_=u.pop();r.withParser(s),r.parent=t.parent,r.startPosition=t.startPosition,r.endPosition=h.endPosition,r.constructedFrom=t;let m=((Ct=(Bt=t.startPosition)==null?void 0:Bt.index)!=null?Ct:0)-1,I=(ct=(Tt=h==null?void 0:h.endPosition)==null?void 0:Tt.index)!=null?ct:0-((_t=(Ut=t.startPosition)==null?void 0:Ut.index)!=null?_t:0),v=m+I;r.nodeContent=s.getText(m,I),r.offset={start:m,end:v,length:I};for(let mt=0;mt<u.length;mt++){let St=u[mt];if(St instanceof pt&&St.refId==e.refId){f=u.slice(mt+1);break}else l.push(St)}let x=new Is,N=new Is;x.withParser(s),N.withParser(s),t.isClosedBy=e,e.isOpenedBy=t,_.isOpenedBy=e,e.isClosedBy=_;let R=[...l],H=[...f];l.push(e),x.head=t,x.nodes=l,x.index=t.index;let X=(Pt=(fe=t.endPosition)==null?void 0:fe.index)!=null?Pt:0,at=((P=(pe=(ae=t.isClosedBy)==null?void 0:ae.startPosition)==null?void 0:pe.index)!=null?P:0)-1,$=at-X,z=((tt=(D=t.startPosition)==null?void 0:D.index)!=null?tt:0)-1,ht=((it=(qt=(xt=t.isClosedBy)==null?void 0:xt.startPosition)==null?void 0:qt.index)!=null?it:0)-1,F=ht-z;x.innerContent=s.getText(X,at),x.documentContent=s.getText(z,ht),x.innerOffset={start:X,end:at,length:$},x.offset={start:z,end:ht,length:F},f.push(_),N.head=e,N.nodes=f,N.index=e.index;let q=(G=(M=e.endPosition)==null?void 0:M.index)!=null?G:0,gt=((lt=(Z=(U=e.isClosedBy)==null?void 0:U.startPosition)==null?void 0:Z.index)!=null?lt:0)-1,nt=gt-q,yt=((j=(st=e.startPosition)==null?void 0:st.index)!=null?j:0)-1,Ht=((Jt=(Nt=(ut=e.isClosedBy)==null?void 0:ut.startPosition)==null?void 0:Nt.index)!=null?Jt:0)-1,zt=Ht-yt;return N.innerContent=s.getText(q,gt),N.documentContent=s.getText(yt,Ht),N.innerOffset={start:q,end:gt,length:nt},N.offset={start:yt,end:Ht,length:zt},r.chain=[t.index,e.index],r.logicBranches.push(x),r.logicBranches.push(N),x.startPosition=x.nodes[0].startPosition,x.endPosition=x.nodes[x.nodes.length-1].startPosition,x.childDocument=ge.childFromText(s.getNodeText(R),s,Qi(R)),N.childDocument=ge.childFromText(s.getNodeText(H),s,Qi(H)),N.startPosition=N.nodes[0].startPosition,N.endPosition=N.nodes[N.nodes.length-1].startPosition,Ze.registerSpeculativeCondition(t.directiveName),r}}});var Ro,Af=bt(()=>{"use strict";dn();$s();we();Os();Ro=class{static associate(t,e){let s=[];return t.forEach(r=>{r instanceof pt&&r.directiveName.toLowerCase()==Ot.Switch?s.push(this.createSwitchNode(r,e)):s.push(r)}),s}static createSwitchNode(t,e){var _,m,I,v,x,N,R,H,X,at,$,z,ht,F,q,gt,nt,yt,Ht,zt,Bt,Ct,Tt,Ut,_t,ct,fe,Pt,ae,pe,P,D;let s=new wi,r=t.children;s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.parent=t.parent,s.withParser(e),s.constructedFrom=t;let h=[];for(let tt=0;tt<r.length;tt++){let xt=r[tt];if(xt instanceof pt&&xt.name==Ot.Switch&&(tt+=xt.children.length),xt instanceof pt&&xt.name==Ot.Case){let qt=this.collectUntil(t,r.slice(tt+1),[Ot.Case,Ot.Default,Ot.EndSwitch]),it=new Er;if(it.parent=xt.parent,s.cases.length==0&&h.length>0){if(it.leadingNodes=h,h.length>0){let j=h[0],ut=h[h.length-1],Nt=(m=(_=j.startPosition)==null?void 0:_.index)!=null?m:0,Jt=((v=(I=ut.endPosition)==null?void 0:I.index)!=null?v:0)+1,mt=e.getText(Nt,Jt);it.leadingDocument=ge.childFromText(mt,e,j.startPosition)}h=[]}if(it.refId=xt.refId,it.index=xt.index,it.startPosition=xt.startPosition,it.endPosition=xt.endPosition,it.order=s.cases.length,it.head=xt,it.isDefault=!1,it.children=qt.children,it.withParser(e),it.isClosedBy=qt.brokeOn,xt.isClosedBy=qt.brokeOn,it.children.length>0){let j=it.children[it.children.length-1];j instanceof pt&&j==t.isClosedBy&&it.children.pop()}it.childDocument=ge.childFromText(e.getNodeText(it.children),e,Qi(it.children)),qt.brokeOn!=null&&(it.endPosition=qt.brokeOn.startPosition);let M=((N=(x=it.startPosition)==null?void 0:x.index)!=null?N:0)-1,G=((X=(H=(R=it.isClosedBy)==null?void 0:R.startPosition)==null?void 0:H.index)!=null?X:0)-1,U=G-M,Z=(($=(at=xt.endPosition)==null?void 0:at.index)!=null?$:0)+1,lt=((F=(ht=(z=it.isClosedBy)==null?void 0:z.startPosition)==null?void 0:ht.index)!=null?F:0)-1,st=lt-Z;it.documentContent=e.getText(M,G),it.innerContent=e.getText(Z,lt),it.offset={start:M,end:G,length:U},it.innerOffset={start:Z,end:lt,length:st},s.cases.push(it)}else if(xt instanceof pt&&xt.name==Ot.Default){let qt=r.slice(tt+1),it=new Er;it.parent=xt.parent,it.refId=xt.refId,it.index=xt.index,it.startPosition=xt.startPosition,it.endPosition=t.startPosition,it.order=s.cases.length,it.head=xt,it.isDefault=!0,it.children=qt,it.withParser(e),it.isClosedBy=t.isClosedBy,xt.isClosedBy=t.isClosedBy;let M=[...it.children],G=M[M.length-1];G instanceof pt&&G.refId==((q=t.isClosedBy)==null?void 0:q.refId)&&M.pop();let U=((nt=(gt=it.startPosition)==null?void 0:gt.index)!=null?nt:0)-1,Z=((zt=(Ht=(yt=it.isClosedBy)==null?void 0:yt.startPosition)==null?void 0:Ht.index)!=null?zt:0)-1,lt=Z-U,st=((Ct=(Bt=xt.endPosition)==null?void 0:Bt.index)!=null?Ct:0)+1,j=((_t=(Ut=(Tt=it.isClosedBy)==null?void 0:Tt.startPosition)==null?void 0:Ut.index)!=null?_t:0)-1,ut=j-st;it.documentContent=e.getText(U,Z),it.innerContent=e.getText(st,j),it.offset={start:U,end:Z,length:lt},it.innerOffset={start:st,end:j,length:ut},it.childDocument=ge.childFromText(e.getNodeText(M),e,Qi(M)),s.cases.push(it);break}else h.push(xt)}if(s.cases.length>0){let tt=s.cases[s.cases.length-1];tt.children.length>0&&(s.tail=tt.children.pop())}if(s.cases.length==0){let tt=[...t.children];tt.length>0&&tt[tt.length-1]==t.isClosedBy&&tt.pop(),t.childrenDocument=ge.childFromText(e.getNodeText(tt),e,Qi(tt))}let u=((fe=(ct=t.startPosition)==null?void 0:ct.index)!=null?fe:0)-1,l=(D=(ae=(Pt=t.isClosedBy)==null?void 0:Pt.endPosition)==null?void 0:ae.index)!=null?D:0-((P=(pe=t.startPosition)==null?void 0:pe.index)!=null?P:0),f=u+l;if(s.nodeContent=e.getText(u,l),s.offset={start:u,end:f,length:l},s.cases.length>0){let tt=s.cases[s.cases.length-1];tt.isClosedBy==null&&(tt.isClosedBy=t.isClosedBy)}return s}static collectUntil(t,e,s){var u;let r=[],h=null;for(let l=0;l<e.length;l++){let f=e[l];if(f instanceof pt&&s.includes(f.name)&&((u=f.parent)==null?void 0:u.refId)==t.refId){h=f;break}r.push(f)}return{children:r,brokeOn:h}}}});var ph,Nr,Sf=bt(()=>{"use strict";dn();$s();we();Os();bf();Cf();Nf();Cr();If();Af();ph=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.pairsCreated=0;this.stackCount=0}buildCloseIndex(t){var e,s,r;t.forEach(h=>{var _,m,I,v,x,N,R,H;if(!(h instanceof pt))return;let u=h;if(u.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let l=u.name;((_=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:_.has(l))==!1&&((m=this.closingDirectiveIndex.get(this.stackCount))==null||m.set(l,[]),(I=this.closingDirectiveIndexCount.get(this.stackCount))==null||I.set(l,0)),(x=(v=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:v.get(l))==null||x.push(h);let f=(R=(N=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:N.get(l))!=null?R:0;(H=this.closingDirectiveIndexCount.get(this.stackCount))==null||H.set(l,f+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((s=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?s:[])),(r=this.closingDirectiveIndex.get(this.stackCount))==null||r.forEach((h,u)=>{var _,m,I,v,x;let l=h.length;if(l==0)return;let f=h[l-1];for(let N=0;N<l;N++){let R=t[N];if(R instanceof pt){if(R.index>=f.index)break;let H=R.name;if(R.isClosingDirective==!1&&H==u){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((_=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:_.has(u))==!1&&((m=this.openDirectiveIndexCount.get(this.stackCount))==null||m.set(u,0));let X=(v=(I=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:I.get(u))!=null?v:0;(x=this.openDirectiveIndexCount.get(this.stackCount))==null||x.set(u,X+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),s=this.closingDirectiveNames.get(this.stackCount);return yf(e,s)}return[]}associate(t,e,s=null){var u;this.document=e;let r=[],h=[{documentNodes:t,parent:s}];for(;h.length>0;){let l=h.pop();if(l==null)continue;let f=l.documentNodes;this.parentNode=l.parent,this.stackCount+=1,this.buildCloseIndex(f),f=Js.pairConditionals(f),f.forEach(v=>{if(v instanceof pt&&Ze.canClose(v)){if(Js.isConditionalStructure(v)){this.pairsCreated+=1;return}let x=this.getScanForList(v);this.findClosingPair(f,v,x)}});let _=f.length;for(let v=0;v<_;v++){let x=f[v];if(x instanceof pt&&x.isClosedBy!=null)for(let N=v+1;N<_;N++){let R=f[N];if(R.index>x.isClosedBy.index)break;if(R.parent=x,x.children.push(R),R instanceof pt&&R.index==x.index){R.parent=x;break}}}f.forEach(v=>{if(v instanceof pt&&v.children.length>0){let x=[],N=[];v.children.forEach(R=>{if(R.parent!=null&&R.parent.index==v.index){let H=R.refId;if(!N.includes(H))R.parent=v,x.push(R),N.push(H);else return}}),h.push({documentNodes:x,parent:v})}});let m=[];f.forEach(v=>{var x;this.parentNode==null?v.parent==null&&m.push(v):((x=v.parent)==null?void 0:x.refId)==this.parentNode.refId&&m.push(v)}),m=this.reduceConditions(m,e),m=Ro.associate(m,e),m=Lo.associate(m,e),m=Do.analyze(m,e),m=this.cleanNodes(m);let I=new Map;f.forEach(v=>{var x,N,R,H;if(v instanceof pt&&v.isClosedBy!=null&&this.document!=null){let X=this.document.getText((N=(x=v.endPosition)==null?void 0:x.index)!=null?N:0,((H=(R=v.isClosedBy.startPosition)==null?void 0:R.index)!=null?H:0)-1);v.documentContent=X,(v.name=="php"||v.name=="verbatim")&&v.innerContent.trim().length==0&&(v.innerContent=v.documentContent)}});for(let v=0;v<m.length;v++){let x=m[v],N=(u=x.refId)!=null?u:"";I.set(N,1)}if(this.parentNode!=null&&this.parentNode instanceof pt&&(this.parentNode.children=this.cleanNodes(m),this.parentNode.parent!=null&&this.parentNode.parent instanceof pt)){let v=this.parentNode.parent.children,x=[];v.forEach(N=>{var R;I.has((R=N.refId)!=null?R:"")==!1&&x.push(N)}),this.parentNode.parent.children=this.cleanNodes(x)}this.stackCount<=1&&(r=this.cleanNodes(m))}return r}cleanNodes(t){let e=[],s=[];for(let r=0;r<t.length;r++){let h=t[r],u=h.refId;if(s.includes(u))break;e.push(h),s.push(u)}return e}reduceConditions(t,e){var r,h,u,l,f,_,m,I,v,x,N,R,H,X,at,$,z;let s=[];for(let ht=0;ht<t.length;ht++){let F=t[ht];if(F instanceof pt&&F.isClosingDirective==!1&&F.isClosedBy!=null)if(F.name==Ot.If){let gt=new ki,nt=F.getFinalClosingDirective();gt.withParser(e),gt.index=F.index,gt.chain.push(F.index),gt.startPosition=F.startPosition,gt.endPosition=nt.endPosition,gt.constructedFrom=F;let yt=((h=(r=F.startPosition)==null?void 0:r.index)!=null?h:0)-1,Ht=(_=(u=nt==null?void 0:nt.endPosition)==null?void 0:u.index)!=null?_:0-((f=(l=F.startPosition)==null?void 0:l.index)!=null?f:0),zt=yt+Ht;gt.nodeContent=e.getText(yt,Ht),gt.offset={start:yt,end:zt,length:Ht},this.parentNode!=null&&(gt.parent=this.parentNode);let Bt=null,Ct=!0,Tt=0;for(;Ct;){if(Tt+=1,Tt>ph.ForceBreakLimit){Ct=!1;break}if(F instanceof pt){let Ut=this.findEndOfBranch(t.slice(ht+1),F,ht),_t=new Is;_t.withParser(e);let ct=Ut.tail;_t.head=F,_t.tail=ct,_t.nodes=this.cleanNodes(F.children);let fe=[..._t.nodes],Pt=fe[fe.length-1];Pt instanceof pt&&Pt.refId==((m=F.isClosedBy)==null?void 0:m.refId)&&fe.pop();let ae=(v=(I=F.endPosition)==null?void 0:I.index)!=null?v:0,pe=((R=(N=(x=F.isClosedBy)==null?void 0:x.startPosition)==null?void 0:N.index)!=null?R:0)-1,P=pe-ae,D=((X=(H=F.startPosition)==null?void 0:H.index)!=null?X:0)-1,tt=((z=($=(at=F.isClosedBy)==null?void 0:at.startPosition)==null?void 0:$.index)!=null?z:0)-1,xt=tt-D;if(_t.innerContent=e.getText(ae,pe),_t.documentContent=e.getText(D,tt),_t.innerOffset={start:ae,end:pe,length:P},_t.offset={start:D,end:tt,length:xt},_t.childDocument=ge.childFromText(e.getNodeText(fe),e,Qi(fe)),ct==null&&(ct=_t.head.isClosedBy),ct!=null&&ct.startPosition!=null&&(_t.startPosition=ct.startPosition),ct!=null&&(_t.index=ct.index),_t.nodes.length>0){let qt=_t.nodes[_t.nodes.length-1];qt.endPosition!=null&&(_t.endPosition=qt.endPosition)}else ct!=null&&ct.endPosition!=null&&(_t.endPosition=ct.endPosition);if(this.createdExecutionBranches.push(_t),gt.logicBranches.push(_t),(ct==null?void 0:ct.isClosingDirective)&&ct.name==Ot.If){Bt=Ut.offset,Ct=!1;break}else ct!=null&&gt.chain.push(ct.index),ht=Ut.offset,ct instanceof pt&&(F=ct)}else Ct=!1}if(s.push(gt),Bt!=null&&Bt==t.length)break}else s.push(F);else s.push(F)}return s}findEndOfBranch(t,e,s){let r=[],h=s,u=null;for(let l=0;l<t.length;l++){let f=t[l];if(f instanceof pt&&f.isOpenedBy!=null&&f.isOpenedBy==e){u=f;break}else r.push(f)}return{children:r,tail:u,offset:h}}getPairsCreated(){return this.pairsCreated}findClosingPair(t,e,s){let r=t.length,h=0;for(let u=0;u<r;u++){let l=t[u];if(!(l instanceof pt)||l.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(l.startPosition))continue;let f=l;if(f.isClosingDirective&&f.isOpenedBy!=null||!f.isClosingDirective&&f.isClosedBy!=null)continue;let _=f.name;if(!f.isClosingDirective&&s.includes(_)){h+=1;continue}if(s.includes(_)&&h>0){h-=1;continue}if(h==0&&s.includes(_)){f.isOpenedBy=e,e.isClosedBy=f,this.pairsCreated+=1;break}}}},Nr=ph;Nr.ForceBreakLimit=1e5});var wo,Of=bt(()=>{"use strict";we();wo=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof pt))return;let s=e;s.getImmediateChildren().forEach(r=>{let h="*unknown",u=0;r instanceof Xt?h="*literal":r instanceof Pn?h="*entities_echo":r instanceof On?h="*escaped_echo":r instanceof Oe?h="*echo":r instanceof Oo?h="*verbatim":r instanceof pt&&(h=r.directiveName),s.childTypeCounts.has(h)==!1&&s.childTypeCounts.set(h,0);let l=s.childTypeCounts.get(h),f=l+1;s.childTypeCounts.set(h,f),r.parentTypeIndex=f,r.parentIndex=u,u+=1})})}}});var Fo,Lf=bt(()=>{"use strict";we();Fo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var r,h,u,l,f;let e=(h=(r=t.endPosition)==null?void 0:r.index)!=null?h:0,s=(f=(l=(u=t.isClosedBy)==null?void 0:u.startPosition)==null?void 0:l.index)!=null?f:0;return this.fragmentsParser.getFragmentsBetween(e,s).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let s=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(s=="script"||s=="style")){let r=this.fragmentsParser.getClosingFragmentAfter(e);if(r==null)return;e.endPosition!=null&&r.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,r.startPosition).forEach(u=>{(u instanceof ki||u instanceof Fi||u instanceof Ii||u instanceof wi||u instanceof pt&&u.isClosedBy!=null)&&(e.containsStructures=!0),s=="style"?u.isInStyleTag=!0:u.isInScriptTag=!0})}}),t.forEach(e=>{var u,l,f,_,m,I;if(e instanceof Xt||e.startPosition==null)return;e instanceof pt&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let s=this.fragmentsParser.getFragmentContaining(e.startPosition);if(s==null)return;if(e.fragment=s,e.startPosition.index-((l=(u=s.startPosition)==null?void 0:u.index)!=null?l:0)<=3){e.fragmentPosition=0;return}if(s.parameters.length==0){e.fragmentPosition=2;return}let h=!1;for(let v=0;v<s.parameters.length;v++){let x=s.parameters[v];if(((_=(f=x.startPosition)==null?void 0:f.index)!=null?_:0)<e.startPosition.index&&((I=(m=x.endPosition)==null?void 0:m.index)!=null?I:0)>e.startPosition.index){e.fragmentPosition=1,h=!0;break}}h||(e.fragmentPosition=2)}))}}});var Bo,Df=bt(()=>{"use strict";we();We();Bo=class{static analyze(t){t.forEach(e=>{var s,r,h,u;if(e instanceof Oe){let l=!1,f=!1;if(e.nextNode==null)l=!0;else if(e.nextNode instanceof Xt){let _=Y.getFirstLine(e.nextNode.content);(Y.trimLeft(_," 	").startsWith(`
`)==!1&&_.trim().length>0||e.nextNode.nextNode instanceof Oe&&((s=e.nextNode.nextNode.startPosition)==null?void 0:s.line)==((r=e.endPosition)==null?void 0:r.line))&&(l=!0)}else e.nextNode instanceof Oe&&(l=!0);if(e.prevNode==null)f=!0;else if(e.prevNode instanceof Xt){let _=Y.getLastLine(e.prevNode.content);(Y.trimRight(_," 	").endsWith(`
`)==!1&&_.trim().length>0||e.prevNode.prevNode instanceof Oe&&((h=e.prevNode.prevNode.endPosition)==null?void 0:h.line)==((u=e.startPosition)==null?void 0:u.line))&&(f=!0)}else e.prevNode instanceof Oe&&(f=!0);e.isInlineEcho=l||f}})}}});var Mo,Rf=bt(()=>{"use strict";we();We();Mo=class{static analyze(t){t.forEach(e=>{var s,r;if(e instanceof ri){if(((s=e.startPosition)==null?void 0:s.line)!=((r=e.endPosition)==null?void 0:r.line))return;let h=!1,u=!1;if(e.nextNode==null)h=!0;else if(e.nextNode instanceof Xt){let l=Y.getFirstLine(e.nextNode.content);Y.trimLeft(l," 	").startsWith(`
`)==!1&&l.trim().length>0&&(h=!0)}if(e.prevNode==null)u=!0;else if(e.prevNode instanceof Xt){let l=Y.getLastLine(e.prevNode.content);Y.trimRight(l," 	").endsWith(`
`)==!1&&l.trim().length>0&&(u=!0)}e.isInline=h&&u}})}}});var Ln,wf=bt(()=>{"use strict";cn();We();Ln=class{static findRightBeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let u=e[h];if(Y.ctypeSpace(u)&&(r=!0),r&&(Y.ctypeAlpha(u)||Y.ctypeDigit(u)))return null;if(Y.ctypePunct(u)||u==et.String_Terminator_SingleQuote||u==et.String_Terminator_DoubleQuote)return u}return null}static findRightNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t+1;h<e.length;h++){let u=e[h];if((Y.ctypeSpace(u)||Y.ctypePunct(u)&&u!=et.Punctuation_Underscore)&&(r=!0),r&&(Y.ctypeAlpha(u)||Y.ctypeDigit(u)))return h+1}return null}static findLeftNeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-2;h>=0;h--){let u=e[h];if(Y.ctypeSpace(u)&&(r=!0),r&&(Y.ctypeAlpha(u)||Y.ctypeDigit(u)))return null;if(Y.ctypePunct(u))return u}return null}static findLeftNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let r=!1;for(let h=t-1;h>=0;h--){let u=e[h];if((Y.ctypeSpace(u)||Y.ctypePunct(u)&&u!=et.Punctuation_Underscore)&&(r=!0),r&&(Y.ctypeAlpha(u)||Y.ctypeDigit(u)))return h+1}return null}static scanWordAt(t,e,s=4){if(e=e.replace("	"," ".repeat(s)),t<0||t>e.length)return null;let r=[],h=[];for(let u=t-1;u>=0;u--){let l=e[u];if(Y.ctypePunct(l)&&l!=et.Punctuation_Underscore||Y.ctypeSpace(l))break;r.push(l)}for(let u=t;u<e.length;u++){let l=e[u];if(Y.ctypePunct(l)&&l!=et.Punctuation_Underscore||Y.ctypeSpace(l))break;h.push(l)}return r.reverse().join("")+h.join("")}}});var Dn,_h=bt(()=>{"use strict";Dn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new Dn;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,s=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+s}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function Xs(i){for(let t=i.getCurrentIndex()+1;t<i.inputLength();t++){let e=i.getChar(t);if(!Y.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var mh=bt(()=>{"use strict";We()});function Bi(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()!=et.NewLine);i.incrementIndex());}var us=bt(()=>{"use strict";cn()});function Mi(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex())if(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()==et.Punctuation_Asterisk&&i.getNext()==et.Punctuation_ForwardSlash){t&&i.pushChar(et.Punctuation_ForwardSlash),i.incrementIndex(),i.checkCurrentOffsets();break}}var cs=bt(()=>{"use strict";cn()});function Zs(i){let t=i.getCurrentIndex()+i.getSeedOffset(),e=i.getCurrentIndex(),s=0,r=0,h=!1;for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex()){if(i.checkCurrentOffsets(),$e(i.getCurrent())){let l=i.getCurrent(),f=i.getCurrentIndex();bs(i),i.getNext()===null&&i.getCurrent()!==l&&(i.updateIndex(f+1),i.encounteredFailure());continue}if(i.getCurrent()==et.Punctuation_ForwardSlash&&i.getNext()==et.Punctuation_Asterisk){Mi(i,!1);continue}if(i.getCurrent()==et.Punctuation_ForwardSlash&&i.getNext()==et.Punctuation_ForwardSlash){Bi(i,!1);continue}if(i.getCurrent()==et.LeftParen){r+=1;continue}if(i.getCurrent()==et.RightParen){if(r>0){r-=1;continue}s=i.getCurrentIndex()+i.getSeedOffset()+1,h=!0;break}if(i.getCurrent()==null)break}let u=i.getContentSubstring(t,s-t);return h||i.updateIndex(e-1),{start:t,end:s,content:u,foundEnd:h}}var gh=bt(()=>{"use strict";cn();In();us();cs();An()});var Uo,Bf=bt(()=>{"use strict";we();We();cn();In();mh();gh();us();cs();An();Uo=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,s){let r=new pt,h=this.getComponentOffset();r.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),r.directiveName=t.trim(),r.name=t.trim(),t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let u=this.document.positionFromOffset(h+e,h+e),l=this.document.positionFromOffset(h+s,h+s);if(r.startPosition=u,r.endPosition=l,r.namePosition={start:u,end:l},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index,_=r.endPosition.index-r.startPosition.index,m=f+_;r.sourceContent=this.document.getContentSubstring(f,_),r.offset={start:f,end:m,length:_}}return r}getComponentOffset(){var t,e,s;return((s=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?s:0)+3}makeDirectiveWithParameters(t,e,s,r){var m,I;let h=this.makeDirective(t,e,s),u=this.getComponentOffset();h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let l=r.content.trim();l.startsWith("(")&&l.endsWith(")")&&(l=l.substring(1),l=l.substring(0,l.length-1),l=l.trim(),h.hasJsonParameters=l.startsWith("{")&&l.endsWith("}"));let f=this.document.positionFromOffset(r.start+u,r.start+u),_=this.document.positionFromOffset(r.end+u,r.end+u);if(h.startPosition=(I=(m=h.namePosition)==null?void 0:m.start)!=null?I:null,h.endPosition=_,h.directiveParametersPosition={start:f,end:_},h.startPosition!=null&&h.endPosition!=null){let v=h.startPosition.index,x=h.endPosition.index-h.startPosition.index,N=v+x;h.sourceContent=this.document.getContentSubstring(v,x),h.offset={start:v,end:N,length:x}}return h}prepare(t){return this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,s="",r=0,h=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_ForwardSlash){Bi(this,!0);continue}if(this.cur==et.NewLine){r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}else if(this.next==null){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}let u=Xs(this);if(this.cur!=et.LeftParen&&u.didFind&&Y.ctypePunct(u.char)&&u.char!=et.LeftParen&&u.char!=et.Punctuation_Minus&&u.char!="."){this.currentContent.push(this.cur),r=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}if(Y.ctypeSpace(this.cur)){let l=Xs(this);if(l.didFind&&l.char==et.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[],this.currentIndex=l.index,this.checkCurrentOffsets();let f=Zs(this);h=this.makeDirectiveWithParameters(s,t,r,f);break}else{r=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,r);break}}else if(this.cur==et.LeftParen){r=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[];let l=Zs(this);h=this.makeDirectiveWithParameters(s,t,r,l);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return h}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(Y.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),s=new Oe;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==et.RightBrace&&this.next==et.RightBrace){let r=this.currentIndex+1;s.startPosition=this.document.positionFromOffset(t+e,t+e),s.endPosition=this.document.positionFromOffset(r+e,r+e),s.withParser(this.document);let h=s.startPosition.index-5,u=s.endPosition.index-s.startPosition.index+3,l=h+u;s.sourceContent=this.content.substr(h,u),s.offset={start:h,end:l,length:u},s.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return s}parse(t){var f;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),s=!1,r=-1,h=-1,u=-1,l='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==et.LeftBrace&&this.next==et.LeftBrace){this.currentIndex+=2;let _=this.scanToEndOfBladeEcho(this.currentIndex);if(_!=null){let m=new Ns;m.type=1,m.startPosition=_.startPosition,m.endPosition=_.endPosition,m.inlineEcho=_,m.type=3,t.hasParameters=!0,t.parameters.push(m),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==et.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=et.Punctuation_Equals){let _=this.scanToEndOfDirective();if(_!=null){let m=new Ns;m.type=1,m.startPosition=_.startPosition,m.endPosition=_.endPosition,m.name=_.directiveName,m.directive=_,t.hasParameters=!0,t.parameters.push(m);continue}}if(this.hasFoundName){if(Y.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let _=new Ns,m=this.getComponentOffset();_.type=2,this.next==null&&!Y.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),_.name=this.currentContent.join("");let I=this.currentIndex+m-_.name.length;_.startPosition=this.document.positionFromCursor(I,I),_.endPosition=this.document.positionFromCursor(this.currentIndex+m,this.currentIndex+m),_.namePosition={start:_.startPosition,end:_.endPosition},t.parameters.push(_),t.hasParameters=!0,this.currentContent=[];continue}continue}else s||(s=!0,r=this.currentIndex);if(this.cur==et.Punctuation_Equals&&$e(this.next)){l=this.next,h=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),u=this.currentIndex;let _=Ri(this),m=new Ns;m.withParser(e),m.name=this.currentContent.join(""),m.value=_.value;let I=t.relativeOffset(r+3),v=t.relativeOffset(h+3),x=t.relativeOffset(u+3),N=t.relativeOffset(_.endedOn+3);m.namePosition={start:e.positionFromOffset(I,I),end:e.positionFromOffset(v,v)},m.valuePosition={start:e.positionFromOffset(x,x),end:e.positionFromOffset(N,N)},m.terminatorStyle=l,m.wrappedValue=l+m.value+l,m.content=m.name+"="+m.wrappedValue,m.realName=m.name,m.realName.startsWith(":")&&(m.isExpression=!0,m.realName=m.realName.substring(1),m.realName.startsWith(":")&&(m.isExpression=!1,m.realName=m.realName.substring(1),m.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(m),this.currentContent=[],s=!1,r=-1,h=-1,u=-1,l='"';continue}}else if((Y.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!Y.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let _=0;_<t.parameters.length;_++){let m=t.parameters[_];if(m.type==3&&((f=m.inlineEcho)==null?void 0:f.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),s=new Ao,r=t.relativeOffset(this.nameStartsOn+3),h=t.relativeOffset(this.nameEndsOn+3);if(s.withParser(e),s.name=this.name,t.isClosingTag&&(s.name=t.innerContent.trim().substring(1)),s.name.includes(":")){let u=s.name.split(":");s.name=u[0],s.inlineName=u.slice(1).join(":")}return s.startPosition=e.positionFromOffset(r,r),s.endPosition=e.positionFromOffset(h,h),s}}});var Mf,Uf=bt(()=>{"use strict";Mf=["x-transition"]});var tr,Th=bt(()=>{"use strict";dn();we();_h();We();cn();Uf();In();us();cs();An();tr=class{constructor(){this.content="";this.nodeIndex=[];this.nodeIndexSkipMap=new Map;this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.allTheChars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map;this.extractAttributePositions=!1;this.extractAttributeNames=[];this.extractedAttributes=[];this.lastFragmentEnded=-1}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let s=0;s<this.fragments.length;s++){let r=this.fragments[s];if(r.isClosingFragment&&!r.isSelfClosing&&r.name.toLowerCase()==e&&r.index>t.index)return r}return null}setExtractAttributes(t){this.extractAttributePositions=t}setExtractAttributeNames(t){this.extractAttributeNames=t}getContentSubstring(t,e){return this.content.substr(t,e)}getExtractedAttributes(){return this.extractedAttributes}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let l=this.documentOffsets.get(t);r=l.line,h=l.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let l=null,f=null,_=null,m=null;for(let I of this.documentOffsets.keys()){if(I>=t){m!=null&&t>m?(l=_,f=m):(l=this.documentOffsets.get(I),f=I);break}_=this.documentOffsets.get(I),m=I}l==null&&(l=_,f=m),l!=null?(h=t-(f!=null?f:0),r=l.line,t<=(f!=null?f:0)?(r=l.line,h=t+1):r=l.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let u=new Dn;return u.index=e,u.offset=t,u.line=r+this.shiftLine,u.char=h,u}getFragments(){return this.fragments}getFragmentsBetween(t,e){let s=[];return this.fragments.forEach(r=>{var l,f,_,m;let h=(f=(l=r.startPosition)==null?void 0:l.index)!=null?f:0,u=(m=(_=r.endPosition)==null?void 0:_.index)!=null?m:0;h>t&&u<e&&s.push(r)}),s}getFragmentContaining(t){var e,s,r,h;for(let u=0;u<this.fragments.length;u++){let l=this.fragments[u];if(((s=(e=l.startPosition)==null?void 0:e.index)!=null?s:0)<t.index&&((h=(r=l.endPosition)==null?void 0:r.index)!=null?h:0)>t.index)return l}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=Y.split(Y.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],s=[];e.forEach(r=>{var l;let h=(l=r.index)!=null?l:0;for(let f=0;f<this.nodeIndex.length;f++){let _=this.nodeIndex[f];if(h>=_.start&&h<=_.end)return}let u=this.fetchAt(h,2);u=="<="||u=="<>"||s.push(h)}),this.fragmentStartIndex=s}setIndexRanges(t){return this.nodeIndex=t,this.nodeIndex.forEach(e=>{this.nodeIndexSkipMap.set(e.start,e.end-e.start)}),this}fetchAt(t,e){return this.content.substr(t,e)}getEmbeddedDocumentStructures(){let t=[];return this.getEmbeddedFragments().forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}parse(t){if(this.allTheChars=t.split(""),this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let h=0;h<this.fragmentStartIndex.length;h++){let u=this.fragmentStartIndex[h];if(this.resetIntermediateState(),!(u<this.lastFragmentEnded)&&(this.seedOffset=u,this.currentChunkOffset=u,this.parseIntermediateText(),this.isScript)){let l=!1;for(let f=h+1;f<this.fragmentStartIndex.length;f++){let _=this.fragmentStartIndex[f];if(this.fetchAt(_,8).toLowerCase()=="<\/script"){h=f-1,this.isScript=!1,l=!0;break}}if(!l)break}}let s=0,r=0;return this.fragments.forEach(h=>{let u=h.name.toLowerCase();(u=="script"||u=="style")&&(h.embeddedIndex=r,this.embeddedIndexedFragments.set(r,h),r+=1),h.index=s,this.indexedFragments.set(s,h),s+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}getEmbeddedFragments(){let t=[];return this.embeddedIndexedFragments.forEach(e=>{t.push(e)}),t}hasFragments(){return this.fragments.length>0}getCheckAttributeName(t){return t.includes(".")?t.substring(0,t.indexOf(".")):t}shouldSkip(t){let e=this.getCheckAttributeName(t).toLowerCase();return!!Mf.includes(e)}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),$e(this.cur)&&bs(this),this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_ForwardSlash){Bi(this,!0);continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur==et.Punctuation_QuestionMark&&this.next==et.Punctuation_GreaterThan||this.next==null)break}}scanBackToName(t){let e=[];for(let s=t;s>0;s--){let r=this.chars[s];if(Y.ctypeSpace(r))break;e.push(r)}return e.reverse().join("")}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],s=[],r=!1,h=!1,u=null;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)&&(r=!0),this.next==et.Punctuation_LessThan){let l=1;this.cur==et.Punctuation_ForwardSlash&&(l=2);let f=this.fetchAt(this.currentChunkOffset+l,5);if(f.toLowerCase()=="<?php"||f.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==et.Punctuation_LessThan||this.next==null&&this.cur!=et.Punctuation_GreaterThan)break;if(!r&&this.cur==et.Punctuation_LessThan&&this.next==et.Punctuation_ForwardSlash&&(h=!0),!r&&this.cur!=et.Punctuation_LessThan&&this.cur!=et.Punctuation_ForwardSlash&&this.cur!=et.Punctuation_GreaterThan&&s.push(this.cur),r&&this.cur=="{"){let l=this.currentIndex+this.seedOffset;if(this.nodeIndexSkipMap.has(l)){let f=this.nodeIndexSkipMap.get(l),_=this.fetchAt(l,f+3);if(_.endsWith('"')||_.endsWith("'")){let m=this.scanBackToName(this.currentIndex-1);(m.startsWith("x-")||this.extractAttributeNames.includes(m))&&(u=m+_.substring(0,_.length-2))}this.advance(f);continue}}if($e(this.cur)){let l=this.currentIndex;this.skipToEndOfStringWithIndex();let f=new Io;if(f.startPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),f.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(f),this.extractAttributePositions==!0){let _=this.scanBackToName(l-2);if(u!=null&&(_=u),_.startsWith("x-")||this.extractAttributeNames.includes(_)){let m=this.getContentSubstring(f.startPosition.offset,f.endPosition.offset-f.startPosition.offset+1),I=ge.fromText(m),v=!0;this.nodeIndexSkipMap.has(f.startPosition.offset+2)&&this.nodeIndexSkipMap.get(f.startPosition.offset+2)+f.startPosition.offset+3==f.endPosition.offset&&(v=!1),m.trim()=="{}"&&(v=!1),this.shouldSkip(_)&&(v=!1),v&&!I.getParser().getHasPairedStructures()&&this.extractedAttributes.push({content:m,name:_,startedOn:f.startPosition.offset,endedOn:f.endPosition.offset+1})}}u=null;continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_GreaterThan){let l=new kr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),l.parameters=e,l.isSelfClosing=!0,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1);break}if(this.cur==et.Punctuation_GreaterThan){let l=new kr;l.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),l.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),l.parameters=e,l.name=s.join(""),l.isClosingFragment=h,this.fragments.push(l),h?this.fragmentOpeningIndex.set(l.startPosition.index+1,1):this.fragmentOpeningIndex.set(l.startPosition.index,1),l.name.toLowerCase()=="script"&&l.isClosingFragment==!1&&(this.isScript=!0);break}}this.lastFragmentEnded=this.currentIndex+this.seedOffset}skipToEndOfStringWithIndex(){let t=this.cur;for(this.incrementIndex(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex++){this.checkCurrentOffsets();let e=this.currentIndex+this.seedOffset;if(this.nodeIndexSkipMap.has(e)){let s=this.nodeIndexSkipMap.get(e);this.advance(s-1);continue}if(this.cur==t&&this.prev!=et.String_EscapeCharacter)break}}}});var Ir,xh=bt(()=>{"use strict";Ir=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var Vo,kh=bt(()=>{"use strict";Vo=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function Ho(){return qI}var qI,Eh=bt(()=>{"use strict";xh();kh();qI={ignoreDirectives:[...Ir,...Vo],directives:[],customIfs:[]}});var Wo,Vf=bt(()=>{"use strict";we();We();Wo=class{static transform(t,e){let s=e;return t.forEach(r=>{r instanceof Oe?s=s.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof pt&&r.hasDirectiveParameters?s=s.replace(r.sourceContent,this.transformContent(r.sourceContent)):r instanceof ri&&(s=s.replace(r.sourceContent,Y.replaceWithFillerExceptNewlines(r.sourceContent)))}),s}static transformContent(t){return t.replace(/>/g,"B").replace(/</g,"B")}}});var Lt,et,cn=bt(()=>{"use strict";sh();vf();Sf();Of();Lf();Df();Rf();Cr();dn();wf();fh();dh();$s();we();_h();We();Os();Bf();Th();Eh();In();mh();gh();us();cs();An();Vf();Lt=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.parsingOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.phpValidator=null;this.didRecoveryLogic=!1;this.parseFragments=!0;this.hasPairedStructures=!1;this.unclosedRegionErrors=[Qt.TYPE_UNEXPECTED_END_OF_INPUT,Qt.TYPE_UNCLOSED_PHP_DIRECTIVE,Qt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Qt.TYPE_UNCLOSED_VERBATIM,Qt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Qt.TYPE_UNCLOSED_FOR_DIRECTIVE,Qt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Qt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Qt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new Uo(this),this.fragmentsParser=new tr,this.fragmentsAnalyzer=new Fo(this,this.fragmentsParser),this.parserOptions=Ho()}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){this.didRecoveryLogic=!0}withPhpValidator(t){return this.phpValidator=t,this}getPhpValidator(){return this.phpValidator}withParserOptions(t){return this.parserOptions=t,this}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}getDidRecovery(){return this.didRecoveryLogic}isStartingPhp(){return this.cur==Lt.Punctuation_LessThan&&this.next==Lt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==Lt.Punctuation_LessThan&&this.next==Lt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!Y.ctypeAlpha(this.next)?!1:this.cur==Lt.AtChar&&this.next!=null&&this.prev!=Lt.AtChar}isClosingComponent(){return this.cur==Lt.Punctuation_GreaterThan&&this.prev!=Lt.Punctuation_Minus&&this.prev!=Lt.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==Lt.Punctuation_LessThan&&this.next==Lt.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==Lt.Punctuation_Minus||this.peekRelative(3)==Lt.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==Lt.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==Lt.Punctuation_Minus||this.peekRelative(2)==Lt.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=Lt.AtChar)&&this.next==Lt.Punctuation_Exclamation&&this.cur==Lt.LeftBrace&&this.peek(2)==Lt.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=Lt.AtChar)&&this.next==Lt.LeftBrace&&this.cur==Lt.LeftBrace&&this.next==Lt.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}endsWithTld(t){return/\.[a-z]{2,63}$/i.test(t)}processInputText(t){var I;this.originalContent=t,this.content=Y.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],s=e.length,r=this.seedStartLine,h=null,u=0,l=0;for(let v=0;v<s;v++){let x=e[v],N=(I=x.index)!=null?I:0,R=N;h!=null?R=N-h:R=R+1,this.documentOffsets.set(N,{char:R,line:r});let H=0,X=0;v==0?(X=R-1,H=0):(H=l+1,X=N),this.lineIndex.set(r,{char:R,line:r,startIndex:H,endIndex:X}),this.lastDocumentOffsetKey=N,this.maxLine=r,r+=1,h=N,l=X,u=H}this.maxLine+=1;let f=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],_=0,m=!1;return f.forEach(v=>{let x=v[0],N=this.content.indexOf(x,_),R=this.content.substr(N,10);if(R.startsWith("@@")||R.startsWith("@{{")){_=this.content.indexOf(x,_),m=!0;return}let H=this.content.indexOf(x,_);if(m&&_==H){_=H;return}let X=3,at=!1,$=!1,z=[],ht=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(q=>{z.push(q.toLowerCase()),q.length>X&&(X=q.length)}),X+=5,at=!0),this.parserOptions.directives.length>0&&(X=3,this.parserOptions.directives.forEach(q=>{ht.push(q.toLowerCase()),q.length>X&&(X=q.length)}),X+=5,at=!1,$=!0);let F=this.fetchAt(H,X);if(F.includes(".")){let q=F;F.includes(`
`)&&(q=Y.breakByNewLine(q)[0]);let gt=hs.fromText(q);if(gt.includes(".")&&this.endsWithTld(gt))return}if(F.startsWith("@{")==!1){let q=F.substring(0,1),gt=F.substring(1,2);if(q=="@"&&Y.ctypeAlpha(gt))if($){let nt=this.breakPreFetch(F).toLowerCase();ht.includes(nt)&&this.bladeStartIndex.push(H)}else if(at){let nt=this.breakPreFetch(F).toLowerCase();z.includes(nt)||this.bladeStartIndex.push(H)}else this.bladeStartIndex.push(H);else q!="@"&&this.bladeStartIndex.push(H)}this.bladeStartPositionIndex.set(H,1),_=H+2,m=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let r=Y.replaceAllInString(Y.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return r.startsWith("@")&&(r=r.substring(1)),r.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof pt&&(this.lastNode.directiveName==Ot.Verbatim||this.lastNode.directiveName==Ot.Php))}setParseFragments(t){this.parseFragments=t}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Qt.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Qt.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Qt.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Ln.findLeftNeighboringNextPunctuation(t.char,s,e)}punctuationLeftAtCursor(t,e,s=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),s)}punctuationRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Ln.findRightBeighboringNextPunctuation(t.char,s,e)}punctuationRightAtCursor(t,e,s=4){return this.punctuationRightAt(this.positionFromCursor(t,e),s)}wordRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=Ln.findRightNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:Ln.scanWordAt(r,s,e)}wordRightAtCursor(t,e,s=4){return this.wordRightAt(this.positionFromCursor(t,e),s)}wordLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let r=Ln.findLeftNeighboringNextAlphaNumeric(t.char,s,e);return r==null?null:Ln.scanWordAt(r,s,e)}wordLeftAtCursor(t,e,s=4){return this.wordLeftAt(this.positionFromCursor(t,e),s)}wordAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:Ln.scanWordAt(t.char,s,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?Y.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,s=4){return this.wordAt(this.positionFromCursor(t,e),s)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var h;let e=new Map,s=t-3,r=t+3;s<1&&(s=1),r>this.maxLine&&(r=this.maxLine);for(let u=s;u<=r;u++)e.set(u,(h=this.getLineText(u))!=null?h:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let s=this.lineIndex.get(t-1);if(s!=null){let r=s.endIndex+1;return{end:this.inputLen-1,start:r}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}getHasPairedStructures(){return this.hasPairedStructures}positionFromCursor(t,e){if(t==this.maxLine){let r=this.lineIndex.get(t-1);if(r!=null){let h=r.endIndex+1,u=h+(e-1),l=new Dn;return l.offset=u,l.line=t,l.char=e,l.index=u,l}return null}let s=this.lineIndex.get(t);if(s!=null){let r=new Dn;return r.offset=s.startIndex+(e-1),r.line=s.line,r.char=e,r.index=s.startIndex+(e-1),r}return null}parse(t){if(Ze.customIfs.clear(),this.parserOptions.customIfs.forEach(l=>{Ze.customIfs.set(l,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,s=e-1;if(e==0&&!this.isVerbatim){let l=new Xt;l.withParser(this),l.content=this.prepareLiteralContent(this.content),l.startPosition=this.positionFromOffset(0,0),l.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(l)}else for(let l=0;l<e;l+=1){let f=this.bladeStartIndex[l];if(this.seedOffset=f,l==0&&f>0&&!this.isVerbatim){let m=new Xt;m.withParser(this),m.content=this.prepareLiteralContent(this.content.substr(0,f)),m.content.length>0&&(m.startPosition=this.positionFromOffset(0,0),m.endPosition=this.positionFromOffset(f,f-1),this.nodes.push(m))}if(f<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=f,this.parsingOffset=f,this.resetIntermediateState(),this.parseIntermediateText(f),this.isVerbatim){let m=!1;for(let I=l+1;I<this.bladeStartIndex.length;I++){let v=this.bladeStartIndex[I];if(this.fetchAt(v,12)=="@endverbatim"){l=I-1,this.isVerbatim=!1,m=!0;break}}if(m)continue}if(this.isPhpNode){let m=!1;for(let I=l+1;I<this.bladeStartIndex.length;I++){let v=this.bladeStartIndex[I];if(this.fetchAt(v,7)=="@endphp"){l=I-1,this.isPhpNode=!1,m=!0;break}}if(m)continue}if(this.lastNode instanceof nn||this.lastNode instanceof ri){let m=-1;for(let I=l;I<this.bladeStartIndex.length;I++){let v=this.bladeStartIndex[I];if(v>this.lastBladeEndIndex){m=v;break}}if(m!=-1){let I=1;this.lastNode instanceof ri&&(I=0);let v=this.lastBladeEndIndex+I,x=this.content.substr(this.lastBladeEndIndex+I,m-this.lastBladeEndIndex-I),N=m-1,R=new Xt;R.withParser(this),R.startPosition=this.positionFromOffset(v,v),R.endPosition=this.positionFromOffset(N,N),R.content=x,this.nodes.push(R),this.lastNode=R,this.lastBladeEndIndex=N;continue}}this.lastNode instanceof Ii&&(f-=2);let _=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(_=!0):_=!0,_){if(l+1<e){let m=this.bladeStartIndex[l+1],I=1;this.lastNode instanceof ri&&(I=0);let v=this.lastBladeEndIndex+I;if(m<v)if(this.lastBladeEndIndex>m)l+2<e&&(m=this.bladeStartIndex[l+2]);else continue;if(this.shouldSkipForward())for(let x=l;x<this.bladeStartIndex.length;x++){let N=this.bladeStartIndex[x];if(N>this.lastBladeEndIndex){m=N;break}}if(l+1==s&&m<=this.lastBladeEndIndex){if(this.isVerbatim)break;let x=this.currentChunkOffset,N=this.content.substr(v),R=new Xt;R.withParser(this),R.content=this.prepareLiteralContent(N),R.content.length>0&&(R.startPosition=this.positionFromOffset(x,x),R.endPosition=this.positionFromOffset(m,m-1),this.nodes.push(R));break}else{let x=m-this.lastBladeEndIndex-1;if(x<0&&this.lastNode instanceof Ii){let H=!0;for(let X=l;X<this.bladeStartIndex.length;X++){let at=this.bladeStartIndex[X];if(at>this.lastBladeEndIndex){m=at,H=!1;break}}if(H){let X=this.currentIndex+f;if(X<this.inputLen&&!this.isVerbatim){let at=new Xt;at.withParser(this),at.content=this.prepareLiteralContent(this.content.substr(X)),at.content.length>0&&(at.startPosition=this.positionFromOffset(X,X),at.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(at));break}}}if(x==0||this.isVerbatim)continue;let N=this.content.substr(v,x),R=new Xt;R.withParser(this),R.content=this.prepareLiteralContent(N),R.content.length>0&&(R.startPosition=this.positionFromOffset(v,v),R.endPosition=this.positionFromOffset(m,m-1),this.nodes.push(R))}continue}if(l!==s&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(f,f).isBefore(this.lastNode.endPosition)){if(l+1<e){if(this.bladeStartIndex[l+1]<this.lastNode.endPosition.offset)continue}else if(l+1!=s)continue}if(l==s){let m=this.currentIndex+f;if(m<this.inputLen&&!this.isVerbatim){let I=new Xt;I.withParser(this),I.content=this.prepareLiteralContent(this.content.substr(m)),I.content.length>0&&(I.startPosition=this.positionFromOffset(m,m),I.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(I));break}}}}let r=0;this.nodes.forEach(l=>{l.index=r,r+=1});let h=null;for(let l=0;l<this.nodes.length;l++){let f=this.nodes[l],_=null;l+1<this.nodes.length&&(_=this.nodes[l+1]),f.prevNode=h,f.nextNode=_,h=f}Ze.determineCandidates(this.nodes),this.nodes=Po.rewrite(this.nodes);let u=new Nr;return this.renderNodes=u.associate(this.nodes,this),this.hasPairedStructures=u.getPairsCreated()>0,Bo.analyze(this.nodes),Mo.analyze(this.nodes),this.nodes.forEach(l=>{if(l instanceof pt){let f=l,_=f.directiveName.toLowerCase();if(f.isClosedBy!=null){let m=f.getImmediateChildren();for(let I=0;I<m.length;I++){let v=m[I];if(v instanceof pt&&v!=f.isClosedBy&&v.isClosedBy!=null){f.containsChildStructures=!0;break}else if(v instanceof ki||v instanceof wi||v instanceof Fi){f.containsChildStructures=!0;break}}}_=="switch"&&f.isClosedBy==null||_=="endswitch"&&f.isOpenedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_PARSE_UNCLOSED_SWITCH,f,"Unclosed switch control structure",0)):_=="php"?f.hasDirectiveParameters==!1&&f.isClosedBy==null&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNCLOSED_PHP_DIRECTIVE,f,"Unclosed @php directive",0)):_=="endphp"&&f.isOpenedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,f,"Unpaired @endphp directive",0)):_=="verbatim"&&f.isClosedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNCLOSED_VERBATIM,f,"Unclosed @verbatim directive",0)):_=="endverbatim"&&f.isOpenedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,f,"Unpaired @endverbatim directive",0)):_=="for"&&f.isClosedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNCLOSED_FOR_DIRECTIVE,f,"Unclosed @for directive",0)):_=="for"&&f.isClosingDirective==!0&&f.isOpenedBy==null?f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,f,"Unpaired @endfor directive",0)):_=="forelse"?(f.isClosedBy==null&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,f,"Unclosed @forelse directive",0)),f.findFirstDirectChildDirectiveOfType("empty")==null&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,f,"@forelse missing @empty directive",1))):_=="endforelse"&&f.isOpenedBy==null&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,f,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.parseFragments&&this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(Wo.transform(this.nodes,this.content)),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(l=>{var f,_,m,I,v,x,N,R,H,X,at,$;l instanceof ki?(l.fragment=(_=(f=l.constructedFrom)==null?void 0:f.fragment)!=null?_:null,l.fragmentPosition=(I=(m=l.constructedFrom)==null?void 0:m.fragmentPosition)!=null?I:3):l instanceof Fi?(l.fragment=(x=(v=l.constructedFrom)==null?void 0:v.fragment)!=null?x:null,l.fragmentPosition=(R=(N=l.constructedFrom)==null?void 0:N.fragmentPosition)!=null?R:3):l instanceof wi&&(l.fragment=(X=(H=l.constructedFrom)==null?void 0:H.fragment)!=null?X:null,l.fragmentPosition=($=(at=l.constructedFrom)==null?void 0:at.fragmentPosition)!=null?$:3)}),wo.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var s,r,h,u;e instanceof Xt||t.push({start:(r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0,end:(u=(h=e.endPosition)==null?void 0:h.index)!=null?u:0})}),t}createChildDocuments(t){t.forEach(e=>{var s,r,h,u,l,f,_,m;if(e instanceof pt&&e.isClosedBy!=null){let I=e.isClosedBy,v=((r=(s=e.startPosition)==null?void 0:s.index)!=null?r:0)-1,x=((u=(h=I.endPosition)==null?void 0:h.index)!=null?u:0)-v;e.nodeContent=this.content.substr(v,x);let N=(f=(l=e.endPosition)==null?void 0:l.index)!=null?f:0,R=((m=(_=I.startPosition)==null?void 0:_.index)!=null?m:0)-1-N,H=this.content.substr(N,R);e.childrenDocument=ge.childFromText(H,this,Qi(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}let t=Math.ceil(this.currentIndex/5);t>0&&(this.currentChunkOffset=this.parsingOffset+this.chunkSize*t),this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}parseIntermediateText(t){this.currentContent=[],this.chars=this.content.substring(t).split(""),this.charLen=this.chars.length;let e=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,e=!0;break}if(this.isStartingClosingComponentTag()){let s=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],e=!0;break}if(this.isStartingOpeningComponentTag()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingEscapedEcho()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(s),this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingBladeNodeStructure()){let s=this.peek(2),r=this.peek(3);if(s==Lt.Punctuation_Minus&&r==Lt.Punctuation_Minus){let h=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(h),this.currentContent=[],this.currentIndex+=4,e=!0;break}else if(s==Lt.LeftBrace){let h=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(h+1),this.currentContent=[],this.currentIndex+=3,e=!0;break}else{let h=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(h+1),this.currentContent=[],this.currentIndex+=2,e=!0;break}}}return e}peek(t){return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),$e(this.cur)&&bs(this),this.cur==Lt.Punctuation_ForwardSlash&&this.next==Lt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Bi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Lt.Punctuation_ForwardSlash&&this.next==Lt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Mi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Lt.Punctuation_QuestionMark&&this.next==Lt.Punctuation_GreaterThan||this.next==null){let s=new ri;e&&(s=new So),s.withParser(this),s.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),s.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let r=s.startPosition.index,h=s.endPosition.index-s.startPosition.index+1;s.sourceContent=this.content.substr(r,h),this.nodes.push(s),this.lastNode=s;break}}}scanToEndOfComponentTag(t,e){let s=!1,r=!1,h=-1,u=-1,l=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.NewLine&&!s&&(s=!0,h=this.currentIndex),Y.ctypeSpace(this.cur)&&!r&&(r=!0,u=this.currentIndex),$e(this.cur)){this.shouldIgnoreStructures=!0,bs(this),this.shouldIgnoreStructures=!1;continue}let f=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!f)&&(l=!0,h!=-1?(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2),this.didRecoveryLogic=!0):u!=-1&&(this.currentIndex=u-2,this.currentContent=this.currentContent.slice(0,u-2),this.didRecoveryLogic=!0)),f||l){let _=new Ii;_.withParser(this),_.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),_.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let m=_.startPosition.index,I=_.endPosition.index-_.startPosition.index+1,v=m+I;_.sourceContent=this.content.substr(m,I),_.isClosingTag=e,_.isSelfClosing=this.prev==Lt.Punctuation_ForwardSlash,_.offset={start:m,end:v,length:I};let x=3;_.isSelfClosing&&(x+=1),_.innerContent=this.content.substr(_.startPosition.index+3,_.endPosition.index-_.startPosition.index-x),l&&_.pushError(Ve.makeSyntaxError(Qt.TYPE_UNEXPECTED_END_OF_INPUT,_,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(_),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=_,this.nodes.push(_);break}}}scanToEndOfEscapedEcho(t){let e=!1,s=!1,r=-1,h=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(u=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2),this.didRecoveryLogic=!0)),this.cur==Lt.Punctuation_Exclamation&&this.next==Lt.Punctuation_Exclamation&&this.peekRelative(2)==Lt.RightBrace||u){let l=this.currentIndex+2,f=new On;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),f.withParser(this);let _=f.startPosition.index,m=f.endPosition.index-f.startPosition.index+1,I=_+m;f.sourceContent=this.content.substr(_,m),f.offset={start:_,end:I,length:m},u&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var l,f,_,m,I,v,x,N,R;let e=!1,s=!1,r=-1,h=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),this.next==null&&(u=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2),this.didRecoveryLogic=!0)),this.cur==Lt.Punctuation_Minus&&this.next==Lt.Punctuation_Minus||this.next==null){let H=this.peekRelative(2),X=this.peekRelative(3);if(H==Lt.RightBrace&&X==Lt.RightBrace||this.next==null){let at=this.currentIndex+3,$=new nn;$.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),$.endPosition=this.positionFromOffset(at+this.seedOffset,at+this.seedOffset),$.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(at-4+this.seedOffset,at-4+this.seedOffset)},$.withParser(this);let z=$.startPosition.index,ht=$.endPosition.index-$.startPosition.index+1,F=z+ht;$.sourceContent=this.content.substr(z,ht),$.offset={start:z,end:F,length:ht},u&&$.pushError(Ve.makeSyntaxError(Qt.TYPE_UNCLOSED_COMMENT,$,"Unexpected end of input while parsing comment",0)),$.innerContent=this.content.substr((_=(f=(l=$.innerContentPosition)==null?void 0:l.start)==null?void 0:f.index)!=null?_:0,((v=(I=(m=$.innerContentPosition)==null?void 0:m.end)==null?void 0:I.index)!=null?v:0)-((R=(N=(x=$.innerContentPosition)==null?void 0:x.start)==null?void 0:N.index)!=null?R:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=$,this.nodes.push($);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,s=!1,r=-1,h=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),$e(this.cur)){let l=this.cur;this.shouldIgnoreStructures=!0;let f=Ri(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(l),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(l),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(u=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2),this.didRecoveryLogic=!0)),this.cur==Lt.RightBrace&&this.next==Lt.RightBrace&&this.peekRelative(2)==Lt.RightBrace||u){let l=this.currentIndex+1,f=new Pn;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),f.withParser(this);let _=f.startPosition.index-1,m=f.endPosition.index-f.startPosition.index+3,I=_+m;f.sourceContent=this.content.substr(_,m),f.offset={start:_,end:I,length:m},u&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,s=!1,r=-1,h=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.NewLine&&!e&&(e=!0,r=this.currentIndex),Y.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),$e(this.cur)){let l=this.cur;this.shouldIgnoreStructures=!0;let f=Ri(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(l),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(l),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(u=!0,r!=-1?(this.currentIndex=r-2,this.currentContent=this.currentContent.slice(0,r-2),this.didRecoveryLogic=!0):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2),this.didRecoveryLogic=!0)),this.cur==Lt.RightBrace&&this.next==Lt.RightBrace||u){let l=this.currentIndex+1,f=new Oe;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(l+this.seedOffset,l+this.seedOffset),f.withParser(this);let _=f.startPosition.index-1,m=f.endPosition.index-f.startPosition.index+2,I=_+m;f.sourceContent=this.content.substr(_,m),f.offset={start:_,end:I,length:m},u&&f.pushError(Ve.makeSyntaxError(Qt.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,s){let r=new pt;if(r.withParser(this),t==Ot.Verbatim)this.isVerbatim=!0;else if(t==Ot.Php)this.isPhpNode=!0;else if((t==Ot.EndVerbatim||t==Ot.EndPhp)&&this.nodes[this.nodes.length-1]instanceof Xt){let _=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof pt){let m=this.nodes[this.nodes.length-1];(m.directiveName==Ot.Verbatim||m.directiveName==Ot.Php)&&(m.innerContent=_.content)}}r.directiveName=t.trim(),r.name=t.trim();let h=r.name.toLowerCase();h=="endcan"||h=="endcannot"||h=="endauth"||h=="endguest"||h=="endenv"||h=="endproduction"?(r.name="if",r.isClosingDirective=!0):t.startsWith("end")?r.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(r.name="elseif");let u=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),l=this.positionFromOffset(this.seedOffset+s,this.seedOffset+s);if(r.startPosition=u,r.endPosition=l,r.namePosition={start:u,end:l},r.hasDirectiveParameters=!1,r.startPosition!=null&&r.endPosition!=null){let f=r.startPosition.index-1,_=r.endPosition.index-r.startPosition.index+1,m=f+_;r.sourceContent=this.content.substr(f,_),r.offset={start:f,end:m,length:_}}return r}makeDirectiveWithParameters(t,e,s,r){var _,m;let h=this.makeDirective(t.trim(),e,s);this.isPhpNode&&t==Ot.Php&&(this.isPhpNode=!1),h.hasDirectiveParameters=!0,h.directiveParameters=r.content;let u=r.content.trim();u.startsWith("(")&&u.endsWith(")")&&(u=u.substring(1),u=u.substring(0,u.length-1),u=u.trim(),h.hasJsonParameters=u.startsWith("{")&&u.endsWith("}"));let l=this.positionFromOffset(r.start,r.start),f=this.positionFromOffset(r.end,r.end);if(h.startPosition=(m=(_=h.namePosition)==null?void 0:_.start)!=null?m:null,h.endPosition=f,h.directiveParametersPosition={start:l,end:f},h.startPosition!=null&&h.endPosition!=null){let I=h.startPosition.index-1,v=h.endPosition.index-h.startPosition.index+1,x=I+v;h.sourceContent=this.content.substr(I,v),h.offset={start:I,end:x,length:v}}return h}scanToEndOfDirective(){let t=this.currentIndex,e="",s=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==Lt.Punctuation_ForwardSlash&&this.next==Lt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Mi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Lt.Punctuation_ForwardSlash&&this.next==Lt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Bi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==Lt.NewLine){s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let r=Xs(this);if(this.cur!=Lt.LeftParen&&r.didFind&&Y.ctypePunct(r.char)&&r.char!=Lt.LeftParen&&r.char!=Lt.Punctuation_Minus&&r.char!="."){let h=0,u=!1;Y.ctypeSpace(this.cur)?(h=1,u=!0):this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let l=this.makeDirective(e.trim(),t,s-h);this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-h,u&&(this.currentIndex-=1);break}if(Y.ctypeSpace(this.cur)){let h=Xs(this);if(h.didFind&&h.char==Lt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=h.index,this.checkCurrentOffsets();let u=Zs(this),l;u.foundEnd?l=this.makeDirectiveWithParameters(e.trim(),t,s,u):(l=this.makeDirective(e.trim(),t,s),this.didRecoveryLogic=!0),this.lastNode=l,this.nodes.push(l),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let u=this.makeDirective(e.trim(),t,s);this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==Lt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let h=Zs(this),u;h.foundEnd?u=this.makeDirectiveWithParameters(e.trim(),t,s,h):u=this.makeDirective(e.trim(),t,s+1),this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(s=>{var r,h,u,l,f;if(s instanceof Xt)e+=s.content;else if(s instanceof Fi)e+=s.nodeContent;else if(s instanceof wi)e+=s.nodeContent;else if(s instanceof ki)e+=s.nodeContent;else if(s instanceof pt)if((s.name=="php"||s.name=="verbatim")&&s.isClosedBy!=null){if(s.documentContent.trim().length==0){let _=(f=s.getParser())==null?void 0:f.getText((h=(r=s.endPosition)==null?void 0:r.index)!=null?h:0,((l=(u=s.isClosedBy.startPosition)==null?void 0:u.index)!=null?l:0)-1);e+=s.sourceContent,e+=_}}else e+=s.sourceContent;else e+=s.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let s=[];return this.nodes.forEach(r=>{var h,u,l,f;((u=(h=r.startPosition)==null?void 0:h.offset)!=null?u:0)>t.offset&&((f=(l=r.endPosition)==null?void 0:l.offset)!=null?f:0)<e.offset&&s.push(r)}),s}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,s=!1){let r=0,h=0;if(this.documentOffsets.has(t)){let l=this.documentOffsets.get(t);r=l.line,h=l.char}else if(this.documentOffsets.size==0)r=1,h=t+1;else{let l=null,f=null,_=null,m=null;for(let I of this.documentOffsets.keys()){if(I>=t){m!=null&&t>m?(l=_,f=m):(l=this.documentOffsets.get(I),f=I);break}_=this.documentOffsets.get(I),m=I}l==null&&(l=_,f=m),l!=null?(h=t-(f!=null?f:0),r=l.line,t<=(f!=null?f:0)?(r=l.line,h=t+1):r=l.line+1):this.lastDocumentOffsetKey!=null&&(r=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let u=new Dn;return u.index=e,u.offset=t,u.line=r+this.shiftLine,u.char=h,u}},et=Lt;et.K_CHAR="char",et.K_LINE="line",et.NewLine=`
`,et.AtChar="@",et.Punctuation_Colon=":",et.Punctuation_QuestionMark="?",et.LeftParen="(",et.RightParen=")",et.LeftBrace="{",et.RightBrace="}",et.String_Terminator_DoubleQuote='"',et.String_Terminator_SingleQuote="'",et.Punctuation_LessThan="<",et.Punctuation_GreaterThan=">",et.Punctuation_Equals="=",et.Punctuation_Exclamation="!",et.LeftBracket="[",et.RightBracket="]",et.Punctuation_Comma=",",et.Punctuation_Minus="-",et.Punctuation_Asterisk="*",et.Punctuation_ForwardSlash="/",et.Punctuation_Underscore="_",et.String_EscapeCharacter="\\"});var oi,vh=bt(()=>{"use strict";we();oi=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!oi.isLiteralType(r)&&r.startPosition!=null&&r.startPosition.index>t.index)return r}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let s=null;for(let r=0;r<e.length;r++){let h=e[r];if(!oi.isLiteralType(h)&&h.startPosition!=null){if(h.startPosition.index>t.index)break;s=h}}return s}static findNodeAtPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let r=e[s];if(!oi.isLiteralType(r)&&r.startPosition!=null&&r.endPosition!=null&&t.index>=r.startPosition.index&&t.index<=r.endPosition.index)return r}return null}static isLiteralType(t){return t instanceof Xt}static findNodesBeforePosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];if(!oi.isLiteralType(h)&&h.startPosition!=null&&h.endPosition!=null){if(h.startPosition.index>t.index)break;s.push(h)}}return s}static findNodesAfterPosition(t,e){let s=[];if(t==null)return s;for(let r=0;r<e.length;r++){let h=e[r];oi.isLiteralType(h)||h.startPosition!=null&&h.startPosition.index>t.index&&s.push(h)}return s}}});var qo,Hf=bt(()=>{"use strict";vh();qo=class{constructor(t){this.doc=t}getNodeAt(t,e){return oi.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return oi.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return oi.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return oi.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return oi.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,s=4){return this.doc.getParser().wordLeftAtCursor(t,e,s)}wordRightAt(t,e,s=4){return this.doc.getParser().wordRightAtCursor(t,e,s)}wordAt(t,e,s=4){return this.doc.getParser().wordAtCursor(t,e,s)}punctuationLeftAt(t,e,s=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,s)}punctuationRightAt(t,e,s=4){return this.doc.getParser().punctuationRightAtCursor(t,e,s)}}});var Go,Wf=bt(()=>{"use strict";Go=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(s=>{s.getErrors().forEach(r=>{t.includes(r.hash())==!1&&(t.push(r.hash()),e.push(r))})}),this.doc.getParser().getErrors().forEach(s=>{t.includes(s.hash())==!1&&(t.push(s.hash()),e.push(s))}),e}}});var Yo,qf=bt(()=>{"use strict";we();vh();Yo=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let s=0;s<e.length;s++){let r=e[s];if(r instanceof pt&&r.directiveName==t)return r}return null}getNodeAt(t){return oi.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return oi.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return oi.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return oi.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return oi.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof nn&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Xt&&t.push(e)}),t}}});var K,yh=bt(()=>{"use strict";K=class{};K.IfStatement="if",K.CallStatement="call",K.TernaryStatement="ternary",K.Addition="addition",K.Substraction="subtraction",K.Multiplication="multiplication",K.Division="division",K.Modulus="modulus",K.Exponentiation="exponentiation",K.BinCompare="compare",K.Concat="concat",K.GreaterThan="greater_than",K.GreaterThanEqual="greater_than_equal",K.LessThan="less_than",K.LessThanEqual="less_than_equal",K.BitwiseAnd="bitwise_and",K.BitwiseOr="bitiwse_or",K.BitwiseXor="bitiwse_xor",K.LeftShift="left_shift",K.RightShift="right_shift",K.Equality="equality",K.Identity="identitiy",K.Inequality="inequality",K.NotIdentity="not_identity",K.CompAnd="and",K.CompOr="or",K.Xor="xor",K.Assignment="assign",K.AdditionAssignment="assign_addition",K.SubtractionAssignment="assign_subtraciton",K.MultiplicationAssignment="assign_multiplication",K.DivisionAssignment="assign_division",K.ModulusAssignment="assign_modulus",K.ConcatenationAssignment="assign_concat",K.BitwiseAndAssignment="assign_bitwise_and",K.BitwiseOrAssignment="assign_bitwise_or",K.BitwiseXorAssignment="assign_bitwise_xor",K.LeftShiftAssignment="assign_left_shift",K.RightShiftAssignment="assign_right_shift"});function er(){return{enabled:!0,directivesEnabled:!0,excludedDirectives:["if","unless","elseif","for","forelse","foreach"],allowedMethodNames:["class"],directives:[],bladePhpEnabled:!0,phpTagsEnabled:!0,phpTagRules:[],ignoredLanguageStructures:[K.CallStatement,K.IfStatement,K.TernaryStatement,K.BinCompare,K.Addition,K.Substraction,K.Multiplication,K.Division,K.Modulus,K.Exponentiation,K.Concat,K.GreaterThan,K.GreaterThanEqual,K.LessThan,K.LessThanEqual,K.BitwiseAnd,K.BitwiseOr,K.BitwiseXor,K.LeftShift,K.RightShift,K.Equality,K.Identity,K.Inequality,K.NotIdentity,K.CompAnd,K.CompOr,K.Xor,K.AdditionAssignment,K.SubtractionAssignment,K.MultiplicationAssignment,K.DivisionAssignment,K.ModulusAssignment,K.ConcatenationAssignment,K.BitwiseAndAssignment,K.BitwiseOrAssignment,K.BitwiseXorAssignment,K.LeftShiftAssignment,K.RightShiftAssignment],bladeEchoEnabled:!0,bladeEchoRules:[],documentRules:{includeWhen:[],excludeWhen:[]},stringRules:{includeWhen:[],excludeWhen:[]}}}function Gf(i){var r,h,u,l,f,_,m,I,v,x,N;let t=er();function e(R){var H,X;return{includeWhen:(H=R.includeWhen)!=null?H:[],excludeWhen:(X=R.excludeWhen)!=null?X:[]}}function s(R,H){var X,at;return!R||!R.includeWhen&&!R.excludeWhen?H:{excludeWhen:(X=R.excludeWhen)!=null?X:[],includeWhen:(at=R.includeWhen)!=null?at:[]}}return{enabled:(r=i.enabled)!=null?r:t.enabled,allowedMethodNames:(h=i.allowedMethodNames)!=null?h:t.allowedMethodNames,directivesEnabled:(u=i.directivesEnabled)!=null?u:t.directivesEnabled,excludedDirectives:(l=i.excludedDirectives)!=null?l:t.excludedDirectives,directives:((f=i.directives)!=null?f:t.directives).map(e),bladePhpEnabled:(_=i.bladePhpEnabled)!=null?_:t.bladePhpEnabled,phpTagsEnabled:(m=i.phpTagsEnabled)!=null?m:t.phpTagsEnabled,phpTagRules:((I=i.phpTagRules)!=null?I:t.phpTagRules).map(e),ignoredLanguageStructures:(v=i.ignoredLanguageStructures)!=null?v:t.ignoredLanguageStructures,bladeEchoEnabled:(x=i.bladeEchoEnabled)!=null?x:t.bladeEchoEnabled,bladeEchoRules:((N=i.bladeEchoRules)!=null?N:t.bladeEchoRules).map(e),documentRules:s(i.documentRules,t.documentRules),stringRules:s(i.stringRules,t.stringRules)}}var jo,Qo=bt(()=>{"use strict";yh();we();jo=class{constructor(t){this.directiveExcludeRules=[];this.directiveIncludeRules=[];this.phpTagExcludeRules=[];this.phpTagIncludeRules=[];this.echoExcludeRules=[];this.echoIncludeRules=[];this.documentExcludeRules=[];this.documentIncludeRules=[];this.stringExcludeRules=[];this.stringIncludeRules=[];this.config=t,this.directiveExcludeRules=this.getExcludeRules(t.directives),this.directiveIncludeRules=this.getIncludeRules(t.directives),this.phpTagExcludeRules=this.getExcludeRules(t.phpTagRules),this.phpTagIncludeRules=this.getIncludeRules(t.phpTagRules),this.echoExcludeRules=this.getExcludeRules(t.bladeEchoRules),this.echoIncludeRules=this.getIncludeRules(t.bladeEchoRules),this.documentExcludeRules=t.documentRules.excludeWhen,this.documentIncludeRules=t.documentRules.includeWhen,this.stringExcludeRules=t.stringRules.excludeWhen,this.stringIncludeRules=t.stringRules.includeWhen}getIncludeRules(t){let e=[];return t.forEach(s=>{e=e.concat(s.includeWhen)}),e}getExcludeRules(t){let e=[];return t.forEach(s=>{e=e.concat(s.excludeWhen)}),e}passes(t,e){if(e.length==0)return!0;for(let s=0;s<e.length;s++)if(new RegExp(e[s]).test(t))return!0;return!1}canTransformDocument(t){if(!this.config.enabled)return!1;let e=t.getContent();return this.documentExcludeRules.length>0&&!this.passes(e,this.documentExcludeRules)?!1:this.passes(e,this.documentIncludeRules)}canTransformString(t){return this.stringExcludeRules.length>0&&this.passes(t,this.stringExcludeRules)?!1:this.passes(t,this.stringIncludeRules)}canTransform(t,e,s){return e.length>0&&this.passes(t,e)||!this.passes(t,s)||this.stringExcludeRules.length>0&&this.passes(t,this.stringExcludeRules)?!1:this.passes(t,this.stringIncludeRules)}canTransformBladeEcho(t){return!this.config.enabled||!this.config.bladeEchoEnabled?!1:this.canTransform(t.content,this.echoExcludeRules,this.echoIncludeRules)}canTransformBladePhp(t){return!this.config.enabled||!this.config.bladePhpEnabled?!1:this.canTransform(t.documentContent,this.phpTagExcludeRules,this.phpTagIncludeRules)}canTransformInlinePhp(t){return!this.config.enabled||!this.config.phpTagsEnabled?!1:this.canTransform(t.sourceContent,this.phpTagExcludeRules,this.phpTagIncludeRules)}canTransformDirective(t){if(!this.config.enabled||!this.config.directivesEnabled)return!1;let e=t.directiveName;return t.originalAbstractNode!=null&&t.originalAbstractNode instanceof pt&&(e=t.originalAbstractNode.directiveName),e=e.toLowerCase(),this.config.excludedDirectives.length>0&&(this.config.excludedDirectives.includes(e)||this.config.excludedDirectives.includes(t.directiveName.toLocaleLowerCase()))?!1:this.canTransform(t.sourceContent,this.directiveExcludeRules,this.directiveIncludeRules)}}});var zo,ti,Ko=bt(()=>{"use strict";we();cn();In();us();cs();An();We();zo=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return zo.breakOperators.some(e=>t.includes(e))}parse(t){for(this.tokens=[],this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if($e(this.cur)){let e=this.cur,s=Ri(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_ForwardSlash){Bi(this,!0);continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur!=null)if(this.cur==="!"&&this.next!=="="){if(this.currentContent.length>0){let s=new Xt;s.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(s)}let e=new vr;e.sourceContent=this.cur,this.tokens.push(e),this.currentContent=[];continue}else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Xt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="",s=!1;return this.tokens.forEach(r=>{if(r instanceof vr){s=!0,e+=r.sourceContent+" ";return}r instanceof Xt&&(s?e+=r.content.trimLeft():e+=r.content),s=!1}),e}},ti=zo;ti.breakOperators=["!"],ti.instance=new zo});var jf=V(($o,Yf)=>{(function(i,t){typeof $o=="object"&&typeof Yf<"u"?t($o,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((i=typeof globalThis<"u"?globalThis:i||self).prettierPlugins=i.prettierPlugins||{},i.prettierPlugins.php={}),i.prettier)})($o,function(i,t){"use strict";function e(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var s=e(t);function r(n,o){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);o&&(c=c.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,c)}return a}function h(n){for(var o=1;o<arguments.length;o++){var a=arguments[o]!=null?arguments[o]:{};o%2?r(Object(a),!0).forEach(function(c){f(n,c,a[c])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):r(Object(a)).forEach(function(c){Object.defineProperty(n,c,Object.getOwnPropertyDescriptor(a,c))})}return n}function u(){u=function(){return n};var n={},o=Object.prototype,a=o.hasOwnProperty,c=typeof Symbol=="function"?Symbol:{},d=c.iterator||"@@iterator",T=c.asyncIterator||"@@asyncIterator",b=c.toStringTag||"@@toStringTag";function g(ot,rt,Gt){return Object.defineProperty(ot,rt,{value:Gt,enumerable:!0,configurable:!0,writable:!0}),ot[rt]}try{g({},"")}catch{g=function(rt,Gt,jt){return rt[Gt]=jt}}function S(ot,rt,Gt,jt){var Dt=rt&&rt.prototype instanceof Vt?rt:Vt,Ne=Object.create(Dt.prototype),Re=new Ue(jt||[]);return Ne._invoke=function(ze,gi,oe){var Ye="suspendedStart";return function(Li,os){if(Ye==="executing")throw new Error("Generator is already running");if(Ye==="completed"){if(Li==="throw")throw os;return mi()}for(oe.method=Li,oe.arg=os;;){var as=oe.delegate;if(as){var ln=xe(as,oe);if(ln){if(ln===y)continue;return ln}}if(oe.method==="next")oe.sent=oe._sent=oe.arg;else if(oe.method==="throw"){if(Ye==="suspendedStart")throw Ye="completed",oe.arg;oe.dispatchException(oe.arg)}else oe.method==="return"&&oe.abrupt("return",oe.arg);Ye="executing";var Zi=A(ze,gi,oe);if(Zi.type==="normal"){if(Ye=oe.done?"completed":"suspendedYield",Zi.arg===y)continue;return{value:Zi.arg,done:oe.done}}Zi.type==="throw"&&(Ye="completed",oe.method="throw",oe.arg=Zi.arg)}}}(ot,Gt,Re),Ne}function A(ot,rt,Gt){try{return{type:"normal",arg:ot.call(rt,Gt)}}catch(jt){return{type:"throw",arg:jt}}}n.wrap=S;var y={};function Vt(){}function Mt(){}function ue(){}var me={};g(me,d,function(){return this});var Wt=Object.getPrototypeOf,ye=Wt&&Wt(Wt(hn([])));ye&&ye!==o&&a.call(ye,d)&&(me=ye);var te=ue.prototype=Vt.prototype=Object.create(me);function Ae(ot){["next","throw","return"].forEach(function(rt){g(ot,rt,function(Gt){return this._invoke(rt,Gt)})})}function Se(ot,rt){function Gt(Dt,Ne,Re,ze){var gi=A(ot[Dt],ot,Ne);if(gi.type!=="throw"){var oe=gi.arg,Ye=oe.value;return Ye&&typeof Ye=="object"&&a.call(Ye,"__await")?rt.resolve(Ye.__await).then(function(Li){Gt("next",Li,Re,ze)},function(Li){Gt("throw",Li,Re,ze)}):rt.resolve(Ye).then(function(Li){oe.value=Li,Re(oe)},function(Li){return Gt("throw",Li,Re,ze)})}ze(gi.arg)}var jt;this._invoke=function(Dt,Ne){function Re(){return new rt(function(ze,gi){Gt(Dt,Ne,ze,gi)})}return jt=jt?jt.then(Re,Re):Re()}}function xe(ot,rt){var Gt=ot.iterator[rt.method];if(Gt===void 0){if(rt.delegate=null,rt.method==="throw"){if(ot.iterator.return&&(rt.method="return",rt.arg=void 0,xe(ot,rt),rt.method==="throw"))return y;rt.method="throw",rt.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var jt=A(Gt,ot.iterator,rt.arg);if(jt.type==="throw")return rt.method="throw",rt.arg=jt.arg,rt.delegate=null,y;var Dt=jt.arg;return Dt?Dt.done?(rt[ot.resultName]=Dt.value,rt.next=ot.nextLoc,rt.method!=="return"&&(rt.method="next",rt.arg=void 0),rt.delegate=null,y):Dt:(rt.method="throw",rt.arg=new TypeError("iterator result is not an object"),rt.delegate=null,y)}function ee(ot){var rt={tryLoc:ot[0]};1 in ot&&(rt.catchLoc=ot[1]),2 in ot&&(rt.finallyLoc=ot[2],rt.afterLoc=ot[3]),this.tryEntries.push(rt)}function be(ot){var rt=ot.completion||{};rt.type="normal",delete rt.arg,ot.completion=rt}function Ue(ot){this.tryEntries=[{tryLoc:"root"}],ot.forEach(ee,this),this.reset(!0)}function hn(ot){if(ot){var rt=ot[d];if(rt)return rt.call(ot);if(typeof ot.next=="function")return ot;if(!isNaN(ot.length)){var Gt=-1,jt=function Dt(){for(;++Gt<ot.length;)if(a.call(ot,Gt))return Dt.value=ot[Gt],Dt.done=!1,Dt;return Dt.value=void 0,Dt.done=!0,Dt};return jt.next=jt}}return{next:mi}}function mi(){return{value:void 0,done:!0}}return Mt.prototype=ue,g(te,"constructor",ue),g(ue,"constructor",Mt),Mt.displayName=g(ue,b,"GeneratorFunction"),n.isGeneratorFunction=function(ot){var rt=typeof ot=="function"&&ot.constructor;return!!rt&&(rt===Mt||(rt.displayName||rt.name)==="GeneratorFunction")},n.mark=function(ot){return Object.setPrototypeOf?Object.setPrototypeOf(ot,ue):(ot.__proto__=ue,g(ot,b,"GeneratorFunction")),ot.prototype=Object.create(te),ot},n.awrap=function(ot){return{__await:ot}},Ae(Se.prototype),g(Se.prototype,T,function(){return this}),n.AsyncIterator=Se,n.async=function(ot,rt,Gt,jt,Dt){Dt===void 0&&(Dt=Promise);var Ne=new Se(S(ot,rt,Gt,jt),Dt);return n.isGeneratorFunction(rt)?Ne:Ne.next().then(function(Re){return Re.done?Re.value:Ne.next()})},Ae(te),g(te,b,"Generator"),g(te,d,function(){return this}),g(te,"toString",function(){return"[object Generator]"}),n.keys=function(ot){var rt=[];for(var Gt in ot)rt.push(Gt);return rt.reverse(),function jt(){for(;rt.length;){var Dt=rt.pop();if(Dt in ot)return jt.value=Dt,jt.done=!1,jt}return jt.done=!0,jt}},n.values=hn,Ue.prototype={constructor:Ue,reset:function(ot){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(be),!ot)for(var rt in this)rt.charAt(0)==="t"&&a.call(this,rt)&&!isNaN(+rt.slice(1))&&(this[rt]=void 0)},stop:function(){this.done=!0;var ot=this.tryEntries[0].completion;if(ot.type==="throw")throw ot.arg;return this.rval},dispatchException:function(ot){if(this.done)throw ot;var rt=this;function Gt(gi,oe){return Ne.type="throw",Ne.arg=ot,rt.next=gi,oe&&(rt.method="next",rt.arg=void 0),!!oe}for(var jt=this.tryEntries.length-1;jt>=0;--jt){var Dt=this.tryEntries[jt],Ne=Dt.completion;if(Dt.tryLoc==="root")return Gt("end");if(Dt.tryLoc<=this.prev){var Re=a.call(Dt,"catchLoc"),ze=a.call(Dt,"finallyLoc");if(Re&&ze){if(this.prev<Dt.catchLoc)return Gt(Dt.catchLoc,!0);if(this.prev<Dt.finallyLoc)return Gt(Dt.finallyLoc)}else if(Re){if(this.prev<Dt.catchLoc)return Gt(Dt.catchLoc,!0)}else{if(!ze)throw new Error("try statement without catch or finally");if(this.prev<Dt.finallyLoc)return Gt(Dt.finallyLoc)}}}},abrupt:function(ot,rt){for(var Gt=this.tryEntries.length-1;Gt>=0;--Gt){var jt=this.tryEntries[Gt];if(jt.tryLoc<=this.prev&&a.call(jt,"finallyLoc")&&this.prev<jt.finallyLoc){var Dt=jt;break}}Dt&&(ot==="break"||ot==="continue")&&Dt.tryLoc<=rt&&rt<=Dt.finallyLoc&&(Dt=null);var Ne=Dt?Dt.completion:{};return Ne.type=ot,Ne.arg=rt,Dt?(this.method="next",this.next=Dt.finallyLoc,y):this.complete(Ne)},complete:function(ot,rt){if(ot.type==="throw")throw ot.arg;return ot.type==="break"||ot.type==="continue"?this.next=ot.arg:ot.type==="return"?(this.rval=this.arg=ot.arg,this.method="return",this.next="end"):ot.type==="normal"&&rt&&(this.next=rt),y},finish:function(ot){for(var rt=this.tryEntries.length-1;rt>=0;--rt){var Gt=this.tryEntries[rt];if(Gt.finallyLoc===ot)return this.complete(Gt.completion,Gt.afterLoc),be(Gt),y}},catch:function(ot){for(var rt=this.tryEntries.length-1;rt>=0;--rt){var Gt=this.tryEntries[rt];if(Gt.tryLoc===ot){var jt=Gt.completion;if(jt.type==="throw"){var Dt=jt.arg;be(Gt)}return Dt}}throw new Error("illegal catch attempt")},delegateYield:function(ot,rt,Gt){return this.delegate={iterator:hn(ot),resultName:rt,nextLoc:Gt},this.method==="next"&&(this.arg=void 0),y}},n}function l(n){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(o){return typeof o}:function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},l(n)}function f(n,o,a){return o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n}function _(n,o){return function(a){if(Array.isArray(a))return a}(n)||function(a,c){var d=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(d!=null){var T,b,g=[],S=!0,A=!1;try{for(d=d.call(a);!(S=(T=d.next()).done)&&(g.push(T.value),!c||g.length!==c);S=!0);}catch(y){A=!0,b=y}finally{try{S||d.return==null||d.return()}finally{if(A)throw b}}return g}}(n,o)||I(n,o)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function m(n){return function(o){if(Array.isArray(o))return v(o)}(n)||function(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}(n)||I(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function I(n,o){if(n){if(typeof n=="string")return v(n,o);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(n):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?v(n,o):void 0}}function v(n,o){(o==null||o>n.length)&&(o=n.length);for(var a=0,c=new Array(o);a<o;a++)c[a]=n[a];return c}function x(n,o){var a=typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(!a){if(Array.isArray(n)||(a=I(n))||o&&n&&typeof n.length=="number"){a&&(n=a);var c=0,d=function(){};return{s:d,n:function(){return c>=n.length?{done:!0}:{done:!1,value:n[c++]}},e:function(S){throw S},f:d}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var T,b=!0,g=!1;return{s:function(){a=a.call(n)},n:function(){var S=a.next();return b=S.done,S},e:function(S){g=!0,T=S},f:function(){try{b||a.return==null||a.return()}finally{if(g)throw T}}}}var N={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){var n=this.input();if(this.is_WHITESPACE()){do n=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(n){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||n==="\\"){for(;this.offset<this.size;){var o=this.input();if(!this.is_LABEL()&&o!=="\\"){o&&this.unput(1);break}}return this.T_STRING()}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(n,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};N.attributeIndex,N.attributeListDepth,N.matchST_ATTRIBUTE;var R={T_COMMENT:function(){for(;this.offset<this.size;){var n=this.input();if(n===`
`||n==="\r")return this.tok.T_COMMENT;if(n==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(n==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var n=this.input(),o=this.tok.T_COMMENT;if(n==="*"){if(n=this.input(),this.is_WHITESPACE()&&(o=this.tok.T_DOC_COMMENT),n==="/")return o;this.unput(1)}for(;this.offset<this.size;)if((n=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return o}};R.T_COMMENT,R.T_DOC_COMMENT;var H={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var n=this.input();if(n=="<"){if((n=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((n=this._input[this.offset+4])===" "||n==="	"||n===`
`||n==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&n=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};H.nextINITIAL,H.matchINITIAL;var X={consume_NUM:function(){var n=this.yytext[0],o=n===".";if(n==="0")if((n=this.input())==="x"||n==="X"){if((n=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(n?2:1)}else if(n==="b"||n==="B"){if((n=this.input())!=="_"&&n==="0"||n==="1")return this.consume_BNUM();this.unput(n?2:1)}else if(n==="o"||n==="O"){if((n=this.input())!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(n?2:1)}else this.is_NUM()||n&&this.unput(1);for(;this.offset<this.size;){var a=n;if((n=this.input())==="_"){if(a==="_"){this.unput(2);break}if(a==="."){this.unput(1);break}if(a==="e"||a==="E"){this.unput(2);break}}else{if(n==="."){if(o){this.unput(1);break}if(a==="_"){this.unput(2);break}o=!0;continue}if(n==="e"||n==="E"){if(a==="_"){this.unput(1);break}var c=2;if((n=this.input())!=="+"&&n!=="-"||(c=3,n=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(n?c:c-1);break}}if(!this.is_NUM()){n&&this.unput(1);break}}return o?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_HEX()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_NUM()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var n;this.offset<this.size;)if((n=this.input())!=="0"&&n!=="1"&&n!=="_"){n&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_OCTAL()){n&&this.unput(1);break}}return this.tok.T_LNUMBER}};X.consume_NUM,X.consume_HNUM,X.consume_LNUM,X.consume_BNUM,X.consume_ONUM;var at={matchST_LOOKING_FOR_PROPERTY:function(){var n=this.input();if(n==="-"){if((n=this.input())===">")return this.tok.T_OBJECT_OPERATOR;n&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),n&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var n=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(n=this.input())==="["||n==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else n&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var n=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(n==="]")return this.popState(),"]";if(n==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||n==="\\"||n==="'"||n==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(n==="["||n==="{"||n==="}"||n==='"'||n==="`"||this.is_TOKEN())return n;throw new Error("Unexpected terminal")}};at.matchST_LOOKING_FOR_PROPERTY,at.matchST_LOOKING_FOR_VARNAME,at.matchST_VAR_OFFSET;var $={matchST_IN_SCRIPTING:function(){var n=this.input();switch(n){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var o=this._input[this.offset];return o!==`
`&&o!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(n=this._input[this.offset])!==`
`&&n!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(n==="."){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+n+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var n=this.input();if(n!==" "&&n!=="	"&&n!==`
`&&n!=="\r"){n&&this.unput(1);break}}return this.tok.T_WHITESPACE}};$.matchST_IN_SCRIPTING,$.T_WHITESPACE;var z=[`
`,"\r"],ht=[`
`,"\r",";"],F=ht.concat(["	"," ",",","]",")","/","=","!"]),q={T_CONSTANT_ENCAPSED_STRING:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else if(n=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var n=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var o=this._input[this.offset-1];if(o==="'"||o==='"'?this.offset++:o=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var c=this._input.substring(a,this.offset-1);if((!o||o===this._input[this.offset-1])&&(o&&this.offset++,z.includes(this._input[this.offset-1])))return this.heredoc_label.label=c,this.heredoc_label.length=c.length,this.heredoc_label.finished=!1,a=this.offset-n,this.offset=n,this.consume(a),o==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=n,!1},ST_DOUBLE_QUOTES:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else{if(n=='"')break;if(n=="$"){if((n=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if(n=="{"){if((n=this.input())=="$"){this.unput(2);break}n&&this.unput(1)}}if(n=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var o=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(o=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-o),this.unput(this.yytext.length-o),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(n,o){var a=this._input[n-2];if(!z.includes(a))return!1;var c=!1,d=!1,T=0,b=this._input[n-1];if(this.version>=703){for(;b==="	"||b===" ";)b===" "?c=!0:b==="	"&&(d=!0),b=this._input[n+T],T++;if(n+=T,z.includes(this._input[n-1]))return!1}if(this._input.substring(n-1,n-1+this.heredoc_label.length)===this.heredoc_label.label){var g=this._input[n-1+this.heredoc_label.length];if((this.version>=703?F:ht).includes(g)){if(o){if(this.consume(T),c&&d)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=T,this.heredoc_label.indentation_uses_spaces=c,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var n=this.offset+1;n<this._input.length;){if(this.isDOC_MATCH(n,!1))return;if(!z.includes(this._input[n-1]))for(;!z.includes(this._input[n++])&&n<this._input.length;);n++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var n=this._input[this.offset-1];this.offset<this.size;)if(z.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(n==="\\"&&(n=this.input(),z.includes(n)||(n=this.input())),z.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var n=this.input();if(n=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(n==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else n&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==="`")return this.popState(),"`";for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}continue}if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==='"')return this.popState(),'"';for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var o=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-o+2?(this.appendToken(a,this.offset-o+2),this.unput(this.offset-o+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}n&&this.unput(1)}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};q.T_CONSTANT_ENCAPSED_STRING,q.is_HEREDOC,q.ST_DOUBLE_QUOTES,q.isDOC_MATCH,q.prematch_ENDOFDOC,q.matchST_NOWDOC,q.matchST_HEREDOC,q.consume_VARIABLE,q.matchST_BACKQUOTE,q.matchST_DOUBLE_QUOTES;var gt={T_STRING:function(){var n=this.yytext.toLowerCase(),o=this.keywords[n];if(typeof o!="number"){if(n==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),o=this.tok.T_YIELD_FROM):o=this.tok.T_YIELD;else if(o=this.tok.T_STRING,n==="b"||n==="B"){var a=this.input();if(a==='"')return this.ST_DOUBLE_QUOTES();if(a==="'")return this.T_CONSTANT_ENCAPSED_STRING();a&&this.unput(1)}}if(o===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;for(var c=this.offset,d=this.input();d==" ";)d=this.input();var T=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)d+=this.input();var b=d.slice(0,-1).toLowerCase();T=b!=="extends"&&b!=="implements"}return this.unput(this.offset-c),T?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&o!==this.tok.T_YIELD_FROM){var g=this.input();if(g==="\\"){o=n==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),g=this.input()}while(g==="\\")}g&&this.unput(1)}return o},consume_TOKEN:function(){var n=this._input[this.offset-1],o=this.tokenTerminals[n];return o?o.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var n=this._input[this.offset];return n===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):n==="-"?(this.input(),this.tok.T_DEC):n==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size){if(this.input(),this.is_LABEL_START()){var n;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),n=this.input()}while(n==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}this.unput(1)}return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var n=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var o=this.yytext.length;this.consume_LABEL();var a=this.yytext.substring(o-1).toLowerCase(),c=this.castKeywords[a];if(typeof c=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return c}return this.unput(this.offset-n),"("},"=":function(){var n=this._input[this.offset];return n===">"?(this.input(),this.tok.T_DOUBLE_ARROW):n==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var n=this._input[this.offset];return n==="+"?(this.input(),this.tok.T_INC):n==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var n=this._input[this.offset];return n==="<"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):n==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):n==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):n===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):n===">"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_MUL_EQUAL):n==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_CONCAT_EQUAL):n==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_AND_EQUAL):n==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_OR_EQUAL):n==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};gt.T_STRING,gt.consume_TOKEN,gt.tokenTerminals;var nt={is_NUM:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n===95},is_NUM_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58},is_LABEL:function(){var n=this._input.charCodeAt(this.offset-1);return n>96&&n<123||n>64&&n<91||n===95||n>47&&n<58||n>126},is_LABEL_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>64&&n<91||n>96&&n<123||n===95||n>126},consume_LABEL:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_LABEL()){n&&this.unput(1);break}}return this},is_TOKEN:function(){var n=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(n)!==-1},is_WHITESPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"||n===`
`||n==="\r"},is_TABSPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_TABSPACE()){n&&this.unput(1);break}}return this},is_HEX:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n>64&&n<71||n>96&&n<103||n===95},is_OCTAL:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<56||n===95}};nt.is_NUM,nt.is_NUM_START,nt.is_LABEL,nt.is_LABEL_START,nt.consume_LABEL,nt.is_TOKEN,nt.is_WHITESPACE,nt.is_TABSPACE,nt.consume_TABSPACE,nt.is_HEX,nt.is_OCTAL;var yt=function(n){this.engine=n,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};yt.prototype.setInput=function(n){return this._input=n,this.size=n.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},yt.prototype.input=function(){var n=this._input[this.offset];return n?(this.yytext+=n,this.offset++,n==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),n===`
`||n==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,n):""},yt.prototype.unput=function(n){if(n===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,n++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(n>0)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var o=0;o<this.yytext.length;o++){var a=this.yytext[o];a==="\r"?(a=this.yytext[++o],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,a!==`
`&&(a==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):a===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},yt.prototype.tryMatch=function(n){return n===this.ahead(n.length)},yt.prototype.tryMatchCaseless=function(n){return n===this.ahead(n.length).toLowerCase()},yt.prototype.ahead=function(n){var o=this._input.substring(this.offset,this.offset+n);return o[o.length-1]==="\r"&&this._input[this.offset+n+1]===`
`&&(o+=`
`),o},yt.prototype.consume=function(n){for(var o=0;o<n;o++){var a=this._input[this.offset];if(!a)break;this.yytext+=a,this.offset++,a==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,o++),a===`
`||a==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},yt.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},yt.prototype.setState=function(n){return this.yytext=n.yytext,this.offset=n.offset,this.yylineno=n.yylineno,this.yyprevcol=n.yyprevcol,this.yylloc=n.yylloc,n.heredoc_label&&(this.heredoc_label=n.heredoc_label),this},yt.prototype.appendToken=function(n,o){return this.tokens.push([n,o]),this},yt.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var n=this.next()||this.lex();if(!this.all_tokens){for(;n===this.tok.T_WHITESPACE||!this.comment_tokens&&(n===this.tok.T_COMMENT||n===this.tok.T_DOC_COMMENT)||n===this.tok.T_OPEN_TAG;)n=this.next()||this.lex();if(n==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(n===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),n},yt.prototype.begin=function(n){if(this.conditionStack.push(n),this.curCondition=n,this.stateCb=this["match"+n],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+n+'"');return this},yt.prototype.popState=function(){var n=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return n},yt.prototype.next=function(){var n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(l((n=this.tokens.shift())[1])==="object"?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var o=n;o=typeof o=="number"?this.engine.tokens.values[o]:'"'+o+'"';var a=new Error(o+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(a.stack)}return n},[N,R,H,X,at,$,q,gt,nt].forEach(function(n){for(var o in n)yt.prototype[o]=n[o]});var Ht=yt,zt=function(n,o,a){this.line=n,this.column=o,this.offset=a},Bt={read_array:function(){var n=null,o=!1,a=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),n=")"):(o=!0,n="]");var c=[];return this.next().token!==n&&(c=this.read_array_pair_list(o)),this.expect(n),this.next(),a(o,c)},read_array_pair_list:function(n){var o=this;return this.read_list(function(){return o.read_array_pair(n)},",",!0)},read_array_pair:function(n){if(!(!n&&this.token===")"||n&&this.token==="]")){if(this.token===",")return this.node("noop")();var o=this.node("entry"),a=null,c=null,d=!1,T=!1;if(this.token==="&")this.next(),d=!0,c=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),T=!0,c=this.read_expr();else{var b=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),a=b,this.token==="&"?(this.next(),d=!0,c=this.read_variable(!0,!1)):c=this.read_expr()):c=b}return o(a,c,d,T)}}};Bt.read_array,Bt.read_array_pair_list,Bt.read_array_pair;var Ct={read_class_declaration_statement:function(n){var o=this.node("class"),a=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var c=this.node("identifier"),d=this.text();this.next(),c=c(d);var T=this.read_extends_from(),b=this.read_implements_list();this.expect("{");var g=o(c,T,b,this.next().read_class_body(!0,!1),a);return n&&(g.attrGroups=n),g},read_class_modifiers:function(){var n=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,n.final_or_abstract,n.readonly]},read_class_modifier:function(n){return this.token===this.tok.T_READ_ONLY?(this.next(),n.readonly=1,n=this.read_class_modifier(n)):n.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),n.final_or_abstract=1,n=this.read_class_modifier(n)):n.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),n.final_or_abstract=2,n=this.read_class_modifier(n)),n},read_class_body:function(n,o){for(var a=[],c=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE)if(o&&this.token===this.tok.T_CASE){var d=this.read_enum_case();this.expect(";")&&this.next(),a=a.concat(d)}else{this.token===this.tok.T_ATTRIBUTE&&(c=this.read_attr_list());var T=this.position(),b=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(n&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),b[0]=null,b[1]=0),this.token===this.tok.T_FUNCTION)a.push(this.read_function(!1,b,c,T)),c=[];else if(n&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){var g=this.read_variable_list(b,c);c=[],this.expect(";"),this.next(),a=a.concat(g)}else this.error([this.tok.T_CONST].concat(m(n?[this.tok.T_VARIABLE]:[]),m(o?[this.tok.T_CASE]:[]),[this.tok.T_FUNCTION])),this.next();else{var S=this.read_constant_list(b,c);this.expect(";")&&this.next(),a=a.concat(S)}}else a=a.concat(this.read_trait_use_statement());else a.push(this.read_doc_comment());else a.push(this.read_comment());return this.expect("}"),this.next(),a},read_variable_list:function(n,o){var a=this.node("propertystatement"),c=this.read_list(function(){var d=this.node("property"),T=!1;this.token===this.tok.T_READ_ONLY&&(T=!0,this.next());var b=_(this.read_optional_type(),2),g=b[0],S=b[1];this.expect(this.tok.T_VARIABLE);var A=this.node("identifier"),y=this.text().substring(1);return this.next(),A=A(y),this.token===";"||this.token===","?d(A,null,T,g,S,o||[]):this.token==="="?d(A,this.next().read_expr(),T,g,S,o||[]):(this.expect([",",";","="]),d(A,null,g,S,o||[]))},",");return a(null,c,n)},read_constant_list:function(n,o){this.expect(this.tok.T_CONST)&&this.next();var a=this.node("classconstant"),c=this.read_list(function(){var d=this.node("constant"),T=null,b=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){T=this.node("identifier");var g=this.text();this.next(),T=T(g)}else this.expect("IDENTIFIER");return this.expect("=")&&(b=this.next().read_expr()),d(T,b)},",");return a(null,c,n,o||[])},read_member_flags:function(n){var o=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var a=0,c=0;do{switch(this.token){case this.tok.T_PUBLIC:a=0,c=0;break;case this.tok.T_PROTECTED:a=0,c=1;break;case this.tok.T_PRIVATE:a=0,c=2;break;case this.tok.T_STATIC:a=1,c=1;break;case this.tok.T_ABSTRACT:a=2,c=1;break;case this.tok.T_FINAL:a=2,c=2}n&&(a==0&&c==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),c=-1):a==2&&c==1&&(this.error(),c=-1)),o[a]!==-1?this.error():c!==-1&&(o[a]=c)}while(this.next().is("T_MEMBER_FLAGS"))}return o[1]==-1&&(o[1]=0),o[2]==-1&&(o[2]=0),o},read_optional_type:function(){var n=!1;this.token==="?"&&(n=!0,this.next());var o=this.read_types();if(n&&!o&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!o)return[!1,null];if(this.token==="|"){o=[o];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}o.push(a)}while(this.token==="|")}return[n,o]},read_interface_declaration_statement:function(n){var o=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),c=this.text();this.next(),a=a(c);var d=this.read_interface_extends_list();return this.expect("{"),o(a,d,this.next().read_interface_body(),n||[])},read_interface_body:function(){for(var n=[],o=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var a=this.position();o=this.read_attr_list();var c=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var d=this.read_constant_list(c,o);this.expect(";")&&this.next(),n=n.concat(d),o=[]}else if(this.token===this.tok.T_FUNCTION){var T=this.read_function_declaration(2,c,o,a);T.parseFlags(c),n.push(T),this.expect(";")&&this.next(),o=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}")&&this.next(),n},read_trait_declaration_statement:function(){var n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("{"),n(o,this.next().read_class_body(!0,!1))},read_trait_use_statement:function(){var n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var o=[this.read_namespace_name()],a=null;this.token===",";)o.push(this.next().read_namespace_name());if(this.token==="{"){for(a=[];this.next().token!==this.EOF&&this.token!=="}";)a.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(o,a)},read_trait_use_alias:function(){var n,o=this.node(),a=null;if(this.is("IDENTIFIER")){n=this.node("identifier");var c=this.text();this.next(),n=n(c)}else if(n=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){a=n,n=this.node("identifier");var d=this.text();this.next(),n=n(d)}else this.expect(this.tok.T_STRING);else n=n.name;if(this.token===this.tok.T_INSTEADOF)return o("traitprecedence",a,n,this.next().read_name_list());if(this.token===this.tok.T_AS){var T=null,b=null;if(this.next().is("T_MEMBER_FLAGS")&&(T=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){b=this.node("identifier");var g=this.text();this.next(),b=b(g)}else T===!1&&this.expect(this.tok.T_STRING);return o("traitalias",a,n,b,T)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),o("traitalias",a,n,null,null)}};Ct.read_class_declaration_statement,Ct.read_class_modifiers,Ct.read_class_modifier,Ct.read_class_body,Ct.read_variable_list,Ct.read_constant_list,Ct.read_member_flags,Ct.read_optional_type,Ct.read_interface_declaration_statement,Ct.read_interface_body,Ct.read_trait_declaration_statement,Ct.read_trait_use_statement,Ct.read_trait_use_alias;var Tt={read_comment:function(){var n=this.text(),o=this.ast.prepare(n.substring(0,2)==="/*"?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,c=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(o=o(n)).offset=a,this.prev=c,o},read_doc_comment:function(){var n=this.ast.prepare("commentblock",null,this),o=this.lexer.yylloc.first_offset,a=this.text(),c=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(n=n(a)).offset=o,this.prev=c,n}};Tt.read_comment,Tt.read_doc_comment;var Ut={read_expr:function(n){var o=this.node();if(this.token==="@")return n||(n=this.next().read_expr()),o("silent",n);if(n||(n=this.read_expr_item()),this.token==="|")return o("bin","|",n,this.next().read_expr());if(this.token==="&")return o("bin","&",n,this.next().read_expr());if(this.token==="^")return o("bin","^",n,this.next().read_expr());if(this.token===".")return o("bin",".",n,this.next().read_expr());if(this.token==="+")return o("bin","+",n,this.next().read_expr());if(this.token==="-")return o("bin","-",n,this.next().read_expr());if(this.token==="*")return o("bin","*",n,this.next().read_expr());if(this.token==="/")return o("bin","/",n,this.next().read_expr());if(this.token==="%")return o("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return o("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return o("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return o("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return o("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return o("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return o("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return o("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return o("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return o("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return o("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return o("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return o("bin","!=",n,this.next().read_expr());if(this.token==="<")return o("bin","<",n,this.next().read_expr());if(this.token===">")return o("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return o("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return o("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return o("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=o("bin","instanceof",n,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return o("bin","??",n,this.next().read_expr());if(this.token==="?"){var a=null;return this.next().token!==":"&&(a=this.read_expr()),this.expect(":")&&this.next(),o("retif",n,a,this.read_expr())}return o.destroy(n),n},read_expr_cast:function(n){return this.node("cast")(n,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var n=null;switch(this.token){case this.tok.T_ISSET:n=this.node("isset"),this.next().expect("(")&&this.next();var o=this.read_isset_variables();this.expect(")")&&this.next(),n=n(o);break;case this.tok.T_EMPTY:n=this.node("empty"),this.next().expect("(")&&this.next();var a=this.read_expr();this.expect(")")&&this.next(),n=n(a);break;case this.tok.T_INCLUDE:n=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:n=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:n=this.node("eval"),this.next().expect("(")&&this.next();var c=this.read_expr();this.expect(")")&&this.next(),n=n(c);break;case this.tok.T_REQUIRE:n=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:n=this.node("include")(!0,!0,this.next().read_expr())}return n},read_optional_expr:function(n){return this.token!==n?this.read_expr():null},read_exit_expr:function(){var n=null;return this.token==="("&&(this.next(),n=this.read_optional_expr(")"),this.expect(")")&&this.next()),n},read_expr_item:function(){var n,o,a=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(o=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(o);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var c=null,d=this.innerList;n=this.node("list"),d||(c=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var T=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var b=!1,g=0;g<T.length;g++)if(T[g]!==null&&T[g].kind!=="noop"){b=!0;break}return b||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),d?n(T,!1):(this.innerList=!1,this.expect("=")?c(n(T,!1),this.next().read_expr(),"="):n(T,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var S=this.lexer.yytext.toLowerCase()==="die";return n=this.node("exit"),this.next(),n(this.read_exit_expr(),S);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var A=null,y=null;return n=this.node("yield"),this.next().is("EXPR")&&(A=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(y=A,A=this.next().read_expr())),n(A,y);case this.tok.T_YIELD_FROM:return(n=this.node("yieldfrom"))(o=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,a);case this.tok.T_STATIC:var Vt=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],a);this.lexer.tokens.push(Vt),this.next()}if(this.is("VARIABLE")){n=this.node();var Mt=(o=this.read_variable(!1,!1)).kind==="identifier"||o.kind==="staticlookup"&&o.offset.kind==="identifier";switch(this.token){case"=":return Mt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(n,o):n("assign",o,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return Mt&&this.error("VARIABLE"),n("assign",o,this.next().read_expr(),"??=");case this.tok.T_INC:return Mt&&this.error("VARIABLE"),this.next(),n("post","+",o);case this.tok.T_DEC:return Mt&&this.error("VARIABLE"),this.next(),n("post","-",o);default:n.destroy(o)}}else{if(this.is("SCALAR")){if(n=this.node(),(o=this.read_scalar()).kind==="array"&&o.shortForm&&this.token==="="){var ue=this.convertToList(o);return o.loc&&(ue.loc=o.loc),n("assign",ue,this.next().read_expr(),"=")}return n.destroy(o),this.handleDereferencable(o)}this.error("EXPR"),this.next()}return o},convertToList:function(n){var o=this,a=n.items.map(function(d){return d.value&&d.value.kind==="array"&&d.value.shortForm&&(d.value=o.convertToList(d.value)),d}),c=this.node("list")(a,!0);return n.loc&&(c.loc=n.loc),n.leadingComments&&(c.leadingComments=n.leadingComments),n.trailingComments&&(c.trailingComments=n.trailingComments),c},read_assignref:function(n,o){var a;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),a=this.read_new_expr()):a=this.read_variable(!1,!1),n("assignref",o,a)},read_inline_function:function(n,o){if(this.token===this.tok.T_FUNCTION){var a=this.read_function(!0,n,o);return a.attrGroups=o,a}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var c=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var d=this.is_reference();this.expect("(")&&this.next();var T=this.read_parameter_list();this.expect(")")&&this.next();var b=!1,g=null;this.token===":"&&(this.next().token==="?"&&(b=!0,this.next()),g=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var S=c(T,d,this.read_expr(),g,b,!!n);return S.attrGroups=o,S},read_match_expression:function(){var n=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var o,a;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),a=this.read_match_arms(),this.expect("}")&&this.next(),n(o,a)},read_match_arms:function(){var n=this;return this.read_list(function(){return n.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var n=[];if(this.token===this.tok.T_DEFAULT)n=null,this.next();else for(n.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),n;n.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),n},read_attribute:function(){var n=this.text(),o=[];return this.next(),this.token==="("&&(o=this.read_argument_list()),this.node("attribute")(n,o)},read_attr_list:function(){var n=[];if(this.token===this.tok.T_ATTRIBUTE)do{var o=this.node("attrgroup")([]);for(this.next(),o.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&o.attrs.push(this.read_attribute());n.push(o),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return n},read_new_expr:function(){var n=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var o=[];if(this.token==="("){this.next();var a=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(o=this.read_argument_list()),n(a,o)}var c=this.read_attr_list();if(this.token===this.tok.T_CLASS){var d=this.node("class");this.next().token==="("&&(o=this.read_argument_list());var T=this.read_extends_from(),b=this.read_implements_list(),g=null;this.expect("{")&&(g=this.next().read_class_body(!0,!1));var S=d(null,T,b,g,[0,0,0]);return S.attrGroups=c,n(S,o)}for(var A=this.read_new_class_name();this.token==="[";){var y=this.node("offsetlookup"),Vt=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),A=y(A,Vt)}return this.token==="("&&(o=this.read_argument_list()),n(A,o)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var n=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(n=this.read_static_getter(n)),n}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(n){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)n=this.recursive_variable_chain_scan(n,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")n=this.read_dereferencable(n);else{if(this.token!=="(")return n;n=this.node("call")(n,this.read_argument_list())}return n}};Ut.read_expr,Ut.read_expr_cast,Ut.read_isset_variable,Ut.read_isset_variables,Ut.read_internal_functions_in_yacc,Ut.read_optional_expr,Ut.read_exit_expr,Ut.read_expr_item,Ut.convertToList,Ut.read_assignref,Ut.read_inline_function,Ut.read_match_expression,Ut.read_match_arms,Ut.read_match_arm,Ut.read_match_arm_conds,Ut.read_attribute,Ut.read_attr_list,Ut.read_new_expr,Ut.read_new_class_name,Ut.handleDereferencable;var _t={read_enum_declaration_statement:function(n){var o=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),c=this.text();this.next(),a=a(c);var d=this.read_enum_value_type(),T=this.read_implements_list();this.expect("{");var b=o(a,d,T,this.next().read_class_body(!1,!0));return n&&(b.attrGroups=n),b},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);var n=this.node("enumcase"),o=this.node("identifier"),a=this.next().text();this.next(),o=o(a);var c=this.token==="="?this.next().read_expr():null;return this.expect(";"),n(o,c)}};_t.read_enum_declaration_statement,_t.read_enum_value_type,_t.read_enum_case;var ct={is_reference:function(){return this.token==="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(n,o,a,c){var d=this.read_function_declaration(n?1:o?2:0,o&&o[1]===1,a||[],c);return o&&o[2]==1?(d.parseFlags(o),this.expect(";")&&this.next()):(this.expect("{")&&(d.body=this.read_code_block(!1),d.loc&&d.body.loc&&(d.loc.end=d.body.loc.end)),!n&&o&&d.parseFlags(o)),d},read_function_declaration:function(n,o,a,c){var d=this,T="function";n===1?T="closure":n===2&&(T="method");var b=this.node(T);this.expect(this.tok.T_FUNCTION)&&this.next();var g=this.is_reference(),S=!1,A=[],y=null,Vt=!1;if(n!==1){var Mt=this.node("identifier");n===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(S=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(S=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(S=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(S=this.text()),this.next()),S=Mt(S)}this.expect("(")&&this.next();var ue=this.read_parameter_list(S.name==="__construct");this.expect(")")&&this.next(),n===1&&(A=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(Vt=!0,this.next()),y=this.read_types());var me=function(Wt){return Wt.attrGroups=a||[],c&&Wt.loc&&(Wt.loc.start=c,Wt.loc.source&&(Wt.loc.source=d.lexer._input.substr(Wt.loc.start.offset,Wt.loc.end.offset-Wt.loc.start.offset))),Wt};return me(n===1?b(ue,g,A,y,Vt,o):b(S,ue,g,y,Vt))},read_lexical_vars:function(){var n=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),n=this.read_lexical_var_list(),this.expect(")")&&this.next()),n},read_list_with_dangling_comma:function(n){for(var o=[];this.token!=this.EOF;){if(o.push(n()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return o}return o},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var n=this.node("variable");this.expect(this.tok.T_VARIABLE);var o=this.text().substring(1);return this.next(),n(o,!1)},read_parameter_list:function(n){if(this.token!==")"){var o=!1;return this.read_list_with_dangling_comma(function(){var a=this.read_parameter(n);return a&&(o&&this.raiseError("Unexpected parameter after a variadic parameter"),a.variadic&&(o=!0)),a}.bind(this),",")}return[]},read_parameter:function(n){var o,a=this.node("parameter"),c=null,d=null,T=!1,b=!1,g=[];this.token===this.tok.T_ATTRIBUTE&&(g=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(n?(this.next(),b=!0):this.raiseError("readonly properties can be used only on class constructor"));var S=this.read_promoted();!b&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(n?(this.next(),b=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),T=!0),o=this.read_types(),T&&!o&&this.raiseError("Expecting a type definition combined with nullable operator");var A=this.is_reference(),y=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){c=this.node("identifier");var Vt=this.text().substring(1);this.next(),c=c(Vt)}this.token=="="&&(d=this.next().read_expr());var Mt=a(c,o,d,A,y,b,T,S);return g&&(Mt.attrGroups=g),Mt},read_types:function(){var n="unset",o="union",a="intersection",c=[],d=n,T=this.read_type();if(!T)return null;for(c.push(T);this.token==="|"||this.version>=801&&this.token==="&";){var b=this.peek();if(b===this.tok.T_ELLIPSIS||b===this.tok.T_VARIABLE)break;d===n?d=this.token==="|"?o:a:(d===o&&this.token!=="|"||d===a&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),c.push(this.read_type())}return c.length===1?c[0]:d===a?this.node("intersectiontype")(c):this.node("uniontype")(c)},read_promoted:function(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var n=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(n.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(n=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),n},read_non_empty_argument_list:function(){var n=!1;return this.read_function_list(function(){var o=this.read_argument();if(o){var a=o.kind==="variadic";n&&!a&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),a&&(n=!0)}return o}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){var n=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var o=this.text();return this.next(),n("typereference",o.toLowerCase(),o)}if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var a=this.text(),c=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(a.toLowerCase())>-1?n("typereference",a.toLowerCase(),a):(this.lexer.tokens.push(c),this.next(),n.destroy(),this.read_namespace_name())}return n.destroy(),null}};ct.is_reference,ct.is_variadic,ct.read_function,ct.read_function_declaration,ct.read_lexical_vars,ct.read_list_with_dangling_comma,ct.read_lexical_var_list,ct.read_lexical_var,ct.read_parameter_list,ct.read_parameter,ct.read_types,ct.read_promoted,ct.read_argument_list,ct.read_non_empty_argument_list,ct.read_argument,ct.read_type;var fe={read_if:function(){var n=this.node("if"),o=this.next().read_if_expr(),a=null,c=null,d=!1;if(this.token===":"){d=!0,this.next(),a=this.node("block");for(var T=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){c=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){c=this.read_else_short();break}T.push(this.read_inner_statement())}a=a(null,T),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else a=this.read_statement(),this.token===this.tok.T_ELSEIF?c=this.read_if():this.token===this.tok.T_ELSE&&(c=this.next().read_statement());return n(o,a,c,d)},read_if_expr:function(){this.expect("(")&&this.next();var n=this.read_expr();return this.expect(")")&&this.next(),n},read_elseif_short:function(){var n=null,o=this.node("if"),a=this.next().read_if_expr();this.expect(":")&&this.next();for(var c=this.node("block"),d=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}d.push(this.read_inner_statement())}return o(a,c(null,d),n,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var n=this.node("block"),o=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)o.push(this.read_inner_statement());return n(null,o)}};fe.read_if,fe.read_if_expr,fe.read_elseif_short,fe.read_else_short;var Pt={read_while:function(){var n=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var o,a=null,c=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(c=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),n(o,a,c)},read_do:function(){var n=this.node("do");this.expect(this.tok.T_DO)&&this.next();var o,a=null;return o=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),a=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(a,o)},read_for:function(){var n=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var o=[],a=[],c=[],d=null,T=!1;return this.expect("(")&&this.next(),this.token!==";"?(o=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(c=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOR)):d=this.read_statement(),n(o,a,c,d,T)},read_foreach:function(){var n=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var o,a=null,c=null,d=null,T=!1;return this.expect("(")&&this.next(),o=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),c=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=c,c=this.next().read_foreach_variable())),a&&a.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOREACH)):d=this.read_statement(),n(o,a,c,d,T)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var n=this.token==="[",o=this.node("list");this.next(),!n&&this.expect("(")&&this.next();var a=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),o(a,n)}return this.read_variable(!1,!1)}};Pt.read_while,Pt.read_do,Pt.read_for,Pt.read_foreach,Pt.read_foreach_variable;var ae={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};ae.read_start;var pe={read_namespace:function(){var n,o,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),o=this.token==="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=o,this.token===";"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect(this.EOF),a(o.name,n,!1)):this.token==="{"?(this.currentNamespace=o,n=this.next().read_top_statements(),this.expect("}")&&this.next(),n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),a(o.name,n,!0)):(this.error(["{",";"]),this.currentNamespace=o,n=this.read_top_statements(),this.expect(this.EOF),a(o,n,!1))},read_namespace_name:function(n){var o,a=this.node(),c=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:o=this.ast.name.RELATIVE_NAME,c=c.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:o=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:o=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(o=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return a("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),n||this.token!=="("){if(c.toLowerCase()==="parent")return a("parentreference",c);if(c.toLowerCase()==="self")return a("selfreference",c)}return a("name",c,o)},read_use_statement:function(){var n=this.node("usegroup"),o=[],a=null;this.expect(this.tok.T_USE)&&this.next();var c=this.read_use_type();return o.push(this.read_use_declaration(!1)),this.token===","?o=o.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(a=o[0].name,o=this.next().read_use_declarations(c===null),this.expect("}")&&this.next()),n=n(a,c,o),this.expect(";")&&this.next(),n},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(n){var o=this.node("useitem"),a=null;n&&(a=this.read_use_type());var c=this.read_namespace_name(),d=this.read_use_alias();return o(c.name,d,a)},read_use_declarations:function(n){for(var o=[this.read_use_declaration(n)];this.token===",";){if(this.next(),n){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;o.push(this.read_use_declaration(n))}return o},read_use_alias:function(){var n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var o=this.node("identifier"),a=this.text();this.next(),n=o(a)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};pe.read_namespace,pe.read_namespace_name,pe.read_use_statement,pe.read_class_name_reference,pe.read_use_declaration,pe.read_use_declarations,pe.read_use_alias,pe.read_use_type;var P={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},D={resolve_special_chars:function(n,o){return o?n.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(a,c,d){return P[c]?P[c]:c[0]==="x"||c[0]==="X"?String.fromCodePoint(parseInt(c.substr(1),16)):c[0]==="u"?String.fromCodePoint(parseInt(d,16)):String.fromCodePoint(parseInt(c,8))}):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(n,o,a,c){if(o===0)return n;this.check_heredoc_indentation_level(n,o,a,c);var d=a?" ":"	",T=new RegExp("\\n".concat(d,"{").concat(o,"}"),"g"),b=new RegExp("^".concat(d,"{").concat(o,"}"));return c&&(n=n.replace(b,"")),n.replace(T,`
`)},check_heredoc_indentation_level:function(n,o,a,c){var d=n.length,T=0,b=0,g=!0,S=a?" ":"	",A=!1;if(!c){if((T=n.indexOf(`
`))===-1)return;T++}for(;T<d;)g?n[T]===S?b++:A=!0:g=!1,n[T]!==`
`&&A&&b<o?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(o,")")):A=!1,n[T]===`
`&&(g=!0,b=0),T++},read_dereferencable_scalar:function(){var n=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var o=this.node("string"),a=this.text(),c=0;a[0]!=="b"&&a[0]!=="B"||(c=1);var d=a[c]==='"';this.next(),o=o(d,this.resolve_special_chars(a.substring(c+1,a.length-1),d),c===1,a),n=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(o):o;break;case this.tok.T_ARRAY:case"[":n=this.read_array()}return n},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var n,o;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var a=this.node("number");return n=this.text(),this.next(),a(n,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var c=this.lexer.yylloc.first_offset;o=this.node("nowdoc"),n=this.next().text(),this.lexer.heredoc_label.indentation>0&&(n=n.substring(0,n.length-this.lexer.heredoc_label.indentation));var d=n[n.length-1];d===`
`?n=n[n.length-2]==="\r"?n.substring(0,n.length-2):n.substring(0,n.length-1):d==="\r"&&(n=n.substring(0,n.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var T=this.lexer._input.substring(c,this.lexer.yylloc.first_offset);return o=o(this.remove_heredoc_leading_whitespace_chars(n,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),T,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,o}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var b=this.error("SCALAR");return this.next(),b}},read_dereferencable:function(n){var o,a,c=this.node("offsetlookup");return this.token==="["?(a=this.next().read_expr(),this.expect("]")&&this.next(),o=c(n,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(o=c(n,a=this.read_encapsed_string_item(!1))),o},read_encapsed_string_item:function(n){var o,a,c,d=this.node("encapsedpart"),T=null,b=!1,g=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var S=this.text();this.next(),g=g("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(S,n),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):S,!1,S)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(T="simple",b=!0,c=null,this.next().token===this.tok.T_STRING_VARNAME){c=this.node("variable");var A=this.text();this.next(),g.destroy(),this.token==="["?(c=c(A,!1),a=this.node("offsetlookup"),o=this.next().read_expr(),this.expect("]")&&this.next(),g=a(c,o)):g=c(A,!1)}else g=g("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)T="complex",g.destroy(),g=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(T="simple",g.destroy(),g=this.read_simple_variable(),this.token==="["&&(a=this.node("offsetlookup"),o=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),g=a(g,o)),this.token===this.tok.T_OBJECT_OPERATOR){a=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var y=this.node("identifier");c=this.text(),this.next(),g=a(g,y(c))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var Vt=this.text();this.next(),g.destroy(),g=g("string",!1,Vt,!1,Vt)}return this.lexer.heredoc_label.first_encaps_node=!1,d(g,T,b)},read_encapsed_string:function(n){var o=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=this.lexer.yylloc.first_offset,c=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(o?1:0),T=[],b=null;for(b=n==="`"?this.ast.encapsed.TYPE_SHELL:n==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==n&&this.token!==this.EOF;)T.push(this.read_encapsed_string_item(!0));if(T.length>0&&T[T.length-1].kind==="encapsedpart"&&T[T.length-1].expression.kind==="string"){var g=T[T.length-1].expression,S=g.value[g.value.length-1];S===`
`?g.value[g.value.length-2]==="\r"?g.value=g.value.substring(0,g.value.length-2):g.value=g.value.substring(0,g.value.length-1):S==="\r"&&(g.value=g.value.substring(0,g.value.length-1))}this.expect(n)&&this.next();var A=this.lexer._input.substring(b==="heredoc"?a:d-1,this.lexer.yylloc.first_offset);return c=c(T,A,b),n===this.tok.T_END_HEREDOC&&(c.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),c},get_magic_constant:function(){var n=this.node("magic"),o=this.text();return this.next(),n(o.toUpperCase(),o)}};D.resolve_special_chars,D.remove_heredoc_leading_whitespace_chars,D.check_heredoc_indentation_level,D.read_dereferencable_scalar,D.read_scalar,D.read_dereferencable,D.read_encapsed_string_item,D.read_encapsed_string,D.get_magic_constant;var tt={read_top_statements:function(){for(var n=[];this.token!==this.EOF&&this.token!=="}";){var o=this.read_top_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_top_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,n);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(n);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(n);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(n);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var o=this.node("constantstatement"),a=this.next().read_const_list();return this.expectEndOfStatement(),o(null,a);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var c=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,c(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var n=[];this.token!=this.EOF&&this.token!=="}";){var o=this.read_inner_statement();o&&(Array.isArray(o)?n=n.concat(o):n.push(o))}return n},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var n=this.node("constant"),o=this.node("identifier"),a=this.text();return this.next(),o=o(a),this.expect("=")?n(o,this.next().read_expr()):n(o,null)},",",!1)},read_declare_list:function(){for(var n=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var o=this.node("declaredirective"),a=this.node("identifier"),c=this.text();this.next(),a=a(c);var d=null;if(this.expect("=")&&(d=this.next().read_expr()),n.push(o(a,d)),this.token!==",")break;this.next()}return n},read_inner_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var o=this.read_function(!1,!1);return o.attrGroups=n,o;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var a=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),a=a(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),a;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var n=this.node("return");this.next();var o=this.read_optional_expr(";");return this.expectEndOfStatement(),n(o);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var a=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var c=this.read_optional_expr(";");return this.expectEndOfStatement(),a(c);case this.tok.T_GLOBAL:var d=this.node("global"),T=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),d(T);case this.tok.T_STATIC:var b=[this.token,this.lexer.getState()],g=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(b);var S=this.next().read_expr();return this.expectEndOfStatement(S),g("expressionstatement",S)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var A=this.read_variable_declarations();return this.expectEndOfStatement(),g("static",A);case this.tok.T_ECHO:var y=this.node("echo"),Vt=this.text(),Mt=Vt==="<?="||Vt==="<%=",ue=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),y(ue,Mt);case this.tok.T_INLINE_HTML:var me=this.text(),Wt=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,ye=Wt==="\r"||Wt===`
`;ye&&Wt===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(Wt=`\r
`);var te=this.node("inline");return this.next(),te(me,ye?Wt+me:me);case this.tok.T_UNSET:var Ae=this.node("unset");this.next().expect("(")&&this.next();var Se=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),Ae(Se);case this.tok.T_DECLARE:var xe,ee=this.node("declare"),be=[];this.next().expect("(")&&this.next();var Ue=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)be.push(this.read_top_statement());be.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&be.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),xe=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)be.push(this.read_top_statement());be.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&be.push(this.node("noop")()),this.expect("}")&&this.next(),xe=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),xe=this.ast.declare.MODE_NONE;return ee(Ue,be,xe);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var hn=this.node("throw"),mi=this.next().read_expr();return this.expectEndOfStatement(),hn(mi);case";":return this.next(),null;case this.tok.T_STRING:var ot=this.node(),rt=[this.token,this.lexer.getState()],Gt=this.text(),jt=this.node("identifier");if(this.next().token===":")return jt=jt(Gt),this.next(),ot("label",jt);jt.destroy(),ot.destroy(),this.lexer.tokens.push(rt);var Dt=this.node("expressionstatement"),Ne=this.next().read_expr();return this.expectEndOfStatement(Ne),Dt(Ne);case this.tok.T_GOTO:var Re=this.node("goto"),ze=null;if(this.next().expect(this.tok.T_STRING)){ze=this.node("identifier");var gi=this.text();this.next(),ze=ze(gi),this.expectEndOfStatement()}return Re(ze);default:var oe=this.node("expressionstatement"),Ye=this.read_expr();return this.expectEndOfStatement(Ye),oe(Ye)}},read_code_block:function(n){var o=this.node("block");this.expect("{")&&this.next();var a=n?this.read_top_statements():this.read_inner_statements();return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect("}")&&this.next(),o(null,a)}};tt.read_top_statements,tt.read_top_statement,tt.read_inner_statements,tt.read_const_list,tt.read_declare_list,tt.read_inner_statement,tt.read_statement,tt.read_code_block;var xt={read_switch:function(){var n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var o=this.read_expr();this.expect(")")&&this.next();var a=this.token===":";return n(o,this.read_switch_case_list(),a)},read_switch_case_list:function(){var n=null,o=this.node("block"),a=[];for(this.token==="{"?n="}":this.token===":"?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==n;)a.push(this.read_case_list(n));return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),o(null,a)},read_case_list:function(n){var o=this.node("case"),a=null;this.token===this.tok.T_CASE?a=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var c=this.node("block"),d=[];this.token!==this.EOF&&this.token!==n&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)d.push(this.read_inner_statement());return o(a,c(null,d))}};xt.read_switch,xt.read_switch_case_list,xt.read_case_list;var qt={read_try:function(){this.expect(this.tok.T_TRY);for(var n=this.node("try"),o=null,a=[],c=this.next().read_statement();this.token===this.tok.T_CATCH;){var d=this.node("catch");this.next().expect("(")&&this.next();var T=this.read_list(this.read_namespace_name,"|",!1),b=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(b=this.read_variable(!0,!1)),this.expect(")"),a.push(d(this.next().read_statement(),T,b))}return this.token===this.tok.T_FINALLY&&(o=this.next().read_statement()),n(c,a,o)}};qt.read_try;var it={read_short_form:function(n){var o=this.node("block"),a=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)a.push(this.read_inner_statement());return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),o(null,a)},read_function_list:function(n,o){var a=[];do{if(this.token==o&&this.version>=703&&a.length>0){a.push(this.node("noop")());break}if(a.push(n.apply(this,[])),this.token!=o||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return a},read_list:function(n,o,a){var c=[];if(this.token==o&&(a&&c.push(typeof n=="function"?this.node("noop")():null),this.next()),typeof n=="function")do{var d=n.apply(this,[]);if(d&&c.push(d),this.token!=o)break}while(this.next().token!=this.EOF);else{if(!this.expect(n))return[];for(c.push(this.text());this.next().token!=this.EOF&&this.token==o&&this.next().token==n;)c.push(this.text())}return c},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){var o=this.node("byref");this.next(),o=o(null);var a=n();return a&&(this.ast.swapLocations(a,o,a,this),a.byref=!0),a},read_variable_declarations:function(){return this.read_list(function(){var n=this.node("staticvariable"),o=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var a=this.text().substring(1);this.next(),o=o(a,!1)}else o=o("#ERR",!1);return this.token==="="?n(o,this.next().read_expr()):o},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};it.read_short_form,it.read_function_list,it.read_list,it.read_name_list,it.read_byref,it.read_variable_declarations,it.read_extends_from,it.read_interface_extends_list,it.read_implements_list;var M={read_variable:function(n,o){var a;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,n,o));if(this.is([this.tok.T_VARIABLE,"$"]))a=this.read_reference_variable(o);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){a=this.node();var c=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(c.kind)===-1){var d=c.name.toLowerCase();d==="true"?a=c.destroy(a("boolean",!0,c.name)):d==="false"?a=c.destroy(a("boolean",!1,c.name)):d==="null"?a=c.destroy(a("nullkeyword",c.name)):(a.destroy(c),a=c)}else a.destroy(c),a=c}else if(this.token===this.tok.T_STATIC){a=this.node("staticreference");var T=this.text();this.next(),a=a(T)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(a=this.read_static_getter(a,o)),this.recursive_variable_chain_scan(a,n,o)},read_static_getter:function(n,o){var a,c,d=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?a=this.read_reference_variable(o):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(a=this.node("identifier"),c=this.text(),this.next(),a=a(c)):this.token==="{"?(a=this.node("literal"),c=this.next().read_expr(),this.expect("}")&&this.next(),a=a("literal",c,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),a=this.node("identifier"),c=this.text(),this.next(),a=a(c)),d(n,a)},read_what:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],o=null,a=null;switch(this.next().token){case this.tok.T_STRING:o=this.node("identifier"),a=this.text(),this.next(),o=o(a),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:o=this.node("variable"),a=this.text().substring(1),this.next(),o=o(a,!1);break;case"$":o=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(a=this.next().read_expr(),this.expect("}")&&this.next(),o=o("variable",a,!0)):o=o("variable",a=this.read_expr(),!1);break;case"{":o=this.node("encapsedpart"),a=this.next().read_expr(),this.expect("}")&&this.next(),o=o(a,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),o=this.node("identifier"),a=this.text(),this.next(),o=o(a)}return o},recursive_variable_chain_scan:function(n,o,a){var c,d;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(o)return n;n=this.node("call")(n,this.read_argument_list());break;case"[":case"{":var T=this.token==="[";c=this.node("offsetlookup"),this.next(),d=!1,a?(d=this.read_encaps_var_offset(),this.expect(T?"]":"}")&&this.next()):(T?this.token!=="]":this.token!=="}")?(d=this.read_expr(),this.expect(T?"]":"}")&&this.next()):this.next(),n=c(n,d);break;case this.tok.T_DOUBLE_COLON:n.kind==="staticlookup"&&n.offset.kind==="identifier"&&this.error(),n=(c=this.node("staticlookup"))(n,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:n=(c=this.node("propertylookup"))(n,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:n=(c=this.node("nullsafepropertylookup"))(n,this.read_what());break;default:break t}return n},read_encaps_var_offset:function(){var n=this.node();if(this.token===this.tok.T_STRING){var o=this.text();this.next(),n=n("identifier",o)}else if(this.token===this.tok.T_NUM_STRING){var a=this.text();this.next(),n=n("number",a,null)}else if(this.token==="-"){this.next();var c=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),n=n("number",c,null)}else if(this.token===this.tok.T_VARIABLE){var d=this.text().substring(1);this.next(),n=n("variable",d,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var T=this.text();this.next(),n=n("identifier",T)}return n},read_reference_variable:function(n){for(var o,a=this.read_simple_variable();this.token!=this.EOF;){var c=this.node();if(this.token!="{"||n){c.destroy();break}o=this.next().read_expr(),this.expect("}")&&this.next(),a=c("offsetlookup",a,o)}return a},read_simple_variable:function(){var n,o=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)n=this.text().substring(1),this.next(),o=o(n,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var a=this.next().read_expr();this.expect("}")&&this.next(),o=o(a,!0);break;case"$":o=o(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:n=this.text().substring(1);var c=this.node("variable");this.next(),o=o(c(n,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),n=this.text(),this.next(),o=o(n,!1)}return o}};function G(n){return n!="."&&n!=","&&!isNaN(parseFloat(n))&&isFinite(n)}M.read_variable,M.read_static_getter,M.read_what,M.recursive_variable_chain_scan,M.read_encaps_var_offset,M.read_reference_variable,M.read_simple_variable;var U=function(n,o){this.lexer=n,this.ast=o,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var a=function(c){return[c,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(a)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(a)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(a)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(a)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(a)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a))}};U.prototype.getTokenName=function(n){return G(n)?n==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[n]:"'"+n+"'"},U.prototype.parse=function(n,o){this._errors=[],this.filename=o||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(n),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var a=this.node("program"),c=[];for(this.next();this.token!=this.EOF;)c.push(this.read_start());c.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&c.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var d=a(c,this._errors,this._docs,this._tokens);if(this.debug){var T=this.ast.checkNodes();if(T.length>0)throw T.forEach(function(b){b.position&&console.log("Node at line "+b.position.line+", column "+b.position.column),console.log(b.stack.join(`
`))}),new Error("Some nodes are not closed")}return d},U.prototype.raiseError=function(n,o,a,c){if(n+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var d=new SyntaxError(n,this.filename,this.lexer.yylloc.first_line);throw d.lineNumber=this.lexer.yylloc.first_line,d.fileName=this.filename,d.columnNumber=this.lexer.yylloc.first_column,d}var T=this.ast.prepare("error",null,this)(n,c,this.lexer.yylloc.first_line,a);return this._errors.push(T),T},U.prototype.error=function(n){var o="Parse Error : syntax error",a=this.getTokenName(this.token),c="";if(this.token!==this.EOF){if(G(this.token)){var d=this.text();d.length>10&&(d=d.substring(0,7)+"..."),a="'"+d+"' ("+a+")"}o+=", unexpected "+a}return n&&!Array.isArray(n)&&((G(n)||n.length===1)&&(c=", expecting "+this.getTokenName(n)),o+=c),this.raiseError(o,c,n,a)},U.prototype.position=function(){return new zt(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},U.prototype.node=function(n){if(this.extractDoc){var o=null;this._docIndex<this._docs.length&&(o=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(o)));var a=this.ast.prepare(n,o,this);return a.postBuild=function(c){if(this._docIndex<this._docs.length)if(this._lastNode){for(var d=this.prev[2],T=this._docIndex;T<this._docs.length&&!(this._docs[T].offset>d);T++);T>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,T)),this._docIndex=T)}else this.token===this.EOF&&(c.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=c}.bind(this),a}return this.ast.prepare(n,null,this)},U.prototype.expectEndOfStatement=function(n){if(this.token===";")n&&this.lexer.yytext===";"&&n.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var Z=["parser.next","parser.node","parser.showlog"];U.prototype.showlog=function(){for(var n,o=new Error().stack.split(`
`),a=2;a<o.length;a++){n=o[a].trim();for(var c=!1,d=0;d<Z.length;d++)if(n.substring(3,3+Z[d].length)===Z[d]){c=!0;break}if(!c)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+n),this},U.prototype.expect=function(n){if(Array.isArray(n)){if(n.indexOf(this.token)===-1)return this.error(n),!1}else if(this.token!=n)return this.error(n),!1;return!0},U.prototype.text=function(){return this.lexer.yytext},U.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},U.prototype.peek=function(){var n=this.lexer.getState(),o=this.lexer.lex();return this.lexer.setState(n),o},U.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var n=this.lexer.yytext;if(n=Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?[this.lexer.engine.tokens.values[this.token],n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(n),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},U.prototype.is=function(n){return Array.isArray(n)?n.indexOf(this.token)!==-1:this.entries[n].has(this.token)},[Bt,Ct,Tt,Ut,_t,ct,fe,Pt,ae,pe,D,tt,xt,qt,it,M].forEach(function(n){for(var o in n){if(Object.prototype.hasOwnProperty.call(U.prototype,o))throw new Error("Function "+o+" is already defined - collision");U.prototype[o]=n[o]}});var lt=U,st={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},j={values:Object.entries(st).reduce(function(n,o){var a=_(o,2),c=a[0],d=a[1];return h(h({},n),{},f({},d,c))},{}),names:st},ut=Object.freeze(j),Nt=function(n,o,a){this.source=n,this.start=o,this.end=a},Jt=function(n,o,a){this.kind=n,o&&(this.leadingComments=o),a&&(this.loc=a)};Jt.prototype.setTrailingComments=function(n){this.trailingComments=n},Jt.prototype.destroy=function(n){if(!n)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(n.leadingComments?n.leadingComments=Array.concat(this.leadingComments,n.leadingComments):n.leadingComments=this.leadingComments),this.trailingComments&&(n.trailingComments?n.trailingComments=Array.concat(this.trailingComments,n.trailingComments):n.trailingComments=this.trailingComments),n},Jt.prototype.includeToken=function(n){return this.loc&&(this.loc.end&&(this.loc.end.line=n.lexer.yylloc.last_line,this.loc.end.column=n.lexer.yylloc.last_column,this.loc.end.offset=n.lexer.offset),n.ast.withSource&&(this.loc.source=n.lexer._input.substring(this.loc.start.offset,n.lexer.offset))),this},Jt.extends=function(n,o){return o.prototype=Object.create(this.prototype),o.extends=this.extends,o.prototype.constructor=o,o.kind=n,o};var mt=Jt,St="expression",J=mt.extends(St,function(n,o,a){mt.apply(this,[n||St,o,a])}),Zt="array",Rt=J.extends(Zt,function(n,o,a,c){J.apply(this,[Zt,a,c]),this.items=o,this.shortForm=n}),ei="arrowfunc",Vi=J.extends(ei,function(n,o,a,c,d,T,b,g){J.apply(this,[ei,b,g]),this.arguments=n,this.byref=o,this.body=a,this.type=c,this.nullable=d,this.isStatic=T||!1}),li="assign",Je=J.extends(li,function(n,o,a,c,d){J.apply(this,[li,c,d]),this.left=n,this.right=o,this.operator=a}),ii="assignref",_n=J.extends(ii,function(n,o,a,c){J.apply(this,[ii,a,c]),this.left=n,this.right=o}),En="attribute",gs=mt.extends(En,function(n,o,a,c){mt.apply(this,[En,a,c]),this.name=n,this.args=o}),kt="attrgroup",Fs=mt.extends(kt,function(n,o,a){mt.apply(this,[kt,o,a]),this.attrs=n||[]}),Ts="operation",Ge=J.extends(Ts,function(n,o,a){J.apply(this,[n||Ts,o,a])}),xs=Ge.extends("bin",function(n,o,a,c,d){Ge.apply(this,["bin",c,d]),this.type=n,this.left=o,this.right=a}),Hi="statement",It=mt.extends(Hi,function(n,o,a){mt.apply(this,[n||Hi,o,a])}),k="block",L=It.extends(k,function(n,o,a,c){It.apply(this,[n||k,a,c]),this.children=o.filter(Boolean)}),w="literal",O=J.extends(w,function(n,o,a,c,d){J.apply(this,[n||w,c,d]),this.value=o,a&&(this.raw=a)}),p="boolean",E=O.extends(p,function(n,o,a,c){O.apply(this,[p,n,o,a,c])}),C="break",B=It.extends(C,function(n,o,a){It.apply(this,[C,o,a]),this.level=n}),W="byref",Q=J.extends(W,function(n,o,a){J.apply(this,[W,o,a]),this.what=n}),ft="call",wt=J.extends(ft,function(n,o,a,c){J.apply(this,[ft,a,c]),this.what=n,this.arguments=o}),Kt="case",ne=It.extends(Kt,function(n,o,a,c){It.apply(this,[Kt,a,c]),this.test=n,this.body=o}),de="cast",_e=Ge.extends(de,function(n,o,a,c,d){Ge.apply(this,[de,c,d]),this.type=n,this.raw=o,this.expr=a}),Te="catch",ui=It.extends(Te,function(n,o,a,c,d){It.apply(this,[Te,c,d]),this.body=n,this.what=o,this.variable=a}),Ee="declaration",vi=It.extends(Ee,function(n,o,a,c){It.apply(this,[n||Ee,a,c]),this.name=o});vi.prototype.parseFlags=function(n){this.isAbstract=n[2]===1,this.isFinal=n[2]===2,this.isReadonly=n[3]===1,this.kind!=="class"&&(n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1)};var Le=vi,yi="class",Xn=Le.extends(yi,function(n,o,a,c,d,T,b){Le.apply(this,[yi,n,T,b]),this.isAnonymous=!n,this.extends=o,this.implements=a,this.body=c,this.attrGroups=[],this.parseFlags(d)}),He="constantstatement",Vn=It.extends(He,function(n,o,a,c){It.apply(this,[n||He,a,c]),this.constants=o}),vn="classconstant",Hn=Vn.extends(vn,function(n,o,a,c,d,T){Vn.apply(this,[n||vn,o,d,T]),this.parseFlags(a),this.attrGroups=c});Hn.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private")};var ya=Hn,Ur="clone",ba=J.extends(Ur,function(n,o,a){J.apply(this,[Ur,o,a]),this.what=n}),lr="closure",ie=J.extends(lr,function(n,o,a,c,d,T,b,g){J.apply(this,[lr,b,g]),this.uses=a,this.arguments=n,this.byref=o,this.type=c,this.nullable=d,this.isStatic=T||!1,this.body=null,this.attrGroups=[]}),Qe=mt.extends("comment",function(n,o,a,c){mt.apply(this,[n,a,c]),this.value=o}),Zn="commentblock",Vr=Qe.extends(Zn,function(n,o,a){Qe.apply(this,[Zn,n,o,a])}),Hr="commentline",Bs=Qe.extends(Hr,function(n,o,a){Qe.apply(this,[Hr,n,o,a])}),ks="constant",Yt=mt.extends(ks,function(n,o,a,c){mt.apply(this,[ks,a,c]),this.name=n,this.value=o}),De="continue",_i=It.extends(De,function(n,o,a){It.apply(this,[De,o,a]),this.level=n}),Ie="declare",ci=L.extends(Ie,function(n,o,a,c,d){L.apply(this,[Ie,o,c,d]),this.directives=n,this.mode=a});ci.MODE_SHORT="short",ci.MODE_BLOCK="block",ci.MODE_NONE="none";var yn=ci,Ti="declaredirective",Wn=mt.extends(Ti,function(n,o,a,c){mt.apply(this,[Ti,a,c]),this.key=n,this.value=o}),Pi=It.extends("do",function(n,o,a,c){It.apply(this,["do",a,c]),this.test=n,this.body=o}),Wi="echo",Xe=It.extends(Wi,function(n,o,a,c){It.apply(this,[Wi,a,c]),this.shortForm=o,this.expressions=n}),bi="empty",Wr=J.extends(bi,function(n,o,a){J.apply(this,[bi,o,a]),this.expression=n}),ni="encapsed",bn=O.extends(ni,function(n,o,a,c,d){O.apply(this,[ni,n,o,c,d]),this.type=a});bn.TYPE_STRING="string",bn.TYPE_SHELL="shell",bn.TYPE_HEREDOC="heredoc",bn.TYPE_OFFSET="offset";var Es=bn,on="encapsedpart",Ms=J.extends(on,function(n,o,a,c,d){J.apply(this,[on,c,d]),this.expression=n,this.syntax=o,this.curly=a}),qn="entry",my=J.extends(qn,function(n,o,a,c,d,T){J.apply(this,[qn,d,T]),this.key=n,this.value=o,this.byRef=a,this.unpack=c}),tl="enum",gy=Le.extends(tl,function(n,o,a,c,d,T){Le.apply(this,[tl,n,d,T]),this.valueType=o,this.implements=a,this.body=c,this.attrGroups=[]}),el="enumcase",Ty=mt.extends(el,function(n,o,a,c){mt.apply(this,[el,a,c]),this.name=n,this.value=o}),il="error",xy=mt.extends(il,function(n,o,a,c,d,T){mt.apply(this,[il,d,T]),this.message=n,this.token=o,this.line=a,this.expected=c}),nl="eval",ky=J.extends(nl,function(n,o,a){J.apply(this,[nl,o,a]),this.source=n}),sl="exit",Ey=J.extends(sl,function(n,o,a,c){J.apply(this,[sl,a,c]),this.expression=n,this.useDie=o}),rl="expressionstatement",vy=It.extends(rl,function(n,o,a){It.apply(this,[rl,o,a]),this.expression=n}),yy=It.extends("for",function(n,o,a,c,d,T,b){It.apply(this,["for",T,b]),this.init=n,this.test=o,this.increment=a,this.shortForm=d,this.body=c}),ol="foreach",by=It.extends(ol,function(n,o,a,c,d,T,b){It.apply(this,[ol,T,b]),this.source=n,this.key=o,this.value=a,this.shortForm=d,this.body=c}),al="function",Ca=Le.extends(al,function(n,o,a,c,d,T,b){Le.apply(this,[al,n,T,b]),this.arguments=o,this.byref=a,this.type=c,this.nullable=d,this.body=null,this.attrGroups=[]}),hl="global",Cy=It.extends(hl,function(n,o,a){It.apply(this,[hl,o,a]),this.items=n}),ll="goto",Ny=It.extends(ll,function(n,o,a){It.apply(this,[ll,o,a]),this.label=n}),ul="halt",Iy=It.extends(ul,function(n,o,a){It.apply(this,[ul,o,a]),this.after=n}),cl="identifier",Ay=mt.extends(cl,function(n,o,a){mt.apply(this,[cl,o,a]),this.name=n}),Sy=Ay,Oy=It.extends("if",function(n,o,a,c,d,T){It.apply(this,["if",d,T]),this.test=n,this.body=o,this.alternate=a,this.shortForm=c}),fl="include",Py=J.extends(fl,function(n,o,a,c,d){J.apply(this,[fl,c,d]),this.once=n,this.require=o,this.target=a}),dl="inline",Ly=O.extends(dl,function(n,o,a,c){O.apply(this,[dl,n,o,a,c])}),pl="interface",Dy=Le.extends(pl,function(n,o,a,c,d,T){Le.apply(this,[pl,n,d,T]),this.extends=o,this.body=a,this.attrGroups=c}),_l="intersectiontype",Ry=Le.extends(_l,function(n,o,a){Le.apply(this,[_l,null,o,a]),this.types=n}),ml="isset",wy=J.extends(ml,function(n,o,a){J.apply(this,[ml,o,a]),this.variables=n}),gl="label",Fy=It.extends(gl,function(n,o,a){It.apply(this,[gl,o,a]),this.name=n}),Tl="list",By=J.extends(Tl,function(n,o,a,c){J.apply(this,[Tl,a,c]),this.items=n,this.shortForm=o}),xl="lookup",Gn=J.extends(xl,function(n,o,a,c,d){J.apply(this,[n||xl,c,d]),this.what=o,this.offset=a}),kl="magic",My=O.extends(kl,function(n,o,a,c){O.apply(this,[kl,n,o,a,c])}),El="match",Uy=J.extends(El,function(n,o,a,c){J.apply(this,[El,a,c]),this.cond=n,this.arms=o}),vl="matcharm",Vy=J.extends(vl,function(n,o,a,c){J.apply(this,[vl,a,c]),this.conds=n,this.body=o}),yl="method",Hy=Ca.extends(yl,function(){Ca.apply(this,arguments),this.kind=yl}),bl="reference",mn=mt.extends(bl,function(n,o,a){mt.apply(this,[n||bl,o,a])}),Cl="name",ur=mn.extends(Cl,function(n,o,a,c){mn.apply(this,[Cl,a,c]),this.name=n.replace(/\\$/,""),this.resolution=o});ur.UNQUALIFIED_NAME="uqn",ur.QUALIFIED_NAME="qn",ur.FULL_QUALIFIED_NAME="fqn",ur.RELATIVE_NAME="rn";var Wy=ur,Nl="namespace",qy=L.extends(Nl,function(n,o,a,c,d){L.apply(this,[Nl,o,c,d]),this.name=n,this.withBrackets=a||!1}),Il="namedargument",Gy=J.extends(Il,function(n,o,a,c){J.apply(this,[Il,a,c]),this.name=n,this.value=o}),Yy=J.extends("new",function(n,o,a,c){J.apply(this,["new",a,c]),this.what=n,this.arguments=o}),Al="noop",jy=mt.extends(Al,function(n,o){mt.apply(this,[Al,n,o])}),Sl="nowdoc",Qy=O.extends(Sl,function(n,o,a,c,d){O.apply(this,[Sl,n,o,c,d]),this.label=a}),Ol="nullkeyword",zy=mt.extends(Ol,function(n,o,a){mt.apply(this,[Ol,o,a]),this.raw=n}),Pl="nullsafepropertylookup",Ky=Gn.extends(Pl,function(n,o,a,c){Gn.apply(this,[Pl,n,o,a,c])}),Ll="number",$y=O.extends(Ll,function(n,o,a,c){O.apply(this,[Ll,n,o,a,c])}),Dl="offsetlookup",Jy=Gn.extends(Dl,function(n,o,a,c){Gn.apply(this,[Dl,n,o,a,c])}),Rl="parameter",Xy=Le.extends(Rl,function(n,o,a,c,d,T,b,g,S,A){Le.apply(this,[Rl,n,S,A]),this.value=a,this.type=o,this.byref=c,this.variadic=d,this.readonly=T,this.nullable=b,this.flags=g||0,this.attrGroups=[]}),wl="parentreference",Zy=mn.extends(wl,function(n,o,a){mn.apply(this,[wl,o,a]),this.raw=n}),Fl="post",tb=Ge.extends(Fl,function(n,o,a,c){Ge.apply(this,[Fl,a,c]),this.type=n,this.what=o}),eb=Ge.extends("pre",function(n,o,a,c){Ge.apply(this,["pre",a,c]),this.type=n,this.what=o}),Bl="print",ib=J.extends(Bl,function(n,o,a){J.apply(this,[Bl,o,a]),this.expression=n}),Ml="program",nb=L.extends(Ml,function(n,o,a,c,d,T){L.apply(this,[Ml,n,d,T]),this.errors=o,a&&(this.comments=a),c&&(this.tokens=c)}),Ul="property",sb=It.extends(Ul,function(n,o,a,c,d,T,b,g){It.apply(this,[Ul,b,g]),this.name=n,this.value=o,this.readonly=a,this.nullable=c,this.type=d,this.attrGroups=T}),Vl="propertylookup",rb=Gn.extends(Vl,function(n,o,a,c){Gn.apply(this,[Vl,n,o,a,c])}),Hl="propertystatement",Wl=It.extends(Hl,function(n,o,a,c,d){It.apply(this,[Hl,c,d]),this.properties=o,this.parseFlags(a)});Wl.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1};var ob=Wl,ql="retif",ab=J.extends(ql,function(n,o,a,c,d){J.apply(this,[ql,c,d]),this.test=n,this.trueExpr=o,this.falseExpr=a}),Gl="return",hb=It.extends(Gl,function(n,o,a){It.apply(this,[Gl,o,a]),this.expr=n}),Yl="selfreference",lb=mn.extends(Yl,function(n,o,a){mn.apply(this,[Yl,o,a]),this.raw=n}),jl="silent",ub=J.extends(jl,function(n,o,a){J.apply(this,[jl,o,a]),this.expr=n}),Ql="static",cb=It.extends(Ql,function(n,o,a){It.apply(this,[Ql,o,a]),this.variables=n}),zl="staticvariable",fb=mt.extends(zl,function(n,o,a,c){mt.apply(this,[zl,a,c]),this.variable=n,this.defaultValue=o}),Kl="staticlookup",db=Gn.extends(Kl,function(n,o,a,c){Gn.apply(this,[Kl,n,o,a,c])}),$l="staticreference",pb=mn.extends($l,function(n,o,a){mn.apply(this,[$l,o,a]),this.raw=n}),Jl="string",_b=O.extends(Jl,function(n,o,a,c,d,T){O.apply(this,[Jl,o,c,d,T]),this.unicode=a,this.isDoubleQuote=n}),Xl="switch",mb=It.extends(Xl,function(n,o,a,c,d){It.apply(this,[Xl,c,d]),this.test=n,this.body=o,this.shortForm=a}),Zl="throw",gb=It.extends(Zl,function(n,o,a){It.apply(this,[Zl,o,a]),this.what=n}),tu="trait",Tb=Le.extends(tu,function(n,o,a,c){Le.apply(this,[tu,n,a,c]),this.body=o}),eu="traitalias",xb=mt.extends(eu,function(n,o,a,c,d,T){mt.apply(this,[eu,d,T]),this.trait=n,this.method=o,this.as=a,this.visibility="",c&&(c[0]===0?this.visibility="public":c[0]===1?this.visibility="protected":c[0]===2&&(this.visibility="private"))}),iu="traitprecedence",kb=mt.extends(iu,function(n,o,a,c,d){mt.apply(this,[iu,c,d]),this.trait=n,this.method=o,this.instead=a}),nu="traituse",Eb=mt.extends(nu,function(n,o,a,c){mt.apply(this,[nu,a,c]),this.traits=n,this.adaptations=o}),vb=It.extends("try",function(n,o,a,c,d){It.apply(this,["try",c,d]),this.body=n,this.catches=o,this.always=a}),su="typereference",ru=mn.extends(su,function(n,o,a,c){mn.apply(this,[su,a,c]),this.name=n,this.raw=o});ru.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var yb=ru,ou="unary",bb=Ge.extends(ou,function(n,o,a,c){Ge.apply(this,[ou,a,c]),this.type=n,this.what=o}),au="uniontype",Cb=Le.extends(au,function(n,o,a){Le.apply(this,[au,null,o,a]),this.types=n}),hu="unset",Nb=It.extends(hu,function(n,o,a){It.apply(this,[hu,o,a]),this.variables=n}),lu="usegroup",Ib=It.extends(lu,function(n,o,a,c,d){It.apply(this,[lu,c,d]),this.name=n,this.type=o,this.items=a}),uu="useitem",Na=It.extends(uu,function(n,o,a,c,d){It.apply(this,[uu,c,d]),this.name=n,this.alias=o,this.type=a});Na.TYPE_CONST="const",Na.TYPE_FUNCTION="function";var Ab=Na,cu="variable",Sb=J.extends(cu,function(n,o,a,c){J.apply(this,[cu,a,c]),this.name=n,this.curly=o||!1}),fu="variadic",Ob=J.extends(fu,function(n,o,a){J.apply(this,[fu,o,a]),this.what=n}),du="variadicplaceholder",Pb=mt.extends(du,function(n,o){mt.apply(this,[du,n,o])}),pu="while",Lb=It.extends(pu,function(n,o,a,c,d){It.apply(this,[pu,c,d]),this.test=n,this.body=o,this.shortForm=a}),_u="yield",Db=J.extends(_u,function(n,o,a,c){J.apply(this,[_u,a,c]),this.value=n,this.key=o}),mu="yieldfrom",Rb=J.extends(mu,function(n,o,a){J.apply(this,[mu,o,a]),this.value=n}),Ci=function(n,o){this.withPositions=n,this.withSource=o};Ci.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,o){n.forEach(function(a){Ci.precedence[a]=o+1})}),Ci.prototype.isRightAssociative=function(n){return n==="**"||n==="??"},Ci.prototype.swapLocations=function(n,o,a,c){this.withPositions&&(n.loc.start=o.loc.start,n.loc.end=a.loc.end,this.withSource&&(n.loc.source=c.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ci.prototype.resolveLocations=function(n,o,a,c){this.withPositions&&(n.loc.start.offset>o.loc.start.offset&&(n.loc.start=o.loc.start),n.loc.end.offset<a.loc.end.offset&&(n.loc.end=a.loc.end),this.withSource&&(n.loc.source=c.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},Ci.prototype.resolvePrecedence=function(n,o){var a,c,d;return n.kind==="call"?this.resolveLocations(n,n.what,n,o):n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"&&n.offset?this.resolveLocations(n,n.what,n.offset,o):n.kind==="bin"?n.right&&!n.right.parenthesizedExpression&&(n.right.kind==="bin"?(c=Ci.precedence[n.type],d=Ci.precedence[n.right.type],c&&d&&d<=c&&(n.type!==n.right.type||!this.isRightAssociative(n.type))&&(a=n.right,n.right=n.right.left,this.swapLocations(n,n.left,n.right,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a)):n.right.kind==="retif"&&(c=Ci.precedence[n.type],d=Ci.precedence["?"],c&&d&&d<=c&&(a=n.right,n.right=n.right.test,this.swapLocations(n,n.left,n.right,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a))):n.kind!=="silent"&&n.kind!=="cast"||!n.expr||n.expr.parenthesizedExpression?n.kind==="unary"?n.what&&!n.what.parenthesizedExpression&&(n.what.kind==="bin"?(a=n.what,n.what=n.what.left,this.swapLocations(n,n,n.what,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.what.kind==="retif"&&(a=n.what,n.what=n.what.test,this.swapLocations(n,n,n.what,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a)):n.kind==="retif"?n.falseExpr&&n.falseExpr.kind==="retif"&&!n.falseExpr.parenthesizedExpression&&(a=n.falseExpr,n.falseExpr=a.test,this.swapLocations(n,n.test,n.falseExpr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a):n.kind==="assign"?n.right&&n.right.kind==="bin"&&!n.right.parenthesizedExpression&&(c=Ci.precedence["="],d=Ci.precedence[n.right.type],c&&d&&d<c&&(a=n.right,n.right=n.right.left,a.left=n,this.swapLocations(a,a.left,n.right,o),n=a)):n.kind==="expressionstatement"&&this.swapLocations(n,n.expression,n,o):n.expr.kind==="bin"?(a=n.expr,n.expr=n.expr.left,this.swapLocations(n,n,n.expr,o),a.left=this.resolvePrecedence(n,o),this.swapLocations(a,a.left,a.right,o),n=a):n.expr.kind==="retif"&&(a=n.expr,n.expr=n.expr.test,this.swapLocations(n,n,n.expr,o),a.test=this.resolvePrecedence(n,o),this.swapLocations(a,a.test,a.falseExpr,o),n=a),n},Ci.prototype.prepare=function(n,o,a){var c=null;(this.withPositions||this.withSource)&&(c=a.position());var d=this,T=function b(){var g=null,S=Array.prototype.slice.call(arguments);if(S.push(o),d.withPositions||d.withSource){var A=null;d.withSource&&(A=a.lexer._input.substring(c.offset,a.prev[2])),g=new Nt(A,c,new zt(a.prev[0],a.prev[1],a.prev[2])),S.push(g)}n||(n=S.shift());var y=d[n];if(typeof y!="function")throw new Error('Undefined node "'+n+'"');var Vt=Object.create(y.prototype);return y.apply(Vt,S),b.instance=Vt,b.trailingComments&&(Vt.trailingComments=b.trailingComments),typeof b.postBuild=="function"&&b.postBuild(Vt),a.debug&&delete d.stack[b.stackUid],d.resolvePrecedence(Vt,a)};return a.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:c,stack:new Error().stack.split(`
`).slice(3,5)},T.stackUid=this.stackUid),T.setTrailingComments=function(b){T.instance?T.instance.setTrailingComments(b):T.trailingComments=b},T.destroy=function(b){o&&(b?b.leadingComments?b.leadingComments=o.concat(b.leadingComments):b.leadingComments=o:a._docIndex=a._docs.length-o.length),a.debug&&delete d.stack[T.stackUid]},T},Ci.prototype.checkNodes=function(){var n=[];for(var o in this.stack)Object.prototype.hasOwnProperty.call(this.stack,o)&&(this.stack[o].key=o,n.push(this.stack[o]));return this.stack={},n},[Rt,Vi,Je,_n,gs,Fs,xs,L,E,B,Q,wt,ne,_e,ui,Xn,ya,ba,ie,Qe,Vr,Bs,Yt,Vn,_i,Le,yn,Wn,Pi,Xe,Wr,Es,Ms,my,gy,Ty,xy,ky,Ey,J,vy,yy,by,Ca,Cy,Ny,Iy,Sy,Oy,Py,Ly,Dy,Ry,wy,Fy,By,O,Gn,My,Uy,Vy,Hy,Wy,qy,Gy,Yy,mt,jy,Qy,zy,Ky,$y,Jy,Ge,Xy,Zy,tb,eb,ib,nb,sb,rb,ob,mn,ab,hb,lb,ub,It,cb,fb,db,pb,_b,mb,gb,Tb,xb,kb,Eb,vb,yb,bb,Cb,Nb,Ib,Ab,Sb,Ob,Pb,Lb,Db,Rb].forEach(function(n){Ci.prototype[n.kind]=n});var gu=Ci;function Ia(n,o){for(var a=Object.keys(n),c=a.length;c--;){var d=a[c],T=n[d];T===null?delete o[d]:typeof T=="function"?o[d]=T.bind(o):Array.isArray(T)?o[d]=Array.isArray(o[d])?o[d].concat(T):T:l(T)==="object"?o[d]=l(o[d])==="object"?Ia(T,o[d]):T:o[d]=T}return o}var qi=function(n){if(typeof this=="function")return new this(n);if(this.tokens=ut,this.lexer=new Ht(this),this.ast=new gu,this.parser=new lt(this.lexer,this.ast),n&&l(n)==="object"){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if(typeof n.parser.version=="string"){var o=n.parser.version.split(".");if(o=100*parseInt(o[0])+parseInt(o[1]),isNaN(o))throw new Error("Bad version number : "+n.parser.version);n.parser.version=o}else if(typeof n.parser.version!="number")throw new Error("Expecting a number for version");if(n.parser.version<500||n.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Ia(n,this),this.lexer.version=this.parser.version}},Aa=function(n){return typeof n.write=="function"?n.toString():n};qi.create=function(n){return new qi(n)},qi.parseEval=function(n,o){return new qi(o).parseEval(n)},qi.prototype.parseEval=function(n){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,n=Aa(n),this.parser.parse(n,"eval")},qi.parseCode=function(n,o,a){return l(o)!=="object"||a||(a=o,o="unknown"),new qi(a).parseCode(n,o)},qi.prototype.parseCode=function(n,o){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=Aa(n),this.parser.parse(n,o)},qi.tokenGetAll=function(n,o){return new qi(o).tokenGetAll(n)},qi.prototype.tokenGetAll=function(n){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,n=Aa(n);var o=this.lexer.EOF,a=this.tokens.values;this.lexer.setInput(n);for(var c=this.lexer.lex()||o,d=[];c!=o;){var T=this.lexer.yytext;Object.prototype.hasOwnProperty.call(a,c)&&(T=[a[c],T,this.lexer.yylloc.first_line]),d.push(T),c=this.lexer.lex()||o}return d};var ts=qi,wb=ut,Fb=Ht,Bb=gu,Mb=lt,Ub=Ia,Vb=qi,Hb=qi;ts.tokens=wb,ts.lexer=Fb,ts.AST=Bb,ts.parser=Mb,ts.combine=Ub,ts.Engine=Vb,ts.default=Hb;var Tu=function(n,o,a){var c=a&&a.parentParser==="markdown";if(!n&&c)return"";n=n.replace(/\?>\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var d,T=new ts({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),b=n.indexOf("<?php")!==-1,g=c&&!b;try{d=g?T.parseEval(n):T.parseCode(n)}catch(S){throw S instanceof SyntaxError&&"lineNumber"in S&&(S.loc={start:{line:S.lineNumber,column:S.columnNumber}},delete S.lineNumber,delete S.columnNumber),S}return d.extra={parseAsEval:g},d.comments.forEach(function(S){S.value[S.value.length-1]===`
`&&(S.value=S.value.slice(0,-1),S.loc.end.offset=S.loc.end.offset-1)}),d},Us=s.default.util,Wb=Us.hasNewline,qb=Us.skipEverythingButNewLine,Gb=Us.skipNewline,Yb=Us.isNextLineEmpty,jb=Us.isPreviousLineEmpty,Qb=Us.getNextNonSpaceNonCommentCharacterIndex,zb=s.default.version;function Sa(n,o){return parseInt(zb[0])>1?n[o]:n}var xu={};function Oa(n){return xu[n]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(n,o){n.forEach(function(a){xu[a]=o})});var ku=["==","!=","===","!==","<>","<=>"],qr=["*","/","%"],Pa=[">>","<<"];function Eu(n){return["block","program","namespace","class","enum","interface","trait","traituse","declare"].includes(n.kind)}function vu(n){var o=n.body;return o?(o.kind==="block"&&(o=o.children),o[0]):null}function es(n){var o=n.children||n.body||n.adaptations;return Array.isArray(o)?o:null}function yu(n){var o=n.getParentNode();return o?es(o):null}function Gr(n){return n.length>0?n[n.length-1]:null}function La(n){var o=n.getValue();if(o.kind==="program"){var a=es(o);return!(!a||a.length===0)&&a[0].kind==="inline"}if(o.kind==="switch"){if(!o.body)return!1;var c=es(o.body);if(c.length===0)return!1;var d=_(c,1)[0];if(!d.body)return!1;var T=es(d.body);return T.length!==0&&T[0].kind==="inline"}var b=vu(o);return!!b&&b.kind==="inline"}var bu=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(n,o){return n[o.toLowerCase()]=o,n},{}),he={printNumber:function(n){return n.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:Oa,isBitwiseOperator:function(n){return!!Pa[n]||n==="|"||n==="^"||n==="&"},shouldFlatten:function(n,o){return Oa(o)===Oa(n)&&n!=="**"&&(!ku.includes(n)||!ku.includes(o))&&!(o==="%"&&qr.includes(n)||n==="%"&&qr.includes(o))&&(o===n||!qr.includes(o)||!qr.includes(n))&&(!Pa.includes(n)||!Pa.includes(o))},nodeHasStatement:Eu,getNodeListProperty:es,getParentNodeListProperty:yu,getLast:Gr,getPenultimate:function(n){return n.length>1?n[n.length-2]:null},isLastStatement:function(n){var o=yu(n);if(!o)return!0;var a=n.getValue();return o[o.length-1]===a},getBodyFirstChild:vu,lineShouldEndWithSemicolon:function(n){var o=n.getValue(),a=n.getParentNode();if(!a)return!1;if(["for","foreach","while","do","if","switch"].includes(a.kind)&&o.kind!=="block"&&o.kind!=="if"&&(a.body===o||a.alternate===o))return!0;if(!Eu(a)||o.kind==="echo"&&o.shortForm)return!1;if(o.kind==="traituse")return!o.adaptations;if(o.kind==="method"&&o.isAbstract)return!0;if(o.kind==="method"){var c=n.getParentNode();if(c&&c.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","enumcase","global","static","echo","unset","return","break","continue","throw"].includes(o.kind)},fileShouldEndWithHardline:function(n){var o=n.getValue(),a=o.kind==="program",c=o.children&&Gr(o.children);if(!a||c&&["halt","inline"].includes(c.kind))return!1;if(c&&(c.kind==="declare"||c.kind==="namespace")){var d=c.children.length>0&&Gr(c.children);if(d&&["halt","inline"].includes(d.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(n){var o=n.replace(/^\\/,"");return o.indexOf("\\")!==-1?o:n},hasDanglingComments:function(n){return n.comments&&n.comments.some(function(o){return!o.leading&&!o.trailing})},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},docShouldHaveTrailingNewline:function n(o){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=o.getNode(a),d=o.getNode(a+1),T=o.getNode(a+2);if(!d)return!1;if(T&&["call","new","echo"].includes(T.kind)&&!["call","array"].includes(d.kind)||d.kind==="parameter"){var b=T.arguments.length-1,g=T.arguments.indexOf(d);return g!==b}if(T&&T.kind==="for"){var S=T.init.indexOf(d);if(S!==-1)return S!==T.init.length-1;var A=T.test.indexOf(d);if(A!==-1)return A!==T.test.length-1;var y=T.increment.indexOf(d);if(y!==-1)return y!==T.increment.length-1}if(d.kind==="bin")return d.left===c||n(o,a+1);if(d.kind==="case"&&d.test===c)return!0;if(d.kind==="staticvariable"){var Vt=T.variables.length-1,Mt=T.variables.indexOf(d);return Mt!==Vt}if(d.kind==="entry"){if(d.key===c)return!0;var ue=T.items.length-1,me=T.items.indexOf(d);return me!==ue}if(["call","new"].includes(d.kind)){var Wt=d.arguments.length-1,ye=d.arguments.indexOf(c);return ye!==Wt}if(d.kind==="echo"){var te=d.expressions.length-1,Ae=d.expressions.indexOf(c);return Ae!==te}if(d.kind==="array"){var Se=d.items.length-1,xe=d.items.indexOf(c);return xe!==Se}return d.kind==="retif"&&n(o,a+1)},isLookupNode:function(n){return n.kind==="propertylookup"||n.kind==="nullsafepropertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"},isFirstChildrenInlineNode:La,shouldPrintHardLineAfterStartInControlStructure:function(n){var o=n.getValue();return!["try","catch"].includes(o.kind)&&La(n)},shouldPrintHardLineBeforeEndInControlStructure:function(n){var o=n.getValue();if(["try","catch"].includes(o.kind))return!0;if(o.kind==="switch"){var a=es(o.body);if(a.length===0)return!0;var c=Gr(a);if(!c.body)return!0;var d=es(c.body);return d.length===0||d[0].kind!=="inline"}return!La(n)},getAlignment:function(n){var o=n.split(`
`).pop();return o.length-o.trimLeft().length+1},isProgramLikeNode:function(n){return["program","declare","namespace"].includes(n.kind)},isReferenceLikeNode:function(n){return["name","parentreference","selfreference","staticreference"].includes(n.kind)},getNodeKindIncludingLogical:function(n){return n.kind==="bin"&&["||","&&"].includes(n.type)?"logical":n.kind},useDoubleQuote:function(n,o){if(n.isDoubleQuote===o.singleQuote){var a=n.raw.slice(n.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return n.isDoubleQuote?a:!a}return n.isDoubleQuote},hasEmptyBody:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",a=n.getValue();return a[o]&&a[o].children&&a[o].children.length===0&&(!a[o].comments||a[o].comments.length===0)},isNextLineEmptyAfterNamespace:function(n,o,a){var c=a(o);return c=qb(n,c),c=Gb(n,c),Wb(n,c)},shouldPrintHardlineBeforeTrailingComma:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"||n.kind==="entry"&&(n.value.kind==="nowdoc"||n.value.kind==="encapsed"&&n.value.type==="heredoc")},isDocNode:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"},getAncestorNode:function(n,o){var a=function(c,d){for(var T,b=[].concat(d),g=-1;T=c.getParentNode(++g);)if(b.indexOf(T.kind)!==-1)return g;return-1}(n,o);return a===-1?null:n.getParentNode(a)},getNextNode:function(n,o){var a=n.getParentNode(),c=es(a);if(!c)return null;var d=c.indexOf(o);return d===-1?null:a.children[d+1]},normalizeMagicMethodName:function(n){var o=n.toLowerCase();return bu[o]?bu[o]:n},isPreviousLineEmpty:function(n,o,a){return jb(n,o,Sa(a,"locStart"))},isNextLineEmpty:function(n,o,a){return Yb(n,o,Sa(a,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(n,o,a){return Qb(n,o,Sa(a,"locEnd"))}},Vs=s.default.util,gn=Vs.addLeadingComment,Gi=Vs.addDanglingComment,Tn=Vs.addTrailingComment,Kb=Vs.skipNewline,Yr=Vs.hasNewline,$b=Vs.hasNewlineInRange,Hs=s.default.doc.builders,Cu=Hs.join,Jb=Hs.indent,Cn=Hs.hardline,Nu=Hs.cursor,Iu=Hs.lineSuffix,Xb=Hs.breakParent,cr=he.getNextNonSpaceNonCommentCharacterIndex,Zb=he.isNextLineEmpty,tC=he.isPreviousLineEmpty,eC=he.isLookupNode;function jr(n,o){var a=n.children;a.length===0?Gi(n,o):gn(a[0],o)}function Da(n,o){n.kind==="block"?jr(n,o):gn(n,o)}function Au(n,o,a,c,d,T){var b=cr(n,d,T),g=n.charAt(b);return o&&o.kind==="identifier"&&a&&(a.kind==="function"||a.kind==="method")&&g===")"?(Tn(a,d),!0):!(!a||a.kind!=="function"&&a.kind!=="method"||!c||c.kind!=="block")&&(jr(c,d),!0)}function Ra(n,o,a,c,d,T){if(!a||a.kind!=="if"||!c)return!1;var b=cr(n,d,T);return n.charAt(b)===")"?(Tn(o,d),!0):o===a.body&&c===a.alternate?(Gi(a,d),!0):c.kind==="if"?(Da(c.body,d),!0):a.body===c&&(gn(c,d),!0)}function wa(n,o,a){if(n&&["class","interface","trait"].includes(n.kind)){if(o&&n.extends){if(Array.isArray(n.extends)){if(n.extends.some(function(c){if(o&&o===c)return Gi(o,a),!0}))return!0}else if(o===n.extends)return Gi(o,a),!0}if(o&&n.implements&&n.implements.some(function(c){if(o&&o===c)return Gi(o,a),!0}))return!0;if(!(n.body&&n.body.length>0))return Gi(n,a),!0}return!!(o&&o.kind==="class"&&o.isAnonymous&&o.leadingComments&&a.kind==="commentblock")}function Fa(n,o,a,c,d){if(o&&(o.kind==="function"||o.kind==="method")){for(var T=0,b=0;b<o.arguments.length;b++)T=d.locEnd(o.arguments[b])>T?d.locEnd(o.arguments[b]):T;var g=o.body&&d.locStart(c)>T&&d.locEnd(c)<d.locStart(o.body),S=cr(n,c,d);if(o.type&&g&&n.charAt(S)!==")")return d.locEnd(c)<d.locStart(o.type)?(Gi(o.type,c),!0):(Tn(o.type,c),!0)}return!1}function Ba(n,o,a,c,d){return!(!a||!["function","method","parameter"].includes(a.kind))&&o.kind==="typereference"&&c.kind==="identifier"&&(Tn(o,d),!0)}function Su(n,o){return!(!n||!["label","goto"].includes(n.kind))&&(Tn(n,o),!0)}function Ma(n,o,a,c){return a&&a.kind==="inline"?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.includes(c)||a.leadingComments.push(c),!0):!(n||a||!o||o.kind!=="inline")&&(Gi(o,c),!0)}function Ou(n,o,a){return!(!n||n.kind!=="try"||!o)&&(o.kind==="block"?(jr(o,a),!0):o.kind==="try"?(Da(o.always,a),!0):o.kind==="catch"&&(Da(o.body,a),!0))}function Pu(n,o,a,c){return a||o||!n||n.kind!=="namespace"||n.withBrackets?!(o||!n||n.kind!=="namespace"||n.withBrackets)&&(Gi(n,c),!0):(Tn(n,c),!0)}function Lu(n,o,a,c){return!(!n||n.kind!=="declare")&&(!o||o.kind!=="noop")&&(a&&n.directives[0]!==a?!(!a||!o)&&(gn(a,c),!0):(n.mode==="none"?Tn(n,c):Gi(n,c),!0))}function Ua(n,o,a,c,d,T){if(!a||a.kind!=="while"||!c)return!1;var b=cr(n,d,T);return n.charAt(b)===")"?(Tn(o,d),!0):c.kind==="block"&&(jr(c,d),!0)}function Va(n,o){return n.getValue().printed=!0,o.printer.printComment(n,o)}function Du(n,o,a){return n.getNode()===o.cursorNode&&n.getValue()?[Nu,a,Nu]:a}var se={handleOwnLineComment:function(n,o,a){var c=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return Au(o,c,d,T,n,a)||function(b,g,S){return b&&eC(b)&&g&&["identifier","variable","encapsed"].includes(g.kind)?(gn(b,S),!0):!1}(d,T,n)||Ra(o,c,d,T,n,a)||Ua(o,c,d,T,n,a)||Ou(d,T,n)||wa(d,T,n)||Ba(o,c,d,T,n)||Fa(o,d,T,n,a)||function(b,g,S,A){return!S&&b&&(b.kind==="for"||b.kind==="foreach")?(b.body&&b.body.kind!=="block"?gn(S,A):gn(b,A),!0):!1}(d,0,T,n)||Ma(d,c,T,n)||Lu(d,c,T,n)},handleEndOfLineComment:function(n,o,a){var c=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return function(b,g,S,A,y){return!g&&!A&&S&&S.kind==="array"?(Tn(S,y),!0):!1}(0,c,d,T,n)||function(b,g,S,A,y){return S&&S.kind==="return"&&!S.expr?(Tn(S,y),!0):!1}(0,0,d,0,n)||Au(o,c,d,T,n,a)||function(b,g,S,A,y,Vt){var Mt=g&&!$b(y,Vt.locEnd(g),Vt.locStart(A));return(!g||!Mt)&&b&&b.kind==="retif"&&S?(gn(S,A),!0):!1}(d,c,T,n,o,a)||Ra(o,c,d,T,n,a)||Ua(o,c,d,T,n,a)||Ou(d,T,n)||wa(d,T,n)||Ba(o,c,d,T,n)||Fa(o,d,T,n,a)||function(b,g){return b&&b.kind==="entry"?(gn(b,g),!0):!1}(d,n)||function(b,g,S){return g&&g.kind==="call"&&b&&g.what===b&&g.arguments.length>0?(gn(g.arguments[0],S),!0):!1}(c,d,n)||function(b,g,S){if(b&&b.kind==="assign"&&g){var A=b.loc.start.offset+b.loc.source.indexOf("=");if(S.loc.start.offset>A)return gn(g,S),!0}return!1}(d,T,n)||Ma(d,c,T,n)||Pu(d,c,T,n)||Lu(d,c,T,n)||Su(d,n)},handleRemainingComment:function(n,o,a){var c=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return Ra(o,c,d,T,n,a)||Ua(o,c,d,T,n,a)||function(b,g,S,A){var y=cr(b,S,A);return b.charAt(y)!==")"?!1:g&&(g.kind==="function"||g.kind==="closure"||g.kind==="method"||g.kind==="call"||g.kind==="new")&&g.arguments.length===0?(Gi(g,S),!0):!1}(o,d,n,a)||wa(d,T,n)||function(b,g,S){return b&&b.kind==="traituse"&&b.adaptations&&!b.adaptations.length?(Gi(b,S),!0):!1}(d,0,n)||Ba(o,c,d,T,n)||Fa(o,d,T,n,a)||Su(d,n)||function(b,g,S,A){return g&&g.kind==="halt"?(Gi(g,A),!0):b&&b.kind==="halt"?(Gi(b,A),!0):!1}(c,d,0,n)||function(b,g){return b&&(b.kind==="continue"||b.kind==="break")&&!b.label?(Tn(b,g),!0):!1}(d,n)||Ma(d,c,T,n)||Pu(d,c,T,n)},getCommentChildNodes:function(n){return l(n)!=="object"?[]:function(o){return Object.keys(o).filter(function(a){return a!=="kind"&&a!=="loc"&&a!=="errors"&&a!=="extra"&&a!=="comments"&&a!=="leadingComments"&&a!=="enclosingNode"&&a!=="precedingNode"&&a!=="followingNode"}).map(function(a){return o[a]})}(n)},canAttachComment:function(n){return n.kind&&n.kind!=="commentblock"&&n.kind!=="commentline"},isBlockComment:function(n){return n.kind==="commentblock"},printDanglingComments:function(n,o,a,c){var d=[],T=n.getValue();return T&&T.comments?(n.each(function(b){var g=b.getValue();!g||g.leading||g.trailing||c&&!c(g)||d.push(Va(b,o))},"comments"),d.length===0?"":a?Cu(Cn,d):Jb([Cn,Cu(Cn,d)])):""},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(o){return o.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(o){return o.trailing})},hasLeadingOwnLineComment:function(n,o,a){return o.comments&&o.comments.some(function(c){return c.leading&&Yr(n,a.locEnd(c))})},printComments:function(n,o){var a=[];return n.forEach(function(c,d,T){c.printed=!0;var b=T.length===d+1;a.push(c.value),b||a.push(Cn),Zb(o.originalText,c,o)&&!b&&a.push(Cn)}),a},printAllComments:function(n,o,a,c){var d=n.getValue(),T=o(n),b=d&&d.comments;if(!b||b.length===0)return Du(n,a,T);var g=[],S=[c?";":"",T];return n.each(function(A){var y=A.getValue(),Vt=y.leading,Mt=y.trailing;if(Vt){var ue=function(Wt,ye,te){var Ae=Wt.getValue(),Se=Va(Wt,te);return Se?te.printer.isBlockComment&&te.printer.isBlockComment(Ae)?[Se,Yr(te.originalText,te.locEnd(Ae))?Cn:" "]:[Se,Cn]:""}(A,0,a);if(!ue)return;g.push(ue);var me=a.originalText;Yr(me,Kb(me,a.locEnd(y)))&&g.push(Cn)}else Mt&&S.push(function(Wt,ye,te){var Ae=Wt.getValue(),Se=Va(Wt,te);if(!Se)return"";var xe=te.printer.isBlockComment&&te.printer.isBlockComment(Ae);if(Yr(te.originalText,te.locStart(Ae),{backwards:!0})){var ee=tC(te.originalText,Ae,te);return Iu([Cn,ee?Cn:"",Se])}return xe?[" ",Se]:[Iu([" ",Se]),xe?"":Xb]}(A,0,a))},"comments"),Du(n,a,g.concat(S))}};function Ru(){}Ru.strictEqual=function(){};var iC=Ru,wu=he.getPrecedence,nC=he.shouldFlatten,sC=he.isBitwiseOperator,Fu=function(n){var o=n.getParentNode();if(!o)return!1;var a=n.getName(),c=n.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(o.kind))return!1;switch(c.kind){case"pre":case"post":if(o.kind==="unary")return c.kind==="pre"&&(c.type==="+"&&o.type==="+"||c.type==="-"&&o.type==="-");case"unary":switch(o.kind){case"unary":return c.type===o.type&&(c.type==="+"||c.type==="-");case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===c;case"bin":return o.type==="**"&&a==="left";default:return!1}case"bin":switch(o.kind){case"assign":case"retif":return["and","xor","or"].includes(c.type);case"silent":case"cast":return c.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":return a==="what"&&o.what===c;case"bin":var d=o.type,T=wu(d),b=c.type,g=wu(b);return T>g||d==="||"&&b==="&&"||(T===g&&a==="right"?(iC.strictEqual(o.right,c),!0):T===g&&!nC(d,b)||(T<g&&b==="%"?d==="+"||d==="-":!!sC(d)));default:return!1}case"propertylookup":case"nullsafepropertylookup":case"staticlookup":return o.kind==="call"&&a==="what"&&o.what===c&&c.parenthesizedExpression;case"clone":case"new":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===c;default:return!1}case"yield":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===c;case"retif":return o.test===c;default:return!(!c.key&&!c.value)}case"assign":return(o.kind!=="for"||!o.init.includes(c)&&!o.increment.includes(c))&&o.kind!=="assign"&&o.kind!=="static"&&!["if","do","while","foreach","switch"].includes(o.kind)&&o.kind!=="silent"&&o.kind!=="call";case"retif":switch(o.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(a==="test"&&!o.trueExpr);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&o.what===c;default:return!1}case"closure":switch(o.kind){case"call":return a==="what"&&o.what===c;case"propertylookup":case"nullsafepropertylookup":return!0;default:return!1}case"silence":case"cast":return c.parenthesizedExpression;case"string":case"array":switch(o.kind){case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(c.kind)||o.kind!=="offsetlookup")&&a==="what"&&o.what===c;default:return!1}case"print":case"include":return o.kind==="bin"}return!1},Yi=s.default.doc.builders,Bu=Yi.breakParent,fi=Yi.join,ve=Yi.line,rC=Yi.lineSuffix,At=Yi.group,Ws=Yi.conditionalGroup,Ft=Yi.indent,oC=Yi.dedent,is=Yi.ifBreak,vt=Yi.hardline,re=Yi.softline,qs=Yi.literalline,aC=Yi.align,hC=Yi.dedentToRoot,ns=s.default.doc.utils.willBreak,Ha=s.default.util,lC=Ha.isNextLineEmptyAfterIndex,uC=Ha.hasNewline,Mu=Ha.hasNewlineInRange,ss=he.getLast,cC=he.getPenultimate,Uu=he.isLastStatement,fC=he.lineShouldEndWithSemicolon,dC=he.printNumber,Vu=he.shouldFlatten,Hu=he.maybeStripLeadingSlashFromUse,pC=he.fileShouldEndWithHardline,Xi=he.hasDanglingComments,Wu=he.hasLeadingComment,qu=he.hasTrailingComment,Gu=he.docShouldHaveTrailingNewline,ji=he.isLookupNode,Wa=he.isFirstChildrenInlineNode,_C=he.shouldPrintHardLineAfterStartInControlStructure,mC=he.shouldPrintHardLineBeforeEndInControlStructure,gC=he.getAlignment,qa=he.isProgramLikeNode,Gs=he.getNodeKindIncludingLogical,TC=he.useDoubleQuote,Yu=he.hasEmptyBody,xC=he.isNextLineEmptyAfterNamespace,ju=he.shouldPrintHardlineBeforeTrailingComma,Ga=he.isDocNode,Ya=he.getAncestorNode,ja=he.isReferenceLikeNode,kC=he.getNextNode,EC=he.normalizeMagicMethodName,vC=he.getNextNonSpaceNonCommentCharacterIndex,vs=he.isNextLineEmpty;function Ys(n,o){return parseFloat(n)>=parseFloat(o)}function fr(n,o){return!!n.trailingCommaPHP&&Ys(n.phpVersion,o)}function Qa(n){return n.braceStyle!=="1tbs"}function za(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return[c?"?":"","->",n.call(a,"offset")]}function Qu(n,o,a){return za(n,o,a,!0)}function zu(n,o,a){var c=n.getValue(),d=!["variable","identifier"].includes(c.offset.kind);return["::",d?"{":"",n.call(a,"offset"),d?"}":""]}function Ku(n,o,a){var c=n.getValue(),d=c.offset&&c.offset.kind==="number"||Ya(n,"encapsed");return["[",c.offset?At([Ft([d?"":re,n.call(a,"offset")]),d?"":re]):"","]"]}function $u(n){return n.kind==="array"&&(n.items.length>0||n.comments)||n.kind==="function"||n.kind==="method"||n.kind==="closure"}function yC(n){var o=ss(n),a=cC(n);return!Wu(o)&&!qu(o)&&$u(o)&&(!a||a.kind!==o.kind)}function bC(n){if(n.length!==2)return!1;var o=_(n,2),a=o[0],c=o[1];return!(a.comments&&a.comments.length||a.kind!=="function"&&a.kind!=="method"&&a.kind!=="closure"||c.kind==="retif"||$u(c))}function Nn(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",d=n.getValue()[c];if(d.length===0)return["(",se.printDanglingComments(n,o,!0),")"];var T=!1,b=!1,g=d.length-1,S=n.map(function(xe,ee){var be=xe.getNode(),Ue=[a(xe)];return ee===g||(vs(o.originalText,be,o)?(ee===0&&(b=!0),T=!0,Ue.push(",",vt,vt)):Ue.push(",",ve)),Ue},c),A=n.getValue(),y=ss(d),Vt=fr(o,"7.3")&&["call","new","unset","isset"].includes(A.kind)||fr(o,"8.0")&&["function","closure","method","arrowfunc","attribute"].includes(A.kind)?Ft([y&&ju(y)?vt:"",","]):"";function Mt(){return At(["(",Ft([ve].concat(m(S))),Vt,ve,")"],{shouldBreak:!0})}var ue=bC(d),me=yC(d);if(ue||me){var Wt,ye=(ue?S.slice(1).some(ns):S.slice(0,-1).some(ns))||T,te=0;n.each(function(xe){ue&&te===0&&(Wt=[xe.call(function(ee){return a(ee,{expandFirstArg:!0})}),S.length>1?",":"",b?vt:ve,b?vt:"",S.slice(1)]),me&&te===d.length-1&&(Wt=[].concat(m(S.slice(0,-1)),[xe.call(function(ee){return a(ee,{expandLastArg:!0})})])),te++},c);var Ae=S.some(ns),Se=["("].concat(m(Wt),[")"]);return[Ae?Bu:"",Ws([Ae?is(Mt(),Se):Se,ue?["(",At(Wt[0],{shouldBreak:!0})].concat(m(Wt.slice(1)),[")"]):["("].concat(m(S.slice(0,-1)),[At(ss(Wt),{shouldBreak:!0}),")"]),At(["(",Ft([ve].concat(m(S))),is(Vt),ve,")"],{shouldBreak:!0})],{shouldBreak:ye})]}return At(["(",Ft([re].concat(m(S))),is(Vt),re,")"],{shouldBreak:S.some(ns)||T})}function Ju(n){return n.kind==="array"&&n.items.length!==0}function dr(n){return n.right.kind==="array"&&n.right.items.length!==0}function Xu(n,o,a,c,d){var T=[],b=n.getValue();if(b.kind==="bin"){Vu(b.type,b.left.type)?T=T.concat(n.call(function(Vt){return Xu(Vt,o,a,!0,d)},"left")):T.push(n.call(o,"left"));var g=dr(b)?[b.type," ",n.call(o,"right")]:[b.type,ve,n.call(o,"right")],S=n.getParentNode(),A=!(d&&["||","&&"].includes(b.type))&&Gs(S)!==Gs(b)&&Gs(b.left)!==Gs(b)&&Gs(b.right)!==Gs(b),y=Ga(b.left)||b.left.kind==="bin"&&Ga(b.left.right);T.push(y?"":" ",A?At(g):g),c&&b.comments&&(T=se.printAllComments(n,function(){return T},a))}else T.push(n.call(o));return T}function Zu(n,o,a){var c=n.getValue();switch(c.kind){case"propertylookup":return za(n,o,a);case"nullsafepropertylookup":return Qu(n,o,a);case"staticlookup":return zu(n,0,a);case"offsetlookup":return Ku(n,0,a);default:return"Have not implemented lookup kind ".concat(c.kind," yet.")}}function tc(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.opening,c=a===void 0||a;if(n.type==="heredoc")return c?"<<<".concat(n.label):n.label;var d={string:'"',shell:"`"};return d[n.type]?d[n.type]:"Unimplemented encapsed type ".concat(n.type)}function CC(n,o,a){var c=[],d=[];return n.each(function(T){c.push(d),c.push(At(a(T))),d=[",",ve],T.getValue()&&vs(o.originalText,T.getValue(),o)&&d.push(re)},"items"),c}function NC(n,o){if(o.length===0)return n;var a=0;return o.reduce(function(c,d){var T=d.start,b=d.end,g=d.alignment,S=d.before,A=d.after,y=[S||""].concat(m(n.slice(T,b)),[A||""]),Vt=c.concat(n.slice(a,T),g?hC(At(aC(new Array(g).join(" "),y))):At(y),b===n.length-1?n.slice(b):"");return a=b,Vt},[])}function pr(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",d=n.getValue(),T=n.getParentNode(),b=-1,g=[],S=[];n.map(function(xe,ee){var be=xe.getValue(),Ue=be.kind==="inline",hn=a(xe),mi=d[c],ot=mi[ee+1],rt=!Uu(xe)&&!Ue&&(ot&&ot.kind==="case"?!Wa(n):ot&&ot.kind!=="inline"),Gt=[hn,rt?vt:"",rt&&vs(o.originalText,be,o)?vt:""],jt=ee===0,Dt=mi.length-1===ee,Ne=d.kind==="block"&&T&&["function","closure","method","try","catch"].includes(T.kind),Re=Ne&&jt?"":" ";if(Ue||!Ue&&Dt&&b>=0){var ze=b;if(Ue&&(b=ee),Ue&&!jt||!Ue&&Dt){var gi=(Ue?ze:b)+1,oe=Dt&&!Ue?ee+1:ee,Ye=mi[Ue?ze:b],Li=Ye?gC(Ye.raw):"",os=oe-gi>1,as=os?Ne&&!Ye||qa(d)&&gi===0?"":vt:"",ln=os&&be.kind!=="halt"?Ne&&Dt?"":vt:"";os&&(Re=""),S.push({start:gi,end:oe,alignment:Li,before:as,after:ln})}}if(Ue){var Zi=ot&&ot.kind==="echo"&&ot.shortForm?"<?=":"<?php",Zr=be.leadingComments&&be.leadingComments.length?[jt&&d.kind!=="namespace"&&!Ne?"<?php":"",d.kind!=="namespace"&&Ne?"":vt,se.printComments(be.leadingComments,o),vt,"?>"]:qa(d)&&jt&&d.kind!=="namespace"?"":[Re,"?>"],jn=n.getNode(ee+1),Qs=jn&&jn.children&&jn.children.length;Gt=[Zr,Gt,be.comments&&be.comments.length?[Zi,vt,Qs?se.printComments(be.comments,o):"",vt]:qa(d)&&Dt?"":[Zi," "]]}g.push(Gt)},c);var A=NC(g,S);if(d.kind==="program"&&!d.extra.parseAsEval){var y=[],Vt=_(d.children,1),Mt=Vt[0],ue=!Mt||Mt.kind!=="inline";if(ue){var me=o.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),Wt=[me&&me[2]&&me[2].includes(`
`)?[vt,me[2].split(`
`).length>2?vt:""]:" ",d.comments?se.printComments(d.comments,o):""],ye=Mt&&Mt.kind==="echo"&&Mt.shortForm;y.push([ye?"<?=":"<?php",Wt])}y.push(A);var te=/\?>\n?$/.test(o.originalText);if(te){var Ae=ss(d.children),Se=Ae?[Mu(o.originalText.trimEnd(),o.locEnd(Ae),o.locEnd(d))?Ae.kind==="inline"&&Ae.comments&&Ae.comments.length?"":vt:" ",vs(o.originalText,Ae,o)?vt:""]:d.comments?vt:"";y.push(rC([Se,"?>"]))}return y}return A}function ec(n,o,a,c){return n.map(function(d){var T=[];return T.push(a(d)),Uu(d)||(T.push(vt),vs(o.originalText,d.getValue(),o)&&T.push(vt)),T},c)}function an(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",b=n.getValue(),g=Xi(b[c])?[vt,n.call(function(A){return se.printDanglingComments(A,o,!0)},c),vt]:d,S=Array.isArray(b[c])?At(fi(",",n.map(function(A){var y=a(A);return Xi(A.getValue())?[vt,se.printDanglingComments(A,o,!0),vt,y]:[T,y]},c))):[T,n.call(a,c)];return Ft([g,c,ns(g)?Ft(S):S])}function rs(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=c.inline,T=d!==void 0&&d,b=[];return n.getValue().attrGroups?(n.each(function(g){var S=["#["];!T&&b.length>0&&b.push(vt),S.push(re),g.each(function(A){var y=A.getValue();S.length>2&&S.push(",",ve);var Vt=[y.name];y.args.length>0&&Vt.push(Nn(A,o,a,"args")),S.push(At(Vt))},"attrs"),b.push(At([Ft(S),is(fr(o,"8.0")?",":""),re,"]",T?is(re," "):""]))},"attrGroups"),b.length===0?[]:[].concat(b,[T?"":vt])):[]}function Yn(n,o,a){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",d=n.getValue();if(!d[c])return";";var T=n.call(a,c);return[d.shortForm?":":" {",Ft(d[c].kind!=="block"||d[c].children&&d[c].children.length>0||d[c].comments&&d[c].comments.length>0?[_C(n)?d.kind==="switch"?" ":"":vt,T]:""),d.kind==="if"&&c==="body"?"":[mC(n)?vt:"",d.shortForm?["end",d.kind,";"]:"}"]]}function Qr(n,o,a,c,d,T,b){if(!c)return o;var g=zr(n,c,d,T,b);return At([o,a,g])}function ic(n){return!!ji(n)&&(!(n.what.kind!=="variable"&&!ja(n.what))||ic(n.what))}function zr(n,o,a,c,d){var T=c?"&":"";if(se.hasLeadingOwnLineComment(d.originalText,o,d))return Ft([vt,T,a]);var b=o.kind==="cast"?o.expr:o;return b.kind==="bin"&&!dr(b)||b.kind==="retif"&&(!b.trueExpr&&!Ju(b.falseExpr)||b.test.kind==="bin"&&!dr(b.test))||(n.kind==="variable"||n.kind==="string"||ji(n))&&(b.kind==="string"&&!nc(b)||ic(b))?At(Ft([ve,T,a])):[" ",T,a]}function nc(n){return n.raw.includes(`
`)}function Kr(n,o,a){return(n.kind==="string"||n.kind==="encapsed"&&(n.type==="string"||n.type==="shell"))&&nc(n)&&!uC(o,a.locStart(n),{backwards:!0})}function sc(n,o,a){return At(n.map(function(c,d){return d===0?[n.call(o)]:[a,n.call(o)]},"types"))}var IC=function(n,o,a){var c=n.getValue();if(!c)return"";if(typeof c=="string")return c;var d=function(g,S,A){var y=g.getValue();switch(y.kind){case"program":return At([pr(g,S,A),se.printDanglingComments(g,S,!0,function(dt){return!dt.printed})]);case"expressionstatement":return g.call(A,"expression");case"block":return[pr(g,S,A),se.printDanglingComments(g,S,!0)];case"declare":var Vt=function(dt){return fi(", ",dt.map(function($t){return A($t)},"directives"))};if(["block","short"].includes(y.mode))return["declare(",Vt(g),")",y.mode==="block"?" {":":",y.children.length>0?Ft([vt,pr(g,S,A)]):"",se.printDanglingComments(g,S),vt,y.mode==="block"?"}":"enddeclare;"];var Mt=kC(g,y);return["declare(",Vt(g),")",Mt&&Mt.kind==="inline"?"":";"];case"declaredirective":return[g.call(A,"key"),"=",g.call(A,"value")];case"namespace":return["namespace ",y.name&&typeof y.name=="string"?[y.name,y.withBrackets?" ":""]:"",y.withBrackets?"{":";",Xi(y)?[" ",se.printDanglingComments(g,S,!0)]:"",y.children.length>0?y.withBrackets?Ft([vt,pr(g,S,A)]):[y.children[0].kind==="inline"?"":[vt,xC(S.originalText,y,S.locStart)?vt:""],pr(g,S,A)]:"",y.withBrackets?[vt,"}"]:""];case"usegroup":return At(["use ",y.type?[y.type," "]:"",Ft([y.name?[Hu(y.name),"\\{",re]:"",fi([",",ve],g.map(function(dt){return A(dt)},"items"))]),y.name?[is(fr(S,"7.2")?",":""),re,"}"]:""]);case"useitem":return[y.type?[y.type," "]:"",Hu(y.name),Xi(y)?[" ",se.printDanglingComments(g,S,!0)]:"",y.alias?[" as ",g.call(A,"alias")]:""];case"class":case"enum":case"interface":case"trait":return function(dt,$t,ce){var Et=dt.getValue(),Di=Et.kind==="class"&&Et.isAnonymous,si=rs(dt,$t,ce,{inline:Di}),di=Di?[]:m(si);Et.isReadonly&&di.push("readonly "),Et.isFinal&&di.push("final "),Et.isAbstract&&di.push("abstract "),di.push(Di?"":Et.kind),Et.name&&di.push(" ",dt.call(ce,"name")),Et.kind==="enum"&&Et.valueType&&di.push(": ",dt.call(ce,"valueType")),Et.extends&&Et.implements?di.push(Ws([[an(dt,$t,ce,"extends"),an(dt,$t,ce,"implements")],[an(dt,$t,ce,"extends"),an(dt,$t,ce,"implements"," ",vt)],[an(dt,$t,ce,"extends",vt," "),an(dt,$t,ce,"implements",vt,Et.implements.length>1?vt:" ")]],{shouldBreak:Xi(Et.extends)})):(Et.extends&&di.push(Ws([an(dt,$t,ce,"extends"),an(dt,$t,ce,"extends"," ",vt),an(dt,$t,ce,"extends",vt,Et.extends.length>1?vt:" ")])),Et.implements&&di.push(Ws([an(dt,$t,ce,"implements"),an(dt,$t,ce,"implements"," ",vt),an(dt,$t,ce,"implements",vt,Et.implements.length>1?vt:" ")])));var tn=At([At(di),Qa($t)?Di?ve:vt:" "]),Be=Et.body&&Et.body.length===0&&!Xi(Et),Ni=["{",Ft([Be?"":vt,ec(dt,$t,ce,"body")]),se.printDanglingComments(dt,$t,!0),Di&&Be?re:vt,"}"];return[tn,Ni]}(g,S,A);case"traitprecedence":return[g.call(A,"trait"),"::",g.call(A,"method")," insteadof ",fi(", ",g.map(A,"instead"))];case"traitalias":return[y.trait?[g.call(A,"trait"),"::"]:"",y.method?g.call(A,"method"):""," as ",fi(" ",[].concat(m(y.visibility?[y.visibility]:[]),m(y.as?[g.call(A,"as")]:[])))];case"traituse":return At(["use ",Ft(At(fi([",",ve],g.map(A,"traits")))),y.adaptations?[" {",y.adaptations.length>0?[Ft([vt,ec(g,S,A,"adaptations")]),vt]:Xi(y)?[ve,se.printDanglingComments(g,S,!0),ve]:"","}"]:""]);case"function":case"closure":case"method":return function(dt,$t,ce){var Et=dt.getValue(),Di=rs(dt,$t,ce,{inline:Et.kind==="closure"}),si=[];Et.isFinal&&si.push("final "),Et.isAbstract&&si.push("abstract "),Et.visibility&&si.push(Et.visibility," "),Et.isStatic&&si.push("static "),si.push("function "),Et.byref&&si.push("&"),Et.name&&si.push(dt.call(ce,"name")),si.push(Nn(dt,$t,ce)),Et.uses&&Et.uses.length>0&&si.push(At([" use ",Nn(dt,$t,ce,"uses")])),Et.type&&si.push([": ",Xi(Et.type)?[dt.call(function(Ni){return se.printDanglingComments(Ni,$t,!0)},"type")," "]:"",Et.nullable?"?":"",dt.call(ce,"type")]);var di=si;if(!Et.body)return[].concat(m(Di),[di]);var tn=Et.kind==="closure",Be=["{",Ft([Yu(dt)?"":vt,dt.call(ce,"body")]),tn&&Yu(dt)?"":vt,"}"];return tn?[].concat(m(Di),[di," ",Be]):Et.arguments.length===0?[].concat(m(Di),[di,Qa($t)?vt:" ",Be]):si.some(ns)?[di," ",Be]:[].concat(m(Di),[Ws([[di,Qa($t)?vt:" ",Be],[di," ",Be]])])}(g,S,A);case"arrowfunc":return[y.parenthesizedExpression?"(":""].concat(m(rs(g,S,A,{inline:!0})),[y.isStatic?"static ":"","fn",Nn(g,S,A),y.type?[": ",y.nullable?"?":"",g.call(A,"type")]:""," => ",g.call(A,"body"),y.parenthesizedExpression?")":""]);case"parameter":var ue="";y.flags===1?ue="public ":y.flags===2?ue="protected ":y.flags===4&&(ue="private ");var me=[].concat(m(rs(g,S,A,{inline:!0})),[ue,y.readonly?"readonly ":"",y.nullable?"?":"",y.type?[g.call(A,"type")," "]:"",y.byref?"&":"",y.variadic?"...":"","$",g.call(A,"name")]);return y.value?At([me,Xi(y)?" ":"",se.printDanglingComments(g,S,!0)," =",zr(y.name,y.value,g.call(A,"value"),!1,S)]):me;case"variadic":return["...",g.call(A,"what")];case"property":return At([y.readonly?"readonly ":"",y.type?[y.nullable?"?":"",g.call(A,"type")," "]:"","$",g.call(A,"name"),y.value?[" =",zr(y.name,y.value,g.call(A,"value"),!1,S)]:""]);case"propertystatement":var Wt=[];g.map(function(dt){return Wt.push.apply(Wt,m(rs(dt,S,A)))},"properties");var ye,te=g.map(function(dt){return A(dt)},"properties"),Ae=y.properties.some(function(dt){return dt.value});te.length!==1||y.properties[0].comments?te.length>0&&(ye=Ft(te[0])):ye=_(te,1)[0];var Se=y.visibility||y.visibility===null;return At([].concat(Wt,[Se?[y.visibility===null?"var":y.visibility,""]:"",y.isStatic?[Se?" ":"","static"]:"",ye?[" ",ye]:"",Ft(te.slice(1).map(function(dt){return[",",Ae?vt:ve,dt]}))]));case"if":var xe=[],ee=Yn(g,S,A,"body"),be=At(["if (",At([Ft([re,g.call(A,"test")]),re]),")",ee]);if(xe.push(be,Wa(g)||!y.body?"":vt),y.alternate){xe.push(y.shortForm?"":"} ");var Ue=qu(y.body)&&y.body.comments.some(function(dt){return dt.trailing&&!se.isBlockComment(dt)})||function(dt){if(!dt.comments)return!1;var $t=ss(dt.comments.filter(function(ce){return!ce.leading&&!ce.trailing}));return $t&&!se.isBlockComment($t)}(y),hn=!Ue;xe.push(hn?"":vt),Xi(y)&&xe.push(vs(S.originalText,y.body,S)?vt:"",se.printDanglingComments(g,S,!0),Ue?vt:" "),xe.push("else",At(y.alternate.kind==="if"?g.call(A,"alternate"):Yn(g,S,A,"alternate")))}else xe.push(y.body?y.shortForm?"endif;":"}":"");return xe;case"do":return["do",Yn(g,S,A,"body")," while (",At([Ft([re,g.call(A,"test")]),re]),")"];case"while":case"switch":return At([y.kind," (",At([Ft([re,g.call(A,"test")]),re]),")",Yn(g,S,A,"body")]);case"for":var mi=Yn(g,S,A,"body"),ot=se.printDanglingComments(g,S,!0),rt=ot?[ot,re]:"";return y.init.length||y.test.length||y.increment.length?[rt,At(["for (",At([Ft([re,At(fi([",",ve],g.map(A,"init"))),";",ve,At(fi([",",ve],g.map(A,"test"))),";",ve,At(fi([",",ve],g.map(A,"increment")))]),re]),")",mi])]:[rt,At(["for (;;)",mi])];case"foreach":var Gt=Yn(g,S,A,"body"),jt=se.printDanglingComments(g,S,!0);return[jt?[jt,re]:"",At(["foreach (",At([Ft([re,g.call(A,"source"),ve,"as ",At(y.key?Ft(fi([" =>",ve],[g.call(A,"key"),g.call(A,"value")])):g.call(A,"value"))]),re]),")",Gt])];case"try":var Dt=[];return Dt.push("try",Yn(g,S,A,"body")),y.catches&&Dt.push(g.map(A,"catches")),y.always&&Dt.push(" finally",Yn(g,S,A,"always")),Dt;case"catch":return[" catch",y.what?[" (",fi(" | ",g.map(A,"what")),y.variable?[" ",g.call(A,"variable")]:"",")"]:"",Yn(g,S,A,"body")];case"case":return[y.test?["case ",y.test.comments?Ft(g.call(A,"test")):g.call(A,"test"),":"]:"default:",y.body&&y.body.children&&y.body.children.length?Ft([Wa(g)?"":vt,g.call(A,"body")]):""];case"break":case"continue":return y.level&&y.level.kind==="number"&&y.level.value!=="1"?["".concat(y.kind," "),g.call(A,"level")]:y.kind;case"call":return y.arguments.length===1&&Kr(y.arguments[0],S.originalText,S)?[g.call(A,"what"),"(",fi(", ",g.map(A,"arguments")),")"]:ji(y.what)?function(dt,$t,ce){var Et=[];function Di(le){var Ke=$t.originalText,pi=vC(Ke,le,$t);return Ke.charAt(pi)===")"?lC(Ke,pi+1,$t):vs(Ke,le,$t)}function si(le){var Ke=le.getValue();if(Ke.kind!=="call"||!ji(Ke.what)&&Ke.what.kind!=="call")if(ji(Ke)){var pi=null;pi=Ke.kind==="propertylookup"?za(le,$t,ce):Ke.kind==="nullsafepropertylookup"?Qu(le,$t,ce):Ke.kind==="staticlookup"?zu(le,$t,ce):Ku(le,$t,ce),Et.unshift({node:Ke,needsParens:Fu(le),printed:se.printAllComments(le,function(){return pi},$t)}),le.call(function(gr){return si(gr)},"what")}else Et.unshift({node:Ke,printed:le.call(ce)});else Et.unshift({node:Ke,printed:[se.printAllComments(le,function(){return Nn(le,$t,ce)},$t),Di(Ke)?vt:""]}),le.call(function(gr){return si(gr)},"what")}var di=dt.getValue();Et.unshift({node:di,printed:Nn(dt,$t,ce)}),dt.call(function(le){return si(le)},"what");for(var tn=0;tn<Et.length;++tn)Et[tn].node.kind==="call"&&Et[tn-1]&&["propertylookup","nullsafepropertylookup","staticlookup"].includes(Et[tn-1].node.kind)&&Et[tn-1].needsParens&&(Et[0].printed=["(",Et[0].printed],Et[tn-1].printed=[Et[tn-1].printed,")"]);for(var Be=[],Ni=[Et[0]],je=1;je<Et.length&&(Et[je].node.kind==="call"||ji(Et[je].node)&&Et[je].node.offset&&Et[je].node.offset.kind==="number");++je)Ni.push(Et[je]);if(Et[0].node.kind!=="call")for(;je+1<Et.length&&ji(Et[je].node)&&ji(Et[je+1].node);++je)Ni.push(Et[je]);Be.push(Ni),Ni=[];for(var ho=!1;je<Et.length;++je){if(ho&&ji(Et[je].node)){if(Et[je].node.kind==="offsetlookup"&&Et[je].node.offset&&Et[je].node.offset.kind==="number"){Ni.push(Et[je]);continue}Be.push(Ni),Ni=[],ho=!1}Et[je].node.kind==="call"&&(ho=!0),Ni.push(Et[je]),Et[je].node.comments&&se.hasTrailingComment(Et[je].node)&&(Be.push(Ni),Ni=[],ho=!1)}Ni.length>0&&Be.push(Ni);function NN(le){var Ke=le[1].length&&le[1][0].node.kind==="offsetlookup";if(le[0].length===1){var pi=le[0][0].node;return pi.kind==="variable"&&(pi.name==="this"||IN&&gr(pi.name))||ja(pi)}function gr(PN){return PN.length<$t.tabWidth}var nh=ss(le[0]).node;return ji(nh)&&(nh.offset.kind==="identifier"||nh.offset.kind==="variable")&&Ke}var IN=dt.getParentNode().kind==="expressionstatement",lo=Be.length>=2&&!Be[1][0].node.comments&&NN(Be);function uo(le){for(var Ke=[],pi=0;pi<le.length;pi++)le[pi+1]&&le[pi+1].needsParens?(Ke.push("(",le[pi].printed,le[pi+1].printed,")"),pi++):Ke.push(le[pi].printed);return Ke}function AN(le){return le.length===0?"":Ft(At([vt,fi(vt,le.map(uo))]))}var Yc=Be.map(uo),ih=Yc,co=lo?3:2,jc=Be.slice(0,co).flat(),Qc=jc.slice(1,-1).some(function(le){return se.hasLeadingComment(le.node)})||jc.slice(0,-1).some(function(le){return se.hasTrailingComment(le.node)})||Be[co]&&se.hasLeadingComment(Be[co][0].node),SN=Ya(dt,"encapsed");if(Be.length<=co&&!Qc||SN)return At(ih);var zc=ss(lo?Be.slice(1,2)[0]:Be[0]).node,Kc=zc.kind!=="call"&&Di(zc),$c=[uo(Be[0]),lo?Be.slice(1,2).map(uo):"",Kc?vt:"",AN(Be.slice(lo?2:1))],ON=Et.filter(function(le){return le.node.kind==="call"}).length;return Qc||ON>=3||Yc.slice(0,-1).some(ns)?At($c):[ns(ih)||Kc?Bu:"",Ws([ih,$c])]}(g,S,A):[g.call(A,"what"),Nn(g,S,A)];case"new":var Ne=y.what&&y.what.kind==="class"&&y.what.isAnonymous;if(!Ne&&y.arguments.length===1&&Kr(y.arguments[0],S.originalText,S))return["new "].concat(m(g.call(rs,"what")),[g.call(A,"what"),"(",fi(", ",g.map(A,"arguments")),")"]);var Re=[];if(Re.push("new "),Ne)Re.push.apply(Re,[y.what.leadingComments&&y.what.leadingComments[0].kind==="commentblock"?[se.printComments(y.what.leadingComments,S)," "]:""].concat(m(g.call(function(dt){return rs(dt,S,A,{inline:!0})},"what")),["class",y.arguments.length>0?[" ",Nn(g,S,A)]:"",At(g.call(A,"what"))]));else{var ze=["call","offsetlookup"].includes(y.what.kind),gi=[ze?"(":"",g.call(A,"what"),ze?")":"",Nn(g,S,A)];Re.push(Wu(y.what)?Ft(gi):gi)}return Re;case"clone":return["clone ",y.what.comments?Ft(g.call(A,"what")):g.call(A,"what")];case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var oe,Ye=g.getParentNode(),Li=0;do oe=g.getParentNode(Li),Li++;while(oe&&ji(oe));var os=Ya(g,"encapsed")||oe&&(oe.kind==="new"||oe.kind==="assign"&&oe.left.kind!=="variable")||y.kind==="offsetlookup"||(ja(y.what)||y.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(y.offset.kind)&&Ye&&!ji(Ye);return[g.call(A,"what"),os?Zu(g,S,A):At(Ft([re,Zu(g,S,A)]))];case"exit":return At([y.useDie?"die":"exit","(",y.expression?Kr(y.expression,S.originalText,S)?g.call(A,"expression"):[Ft([re,g.call(A,"expression")]),re]:se.printDanglingComments(g,S),")"]);case"global":return At(["global ",Ft(fi([",",ve],g.map(A,"items")))]);case"include":return[y.require?"require":"include",y.once?"_once":""," ",y.target.comments?Ft(g.call(A,"target")):g.call(A,"target")];case"label":return[g.call(A,"name"),":"];case"goto":return["goto ",g.call(A,"label")];case"throw":return["throw ",y.what.comments?Ft(g.call(A,"what")):g.call(A,"what")];case"silent":return["@",g.call(A,"expr")];case"halt":return[Xi(y)?[se.printDanglingComments(g,S,!0),vt]:"","__halt_compiler();",y.after];case"eval":return At(["eval(",Kr(y.source,S.originalText,S)?g.call(A,"source"):[Ft([re,g.call(A,"source")]),re],")"]);case"echo":var as,ln=g.map(function(dt){return A(dt)},"expressions");return ln.length!==1||y.expressions[0].comments?ln.length>0&&(as=Ga(y.expressions[0])||y.expressions[0].comments?Ft(ln[0]):oC(ln[0])):as=_(ln,1)[0],At([y.shortForm?"":"echo ",as||"",Ft(ln.slice(1).map(function(dt){return[",",ve,dt]}))]);case"print":return["print ",y.expression.comments?Ft(g.call(A,"expression")):g.call(A,"expression")];case"return":var Zi=[];if(Zi.push("return"),y.expr){var Zr=g.call(A,"expr");Zi.push(" ",y.expr.comments?Ft(Zr):Zr)}return Xi(y)&&Zi.push(" ",se.printDanglingComments(g,S,!0)),Zi;case"isset":case"unset":return At([y.kind,Nn(g,S,A,"variables")]);case"empty":return At(["empty(",Ft([re,g.call(A,"expression")]),re,")"]);case"variable":var jn=g.getParentNode(),Qs=g.getParentNode(1),aN=jn.kind==="assign"?"":y.byref?"&":"",hN=jn.kind==="encapsedpart"&&jn.syntax==="simple"&&jn.curly||Qs&&jn.kind==="offsetlookup"&&Qs.kind==="encapsedpart"&&Qs.syntax==="simple"&&Qs.curly?"":"$",lN=y.curly?"{":"",uN=y.curly?"}":"";return[aN,hN,lN,g.call(A,"name"),uN];case"constantstatement":case"classconstant":var to,cN=rs(g,S,A),_r=g.map(function(dt){return A(dt)},"constants");return _r.length!==1||y.constants[0].comments?_r.length>0&&(to=Ft(_r[0])):to=_(_r,1)[0],At([].concat(m(cN),[y.visibility?[y.visibility," "]:"","const",to?[" ",to]:"",Ft(_r.slice(1).map(function(dt){return[",",vt,dt]}))]));case"constant":return Qr(y.name,g.call(A,"name")," =",y.value,g.call(A,"value"),!1,S);case"static":var eo,mr=g.map(function(dt){return A(dt)},"variables"),fN=y.variables.some(function(dt){return dt.defaultValue});return mr.length!==1||y.variables[0].comments?mr.length>0&&(eo=Ft(mr[0])):eo=_(mr,1)[0],At(["static",eo?[" ",eo]:"",Ft(mr.slice(1).map(function(dt){return[",",fN?vt:ve,dt]}))]);case"staticvariable":return Qr(y.variable,g.call(A,"variable")," =",y.defaultValue,g.call(A,"defaultValue"),!1,S);case"list":case"array":var Sc=y.kind==="array"&&Ys(S.phpVersion,"5.4")||y.kind==="list"&&(y.shortForm||Ys(S.phpVersion,"7.1")),Ja=Sc?"[":[y.kind,"("],Xa=Sc?"]":")";if(y.items.length===0)return Xi(y)?At([Ja,se.printDanglingComments(g,S),re,Xa]):[Ja,Xa];var io=ss(y.items),Oc=io&&io.kind==="noop",no=_(y.items.filter(function(dt){return dt.kind!=="noop"}).sort(function(dt,$t){return S.locStart(dt)-S.locStart($t)}),1)[0],dN=!(!no||!no.key)&&no&&Mu(S.originalText,S.locStart(y),S.locStart(no));return At([Ja,Ft([re,CC(g,S,A)]),Oc?",":"",is(!Oc&&fr(S,"5.0")?[io&&ju(io)?vt:"",","]:""),se.printDanglingComments(g,S,!0),re,Xa],{shouldBreak:dN});case"entry":var Pc=y.byRef?"&":"",pN=y.unpack?"...":"";return y.key?Qr(y.key,g.call(A,"key")," =>",y.value,g.call(A,"value"),Pc,S):[Pc,pN,g.call(A,"value")];case"yield":var Lc=[y.key?[g.call(A,"key")," => "]:"",g.call(A,"value")];return["yield",y.key||y.value?" ":"",y.value&&y.value.comments?Ft(Lc):Lc];case"yieldfrom":return["yield from ",y.value.comments?Ft(g.call(A,"value")):g.call(A,"value")];case"unary":return[y.type,g.call(A,"what")];case"pre":return[y.type+y.type,g.call(A,"what")];case"post":return[g.call(A,"what"),y.type+y.type];case"cast":return["(",y.type,") ",y.expr.comments?Ft(g.call(A,"expr")):g.call(A,"expr")];case"assignref":case"assign":var Dc=y.kind==="assignref";return Qr(y.left,g.call(A,"left"),[" ",Dc?"=":y.operator],y.right,g.call(A,"right"),Dc,S);case"bin":var un=g.getParentNode(),Rc=g.getParentNode(1),wc=y!==un.body&&(un.kind==="if"||un.kind==="while"||un.kind==="switch"||un.kind==="do"),zs=Xu(g,A,S,!1,wc);if(wc)return zs;if(un.kind==="unary"||ji(un)&&un.kind!=="offsetlookup")return At([Ft([re].concat(m(zs))),re]);var _N=y!==un.body&&un.kind==="for"||un.kind==="retif"&&Rc&&Rc.kind!=="return",mN=["assign","property","constant","staticvariable","entry"].includes(un.kind),gN=y.left.kind==="bin"&&Vu(y.type,y.left.type);if(_N||dr(y)&&!gN||!dr(y)&&mN)return At(zs);var TN=zs.slice(1);return At([zs.length>0?zs[0]:"",Ft(TN)]);case"retif":var so,ro=[],oo=g.getParentNode(),Fc=0;do so=g.getParentNode(Fc),Fc++;while(so&&so.kind==="retif");var Bc=so||oo,Mc=y.falseExpr.kind==="bin"?Ft(g.call(A,"falseExpr")):g.call(A,"falseExpr"),xN=[y.trueExpr?ve:" ","?",y.trueExpr?[" ",y.trueExpr.kind==="bin"?Ft(g.call(A,"trueExpr")):g.call(A,"trueExpr"),ve]:"",":",y.trueExpr?[" ",Mc]:[Ju(y.falseExpr)?" ":ve,Mc]];ro.push(xN);var Uc=function(dt){return oo===Bc?At(dt):dt},Vc=g.getParentNode(1),ys=oo.kind==="cast"&&Vc?Vc:oo,kN=["propertylookup","nullsafepropertylookup","staticlookup"].includes(ys.kind),Za=g.call(A,"test");if(!y.trueExpr){var Hc=[Za,ys.kind==="bin"||["print","echo","return","include"].includes(Bc.kind)?Ft(ro):ro];return ys.kind==="call"&&ys.what===y||ys.kind==="unary"||ji(ys)&&ys.kind!=="offsetlookup"?At([Ft([re,Hc]),re]):Uc(Hc)}return Uc([y.test.kind==="retif"?Ft(Za):Za,Ft(ro),kN?re:""]);case"boolean":return y.value?"true":"false";case"number":return dC(y.value);case"string":if(g.getParentNode().kind==="encapsedpart"){var Wc=g.getParentNode(1),th=0,EN=Ys(S.phpVersion,"7.3"),qc=qs;if(Wc.type==="heredoc"){qc=EN?vt:qs;var ao=Wc.raw.split(`
`);(th=ao[ao.length-1].search(/\S/))===-1&&(th=ao[ao.length-2].search(/\S/))}return fi(qc,y.raw.split(`
`).map(function(dt,$t){return $t>0||y.loc.start.column===0?dt.substring(th):dt}))}var Gc=TC(y,S)?'"':"'",xn=y.raw;return y.raw[0]==="b"&&(xn=xn.slice(1)),['"',"'"].includes(xn[0])&&(xn=xn.substr(1)),['"',"'"].includes(xn[xn.length-1])&&(xn=xn.substr(0,xn.length-1)),[y.raw[0]==="b"?"b":"",Gc,fi(qs,xn.split(`
`)),Gc];case"intersectiontype":return sc(g,A,"&");case"uniontype":return sc(g,A,"|");case"encapsedpart":var vN=y.syntax==="simple"&&y.curly||y.syntax==="complex"?[y.curly?"$":"","{"]:"",yN=y.syntax==="simple"&&y.curly||y.syntax==="complex"?"}":"";return[vN,g.call(A,"expression"),yN];case"encapsed":switch(y.type){case"string":case"shell":case"heredoc":var bN=Ys(S.phpVersion,"7.3")?vt:qs;return[tc(y),y.type==="heredoc"?bN:""].concat(m(g.map(A,"value")),[tc(y,{opening:!1}),y.type==="heredoc"&&Gu(g)?vt:""]);default:return"Have not implemented kind ".concat(y.type," yet.")}case"inline":return fi(qs,y.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(`
`));case"magic":return y.value;case"nowdoc":var eh=Ys(S.phpVersion,"7.3")?vt:qs;return["<<<'",y.label,"'",eh,fi(eh,y.value.split(`
`)),eh,y.label,Gu(g)?vt:""];case"name":return[y.resolution==="rn"?"namespace\\":"",y.name];case"literal":return g.call(A,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return y.name;case"nullkeyword":return"null";case"identifier":return g.getParentNode().kind==="method"&&(y.name=EC(y.name)),g.call(A,"name");case"match":var CN=g.map(function(dt,$t){var ce=dt.getValue().conds===null?"default":dt.map(function(Di,si){return[",",ve,A(Di)].slice(si===0?2:0)},"conds"),Et=dt.call(A,"body");return[",",vt,At([At([ce,Ft(ve)]),"=> ",Et])].slice($t>0?0:1)},"arms");return At(["match (",At([re,Ft(g.call(A,"cond")),re]),") {",At(Ft([].concat(m(CN),[S.trailingCommaPHP?is(","):""])))," ",re,"}"]);case"noop":return y.comments?se.printComments(g.getValue().comments,S):"";case"namedargument":return[y.name,": ",g.call(A,"value")];case"enumcase":return At(["case ",g.call(A,"name"),y.value?[" =",zr(y.name,y.value,g.call(A,"value"),!1,S)]:""]);case"variadicplaceholder":return"...";default:return"Have not implemented kind ".concat(y.kind," yet.")}}(n,o,a),T=[],b=Fu(n);return b&&T.unshift("("),T.push(d),b&&T.push(")"),fC(n)&&T.push(";"),pC(n)&&T.push(vt),T},AC=new Set(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"]);function rc(n,o){if(n.kind==="string"&&delete o.isDoubleQuote,["array","list"].includes(n.kind)&&delete o.shortForm,n.kind==="inline"){if(n.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;o.value=o.value.replace(/\n/g,"")}if((n.kind==="continue"||n.kind==="break")&&n.level){var a=o.level;a.kind==="number"&&(o.level=a.value==="1"?null:a)}if(n.kind==="block"&&n.children.length===1&&n.children[0].kind==="block")for(;o.children[0].kind==="block";)o.children=o.children[0].children;if(n.kind==="number"&&(o.value=he.printNumber(n.value)),["foreach","for","if","while","do"].includes(n.kind)&&(n.body&&n.body.kind!=="block"?o.body={kind:"block",children:[o.body]}:o.body=o.body?o.body:null,n.alternate&&n.alternate.kind!=="block"?o.alternate={kind:"block",children:[o.alternate]}:o.alternate=o.alternate?o.alternate:null),n.kind==="usegroup"&&typeof n.name=="string"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="useitem"&&(o.name=o.name.replace(/^\\/,"")),n.kind==="method"&&n.name.kind==="identifier"&&(o.name.name=he.normalizeMagicMethodName(o.name.name)),n.kind==="noop")return null}rc.ignoredProperties=AC;var SC=rc,Ka="PHP",OC={phpVersion:{since:"0.13.0",category:Ka,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"},{value:"8.1"}]},trailingCommaPHP:{since:"0.0.0",category:Ka,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:Ka,type:"choice",default:"per-cs",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"(deprecated) Use per-cs"},{value:"per-cs",description:"Use the PER Coding Style brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},PC=function(n,o,a,c){if(a!=="length"&&a!=="prototype"&&a!=="arguments"&&a!=="caller"){var d=Object.getOwnPropertyDescriptor(n,a),T=Object.getOwnPropertyDescriptor(o,a);!LC(d,T)&&c||Object.defineProperty(n,a,T)}},LC=function(n,o){return n===void 0||n.configurable||n.writable===o.writable&&n.enumerable===o.enumerable&&n.configurable===o.configurable&&(n.writable||n.value===o.value)},DC=function(n,o){var a=Object.getPrototypeOf(o);a!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,a)},RC=function(n,o){return"/* Wrapped ".concat(n,`*/
`).concat(o)},wC=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),FC=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),BC=function(n,o,a){var c=a===""?"":"with ".concat(a.trim(),"() "),d=RC.bind(null,c,o.toString());Object.defineProperty(d,"name",FC),Object.defineProperty(n,"toString",h(h({},wC),{},{value:d}))},MC=function(n,o){var a,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=c.ignoreNonConfigurable,T=d!==void 0&&d,b=n.name,g=x(Reflect.ownKeys(o));try{for(g.s();!(a=g.n()).done;){var S=a.value;PC(n,o,S,T)}}catch(A){g.e(A)}finally{g.f()}return DC(n,o),BC(n,o,b),n},$r=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oc(n){return n&&n.default||n}var Jr,UC=function(){var n={};return n.promise=new Promise(function(o,a){n.resolve=o,n.reject=a}),n},ac=function(n,o){return n(o={exports:{}},o.exports),o.exports}(function(n,o){var a=$r&&$r.__awaiter||function(b,g,S,A){return new(S||(S=Promise))(function(y,Vt){function Mt(Wt){try{me(A.next(Wt))}catch(ye){Vt(ye)}}function ue(Wt){try{me(A.throw(Wt))}catch(ye){Vt(ye)}}function me(Wt){Wt.done?y(Wt.value):new S(function(ye){ye(Wt.value)}).then(Mt,ue)}me((A=A.apply(b,g||[])).next())})},c=$r&&$r.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(o,"__esModule",{value:!0});var d=c(UC);function T(b){var g,S,A,y=this,Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",Mt=function(){return a(y,void 0,void 0,u().mark(function Wt(){var ye,te,Ae,Se,xe=this;return u().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:if(g===void 0){ee.next=2;break}return ee.abrupt("return");case 2:ye=function(be){return a(xe,void 0,void 0,u().mark(function Ue(){var hn;return u().wrap(function(mi){for(;;)switch(mi.prev=mi.next){case 0:if(A=d.default(),!((hn=be[1][Vt]-Date.now())<=0)){mi.next=6;break}return b.delete(be[0]),A.resolve(),mi.abrupt("return");case 6:return g=be[0],typeof(S=setTimeout(function(){b.delete(be[0]),A&&A.resolve()},hn)).unref=="function"&&S.unref(),mi.abrupt("return",A.promise);case 10:case"end":return mi.stop()}},Ue)}))},ee.prev=3,te=x(b),ee.prev=5,te.s();case 7:if((Ae=te.n()).done){ee.next=13;break}return Se=Ae.value,ee.next=11,ye(Se);case 11:ee.next=7;break;case 13:ee.next=18;break;case 15:ee.prev=15,ee.t0=ee.catch(5),te.e(ee.t0);case 18:return ee.prev=18,te.f(),ee.finish(18);case 21:ee.next=25;break;case 23:ee.prev=23,ee.t1=ee.catch(3);case 25:g=void 0;case 26:case"end":return ee.stop()}},Wt,null,[[3,23],[5,15,18,21]])}))},ue=function(){g=void 0,S!==void 0&&(clearTimeout(S),S=void 0),A!==void 0&&(A.reject(void 0),A=void 0)},me=b.set.bind(b);return b.set=function(Wt,ye){b.has(Wt)&&b.delete(Wt);var te=me(Wt,ye);return g&&g===Wt&&ue(),Mt(),te},Mt(),b}o.default=T,n.exports=T,n.exports.default=T});(Jr=ac)&&Jr.__esModule&&Object.prototype.hasOwnProperty.call(Jr,"default")&&Jr.default;var VC=ac,$a=new WeakMap,hc=new WeakMap,Xr=function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=o.cacheKey,c=o.cache,d=c===void 0?new Map:c,T=o.maxAge;typeof T=="number"&&VC(d);var b=function(){for(var g=arguments.length,S=new Array(g),A=0;A<g;A++)S[A]=arguments[A];var y=a?a(S):S[0],Vt=d.get(y);if(Vt)return Vt.data;var Mt=n.apply(this,S);return d.set(y,{data:Mt,maxAge:T?Date.now()+T:Number.POSITIVE_INFINITY}),Mt};return MC(b,n,{ignoreNonConfigurable:!0}),hc.set(b,d),b};Xr.decorator=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(o,a,c){var d=o[a];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete c.value,delete c.writable,c.get=function(){if(!$a.has(this)){var T=Xr(d,n);return $a.set(this,T),T}return $a.get(this)}}},Xr.clear=function(n){var o=hc.get(n);if(!o)throw new TypeError("Can't clear a function that was not memoized!");if(typeof o.clear!="function")throw new TypeError("The cache Map can't be cleared!");o.clear()};var lc=/@prettier|@format/,uc=Xr(function(n){var o=Tu(n),a=_(o.children,1)[0],c=_(o.comments.filter(function(d){return d.kind==="commentblock"}),1)[0];if(a&&c&&c.loc.start.line<a.loc.start.line)return c}),HC=function(n){if(!lc.test(n))return!1;var o=uc(n);if(o){var a=o.value;return lc.test(a)}return!1},WC=function(n){var o=uc(n);if(o){var a=o.loc,c=a.start.offset,d=a.end.offset,T=n.substring(0,c),b=n.substring(d);return"".concat(T).concat(function(Vt){var Mt=Vt.split(`
`);if(Mt.length===1){var ue=_(/\/*\*\*(.*)\*\//.exec(Mt[0]),2)[1];Mt=["/**"," * ".concat(ue.trim())," */"]}var me=Mt.findIndex(function(Wt){return/@\S/.test(Wt)})||1;return Mt.splice(me,0," * @format"),Mt.join(`
`)}(o.value)).concat(b)}var g="<?php";if(!n.startsWith(g))return n;var S=g.length,A=n.substring(0,S),y=n.substring(S);return"".concat(A,`
/** 
 * @format 
 */
`).concat(y)},cc="programming",fc="text.html.php",dc="application/x-httpd-php",pc="#4F5D95",_c=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],mc=[".php",".php_cs",".php_cs.dist","Phakefile"],gc=["php"],Tc=["inc"],qC={name:"PHP",type:cc,tmScope:fc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:dc,color:pc,extensions:_c,filenames:mc,interpreters:gc,aliases:Tc,languageId:272},GC=Object.freeze({__proto__:null,name:"PHP",type:cc,tmScope:fc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:dc,color:pc,extensions:_c,filenames:mc,interpreters:gc,aliases:Tc,languageId:272,default:qC}),xc="HTML+PHP",kc="markup",Ec="#4f5d95",vc="text.html.php",yc="HTML",bc=[".phtml"],Cc="application/x-httpd-php",YC={name:xc,type:kc,color:Ec,tmScope:vc,group:yc,extensions:bc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Cc,languageId:151},jC=Object.freeze({__proto__:null,name:xc,type:kc,color:Ec,tmScope:vc,group:yc,extensions:bc,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Cc,languageId:151,default:YC}),QC=oc(GC),zC=oc(jC),Nc=s.default.doc.builders,KC=Nc.join,$C=Nc.hardline,JC=HC,XC=WC;function Ic(n,o){var a=o.extend,c=o.override,d={};for(var T in n)d[T==="languageId"?"linguistLanguageId":T]=n[T];if(a)for(var b in a)d[b]=(d[b]||[]).concat(a[b]);for(var g in c)d[g]=c[g];return d}var ZC=[Ic(QC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Ic(zC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Ac=function(n){return function(o){return o.loc&&o.loc[n]&&o.loc[n].offset}},tN={php:{parse:Tu,astFormat:"php",locStart:Ac("start"),locEnd:Ac("end"),hasPragma:JC}},eN={php:{print:IC,insertPragma:XC,massageAstNode:SC,getCommentChildNodes:se.getCommentChildNodes,canAttachComment:se.canAttachComment,isBlockComment:se.isBlockComment,handleComments:{ownLine:se.handleOwnLineComment,endOfLine:se.handleEndOfLineComment,remaining:se.handleRemainingComment},willPrintOwnComments:function(n){var o=n.getValue();return o&&o.kind==="noop"},printComment:function(n){var o=n.getValue();switch(o.kind){case"commentblock":if(!o.value.includes(`
`))return o.value;var a=o.value.split(`
`);return a.slice(1,a.length-1).every(function(c){return c.trim()[0]==="*"})?KC($C,a.map(function(c,d){return(d>0?" ":"")+(d<a.length-1?c.trim():c.trimLeft())})):o.value;case"commentline":return o.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(o)))}},hasPrettierIgnore:function(n){var o=function(d){return d.value.includes("prettier-ignore")&&!d.value.includes("prettier-ignore-start")&&!d.value.includes("prettier-ignore-end")},a=n.getParentNode(),c=n.getNode();return c&&c.kind!=="classconstant"&&c.comments&&c.comments.length>0&&c.comments.some(o)||c&&c.kind==="constant"&&a&&a.kind==="classconstant"&&a.comments&&a.comments.length>0&&a.comments.some(o)}}},js={languages:ZC,printers:eN,parsers:tN,options:OC,defaultOptions:{tabWidth:4}},iN=js.languages,nN=js.printers,sN=js.parsers,rN=js.options,oN=js.defaultOptions;i.default=js,i.defaultOptions=oN,i.languages=iN,i.options=rN,i.parsers=sN,i.printers=nN,Object.defineProperty(i,"__esModule",{value:!0})})});var zf=V((Qf,bh)=>{(function(i){if(typeof Qf=="object"&&typeof bh<"u")bh.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=i()}})(function(){var i,t,e;return function(){function s(r,h,u){function l(m,I){if(!h[m]){if(!r[m]){var v=typeof require=="function"&&require;if(!I&&v)return v(m,!0);if(f)return f(m,!0);var x=new Error("Cannot find module '"+m+"'");throw x.code="MODULE_NOT_FOUND",x}var N=h[m]={exports:{}};r[m][0].call(N.exports,function(R){var H=r[m][1][R];return l(H||R)},N,N.exports,s,r,h,u)}return h[m].exports}for(var f=typeof require=="function"&&require,_=0;_<u.length;_++)l(u[_]);return l}return s}()({1:[function(s,r,h){let u=s("./utils"),l=function(){"use strict";let f=u.stringToArray,_=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],m=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],I=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],v=["Thousand","Million","Billion","Trillion"];function x(M,G){var U=function(lt,st,j){var ut="";if(lt<=19)ut=(st?" and ":"")+(j?m[lt]:_[lt]);else if(lt<100){let Jt=Math.floor(lt/10),mt=lt%10;ut=(st?" and ":"")+I[Jt-2],mt>0?ut+="-"+U(mt,!1,j):j&&(ut=ut.substring(0,ut.length-1)+"ieth")}else if(lt<1e3){let Jt=Math.floor(lt/100),mt=lt%100;ut=(st?", ":"")+_[Jt]+" Hundred",mt>0?ut+=U(mt,!0,j):j&&(ut+="th")}else{var Nt=Math.floor(Math.log10(lt)/3);Nt>v.length&&(Nt=v.length);let Jt=Math.pow(10,Nt*3),mt=Math.floor(lt/Jt),St=lt-mt*Jt;ut=(st?", ":"")+U(mt,!1,!1)+" "+v[Nt-1],St>0?ut+=U(St,!0,j):j&&(ut+="th")}return ut},Z=U(M,!1,G);return Z}let N={};_.forEach(function(M,G){N[M.toLowerCase()]=G}),m.forEach(function(M,G){N[M.toLowerCase()]=G}),I.forEach(function(M,G){let U=M.toLowerCase();N[U]=(G+2)*10,N[U.substring(0,M.length-1)+"ieth"]=N[U]}),N.hundredth=100,v.forEach(function(M,G){let U=M.toLowerCase(),Z=Math.pow(10,(G+1)*3);N[U]=Z,N[U+"th"]=Z});function R(M){let U=M.split(/,\s|\sand\s|[\s\\-]/).map(st=>N[st]),Z=[0];return U.forEach(st=>{if(st<100){let j=Z.pop();j>=1e3&&(Z.push(j),j=0),Z.push(j+st)}else Z.push(Z.pop()*st)}),Z.reduce((st,j)=>st+j,0)}let H=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],X={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function at(M){for(var G=0;G<H.length;G++){let U=H[G];if(M>=U[0])return U[1]+at(M-U[0])}return""}function $(M){for(var G=0,U=1,Z=M.length-1;Z>=0;Z--){let lt=M[Z],st=X[lt];st<U?G-=st:(U=st,G+=st)}return G}function z(M,G){for(var U=[],Z=G.charCodeAt(0);M>0;)U.unshift(String.fromCharCode((M-1)%26+Z)),M=Math.floor((M-1)/26);return U.join("")}function ht(M,G){for(var U=G.charCodeAt(0),Z=0,lt=0;lt<M.length;lt++)Z+=(M.charCodeAt(M.length-lt-1)-U+1)*Math.pow(26,lt);return Z}function F(M,G){if(typeof M>"u")return;M=Math.floor(M);let U=Ht(G);return nt(M,U)}let q={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},gt={UPPER:"upper",LOWER:"lower",TITLE:"title"};function nt(M,G){let U,Z=M<0;switch(M=Math.abs(M),G.primary){case q.LETTERS:U=z(M,G.case===gt.UPPER?"A":"a");break;case q.ROMAN:U=at(M),G.case===gt.UPPER&&(U=U.toUpperCase());break;case q.WORDS:U=x(M,G.ordinal),G.case===gt.UPPER?U=U.toUpperCase():G.case===gt.LOWER&&(U=U.toLowerCase());break;case q.DECIMAL:U=""+M;var lt=G.mandatoryDigits-U.length;if(lt>0){var st=new Array(lt+1).join("0");U=st+U}if(G.zeroCode!==48&&(U=f(U).map(Jt=>String.fromCodePoint(Jt.codePointAt(0)+G.zeroCode-48)).join("")),G.regular){let Jt=Math.floor((U.length-1)/G.groupingSeparators.position);for(let mt=Jt;mt>0;mt--){let St=U.length-mt*G.groupingSeparators.position;U=U.substr(0,St)+G.groupingSeparators.character+U.substr(St)}}else G.groupingSeparators.reverse().forEach(Jt=>{let mt=U.length-Jt.position;U=U.substr(0,mt)+Jt.character+U.substr(mt)});if(G.ordinal){var j={1:"st",2:"nd",3:"rd"},ut=U[U.length-1],Nt=j[ut];(!Nt||U.length>1&&U[U.length-2]==="1")&&(Nt="th"),U=U+Nt}break;case q.SEQUENCE:throw{code:"D3130",value:G.token}}return Z&&(U="-"+U),U}let yt=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Ht(M){let G={type:"integer",primary:q.DECIMAL,case:gt.LOWER,ordinal:!1},U,Z,lt=M.lastIndexOf(";");switch(lt===-1?U=M:(U=M.substring(0,lt),Z=M.substring(lt+1),Z[0]==="o"&&(G.ordinal=!0)),U){case"A":G.case=gt.UPPER;case"a":G.primary=q.LETTERS;break;case"I":G.case=gt.UPPER;case"i":G.primary=q.ROMAN;break;case"W":G.case=gt.UPPER,G.primary=q.WORDS;break;case"Ww":G.case=gt.TITLE,G.primary=q.WORDS;break;case"w":G.primary=q.WORDS;break;default:{let st=null,j=0,ut=0,Nt=[],Jt=0;if(f(U).map(St=>St.codePointAt(0)).reverse().forEach(St=>{let J=!1;for(let Zt=0;Zt<yt.length;Zt++){let Rt=yt[Zt];if(St>=Rt&&St<=Rt+9){if(J=!0,j++,Jt++,st===null)st=Rt;else if(Rt!==st)throw{code:"D3131"};break}}J||(St===35?(Jt++,ut++):Nt.push({position:Jt,character:String.fromCodePoint(St)}))}),j>0){G.primary=q.DECIMAL,G.zeroCode=st,G.mandatoryDigits=j,G.optionalDigits=ut;let J=function(Zt){if(Zt.length===0)return 0;let Rt=Zt[0].character;for(let Je=1;Je<Zt.length;Je++)if(Zt[Je].character!==Rt)return 0;let ei=Zt.map(Je=>Je.position),Vi=function(Je,ii){return ii===0?Je:Vi(ii,Je%ii)},li=ei.reduce(Vi);for(let Je=1;Je<=ei.length;Je++)if(ei.indexOf(Je*li)===-1)return 0;return li}(Nt);J>0?(G.regular=!0,G.groupingSeparators={position:J,character:Nt[0].character}):(G.regular=!1,G.groupingSeparators=Nt)}else G.primary=q.SEQUENCE,G.token=U}}return G}let zt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Bt(M){var G=[];let U={type:"datetime",parts:G},Z=function(J,Zt){if(Zt>J){let Rt=M.substring(J,Zt);Rt=Rt.split("]]").join("]"),G.push({type:"literal",value:Rt})}};for(var lt=0,st=0;st<M.length;){if(M.charAt(st)==="["){if(M.charAt(st+1)==="["){Z(lt,st),G.push({type:"literal",value:"["}),st+=2,lt=st;continue}if(Z(lt,st),lt=st,st=M.indexOf("]",lt),st===-1)throw{code:"D3135"};let J=M.substring(lt+1,st);J=J.split(/\s+/).join("");var j={type:"marker",component:J.charAt(0)},ut=J.lastIndexOf(","),Nt;if(ut!==-1){let Zt=J.substring(ut+1),Rt=Zt.indexOf("-"),ei,Vi,li=function(ii){if(!(typeof ii>"u"||ii==="*"))return parseInt(ii)};Rt===-1?ei=Zt:(ei=Zt.substring(0,Rt),Vi=Zt.substring(Rt+1));let Je={min:li(ei),max:li(Vi)};j.width=Je,Nt=J.substring(1,ut)}else Nt=J.substring(1);if(Nt.length===1)j.presentation1=Nt;else if(Nt.length>1){var Jt=Nt.charAt(Nt.length-1);"atco".indexOf(Jt)!==-1?(j.presentation2=Jt,Jt==="o"&&(j.ordinal=!0),j.presentation1=Nt.substring(0,Nt.length-1)):j.presentation1=Nt}else j.presentation1=zt[j.component];if(typeof j.presentation1>"u")throw{code:"D3132",value:j.component};if(j.presentation1[0]==="n")j.names=gt.LOWER;else if(j.presentation1[0]==="N")j.presentation1[1]==="n"?j.names=gt.TITLE:j.names=gt.UPPER;else if("YMDdFWwXxHhmsf".indexOf(j.component)!==-1){var mt=j.presentation1;if(j.presentation2&&(mt+=";"+j.presentation2),j.integerFormat=Ht(mt),j.width&&j.width.min!==void 0&&j.integerFormat.mandatoryDigits<j.width.min&&(j.integerFormat.mandatoryDigits=j.width.min),"YMD".indexOf(j.component)!==-1)if(j.n=-1,j.width&&j.width.max!==void 0)j.n=j.width.max,j.integerFormat.mandatoryDigits=j.n;else{var St=j.integerFormat.mandatoryDigits+j.integerFormat.optionalDigits;St>=2&&(j.n=St)}}(j.component==="Z"||j.component==="z")&&(j.integerFormat=Ht(j.presentation1)),G.push(j),lt=st+1}st++}return Z(lt,st),U}let Ct=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Tt=["January","February","March","April","May","June","July","August","September","October","November","December"],Ut=1e3*60*60*24,_t=function(M){let G=Date.UTC(M.year,M.month);var U=new Date(G).getUTCDay();return U===0&&(U=7),U>4?G+(8-U)*Ut:G-(U-1)*Ut},ct=function(M,G){return{year:M,month:G,nextMonth:function(){return G===11?ct(M+1,0):ct(M,G+1)},previousMonth:function(){return G===0?ct(M-1,11):ct(M,G-1)},nextYear:function(){return ct(M+1,G)},previousYear:function(){return ct(M-1,G)}}},fe=function(M,G){return(G-M)/(Ut*7)+1},Pt=(M,G)=>{let U;switch(G){case"Y":U=M.getUTCFullYear();break;case"M":U=M.getUTCMonth()+1;break;case"D":U=M.getUTCDate();break;case"d":{let Z=Date.UTC(M.getUTCFullYear(),M.getUTCMonth(),M.getUTCDate()),lt=Date.UTC(M.getUTCFullYear(),0);U=(Z-lt)/Ut+1;break}case"F":U=M.getUTCDay(),U===0&&(U=7);break;case"W":{let Z=ct(M.getUTCFullYear(),0),lt=_t(Z),st=Date.UTC(Z.year,M.getUTCMonth(),M.getUTCDate()),j=fe(lt,st);if(j>52){let ut=_t(Z.nextYear());st>=ut&&(j=1)}else if(j<1){let ut=_t(Z.previousYear());j=fe(ut,st)}U=Math.floor(j);break}case"w":{let Z=ct(M.getUTCFullYear(),M.getUTCMonth()),lt=_t(Z),st=Date.UTC(Z.year,Z.month,M.getUTCDate()),j=fe(lt,st);if(j>4){let ut=_t(Z.nextMonth());st>=ut&&(j=1)}else if(j<1){let ut=_t(Z.previousMonth());j=fe(ut,st)}U=Math.floor(j);break}case"X":{let Z=ct(M.getUTCFullYear(),0),lt=_t(Z),st=_t(Z.nextYear()),j=M.getTime();j<lt?U=Z.year-1:j>=st?U=Z.year+1:U=Z.year;break}case"x":{let Z=ct(M.getUTCFullYear(),M.getUTCMonth()),lt=_t(Z),st=Z.nextMonth(),j=_t(st),ut=M.getTime();ut<lt?U=Z.previousMonth().month+1:ut>=j?U=st.month+1:U=Z.month+1;break}case"H":U=M.getUTCHours();break;case"h":U=M.getUTCHours(),U=U%12,U===0&&(U=12);break;case"P":U=M.getUTCHours()>=12?"pm":"am";break;case"m":U=M.getUTCMinutes();break;case"s":U=M.getUTCSeconds();break;case"f":U=M.getUTCMilliseconds();break;case"Z":case"z":break;case"C":U="ISO";break;case"E":U="ISO";break}return U},ae=null;function pe(M,G,U){var Z=0,lt=0;if(typeof U<"u"){let mt=parseInt(U);Z=Math.floor(mt/100),lt=mt%100}var st=function(mt,St){var J=Pt(mt,St.component);if("YMDdFWwXxHhms".indexOf(St.component)!==-1)if(St.component==="Y"&&St.n!==-1&&(J=J%Math.pow(10,St.n)),St.names){if(St.component==="M"||St.component==="x")J=Tt[J-1];else if(St.component==="F")J=Ct[J];else throw{code:"D3133",value:St.component};St.names===gt.UPPER?J=J.toUpperCase():St.names===gt.LOWER&&(J=J.toLowerCase()),St.width&&J.length>St.width.max&&(J=J.substring(0,St.width.max))}else J=nt(J,St.integerFormat);else if(St.component==="f")J=nt(J,St.integerFormat);else if(St.component==="Z"||St.component==="z"){let Zt=Z*100+lt;if(St.integerFormat.regular)J=nt(Zt,St.integerFormat);else{let Rt=St.integerFormat.mandatoryDigits;if(Rt===1||Rt===2)J=nt(Z,St.integerFormat),lt!==0&&(J+=":"+F(lt,"00"));else if(Rt===3||Rt===4)J=nt(Zt,St.integerFormat);else throw{code:"D3134",value:Rt}}Zt>=0&&(J="+"+J),St.component==="z"&&(J="GMT"+J),Zt===0&&St.presentation2==="t"&&(J="Z")}return J};let j;typeof G>"u"?(ae===null&&(ae=Bt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),j=ae):j=Bt(G);let ut=(60*Z+lt)*60*1e3,Nt=new Date(M+ut),Jt="";return j.parts.forEach(function(mt){mt.type==="literal"?Jt+=mt.value:Jt+=st(Nt,mt)}),Jt}function P(M){var G={};if(M.type==="datetime")G.type="datetime",G.parts=M.parts.map(function(U){var Z={};if(U.type==="literal")Z.regex=U.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(U.component==="Z"||U.component==="z"){let st;Array.isArray(U.integerFormat.groupingSeparators)||(st=U.integerFormat.groupingSeparators),Z.regex="",U.component==="z"&&(Z.regex="GMT"),Z.regex+="[-+][0-9]+",st&&(Z.regex+=st.character+"[0-9]+"),Z.parse=function(j){U.component==="z"&&(j=j.substring(3));let ut=0,Nt=0;return st?(ut=Number.parseInt(j.substring(0,j.indexOf(st.character))),Nt=Number.parseInt(j.substring(j.indexOf(st.character)+1))):j.length-1<=2?ut=Number.parseInt(j):(ut=Number.parseInt(j.substring(0,3)),Nt=Number.parseInt(j.substring(3))),ut*60+Nt}}else if(U.integerFormat)U.integerFormat.n=U.n,Z=P(U.integerFormat);else{Z.regex="[a-zA-Z]+";var lt={};if(U.component==="M"||U.component==="x")Tt.forEach(function(st,j){U.width&&U.width.max?lt[st.substring(0,U.width.max)]=j+1:lt[st]=j+1});else if(U.component==="F")Ct.forEach(function(st,j){j>0&&(U.width&&U.width.max?lt[st.substring(0,U.width.max)]=j:lt[st]=j)});else if(U.component==="P")lt={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:U.component};Z.parse=function(st){return lt[st]}}return Z.component=U.component,Z});else{G.type="integer";let U=M.case===gt.UPPER,Z;switch(M.n&&M.n>0?M.optionalDigits===0?Z=`{${M.n}}`:Z=`{${M.n-M.optionalDigits},${M.n}}`:Z="+",M.primary){case q.LETTERS:G.regex=U?"[A-Z]+":"[a-z]+",G.parse=function(lt){return ht(lt,U?"A":"a")};break;case q.ROMAN:G.regex=U?"[MDCLXVI]+":"[mdclxvi]+",G.parse=function(lt){return $(U?lt:lt.toUpperCase())};break;case q.WORDS:G.regex="(?:"+Object.keys(N).concat("and","[\\-, ]").join("|")+")+",G.parse=function(lt){return R(lt.toLowerCase())};break;case q.DECIMAL:G.regex=`[0-9]${Z}`,M.ordinal&&(G.regex+="(?:th|st|nd|rd)"),G.parse=function(lt){let st=lt;return M.ordinal&&(st=lt.substring(0,lt.length-2)),M.regular?st=st.split(",").join(""):M.groupingSeparators.forEach(j=>{st=st.split(j.character).join("")}),M.zeroCode!==48&&(st=st.split("").map(j=>String.fromCodePoint(j.codePointAt(0)-M.zeroCode+48)).join("")),parseInt(st)};break;case q.SEQUENCE:throw{code:"D3130",value:M.token}}}return G}function D(M,G){if(typeof M>"u")return;let U=Ht(G);return P(U).parse(M)}function tt(M,G){let U=Bt(G),Z=P(U),lt="^"+Z.parts.map(Nt=>"("+Nt.regex+")").join("")+"$";var j=new RegExp(lt,"i").exec(M);if(j!==null){let Rt={};for(let k=1;k<j.length;k++){let L=Z.parts[k-1];L.parse&&(Rt[L.component]=L.parse(j[k]))}if(Object.getOwnPropertyNames(Rt).length===0)return;let ei=0,Vi=k=>{ei<<=1,ei+=k?1:0},li=k=>!(~k&ei)&&!!(k&ei);"YXMxWwdD".split("").forEach(k=>Vi(Rt[k]));let ii=!li(161)&&li(130),_n=li(84),En=!_n&&li(72);ei=0,"PHhmsf".split("").forEach(k=>Vi(Rt[k]));let kt=!li(23)&&li(47),Ge=(ii?"YD":_n?"XxwF":En?"XWF":"YMD")+(kt?"Phmsf":"Hmsf"),xs=this.environment.timestamp,Hi=!1,It=!1;if(Ge.split("").forEach(k=>{if(typeof Rt[k]>"u")Hi?(Rt[k]="MDd".indexOf(k)!==-1?1:0,It=!0):Rt[k]=Pt(xs,k);else if(Hi=!0,It)throw{code:"D3136"}}),Rt.M>0?Rt.M-=1:Rt.M=0,ii){let k=Date.UTC(Rt.Y,0),L=(Rt.d-1)*1e3*60*60*24,w=new Date(k+L);Rt.M=w.getUTCMonth(),Rt.D=w.getUTCDate()}if(_n)throw{code:"D3136"};if(En)throw{code:"D3136"};kt&&(Rt.H=Rt.h===12?0:Rt.h,Rt.P===1&&(Rt.H+=12));var ut=Date.UTC(Rt.Y,Rt.M,Rt.D,Rt.H,Rt.m,Rt.s,Rt.f);return(Rt.Z||Rt.z)&&(ut-=(Rt.Z||Rt.z)*60*1e3),ut}}var xt=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function qt(M,G){if(!(typeof M>"u"))if(typeof G>"u"){if(!xt.test(M))throw{stack:new Error().stack,code:"D3110",value:M};return Date.parse(M)}else return tt.call(this,M,G)}function it(M,G,U){if(!(typeof M>"u"))return pe.call(this,M,G,U)}return{formatInteger:F,parseInteger:D,fromMillis:it,toMillis:qt}}();r.exports=l},{"./utils":6}],2:[function(s,r,h){(function(u){(function(){var l=s("./utils");let f=(()=>{"use strict";var _=l.isNumeric,m=l.isArrayOfStrings,I=l.isArrayOfNumbers,v=l.createSequence,x=l.isSequence,N=l.isFunction,R=l.isLambda,H=l.isIterable,X=l.getFunctionArity,at=l.isDeepEqual,$=l.stringToArray;function z(p){if(!(typeof p>"u")){var E=0;return p.forEach(function(C){E+=C}),E}}function ht(p){return typeof p>"u"?0:p.length}function F(p){if(!(typeof p>"u"||p.length===0))return Math.max.apply(Math,p)}function q(p){if(!(typeof p>"u"||p.length===0))return Math.min.apply(Math,p)}function gt(p){if(!(typeof p>"u"||p.length===0)){var E=0;return p.forEach(function(C){E+=C}),E/p.length}}function nt(p,E=!1){if(!(typeof p>"u")){var C;if(typeof p=="string")C=p;else if(N(p))C="";else{if(typeof p=="number"&&!isFinite(p))throw{code:"D3001",value:p,stack:new Error().stack};var B=E?2:0;Array.isArray(p)&&p.outerWrapper&&(p=p[0]),C=JSON.stringify(p,function(W,Q){return typeof Q<"u"&&Q!==null&&Q.toPrecision&&_(Q)?Number(Q.toPrecision(15)):Q&&N(Q)?"":Q},B)}return C}}function yt(p,E,C){if(!(typeof p>"u")){var B=$(p),W=B.length;if(W+E<0&&(E=0),typeof C<"u"){if(C<=0)return"";var Q=E>=0?E+C:W+E+C;return B.slice(E,Q).join("")}return B.slice(E).join("")}}function Ht(p,E){if(!(typeof p>"u")){var C=p.indexOf(E);return C>-1?p.substr(0,C):p}}function zt(p,E){if(!(typeof p>"u")){var C=p.indexOf(E);return C>-1?p.substr(C+E.length):p}}function Bt(p){if(!(typeof p>"u"))return p.toLowerCase()}function Ct(p){if(!(typeof p>"u"))return p.toUpperCase()}function Tt(p){if(!(typeof p>"u"))return $(p).length}function Ut(p){if(!(typeof p>"u")){var E=p.replace(/[ \t\n\r]+/gm," ");return E.charAt(0)===" "&&(E=E.substring(1)),E.charAt(E.length-1)===" "&&(E=E.substring(0,E.length-1)),E}}function _t(p,E,C){if(!(typeof p>"u")){(typeof C>"u"||C.length===0)&&(C=" ");var B,W=Math.abs(E)-Tt(p);if(W>0){var Q=new Array(W+1).join(C);C.length>1&&(Q=yt(Q,0,W)),E>0?B=p+Q:B=Q+p}else B=p;return B}}function*ct(p,E){var C=p.apply(this,[E]);if(H(C)&&(C=yield*C),C&&!(typeof C.start=="number"||C.end==="number"||Array.isArray(C.groups)||N(C.next)))throw{code:"T1010",stack:new Error().stack};return C}function*fe(p,E){if(!(typeof p>"u")){var C;if(typeof E=="string")C=p.indexOf(E)!==-1;else{var B=yield*ct(E,p);C=typeof B<"u"}return C}}function*Pt(p,E,C){if(!(typeof p>"u")){if(C<0)throw{stack:new Error().stack,value:C,code:"D3040",index:3};var B=v();if(typeof C>"u"||C>0){var W=0,Q=yield*ct(E,p);if(typeof Q<"u")for(;typeof Q<"u"&&(typeof C>"u"||W<C);)B.push({match:Q.match,index:Q.start,groups:Q.groups}),Q=yield*ct(Q.next),W++}return B}}function*ae(p,E,C,B){if(!(typeof p>"u")){var W=this;if(E==="")throw{code:"D3010",stack:new Error().stack,value:E,index:2};if(B<0)throw{code:"D3011",stack:new Error().stack,value:B,index:4};var Q;typeof C=="string"?Q=function(Te){for(var ui="",Ee=0,vi=C.indexOf("$",Ee);vi!==-1&&Ee<C.length;){ui+=C.substring(Ee,vi),Ee=vi+1;var Le=C.charAt(Ee);if(Le==="$")ui+="$",Ee++;else if(Le==="0")ui+=Te.match,Ee++;else{var yi;if(Te.groups.length===0?yi=1:yi=Math.floor(Math.log(Te.groups.length)*Math.LOG10E)+1,vi=parseInt(C.substring(Ee,Ee+yi),10),yi>1&&vi>Te.groups.length&&(vi=parseInt(C.substring(Ee,Ee+yi-1),10)),isNaN(vi))ui+="$";else{if(Te.groups.length>0){var Xn=Te.groups[vi-1];typeof Xn<"u"&&(ui+=Xn)}Ee+=vi.toString().length}}vi=C.indexOf("$",Ee)}return ui+=C.substring(Ee),ui}:Q=C;var ft="",wt=0;if(typeof B>"u"||B>0){var Kt=0;if(typeof E=="string"){for(var ne=p.indexOf(E,wt);ne!==-1&&(typeof B>"u"||Kt<B);)ft+=p.substring(wt,ne),ft+=C,wt=ne+E.length,Kt++,ne=p.indexOf(E,wt);ft+=p.substring(wt)}else{var de=yield*ct(E,p);if(typeof de<"u"){for(;typeof de<"u"&&(typeof B>"u"||Kt<B);){ft+=p.substring(wt,de.start);var _e=Q.apply(W,[de]);if(H(_e)&&(_e=yield*_e),typeof _e=="string")ft+=_e;else throw{code:"D3012",stack:new Error().stack,value:_e};wt=de.start+de.match.length,Kt++,de=yield*ct(de.next)}ft+=p.substring(wt)}else ft=p}}else ft=p;return ft}}function pe(p){if(!(typeof p>"u")){var E=typeof window<"u"?window.btoa:function(C){return new u.Buffer.from(C,"binary").toString("base64")};return E(p)}}function P(p){if(!(typeof p>"u")){var E=typeof window<"u"?window.atob:function(C){return new u.Buffer.from(C,"base64").toString("binary")};return E(p)}}function D(p){if(!(typeof p>"u")){var E;try{E=encodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrlComponent"}}return E}}function tt(p){if(!(typeof p>"u")){var E;try{E=encodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrl"}}return E}}function xt(p){if(!(typeof p>"u")){var E;try{E=decodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrlComponent"}}return E}}function qt(p){if(!(typeof p>"u")){var E;try{E=decodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrl"}}return E}}function*it(p,E,C){if(!(typeof p>"u")){if(C<0)throw{code:"D3020",stack:new Error().stack,value:C,index:3};var B=[];if(typeof C>"u"||C>0)if(typeof E=="string")B=p.split(E,C);else{var W=0,Q=yield*ct(E,p);if(typeof Q<"u"){for(var ft=0;typeof Q<"u"&&(typeof C>"u"||W<C);)B.push(p.substring(ft,Q.start)),ft=Q.end,Q=yield*ct(Q.next),W++;(typeof C>"u"||W<C)&&B.push(p.substring(ft))}else B.push(p)}return B}}function M(p,E){if(!(typeof p>"u"))return typeof E>"u"&&(E=""),p.join(E)}function G(p,E,C){if(!(typeof p>"u")){var B={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},W=B;typeof C<"u"&&Object.keys(C).forEach(function(Yt){W[Yt]=C[Yt]});for(var Q=[],ft=W["zero-digit"].charCodeAt(0),wt=ft;wt<ft+10;wt++)Q.push(String.fromCharCode(wt));var Kt=Q.concat([W["decimal-separator"],W["exponent-separator"],W["grouping-separator"],W.digit,W["pattern-separator"]]),ne=E.split(W["pattern-separator"]);if(ne.length>2)throw{code:"D3080",stack:new Error().stack};var de=function(Yt){var De=function(){for(var Xe,bi=0;bi<Yt.length;bi++)if(Xe=Yt.charAt(bi),Kt.indexOf(Xe)!==-1&&Xe!==W["exponent-separator"])return Yt.substring(0,bi)}(),_i=function(){for(var Xe,bi=Yt.length-1;bi>=0;bi--)if(Xe=Yt.charAt(bi),Kt.indexOf(Xe)!==-1&&Xe!==W["exponent-separator"])return Yt.substring(bi+1)}(),Ie=Yt.substring(De.length,Yt.length-_i.length),ci,yn,Ti,Wn,Pi=Yt.indexOf(W["exponent-separator"],De.length);Pi===-1||Pi>Yt.length-_i.length?(ci=Ie,yn=void 0):(ci=Ie.substring(0,Pi),yn=Ie.substring(Pi+1));var Wi=ci.indexOf(W["decimal-separator"]);return Wi===-1?(Ti=ci,Wn=_i):(Ti=ci.substring(0,Wi),Wn=ci.substring(Wi+1)),{prefix:De,suffix:_i,activePart:Ie,mantissaPart:ci,exponentPart:yn,integerPart:Ti,fractionalPart:Wn,subpicture:Yt}},_e=function(Yt){var De,_i,Ie=Yt.subpicture,ci=Ie.indexOf(W["decimal-separator"]);ci!==Ie.lastIndexOf(W["decimal-separator"])&&(De="D3081"),Ie.indexOf(W.percent)!==Ie.lastIndexOf(W.percent)&&(De="D3082"),Ie.indexOf(W["per-mille"])!==Ie.lastIndexOf(W["per-mille"])&&(De="D3083"),Ie.indexOf(W.percent)!==-1&&Ie.indexOf(W["per-mille"])!==-1&&(De="D3084");var yn=!1;for(_i=0;_i<Yt.mantissaPart.length;_i++){var Ti=Yt.mantissaPart.charAt(_i);if(Q.indexOf(Ti)!==-1||Ti===W.digit){yn=!0;break}}yn||(De="D3085");var Wn=Yt.activePart.split("").map(function(Xe){return Kt.indexOf(Xe)===-1?"p":"a"}).join("");Wn.indexOf("p")!==-1&&(De="D3086"),ci!==-1?(Ie.charAt(ci-1)===W["grouping-separator"]||Ie.charAt(ci+1)===W["grouping-separator"])&&(De="D3087"):Yt.integerPart.charAt(Yt.integerPart.length-1)===W["grouping-separator"]&&(De="D3088"),Ie.indexOf(W["grouping-separator"]+W["grouping-separator"])!==-1&&(De="D3089");var Pi=Yt.integerPart.indexOf(W.digit);Pi!==-1&&Yt.integerPart.substring(0,Pi).split("").filter(function(Xe){return Q.indexOf(Xe)>-1}).length>0&&(De="D3090"),Pi=Yt.fractionalPart.lastIndexOf(W.digit),Pi!==-1&&Yt.fractionalPart.substring(Pi).split("").filter(function(Xe){return Q.indexOf(Xe)>-1}).length>0&&(De="D3091");var Wi=typeof Yt.exponentPart=="string";if(Wi&&Yt.exponentPart.length>0&&(Ie.indexOf(W.percent)!==-1||Ie.indexOf(W["per-mille"])!==-1)&&(De="D3092"),Wi&&(Yt.exponentPart.length===0||Yt.exponentPart.split("").filter(function(Xe){return Q.indexOf(Xe)===-1}).length>0)&&(De="D3093"),De)throw{code:De,stack:new Error().stack}},Te=function(Yt){var De=function(ni,bn){for(var Es=[],on=ni.indexOf(W["grouping-separator"]);on!==-1;){var Ms=(bn?ni.substring(0,on):ni.substring(on)).split("").filter(function(qn){return Q.indexOf(qn)!==-1||qn===W.digit}).length;Es.push(Ms),on=Yt.integerPart.indexOf(W["grouping-separator"],on+1)}return Es},_i=De(Yt.integerPart),Ie=function(ni){if(ni.length===0)return 0;for(var bn=function(Ms,qn){return qn===0?Ms:bn(qn,Ms%qn)},Es=ni.reduce(bn),on=1;on<=ni.length;on++)if(ni.indexOf(on*Es)===-1)return 0;return Es},ci=Ie(_i),yn=De(Yt.fractionalPart,!0),Ti=Yt.integerPart.split("").filter(function(ni){return Q.indexOf(ni)!==-1}).length,Wn=Ti,Pi=Yt.fractionalPart.split(""),Wi=Pi.filter(function(ni){return Q.indexOf(ni)!==-1}).length,Xe=Pi.filter(function(ni){return Q.indexOf(ni)!==-1||ni===W.digit}).length,bi=typeof Yt.exponentPart=="string";Ti===0&&Xe===0&&(bi?(Wi=1,Xe=1):Ti=1),bi&&Ti===0&&Yt.integerPart.indexOf(W.digit)!==-1&&(Ti=1),Ti===0&&Wi===0&&(Wi=1);var Wr=0;return bi&&(Wr=Yt.exponentPart.split("").filter(function(ni){return Q.indexOf(ni)!==-1}).length),{integerPartGroupingPositions:_i,regularGrouping:ci,minimumIntegerPartSize:Ti,scalingFactor:Wn,prefix:Yt.prefix,fractionalPartGroupingPositions:yn,minimumFactionalPartSize:Wi,maximumFactionalPartSize:Xe,minimumExponentSize:Wr,suffix:Yt.suffix,picture:Yt.subpicture}},ui=ne.map(de);ui.forEach(_e);var Ee=ui.map(Te),vi=W["minus-sign"],Le=W["zero-digit"],yi=W["decimal-separator"],Xn=W["grouping-separator"];Ee.length===1&&(Ee.push(JSON.parse(JSON.stringify(Ee[0]))),Ee[1].prefix=vi+Ee[1].prefix);var He;p>=0?He=Ee[0]:He=Ee[1];var Vn;He.picture.indexOf(W.percent)!==-1?Vn=p*100:He.picture.indexOf(W["per-mille"])!==-1?Vn=p*1e3:Vn=p;var vn,Hn;if(He.minimumExponentSize===0)vn=Vn;else{var ya=Math.pow(10,He.scalingFactor),Ur=Math.pow(10,He.scalingFactor-1);for(vn=Vn,Hn=0;vn<Ur;)vn*=10,Hn-=1;for(;vn>ya;)vn/=10,Hn+=1}var ba=ut(vn,He.maximumFactionalPartSize),lr=function(Yt,De){var _i=Math.abs(Yt).toFixed(De);return Le!=="0"&&(_i=_i.split("").map(function(Ie){return Ie>="0"&&Ie<="9"?Q[Ie.charCodeAt(0)-48]:Ie}).join("")),_i},ie=lr(ba,He.maximumFactionalPartSize),Qe=ie.indexOf(".");for(Qe===-1?ie=ie+yi:ie=ie.replace(".",yi);ie.charAt(0)===Le;)ie=ie.substring(1);for(;ie.charAt(ie.length-1)===Le;)ie=ie.substring(0,ie.length-1);Qe=ie.indexOf(yi);var Zn=He.minimumIntegerPartSize-Qe,Vr=He.minimumFactionalPartSize-(ie.length-Qe-1);if(ie=(Zn>0?new Array(Zn+1).join(Le):"")+ie,ie=ie+(Vr>0?new Array(Vr+1).join(Le):""),Qe=ie.indexOf(yi),He.regularGrouping>0)for(var Hr=Math.floor((Qe-1)/He.regularGrouping),Bs=1;Bs<=Hr;Bs++)ie=[ie.slice(0,Qe-Bs*He.regularGrouping),Xn,ie.slice(Qe-Bs*He.regularGrouping)].join("");else He.integerPartGroupingPositions.forEach(function(Yt){ie=[ie.slice(0,Qe-Yt),Xn,ie.slice(Qe-Yt)].join(""),Qe++});if(Qe=ie.indexOf(yi),He.fractionalPartGroupingPositions.forEach(function(Yt){ie=[ie.slice(0,Yt+Qe+1),Xn,ie.slice(Yt+Qe+1)].join("")}),Qe=ie.indexOf(yi),(He.picture.indexOf(yi)===-1||Qe===ie.length-1)&&(ie=ie.substring(0,ie.length-1)),typeof Hn<"u"){var ks=lr(Hn,0);Zn=He.minimumExponentSize-ks.length,Zn>0&&(ks=new Array(Zn+1).join(Le)+ks),ie=ie+W["exponent-separator"]+(Hn<0?vi:"")+ks}return ie=He.prefix+ie+He.suffix,ie}}function U(p,E){if(!(typeof p>"u")){if(p=ut(p),typeof E>"u"?E=10:E=ut(E),E<2||E>36)throw{code:"D3100",stack:new Error().stack,value:E};var C=p.toString(E);return C}}function Z(p){var E;if(!(typeof p>"u")){if(typeof p=="number")E=p;else if(typeof p=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(p)&&!isNaN(parseFloat(p))&&isFinite(p))E=parseFloat(p);else if(p===!0)E=1;else if(p===!1)E=0;else throw{code:"D3030",value:p,stack:new Error().stack,index:1};return E}}function lt(p){var E;if(!(typeof p>"u"))return E=Math.abs(p),E}function st(p){var E;if(!(typeof p>"u"))return E=Math.floor(p),E}function j(p){var E;if(!(typeof p>"u"))return E=Math.ceil(p),E}function ut(p,E){var C;if(!(typeof p>"u")){if(E){var B=p.toString().split("e");p=+(B[0]+"e"+(B[1]?+B[1]+E:E))}C=Math.round(p);var W=C-p;return Math.abs(W)===.5&&Math.abs(C%2)===1&&(C=C-1),E&&(B=C.toString().split("e"),C=+(B[0]+"e"+(B[1]?+B[1]-E:-E))),Object.is(C,-0)&&(C=0),C}}function Nt(p){var E;if(!(typeof p>"u")){if(p<0)throw{stack:new Error().stack,code:"D3060",index:1,value:p};return E=Math.sqrt(p),E}}function Jt(p,E){var C;if(!(typeof p>"u")){if(C=Math.pow(p,E),!isFinite(C))throw{stack:new Error().stack,code:"D3061",index:1,value:p,exp:E};return C}}function mt(){return Math.random()}function St(p){if(!(typeof p>"u")){var E=!1;if(Array.isArray(p)){if(p.length===1)E=St(p[0]);else if(p.length>1){var C=p.filter(function(B){return St(B)});E=C.length>0}}else typeof p=="string"?p.length>0&&(E=!0):_(p)?p!==0&&(E=!0):p!==null&&typeof p=="object"?Object.keys(p).length>0&&(E=!0):typeof p=="boolean"&&p===!0&&(E=!0);return E}}function J(p){if(!(typeof p>"u"))return!St(p)}function Zt(p,E,C,B){var W=[E],Q=X(p);return Q>=2&&W.push(C),Q>=3&&W.push(B),W}function*Rt(p,E){if(!(typeof p>"u")){for(var C=v(),B=0;B<p.length;B++){var W=Zt(E,p[B],B,p),Q=yield*E.apply(this,W);typeof Q<"u"&&C.push(Q)}return C}}function*ei(p,E){if(!(typeof p>"u")){for(var C=v(),B=0;B<p.length;B++){var W=p[B],Q=Zt(E,W,B,p),ft=yield*E.apply(this,Q);St(ft)&&C.push(W)}return C}}function*Vi(p,E){if(!(typeof p>"u")){for(var C=!1,B,W=0;W<p.length;W++){var Q=p[W],ft=!0;if(typeof E<"u"){var wt=Zt(E,Q,W,p),Kt=yield*E.apply(this,wt);ft=St(Kt)}if(ft)if(!C)B=Q,C=!0;else throw{stack:new Error().stack,code:"D3138",index:W}}if(!C)throw{stack:new Error().stack,code:"D3139"};return B}}function li(){for(var p=[],E=Array.prototype.slice.call(arguments),C=Math.min.apply(Math,E.map(function(Q){return Array.isArray(Q)?Q.length:0})),B=0;B<C;B++){var W=E.map(Q=>Q[B]);p.push(W)}return p}function*Je(p,E,C){if(!(typeof p>"u")){var B,W=X(E);if(W<2)throw{stack:new Error().stack,code:"D3050",index:1};var Q;for(typeof C>"u"&&p.length>0?(B=p[0],Q=1):(B=C,Q=0);Q<p.length;){var ft=[B,p[Q]];W>=3&&ft.push(Q),W>=4&&ft.push(p),B=yield*E.apply(this,ft),Q++}return B}}function ii(p){var E=v();if(Array.isArray(p)){var C={};p.forEach(function(B){var W=ii(B);W.forEach(function(Q){C[Q]=!0})}),E=ii(C)}else p!==null&&typeof p=="object"&&!R(p)&&Object.keys(p).forEach(B=>E.push(B));return E}function _n(p,E){var C;if(Array.isArray(p)){C=v();for(var B=0;B<p.length;B++){var W=_n(p[B],E);typeof W<"u"&&(Array.isArray(W)?W.forEach(Q=>C.push(Q)):C.push(W))}}else p!==null&&typeof p=="object"&&(C=p[E]);return C}function En(p,E){return typeof p>"u"?E:typeof E>"u"?p:(Array.isArray(p)||(p=v(p)),Array.isArray(E)||(E=[E]),p.concat(E))}function gs(p){return!(typeof p>"u")}function kt(p){var E=v();if(Array.isArray(p))p.forEach(function(W){E=En(E,kt(W))});else if(p!==null&&typeof p=="object"&&!R(p))for(var C in p){var B={};B[C]=p[C],E.push(B)}else E=p;return E}function Fs(p){if(!(typeof p>"u")){var E={};return p.forEach(function(C){for(var B in C)E[B]=C[B]}),E}}function Ts(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var E=p.length,C=new Array(E),B=0;B<E;B++)C[E-B-1]=p[B];return C}}function*Ge(p,E){var C=v();for(var B in p){var W=Zt(E,p[B],B,p),Q=yield*E.apply(this,W);typeof Q<"u"&&C.push(Q)}return C}function xs(p){throw{code:"D3137",stack:new Error().stack,message:p||"$error() function evaluated"}}function Hi(p,E){if(!p)throw{code:"D3141",stack:new Error().stack,message:E||"$assert() statement failed"}}function It(p){if(p!==void 0)return p===null?"null":_(p)?"number":typeof p=="string"?"string":typeof p=="boolean"?"boolean":Array.isArray(p)?"array":N(p)?"function":"object"}function*k(p,E){if(!(typeof p>"u")){if(p.length<=1)return p;var C;if(typeof E>"u"){if(!I(p)&&!m(p))throw{stack:new Error().stack,code:"D3070",index:1};C=function*(ft,wt){return ft>wt}}else C=E;var B=function*(ft,wt){var Kt=function*(de,_e,Te){_e.length===0?Array.prototype.push.apply(de,Te):Te.length===0?Array.prototype.push.apply(de,_e):(yield*C(_e[0],Te[0]))?(de.push(Te[0]),yield*Kt(de,_e,Te.slice(1))):(de.push(_e[0]),yield*Kt(de,_e.slice(1),Te))},ne=[];return yield*Kt(ne,ft,wt),ne},W=function*(ft){if(!Array.isArray(ft)||ft.length<=1)return ft;var wt=Math.floor(ft.length/2),Kt=ft.slice(0,wt),ne=ft.slice(wt);return Kt=yield*W(Kt),ne=yield*W(ne),yield*B(Kt,ne)},Q=yield*W(p);return Q}}function L(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var E=new Array(p.length),C=0;C<p.length;C++){var B=Math.floor(Math.random()*(C+1));C!==B&&(E[C]=E[B]),E[B]=p[C]}return E}}function w(p){if(!(typeof p>"u")){if(!Array.isArray(p)||p.length<=1)return p;for(var E=x(p)?v():[],C=0;C<p.length;C++){for(var B=p[C],W=!1,Q=0;Q<E.length;Q++)if(at(B,E[Q])){W=!0;break}W||E.push(B)}return E}}function*O(p,E){var C={};for(var B in p){var W=p[B],Q=Zt(E,W,B,p),ft=yield*E.apply(this,Q);St(ft)&&(C[B]=W)}return Object.keys(C).length===0&&(C=void 0),C}return{sum:z,count:ht,max:F,min:q,average:gt,string:nt,substring:yt,substringBefore:Ht,substringAfter:zt,lowercase:Bt,uppercase:Ct,length:Tt,trim:Ut,pad:_t,match:Pt,contains:fe,replace:ae,split:it,join:M,formatNumber:G,formatBase:U,number:Z,floor:st,ceil:j,round:ut,abs:lt,sqrt:Nt,power:Jt,random:mt,boolean:St,not:J,map:Rt,zip:li,filter:ei,single:Vi,foldLeft:Je,sift:O,keys:ii,lookup:_n,append:En,exists:gs,spread:kt,merge:Fs,reverse:Ts,each:Ge,error:xs,assert:Hi,type:It,sort:k,shuffle:L,distinct:w,base64encode:pe,base64decode:P,encodeUrlComponent:D,encodeUrl:tt,decodeUrlComponent:xt,decodeUrl:qt}})();r.exports=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(s,r,h){var u=s("./datetime"),l=s("./functions"),f=s("./utils"),_=s("./parser"),m=s("./signature"),I=function(){"use strict";var v=f.isNumeric,x=f.isArrayOfStrings,N=f.isArrayOfNumbers,R=f.createSequence,H=f.isSequence,X=f.isFunction,at=f.isLambda,$=f.isIterable,z=f.getFunctionArity,ht=f.isDeepEqual,F=Ge(null);function*q(k,L,w){var O,p=w.lookup("__evaluate_entry");switch(p&&p(k,L,w),k.type){case"path":O=yield*gt(k,L,w);break;case"binary":O=yield*Ct(k,L,w);break;case"unary":O=yield*Tt(k,L,w);break;case"name":O=Ut(k,L,w);break;case"string":case"number":case"value":O=_t(k,L,w);break;case"wildcard":O=ct(k,L,w);break;case"descendant":O=Pt(k,L,w);break;case"parent":O=w.lookup(k.slot.label);break;case"condition":O=yield*lt(k,L,w);break;case"block":O=yield*st(k,L,w);break;case"bind":O=yield*Z(k,L,w);break;case"regex":O=j(k,L,w);break;case"function":O=yield*J(k,L,w);break;case"variable":O=ut(k,L,w);break;case"lambda":O=ei(k,L,w);break;case"partial":O=yield*Vi(k,L,w);break;case"apply":O=yield*St(k,L,w);break;case"transform":O=Jt(k,L,w);break}if(w.async&&(typeof O>"u"||O===null||typeof O.then!="function")&&(O=Promise.resolve(O)),w.async&&typeof O.then=="function"&&k.nextFunction&&typeof O[k.nextFunction]=="function"||(O=yield O),Object.prototype.hasOwnProperty.call(k,"predicate"))for(var E=0;E<k.predicate.length;E++)O=yield*Bt(k.predicate[E].expr,O,w);k.type!=="path"&&Object.prototype.hasOwnProperty.call(k,"group")&&(O=yield*M(k.group,O,w));var C=w.lookup("__evaluate_exit");return C&&C(k,L,w,O),O&&H(O)&&!O.tupleStream&&(k.keepArray&&(O.keepSingleton=!0),O.length===0?O=void 0:O.length===1&&(O=O.keepSingleton?O:O[0])),O}function*gt(k,L,w){var O;Array.isArray(L)&&k.steps[0].type!=="variable"?O=L:O=R(L);for(var p,E=!1,C=void 0,B=0;B<k.steps.length;B++){var W=k.steps[B];if(W.tuple&&(E=!0),B===0&&W.consarray?p=yield*q(W,O,w):E?C=yield*zt(W,O,C,w):p=yield*yt(W,O,w,B===k.steps.length-1),!E&&(typeof p>"u"||p.length===0))break;typeof W.focus>"u"&&(O=p)}if(E)if(k.tuple)p=C;else for(p=R(),B=0;B<C.length;B++)p.push(C[B]["@"]);return k.keepSingletonArray&&(Array.isArray(p)&&p.cons&&!p.sequence&&(p=R(p)),p.keepSingleton=!0),k.hasOwnProperty("group")&&(p=yield*M(k.group,E?C:p,w)),p}function nt(k,L){var w=Ge(k);for(let O in L)w.bind(O,L[O]);return w}function*yt(k,L,w,O){var p;if(k.type==="sort")return p=yield*Nt(k,L,w),k.stages&&(p=yield*Ht(k.stages,p,w)),p;p=R();for(var E=0;E<L.length;E++){var C=yield*q(k,L[E],w);if(k.stages)for(var B=0;B<k.stages.length;B++)C=yield*Bt(k.stages[B].expr,C,w);typeof C<"u"&&p.push(C)}var W=R();return O&&p.length===1&&Array.isArray(p[0])&&!H(p[0])?W=p[0]:p.forEach(function(Q){!Array.isArray(Q)||Q.cons?W.push(Q):Q.forEach(ft=>W.push(ft))}),W}function*Ht(k,L,w){for(var O=L,p=0;p<k.length;p++){var E=k[p];switch(E.type){case"filter":O=yield*Bt(E.expr,O,w);break;case"index":for(var C=0;C<O.length;C++){var B=O[C];B[E.value]=C}break}}return O}function*zt(k,L,w,O){var p;if(k.type==="sort"){if(w)p=yield*Nt(k,w,O);else{var E=yield*Nt(k,L,O);p=R(),p.tupleStream=!0;for(var C=0;C<E.length;C++){var B={"@":E[C]};B[k.index]=C,p.push(B)}}return k.stages&&(p=yield*Ht(k.stages,p,O)),p}p=R(),p.tupleStream=!0;var W=O;w===void 0&&(w=L.map(Kt=>({"@":Kt})));for(var Q=0;Q<w.length;Q++){W=nt(O,w[Q]);var ft=yield*q(k,w[Q]["@"],W);if(typeof ft<"u"){Array.isArray(ft)||(ft=[ft]);for(var wt=0;wt<ft.length;wt++)B={},Object.assign(B,w[Q]),ft.tupleStream?Object.assign(B,ft[wt]):(k.focus?(B[k.focus]=ft[wt],B["@"]=w[Q]["@"]):B["@"]=ft[wt],k.index&&(B[k.index]=wt),k.ancestor&&(B[k.ancestor.label]=w[Q]["@"])),p.push(B)}}return k.stages&&(p=yield*Ht(k.stages,p,O)),p}function*Bt(k,L,w){var O=R();if(L&&L.tupleStream&&(O.tupleStream=!0),Array.isArray(L)||(L=R(L)),k.type==="number"){var p=Math.floor(k.value);p<0&&(p=L.length+p);var E=L[p];typeof E<"u"&&(Array.isArray(E)?O=E:O.push(E))}else for(p=0;p<L.length;p++){var E=L[p],C=E,B=w;L.tupleStream&&(C=E["@"],B=nt(w,E));var W=yield*q(k,C,B);v(W)&&(W=[W]),N(W)?W.forEach(function(ft){var wt=Math.floor(ft);wt<0&&(wt=L.length+wt),wt===p&&O.push(E)}):l.boolean(W)&&O.push(E)}return O}function*Ct(k,L,w){var O,p=yield*q(k.lhs,L,w),E=k.value,C=function*(){return yield*q(k.rhs,L,w)};if(E==="and"||E==="or")try{return yield*xt(p,C,E)}catch(W){throw W.position=k.position,W.token=E,W}var B=yield*C();try{switch(E){case"+":case"-":case"*":case"/":case"%":O=pe(p,B,E);break;case"=":case"!=":O=P(p,B,E);break;case"<":case"<=":case">":case">=":O=D(p,B,E);break;case"&":O=it(p,B);break;case"..":O=U(p,B);break;case"in":O=tt(p,B);break}}catch(W){throw W.position=k.position,W.token=E,W}return O}function*Tt(k,L,w){var O;switch(k.value){case"-":if(O=yield*q(k.expression,L,w),typeof O>"u")O=void 0;else if(v(O))O=-O;else throw{code:"D1002",stack:new Error().stack,position:k.position,token:k.value,value:O};break;case"[":O=[];for(var p=0;p<k.expressions.length;p++){var E=k.expressions[p],C=yield*q(E,L,w);typeof C<"u"&&(E.value==="["?O.push(C):O=l.append(O,C))}k.consarray&&Object.defineProperty(O,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":O=yield*M(k,L,w);break}return O}function Ut(k,L,w){return l.lookup(L,k.value)}function _t(k){return k.value}function ct(k,L){var w=R();return Array.isArray(L)&&L.outerWrapper&&L.length>0&&(L=L[0]),L!==null&&typeof L=="object"&&Object.keys(L).forEach(function(O){var p=L[O];Array.isArray(p)?(p=fe(p),w=l.append(w,p)):w.push(p)}),w}function fe(k,L){return typeof L>"u"&&(L=[]),Array.isArray(k)?k.forEach(function(w){fe(w,L)}):L.push(k),L}function Pt(k,L){var w,O=R();return typeof L<"u"&&(ae(L,O),O.length===1?w=O[0]:w=O),w}function ae(k,L){Array.isArray(k)||L.push(k),Array.isArray(k)?k.forEach(function(w){ae(w,L)}):k!==null&&typeof k=="object"&&Object.keys(k).forEach(function(w){ae(k[w],L)})}function pe(k,L,w){var O;if(typeof k<"u"&&!v(k))throw{code:"T2001",stack:new Error().stack,value:k};if(typeof L<"u"&&!v(L))throw{code:"T2002",stack:new Error().stack,value:L};if(typeof k>"u"||typeof L>"u")return O;switch(w){case"+":O=k+L;break;case"-":O=k-L;break;case"*":O=k*L;break;case"/":O=k/L;break;case"%":O=k%L;break}return O}function P(k,L,w){var O,p=typeof k,E=typeof L;if(p==="undefined"||E==="undefined")return!1;switch(w){case"=":O=ht(k,L);break;case"!=":O=!ht(k,L);break}return O}function D(k,L,w){var O,p=typeof k,E=typeof L,C=p==="undefined"||p==="string"||p==="number",B=E==="undefined"||E==="string"||E==="number";if(!C||!B)throw{code:"T2010",stack:new Error().stack,value:p==="string"||p==="number"?L:k};if(!(p==="undefined"||E==="undefined")){if(p!==E)throw{code:"T2009",stack:new Error().stack,value:k,value2:L};switch(w){case"<":O=k<L;break;case"<=":O=k<=L;break;case">":O=k>L;break;case">=":O=k>=L;break}return O}}function tt(k,L){var w=!1;if(typeof k>"u"||typeof L>"u")return!1;Array.isArray(L)||(L=[L]);for(var O=0;O<L.length;O++)if(L[O]===k){w=!0;break}return w}function*xt(k,L,w){var O,p=qt(k);switch(w){case"and":O=p&&qt(yield*L());break;case"or":O=p||qt(yield*L());break}return O}function qt(k){var L=l.boolean(k);return typeof L>"u"?!1:L}function it(k,L){var w,O="",p="";return typeof k<"u"&&(O=l.string(k)),typeof L<"u"&&(p=l.string(L)),w=O.concat(p),w}function*M(k,L,w){var O={},p={},E=!!(L&&L.tupleStream);Array.isArray(L)||(L=R(L)),L.length===0&&L.push(void 0);for(var C=0;C<L.length;C++)for(var B=L[C],W=E?nt(w,B):w,Q=0;Q<k.lhs.length;Q++){var ft=k.lhs[Q],wt=yield*q(ft[0],E?B["@"]:B,W);if(typeof wt!="string"&&wt!==void 0)throw{code:"T1003",stack:new Error().stack,position:k.position,value:wt};if(wt!==void 0){var Kt={data:B,exprIndex:Q};if(p.hasOwnProperty(wt)){if(p[wt].exprIndex!==Q)throw{code:"D1009",stack:new Error().stack,position:k.position,value:wt};p[wt].data=l.append(p[wt].data,B)}else p[wt]=Kt}}for(wt in p){Kt=p[wt];var ne=Kt.data,W=w;if(E){var de=G(Kt.data);ne=de["@"],delete de["@"],W=nt(w,de)}var _e=yield*q(k.lhs[Kt.exprIndex][1],ne,W);typeof _e<"u"&&(O[wt]=_e)}return O}function G(k){if(!Array.isArray(k))return k;var L={};Object.assign(L,k[0]);for(var w=1;w<k.length;w++)for(let O in k[w])L[O]=l.append(L[O],k[w][O]);return L}function U(k,L){var w;if(typeof k<"u"&&!Number.isInteger(k))throw{code:"T2003",stack:new Error().stack,value:k};if(typeof L<"u"&&!Number.isInteger(L))throw{code:"T2004",stack:new Error().stack,value:L};if(typeof k>"u"||typeof L>"u"||k>L)return w;var O=L-k+1;if(O>1e7)throw{code:"D2014",stack:new Error().stack,value:O};w=new Array(O);for(var p=k,E=0;p<=L;p++,E++)w[E]=p;return w.sequence=!0,w}function*Z(k,L,w){var O=yield*q(k.rhs,L,w);return w.bind(k.lhs.value,O),O}function*lt(k,L,w){var O,p=yield*q(k.condition,L,w);return l.boolean(p)?O=yield*q(k.then,L,w):typeof k.else<"u"&&(O=yield*q(k.else,L,w)),O}function*st(k,L,w){for(var O,p=Ge(w),E=0;E<k.expressions.length;E++)O=yield*q(k.expressions[E],L,p);return O}function j(k){var L=new It.RegexEngine(k.value),w=function(O,p){var E;L.lastIndex=p||0;var C=L.exec(O);if(C!==null){if(E={match:C[0],start:C.index,end:C.index+C[0].length,groups:[]},C.length>1)for(var B=1;B<C.length;B++)E.groups.push(C[B]);E.next=function(){if(!(L.lastIndex>=O.length)){var W=w(O,L.lastIndex);if(W&&W.match==="")throw{code:"D1004",stack:new Error().stack,position:k.position,value:k.value.source};return W}}}return E};return w}function ut(k,L,w){var O;return k.value===""?O=L&&L.outerWrapper?L[0]:L:O=w.lookup(k.value),O}function*Nt(k,L,w){var O,p=L,E=!!L.tupleStream,C=function*(W,Q){for(var ft=0,wt=0;ft===0&&wt<k.terms.length;wt++){var Kt=k.terms[wt],ne=W,de=w;E&&(ne=W["@"],de=nt(w,W));var _e=yield*q(Kt.expression,ne,de);ne=Q,de=w,E&&(ne=Q["@"],de=nt(w,Q));var Te=yield*q(Kt.expression,ne,de),ui=typeof _e,Ee=typeof Te;if(ui==="undefined"){ft=Ee==="undefined"?0:1;continue}if(Ee==="undefined"){ft=-1;continue}if(!(ui==="string"||ui==="number")||!(Ee==="string"||Ee==="number"))throw{code:"T2008",stack:new Error().stack,position:k.position,value:ui==="string"||ui==="number"?Te:_e};if(ui!==Ee)throw{code:"T2007",stack:new Error().stack,position:k.position,value:_e,value2:Te};_e!==Te&&(_e<Te?ft=-1:ft=1,Kt.descending===!0&&(ft=-ft))}return ft===1},B={environment:w,input:L};return O=yield*l.sort.apply(B,[p,C]),O}function Jt(k,L,w){var O=function*(p){if(!(typeof p>"u")){var E=w.lookup("clone");if(!X(E))throw{code:"T2013",stack:new Error().stack,position:k.position};var C=yield*Zt(E,[p],null,w),B=yield*q(k.pattern,C,w);if(typeof B<"u"){Array.isArray(B)||(B=[B]);for(var W=0;W<B.length;W++){var Q=B[W],ft=yield*q(k.update,Q,w),wt=typeof ft;if(wt!=="undefined"){if(wt!=="object"||ft===null||Array.isArray(ft))throw{code:"T2011",stack:new Error().stack,position:k.update.position,value:ft};for(var Kt in ft)Q[Kt]=ft[Kt]}if(typeof k.delete<"u"){var ne=yield*q(k.delete,Q,w);if(typeof ne<"u"){var de=ne;if(Array.isArray(ne)||(ne=[ne]),!x(ne))throw{code:"T2012",stack:new Error().stack,position:k.delete.position,value:de};for(var _e=0;_e<ne.length;_e++)typeof Q=="object"&&Q!==null&&delete Q[ne[_e]]}}}}return C}};return kt(O,"<(oa):o>")}var mt=_("function($f, $g) { function($x){ $g($f($x)) } }");function*St(k,L,w){var O,p=yield*q(k.lhs,L,w);if(k.rhs.type==="function")O=yield*J(k.rhs,L,w,{context:p});else{var E=yield*q(k.rhs,L,w);if(!X(E))throw{code:"T2006",stack:new Error().stack,position:k.position,value:E};if(X(p)){var C=yield*q(mt,null,w);O=yield*Zt(C,[p,E],null,w)}else O=yield*Zt(E,[p],null,w)}return O}function*J(k,L,w,O){var p,E=yield*q(k.procedure,L,w);if(typeof E>"u"&&k.procedure.type==="path"&&w.lookup(k.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:k.position,token:k.procedure.steps[0].value};var C=[];typeof O<"u"&&C.push(O.context);for(var B=0;B<k.arguments.length;B++){let Q=yield*q(k.arguments[B],L,w);if(X(Q)){let ft=function*(...wt){return yield*Zt(Q,wt,null,w)};ft.arity=z(Q),C.push(ft)}else C.push(Q)}var W=k.procedure.type==="path"?k.procedure.steps[0].value:k.procedure.value;try{typeof E=="object"&&(E.token=W,E.position=k.position),p=yield*Zt(E,C,L,w)}catch(Q){throw Q.position||(Q.position=k.position),Q.token||(Q.token=W),Q}return p}function*Zt(k,L,w,O){var p;for(p=yield*Rt(k,L,w,O);at(p)&&p.thunk===!0;){var E=yield*q(p.body.procedure,p.input,p.environment);p.body.procedure.type==="variable"&&(E.token=p.body.procedure.value),E.position=p.body.procedure.position;for(var C=[],B=0;B<p.body.arguments.length;B++)C.push(yield*q(p.body.arguments[B],p.input,p.environment));p=yield*Rt(E,C,w,O)}return p}function*Rt(k,L,w,O){var p;try{var E=L;if(k&&(E=li(k.signature,L,w)),at(k))p=yield*Je(k,E);else if(k&&k._jsonata_function===!0){var C={environment:O,input:w};p=k.implementation.apply(C,E),$(p)&&(p=yield*p)}else if(typeof k=="function")p=k.apply(w,E),$(p)&&(p=yield*p);else throw{code:"T1006",stack:new Error().stack}}catch(B){throw k&&(typeof B.token>"u"&&typeof k.token<"u"&&(B.token=k.token),B.position=k.position),B}return p}function ei(k,L,w){var O={_jsonata_lambda:!0,input:L,environment:w,arguments:k.arguments,signature:k.signature,body:k.body};return k.thunk===!0&&(O.thunk=!0),O.apply=function*(p,E){return yield*Zt(O,E,L,p.environment)},O}function*Vi(k,L,w){for(var O,p=[],E=0;E<k.arguments.length;E++){var C=k.arguments[E];C.type==="operator"&&C.value==="?"?p.push(C):p.push(yield*q(C,L,w))}var B=yield*q(k.procedure,L,w);if(typeof B>"u"&&k.procedure.type==="path"&&w.lookup(k.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:k.position,token:k.procedure.steps[0].value};if(at(B))O=ii(B,p);else if(B&&B._jsonata_function===!0)O=_n(B.implementation,p);else if(typeof B=="function")O=_n(B,p);else throw{code:"T1008",stack:new Error().stack,position:k.position,token:k.procedure.type==="path"?k.procedure.steps[0].value:k.procedure.value};return O}function li(k,L,w){if(typeof k>"u")return L;var O=k.validate(L,w);return O}function*Je(k,L){var w,O=Ge(k.environment);return k.arguments.forEach(function(p,E){O.bind(p.value,L[E])}),typeof k.body=="function"?w=yield*En(k.body,O):w=yield*q(k.body,k.input,O),w}function ii(k,L){var w=Ge(k.environment),O=[];k.arguments.forEach(function(E,C){var B=L[C];B&&B.type==="operator"&&B.value==="?"?O.push(E):w.bind(E.value,B)});var p={_jsonata_lambda:!0,input:k.input,environment:w,arguments:O,body:k.body};return p}function _n(k,L){var w=gs(k);w=w.map(function(C){return"$"+C.trim()});var O="function("+w.join(", ")+"){ _ }",p=_(O);p.body=k;var E=ii(p,L);return E}function*En(k,L){var w=gs(k),O=w.map(function(C){return L.lookup(C.trim())}),p={environment:L},E=k.apply(p,O);return $(E)&&(E=yield*E),E}function gs(k){var L=k.toString(),w=/\(([^)]*)\)/.exec(L)[1],O=w.split(",");return O}function kt(k,L){var w={_jsonata_function:!0,implementation:k};return typeof L<"u"&&(w.signature=m(L)),w}function*Fs(k,L){if(!(typeof k>"u")){var w=this.input;typeof L<"u"&&(w=L,Array.isArray(w)&&!H(w)&&(w=R(w),w.outerWrapper=!0));try{var O=_(k,!1)}catch(E){throw Hi(E),{stack:new Error().stack,code:"D3120",value:E.message,error:E}}try{var p=yield*q(O,w,this.environment)}catch(E){throw Hi(E),{stack:new Error().stack,code:"D3121",value:E.message,error:E}}return p}}function Ts(k){if(!(typeof k>"u"))return JSON.parse(l.string(k))}function Ge(k){var L={};return{bind:function(w,O){L[w]=O},lookup:function(w){var O;return L.hasOwnProperty(w)?O=L[w]:k&&(O=k.lookup(w)),O},timestamp:k?k.timestamp:null,async:k?k.async:!1,global:k?k.global:{ancestry:[null]}}}F.bind("sum",kt(l.sum,"<a<n>:n>")),F.bind("count",kt(l.count,"<a:n>")),F.bind("max",kt(l.max,"<a<n>:n>")),F.bind("min",kt(l.min,"<a<n>:n>")),F.bind("average",kt(l.average,"<a<n>:n>")),F.bind("string",kt(l.string,"<x-b?:s>")),F.bind("substring",kt(l.substring,"<s-nn?:s>")),F.bind("substringBefore",kt(l.substringBefore,"<s-s:s>")),F.bind("substringAfter",kt(l.substringAfter,"<s-s:s>")),F.bind("lowercase",kt(l.lowercase,"<s-:s>")),F.bind("uppercase",kt(l.uppercase,"<s-:s>")),F.bind("length",kt(l.length,"<s-:n>")),F.bind("trim",kt(l.trim,"<s-:s>")),F.bind("pad",kt(l.pad,"<s-ns?:s>")),F.bind("match",kt(l.match,"<s-f<s:o>n?:a<o>>")),F.bind("contains",kt(l.contains,"<s-(sf):b>")),F.bind("replace",kt(l.replace,"<s-(sf)(sf)n?:s>")),F.bind("split",kt(l.split,"<s-(sf)n?:a<s>>")),F.bind("join",kt(l.join,"<a<s>s?:s>")),F.bind("formatNumber",kt(l.formatNumber,"<n-so?:s>")),F.bind("formatBase",kt(l.formatBase,"<n-n?:s>")),F.bind("formatInteger",kt(u.formatInteger,"<n-s:s>")),F.bind("parseInteger",kt(u.parseInteger,"<s-s:n>")),F.bind("number",kt(l.number,"<(nsb)-:n>")),F.bind("floor",kt(l.floor,"<n-:n>")),F.bind("ceil",kt(l.ceil,"<n-:n>")),F.bind("round",kt(l.round,"<n-n?:n>")),F.bind("abs",kt(l.abs,"<n-:n>")),F.bind("sqrt",kt(l.sqrt,"<n-:n>")),F.bind("power",kt(l.power,"<n-n:n>")),F.bind("random",kt(l.random,"<:n>")),F.bind("boolean",kt(l.boolean,"<x-:b>")),F.bind("not",kt(l.not,"<x-:b>")),F.bind("map",kt(l.map,"<af>")),F.bind("zip",kt(l.zip,"<a+>")),F.bind("filter",kt(l.filter,"<af>")),F.bind("single",kt(l.single,"<af?>")),F.bind("reduce",kt(l.foldLeft,"<afj?:j>")),F.bind("sift",kt(l.sift,"<o-f?:o>")),F.bind("keys",kt(l.keys,"<x-:a<s>>")),F.bind("lookup",kt(l.lookup,"<x-s:x>")),F.bind("append",kt(l.append,"<xx:a>")),F.bind("exists",kt(l.exists,"<x:b>")),F.bind("spread",kt(l.spread,"<x-:a<o>>")),F.bind("merge",kt(l.merge,"<a<o>:o>")),F.bind("reverse",kt(l.reverse,"<a:a>")),F.bind("each",kt(l.each,"<o-f:a>")),F.bind("error",kt(l.error,"<s?:x>")),F.bind("assert",kt(l.assert,"<bs?:x>")),F.bind("type",kt(l.type,"<x:s>")),F.bind("sort",kt(l.sort,"<af?:a>")),F.bind("shuffle",kt(l.shuffle,"<a:a>")),F.bind("distinct",kt(l.distinct,"<x:x>")),F.bind("base64encode",kt(l.base64encode,"<s-:s>")),F.bind("base64decode",kt(l.base64decode,"<s-:s>")),F.bind("encodeUrlComponent",kt(l.encodeUrlComponent,"<s-:s>")),F.bind("encodeUrl",kt(l.encodeUrl,"<s-:s>")),F.bind("decodeUrlComponent",kt(l.decodeUrlComponent,"<s-:s>")),F.bind("decodeUrl",kt(l.decodeUrl,"<s-:s>")),F.bind("eval",kt(Fs,"<sx?:x>")),F.bind("toMillis",kt(u.toMillis,"<s-s?:n>")),F.bind("fromMillis",kt(u.fromMillis,"<n-s?s?:s>")),F.bind("clone",kt(Ts,"<(oa)-:o>"));var xs={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Hi(k){var L=xs[k.code];if(typeof L<"u"){var w=L.replace(/\{\{\{([^}]+)}}}/g,function(){return k[arguments[1]]});w=w.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(k[arguments[1]])}),k.message=w}}function It(k,L){var w,O;try{w=_(k,L&&L.recover),O=w.errors,delete w.errors}catch(C){throw Hi(C),C}var p=Ge(F),E=new Date;return p.bind("now",kt(function(C,B){return u.fromMillis(E.getTime(),C,B)},"<s?s?:s>")),p.bind("millis",kt(function(){return E.getTime()},"<:n>")),L&&L.RegexEngine?It.RegexEngine=L.RegexEngine:It.RegexEngine=RegExp,{evaluate:function(C,B,W){if(typeof O<"u"){var Q={code:"S0500",position:0};throw Hi(Q),Q}if(typeof B<"u"){var ft;ft=Ge(p);for(var wt in B)ft.bind(wt,B[wt])}else ft=p;ft.bind("$",C),E=new Date,ft.timestamp=E,Array.isArray(C)&&!H(C)&&(C=R(C),C.outerWrapper=!0);var Kt,ne;if(typeof W=="function"){ft.async=!0;var de=function(Te){Hi(Te),W(Te,null)},_e=function(Te){Kt=ne.next(Te),Kt.done?W(null,Kt.value):Kt.value.then(_e).catch(de)};ne=q(w,C,ft),Kt=ne.next(),Kt.value.then(_e).catch(de)}else try{for(ne=q(w,C,ft),Kt=ne.next();!Kt.done;)Kt=ne.next(Kt.value);return Kt.value}catch(Te){throw Hi(Te),Te}},assign:function(C,B){p.bind(C,B)},registerFunction:function(C,B,W){var Q=kt(B,W);p.bind(C,Q)},ast:function(){return w},errors:function(){return O}}}return It.parser=_,It}();r.exports=I},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(s,r,h){var u=s("./signature");let l=(()=>{"use strict";var f={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},_={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},m=function(v){var x=0,N=v.length,R=function(at,$){var z={type:at,value:$,position:x};return z},H=function(){for(var at=x,$=0,z,ht;x<N;){var F=v.charAt(x);if(F==="/"&&v.charAt(x-1)!=="\\"&&$===0){if(z=v.substring(at,x),z==="")throw{code:"S0301",stack:new Error().stack,position:x};for(x++,F=v.charAt(x),at=x;F==="i"||F==="m";)x++,F=v.charAt(x);return ht=v.substring(at,x)+"g",new RegExp(z,ht)}(F==="("||F==="["||F==="{")&&v.charAt(x-1)!=="\\"&&$++,(F===")"||F==="]"||F==="}")&&v.charAt(x-1)!=="\\"&&$--,x++}throw{code:"S0302",stack:new Error().stack,position:x}},X=function(at){if(x>=N)return null;for(var $=v.charAt(x);x<N&&` 	
\r\v`.indexOf($)>-1;)x++,$=v.charAt(x);if($==="/"&&v.charAt(x+1)==="*"){var z=x;for(x+=2,$=v.charAt(x);!($==="*"&&v.charAt(x+1)==="/");)if($=v.charAt(++x),x>=N)throw{code:"S0106",stack:new Error().stack,position:z};return x+=2,$=v.charAt(x),X(at)}if(at!==!0&&$==="/")return x++,R("regex",H());if($==="."&&v.charAt(x+1)===".")return x+=2,R("operator","..");if($===":"&&v.charAt(x+1)==="=")return x+=2,R("operator",":=");if($==="!"&&v.charAt(x+1)==="=")return x+=2,R("operator","!=");if($===">"&&v.charAt(x+1)==="=")return x+=2,R("operator",">=");if($==="<"&&v.charAt(x+1)==="=")return x+=2,R("operator","<=");if($==="*"&&v.charAt(x+1)==="*")return x+=2,R("operator","**");if($==="~"&&v.charAt(x+1)===">")return x+=2,R("operator","~>");if(Object.prototype.hasOwnProperty.call(f,$))return x++,R("operator",$);if($==='"'||$==="'"){var ht=$;x++;for(var F="";x<N;){if($=v.charAt(x),$==="\\")if(x++,$=v.charAt(x),Object.prototype.hasOwnProperty.call(_,$))F+=_[$];else if($==="u"){var q=v.substr(x+1,4);if(/^[0-9a-fA-F]+$/.test(q)){var gt=parseInt(q,16);F+=String.fromCharCode(gt),x+=4}else throw{code:"S0104",stack:new Error().stack,position:x}}else throw{code:"S0103",stack:new Error().stack,position:x,token:$};else{if($===ht)return x++,R("string",F);F+=$}x++}throw{code:"S0101",stack:new Error().stack,position:x}}var nt=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,yt=nt.exec(v.substring(x));if(yt!==null){var Ht=parseFloat(yt[0]);if(!isNaN(Ht)&&isFinite(Ht))return x+=yt[0].length,R("number",Ht);throw{code:"S0102",stack:new Error().stack,position:x,token:yt[0]}}var zt;if($==="`"){x++;var Bt=v.indexOf("`",x);if(Bt!==-1)return zt=v.substring(x,Bt),x=Bt+1,R("name",zt);throw x=N,{code:"S0105",stack:new Error().stack,position:x}}for(var Ct=x,Tt;;)if(Tt=v.charAt(Ct),Ct===N||` 	
\r\v`.indexOf(Tt)>-1||Object.prototype.hasOwnProperty.call(f,Tt)){if(v.charAt(x)==="$")return zt=v.substring(x+1,Ct),x=Ct,R("variable",zt);switch(zt=v.substring(x,Ct),x=Ct,zt){case"or":case"in":case"and":return R("operator",zt);case"true":return R("value",!0);case"false":return R("value",!1);case"null":return R("value",null);default:return x===N&&zt===""?null:R("name",zt)}}else Ct++};return X},I=function(v,x){var N,R,H={},X=[],at=function(){var P=[];N.id!=="(end)"&&P.push({type:N.type,value:N.value,position:N.position});for(var D=R();D!==null;)P.push(D),D=R();return P},$={nud:function(){var P={code:"S0211",token:this.value,position:this.position};if(x)return P.remaining=at(),P.type="error",X.push(P),P;throw P.stack=new Error().stack,P}},z=function(P,D){var tt=H[P];return D=D||0,tt?D>=tt.lbp&&(tt.lbp=D):(tt=Object.create($),tt.id=tt.value=P,tt.lbp=D,H[P]=tt),tt},ht=function(P){if(x){P.remaining=at(),X.push(P);var D=H["(error)"];return N=Object.create(D),N.error=P,N.type="(error)",N}else throw P.stack=new Error().stack,P},F=function(P,D){if(P&&N.id!==P){var tt;N.id==="(end)"?tt="S0203":tt="S0202";var xt={code:tt,position:N.position,token:N.value,value:P};return ht(xt)}var qt=R(D);if(qt===null)return N=H["(end)"],N.position=v.length,N;var it=qt.value,M=qt.type,G;switch(M){case"name":case"variable":G=H["(name)"];break;case"operator":if(G=H[it],!G)return ht({code:"S0204",stack:new Error().stack,position:qt.position,token:it});break;case"string":case"number":case"value":G=H["(literal)"];break;case"regex":M="regex",G=H["(regex)"];break;default:return ht({code:"S0205",stack:new Error().stack,position:qt.position,token:it})}return N=Object.create(G),N.value=it,N.type=M,N.position=qt.position,N},q=function(P){var D,tt=N;for(F(null,!0),D=tt.nud();P<N.lbp;)tt=N,F(),D=tt.led(D);return D},gt=function(P){var D=z(P,0);D.nud=function(){return this}},nt=function(P,D,tt){var xt=D||f[P],qt=z(P,xt);return qt.led=tt||function(it){return this.lhs=it,this.rhs=q(xt),this.type="binary",this},qt},yt=function(P,D,tt){var xt=z(P,D);return xt.led=tt,xt},Ht=function(P,D){var tt=z(P);return tt.nud=D||function(){return this.expression=q(70),this.type="unary",this},tt};gt("(end)"),gt("(name)"),gt("(literal)"),gt("(regex)"),z(":"),z(";"),z(","),z(")"),z("]"),z("}"),z(".."),nt("."),nt("+"),nt("-"),nt("*"),nt("/"),nt("%"),nt("="),nt("<"),nt(">"),nt("!="),nt("<="),nt(">="),nt("&"),nt("and"),nt("or"),nt("in"),gt("and"),gt("or"),gt("in"),Ht("-"),nt("~>"),yt("(error)",10,function(P){return this.lhs=P,this.error=N.error,this.remaining=at(),this.type="error",this}),Ht("*",function(){return this.type="wildcard",this}),Ht("**",function(){return this.type="descendant",this}),Ht("%",function(){return this.type="parent",this}),nt("(",f["("],function(P){if(this.procedure=P,this.type="function",this.arguments=[],N.id!==")")for(;N.type==="operator"&&N.id==="?"?(this.type="partial",this.arguments.push(N),F("?")):this.arguments.push(q(0)),N.id===",";)F(",");if(F(")",!0),P.type==="name"&&(P.value==="function"||P.value==="\u03BB")){if(this.arguments.forEach(function(it,M){if(it.type!=="variable")return ht({code:"S0208",stack:new Error().stack,position:it.position,token:it.value,value:M+1})}),this.type="lambda",N.id==="<"){for(var D=N.position,tt=1,xt="<";tt>0&&N.id!=="{"&&N.id!=="(end)";){var qt=F();qt.id===">"?tt--:qt.id==="<"&&tt++,xt+=qt.value}F(">");try{this.signature=u(xt)}catch(it){return it.position=D+it.offset,ht(it)}}F("{"),this.body=q(0),F("}")}return this}),Ht("(",function(){for(var P=[];N.id!==")"&&(P.push(q(0)),N.id===";");)F(";");return F(")",!0),this.type="block",this.expressions=P,this}),Ht("[",function(){var P=[];if(N.id!=="]")for(;;){var D=q(0);if(N.id===".."){var tt={type:"binary",value:"..",position:N.position,lhs:D};F(".."),tt.rhs=q(0),D=tt}if(P.push(D),N.id!==",")break;F(",")}return F("]",!0),this.expressions=P,this.type="unary",this}),nt("[",f["["],function(P){if(N.id==="]"){for(var D=P;D&&D.type==="binary"&&D.value==="[";)D=D.lhs;return D.keepArray=!0,F("]"),P}else return this.lhs=P,this.rhs=q(f["]"]),this.type="binary",F("]",!0),this}),nt("^",f["^"],function(P){F("(");for(var D=[];;){var tt={descending:!1};if(N.id==="<"?F("<"):N.id===">"&&(tt.descending=!0,F(">")),tt.expression=q(0),D.push(tt),N.id!==",")break;F(",")}return F(")"),this.lhs=P,this.rhs=D,this.type="binary",this});var zt=function(P){var D=[];if(N.id!=="}")for(;;){var tt=q(0);F(":");var xt=q(0);if(D.push([tt,xt]),N.id!==",")break;F(",")}return F("}",!0),typeof P>"u"?(this.lhs=D,this.type="unary"):(this.lhs=P,this.rhs=D,this.type="binary"),this};Ht("{",zt),nt("{",f["{"],zt),yt(":=",f[":="],function(P){return P.type!=="variable"?ht({code:"S0212",stack:new Error().stack,position:P.position,token:P.value}):(this.lhs=P,this.rhs=q(f[":="]-1),this.type="binary",this)}),nt("@",f["@"],function(P){return this.lhs=P,this.rhs=q(f["@"]),this.rhs.type!=="variable"?ht({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),nt("#",f["#"],function(P){return this.lhs=P,this.rhs=q(f["#"]),this.rhs.type!=="variable"?ht({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),nt("?",f["?"],function(P){return this.type="condition",this.condition=P,this.then=q(0),N.id===":"&&(F(":"),this.else=q(0)),this}),Ht("|",function(){return this.type="transform",this.pattern=q(0),F("|"),this.update=q(0),N.id===","&&(F(","),this.delete=q(0)),F("|"),this});var Bt=function(P){var D;if(P.type==="function"&&!P.predicate){var tt={type:"lambda",thunk:!0,arguments:[],position:P.position};tt.body=P,D=tt}else if(P.type==="condition")P.then=Bt(P.then),typeof P.else<"u"&&(P.else=Bt(P.else)),D=P;else if(P.type==="block"){var xt=P.expressions.length;xt>0&&(P.expressions[xt-1]=Bt(P.expressions[xt-1])),D=P}else D=P;return D},Ct=0,Tt=0,Ut=[],_t=function(P,D){switch(P.type){case"name":case"wildcard":D.level--,D.level===0&&(typeof P.ancestor>"u"||(Ut[D.index].slot.label=P.ancestor.label),P.ancestor=D,P.tuple=!0);break;case"parent":D.level++;break;case"block":P.expressions.length>0&&(P.tuple=!0,D=_t(P.expressions[P.expressions.length-1],D));break;case"path":P.tuple=!0;var tt=P.steps.length-1;for(D=_t(P.steps[tt--],D);D.level>0&&tt>=0;)D=_t(P.steps[tt--],D);break;default:throw{code:"S0217",token:P.type,position:P.position}}return D},ct=function(P,D){if(typeof D.seekingParent<"u"||D.type==="parent"){var tt=typeof D.seekingParent<"u"?D.seekingParent:[];D.type==="parent"&&tt.push(D.slot),typeof P.seekingParent>"u"?P.seekingParent=tt:Array.prototype.push.apply(P.seekingParent,tt)}},fe=function(P){var D=P.steps.length-1,tt=P.steps[D],xt=typeof tt.seekingParent<"u"?tt.seekingParent:[];tt.type==="parent"&&xt.push(tt.slot);for(var qt=0;qt<xt.length;qt++){var it=xt[qt];for(D=P.steps.length-2;it.level>0;){if(D<0){typeof P.seekingParent>"u"?P.seekingParent=[it]:P.seekingParent.push(it);break}for(var M=P.steps[D--];D>=0&&M.focus&&P.steps[D].focus;)M=P.steps[D--];it=_t(M,it)}}},Pt=function(P){var D;switch(P.type){case"binary":switch(P.value){case".":var tt=Pt(P.lhs);tt.type==="path"?D=tt:D={type:"path",steps:[tt]},tt.type==="parent"&&(D.seekingParent=[tt.slot]);var xt=Pt(P.rhs);xt.type==="function"&&xt.procedure.type==="path"&&xt.procedure.steps.length===1&&xt.procedure.steps[0].type==="name"&&D.steps[D.steps.length-1].type==="function"&&(D.steps[D.steps.length-1].nextFunction=xt.procedure.steps[0].value),xt.type==="path"?Array.prototype.push.apply(D.steps,xt.steps):(typeof xt.predicate<"u"&&(xt.stages=xt.predicate,delete xt.predicate),D.steps.push(xt)),D.steps.filter(function(ut){if(ut.type==="number"||ut.type==="value")throw{code:"S0213",stack:new Error().stack,position:ut.position,value:ut.value};return ut.type==="string"}).forEach(function(ut){ut.type="name"}),D.steps.filter(function(ut){return ut.keepArray===!0}).length>0&&(D.keepSingletonArray=!0);var qt=D.steps[0];qt.type==="unary"&&qt.value==="["&&(qt.consarray=!0);var it=D.steps[D.steps.length-1];it.type==="unary"&&it.value==="["&&(it.consarray=!0),fe(D);break;case"[":D=Pt(P.lhs);var M=D,G="predicate";if(D.type==="path"&&(M=D.steps[D.steps.length-1],G="stages"),typeof M.group<"u")throw{code:"S0209",stack:new Error().stack,position:P.position};typeof M[G]>"u"&&(M[G]=[]);var U=Pt(P.rhs);typeof U.seekingParent<"u"&&(U.seekingParent.forEach(ut=>{ut.level===1?_t(M,ut):ut.level--}),ct(M,U)),M[G].push({type:"filter",expr:U,position:P.position});break;case"{":if(D=Pt(P.lhs),typeof D.group<"u")throw{code:"S0210",stack:new Error().stack,position:P.position};D.group={lhs:P.rhs.map(function(ut){return[Pt(ut[0]),Pt(ut[1])]}),position:P.position};break;case"^":D=Pt(P.lhs),D.type!=="path"&&(D={type:"path",steps:[D]});var Z={type:"sort",position:P.position};Z.terms=P.rhs.map(function(ut){var Nt=Pt(ut.expression);return ct(Z,Nt),{descending:ut.descending,expression:Nt}}),D.steps.push(Z),fe(D);break;case":=":D={type:"bind",value:P.value,position:P.position},D.lhs=Pt(P.lhs),D.rhs=Pt(P.rhs),ct(D,D.rhs);break;case"@":if(D=Pt(P.lhs),M=D,D.type==="path"&&(M=D.steps[D.steps.length-1]),typeof M.stages<"u"||typeof M.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:P.position};if(M.type==="sort")throw{code:"S0216",stack:new Error().stack,position:P.position};P.keepArray&&(M.keepArray=!0),M.focus=P.rhs.value,M.tuple=!0;break;case"#":D=Pt(P.lhs),M=D,D.type==="path"?M=D.steps[D.steps.length-1]:(D={type:"path",steps:[D]},typeof M.predicate<"u"&&(M.stages=M.predicate,delete M.predicate)),typeof M.stages>"u"?M.index=P.rhs.value:M.stages.push({type:"index",value:P.rhs.value,position:P.position}),M.tuple=!0;break;case"~>":D={type:"apply",value:P.value,position:P.position},D.lhs=Pt(P.lhs),D.rhs=Pt(P.rhs);break;default:D={type:P.type,value:P.value,position:P.position},D.lhs=Pt(P.lhs),D.rhs=Pt(P.rhs),ct(D,D.lhs),ct(D,D.rhs)}break;case"unary":D={type:P.type,value:P.value,position:P.position},P.value==="["?D.expressions=P.expressions.map(function(ut){var Nt=Pt(ut);return ct(D,Nt),Nt}):P.value==="{"?D.lhs=P.lhs.map(function(ut){var Nt=Pt(ut[0]);ct(D,Nt);var Jt=Pt(ut[1]);return ct(D,Jt),[Nt,Jt]}):(D.expression=Pt(P.expression),P.value==="-"&&D.expression.type==="number"?(D=D.expression,D.value=-D.value):ct(D,D.expression));break;case"function":case"partial":D={type:P.type,name:P.name,value:P.value,position:P.position},D.arguments=P.arguments.map(function(ut){var Nt=Pt(ut);return ct(D,Nt),Nt}),D.procedure=Pt(P.procedure);break;case"lambda":D={type:P.type,arguments:P.arguments,signature:P.signature,position:P.position};var lt=Pt(P.body);D.body=Bt(lt);break;case"condition":D={type:P.type,position:P.position},D.condition=Pt(P.condition),ct(D,D.condition),D.then=Pt(P.then),ct(D,D.then),typeof P.else<"u"&&(D.else=Pt(P.else),ct(D,D.else));break;case"transform":D={type:P.type,position:P.position},D.pattern=Pt(P.pattern),D.update=Pt(P.update),typeof P.delete<"u"&&(D.delete=Pt(P.delete));break;case"block":D={type:P.type,position:P.position},D.expressions=P.expressions.map(function(ut){var Nt=Pt(ut);return ct(D,Nt),(Nt.consarray||Nt.type==="path"&&Nt.steps[0].consarray)&&(D.consarray=!0),Nt});break;case"name":D={type:"path",steps:[P]},P.keepArray&&(D.keepSingletonArray=!0);break;case"parent":D={type:"parent",slot:{label:"!"+Ct++,level:1,index:Tt++}},Ut.push(D);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":D=P;break;case"operator":if(P.value==="and"||P.value==="or"||P.value==="in")P.type="name",D=Pt(P);else if(P.value==="?")D=P;else throw{code:"S0201",stack:new Error().stack,position:P.position,token:P.value};break;case"error":D=P,P.lhs&&(D=Pt(P.lhs));break;default:var st="S0206";P.id==="(end)"&&(st="S0207");var j={code:st,position:P.position,token:P.value};if(x)return X.push(j),{type:"error",error:j};throw j.stack=new Error().stack,j}return P.keepArray&&(D.keepArray=!0),D};R=m(v),F();var ae=q(0);if(N.id!=="(end)"){var pe={code:"S0201",position:N.position,token:N.value};ht(pe)}if(ae=Pt(ae),ae.type==="parent"||typeof ae.seekingParent<"u")throw{code:"S0217",token:ae.type,position:ae.position};return X.length>0&&(ae.errors=X),ae};return I})();r.exports=l},{"./signature":5}],5:[function(s,r,h){var u=s("./utils");let l=(()=>{"use strict";var f={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function _(m){for(var I=1,v=[],x={},N=x;I<m.length;){var R=m.charAt(I);if(R===":")break;var H=function(){v.push(x),N=x,x={}},X=function(nt,yt,Ht,zt){for(var Bt=1,Ct=yt;Ct<nt.length;)if(Ct++,R=nt.charAt(Ct),R===zt){if(Bt--,Bt===0)break}else R===Ht&&Bt++;return Ct};switch(R){case"s":case"n":case"b":case"l":case"o":x.regex="["+R+"m]",x.type=R,H();break;case"a":x.regex="[asnblfom]",x.type=R,x.array=!0,H();break;case"f":x.regex="f",x.type=R,H();break;case"j":x.regex="[asnblom]",x.type=R,H();break;case"x":x.regex="[asnblfom]",x.type=R,H();break;case"-":N.context=!0,N.contextRegex=new RegExp(N.regex),N.regex+="?";break;case"?":case"+":N.regex+=R;break;case"(":var at=X(m,I,"(",")"),$=m.substring(I+1,at);if($.indexOf("<")===-1)x.regex="["+$+"m]";else throw{code:"S0402",stack:new Error().stack,value:$,offset:I};x.type="("+$+")",I=at,H();break;case"<":if(N.type==="a"||N.type==="f"){var z=X(m,I,"<",">");N.subtype=m.substring(I+1,z),I=z}else throw{code:"S0401",stack:new Error().stack,value:N.type,offset:I};break}I++}var ht="^"+v.map(function(nt){return"("+nt.regex+")"}).join("")+"$",F=new RegExp(ht),q=function(nt){var yt;if(u.isFunction(nt))yt="f";else{var Ht=typeof nt;switch(Ht){case"string":yt="s";break;case"number":yt="n";break;case"boolean":yt="b";break;case"object":nt===null?yt="l":Array.isArray(nt)?yt="a":yt="o";break;case"undefined":default:yt="m"}}return yt},gt=function(nt,yt){for(var Ht="^",zt=0,Bt=0;Bt<v.length;Bt++){Ht+=v[Bt].regex;var Ct=yt.match(Ht);if(Ct===null)throw{code:"T0410",stack:new Error().stack,value:nt[zt],index:zt+1};zt=Ct[0].length}throw{code:"T0410",stack:new Error().stack,value:nt[zt],index:zt+1}};return{definition:m,validate:function(nt,yt){var Ht="";nt.forEach(function(Tt){Ht+=q(Tt)});var zt=F.exec(Ht);if(zt){var Bt=[],Ct=0;return v.forEach(function(Tt,Ut){var _t=nt[Ct],ct=zt[Ut+1];if(ct==="")if(Tt.context&&Tt.contextRegex){var fe=q(yt);if(Tt.contextRegex.test(fe))Bt.push(yt);else throw{code:"T0411",stack:new Error().stack,value:yt,index:Ct+1}}else Bt.push(_t),Ct++;else ct.split("").forEach(function(Pt){if(Tt.type==="a"){if(Pt==="m")_t=void 0;else{_t=nt[Ct];var ae=!0;if(typeof Tt.subtype<"u"){if(Pt!=="a"&&ct!==Tt.subtype)ae=!1;else if(Pt==="a"&&_t.length>0){var pe=q(_t[0]);if(pe!==Tt.subtype.charAt(0))ae=!1;else{var P=_t.filter(function(D){return q(D)!==pe});ae=P.length===0}}}if(!ae)throw{code:"T0412",stack:new Error().stack,value:_t,index:Ct+1,type:f[Tt.subtype]};Pt!=="a"&&(_t=[_t])}Bt.push(_t),Ct++}else Bt.push(_t),Ct++})}),Bt}gt(nt,Ht)}}}return _})();r.exports=l},{"./utils":6}],6:[function(s,r,h){let u=(()=>{"use strict";function l(z){var ht=!1;if(typeof z=="number"&&(ht=!isNaN(z),ht&&!isFinite(z)))throw{code:"D1001",value:z,stack:new Error().stack};return ht}function f(z){var ht=!1;return Array.isArray(z)&&(ht=z.filter(function(F){return typeof F!="string"}).length===0),ht}function _(z){var ht=!1;return Array.isArray(z)&&(ht=z.filter(function(F){return!l(F)}).length===0),ht}function m(){var z=[];return z.sequence=!0,arguments.length===1&&z.push(arguments[0]),z}function I(z){return z.sequence===!0&&Array.isArray(z)}function v(z){return z&&(z._jsonata_function===!0||z._jsonata_lambda===!0)||typeof z=="function"}function x(z){var ht=typeof z.arity=="number"?z.arity:typeof z.implementation=="function"?z.implementation.length:typeof z.length=="number"?z.length:z.arguments.length;return ht}function N(z){return z&&z._jsonata_lambda===!0}var R=typeof Symbol=="function"?Symbol:{},H=R.iterator||"@@iterator";function X(z){return typeof z=="object"&&z!==null&&H in z&&"next"in z&&typeof z.next=="function"}function at(z,ht){if(z===ht)return!0;if(typeof z=="object"&&typeof ht=="object"&&z!==null&&ht!==null){if(Array.isArray(z)&&Array.isArray(ht)){if(z.length!==ht.length)return!1;for(var F=0;F<z.length;F++)if(!at(z[F],ht[F]))return!1;return!0}var q=Object.getOwnPropertyNames(z),gt=Object.getOwnPropertyNames(ht);if(q.length!==gt.length)return!1;for(q=q.sort(),gt=gt.sort(),F=0;F<q.length;F++)if(q[F]!==gt[F])return!1;for(F=0;F<q.length;F++){var nt=q[F];if(!at(z[nt],ht[nt]))return!1}return!0}return!1}function $(z){var ht=[];for(let F of z)ht.push(F);return ht}return{isNumeric:l,isArrayOfStrings:f,isArrayOfNumbers:_,createSequence:m,isSequence:I,isFunction:v,isLambda:N,isIterable:X,getFunctionArity:x,isDeepEqual:at,stringToArray:$}})();r.exports=u},{}]},{},[3])(3)})});var Ch=V(Rn=>{"use strict";var GI=Rn&&Rn.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.locEnd=Rn.locStart=Rn.parse=void 0;var YI=GI(zf()),jI=i=>{try{let t=[],e=i.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let r of e){let h=r.index;if(h===void 0)continue;let u=r[1];!u||t.push({position:h,value:u.trim()})}let s=(0,YI.default)(i).ast();return Object.assign(Object.assign({},s),{jsonataComments:t})}catch(t){let e=t,r=["code","position","token"].filter(u=>e[u]!==void 0).map(u=>`${u}: ${e[u]}`),h=[e.message,...r].join(", ");throw new Error(h)}};Rn.parse=jI;var QI=i=>i.position;Rn.locStart=QI;var zI=()=>0;Rn.locEnd=zI});var Zf=V(Bn=>{"use strict";var KI=Bn&&Bn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),$I=Bn&&Bn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),JI=Bn&&Bn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&KI(t,i,e);return $I(t,i),t};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.print=void 0;var XI=JI(require("prettier")),Kf=[],Jo=-1,ZI=(i,t,e)=>{var s,r;let h=i.getValue();"jsonataComments"in h&&(Jo=-1,Kf=h.jsonataComments);let u=(r=h.type==="path"?(s=h.steps[0])===null||s===void 0?void 0:s.position:h.position)!==null&&r!==void 0?r:Jo,l=Kf.filter(m=>m.position>Jo&&m.position<u);Jo=u;let f=l.map(eA),_=tA(h,i,t,e);return f.length>0?Pe([f,_]):_};Bn.print=ZI;var tA=(i,...t)=>{if(i.type==="binary")return iA(i,...t);if(i.type==="function")return $f(i,...t);if(i.type==="partial")return $f(i,...t);if(i.type==="variable")return aA(i,...t);if(i.type==="wildcard")return lA(i,...t);if(i.type==="descendant")return uA(i,...t);if(i.type==="operator")return hA(i,...t);if(i.type==="number")return sA(i,...t);if(i.type==="string")return rA(i,...t);if(i.type==="name")return nA(i,...t);if(i.type==="filter")return cA(i,...t);if(i.type==="bind")return fA(i,...t);if(i.type==="lambda")return dA(i,...t);if(i.type==="condition")return pA(i,...t);if(i.type==="value")return _A(i,...t);if(i.type==="block")return gA(i,...t);if(i.type==="path")return oA(i,...t);if(i.type==="apply")return TA(i,...t);if(i.type==="sort")return xA(i,...t);if(i.type==="unary")return EA(i,...t);if(i.type==="parent")return NA(i,...t);if(i.type==="regex")return AA(i,...t);throw new Error(`Unknown node type: ${i.type}`)},{group:Pe,indent:Ui,join:ir,line:wn,hardline:Ps,breakParent:Nh,softline:Fn}=XI.doc.builders,eA=i=>Pe(["/* ",i.value," */",Ps]),iA=(i,t,e,s)=>i.value===".."?Pe([s("lhs"),Ui([Fn,i.value,s("rhs")])]):Pe([s("lhs"),Ui([wn,i.value," ",s("rhs")])]),nA=(i,t,e,s)=>Pe([SA(i.value),$i(i,t,e,s),sn(i),rn(i),Xo(i,t,e,s),zi(i,t,e,s),Ki(i)]),sA=(i,t,e,s)=>Pe([JSON.stringify(i.value),$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),rA=(i,t,e,s)=>Pe([JSON.stringify(i.value),$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),oA=(i,t,e,s)=>{let r=i.steps.flatMap((h,u)=>u===0?s(["steps",u]):h.type==="sort"?Ui(["^",s(["steps",u])]):Ui([Fn,".",s(["steps",u])]));return Pe([...r,$i(i,t,e,s)])},$f=(i,t,e,s)=>Pe([s("procedure"),"(",Jf(i,t,e,s),")",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),Jf=(i,t,e,s)=>{var r;if(!(!((r=i.arguments)===null||r===void 0)&&r.length))return"";if(i.arguments.length===1)return s(["arguments",0]);let h=ir([",",wn],t.map(s,"arguments"));return[Ui([Fn,h]),Fn]},aA=(i,t,e,s)=>Pe(["$",i.value,$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i),Xo(i,t,e,s)]),hA=i=>i.value,lA=i=>i.value,uA=i=>i.value,cA=(i,t,e,s)=>Pe(["[",Ui([Fn,s("expr")]),Fn,"]"]),fA=(i,t,e,s)=>Pe([s("lhs")," ",i.value," ",s("rhs")]),dA=(i,t,e,s)=>i.thunk?s("body"):Pe(["function(",Jf(i,t,e,s),") {",Ui([wn,s("body")]),wn,"}",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),pA=(i,t,e,s)=>{let r=t.getParentNode(),u=r?.type==="condition"?[Ps,Nh]:wn;return Pe([s("condition"),Ui([u,"? ",s("then")]),i.else?Ui([u,": ",s("else")]):""])},_A=(i,t,e,s)=>Pe([mA(i,t,e,s),$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),mA=i=>i.value===null?"null":i.value===!1?"false":i.value===!0?"true":JSON.stringify(i.value),gA=(i,t,e,s)=>{if(i.expressions.length===0)return Pe(["()",zi(i,t,e,s),Ki(i)]);if(i.expressions.length===1)return Pe(["(",s(["expressions",0]),")",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i),Xo(i,t,e,s)]);let r=ir([";",Ps],t.map(s,"expressions"));return Pe(["(",Ui([Ps,r]),Ps,")",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)])},TA=(i,t,e,s)=>Pe([s("lhs"),Ui([wn,i.value," ",s("rhs")])]),xA=(i,t,e,s)=>{let r=i.terms.map((u,l)=>[kA(u),s(["terms",l,"expression"])]),h=ir([",",wn],r);return Pe(["(",Ui([Fn,h]),Fn,")"])},kA=i=>i.descending?">":"<",EA=(i,t,e,s)=>{if(i.value==="{")return vA(i,t,e,s);if(i.value==="[")return bA(i,t,e,s);if(i.value==="-")return CA(i,t,e,s);throw new Error("Unhandled unary node "+i.value)},vA=(i,t,e,s)=>Pe(["{",yA(i,t,e,s),"}",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)]),yA=(i,t,e,s)=>{if(i.lhs.length===0)return"";let r=i.lhs.map((f,_)=>Pe([s(["lhs",_,0]),": ",s(["lhs",_,1])])),u=i.lhs.some(f=>Xf(f[1]))?[Ps,Nh]:wn,l=ir([",",u],r);return[Ui([u,l]),u]},Xf=i=>{if(i.type!=="unary")return!1;if(i.value==="["||i.value==="{")return!0},bA=(i,t,e,s)=>{let r=ir([",",wn],t.map(s,"expressions"));return Pe(["[",Ui([Fn,r]),Fn,"]",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)])},CA=(i,t,e,s)=>Pe(["-",s("expression")]),NA=(i,t,e,s)=>Pe(["%",$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i),Xo(i,t,e,s)]),IA=["i","m"],AA=(i,t,e,s)=>{let r=IA.filter(h=>i.value.flags.includes(h)).join("");return Pe([`/${i.value.source}/${r}`,$i(i,t,e,s),sn(i),rn(i),zi(i,t,e,s),Ki(i)])},sn=i=>i.focus?"@$"+i.focus:"",rn=i=>i.index?"#$"+i.index:"",zi=(i,t,e,s)=>i.predicate?t.map(s,"predicate"):"",Xo=(i,t,e,s)=>i.stages?t.map(s,"stages"):"",Ki=i=>i.keepArray?"[]":"",$i=(i,t,e,s)=>{if(i.group===void 0)return"";if(i.group.lhs.length===0)return"{}";let r=i.group.lhs.map((f,_)=>Pe([s(["group","lhs",_,0]),": ",s(["group","lhs",_,1])])),u=i.group.lhs.some(f=>Xf(f[1]))?[Ps,Nh]:wn,l=ir([",",u],r);return Pe(["{",Ui([u,l]),u,"}"])},SA=i=>i.startsWith("`")&&i.endsWith("`")?i:i.startsWith('"')&&i.endsWith('"')?`\`${i.slice(1,-1)}\``:/\s/.test(i)?`\`${i}\``:["null","false","true"].includes(i)?`\`${i}\``:/^\d+/.test(i)?`\`${i}\``:/[^a-zA-Z_[\]\d]/.test(i)?`\`${i}\``:i});var td=V(Ai=>{"use strict";Object.defineProperty(Ai,"__esModule",{value:!0});Ai.printers=Ai.parsers=Ai.languages=Ai.AST_FORMAT_NAME=Ai.AST_PARSER_NAME=void 0;var Ih=Ch(),OA=Zf();Ai.AST_PARSER_NAME="JSONata";Ai.AST_FORMAT_NAME="JSONataASTNode";Ai.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[Ai.AST_PARSER_NAME]}];Ai.parsers={[Ai.AST_PARSER_NAME]:{astFormat:Ai.AST_FORMAT_NAME,parse:Ih.parse,locStart:Ih.locStart,locEnd:Ih.locEnd}};Ai.printers={[Ai.AST_FORMAT_NAME]:{print:OA.print}}});var sd=V(pn=>{"use strict";var PA=pn&&pn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),LA=pn&&pn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),id=pn&&pn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&PA(t,i,e);return LA(t,i),t};Object.defineProperty(pn,"__esModule",{value:!0});pn.serializeJsonata=pn.formatJsonata=void 0;var nr=id(td()),Zo=id(require("prettier")),ed=Ch();function DA(i,t){return nd(),Zo.format(i,Object.assign({parser:nr.AST_PARSER_NAME,plugins:[nr],printWidth:150,tabWidth:2,useTabs:!1},t))}pn.formatJsonata=DA;function RA(i,t){let e=wA(i);return nd(),Zo.format("ignore text input",Object.assign({parser:nr.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}pn.serializeJsonata=RA;var wA=i=>Object.assign(Object.assign({},nr),{parsers:{[nr.AST_PARSER_NAME]:{astFormat:nr.AST_FORMAT_NAME,parse:()=>i,locStart:ed.locStart,locEnd:ed.locEnd}}});function nd(){"clearConfigCache"in Zo&&Zo.clearConfigCache()}});function rd(i){Oh=i}function od(){return FA}function ad(i){if(Oh!=null)return Oh;let t=MA(i);if(t==null||Ls.existsSync(t)==!1)return Ar;let e=Ls.readFileSync(t,{encoding:"utf8"});try{let s=JSON.parse(e),r=BA(s);if(r.useLaravelPint){if(r.pintCommand.length==0){let h=t.substring(0,t.length-Sh.length)+"/vendor/bin/pint";Ls.existsSync(h)&&(r.pintCommand=`php ${h} {file}`)}if(r.pintTempDirectory.trim().length==0&&(r.pintTempDirectory=__dirname+"/_temp/"),r.pintCacheDirectory.trim().length==0&&(r.pintCacheDirectory=__dirname+"/_cache/"),r.pintTempDirectory.trim().length>0&&(r.pintTempDirectory=Ah(r.pintTempDirectory.trim())),r.pintCacheDirectory.trim().length>0&&(r.pintCacheDirectory=Ah(r.pintCacheDirectory.trim())),r.pintConfigPath.trim().length>0)r.pintConfigPath=Ah(r.pintConfigPath.trim());else{let h=t.substring(0,t.length-Sh.length)+"/pint.json";Ls.existsSync(h)&&(r.pintConfigPath=h)}}return r}catch(s){console.log(s)}return Ar}function BA(i){let t=Ir,e=0,s=1,r=4,h=!0,u=!0,l=!0,f=[],_=[],m=null,I="block",v=!1,x="",N="",R="",H=!0,X="",at=er();return typeof i.ignoreDirectives!="undefined"&&i.ignoreDirectives!==null&&(t=i.ignoreDirectives),typeof i.spacesAfterDirective!="undefined"&&i.spacesAfterDirective!==null&&(e=i.spacesAfterDirective),typeof i.spacesAfterControlDirective!="undefined"&&i.spacesAfterControlDirective!==null&&(s=i.spacesAfterControlDirective),typeof i.tabSize!="undefined"&&i.tabSize!==null&&(r=i.tabSize),typeof i.formatDirectivePhpParameters!="undefined"&&i.formatDirectivePhpParameters!==null&&(h=i.formatDirectivePhpParameters),typeof i.formatDirectiveJsonParameters!="undefined"&&i.formatDirectiveJsonParameters!==null&&(u=i.formatDirectiveJsonParameters),typeof i.customIfs!="undefined"&&i.customIfs!==null&&(f=i.customIfs),typeof i.useLaravelPint!="undefined"&&i.useLaravelPint!==null&&(v=i.useLaravelPint),typeof i.directives!="undefined"&&i.directives!==null&&(_=i.directives),typeof i.echoStyle!="undefined"&&i.echoStyle==="inline"&&(I="inline"),typeof i.formatInsideEcho!="undefined"&&i.formatInsideEcho!==null&&(l=i.formatInsideEcho),typeof i.phpOptions!="undefined"&&(m=i.phpOptions),typeof i.pintCommand!="undefined"&&(x=i.pintCommand.trim()),typeof i.pintConfig!="undefined"&&(X=i.pintConfig.trim()),typeof i.pintTempDirectory!="undefined"&&(N=i.pintTempDirectory.trim()),typeof i.pintCacheDirectory!="undefined"&&(R=i.pintCacheDirectory.trim()),typeof i.pintCacheEnabled!="undefined"&&(H=i.pintCacheEnabled),e<0&&(e=0),s<0&&(s=1),e>3&&(e=3),s>3&&(s=3),typeof i.classStrings!="undefined"&&i.classStrings!=null&&(at=Gf(i.classStrings)),{ignoreDirectives:t,spacesAfterDirective:e,spacesAfterControlDirective:s,tabSize:r,formatDirectivePhpParameters:h,formatDirectiveJsonParameters:u,formatInsideEcho:l,customIfs:f,directives:_,phpOptions:m,echoStyle:I,useLaravelPint:v,pintCommand:x,pintCacheDirectory:R,pintTempDirectory:N,pintCacheEnabled:H,pintConfigPath:X,classStrings:at}}function Ah(i){let t=/[\\/]+/g,e=i.replace(t,"/");return e.endsWith("/")||(e+="/"),e}function MA(i){let t=Ds.dirname(i);t=="."&&(t=process.cwd());let e=t.split(Ds.sep);for(;e.length>0;){let s=e.join(Ds.sep),r=Ds.join(s,Sh);if(Ls.existsSync(r))return r;e.pop()}return null}var Ls,Ds,Sh,Ar,Oh,FA,Ph=bt(()=>{"use strict";Ls=en(require("fs")),Ds=en(require("path"));kh();xh();Qo();Sh=".blade.format.json",Ar={ignoreDirectives:[...Ir,...Vo],spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,customIfs:[],directives:[],echoStyle:"block",useLaravelPint:!1,pintCommand:"",phpOptions:{phpVersion:"8.0"},pintCacheDirectory:"",pintTempDirectory:"",pintCacheEnabled:!0,pintConfigPath:"",classStrings:er()}});function ud(){return Rh}function sr(){return ta}function Lh(i){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete i[t]}),i}function cd(){return Sr}function fd(i){return(0,ld.formatJsonata)(i,{printWidth:20})}function wh(i,t=null,e=null){return rd(t),e==null?zn.default.format(i,{parser:"blade",plugins:[hd]}):zn.default.format(i,{...e,parser:"blade",plugins:[hd]})}function dd(i,t=null,e=null,s=null){let r=__dirname+"/../../../pint/pint",h=__dirname+"/../../../pint/pint.json",u=__dirname+"/../../../_test/_cache/",l=__dirname+"/../../../_test/_temp/",f=`php ${r} {file}`;e!=null&&(f=e.pintCommand,u=e.pintCacheDirectory,l=e.pintTempDirectory,h=e.pintConfigPath);let _={...Ar,useLaravelPint:!0,pintCommand:f,pintCacheDirectory:u,pintTempDirectory:l,pintConfigPath:h};return t!=null&&(_={..._,...t,useLaravelPint:!0,pintCommand:f,pintCacheDirectory:u,pintTempDirectory:l,pintConfigPath:h}),wh(i,_,s)}function pd(){return VA}function ea(i){UA=i,Sr=Lh(Object.assign({},i,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:i.plugins})),ta=Lh(Object.assign({},i,{parser:"php",plugins:[Dh.default]})),Rh=Lh(Object.assign({},i,{parser:"php",plugins:[Dh.default],printWidth:1/0}))}function _d(i){return zn.default.format(i,{...Sr,parser:"babel",printWidth:1/0,singleQuote:!0})}function ia(i){return zn.default.format(i,{...Sr,parser:"html"})}function md(i){return zn.default.format(i,{...Sr,proseWrap:"never",parser:"html"})}function Fh(i,t,e=null){let s=i;if(e!=null&&(s=e),typeof t.phpOptions!="undefined"&&t.phpOptions!=null){let r=t.phpOptions;s={...s,...r}}else s={...s,phpVersion:"8.0"};return s}function gd(i,t,e=null){let s=Fh(Rh,t,e),r=zn.default.format(i,s).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function Td(i,t,e=null){let s=Fh(ta,t,e),r=zn.default.format(i,s).trim();return r=r.substring(5),i.endsWith(";")==!1&&r.endsWith(";")&&(r=r.substring(0,r.length-1)),r.trim()}function xd(i,t,e=null){let s=Fh(ta,t,e);return zn.default.format(i,s).trim().trim()}var zn,hd,Dh,ld,ta,Sr,Rh,UA,VA,fs=bt(()=>{"use strict";zn=en(require("prettier")),hd=en(kd()),Dh=en(jf()),ld=en(sd());Ph();VA=null});var Bh,ai,na=bt(()=>{"use strict";we();cn();In();us();cs();An();We();Bh=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return t.includes("fn(")&&t.includes("=>")}parse(t){for(this.tokens=[],this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Y.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if($e(this.cur)){let e=this.cur,s=Ri(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_ForwardSlash){Bi(this,!0);continue}if(this.cur==et.Punctuation_ForwardSlash&&this.next==et.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur!=null)if(this.cur==="f"&&this.next=="n")if(Y.ctypePunct(this.prev)||Y.ctypeSpace(this.prev)||this.prev==null){this.currentContent.push(this.cur),this.currentContent.push(this.next),this.currentContent.push(" "),this.currentIndex+=1;continue}else this.currentContent.push(this.cur);else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new Xt;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="";return this.tokens.forEach(s=>{s instanceof Xt&&(e+=s.content)}),e}},ai=Bh;ai.instance=new Bh});var rr,Mh=bt(()=>{"use strict";we();We();cn();In();An();rr=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[];this.keyValueTokens=0;this.elements=0}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getNumberOfElements(){return this.elements}getNumberOfKeyValuePairs(){return this.keyValueTokens}getIsAssoc(){return this.elements==this.keyValueTokens}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new qe;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=Y.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!Y.ctypeSpace(this.cur)){if($e(this.cur)){let s=this.cur,r=Ri(this);this.pushChar(s),this.currentContent=this.currentContent.concat(r.value.split("")),this.pushChar(s),this.currentIndex=r.endedOn;continue}if(this.cur==et.LeftBracket){this.checkCurrentContent(),this.tokens.push(new ls);continue}else if(this.cur==et.RightBracket)this.checkCurrentContent(),this.tokens.push(new yr);else if(this.cur==et.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new Ks),this.currentContent=[];else if(this.cur==et.Punctuation_Equals&&this.next==et.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new br);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e==null||e.elements.filter(function(s){return!(s.value instanceof Ks)}).forEach(s=>{this.elements+=1,s.key!=null&&s.value!=null&&(this.keyValueTokens+=1)}),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,s)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=s==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof ls){let r=this.findEndOfArray(t.slice(e));return e+=r.length,r.shift(),r.pop(),this.createArray(r,!0)}return null}createArray(t,e){let s=new Ss;this.createdArrays.push(s);for(let r=0;r<t.length;r++){let h=t[r],u=null;if(r+1<t.length&&(u=t[r+1]),u instanceof Ks||u==null){let l=new As;l.value=h,s.elements.push(l),r+=1;continue}else if(u instanceof br){let l=t[r+2];if(l instanceof ls){let f=this.findEndOfArray(t.slice(r+2)),_=new As;r+=f.length+1,f.shift(),f.pop(),_.key=h,_.value=this.createArray(f,!1),s.elements.push(_);continue}else{let f=new As;f.key=h,f.value=l,s.elements.push(f),r+=3;continue}}else if(h instanceof ls){let l=this.findEndOfArray(t.slice(r)),f=new As;r+=l.length,l.shift(),l.pop(),f.value=this.createArray(l,!1);continue}}return s}findEndOfArray(t){let e=[],s=0;for(let r=0;r<t.length;r++){let h=t[r];if(e.push(h),h instanceof ls){s+=1;continue}else if(h instanceof yr){if(s-=1,s<=0)break;continue}}return e}}});function Ed(){ra=!1}function vd(){ra=!0}var ra,sa,Uh=bt(()=>{"use strict";We();ra=!0;sa=class{constructor(){this.attributeMapping=new Map;this.slugs=[]}makeSlug(t){let e=Y.makeSlug(t);return this.slugs.includes(e)?this.makeSlug(t+1):(this.slugs.push(e),e)}remove(t,e){let s="",r=0;for(let h=0;h<e.length;h++){let u=e[h],l=this.makeSlug(u.content.length);if(this.attributeMapping.set(l,u),h==0){let f=t.substring(0,u.startedOn);r=u.startedOn+u.content.length,s+=f,s+='"'+l+`" 
`,e.length==1&&(s+=t.substring(r))}else if(h==e.length-1){e.length==1&&(s+=t.substring(0,u.startedOn));let f=t.substring(r,u.startedOn);r=u.startedOn+u.content.length,s+=f,s+='"'+l+`" 
`,s+=t.substring(r)}else{let f=t.substring(r,u.startedOn);r=u.startedOn+u.content.length,s+=f,s+='"'+l+`" 
`}}return s}getRemovedAttributes(){return this.attributeMapping}}});var yd,or,oa,bd=bt(()=>{"use strict";yd=en(require("crypto")),or=en(require("fs")),oa=class{constructor(t){this.cacheDir="";this.cacheVersion="3";this.cacheDir=t}generateSHA1Hash(t){let e=yd.default.createHash("sha1");return e.update(t),"_pint"+this.cacheVersion+"_"+e.digest("hex")}getCachePath(t){return this.cacheDir+this.generateSHA1Hash(t)+".json"}canCache(t){return typeof t=="undefined"?!1:t.trim().length>0}has(t){return typeof t=="undefined"?!1:or.existsSync(this.getCachePath(t))}serializeMap(t){return JSON.stringify(Array.from(t.entries()))}unserializeMap(t){let e=JSON.parse(t);return new Map(e)}put(t,e,s){let r=this.getCachePath(t),h={resultMapping:this.serializeMap(e),contentMapping:this.serializeMap(s)};or.writeFileSync(r,JSON.stringify(h))}get(t){let e=or.readFileSync(this.getCachePath(t),{encoding:"utf8"}),s=JSON.parse(e);return{contentMapping:this.unserializeMap(s.contentMapping),resultMapping:this.unserializeMap(s.resultMapping)}}isValid(t,e){if(t.size!==e.size)return!1;for(let[s,r]of t.entries())if(!e.has(s)||e.get(s)!==r)return!1;return!0}}});var Fe,Vh,Cd,ds,Or,Nd=bt(()=>{"use strict";Fe=en(require("fs")),Vh=en(require("path"));we();We();bd();({execSync:Cd}=require("child_process")),ds=class{constructor(t,e,s,r){this.tmpDir="";this.cacheDir="";this.resultMapping=new Map;this.contentMapping=new Map;this.pintCommand="";this.templateFile="";this.wasCached=!1;this.outputPintResults=!1;this.markerSuffix="";this.pintConfigPath="";this.phpDocs=new Map;this.phpTagDocs=new Map;this.cleanupFiles=[];this.cleanupDirs=[];this.didFail=!1;this.defaultConfig={preset:"laravel",rules:{blank_line_before_statement:!1,concat_space:{spacing:"one"},no_unused_imports:!1,declare_strict_types:!1,method_argument_space:!0,single_trait_insert_per_statement:!0,types_spaces:{space:"single"}}};this.tmpDir=t,this.cacheDir=e,this.pintConfigPath=r,this.markerSuffix=this.markerSuffix+Y.makeSlug(27);let h=this.tmpDir+"/pint.json";if(ds.processConfigPath==null)if(this.pintConfigPath.trim().length==0||!Fe.existsSync(this.pintConfigPath))Fe.writeFileSync(h,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),ds.processConfigPath=h;else try{let u=JSON.parse(Fe.readFileSync(this.pintConfigPath,{encoding:"utf8"}));typeof u.rules!="undefined"?(u.rules.no_unused_imports=!1,u.rules.declare_strict_types=!1):u.rules={no_unused_imports:!1,declare_strict_types:!1},Fe.writeFileSync(h,JSON.stringify(u),{encoding:"utf8"}),ds.processConfigPath=h}catch{Fe.writeFileSync(h,JSON.stringify(this.defaultConfig),{encoding:"utf8"}),ds.processConfigPath=h}Fe.existsSync(this.cacheDir)||Fe.mkdirSync(this.cacheDir),this.cache=new oa(this.cacheDir),Fe.existsSync(this.tmpDir)||Fe.mkdirSync(this.tmpDir),this.pintCommand=s}getDidFail(){return this.didFail}setTemplateFilePath(t){this.templateFile=t}getTemplateFile(){return this.templateFile}prepareContent(t){let e=/[^\S\n]/g,s=/['"`]/g,r=t.replace(e,"");return r=r.replace(s,""),r}getResultMapping(){return this.resultMapping}getPhpBlockContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.sourceContent);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.sourceContent}getEchoContent(t){if(t.overrideContent!=null&&this.resultMapping.has(t.overrideContent))return this.resultMapping.get(t.overrideContent);let e=this.prepareContent(t.content);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.content}getDirectiveContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return"("+this.resultMapping.get(t.overrideParams)+")";let e=this.prepareContent(t.directiveParameters);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return"("+this.resultMapping.get(s)+")"}return t.directiveParameters}getDirectivePhpContent(t){if(t.overrideParams!=null&&this.resultMapping.has(t.overrideParams))return this.resultMapping.get(t.overrideParams);let e=this.prepareContent(t.documentContent);if(this.contentMapping.has(e)){let s=this.contentMapping.get(e);if(this.resultMapping.has(s))return this.resultMapping.get(s)}return t.documentContent}transform(t){let e=`<?php 
`,s=0;return t.getAllNodes().forEach(r=>{if(r instanceof pt){if(r.directiveName=="php"&&r.isClosedBy!=null&&r.hasValidPhp()){if(r.documentContent.trim().length==0)return;let u="";u+=`<?php 
`,u+=r.documentContent,u+=`
`,r.overrideParams="__pint"+s.toString();let l=this.prepareContent(r.documentContent);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideParams),this.phpDocs.set(r.overrideParams,u),s+=1}else if(r.hasDirectiveParameters&&!r.hasJsonParameters&&r.hasValidPhp())if(r.directiveName=="php"){let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=IPD"+this.markerSuffix,e+=`
`,Y.breakByNewLine(h).forEach(l=>{e+=l.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideParams="__pint"+s.toString();let u=this.prepareContent(r.directiveParameters);this.contentMapping.has(u)||this.contentMapping.set(u,r.overrideParams),s+=1}else if(r.directiveName=="forelse"||r.directiveName=="foreach"){let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=FRL"+this.markerSuffix,e+=`
`,e+="foreach(",Y.breakByNewLine(h).forEach(l=>{e+=l.trimLeft()+`
`}),e+=") {}",e+=`
`,r.overrideParams="__pint"+s.toString();let u=this.prepareContent(r.directiveParameters);this.contentMapping.has(u)||this.contentMapping.set(u,r.overrideParams),s+=1}else{let h=r.directiveParameters.substring(1,r.directiveParameters.length-1).trim();if(h.length==0)return;e+="// "+s.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",Y.breakByNewLine(h).forEach(l=>{e+=l.trimLeft()+`
`}),e+=";",e+=`
`,r.overrideParams="__pint"+s.toString();let u=this.prepareContent(r.directiveParameters);this.contentMapping.has(u)||this.contentMapping.set(u,r.overrideParams),s+=1}}else if(r instanceof Oe&&r.hasValidPhp()){let h=r.content.trim();if(h.length==0)return;e+="// "+s.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",Y.breakByNewLine(h).forEach(l=>{e+=l.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,r.overrideContent="__pint"+s.toString();let u=this.prepareContent(r.content);this.contentMapping.has(u)||this.contentMapping.set(u,r.overrideContent),s+=1}else if(r instanceof Ii)r.parameters.length&&r.parameters.forEach(h=>{if(h.type==1&&h.directive!=null&&!h.directive.hasJsonParameters&&h.directive.hasValidPhp()){let u=h.directive.directiveParameters.substring(1,h.directive.directiveParameters.length-1).trim();if(u.length==0)return;e+="// "+s.toString()+"=DIR"+this.markerSuffix,e+=`
`,e+="$tVar = ",Y.breakByNewLine(u).forEach(f=>{e+=f.trimLeft()+`
`}),e+=";",e+=`
`,h.directive.overrideParams="__pint"+s.toString();let l=this.prepareContent(h.directive.directiveParameters);this.contentMapping.has(l)||this.contentMapping.set(l,h.directive.overrideParams),s+=1}else if(h.type==3&&h.inlineEcho!=null&&h.inlineEcho.hasValidPhp()){let u=h.inlineEcho.content.trim();e+="// "+s.toString()+"=ECH"+this.markerSuffix,e+=`
`,e+="echo ",Y.breakByNewLine(u).forEach(f=>{e+=f.trimLeft()+`
`}),e=e.trimRight(),e+=";",e+=`
`,h.inlineEcho.overrideContent="__pint"+s.toString();let l=this.prepareContent(h.inlineEcho.content);this.contentMapping.has(l)||this.contentMapping.set(l,h.inlineEcho.overrideContent),s+=1}});else if(r instanceof ri&&r.hasValidPhp()){let u=r.sourceContent.trim().substring(5).trimLeft();if(u=u.trimRight().substring(0,u.length-2).trim(),u.length==0)return;r.overrideContent="__pint"+s.toString();let l=this.prepareContent(r.sourceContent);this.contentMapping.has(l)||this.contentMapping.set(l,r.overrideContent),this.phpTagDocs.set(r.overrideContent,r.sourceContent+"KEEP"),s+=1}}),e}format(t){let e=this.transform(t);if(this.wasCached=!1,this.cache.canCache(this.templateFile)&&this.cache.has(this.templateFile))try{let m=this.cache.get(this.templateFile);if(this.cache.isValid(m.contentMapping,this.contentMapping))return this.contentMapping=m.contentMapping,this.resultMapping=m.resultMapping,this.wasCached=!0,this.resultMapping}catch{}let s="";try{s=this.callLaravelPint(e)}catch(m){return this.didFail=!0,this.cleanupFiles.forEach(I=>{Fe.unlinkSync(I)}),this.cleanupDirs.forEach(I=>{Fe.rmdirSync(I,{recursive:!0})}),this.outputPintResults&&console.error(m),this.resultMapping}this.cleanupFiles.forEach(m=>{Fe.unlinkSync(m)});let r=Y.breakByNewLine(s),h=[],u=this.markerSuffix,l=-1,f="",_=!1;return r.forEach(m=>{if(m.endsWith(u)){_=!0;var I=parseInt(m.substring(2).trim().substring(0,m.indexOf("="))),v=m.substring(m.indexOf("=")+1,m.indexOf("=")+4);if(f==""&&(f=v),l==-1){l=I;return}else{this.resultMapping.set("__pint"+l.toString(),this.cleanPintOutput(h.join(`
`),f)),h=[],l=I,f=v;return}}_&&h.push(m)}),h.length>0&&(this.resultMapping.set("__pint"+l.toString(),this.cleanPintOutput(h.join(`
`),f)),h=[],l=-1),this.cache.canCache(this.templateFile)&&this.cache.put(this.templateFile,this.resultMapping,this.contentMapping),this.resultMapping}cleanPintOutput(t,e){let s=t;return e=="DIR"?(s=s.trim().trimRight(),s=s.substring(7).trimLeft(),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="PHP"?(s=t.trim().substring(5).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight())):e=="IPD"?(s=t.trim().trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="FRL"?(s=s.trimLeft().substring(8).trimLeft().substring(1).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight()),s=s.substring(0,s.length-1).trimRight(),s=s.substring(0,s.length-1).trimRight(),s=s.substring(0,s.length-1).trimRight()):e=="ECH"?(s=t.trim(),s=s.substring(4).trimLeft(),s=s.trimRight(),s=s.trimRight(),s.endsWith("?")&&(s=s.substring(0,s.length-1).trimRight()),s.endsWith(";")&&(s=s.substring(0,s.length-1).trimRight())):e=="BHP"&&(s=t.trim()),s}callLaravelPint(t){if(this.wasCached)return"";let e=Y.makeSlug(26),s="",r="",h="";if(this.phpDocs.size>0||this.phpTagDocs.size>0){let u=this.tmpDir+"/"+Y.makeSlug(32)+"/";Fe.mkdirSync(u);let l=u+e+".php";Fe.writeFileSync(l,t,{encoding:"utf8"}),this.cleanupFiles.push(l),this.cleanupDirs.push(u),this.phpDocs.forEach((_,m)=>{let I=u+e+"php_"+m+".php";Fe.writeFileSync(I,_,{encoding:"utf8"}),this.cleanupFiles.push(I)}),this.phpTagDocs.forEach((_,m)=>{let I=u+e+"tag_php_"+m+".php";Fe.writeFileSync(I,_,{encoding:"utf8"}),this.cleanupFiles.push(I)});let f=this.pintCommand.replace("{file}",`"${u}"`)+` --config "${ds.processConfigPath}"`;r=Cd(f).toString(),this.phpDocs.forEach((_,m)=>{let I=u+e+"php_"+m+".php",x=Fe.readFileSync(I,{encoding:"utf8"}).trim().substring(5);this.resultMapping.set(m,x)}),this.phpTagDocs.forEach((_,m)=>{let I=u+e+"tag_php_"+m+".php",x=Fe.readFileSync(I,{encoding:"utf8"}).trim();x=x.substring(0,x.length-4),this.resultMapping.set(m,x)}),h=Fe.readFileSync(l,{encoding:"utf8"})}else{let u=this.tmpDir+e+".php";Fe.writeFileSync(u,t,{encoding:"utf8"});let l=this.pintCommand.replace("{file}",`"${u}"`)+` --config "${ds.processConfigPath}"`;s=Vh.basename(u),r=Cd(l).toString(),this.cleanupFiles.push(u),h=Fe.readFileSync(u,{encoding:"utf8"})}if(this.outputPintResults&&typeof this.templateFile!="undefined"&&this.templateFile!=null&&r.includes(s)){let u=Y.breakByNewLine(r),l=[];for(let f=0;f<u.length;f++){let _=u[f].trim();_.length==0||_=="\u2713"||(_.startsWith("\u2713")&&(_=_.substring(1).trim()),_.includes(s)&&(_=Vh.basename(this.templateFile)+_.substring(_.indexOf(s)+s.length)),l.push(_))}console.log(l.join(`
`))}return h}},Or=ds;Or.processConfigPath=null});var aa,Id=bt(()=>{"use strict";aa=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var Kn,Hh=bt(()=>{"use strict";we();Id();Kn=class{static print(t,e,s){let r=new aa(e,s);if(r.append("[").newLine(),t.elements.length>0){let h="";r.indent(),t.elements.forEach(u=>{t.maxKeyLength>0&&u.key!=null&&(h=""),u.key!=null?(r.append(u.key.sourceContent+h).append(" => "),u.value!=null&&(u.value instanceof Ss?u.value.elements.length==0?r.append("[],"):r.append(Kn.print(u.value,e,s+1)):r.append(u.value.sourceContent))):u.value!=null&&(u.value instanceof Ss?r.append(Kn.print(u.value,e,s+1)):r.append(u.value.sourceContent)),r.appendNoRepeat(",").newLine(),u.isLast||r.indent()})}return s>1&&r.outdent(),r.append("]"),r.getContents()}}});var Pr,Ad=bt(()=>{"use strict";We();Pr=class{static printComment(t,e,s){if(t.isMultiline()){let r=Y.breakByNewLine(t.innerContent.trim()),h=[];r.forEach(f=>{h.push(" ".repeat(e+s)+f.trim())});let u=h.join(`
`),l=`{{--
`;return l+=u,l+=`
`+" ".repeat(s)+"--}}",l}return"{{-- "+t.innerContent.trim()+" --}}"}}});var Me,Lr=bt(()=>{"use strict";We();Me=class{static relativeIndentLevel(t,e){let s=Y.breakByNewLine(e);for(let r=0;r<s.length;r++){let h=s[r];if(h.includes(t)){let u=h.trimLeft();return h.length-u.length}}return 0}static indentRelative(t,e,s){let r=Y.breakByNewLine(t),h=[];for(let f=0;f<r.length;f++)if(r[f].trim().length>0){h=r.slice(f);break}for(let f=h.length-1;f>=0&&h[f].trim().length==0;f--)h.pop();let u=-1,l="";for(let f=0;f<h.length;f++){let _=h[f],m=_.trimLeft(),I=_.length-m.length;_.trim().length!=0&&(f==0||I<u)&&(u=I,l=_)}if(u==s&&(u=0),u>=0){let f=" ".repeat(e);for(let _=0;_<h.length;_++){let m=h[_];if(m.trim().length==0){h[_]="";continue}let I=m.substring(u);if(_==0){h[_]=m.trimLeft();continue}else h[_]=f+I}}return h.join(`
`)}static shiftIndentWithLastLineInline(t,e,s,r=!1){let h=Y.breakByNewLine(t.trim()),u=[];if(h.length>1){let l=!0;for(let f=1;f<h.length;f++){let _=h[f],m=_.length-_.trim().length;if(s-m!=0){l=!1;break}}if(l)return t.trim()}for(let l=0;l<h.length;l++){if(l==0&&r){u.push(h[l]);continue}let f=h[l];f.trim().length==0?u.push(""):u.push(" ".repeat(Math.max(0,s-e))+f)}return u.join(`
`)}static shiftIndent(t,e,s=!1,r,h=!1,u=!1){let l=Y.breakByNewLine(t.trim()),f=[];if(l.length>1){let _=!0;for(let m=1;m<l.length;m++){let I=l[m],v=I.length-I.trim().length;if(e-v!=0){_=!1;break}}if(_){if(l[0].trimLeft().length==l[0].length&&e==r.tabSize&&h){let m=" ".repeat(r.tabSize);return l.forEach(I=>{f.push(m+I)}),f.join(`
`)}return t.trim()}}for(let _=0;_<l.length;_++){if(_==0&&s){f.push(l[_]);continue}let m=l[_];m.trim().length==0?f.push(""):u&&_==l.length-1?f.push(" ".repeat(e-r.tabSize)+m):f.push(" ".repeat(e)+m)}return f.join(`
`)}static shiftClean(t,e){let s=Y.breakByNewLine(t),r=[],h=" ".repeat(e),u=!1;return s.forEach(l=>{l.trim().length>0&&(u=!0),u&&(l.trim().length==0?r.push(""):r.push(h+l))}),r.join(`
`)}static inferIndentLevel(t,e,s){let r=0,h=-1;for(let u=0;u<t.length;u++){let l=t[u];if(l.includes(e)){let f=l.trimLeft();r=l.length-f.length,h=u;break}}if(h>0)for(let u=h-1;u>=0;u--){let l=t[u],f=l.trim(),_=l.trimLeft(),m=l.length-f.length;if(_.length!=0&&m!=r&&m<r){let I=r-m;return{targetLevel:r,referenceLevel:m,sourceTabSize:I}}}return{targetLevel:r,referenceLevel:r,sourceTabSize:s}}static indent(t,e,s){let r=Me.inferIndentLevel(t,e,s);return" ".repeat(r.targetLevel)}}});function ar(i,t){if(i.includes(`
`)&&(i.includes("match")||i.includes("=>")||i.includes("&&")||i.includes(",")||i.includes("("))){let e=Y.breakByNewLine(i),s=0;return e.forEach(r=>{let h=r.trim().length;h>s&&(s=h)}),s+Math.ceil(s/2)}return t}function ha(i){let t=Y.breakByNewLine(i),e=[],s=!1;for(let r=0;r<t.length;r++){let h=t[r];if(h.trimRight().endsWith("//")&&!s){e.push(h.trimRight().substring(0,h.trimRight().length-2).trimRight()),s=!0;continue}e.push(h)}return e.join(`
`)}function la(i){let t=Y.breakByNewLine(i),e=[],s=!1,r=!1,h=!0;for(let u=0;u<t.length;u++){let l=t[u];if(!s&&l.trimRight().endsWith("[")){r=!0,e.push(l);continue}if(l.trimRight().endsWith(",")&&r&&!s)if(l.trimRight().endsWith("//")){h=!1;break}else e.push(l+"//"),s=!0;else e.push(l)}return h?{content:e.join(`
`),addedHack:s}:{content:i,addedHack:!1}}var ua=bt(()=>{"use strict";We()});function HA(i){let t="",e=Y.breakByNewLine(i);for(let s=0;s<e.length;s++)t+=e[s].trim();return t}var ps,Dr,Sd=bt(()=>{"use strict";Ko();fs();na();Mh();We();Hh();Lr();ua();ps=class{static getReasonableDirectivePhpOptions(t,e){return ps.defaultControlDirectiveNames.includes(t.name)?{...e,trailingCommaPHP:!1}:e}static printDirective(t,e,s,r,h,u){var _,m,I,v;let l=t.directiveName.trim(),f="@"+l;if(t.hasDirectiveParameters){let x=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&r&&t.hasValidJson()){let R=t.getPhpContent().trim();R.startsWith("(")&&R.endsWith(")")&&(R=R.substring(1),R=R.substring(0,R.length-1));let H=r(R);H.includes(`
`)&&(H=Me.shiftIndent(H,h,!0,e)),x="("+H+")"}}else if(e.formatDirectivePhpParameters&&s!=null&&t.hasValidPhp()){if(u!=null){let $=e.spacesAfterDirective;ps.defaultControlDirectiveNames.includes(l)&&($=e.spacesAfterControlDirective);let z="@"+l+" ".repeat($),ht=u.getDirectiveContent(t);if(ht=Me.shiftIndent(ht,h,!0,e),ps.defaultControlDirectiveNames.includes(l)&&ht.includes(`
`)){let F=Y.breakByNewLine(ht),q=[];for(let gt=0;gt<F.length;gt++){let nt=F[gt];if(gt==0){q.push(nt);continue}q.push(" ".repeat(z.length+1)+nt)}ht=q.join(`
`)}return z+ht}let R=t.getPhpContent().trim();R.startsWith("(")&&R.endsWith(")")&&(R=R.substring(1),R=R.substring(0,R.length-1));let H=R,X=!1,at=sr();if(R.startsWith("[")&&R.endsWith("]")&&((_=t.startPosition)==null?void 0:_.line)!=((m=t.endPosition)==null?void 0:m.line)){let $="<?php "+R,z=la($);z.addedHack&&($=z.content),H=s($,e,ps.getReasonableDirectivePhpOptions(t,{...at,printWidth:ar(R,at.printWidth)})),z.addedHack&&(H=ha(H));let ht=new rr,F=ht.parse(Y.replaceAllInString(H,`
`," ")),q=0;return ht.getIsAssoc()||H.includes("match")||H.includes("=>")?(H.includes(`
`)&&!X&&(H=Me.shiftIndent(H,h,!0,e)),ti.couldReflow(H)&&(H=ti.instance.reflow(H)),ai.couldReflow(H)&&(H=ai.instance.reflow(H)),H="@"+l+" ".repeat(e.spacesAfterDirective)+"("+H+")"):F!=null&&(H=Kn.print(F,e.tabSize,1),q>0&&(H=Y.removeEmptyNewLines(Me.shiftIndent(H,q,!0,e))),H.includes(`
`)&&!X&&(H=Me.shiftIndent(H,h,!0,e)),H="@"+l+" ".repeat(e.spacesAfterDirective)+"("+H+")"),H}else try{let $=sr();((I=t.startPosition)==null?void 0:I.line)==((v=t.endPosition)==null?void 0:v.line)&&($={...sr(),printWidth:1/0},X=!0),H=s("<?php "+R,e,ps.getReasonableDirectivePhpOptions(t,$))}catch{}t.directiveName.toLowerCase()=="forelse"&&(H=H.substring(9),H=H.substring(0,H.length-14)),ti.couldReflow(H)&&(H=ti.instance.reflow(H)),ai.couldReflow(H)&&(H=ai.instance.reflow(H)),H.includes(`
`)&&!X?x="("+Me.shiftIndent(H,h,!0,e)+")":(X&&(H=HA(H)),x="("+H+")")}let N=e.spacesAfterDirective;ps.defaultControlDirectiveNames.includes(l)&&(N=e.spacesAfterControlDirective),f+=" ".repeat(N)+x}return f}},Dr=ps;Dr.defaultControlDirectiveNames=["if","elseif","unless","while","for","foreach","forelse"]});var _s,Od=bt(()=>{"use strict";Ko();fs();na();we();We();Lr();ua();_s=class{static printEcho(t,e,s,r,h){var m,I;let u="{{ ",l=" }}";t instanceof On?(u="{!! ",l=" !!}"):t instanceof Pn&&(u="{{{ ",l=" }}}");let f=u,_=t.content.trim();if(e.formatInsideEcho&&s!=null&&t.hasValidPhp()){let v=ud(),x=_;if(((m=t.startPosition)==null?void 0:m.line)!=((I=t.endPosition)==null?void 0:I.line)){if(v={...v,printWidth:ar(_,v.printWidth)},e.useLaravelPint)h!=null&&(x=h.getEchoContent(t));else{let R=la(_);R.addedHack&&(_=R.content),x=s("<?php "+_,e,v),R.addedHack&&(x=ha(x)),ti.couldReflow(x)&&(x=ti.instance.reflow(x)),ai.couldReflow(x)&&(x=ai.instance.reflow(x))}if(e.echoStyle=="inline"){let R=Me.shiftIndentWithLastLineInline(x,e.tabSize,r+e.tabSize,!0).trim();return u.trimRight()+" "+R+" "+l.trim()}return u.trim()+`
`+Me.shiftIndent(x,r+e.tabSize,!1,e,!0)+`
`+" ".repeat(r)+l.trim()}else e.useLaravelPint?h!=null&&(x=h.getEchoContent(t)):(x=s("<?php "+_+";",e,{...v,printWidth:1/0}),x=x.trimRight().substring(0,x.trimRight().length-1),ti.couldReflow(x)&&(x=ti.instance.reflow(x)),ai.couldReflow(x)&&(x=ai.instance.reflow(x))),x.includes(`
`)&&(x=Y.collapse(x));_=x}return f+=_+l,f}}});var Mn,Wh=bt(()=>{"use strict";Mn=class{};Mn.FormatIgnoreStart="format-ignore-start",Mn.FormatIgnoreEnd="format-ignore-end"});var ca,Pd=bt(()=>{"use strict";Qo();Ko();fs();na();we();Mh();We();Uh();dn();Nd();Hh();Ad();Sd();Od();Lr();ua();Wh();ca=class{constructor(t){this.isInsideIgnoreFormatter=!1;this.ignoredLiteralBlocks=new Map;this.activeLiteralSlug="";this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.attachedDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.echoParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.useLaravelPint=!1;this.pintTransformer=null;this.filePath="";this.formattingOptions=null;this.didPintFail=!1;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,phpOptions:null,echoStyle:"block",useLaravelPint:!1,pintCommand:"pint {filename}",pintTempDirectory:"",pintCacheDirectory:"",pintCacheEnabled:!0,pintConfigPath:"",classStrings:er()};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}getPintTransformer(){return this.pintTransformer}setPintTransformer(t){this.pintTransformer=t}setUsingLaravelPint(t){this.useLaravelPint=t}getUsingLaravelPint(){return this.useLaravelPint}setParentTransformer(t){return this.parentTransformer=t,this.cloneOptions(t),this}cloneOptions(t){return this.setUsingLaravelPint(t.getUsingLaravelPint()),this.setPintTransformer(t.getPintTransformer()),this}setFormattingOptions(t){return this.formattingOptions=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}withFilePath(t){return this.filePath=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(s=>{s instanceof Xt?e+=s.getOutputContent():s instanceof ri?e+=s.sourceContent:s instanceof pt&&s.directiveName=="verbatim"&&(e+=s.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t,e){return Dr.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter,e,this.pintTransformer)}makeSlug(t){let e=Y.makeSlug(t);return this.slugs.includes(e)?this.makeSlug(t+1):(this.slugs.push(e),e)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerEchoParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerEchoParameter(t,e):this.echoParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerAttachedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerAttachedDirective(t,e):this.attachedDirectives.set(t,e)}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline||t.fragmentPosition==2||t.fragmentPosition==1)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let s=this.open(e),r=this.close(e);return`
`+s+r+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((s,r)=>{let h=this.open(r),u=this.indentLevel(h),l=s.sourceContent;this.transformOptions.formatDirectivePhpParameters&&s.hasValidPhp()&&(this.useLaravelPint?this.pintTransformer!=null&&(l=this.pintTransformer.getPhpBlockContent(s)):this.phpTagFormatter!=null&&(l=this.phpTagFormatter(l,this.transformOptions,null),ti.couldReflow(l)&&(l=ti.instance.reflow(l)),ai.couldReflow(l)&&(l=ai.instance.reflow(l))),l=Me.shiftIndent(l,u,!0,this.transformOptions)),e=e.replace(h,l)}),this.dynamicElementPhpNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,this.printInlinePhp(s))}),this.inlinePhpNodes.forEach((s,r)=>{e=e.replace(r,this.printInlinePhp(s))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e,this.transformOptions,null),ti.couldReflow(e)&&(e=ti.instance.reflow(e)),ai.couldReflow(e)&&(e=ai.instance.reflow(e)),e=Y.replaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let s=!0,r=!0,h=0,u=0,l=0,f=!0;for(let _=0;_<e.length;_++){let m=e[_];m instanceof Oe&&m.isInlineEcho?(s=!1,h+=1,u+=1):m instanceof Xt?(l+=1,m.content.trim().length>0&&(r=!1)):u+=1}return h==0&&(f=!0),u>0&&s==!0?!1:(r==!1&&u==0&&(f=!0),r==!0&&u==0&&(f=!0),f)}preparePairedDirective(t){var u,l,f,_,m,I,v;let e=this.makeSlug(t.sourceContent.length),s=t.directiveName.toLowerCase(),r=(u=t.childrenDocument)==null?void 0:u.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){if(t.originalAbstractNode!=null&&t.originalAbstractNode.prevNode instanceof Oe&&t.originalAbstractNode instanceof pt&&t.originalAbstractNode.directiveName=="if"){let R=((f=(l=t.originalAbstractNode.startPosition)==null?void 0:l.index)!=null?f:0)-((m=(_=t.originalAbstractNode.prevNode.endPosition)==null?void 0:_.index)!=null?m:0);if(R>0&&R<3)return this.registerAttachedDirective(e,{directive:t,innerDoc:r,slug:e,isInline:!1,virtualElementSlug:""}),e}let x="",N=`${this.open(e)}
`;if(s=="php"||s=="verbatim")x=this.makeSlug(15),N+=this.pair(x);else{let R=this.isAllInlineNodes((I=t.children)!=null?I:[]),H=this.containsBladeStructures((v=t.children)!=null?v:[]);this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1&&!R&&!H||!t.containsAnyFragments&&R&&H?(x=this.makeSlug(15),N+=this.pair(x,r)):N+=r}return N+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(x)),this.virtualStructureClose.push(this.close(x)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:r,slug:e,directive:t,virtualElementSlug:x,isInline:!1}),N}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let h=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:r,slug:h,directive:t,virtualElementSlug:"",isInline:!0}),h+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var s,r,h,u,l,f,_,m,I;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let at=this.makeSlug((r=(s=t.constructedFrom)==null?void 0:s.sourceContent.length)!=null?r:0),$=this.makeSlug((u=(h=t.elseNode)==null?void 0:h.sourceContent.length)!=null?u:0),z=(l=t.truthDocument)==null?void 0:l.document.transform().setParentTransformer(this).toStructure(),ht=(f=t.falseDocument)==null?void 0:f.document.transform().setParentTransformer(this).toStructure(),F={truthDoc:z,falseDoc:ht,forElse:t,truthClose:this.close(at),emptyOpen:this.open($),pairClose:this.close($),truthSlug:at,falseSlug:$},q=this.open(at);return q+=z,q+=F.truthClose,q+=`
`+F.emptyOpen+`
`,q+=ht+"",q+=F.pairClose,this.registerForElseWithEmpty(F),q}let v=t.constructedFrom,x=(_=t.truthDocument)==null?void 0:_.document.transform().setParentTransformer(this).toStructure(),N=this.makeSlug(v.sourceContent.length),R=this.makeSlug((I=(m=v.isClosedBy)==null?void 0:m.sourceContent.length)!=null?I:0),H={truthDoc:x,falseDoc:"",forElse:t,truthSlug:N,falseSlug:"",pairClose:this.close(R),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push(H);let X=this.open(N);return X+=x,X+=this.close(N),X}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,s){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,s):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:s}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let s=this.makeSlug(10),r=this.makeSlug(10),h={node:t,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(r)};return this.registerVirtualComment(h),h.pairOpen+`
`+h.virtualElement+`
`+h.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var s,r;if(t.isClosingTag)return((s=t.name)==null?void 0:s.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((r=t.name)==null?void 0:r.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let h=t.name.inlineName;h.startsWith(":")&&(h=h.substring(1)),e+='slot name="'+h+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(h=>{var u,l;if(h.type==0)if(h.isExpression){let f=this.makeSlug(h.content.length);this.registerExpressionParameter(f,h),e+=f+" "}else e+=h.content+" ";else if(h.type==2)e+=h.name+" ";else if(h.type==1){let f=this.makeSlug((l=(u=h.directive)==null?void 0:u.sourceContent.length)!=null?l:0);this.registerDirectiveParameter(f,h),e+=f+" "}else if(h.type==3&&h.inlineEcho!=null){let f=this.makeSlug(h.inlineEcho.content.length);this.registerEchoParameter(f,h),e+=f+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let s=[],r="";t.cases.forEach((v,x)=>{var $,z;let N=v.head,R=($=v.childDocument)==null?void 0:$.document.transform().setParentTransformer(this).toStructure(),H=this.makeSlug(N.sourceContent.length),X=this.makeSlug(5),at={case:v,slug:H,doc:R,virtualOpen:this.selfClosing(X),virtualClose:this.close(X),pairOpen:this.open(H),pairClose:this.close(H),isFirst:x==0,isLast:x==t.cases.length-1,leadingClose:"",leadingOpen:""};if(v.leadingDocument!=null){let ht=this.makeSlug(25);at.leadingOpen=this.open(ht),at.leadingClose=this.close(ht),r+=`
`+v.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}r+=at.pairOpen,((z=v.head)==null?void 0:z.directiveName)=="default"&&(r+=at.virtualOpen),r+=R,r+=at.pairClose,s.push(at)});let h=s[0].pairOpen,u=s[s.length-1].pairClose,l=this.makeSlug(10),f=this.open(l),_=this.close(l),m={switchNode:t,pairOpen:h,pairClose:u,structures:s,virtualSwitchClose:_,virtualSwitchOpen:f},I=`
`+f+`
`+r+`
`+_;return this.registerSwitchStatement(m),I}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}containsComponents(t){for(let e=0;e<t.length;e++)if(t[e]instanceof Ii)return!0;return!1}containsBladeStructures(t){for(let e=0;e<t.length;e++){let s=t[e];if(!(s instanceof Xt)){if(s instanceof pt&&(s.isClosingDirective||s.isClosingDirective||s.name=="elseif"||s.name=="else"))continue;return!0}}return!1}isAllInlineNodes(t){let e=0;for(let s=0;s<t.length;s++){let r=t[s];if(!(r instanceof Xt))if(r instanceof Oe){if(!r.isInlineEcho)return!1;e+=1}else if(r instanceof pt){if(r.isClosingDirective||r.name=="elseif"||r.name=="else")continue;return!1}else return!1}return e!=0}prepareConditions(t){if(t.fragmentPosition==3){if(t.chain.length==1&&t.constructedFrom!=null){let f=t.constructedFrom.clone();return f.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(f)}let s=[],r="";t.logicBranches.forEach((f,_)=>{var R,H,X,at,$,z,ht,F,q,gt,nt,yt,Ht,zt;let m=f.head,I=(R=f.childDocument)==null?void 0:R.document.transform().setParentTransformer(this).toStructure(),v=this.makeSlug(m.sourceContent.length),x=this.makeSlug(10),N={branch:f,slug:v,doc:I,pairOpen:this.open(v),pairClose:this.close(v),virtualOpen:this.open(x),virtualClose:this.close(x),isFirst:_==0,isLast:_==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:"",isLiteralContent:!1};if(((H=f.head)==null?void 0:H.directiveName)=="else"){r+=`
`+N.pairOpen;let Bt=this.makeSlug(25),Ct=this.containsBladeStructures((X=f.head.children)!=null?X:[]);f.head.containsChildStructures==!1&&f.head.containsAnyFragments==!1&&(((at=f.head)==null?void 0:at.children.length)<=2||(($=f.head)==null?void 0:$.children.length)>4)&&!this.isAllInlineNodes(f.head.children)&&!Ct?(N.virtualBreakOpen=this.open(Bt),N.virtualBreakClose=this.close(Bt),r+=`
`+N.virtualBreakOpen+`
`,r+=I,r+=`
`+N.virtualBreakClose+`
`+N.pairClose):(N.virtualBreakOpen=this.selfClosing(Bt),r+=N.virtualBreakOpen+`
`,r+=I,r+=`
`+N.pairClose)}else{let Bt=this.isAllInlineNodes((ht=(z=f.head)==null?void 0:z.children)!=null?ht:[]),Ct=this.containsBladeStructures((q=(F=f.head)==null?void 0:F.children)!=null?q:[]);if(((gt=f.head)==null?void 0:gt.containsAnyFragments)==!1&&((nt=f.head)==null?void 0:nt.containsChildStructures)==!1&&(((yt=f.head)==null?void 0:yt.children.length)<=2||((Ht=f.head)==null?void 0:Ht.children.length)>4)&&!Bt&&!Ct){let Tt=this.makeSlug(25);N.virtualBreakOpen=this.open(Tt),N.virtualBreakClose=this.close(Tt),((zt=f.head)==null?void 0:zt.children.length)<=2&&f.head.children[0]instanceof Xt?(r+=N.pairOpen,r+=`
`+N.virtualBreakOpen,r+=`
`+N.virtualBreakClose,r+=N.pairClose,N.isLiteralContent=!0):(r+=N.pairOpen,r+=`
`+N.virtualBreakOpen,r+=I,r+=`
`+N.virtualBreakClose,r+=N.pairClose)}else if(Bt){r+=`
`+N.pairOpen;let Tt=this.makeSlug(25);N.virtualBreakOpen=this.selfClosing(Tt),r+=N.virtualBreakOpen+`
`,r+=I,r+=`
`+N.pairClose}else r+=N.pairOpen,r+=`
`,r+=I,r+=`
`,r+=N.pairClose}s.push(N)});let h=s[0].pairOpen,u=s[s.length-1].pairClose,l={pairOpen:h,pairClose:u,structures:s,condition:t};return this.registerCondition(l),r}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),t.fragmentPosition==1||t.fragmentPosition==2?e:e+" "}toStructure(){let t="";this.useLaravelPint&&this.parentTransformer==null&&(this.pintTransformer=new Or(this.transformOptions.pintTempDirectory,this.transformOptions.pintCacheDirectory,this.transformOptions.pintCommand,this.transformOptions.pintConfigPath),this.pintTransformer.setTemplateFilePath(this.filePath),this.pintTransformer.format(this.doc),this.didPintFail=this.pintTransformer.getDidFail()),this.doc.getRenderNodes().forEach(r=>{if(this.isInsideIgnoreFormatter){if(this.pushLiteralBlock(this.activeLiteralSlug,r),r instanceof nn&&r.innerContent.trim().toLowerCase()==Mn.FormatIgnoreEnd){this.isInsideIgnoreFormatter=!1;return}return}r instanceof Xt?t+=r.content:r instanceof wi?r.cases.length>0?t+=this.prepareSwitch(r):t+=this.preparePairedDirective(r.constructedFrom):r instanceof ki?t+=this.prepareConditions(r):r instanceof pt?t+=this.prepareDirective(r):r instanceof Oe?t+=this.prepareEcho(r):r instanceof Fi?t+=this.prepareForElse(r):r instanceof nn?r.innerContent.trim()==Mn.FormatIgnoreStart?(this.isInsideIgnoreFormatter=!0,this.activeLiteralSlug=this.makeSlug(16),this.pushStartLiteralBlock(this.activeLiteralSlug,r),t+=this.selfClosing(this.activeLiteralSlug)):t+=this.prepareComment(r):r instanceof Ii?t+=this.prepareComponent(r):r instanceof ri&&(t+=this.preparePhpBlock(r))});let s=this.doc.getParser().getFragmentsContainingStructures();if(s.length>0){let r=ge.fromText(t);s.forEach(h=>{var x,N,R,H,X,at,$,z;let u=this.doc.getParser().getText(((N=(x=h.start.endPosition)==null?void 0:x.offset)!=null?N:0)+1,(H=(R=h.end.startPosition)==null?void 0:R.offset)!=null?H:0),l=r.getParser().getFragmentsParser().getEmbeddedFragment(h.start.embeddedIndex),f=r.getParser().getFragmentsParser().getClosingFragmentAfter(l),_=r.getParser().getText(((at=(X=l.endPosition)==null?void 0:X.offset)!=null?at:0)+1,(z=($=f==null?void 0:f.startPosition)==null?void 0:$.offset)!=null?z:0),m=this.makeSlug(16),I=h.start.name.toLowerCase()=="script",v=m;I?v="//"+m:v="/*"+m+"*/",t=t.replace(_,v),this.registerEmbeddedDocument(m,u,I)})}return t}withOptions(t){return this.transformOptions=t,this.useLaravelPint=this.transformOptions.useLaravelPint,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((s,r)=>{let h=this.selfClosing(r),u=this.printDirective(s,this.indentLevel(h));e=e.replace(h,u)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((s,r)=>{let h=this.printDirective(s,0);if(h.includes(`
`)){let u=this.indentLevel(r);u>0&&(h=Me.shiftIndent(h,u,!0,this.transformOptions))}e=e.replace(r,h)}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((s,r)=>{let h=_s.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer);e=Y.replaceAllInString(e,r,h)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((s,r)=>{let h=this.printDirective(s,this.indentLevel(r));e=Y.replaceAllInString(e,r,h)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let s=t.trim();s.startsWith("<?php")==!1&&(s="<?php "+s);let r=sr();return s=this.blockPhpFormatter(s,this.transformOptions,{...r,printWidth:ar(t,r.printWidth)}),e&&(s=`
`+s+`
`),ti.couldReflow(s)&&(s=ti.instance.reflow(s)),ai.couldReflow(s)&&(s=ai.instance.reflow(s)),s}removeLeadingWhitespace(t,e){let s=t.indexOf(e);if(s===-1)return t;let r=t.slice(0,s),h=t.slice(s+e.length);return r.replace(/[\s\uFEFF\xA0]+$/g,"")+e+h}findNewLeadingStart(t,e){let s=Y.breakByNewLine(t);for(let r=0;r<s.length;r++){let h=s[r];if(h.includes(e))return h.length-h.trim().length}return-1}transformPairedDirectives(t){let e=t;return this.attachedDirectives.forEach((s,r)=>{var m;e=this.removeLeadingWhitespace(e,r);let h=s.directive.documentContent;Ed(),this.transformOptions.useLaravelPint?h=dd(h,this.formattingOptions,this.transformOptions).trim():h=wh(h,this.formattingOptions).trim(),vd();let u=this.printDirective(s.directive,this.indentLevel(r)).trim(),l=this.findNewLeadingStart(e,r),f=u+h+`
`+((m=s.directive.isClosedBy)==null?void 0:m.sourceContent),_=Me.shiftIndent(f,l+this.transformOptions.tabSize,!0,this.transformOptions,!1,!0);e=e.replace(r,_)}),this.pairedDirectives.forEach((s,r)=>{var f;let h=s.directive;if(s.virtualElementSlug.length>0){let _=this.open(s.virtualElementSlug),m=this.close(s.virtualElementSlug);this.virtualStructureOpens.push(_),this.removeLines.push(_),this.removeLines.push(m)}let u=this.open(r),l=this.close(r);if(h.directiveName.trim().toLowerCase()=="php"){let _=this.open(s.virtualElementSlug),m=this.indentLevel(_),I=s.directive.sourceContent,v=h.documentContent;if(this.transformOptions.formatDirectivePhpParameters)if(!this.useLaravelPint)v=Me.shiftIndent(this.transformBlockPhp(h.innerContent,!0),m,!0,this.transformOptions),e=e.replace(u,I),e=e.replace(_,v);else if(this.pintTransformer!=null){v=this.pintTransformer.getDirectivePhpContent(h).trim();let x=Y.breakByNewLine(v),N=[];for(let R=0;R<x.length;R++){if(x[R].trim().length==0){N.push("");continue}N.push(" ".repeat(m)+x[R])}v=N.join(`
`),e=e.replace(u,I+`
`+v),e=e.replace(_,"")}else e=e.replace(u,I),e=e.replace(_,v);else e=e.replace(u,I+`
`+v),e=e.replace(_,"")}else if(h.directiveName.trim().toLowerCase()=="verbatim"){let _=s.directive.sourceContent+`
`+Me.shiftClean(h.innerContent,this.transformOptions.tabSize);e=e.replace(u,_)}else e=e.replace(u,this.printDirective(s.directive,this.indentLevel(u)));e=e.replace(l,(f=s.directive.isClosedBy)==null?void 0:f.sourceContent)}),this.inlineDirectives.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(s=>{var _;let r=s.forElse.constructedFrom,h=this.open(s.truthSlug),u=this.close(s.truthSlug),l=this.printDirective(r,this.indentLevel(h)),f=(_=r.isClosedBy)==null?void 0:_.sourceContent;e=e.replace(h,l),e=e.replace(u,f)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(s=>{var l,f;let r=this.open(s.truthSlug),h=s.forElse.constructedFrom,u=this.printDirective(h,this.indentLevel(r));e=e.replace(r,u),e=e.replace(s.pairClose,(l=h.isClosedBy)==null?void 0:l.sourceContent),e=e.replace(s.emptyOpen,(f=s.forElse.elseNode)==null?void 0:f.sourceContent),this.removeLines.push(s.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,_s.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),this.spanEchos.forEach((s,r)=>{e=e.replace(r,_s.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),e}pushStartLiteralBlock(t,e){var s;this.parentTransformer!=null?this.parentTransformer.pushStartLiteralBlock(t,e):(this.ignoredLiteralBlocks.set(t,[]),(s=this.ignoredLiteralBlocks.get(t))==null||s.push(e))}pushLiteralBlock(t,e){var s;this.parentTransformer!=null?this.parentTransformer.pushLiteralBlock(t,e):(s=this.ignoredLiteralBlocks.get(t))==null||s.push(e)}transformConditions(t){let e=t;return this.conditions.forEach(s=>{s.structures.forEach(r=>{let h=r.branch.head;if(r.isLiteralContent&&(e=e.replace(r.virtualBreakOpen,r.doc.trim())),r.virtualBreakOpen.length>0&&this.removeLines.push(r.virtualBreakOpen),r.virtualBreakClose.length>0&&(e=e.replace(r.virtualBreakClose,r.virtualBreakClose+`
`),this.removeLines.push(r.virtualBreakClose)),this.virtualStructureOpens.push(r.virtualOpen),this.removeLines.push(r.virtualOpen),this.removeLines.push(r.virtualClose),!r.isLast)this.removeLines.push(r.pairClose),e=e.replace(r.pairOpen,this.printDirective(h,this.indentLevel(r.pairOpen)));else{e=e.replace(r.pairOpen,this.printDirective(h,this.indentLevel(r.pairOpen)));let u=h.isClosedBy;e=e.replace(r.pairClose,this.printDirective(u,this.indentLevel(r.pairClose)))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(s=>{let r=s.switchNode.constructedFrom;e=e.replace(s.virtualSwitchOpen,this.printDirective(r,this.indentLevel(s.virtualSwitchOpen)));let h=r.isClosedBy;e=e.replace(s.virtualSwitchClose,h.sourceContent),s.structures.forEach(u=>{let l=u.case.head;this.removeLines.push(u.virtualClose),this.removeLines.push(u.virtualOpen),u.isLast?(e=e.replace(u.pairOpen,this.printDirective(l,this.indentLevel(u.pairOpen))),this.removeLines.push(u.pairClose)):u.isFirst?(this.removeLines.push(u.pairClose),e=e.replace(u.pairOpen,this.printDirective(l,this.indentLevel(u.pairOpen)))):(this.removeLines.push(u.pairClose),e=e.replace(u.pairOpen,this.printDirective(l,this.indentLevel(u.pairOpen))))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((s,r)=>{let h=this.close(r),u=this.open(r);this.removeLines.push(h);let l=s.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters){if(this.useLaravelPint)l=this.printDirective(s,this.indentLevel(u));else if(this.phpFormatter!=null&&s.hasValidPhp()){let f=s.getPhpContent().trim();f.startsWith("(")&&f.endsWith(")")&&(f=f.substring(1),f=f.substring(0,f.length-1));let _=this.phpFormatter("<?php "+f,this.transformOptions,null),m=new rr,I=m.parse(Y.replaceAllInString(_,`
`," ")),v=this.indentLevel(u);m.getIsAssoc()?l="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+_+")":I!=null&&(_=Kn.print(I,this.transformOptions.tabSize,1),v>0&&(_=Y.removeEmptyNewLines(Me.shiftIndent(_,v,!0,this.transformOptions))),l="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+_+")")}}}catch{l=s.sourceContent}e=e.replace(u,l)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((s,r)=>{let h=this.close(r),u=this.open(r);this.removeLines.push(h),e=e.replace(u,s.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((s,r)=>{let h=this.selfClosing(r);e=e.replace(h,Pr.printComment(s,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let s=this.structureLines[e];if(s.includes(t)){let r=s.trimLeft();return s.length-r.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(s=>{let r=s.node;e=e.replace(s.pairOpen,Pr.printComment(r,this.transformOptions.tabSize,this.indentLevel(s.pairOpen))),this.removeLines.push(s.pairClose),this.removeLines.push(s.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.nodeContent)}),e}removeTrailingWhitespaceAfterSubstring(t,e){let s=Y.breakByNewLine(t),r=[];for(let h=0;h<s.length;h++){let u=s[h];u.trimRight().endsWith(e)?r.push(u.trimRight()):r.push(u)}return r.join(`
`)}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((s,r)=>{e=this.removeTrailingWhitespaceAfterSubstring(e,r),e=Y.replaceAllInString(e,r,s.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((s,r)=>{e=Y.replaceAllInString(e,r,s.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((s,r)=>{let h=s.directive;e=e.replace(r,this.printDirective(h,this.indentLevel(r)))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((s,r)=>{e=e.replace(r,s.content)}),e}transformEchoParameters(t){let e=t;return this.echoParameters.forEach((s,r)=>{var h;if(((h=s.inlineEcho)==null?void 0:h.sourceContent.startsWith("{{--"))&&s.inlineEcho.sourceContent.endsWith("--}}")){let u=s.inlineEcho.content.substring(2,s.inlineEcho.content.length-2);e=e.replace(r,"{{-- "+u.trim()+" --}}")}s.inlineEcho!=null?e=e.replace(r,_s.printEcho(s.inlineEcho,this.transformOptions,this.phpFormatter,0,this.pintTransformer)):e=e.replace(r,"")}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((s,r)=>{e=e.replace(r,_s.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(r),this.pintTransformer))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((s,r)=>{e=e.replace(r,this.printDirective(s,this.indentLevel(r)))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((s,r)=>{let h="",u=0;s.isScript?h="//"+r:h="/*"+r+"*/",u=this.indentLevel(h),u==this.transformOptions.tabSize&&(u=0),e.includes(h)&&(e=e.replace(h,Me.indentRelative(s.content,u,this.transformOptions.tabSize)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(s=>{e=e.replace(s,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],s=Y.breakByNewLine(t),r=!1;for(let h=0;h<s.length;h++){let u=s[h].trim();if(r){if(u.length==0)continue;r=!1}else r=this.shouldCleanAfter(u);if(this.shouldCleanLine(u))for(let l=e.length-1;l>0&&e[l].trim().length==0;l--)e.pop();if(!this.removeLines.includes(u)){let l=s[h];this.removeLines.forEach(f=>{l.includes(f)&&(l=l.replace(f,""))}),e.push(l)}}return e.join(`
`)}reflowSlugs(t){let e=t,s=Y.breakByNewLine(e),r=[];for(let h=0;h<s.length;h++){let u=s[h].trimRight(),l=!1;for(let f=0;f<this.slugs.length;f++){let _=this.slugs[f];if(u.endsWith("<"+_)&&h+1<s.length){let m=s[h+1];if(m.trimLeft().startsWith("/>")){let I=m.indexOf("/>"),v=m.substring(I+2);r.push(u.trimRight()+" />");let x=u.indexOf("<"+_);r.push(" ".repeat(x)+v.trimLeft()),h+=1,l=!0;break}}}l||r.push(u)}return e=r.join(`
`),this.slugs.forEach(h=>{let u=this.open(h),l=this.close(h),f=this.selfClosing(h),_="/<"+h+"(.*?)>/gms",m="/</"+h+"(.*?)>/gms",I="/<"+h+"(.*?)/>/gms";e=e.replace(_,u),e=e.replace(m,l),e=e.replace(I,f)}),e}fromStructure(t){if(this.didPintFail)return this.doc.getContent();let e=this.reflowSlugs(t);this.structureLines=Y.breakByNewLine(e);let s=this.transformInlineDirectives(e);return s=this.transformContentDirectives(s),s=this.transformDynamicEcho(s),s=this.transformPairedDirectives(s),s=this.transformForElseWithEmpty(s),s=this.transformForElseWithNoEmpty(s),s=this.transformDynamicElementForElse(s),s=this.transformInlineEcho(s),s=this.transformConditions(s),s=this.transformDynamicElementConditions(s),s=this.transformSwitchStatements(s),s=this.transformDynamicElementSwitch(s),s=this.transformBreaks(s),s=this.transformProps(s),s=this.transformComments(s),s=this.transformVirtualComments(s),s=this.transformDirectiveParameters(s),s=this.transformExpressionParameters(s),s=this.transformEchoParameters(s),s=this.transformDynamicDirectives(s),s=this.cleanVirtualStructures(s),s=this.removeVirtualStructures(s),s=this.transformEmbeddedEcho(s),s=this.transformEmbeddedDirectives(s),s=this.transformExtractedDocuments(s),s=this.transformPhpBlock(s),this.ignoredLiteralBlocks.forEach((r,h)=>{let u=this.selfClosing(h),l=this.indentLevel(u);s=s.replace(u,this.dumpPreservedNodes(r))}),s}dumpPreservedNodes(t){let e="";return t.forEach(s=>{s instanceof Xt?e+=s.content:s instanceof wi||s instanceof ki?e+=s.nodeContent:s instanceof pt||s instanceof Oe?e+=s.sourceContent:s instanceof Fi?e+=s.nodeContent:(s instanceof nn||s instanceof Ii||s instanceof ri)&&(e+=s.sourceContent)}),e}}});var ge,dn=bt(()=>{"use strict";cn();Hf();Wf();qf();Pd();ge=class{constructor(){this.documentParser=new et;this.transformer=null;this.cursor=new qo(this);this.nodes=new Yo(this);this.errors=new Go(this)}static fromText(t,e=null){let s=new ge;return e!=null&&s.getParser().setSeedPosition(e),s.loadString(t)}static childFromText(t,e,s=null){let r=new ge;return s!=null&&r.getParser().setSeedPosition(s),r.getParser().withPhpValidator(e.getPhpValidator()),r.loadString(t),{renderNodes:r.getRenderNodes(),content:t,document:r}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new ca(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});var Dd=V((Y1,Ld)=>{"use strict";Ld.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":case".":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${i}" at line ${this.yylineno} (offset ${this.offset})`)}}});var wd=V((j1,Rd)=>{"use strict";Rd.exports={T_COMMENT:function(){for(;this.offset<this.size;){let i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let i=this.input(),t=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),i==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(i=this.input(),i==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var Bd=V((Q1,Fd)=>{"use strict";Fd.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let i=this.input();if(i=="<"){if(i=this.ahead(1),i=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(i=this._input[this.offset+4],i===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var Vd=V((z1,Ud)=>{"use strict";var fa=10,Md="2147483648";process.arch=="x64"&&(fa=19,Md="9223372036854775808");Ud.exports={consume_NUM:function(){let i=this.yytext[0],t=i===".";if(i==="0")if(i=this.input(),i==="x"||i==="X"){if(i=this.input(),i!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if(i=this.input(),i!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else if(i==="o"||i==="O"){if(i=this.input(),i!=="_"&&this.is_OCTAL())return this.consume_ONUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){let e=i;if(i=this.input(),i==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(i==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(i==="e"||i==="E"){if(e==="_"){this.unput(1);break}let s=2;if(i=this.input(),(i==="+"||i==="-")&&(s=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?s:s-1);break}if(!this.is_NUM()){i&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<fa-1?this.tok.T_LNUMBER:this.yytext.length<fa||this.yytext.length==fa&&this.yytext<Md?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER},consume_ONUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_OCTAL()){i&&this.unput(1);break}}return this.tok.T_LNUMBER}}});var Wd=V((K1,Hd)=>{"use strict";Hd.exports={matchST_LOOKING_FOR_PROPERTY:function(){let i=this.input();if(i==="-"){if(i=this.input(),i===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),i=this.input(),i==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}}}});var Gd=V(($1,qd)=>{"use strict";qd.exports={matchST_IN_SCRIPTING:function(){let i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),i=this._input[this.offset],(i===`
`||i==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!(i===" "||i==="	"||i===`
`||i==="\r")){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var Qd=V((J1,jd)=>{"use strict";var ms=[`
`,"\r"],Yd=[`
`,"\r",";"],WA=Yd.concat(["	"," ",",","]",")","/","=","!"]);jd.exports={T_CONSTANT_ENCAPSED_STRING:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let s=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,ms.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,e=this.offset-i,this.offset=i,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else{if(i=='"')break;if(i=="$"){if(i=this.input(),i=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if(i=this.input(),i=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(i,t){let e=this._input[i-2];if(!ms.includes(e))return!1;let s=!1,r=!1,h=0,u=this._input[i-1];if(this.version>=703){for(;u==="	"||u===" ";)u===" "?s=!0:u==="	"&&(r=!0),u=this._input[i+h],h++;if(i=i+h,ms.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){let l=this._input[i-1+this.heredoc_label.length];if((this.version>=703?WA:Yd).includes(l)){if(t){if(this.consume(h),s&&r)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=h,this.heredoc_label.indentation_uses_spaces=s,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let i=this.offset+1;for(;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!ms.includes(this._input[i-1]))for(;!ms.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let i=this._input[this.offset-1];for(;this.offset<this.size;)if(ms.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),ms.includes(i)||(i=this.input())),ms.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}i&&this.unput(1)}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var Kd=V((X1,zd)=>{"use strict";zd.exports={T_STRING:function(){let i=this.yytext.toLowerCase(),t=this.keywords[i];if(typeof t!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,i==="b"||i==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,s=this.input();for(;s==" ";)s=this.input();let r=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();let h=s.slice(0,-1).toLowerCase();r=h!=="extends"&&h!=="implements"}return this.unput(this.offset-e),r?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let i=this._input[this.offset-1],t=this.tokenTerminals[i];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),s=this.castKeywords[e];if(typeof s=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return s}return this.unput(this.offset-i),"("},"=":function(){let i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var Jd=V((Z1,$d)=>{"use strict";var qA=";:,.\\[]()|^&+-/*=%!~$<>?@";$d.exports={is_NUM:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){let i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){let i=this._input[this.offset-1];return qA.indexOf(i)!==-1},is_WHITESPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95},is_OCTAL:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<56||i===95}}});var Zd=V((tD,Xd)=>{"use strict";var Si=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};Si.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};Si.prototype.input=function(){let i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""};Si.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};Si.prototype.tryMatch=function(i){return i===this.ahead(i.length)};Si.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()};Si.prototype.ahead=function(i){let t=this._input.substring(this.offset,this.offset+i);return t[t.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(t+=`
`),t};Si.prototype.consume=function(i){for(let t=0;t<i;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};Si.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};Si.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this};Si.prototype.appendToken=function(i,t){return this.tokens.push([i,t]),this};Si.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i};Si.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this};Si.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};Si.prototype.next=function(){let i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(i=this.tokens.shift(),typeof i[1]=="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=i;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return i};[Dd(),wd(),Bd(),Vd(),Wd(),Gd(),Qd(),Kd(),Jd()].forEach(function(i){for(let t in i)Si.prototype[t]=i[t]});Xd.exports=Si});var qh=V((eD,tp)=>{"use strict";var GA=function(i,t,e){this.line=i,this.column=t,this.offset=e};tp.exports=GA});var ip=V((iD,ep)=>{"use strict";ep.exports={read_array:function(){let i=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(t=!0,i="]");let s=[];return this.next().token!==i&&(s=this.read_array_pair_list(t)),this.expect(i),this.next(),e(t,s)},read_array_pair_list:function(i){let t=this;return this.read_list(function(){return t.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!i&&this.token===")"||i&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,s=null,r=!1,h=!1;if(this.token==="&")this.next(),r=!0,s=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),h=!0,s=this.read_expr();else{let u=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=u,this.token==="&"?(this.next(),r=!0,s=this.read_variable(!0,!1)):s=this.read_expr()):s=u}return t(e,s,r,h)}}});var sp=V((nD,np)=>{"use strict";np.exports={read_class_declaration_statement:function(i){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let s=this.node("identifier"),r=this.text();this.next(),s=s(r);let h=this.read_extends_from(),u=this.read_implements_list();this.expect("{");let l=this.next().read_class_body(!0,!1),f=t(s,h,u,l,e);return i&&(f.attrGroups=i),f},read_class_modifiers:function(){let i=this.read_class_modifier({readonly:0,final_or_abstract:0});return[0,0,i.final_or_abstract,i.readonly]},read_class_modifier:function(i){return this.token===this.tok.T_READ_ONLY?(this.next(),i.readonly=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_ABSTRACT?(this.next(),i.final_or_abstract=1,i=this.read_class_modifier(i)):i.final_or_abstract===0&&this.token===this.tok.T_FINAL&&(this.next(),i.final_or_abstract=2,i=this.read_class_modifier(i)),i},read_class_body:function(i,t){let e=[],s=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let u=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(u);continue}this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list());let r=this.position(),h=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let u=this.read_constant_list(h,s);this.expect(";")&&this.next(),e=e.concat(u);continue}if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),h[0]=null,h[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,h,s,r)),s=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING))){let u=this.read_variable_list(h,s);s=[],this.expect(";"),this.next(),e=e.concat(u)}else this.error([this.tok.T_CONST,...i?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(i,t){let e=this.node("propertystatement"),s=this.read_list(function(){let h=this.node("property"),u=!1;this.token===this.tok.T_READ_ONLY&&(u=!0,this.next());let[l,f]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let _=this.node("identifier"),m=this.text().substring(1);return this.next(),_=_(m),this.token===";"||this.token===","?h(_,null,u,l,f,t||[]):this.token==="="?h(_,this.next().read_expr(),u,l,f,t||[]):(this.expect([",",";","="]),h(_,null,l,f,t||[]))},",");return e(null,s,i)},read_constant_list:function(i,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),s=this.read_list(function(){let h=this.node("constant"),u=null,l=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){u=this.node("identifier");let f=this.text();this.next(),u=u(f)}else this.expect("IDENTIFIER");return this.expect("=")&&(l=this.next().read_expr()),h(u,l)},",");return e(null,s,i,t||[])},read_member_flags:function(i){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,s=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,s=0;break;case this.tok.T_PROTECTED:e=0,s=1;break;case this.tok.T_PRIVATE:e=0,s=2;break;case this.tok.T_STATIC:e=1,s=1;break;case this.tok.T_ABSTRACT:e=2,s=1;break;case this.tok.T_FINAL:e=2,s=2;break}i&&(e==0&&s==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),s=-1):e==2&&s==1&&(this.error(),s=-1)),t[e]!==-1?this.error():s!==-1&&(t[e]=s)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let i=!1;this.token==="?"&&(i=!0,this.next());let t=this.read_types();if(i&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[i,t]},read_interface_declaration_statement:function(i){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_interface_extends_list();this.expect("{");let h=this.next().read_interface_body();return t(e,r,h,i||[])},read_interface_body:function(){let i=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let s=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let r=this.read_constant_list(s,t);this.expect(";")&&this.next(),i=i.concat(r),t=[]}else if(this.token===this.tok.T_FUNCTION){let r=this.read_function_declaration(2,s,t,e);r.parseFlags(s),i.push(r),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){let i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let s=this.next().read_class_body(!0,!1);return i(t,s)},read_trait_use_statement:function(){let i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(t,e)},read_trait_use_alias:function(){let i=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return i("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let s=null,r=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){r=this.node("identifier");let h=this.text();this.next(),r=r(h)}else s===!1&&this.expect(this.tok.T_STRING);return i("traitalias",t,e,r,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),i("traitalias",t,e,null,null)}}});var op=V((sD,rp)=>{"use strict";rp.exports={read_comment:function(){let i=this.text(),t=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=s,t},read_doc_comment:function(){let i=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),i=i(e),i.offset=t,this.prev=s,i}}});var hp=V((rD,ap)=>{"use strict";ap.exports={read_expr:function(i){let t=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),t("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return t("bin","|",i,this.next().read_expr());if(this.token==="&")return t("bin","&",i,this.next().read_expr());if(this.token==="^")return t("bin","^",i,this.next().read_expr());if(this.token===".")return t("bin",".",i,this.next().read_expr());if(this.token==="+")return t("bin","+",i,this.next().read_expr());if(this.token==="-")return t("bin","-",i,this.next().read_expr());if(this.token==="*")return t("bin","*",i,this.next().read_expr());if(this.token==="/")return t("bin","/",i,this.next().read_expr());if(this.token==="%")return t("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",i,this.next().read_expr());if(this.token==="<")return t("bin","<",i,this.next().read_expr());if(this.token===">")return t("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=t("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return t("bin","??",i,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",i,e,this.read_expr())}else t.destroy(i);return i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let i=null;switch(this.token){case this.tok.T_ISSET:{i=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_EMPTY:{i=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{i=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr());break}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){let i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){let i,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let s=null,r=this.innerList;i=this.node("list"),r||(s=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let h=this.read_array_pair_list(!1);this.expect(")")&&this.next();let u=!1;for(let l=0;l<h.length;l++)if(h[l]!==null&&h[l].kind!=="noop"){u=!0;break}return u||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),r?i(h,!1):(this.innerList=!1,this.expect("=")?s(i(h,!1),this.next().read_expr(),"="):i(h,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let s=this.node("throw"),r=this.next().read_expr();return s(r)}case this.tok.T_EXIT:{let s=this.lexer.yytext.toLowerCase()==="die";i=this.node("exit"),this.next();let r=this.read_exit_expr();return i(r,s)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let s=null,r=null;return i=this.node("yield"),this.next().is("EXPR")&&(s=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(r=s,s=this.next().read_expr())),i(s,r)}case this.tok.T_YIELD_FROM:return i=this.node("yieldfrom"),t=this.next().read_expr(),i(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let s=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(s),this.next()}}if(this.is("VARIABLE")){i=this.node(),t=this.read_variable(!1,!1);let s=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return s&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,t):i("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return s&&this.error("VARIABLE"),this.next(),i("post","+",t);case this.tok.T_DEC:return s&&this.error("VARIABLE"),this.next(),i("post","-",t);default:i.destroy(t)}}else if(this.is("SCALAR")){if(i=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let s=this.convertToList(t);t.loc&&(s.loc=t.loc);let r=this.next().read_expr();return i("assign",s,r,"=")}else i.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(i){let t=i.items.map(s=>(s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=this.convertToList(s.value)),s)),e=this.node("list")(t,!0);return i.loc&&(e.loc=i.loc),i.leadingComments&&(e.leadingComments=i.leadingComments),i.trailingComments&&(e.trailingComments=i.trailingComments),e},read_assignref:function(i,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),i("assignref",t,e)},read_inline_function:function(i,t){if(this.token===this.tok.T_FUNCTION){let _=this.read_function(!0,i,t);return _.attrGroups=t,_}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let s=this.is_reference();this.expect("(")&&this.next();let r=this.read_parameter_list();this.expect(")")&&this.next();let h=!1,u=null;this.token===":"&&(this.next().token==="?"&&(h=!0,this.next()),u=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let l=this.read_expr(),f=e(r,s,l,u,h,!!i);return f.attrGroups=t,f},read_match_expression:function(){let i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),i(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute(){let i=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(i,t)},read_attr_list(){let i=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());i.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){let i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[];if(this.token==="("){this.next();let r=this.read_expr();return this.expect(")"),this.next(),this.token==="("&&(t=this.read_argument_list()),i(r,t)}let e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let r=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let h=this.read_extends_from(),u=this.read_implements_list(),l=null;this.expect("{")&&(l=this.next().read_class_body(!0,!1));let f=r(null,h,u,l,[0,0,0]);return f.attrGroups=e,i(f,t)}let s=this.read_new_class_name();for(;this.token==="[";){let r=this.node("offsetlookup"),h=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),s=r(s,h)}return this.token==="("&&(t=this.read_argument_list()),i(s,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else if(this.token==="(")i=this.node("call")(i,this.read_argument_list());else return i;return i}}});var up=V((oD,lp)=>{"use strict";lp.exports={read_enum_declaration_statement:function(i){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=this.read_enum_value_type(),h=this.read_implements_list();this.expect("{");let u=this.next().read_class_body(!1,!0),l=t(e,r,h,u);return i&&(l.attrGroups=i),l},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let i=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let s=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(t,s)}}});var fp=V((aD,cp)=>{"use strict";cp.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(i,t,e,s){let r=this.read_function_declaration(i?1:t?2:0,t&&t[1]===1,e||[],s);return t&&t[2]==1?(r.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(r.body=this.read_code_block(!1),r.loc&&r.body.loc&&(r.loc.end=r.body.loc.end)),!i&&t&&r.parseFlags(t)),r},read_function_declaration:function(i,t,e,s){let r="function";i===1?r="closure":i===2&&(r="method");let h=this.node(r);this.expect(this.tok.T_FUNCTION)&&this.next();let u=this.is_reference(),l=!1,f=[],_=null,m=!1;if(i!==1){let x=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(l=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(l=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(l=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(l=this.text()),this.next()),l=x(l)}this.expect("(")&&this.next();let I=this.read_parameter_list(l.name==="__construct");this.expect(")")&&this.next(),i===1&&(f=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(m=!0,this.next()),_=this.read_types());let v=x=>(x.attrGroups=e||[],s&&x.loc&&(x.loc.start=s,x.loc.source&&(x.loc.source=this.lexer._input.substr(x.loc.start.offset,x.loc.end.offset-x.loc.start.offset))),x);return v(i===1?h(I,u,f,_,m,t):h(l,I,u,_,m))},read_lexical_vars:function(){let i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){let t=[];for(;this.token!=this.EOF;)if(t.push(i()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let i=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),i(t,!1)},read_parameter_list:function(i){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(i);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(i){let t=this.node("parameter"),e=null,s=null,r=null,h=!1,u=!1,l=[];this.token===this.tok.T_ATTRIBUTE&&(l=this.read_attr_list()),this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),u=!0):this.raiseError("readonly properties can be used only on class constructor"));let f=this.read_promoted();!u&&this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),u=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),h=!0),r=this.read_types(),h&&!r&&this.raiseError("Expecting a type definition combined with nullable operator");let _=this.is_reference(),m=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let v=this.text().substring(1);this.next(),e=e(v)}this.token=="="&&(s=this.next().read_expr());let I=t(e,r,s,_,m,u,h,f);return l&&(I.attrGroups=l),I},read_types(){let i="unset",t="union",e="intersection",s=[],r=i,h=this.read_type();if(!h)return null;for(s.push(h);this.token==="|"||this.version>=801&&this.token==="&";){let u=this.peek();if(u===this.tok.T_ELLIPSIS||u===this.tok.T_VARIABLE)break;r===i?r=this.token==="|"?t:e:(r===t&&this.token!=="|"||r===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),s.push(this.read_type())}return s.length===1?s[0]:r===e?this.node("intersectiontype")(s):this.node("uniontype")(s)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){let i=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";i&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(i=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),i("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?i("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}}});var pp=V((hD,dp)=>{"use strict";dp.exports={read_if:function(){let i=this.node("if"),t=this.next().read_if_expr(),e=null,s=null,r=!1;if(this.token===":"){r=!0,this.next(),e=this.node("block");let h=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}h.push(this.read_inner_statement())}e=e(null,h),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?s=this.read_if():this.token===this.tok.T_ELSE&&(s=this.next().read_statement());return i(t,e,s,r)},read_if_expr:function(){this.expect("(")&&this.next();let i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){let i=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let s=this.node("block"),r=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}r.push(this.read_inner_statement())}return t(e,s(null,r),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let i=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return i(null,t)}}});var mp=V((lD,_p)=>{"use strict";_p.exports={read_while:function(){let i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,s=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(s=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),i(t,e,s)},read_do:function(){let i=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(t,e)},read_for:function(){let i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],s=[],r=null,h=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(s=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOR)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach:function(){let i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,s=null,r=null,h=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),s=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=s,s=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(h=!0,r=this.read_short_form(this.tok.T_ENDFOREACH)):r=this.read_statement(),i(t,e,s,r,h)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let i=this.token==="[",t=this.node("list");this.next(),!i&&this.expect("(")&&this.next();let e=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),t(e,i)}else return this.read_variable(!1,!1)}}});var Tp=V((uD,gp)=>{"use strict";gp.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var kp=V((cD,xp)=>{"use strict";xp.exports={read_namespace:function(){let i=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(i){let t=this.node(),e,s=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,s=s.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(s.toLowerCase()==="parent")return t("parentreference",s);if(s.toLowerCase()==="self")return t("selfreference",s)}return t("name",s,e)},read_use_statement:function(){let i=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let s=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(s===null),this.expect("}")&&this.next()),i=i(e,s,t),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){let t=this.node("useitem"),e=null;i&&(e=this.read_use_type());let s=this.read_namespace_name(),r=this.read_use_alias();return t(s.name,r,e)},read_use_declarations:function(i){let t=[this.read_use_declaration(i)];for(;this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(i))}return t},read_use_alias:function(){let i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),i=t(e)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var yp=V((fD,vp)=>{"use strict";var Ep={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};vp.exports={resolve_special_chars:function(i,t){return t?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,s,r)=>Ep[s]?Ep[s]:s[0]==="x"||s[0]==="X"?String.fromCodePoint(parseInt(s.substr(1),16)):s[0]==="u"?String.fromCodePoint(parseInt(r,16)):String.fromCodePoint(parseInt(s,8))):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,t,e,s){if(t===0)return i;this.check_heredoc_indentation_level(i,t,e,s);let r=e?" ":"	",h=new RegExp(`\\n${r}{${t}}`,"g"),u=new RegExp(`^${r}{${t}}`);return s&&(i=i.replace(u,"")),i.replace(h,`
`)},check_heredoc_indentation_level:function(i,t,e,s){let r=i.length,h=0,u=0,l=!0,f=e?" ":"	",_=!1;if(!s){if(h=i.indexOf(`
`),h===-1)return;h++}for(;h<r;)l?i[h]===f?u++:_=!0:l=!1,i[h]!==`
`&&_&&u<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):_=!1,i[h]===`
`&&(l=!0,u=0),h++},read_dereferencable_scalar:function(){let i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),s=0;(e[0]==="b"||e[0]==="B")&&(s=1);let r=e[s]==='"';this.next();let h=this.resolve_special_chars(e.substring(s+1,e.length-1),r);t=t(r,h,s===1,e),this.token===this.tok.T_DOUBLE_COLON?i=this.read_static_getter(t):i=t}break;case this.tok.T_ARRAY:i=this.read_array();break;case"[":i=this.read_array();break}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let i,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return i=this.text(),this.next(),e(i,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));let s=i[i.length-1];s===`
`?i[i.length-2]==="\r"?i=i.substring(0,i.length-2):i=i.substring(0,i.length-1):s==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let r=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),r,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(i){let t,e,s=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=s(i,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=s(i,e)),t},read_encapsed_string_item:function(i){let t=this.node("encapsedpart"),e=null,s=!1,r=this.node(),h,u,l;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let f=this.text();this.next(),r=r("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(f,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):f,!1,f)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",s=!0,l=null,this.next().token===this.tok.T_STRING_VARNAME){l=this.node("variable");let f=this.text();this.next(),r.destroy(),this.token==="["?(l=l(f,!1),u=this.node("offsetlookup"),h=this.next().read_expr(),this.expect("]")&&this.next(),r=u(l,h)):r=l(f,!1)}else r=r("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",r.destroy(),r=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",r.destroy(),r=this.read_simple_variable(),this.token==="["&&(u=this.node("offsetlookup"),h=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),r=u(r,h)),this.token===this.tok.T_OBJECT_OPERATOR){u=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let f=this.node("identifier");l=this.text(),this.next(),r=u(r,f(l))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let f=this.text();this.next(),r.destroy(),r=r("string",!1,f,!1,f)}return this.lexer.heredoc_label.first_encaps_node=!1,t(r,e,s)},read_encapsed_string:function(i,t=!1){let e=this.lexer.yylloc.first_offset,s=this.node("encapsed");this.next();let r=this.lexer.yylloc.prev_offset-(t?1:0),h=[],u=null;for(i==="`"?u=this.ast.encapsed.TYPE_SHELL:i==='"'?u=this.ast.encapsed.TYPE_STRING:u=this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)h.push(this.read_encapsed_string_item(!0));if(h.length>0&&h[h.length-1].kind==="encapsedpart"&&h[h.length-1].expression.kind==="string"){let f=h[h.length-1].expression,_=f.value[f.value.length-1];_===`
`?f.value[f.value.length-2]==="\r"?f.value=f.value.substring(0,f.value.length-2):f.value=f.value.substring(0,f.value.length-1):_==="\r"&&(f.value=f.value.substring(0,f.value.length-1))}this.expect(i)&&this.next();let l=this.lexer._input.substring(u==="heredoc"?e:r-1,this.lexer.yylloc.first_offset);return s=s(h,l,u),i===this.tok.T_END_HEREDOC&&(s.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),s},get_magic_constant:function(){let i=this.node("magic"),t=this.text();return this.next(),i(t.toUpperCase(),t)}}});var Cp=V((dD,bp)=>{"use strict";bp.exports={read_top_statements:function(){let i=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_top_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_READ_ONLY:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let i=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let i=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?i(t,this.next().read_expr()):i(t,null)},",",!1)},read_declare_list:function(){let i=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),s=this.text();this.next(),e=e(s);let r=null;if(this.expect("=")&&(r=this.next().read_expr()),i.push(t(e,r)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=i,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let i=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_GLOBAL:{let i=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),i(t)}case this.tok.T_STATIC:{let i=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(i);let s=this.next().read_expr();return this.expectEndOfStatement(s),t("expressionstatement",s)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let i=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",s=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),i(s,e)}case this.tok.T_INLINE_HTML:{let i=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let s=this.node("inline");return this.next(),s(i,e?t+i:i)}case this.tok.T_UNSET:{let i=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),i(t)}case this.tok.T_DECLARE:{let i=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let s=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return i(s,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let i=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),i(t)}case";":return this.next(),null;case this.tok.T_STRING:{let i=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),s=this.node("identifier");if(this.next().token===":")return s=s(e),this.next(),i("label",s);s.destroy(),i.destroy(),this.lexer.tokens.push(t);let r=this.node("expressionstatement"),h=this.next().read_expr();return this.expectEndOfStatement(h),r(h)}case this.tok.T_GOTO:{let i=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return i(t)}default:{let i=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),i(t)}}},read_code_block:function(i){let t=this.node("block");this.expect("{")&&this.next();let e=i?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var Ip=V((pD,Np)=>{"use strict";Np.exports={read_switch:function(){let i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",s=this.read_switch_case_list();return i(t,s,e)},read_switch_case_list:function(){let i=null,t=this.node("block"),e=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)e.push(this.read_case_list(i));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(i){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let s=this.node("block"),r=[];for(;this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)r.push(this.read_inner_statement());return t(e,s(null,r))}}});var Sp=V((_D,Ap)=>{"use strict";Ap.exports={read_try:function(){this.expect(this.tok.T_TRY);let i=this.node("try"),t=null,e=[],s=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let r=this.node("catch");this.next().expect("(")&&this.next();let h=this.read_list(this.read_namespace_name,"|",!1),u=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(u=this.read_variable(!0,!1)),this.expect(")"),e.push(r(this.next().read_statement(),h,u))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),i(s,e,t)}}});var Pp=V((mD,Op)=>{"use strict";Op.exports={read_short_form:function(i){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(i,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(i.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(i,t,e){let s=[];if(this.token==t&&(e&&s.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{let r=i.apply(this,[]);if(r&&s.push(r),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(i))s.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=i);)s.push(this.text())}return s},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){let t=this.node("byref");this.next(),t=t(null);let e=i();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let i=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?i(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var Dp=V((gD,Lp)=>{"use strict";Lp.exports={read_variable:function(i,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let s=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(s.kind)===-1){let r=s.name.toLowerCase();r==="true"?e=s.destroy(e("boolean",!0,s.name)):r==="false"?e=s.destroy(e("boolean",!1,s.name)):r==="null"?e=s.destroy(e("nullkeyword",s.name)):(e.destroy(s),e=s)}else e.destroy(s),e=s}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,i,t)},read_static_getter:function(i,t){let e=this.node("staticlookup"),s,r;return this.next().is([this.tok.T_VARIABLE,"$"])?s=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(s=this.node("identifier"),r=this.text(),this.next(),s=s(r)):this.token==="{"?(s=this.node("literal"),r=this.next().read_expr(),this.expect("}")&&this.next(),s=s("literal",r,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),s=this.node("identifier"),r=this.text(),this.next(),s=s(r)),e(i,s)},read_what:function(i=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(i,t,e){let s,r;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":{let u=this.token==="[";s=this.node("offsetlookup"),this.next(),r=!1,e?(r=this.read_encaps_var_offset(),this.expect(u?"]":"}")&&this.next()):(u?this.token!=="]":this.token!=="}")?(r=this.read_expr(),this.expect(u?"]":"}")&&this.next()):this.next(),i=s(i,r);break}case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),s=this.node("staticlookup"),i=s(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{s=this.node("propertylookup"),i=s(i,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{s=this.node("nullsafepropertylookup"),i=s(i,this.read_what());break}default:break t}return i},read_encaps_var_offset:function(){let i=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),i=i("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),i=i("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),i=i("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),i=i("identifier",t)}return i},read_reference_variable:function(i){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let s=this.node();if(this.token=="{"&&!i)e=this.next().read_expr(),this.expect("}")&&this.next(),t=s("offsetlookup",t,e);else{s.destroy();break}}return t},read_simple_variable:function(){let i=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),i=i(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),i=i(e,!0);break}case"$":i=i(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),i=i(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),i=i(t,!1)}return i}}});var wp=V((TD,Rp)=>{"use strict";var YA=qh();function Yh(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}var Ei=function(i,t){this.lexer=i,this.ast=t,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(s){return[s,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};Ei.prototype.getTokenName=function(i){return Yh(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"};Ei.prototype.parse=function(i,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),s=[];for(this.next();this.token!=this.EOF;)s.push(this.read_start());s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let r=e(s,this._errors,this._docs,this._tokens);if(this.debug){let h=this.ast.checkNodes();if(h.length>0)throw h.forEach(function(u){u.position&&console.log("Node at line "+u.position.line+", column "+u.position.column),console.log(u.stack.join(`
`))}),new Error("Some nodes are not closed")}return r};Ei.prototype.raiseError=function(i,t,e,s){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let h=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw h.lineNumber=this.lexer.yylloc.first_line,h.fileName=this.filename,h.columnNumber=this.lexer.yylloc.first_column,h}let r=this.ast.prepare("error",null,this)(i,s,this.lexer.yylloc.first_line,e);return this._errors.push(r),r};Ei.prototype.error=function(i){let t="Parse Error : syntax error",e=this.getTokenName(this.token),s="";if(this.token!==this.EOF){if(Yh(this.token)){let r=this.text();r.length>10&&(r=r.substring(0,7)+"..."),e="'"+r+"' ("+e+")"}t+=", unexpected "+e}return i&&!Array.isArray(i)&&((Yh(i)||i.length===1)&&(s=", expecting "+this.getTokenName(i)),t+=s),this.raiseError(t,s,i,e)};Ei.prototype.position=function(){return new YA(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};Ei.prototype.node=function(i){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(t)));let e=this.ast.prepare(i,t,this);return e.postBuild=function(s){if(this._docIndex<this._docs.length)if(this._lastNode){let r=this.prev[2],h=this._docIndex;for(;h<this._docs.length&&!(this._docs[h].offset>r);h++);h>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,h)),this._docIndex=h)}else this.token===this.EOF&&(s.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=s}.bind(this),e}return this.ast.prepare(i,null,this)};Ei.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var Gh=["parser.next","parser.node","parser.showlog"];Ei.prototype.showlog=function(){let i=new Error().stack.split(`
`),t;for(let e=2;e<i.length;e++){t=i[e].trim();let s=!1;for(let r=0;r<Gh.length;r++)if(t.substring(3,3+Gh[r].length)===Gh[r]){s=!0;break}if(!s)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};Ei.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0};Ei.prototype.text=function(){return this.lexer.yytext};Ei.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};Ei.prototype.peek=function(){let i=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(i),t};Ei.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let i=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?i=[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:i=[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};Ei.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)};[ip(),sp(),op(),hp(),up(),fp(),pp(),mp(),Tp(),kp(),yp(),Cp(),Ip(),Sp(),Pp(),Dp()].forEach(function(i){for(let t in i){if(Object.prototype.hasOwnProperty.call(Ei.prototype,t))throw new Error("Function "+t+" is already defined - collision");Ei.prototype[t]=i[t]}});Rp.exports=Ei});var Mp=V((xD,Bp)=>{"use strict";var Fp={T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243},jA={values:Object.entries(Fp).reduce((i,[t,e])=>({...i,[e]:t}),{}),names:Fp};Bp.exports=Object.freeze(jA)});var Vp=V((kD,Up)=>{"use strict";var QA=function(i,t,e){this.source=i,this.start=t,this.end=e};Up.exports=QA});var hi=V((ED,Hp)=>{"use strict";var Rr=function(t,e,s){this.kind=t,e&&(this.leadingComments=e),s&&(this.loc=s)};Rr.prototype.setTrailingComments=function(i){this.trailingComments=i};Rr.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i};Rr.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this};Rr.extends=function(i,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=i,t};Hp.exports=Rr});var ke=V((vD,Gp)=>{"use strict";var Wp=hi(),qp="expression";Gp.exports=Wp.extends(qp,function(t,e,s){Wp.apply(this,[t||qp,e,s])})});var zp=V((yD,Qp)=>{"use strict";var Yp=ke(),jp="array";Qp.exports=Yp.extends(jp,function(t,e,s,r){Yp.apply(this,[jp,s,r]),this.items=e,this.shortForm=t})});var Xp=V((bD,Jp)=>{"use strict";var Kp=ke(),$p="arrowfunc";Jp.exports=Kp.extends($p,function(t,e,s,r,h,u,l,f){Kp.apply(this,[$p,l,f]),this.arguments=t,this.byref=e,this.body=s,this.type=r,this.nullable=h,this.isStatic=u||!1})});var i_=V((CD,e_)=>{"use strict";var Zp=ke(),t_="assign";e_.exports=Zp.extends(t_,function(t,e,s,r,h){Zp.apply(this,[t_,r,h]),this.left=t,this.right=e,this.operator=s})});var o_=V((ND,r_)=>{"use strict";var n_=ke(),s_="assignref";r_.exports=n_.extends(s_,function(t,e,s,r){n_.apply(this,[s_,s,r]),this.left=t,this.right=e})});var u_=V((ID,l_)=>{"use strict";var a_=hi(),h_="attribute";l_.exports=a_.extends(h_,function(t,e,s,r){a_.apply(this,[h_,s,r]),this.name=t,this.args=e})});var p_=V((AD,d_)=>{"use strict";var c_=hi(),f_="attrgroup";d_.exports=c_.extends(f_,function(t,e,s){c_.apply(this,[f_,e,s]),this.attrs=t||[]})});var Rs=V((SD,g_)=>{"use strict";var __=ke(),m_="operation";g_.exports=__.extends(m_,function(t,e,s){__.apply(this,[t||m_,e,s])})});var E_=V((OD,k_)=>{"use strict";var T_=Rs(),x_="bin";k_.exports=T_.extends(x_,function(t,e,s,r,h){T_.apply(this,[x_,r,h]),this.type=t,this.left=e,this.right=s})});var Ce=V((PD,b_)=>{"use strict";var v_=hi(),y_="statement";b_.exports=v_.extends(y_,function(t,e,s){v_.apply(this,[t||y_,e,s])})});var wr=V((LD,I_)=>{"use strict";var C_=Ce(),N_="block";I_.exports=C_.extends(N_,function(t,e,s,r){C_.apply(this,[t||N_,s,r]),this.children=e.filter(Boolean)})});var $n=V((DD,O_)=>{"use strict";var A_=ke(),S_="literal";O_.exports=A_.extends(S_,function(t,e,s,r,h){A_.apply(this,[t||S_,r,h]),this.value=e,s&&(this.raw=s)})});var R_=V((RD,D_)=>{"use strict";var P_=$n(),L_="boolean";D_.exports=P_.extends(L_,function(t,e,s,r){P_.apply(this,[L_,t,e,s,r])})});var M_=V((wD,B_)=>{"use strict";var w_=Ce(),F_="break";B_.exports=w_.extends(F_,function(t,e,s){w_.apply(this,[F_,e,s]),this.level=t})});var W_=V((FD,H_)=>{"use strict";var U_=ke(),V_="byref";H_.exports=U_.extends(V_,function(t,e,s){U_.apply(this,[V_,e,s]),this.what=t})});var j_=V((BD,Y_)=>{"use strict";var q_=ke(),G_="call";Y_.exports=q_.extends(G_,function(t,e,s,r){q_.apply(this,[G_,s,r]),this.what=t,this.arguments=e})});var $_=V((MD,K_)=>{"use strict";var Q_=Ce(),z_="case";K_.exports=Q_.extends(z_,function(t,e,s,r){Q_.apply(this,[z_,s,r]),this.test=t,this.body=e})});var tm=V((UD,Z_)=>{"use strict";var J_=Rs(),X_="cast";Z_.exports=J_.extends(X_,function(t,e,s,r,h){J_.apply(this,[X_,r,h]),this.type=t,this.raw=e,this.expr=s})});var sm=V((VD,nm)=>{"use strict";var em=Ce(),im="catch";nm.exports=em.extends(im,function(t,e,s,r,h){em.apply(this,[im,r,h]),this.body=t,this.what=e,this.variable=s})});var Un=V((HD,hm)=>{"use strict";var rm=Ce(),om="declaration",zA="",KA="public",$A="protected",JA="private",am=rm.extends(om,function(t,e,s,r){rm.apply(this,[t||om,s,r]),this.name=e});am.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.isReadonly=i[3]===1,this.kind!=="class"&&(i[0]===-1?this.visibility=zA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=KA:i[0]===1?this.visibility=$A:i[0]===2&&(this.visibility=JA),this.isStatic=i[1]===1)};hm.exports=am});var fm=V((WD,cm)=>{"use strict";var lm=Un(),um="class";cm.exports=lm.extends(um,function(t,e,s,r,h,u,l){lm.apply(this,[um,t,u,l]),this.isAnonymous=!t,this.extends=e,this.implements=s,this.body=r,this.attrGroups=[],this.parseFlags(h)})});var jh=V((qD,_m)=>{"use strict";var dm=Ce(),pm="constantstatement";_m.exports=dm.extends(pm,function(t,e,s,r){dm.apply(this,[t||pm,s,r]),this.constants=e})});var km=V((GD,xm)=>{"use strict";var mm=jh(),gm="classconstant",XA="",ZA="public",tS="protected",eS="private",Tm=mm.extends(gm,function(t,e,s,r,h,u){mm.apply(this,[t||gm,e,h,u]),this.parseFlags(s),this.attrGroups=r});Tm.prototype.parseFlags=function(i){i[0]===-1?this.visibility=XA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=ZA:i[0]===1?this.visibility=tS:i[0]===2&&(this.visibility=eS)};xm.exports=Tm});var bm=V((YD,ym)=>{"use strict";var Em=ke(),vm="clone";ym.exports=Em.extends(vm,function(t,e,s){Em.apply(this,[vm,e,s]),this.what=t})});var Am=V((jD,Im)=>{"use strict";var Cm=ke(),Nm="closure";Im.exports=Cm.extends(Nm,function(t,e,s,r,h,u,l,f){Cm.apply(this,[Nm,l,f]),this.uses=s,this.arguments=t,this.byref=e,this.type=r,this.nullable=h,this.isStatic=u||!1,this.body=null,this.attrGroups=[]})});var da=V((QD,Om)=>{"use strict";var Sm=hi();Om.exports=Sm.extends("comment",function(t,e,s,r){Sm.apply(this,[t,s,r]),this.value=e})});var Rm=V((zD,Dm)=>{"use strict";var Pm=da(),Lm="commentblock";Dm.exports=Pm.extends(Lm,function(t,e,s){Pm.apply(this,[Lm,t,e,s])})});var Mm=V((KD,Bm)=>{"use strict";var wm=da(),Fm="commentline";Bm.exports=wm.extends(Fm,function(t,e,s){wm.apply(this,[Fm,t,e,s])})});var Wm=V(($D,Hm)=>{"use strict";var Um=hi(),Vm="constant";Hm.exports=Um.extends(Vm,function(t,e,s,r){Um.apply(this,[Vm,s,r]),this.name=t,this.value=e})});var jm=V((JD,Ym)=>{"use strict";var qm=Ce(),Gm="continue";Ym.exports=qm.extends(Gm,function(t,e,s){qm.apply(this,[Gm,e,s]),this.level=t})});var $m=V((XD,Km)=>{"use strict";var Qm=wr(),zm="declare",pa=Qm.extends(zm,function(t,e,s,r,h){Qm.apply(this,[zm,e,r,h]),this.directives=t,this.mode=s});pa.MODE_SHORT="short";pa.MODE_BLOCK="block";pa.MODE_NONE="none";Km.exports=pa});var tg=V((ZD,Zm)=>{"use strict";var Jm=hi(),Xm="declaredirective";Zm.exports=Jm.extends(Xm,function(t,e,s,r){Jm.apply(this,[Xm,s,r]),this.key=t,this.value=e})});var sg=V((tR,ng)=>{"use strict";var eg=Ce(),ig="do";ng.exports=eg.extends(ig,function(t,e,s,r){eg.apply(this,[ig,s,r]),this.test=t,this.body=e})});var hg=V((eR,ag)=>{"use strict";var rg=Ce(),og="echo";ag.exports=rg.extends(og,function(t,e,s,r){rg.apply(this,[og,s,r]),this.shortForm=e,this.expressions=t})});var fg=V((iR,cg)=>{"use strict";var lg=ke(),ug="empty";cg.exports=lg.extends(ug,function(t,e,s){lg.apply(this,[ug,e,s]),this.expression=t})});var mg=V((nR,_g)=>{"use strict";var dg=$n(),pg="encapsed",Fr=dg.extends(pg,function(t,e,s,r,h){dg.apply(this,[pg,t,e,r,h]),this.type=s});Fr.TYPE_STRING="string";Fr.TYPE_SHELL="shell";Fr.TYPE_HEREDOC="heredoc";Fr.TYPE_OFFSET="offset";_g.exports=Fr});var kg=V((sR,xg)=>{"use strict";var gg=ke(),Tg="encapsedpart";xg.exports=gg.extends(Tg,function(t,e,s,r,h){gg.apply(this,[Tg,r,h]),this.expression=t,this.syntax=e,this.curly=s})});var bg=V((rR,yg)=>{"use strict";var Eg=ke(),vg="entry";yg.exports=Eg.extends(vg,function(t,e,s,r,h,u){Eg.apply(this,[vg,h,u]),this.key=t,this.value=e,this.byRef=s,this.unpack=r})});var Ag=V((oR,Ig)=>{"use strict";var Cg=Un(),Ng="enum";Ig.exports=Cg.extends(Ng,function(t,e,s,r,h,u){Cg.apply(this,[Ng,t,h,u]),this.valueType=e,this.implements=s,this.body=r,this.attrGroups=[]})});var Lg=V((aR,Pg)=>{"use strict";var Sg=hi(),Og="enumcase";Pg.exports=Sg.extends(Og,function(t,e,s,r){Sg.apply(this,[Og,s,r]),this.name=t,this.value=e})});var Fg=V((hR,wg)=>{"use strict";var Dg=hi(),Rg="error";wg.exports=Dg.extends(Rg,function(t,e,s,r,h,u){Dg.apply(this,[Rg,h,u]),this.message=t,this.token=e,this.line=s,this.expected=r})});var Vg=V((lR,Ug)=>{"use strict";var Bg=ke(),Mg="eval";Ug.exports=Bg.extends(Mg,function(t,e,s){Bg.apply(this,[Mg,e,s]),this.source=t})});var Gg=V((uR,qg)=>{"use strict";var Hg=ke(),Wg="exit";qg.exports=Hg.extends(Wg,function(t,e,s,r){Hg.apply(this,[Wg,s,r]),this.expression=t,this.useDie=e})});var zg=V((cR,Qg)=>{"use strict";var Yg=Ce(),jg="expressionstatement";Qg.exports=Yg.extends(jg,function(t,e,s){Yg.apply(this,[jg,e,s]),this.expression=t})});var Xg=V((fR,Jg)=>{"use strict";var Kg=Ce(),$g="for";Jg.exports=Kg.extends($g,function(t,e,s,r,h,u,l){Kg.apply(this,[$g,u,l]),this.init=t,this.test=e,this.increment=s,this.shortForm=h,this.body=r})});var iT=V((dR,eT)=>{"use strict";var Zg=Ce(),tT="foreach";eT.exports=Zg.extends(tT,function(t,e,s,r,h,u,l){Zg.apply(this,[tT,u,l]),this.source=t,this.key=e,this.value=s,this.shortForm=h,this.body=r})});var Qh=V((pR,rT)=>{"use strict";var nT=Un(),sT="function";rT.exports=nT.extends(sT,function(t,e,s,r,h,u,l){nT.apply(this,[sT,t,u,l]),this.arguments=e,this.byref=s,this.type=r,this.nullable=h,this.body=null,this.attrGroups=[]})});var lT=V((_R,hT)=>{"use strict";var oT=Ce(),aT="global";hT.exports=oT.extends(aT,function(t,e,s){oT.apply(this,[aT,e,s]),this.items=t})});var dT=V((mR,fT)=>{"use strict";var uT=Ce(),cT="goto";fT.exports=uT.extends(cT,function(t,e,s){uT.apply(this,[cT,e,s]),this.label=t})});var gT=V((gR,mT)=>{"use strict";var pT=Ce(),_T="halt";mT.exports=pT.extends(_T,function(t,e,s){pT.apply(this,[_T,e,s]),this.after=t})});var ET=V((TR,kT)=>{"use strict";var TT=hi(),xT="identifier",iS=TT.extends(xT,function(t,e,s){TT.apply(this,[xT,e,s]),this.name=t});kT.exports=iS});var CT=V((xR,bT)=>{"use strict";var vT=Ce(),yT="if";bT.exports=vT.extends(yT,function(t,e,s,r,h,u){vT.apply(this,[yT,h,u]),this.test=t,this.body=e,this.alternate=s,this.shortForm=r})});var ST=V((kR,AT)=>{"use strict";var NT=ke(),IT="include";AT.exports=NT.extends(IT,function(t,e,s,r,h){NT.apply(this,[IT,r,h]),this.once=t,this.require=e,this.target=s})});var DT=V((ER,LT)=>{"use strict";var OT=$n(),PT="inline";LT.exports=OT.extends(PT,function(t,e,s,r){OT.apply(this,[PT,t,e,s,r])})});var BT=V((vR,FT)=>{"use strict";var RT=Un(),wT="interface";FT.exports=RT.extends(wT,function(t,e,s,r,h,u){RT.apply(this,[wT,t,h,u]),this.extends=e,this.body=s,this.attrGroups=r})});var HT=V((yR,VT)=>{"use strict";var MT=Un(),UT="intersectiontype";VT.exports=MT.extends(UT,function(t,e,s){MT.apply(this,[UT,null,e,s]),this.types=t})});var YT=V((bR,GT)=>{"use strict";var WT=ke(),qT="isset";GT.exports=WT.extends(qT,function(t,e,s){WT.apply(this,[qT,e,s]),this.variables=t})});var KT=V((CR,zT)=>{"use strict";var jT=Ce(),QT="label";zT.exports=jT.extends(QT,function(t,e,s){jT.apply(this,[QT,e,s]),this.name=t})});var ZT=V((NR,XT)=>{"use strict";var $T=ke(),JT="list";XT.exports=$T.extends(JT,function(t,e,s,r){$T.apply(this,[JT,s,r]),this.items=t,this.shortForm=e})});var hr=V((IR,ix)=>{"use strict";var tx=ke(),ex="lookup";ix.exports=tx.extends(ex,function(t,e,s,r,h){tx.apply(this,[t||ex,r,h]),this.what=e,this.offset=s})});var ox=V((AR,rx)=>{"use strict";var nx=$n(),sx="magic";rx.exports=nx.extends(sx,function(t,e,s,r){nx.apply(this,[sx,t,e,s,r])})});var ux=V((SR,lx)=>{"use strict";var ax=ke(),hx="match";lx.exports=ax.extends(hx,function(t,e,s,r){ax.apply(this,[hx,s,r]),this.cond=t,this.arms=e})});var px=V((OR,dx)=>{"use strict";var cx=ke(),fx="matcharm";dx.exports=cx.extends(fx,function(t,e,s,r){cx.apply(this,[fx,s,r]),this.conds=t,this.body=e})});var Tx=V((PR,gx)=>{"use strict";var _x=Qh(),mx="method";gx.exports=_x.extends(mx,function(){_x.apply(this,arguments),this.kind=mx})});var ws=V((LR,Ex)=>{"use strict";var xx=hi(),kx="reference",nS=xx.extends(kx,function(t,e,s){xx.apply(this,[t||kx,e,s])});Ex.exports=nS});var Cx=V((DR,bx)=>{"use strict";var vx=ws(),yx="name",Br=vx.extends(yx,function(t,e,s,r){vx.apply(this,[yx,s,r]),this.name=t.replace(/\\$/,""),this.resolution=e});Br.UNQUALIFIED_NAME="uqn";Br.QUALIFIED_NAME="qn";Br.FULL_QUALIFIED_NAME="fqn";Br.RELATIVE_NAME="rn";bx.exports=Br});var Sx=V((RR,Ax)=>{"use strict";var Nx=wr(),Ix="namespace";Ax.exports=Nx.extends(Ix,function(t,e,s,r,h){Nx.apply(this,[Ix,e,r,h]),this.name=t,this.withBrackets=s||!1})});var Dx=V((wR,Lx)=>{"use strict";var Ox=ke(),Px="namedargument";Lx.exports=Ox.extends(Px,function(t,e,s,r){Ox.apply(this,[Px,s,r]),this.name=t,this.value=e})});var Bx=V((FR,Fx)=>{"use strict";var Rx=ke(),wx="new";Fx.exports=Rx.extends(wx,function(t,e,s,r){Rx.apply(this,[wx,s,r]),this.what=t,this.arguments=e})});var Hx=V((BR,Vx)=>{"use strict";var Mx=hi(),Ux="noop";Vx.exports=Mx.extends(Ux,function(t,e){Mx.apply(this,[Ux,t,e])})});var Yx=V((MR,Gx)=>{"use strict";var Wx=$n(),qx="nowdoc";Gx.exports=Wx.extends(qx,function(t,e,s,r,h){Wx.apply(this,[qx,t,e,r,h]),this.label=s})});var Kx=V((UR,zx)=>{"use strict";var jx=hi(),Qx="nullkeyword";zx.exports=jx.extends(Qx,function(t,e,s){jx.apply(this,[Qx,e,s]),this.raw=t})});var Zx=V((VR,Xx)=>{"use strict";var $x=hr(),Jx="nullsafepropertylookup";Xx.exports=$x.extends(Jx,function(t,e,s,r){$x.apply(this,[Jx,t,e,s,r])})});var nk=V((HR,ik)=>{"use strict";var tk=$n(),ek="number";ik.exports=tk.extends(ek,function(t,e,s,r){tk.apply(this,[ek,t,e,s,r])})});var ak=V((WR,ok)=>{"use strict";var sk=hr(),rk="offsetlookup";ok.exports=sk.extends(rk,function(t,e,s,r){sk.apply(this,[rk,t,e,s,r])})});var ck=V((qR,uk)=>{"use strict";var hk=Un(),lk="parameter";uk.exports=hk.extends(lk,function(t,e,s,r,h,u,l,f,_,m){hk.apply(this,[lk,t,_,m]),this.value=s,this.type=e,this.byref=r,this.variadic=h,this.readonly=u,this.nullable=l,this.flags=f||0,this.attrGroups=[]})});var _k=V((GR,pk)=>{"use strict";var fk=ws(),dk="parentreference",sS=fk.extends(dk,function(t,e,s){fk.apply(this,[dk,e,s]),this.raw=t});pk.exports=sS});var xk=V((YR,Tk)=>{"use strict";var mk=Rs(),gk="post";Tk.exports=mk.extends(gk,function(t,e,s,r){mk.apply(this,[gk,s,r]),this.type=t,this.what=e})});var yk=V((jR,vk)=>{"use strict";var kk=Rs(),Ek="pre";vk.exports=kk.extends(Ek,function(t,e,s,r){kk.apply(this,[Ek,s,r]),this.type=t,this.what=e})});var Ik=V((QR,Nk)=>{"use strict";var bk=ke(),Ck="print";Nk.exports=bk.extends(Ck,function(t,e,s){bk.apply(this,[Ck,e,s]),this.expression=t})});var Pk=V((zR,Ok)=>{"use strict";var Ak=wr(),Sk="program";Ok.exports=Ak.extends(Sk,function(t,e,s,r,h,u){Ak.apply(this,[Sk,t,h,u]),this.errors=e,s&&(this.comments=s),r&&(this.tokens=r)})});var wk=V((KR,Rk)=>{"use strict";var Lk=Ce(),Dk="property";Rk.exports=Lk.extends(Dk,function(t,e,s,r,h,u,l,f){Lk.apply(this,[Dk,l,f]),this.name=t,this.value=e,this.readonly=s,this.nullable=r,this.type=h,this.attrGroups=u})});var Uk=V(($R,Mk)=>{"use strict";var Fk=hr(),Bk="propertylookup";Mk.exports=Fk.extends(Bk,function(t,e,s,r){Fk.apply(this,[Bk,t,e,s,r])})});var Gk=V((JR,qk)=>{"use strict";var Vk=Ce(),Hk="propertystatement",rS="",oS="public",aS="protected",hS="private",Wk=Vk.extends(Hk,function(t,e,s,r,h){Vk.apply(this,[Hk,r,h]),this.properties=e,this.parseFlags(s)});Wk.prototype.parseFlags=function(i){i[0]===-1?this.visibility=rS:i[0]===null?this.visibility=null:i[0]===0?this.visibility=oS:i[0]===1?this.visibility=aS:i[0]===2&&(this.visibility=hS),this.isStatic=i[1]===1};qk.exports=Wk});var zk=V((XR,Qk)=>{"use strict";var Yk=ke(),jk="retif";Qk.exports=Yk.extends(jk,function(t,e,s,r,h){Yk.apply(this,[jk,r,h]),this.test=t,this.trueExpr=e,this.falseExpr=s})});var Xk=V((ZR,Jk)=>{"use strict";var Kk=Ce(),$k="return";Jk.exports=Kk.extends($k,function(t,e,s){Kk.apply(this,[$k,e,s]),this.expr=t})});var iE=V((tw,eE)=>{"use strict";var Zk=ws(),tE="selfreference",lS=Zk.extends(tE,function(t,e,s){Zk.apply(this,[tE,e,s]),this.raw=t});eE.exports=lS});var oE=V((ew,rE)=>{"use strict";var nE=ke(),sE="silent";rE.exports=nE.extends(sE,function(t,e,s){nE.apply(this,[sE,e,s]),this.expr=t})});var uE=V((iw,lE)=>{"use strict";var aE=Ce(),hE="static";lE.exports=aE.extends(hE,function(t,e,s){aE.apply(this,[hE,e,s]),this.variables=t})});var pE=V((nw,dE)=>{"use strict";var cE=hi(),fE="staticvariable";dE.exports=cE.extends(fE,function(t,e,s,r){cE.apply(this,[fE,s,r]),this.variable=t,this.defaultValue=e})});var TE=V((sw,gE)=>{"use strict";var _E=hr(),mE="staticlookup";gE.exports=_E.extends(mE,function(t,e,s,r){_E.apply(this,[mE,t,e,s,r])})});var vE=V((rw,EE)=>{"use strict";var xE=ws(),kE="staticreference",uS=xE.extends(kE,function(t,e,s){xE.apply(this,[kE,e,s]),this.raw=t});EE.exports=uS});var NE=V((ow,CE)=>{"use strict";var yE=$n(),bE="string";CE.exports=yE.extends(bE,function(t,e,s,r,h,u){yE.apply(this,[bE,e,r,h,u]),this.unicode=s,this.isDoubleQuote=t})});var OE=V((aw,SE)=>{"use strict";var IE=Ce(),AE="switch";SE.exports=IE.extends(AE,function(t,e,s,r,h){IE.apply(this,[AE,r,h]),this.test=t,this.body=e,this.shortForm=s})});var RE=V((hw,DE)=>{"use strict";var PE=Ce(),LE="throw";DE.exports=PE.extends(LE,function(t,e,s){PE.apply(this,[LE,e,s]),this.what=t})});var ME=V((lw,BE)=>{"use strict";var wE=Un(),FE="trait";BE.exports=wE.extends(FE,function(t,e,s,r){wE.apply(this,[FE,t,s,r]),this.body=e})});var WE=V((uw,HE)=>{"use strict";var UE=hi(),VE="traitalias",cS="",fS="public",dS="protected",pS="private";HE.exports=UE.extends(VE,function(t,e,s,r,h,u){UE.apply(this,[VE,h,u]),this.trait=t,this.method=e,this.as=s,this.visibility=cS,r&&(r[0]===0?this.visibility=fS:r[0]===1?this.visibility=dS:r[0]===2&&(this.visibility=pS))})});var jE=V((cw,YE)=>{"use strict";var qE=hi(),GE="traitprecedence";YE.exports=qE.extends(GE,function(t,e,s,r,h){qE.apply(this,[GE,r,h]),this.trait=t,this.method=e,this.instead=s})});var $E=V((fw,KE)=>{"use strict";var QE=hi(),zE="traituse";KE.exports=QE.extends(zE,function(t,e,s,r){QE.apply(this,[zE,s,r]),this.traits=t,this.adaptations=e})});var tv=V((dw,ZE)=>{"use strict";var JE=Ce(),XE="try";ZE.exports=JE.extends(XE,function(t,e,s,r,h){JE.apply(this,[XE,r,h]),this.body=t,this.catches=e,this.always=s})});var rv=V((pw,sv)=>{"use strict";var ev=ws(),iv="typereference",nv=ev.extends(iv,function(t,e,s,r){ev.apply(this,[iv,s,r]),this.name=t,this.raw=e});nv.types=["int","float","string","bool","object","array","callable","iterable","void","static"];sv.exports=nv});var lv=V((_w,hv)=>{"use strict";var ov=Rs(),av="unary";hv.exports=ov.extends(av,function(t,e,s,r){ov.apply(this,[av,s,r]),this.type=t,this.what=e})});var dv=V((mw,fv)=>{"use strict";var uv=Un(),cv="uniontype";fv.exports=uv.extends(cv,function(t,e,s){uv.apply(this,[cv,null,e,s]),this.types=t})});var gv=V((gw,mv)=>{"use strict";var pv=Ce(),_v="unset";mv.exports=pv.extends(_v,function(t,e,s){pv.apply(this,[_v,e,s]),this.variables=t})});var Ev=V((Tw,kv)=>{"use strict";var Tv=Ce(),xv="usegroup";kv.exports=Tv.extends(xv,function(t,e,s,r,h){Tv.apply(this,[xv,r,h]),this.name=t,this.type=e,this.items=s})});var Cv=V((xw,bv)=>{"use strict";var vv=Ce(),yv="useitem",zh=vv.extends(yv,function(t,e,s,r,h){vv.apply(this,[yv,r,h]),this.name=t,this.alias=e,this.type=s});zh.TYPE_CONST="const";zh.TYPE_FUNCTION="function";bv.exports=zh});var Sv=V((kw,Av)=>{"use strict";var Nv=ke(),Iv="variable";Av.exports=Nv.extends(Iv,function(t,e,s,r){Nv.apply(this,[Iv,s,r]),this.name=t,this.curly=e||!1})});var Dv=V((Ew,Lv)=>{"use strict";var Ov=ke(),Pv="variadic";Lv.exports=Ov.extends(Pv,function(t,e,s){Ov.apply(this,[Pv,e,s]),this.what=t})});var Bv=V((vw,Fv)=>{"use strict";var Rv=hi(),wv="variadicplaceholder";Fv.exports=Rv.extends(wv,function(t,e){Rv.apply(this,[wv,t,e])})});var Hv=V((yw,Vv)=>{"use strict";var Mv=Ce(),Uv="while";Vv.exports=Mv.extends(Uv,function(t,e,s,r,h){Mv.apply(this,[Uv,r,h]),this.test=t,this.body=e,this.shortForm=s})});var Yv=V((bw,Gv)=>{"use strict";var Wv=ke(),qv="yield";Gv.exports=Wv.extends(qv,function(t,e,s,r){Wv.apply(this,[qv,s,r]),this.value=t,this.key=e})});var Kv=V((Cw,zv)=>{"use strict";var jv=ke(),Qv="yieldfrom";zv.exports=jv.extends(Qv,function(t,e,s){jv.apply(this,[Qv,e,s]),this.value=t})});var Jv=V((Nw,$v)=>{"use strict";var _S=Vp(),mS=qh(),Oi=function(i,t){this.withPositions=i,this.withSource=t};Oi.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,t){i.forEach(function(e){Oi.precedence[e]=t+1})});Oi.prototype.isRightAssociative=function(i){return i==="**"||i==="??"};Oi.prototype.swapLocations=function(i,t,e,s){this.withPositions&&(i.loc.start=t.loc.start,i.loc.end=e.loc.end,this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Oi.prototype.resolveLocations=function(i,t,e,s){this.withPositions&&(i.loc.start.offset>t.loc.start.offset&&(i.loc.start=t.loc.start),i.loc.end.offset<e.loc.end.offset&&(i.loc.end=e.loc.end),this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};Oi.prototype.resolvePrecedence=function(i,t){let e,s,r;return i.kind==="call"?this.resolveLocations(i,i.what,i,t):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,t):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(s=Oi.precedence[i.type],r=Oi.precedence[i.right.type],s&&r&&r<=s&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(e=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e)):i.right.kind==="retif"&&(s=Oi.precedence[i.type],r=Oi.precedence["?"],s&&r&&r<=s&&(e=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e))):(i.kind==="silent"||i.kind==="cast")&&i.expr&&!i.expr.parenthesizedExpression?i.expr.kind==="bin"?(e=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.expr.kind==="retif"&&(e=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(e=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.what.kind==="retif"&&(e=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(e=i.falseExpr,i.falseExpr=e.test,this.swapLocations(i,i.test,i.falseExpr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(s=Oi.precedence["="],r=Oi.precedence[i.right.type],s&&r&&r<s&&(e=i.right,i.right=i.right.left,e.left=i,this.swapLocations(e,e.left,i.right,t),i=e)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,t),i};Oi.prototype.prepare=function(i,t,e){let s=null;(this.withPositions||this.withSource)&&(s=e.position());let r=this,h=function(){let u=null,l=Array.prototype.slice.call(arguments);if(l.push(t),r.withPositions||r.withSource){let m=null;r.withSource&&(m=e.lexer._input.substring(s.offset,e.prev[2])),u=new _S(m,s,new mS(e.prev[0],e.prev[1],e.prev[2])),l.push(u)}i||(i=l.shift());let f=r[i];if(typeof f!="function")throw new Error('Undefined node "'+i+'"');let _=Object.create(f.prototype);return f.apply(_,l),h.instance=_,h.trailingComments&&(_.trailingComments=h.trailingComments),typeof h.postBuild=="function"&&h.postBuild(_),e.debug&&delete r.stack[h.stackUid],r.resolvePrecedence(_,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:s,stack:new Error().stack.split(`
`).slice(3,5)},h.stackUid=this.stackUid),h.setTrailingComments=function(u){h.instance?h.instance.setTrailingComments(u):h.trailingComments=u},h.destroy=function(u){t&&(u?u.leadingComments?u.leadingComments=t.concat(u.leadingComments):u.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete r.stack[h.stackUid]},h};Oi.prototype.checkNodes=function(){let i=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,i.push(this.stack[t]));return this.stack={},i};[zp(),Xp(),i_(),o_(),u_(),p_(),E_(),wr(),R_(),M_(),W_(),j_(),$_(),tm(),sm(),fm(),km(),bm(),Am(),da(),Rm(),Mm(),Wm(),jh(),jm(),Un(),$m(),tg(),sg(),hg(),fg(),mg(),kg(),bg(),Ag(),Lg(),Fg(),Vg(),Gg(),ke(),zg(),Xg(),iT(),Qh(),lT(),dT(),gT(),ET(),CT(),ST(),DT(),BT(),HT(),YT(),KT(),ZT(),$n(),hr(),ox(),ux(),px(),Tx(),Cx(),Sx(),Dx(),Bx(),hi(),Hx(),Yx(),Kx(),Zx(),nk(),ak(),Rs(),ck(),_k(),xk(),yk(),Ik(),Pk(),wk(),Uk(),Gk(),ws(),zk(),Xk(),iE(),oE(),Ce(),uE(),pE(),TE(),vE(),NE(),OE(),RE(),ME(),WE(),jE(),$E(),tv(),rv(),lv(),dv(),gv(),Ev(),Cv(),Sv(),Dv(),Bv(),Hv(),Yv(),Kv()].forEach(function(i){Oi.prototype[i.kind]=i});$v.exports=Oi});var Jh=V((Iw,Jn)=>{"use strict";var Xv=Zd(),Zv=wp(),ty=Mp(),ey=Jv();function Kh(i,t){let e=Object.keys(i),s=e.length;for(;s--;){let r=e[s],h=i[r];h===null?delete t[r]:typeof h=="function"?t[r]=h.bind(t):Array.isArray(h)?t[r]=Array.isArray(t[r])?t[r].concat(h):h:typeof h=="object"?t[r]=typeof t[r]=="object"?Kh(h,t[r]):h:t[r]=h}return t}var Ji=function(i){if(typeof this=="function")return new this(i);if(this.tokens=ty,this.lexer=new Xv(this),this.ast=new ey,this.parser=new Zv(this.lexer,this.ast),i&&typeof i=="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){let t=i.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+i.parser.version);i.parser.version=t}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}Kh(i,this),this.lexer.version=this.parser.version}},$h=function(i){return typeof i.write=="function"?i.toString():i};Ji.create=function(i){return new Ji(i)};Ji.parseEval=function(i,t){return new Ji(t).parseEval(i)};Ji.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=$h(i),this.parser.parse(i,"eval")};Ji.parseCode=function(i,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new Ji(e).parseCode(i,t)};Ji.prototype.parseCode=function(i,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=$h(i),this.parser.parse(i,t)};Ji.tokenGetAll=function(i,t){return new Ji(t).tokenGetAll(i)};Ji.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=$h(i);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(i);let s=this.lexer.lex()||t,r=[];for(;s!=t;){let h=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,s)&&(h=[e[s],h,this.lexer.yylloc.first_line]),r.push(h),s=this.lexer.lex()||t}return r};Jn.exports=Ji;Jn.exports.tokens=ty;Jn.exports.lexer=Xv;Jn.exports.AST=ey;Jn.exports.parser=Zv;Jn.exports.combine=Kh;Jn.exports.Engine=Ji;Jn.exports.default=Ji});var iy,_a,ny=bt(()=>{"use strict";iy=en(Jh()),_a=class{constructor(){this.lastError=null}isValid(t,e=!0){let s=new iy.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?s.parseEval(t):s.parseCode(t,"test.php")}catch(r){return r instanceof SyntaxError&&(this.lastError=r),!1}return this.lastError=null,!0}getLastError(){return this.lastError}}});var ma,sy=bt(()=>{"use strict";ma=class{static printError(t,e){var l,f;let s=t.message+`

`,r=(f=(l=t.node)==null?void 0:l.startPosition)==null?void 0:f.line,h=r;e.forEach((_,m)=>{h=m});let u=h.toString().length;return e.forEach((_,m)=>{let I=m.toString(),v="",x=0;x=u-I.length,r==m?v=" >"+"0".repeat(x)+I+"| ":v="  "+"0".repeat(x)+I+"| ",s+=v+_+`
`}),s}}});var ga,ry=bt(()=>{"use strict";dn();ga=class{constructor(){this.filePath="";this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null}withTransformOptions(t){return this.transformOptions=t,this}withFilePath(t){return this.filePath=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(ge.fromText(t))}formatDocument(t){if(this.preFormatter!=null){let r=this.preFormatter(t);if(r!=null)return r}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withFilePath(this.filePath).withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter),t.transform().setFormattingOptions(this.formattingOptions),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let e=t.transform().toStructure(),s=this.htmlFormatter(e);return t.transform().fromStructure(s)}}});var Ta,oy=bt(()=>{"use strict";sy();ry();fs();Ta=class extends ga{constructor(t,e){super(),ea(t),this.withHtmlFormatter(ia).withFilePath(t.filepath).withPhpFormatter(gd).withBlockPhpFormatter(Td).withPhpTagFormatter(xd).withJsonFormatter(fd).withTransformOptions(e).withPreFormatter(s=>{var r,h,u;if(s.errors.hasStructureErrors()){let l=s.errors.getFirstStructureError(),f=s.getLinesAround((u=(h=(r=l.node)==null?void 0:r.startPosition)==null?void 0:h.line)!=null?u:1),_=ma.printError(l,f);throw new SyntaxError(_)}return null})}}});var ay,xa,hy=bt(()=>{"use strict";ay=en(Jh());yh();xa=class{constructor(){this.structures=[];this.hasStructuresWithUnknownLocations=!1;this.excludedStructures=[];this.allowedMethods=[];this.phpAssignToGeneric=new Map([["=",K.Assignment],["+=",K.AdditionAssignment],["-=",K.SubtractionAssignment],["*=",K.MultiplicationAssignment],["/=",K.DivisionAssignment],["%=",K.ModulusAssignment],[".=",K.ConcatenationAssignment],["%=",K.BitwiseAndAssignment],["|=",K.BitwiseOrAssignment],["^=",K.BitwiseXorAssignment],["<<=",K.LeftShiftAssignment],[">>=",K.RightShiftAssignment]]);this.phpOperatorsToGeneric=new Map([[".",K.Concat],["+",K.Addition],["-",K.Substraction],["*",K.Multiplication],["/",K.Division],["%",K.Modulus],["**",K.Exponentiation],[">",K.GreaterThan],["&",K.BitwiseAnd],["|",K.BitwiseOr],["^",K.BitwiseXor],["<<",K.LeftShift],[">>",K.RightShift],["==",K.Equality],["===",K.Identity],["<",K.LessThan],["<>",K.Inequality],["!=",K.Inequality],["!==",K.NotIdentity],[">=",K.GreaterThanEqual],["<=",K.LessThanEqual],["&&",K.CompAnd],["and",K.CompAnd],["||",K.CompOr],["or",K.CompOr],["xor",K.Xor]]);this.parser=new ay.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}})}hasUnknownLocations(){return this.hasStructuresWithUnknownLocations}getStructureLocations(t,e){let s=this.parser.parseCode(t,"code.php");this.findStructureLocations(s,e)}setExcludedStructures(t){this.excludedStructures=t}setAllowedMethods(t){this.allowedMethods=t}getStructures(){return this.structures}findStructureLocations(t,e){let s=[],r=this.excludedStructures,h=this.phpOperatorsToGeneric,u=this.phpAssignToGeneric,l=this.allowedMethods,f=!1;function _(m){var I,v,x,N,R,H,X,at,$,z,ht,F,q,gt,nt,yt,Ht,zt,Bt,Ct;if(m.kind==="if"){let Tt=m;Tt.test.loc==null&&(f=!0),r.includes(K.IfStatement)&&s.push({label:K.IfStatement,start:((v=(I=Tt.test.loc)==null?void 0:I.start.offset)!=null?v:-1)-e,end:((N=(x=Tt.test.loc)==null?void 0:x.end.offset)!=null?N:-1)-e})}else if(m.kind=="retif"){let Tt=m;Tt.test.loc==null&&(f=!0),r.includes(K.TernaryStatement)&&s.push({label:K.TernaryStatement,start:((H=(R=Tt.test.loc)==null?void 0:R.start.offset)!=null?H:-1)-e,end:((at=(X=Tt.test.loc)==null?void 0:X.end.offset)!=null?at:-1)-e+2})}else if(m.kind=="assign"){let Tt=m,Ut=!0;(Tt.left.loc==null||Tt.right.loc==null)&&(f=!0);let _t=Tt.operator;u.has(_t)?_t=u.get(_t):_t=K.Assignment,r.includes(_t)||(Ut=!1),Ut&&s.push({label:_t,start:((z=($=Tt.left.loc)==null?void 0:$.start.offset)!=null?z:-1)-e,end:((F=(ht=Tt.right.loc)==null?void 0:ht.end.offset)!=null?F:-1)-e})}else if(m.kind=="bin"){let Tt=m,Ut=!0;(Tt.left.loc==null||Tt.right.loc==null)&&(f=!0);let _t=Tt.kind.toLowerCase();h.has(_t)?_t=h.get(_t):_t=K.BinCompare,r.includes(_t)||(Ut=!1),Ut&&s.push({label:_t,start:((gt=(q=Tt.left.loc)==null?void 0:q.start.offset)!=null?gt:-1)-e,end:((yt=(nt=Tt.right.loc)==null?void 0:nt.end.offset)!=null?yt:-1)-e})}else if(m.kind=="call"){let Tt=m,Ut=!0;if(Tt.what.kind=="propertylookup"){let _t=Tt.what;if(_t.offset.kind=="identifier"){let ct=_t.offset;l.includes(ct.name)&&(Ut=!1)}}r.includes(K.CallStatement)||(Ut=!1),Ut&&(Tt.loc==null&&(f=!0),s.push({label:K.CallStatement,start:((zt=(Ht=Tt.loc)==null?void 0:Ht.start.offset)!=null?zt:-1)-e,end:((Ct=(Bt=Tt.loc)==null?void 0:Bt.end.offset)!=null?Ct:-1)-e}))}for(let Tt in m)m.hasOwnProperty(Tt)&&typeof m[Tt]=="object"&&m[Tt]&&_(m[Tt])}_(t),this.hasStructuresWithUnknownLocations=f,this.structures=s}}});var ka,ly=bt(()=>{"use strict";In();us();cs();An();ka=class{constructor(){this.ignoreRanges=[];this.strings=[];this.nodes=[];this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[];this.nodeIndex=0;this.hasStringNodesInResult=!1}advance(t){for(let e=0;e<t;e++)this.currentIndex++,this.checkCurrentOffsets()}encounteredFailure(){}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}setIgnoreRanges(t){this.ignoreRanges=t}hasStringNodes(){return this.hasStringNodesInResult}parse(t){for(this.strings=[],this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur=="/"&&this.next=="/"){Bi(this,!0);continue}if(this.cur=="/"&&this.next=="*"){Mi(this,!0);continue}if($e(this.cur)){let e=this.cur,s=this.currentIndex;if(this.currentContent.length>0){let u={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(u),this.currentContent=[]}let r=Ri(this),h=!1;for(let u=0;u<this.ignoreRanges.length;u++){let l=this.ignoreRanges[u];if(s>=l.start&&this.currentIndex<=l.end){h=!0;break}}if(h){this.currentContent.push(e);for(let u=0;u<r.value.length;u++)this.currentContent.push(r.value[u]);this.currentContent.push(e)}else{this.strings.push(r.value);let u={content:e+r.value+e,type:"string",index:this.nodeIndex};this.hasStringNodesInResult=!0,this.nodeIndex++,this.nodes.push(u)}if(this.currentIndex=r.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e={content:this.currentContent.join(""),type:"literal",index:this.nodeIndex};this.nodeIndex++,this.nodes.push(e),this.currentContent=[]}}getParsedNodes(){return this.nodes}}});var Ea,uy=bt(()=>{"use strict";hy();fs();We();ly();sh();Ea=class{constructor(t){this.mergeRanges=[];this.charsToAvoid=[`
`,"$","{",'"',"'"];this.classRuleEngine=t,this.phpStructuresAnalyzer=new xa,this.stringParser=new ka}setAllowedMethodNames(t){this.phpStructuresAnalyzer.setAllowedMethods(t)}setExcludedLanguageStructures(t){this.phpStructuresAnalyzer.setExcludedStructures(t)}withAdditionalRanges(t){this.mergeRanges=this.mergeRanges.concat(t)}isSafeToProcess(t){if(!t.includes(" ")||t.includes(", "))return!1;for(let e=0;e<this.charsToAvoid.length;e++)if(t.includes(this.charsToAvoid[e]))return!1;return this.classRuleEngine.canTransformString(t)}emulateString(t){let e=Y.makeSlug(32),s=`Emulate:${e}=`;if(this.stringParser.setIgnoreRanges(this.phpStructuresAnalyzer.getStructures().concat(this.mergeRanges)),this.stringParser.parse(t),!this.stringParser.hasStringNodes())return t;let r=this.stringParser.getParsedNodes(),h=new Map,u=new Map,l="",f=0;r.forEach(v=>{if(v.type=="string"){let x=v.content.substring(1,v.content.length-1);if(!this.isSafeToProcess(x))return;h.set(v.index,v.content[0]),l+=`<!-- "${s}${v.index}"-->
`,l+=`<div class="${x}"></div>
`,f+=2}});try{l=md(l)}catch{return t}let _=new hs;_.remove(l);let m=_.getStrings();if(m.length!=f)return t;for(let v=0;v<m.length;v++){let x=m[v];if(x.startsWith(s)){x=x.substring(s.length).trim();let N=parseInt(x);if(v+1<m.length){let R=m[v+1];u.set(N,R),v++}}}let I="";return r.forEach(v=>{if(v.type=="literal"||!u.has(v.index)){I+=v.content;return}let x=h.get(v.index),N=u.get(v.index);I+=x+N+x}),I}emulatePhpNode(t){let e="<?php "+t;return this.phpStructuresAnalyzer.getStructureLocations(e,0),this.emulateString(e).trimLeft().substring(6)}emulatePhpTag(t){return this.phpStructuresAnalyzer.getStructureLocations(t,0),this.emulateString(t)}}});var va,cy=bt(()=>{"use strict";We();dn();we();uy();Eh();Qo();Wh();va=class{constructor(t){this.phpValidator=null;this.isIgnoring=!1;this.classStringConfig=t,this.classRuleEngine=new jo(this.classStringConfig),this.parserOptions=Ho()}withPhpValidator(t){return this.phpValidator=t,this}withParserOptions(t){return this.parserOptions=t,this}getEmulator(){let t=new Ea(this.classRuleEngine);return t.setExcludedLanguageStructures(this.classStringConfig.ignoredLanguageStructures),t.setAllowedMethodNames(this.classStringConfig.allowedMethodNames),t}transform(t){var h;let e=new ge;e.getParser().withParserOptions(this.parserOptions).withPhpValidator(this.phpValidator),e.loadString(t);let s=e.getAllNodes();if(e.getParser().getDidRecovery())return t;let r="";for(let u=0;u<s.length;u++){let l=s[u];if(l instanceof Xt)r+=l.content;else if(l instanceof wi)r+=l.nodeContent;else if(l instanceof ki)r+=l.nodeContent;else if(l instanceof pt){if(this.isIgnoring||this.classStringConfig.excludedDirectives.includes(l.directiveName.toLowerCase()))r+=l.sourceContent;else if(l.directiveName=="php")if(l.isClosedBy!=null)if(this.isIgnoring||!this.classRuleEngine.canTransformBladePhp(l))r+=l.sourceContent+l.documentContent;else if((h=this.phpValidator)!=null&&h.isValid(l.documentContent,!0)){let f=this.getEmulator();r+="@php"+f.emulatePhpNode(l.documentContent)}else r+=l.sourceContent+l.documentContent;else r+=l.sourceContent;else if(l.directiveName=="verbatim")r+=l.sourceContent+l.innerContent;else if(this.isIgnoring||l.hasJsonParameters||!this.classRuleEngine.canTransformDirective(l))r+=l.sourceContent;else if(!l.hasDirectiveParameters||!l.hasValidPhp()?r+=l.sourceContent:r+=this.getEmulator().emulateString(l.sourceContent),u+1<s.length&&s[u+1]instanceof Xt){let f=s[u+1];if(f.content.length==0)continue;let _=f.content[0];if(Y.ctypePunct(_))continue;Y.ctypeSpace(_)||(r+=" ")}}else if(l instanceof Oe)if(this.isIgnoring||!this.classRuleEngine.canTransformBladeEcho(l)||!l.hasValidPhp())r+=l.sourceContent;else{let f=this.getEmulator(),_=f.emulatePhpNode(l.content).trim(),m="{{ ",I=" }}";l instanceof On?(m="{!! ",I=" !!}"):l instanceof Pn&&(m="{{{ ",I=" }}}"),r+=m+_+I}else l instanceof Fi?r+=l.nodeContent:l instanceof nn?(r+=l.sourceContent,l.innerContent.trim()==Mn.FormatIgnoreStart?this.isIgnoring=!0:l.innerContent.trim()==Mn.FormatIgnoreEnd&&(this.isIgnoring=!1)):l instanceof Ii?r+=l.sourceContent:l instanceof ri&&(this.isIgnoring||!this.classRuleEngine.canTransformInlinePhp(l)||!l.hasValidPhp()?r+=l.sourceContent:r+=this.getEmulator().emulatePhpTag(l.sourceContent))}return r}}});function fy(i,t,e,s){let r=!1,h=i.content.substring(1,i.content.length-1).trim(),u=`
`;h.startsWith("{")&&h.endsWith("}")&&(u+="let _tmpFormat = ",r=!0),u+=h,u+=`
`;let l=i.content,f="";try{let N=ge.fromText("<script>"+u+"<\/script>").transform();f=N.toStructure().trim(),f=f.substring(8),f=f.trim(),f=f.substring(0,f.length-9),l=_d(f),l=N.fromStructure(l),r&&(l=l.trimLeft(),l=l.substring(3),l=l.trimLeft(),l=l.substring(10),l=l.trimLeft(),l=l.substring(1),l=l.trimLeft()),l=l.trim(),h.trim().endsWith(";")==!1&&l.endsWith(";")&&(l=l.substring(0,l.length-1))}catch(x){console.log(x),console.log(f);debugger}let _=Me.relativeIndentLevel(e,s),m=l,I=" ".repeat(_),v=l.trim();return v.startsWith("{")&&v.endsWith("}")?m='"'+Me.shiftIndent(v,_,!0,t,!1,!1)+'"':m.includes(`
`)==!1?m='"'+m.trim()+'"':m=`"
`+Me.shiftIndent(v,_+t.tabSize,!1,t,!1,!1)+`
${I}"`,m}var dy=bt(()=>{"use strict";dn();Lr();fs()});var kd=V((AF,_y)=>{dn();ny();Ph();oy();fs();cy();Uh();Th();dy();var py,Mr,Xh,Zh=null,gS={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(i,t,e){let s=od(),r=pd();r!=null&&(e=r(e)),s!=null&&(e.filepath=s),ea(e),py=e,Zh=ad(__dirname),Mr=Zh,Xh=Zh,Mr.tabSize=cd().tabWidth;let h=i,u=Mr.classStrings,l=new _a;if(ra){let _=new tr,m=ge.fromText(h);_.setIndexRanges(m.getParser().getNodeIndexRanges()),_.setExtractAttributeNames(["x-data","ax-load","ax-load-src"]),_.setExtractAttributes(!0),_.parse(h);let I=_.getExtractedAttributes(),v=new Map;if(I.length>0){let x=new sa,N=ia(x.remove(h,I));v=x.getRemovedAttributes(),v.forEach((R,H)=>{let X=fy(R,Mr,H,N);h=h.replace(R.content,X)})}}else debugger;u.enabled&&(h=new va(u).withParserOptions(Xh).withPhpValidator(l).transform(h));let f=new ge;return f.getParser().withParserOptions(Xh).withPhpValidator(l),f.loadString(h)},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(i){let t=i.stack[0];return new Ta(py,Mr).formatDocument(t)}}},defaultOptions:{tabWidth:4}};_y.exports=gS});module.exports=kd();
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
