"use strict";var fN=Object.create;var lc=Object.defineProperty;var dN=Object.getOwnPropertyDescriptor;var pN=Object.getOwnPropertyNames;var _N=Object.getPrototypeOf,mN=Object.prototype.hasOwnProperty;var Ot=(i,t)=>()=>(i&&(t=i(i=0)),t);var V=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports);var TN=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of pN(t))!mN.call(i,o)&&o!==e&&lc(i,o,{get:()=>t[o],enumerable:!(s=dN(t,o))||s.enumerable});return i};var $n=(i,t,e)=>(e=i!=null?fN(_N(i)):{},TN(t||!i||!i.__esModule?lc(e,"default",{value:i,enumerable:!0}):e,i));function uc(i){return(typeof i=="number"||typeof i=="string"&&gN.indexOf(i.slice(-1))===-1)&&i!==""&&!isNaN(i)}var gN,cc=Ot(()=>{"use strict";gN=[" ",`
`,"\r","	","\f","\v","\xA0","\u2000","\u2001","\u2002","\u2003","\u2004","\u2005","\u2006","\u2007","\u2008","\u2009","\u200A","\u200B","\u2028","\u2029","\u3000"].join("")});var X,ai=Ot(()=>{"use strict";cc();X=class{static normalizeLineEndings(t,e=`
`){return t.replace(/\r?\n/g,e)}static split(t){return t.split("")}static substring(t,e,s){return t.substr(e,s)}static ctypeSpace(t){return(t==null?void 0:t.search(/^[\f\n\r\t\v ]+$/g))!==-1}static ctypeAlpha(t){return(t==null?void 0:t.search(/^[A-Za-z]+$/g))!==-1}static ctypeDigit(t){return(t==null?void 0:t.search(/^[\d]+$/g))!==-1}static ctypePunct(t){return(t==null?void 0:t.search(/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g))!==-1}static trimLeft(t,e="\\s"){return t.replace(new RegExp("^["+e+"]+"),"")}static trimRight(t,e="\\s"){return t.replace(new RegExp("["+e+"]+$"),"")}static isNumeric(t){return uc(t)}static substringCount(t,e){let s=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return(t.match(new RegExp(s,"gi"))||[]).length}static lastWord(t){let e=t.split(""),s=[];for(let o=e.length;o>=0&&e[o]!=" ";o--)s.push(e[o]);return s.reverse().join()}static breakByNewLine(t){return t.replace(/(\r\n|\n|\r)/gm,`
`).split(`
`)}static removeEmptyNewLines(t){let e=[];return X.breakByNewLine(X.normalizeLineEndings(t)).forEach(o=>{o.trim().length>0&&e.push(o)}),e.join(`
`)}static replaceAllInString(t,e,s){return t.replace(new RegExp(e,"g"),s)}static getTrimmedMatch(t,e,s){let o=t.exec(e);if(o==null||o.length<s)return null;let h=o[s].trim();return h.length==0?null:h}static assertMatchIs(t,e,s,o){let h=X.getTrimmedMatch(t,e,s);return h!=null&&h==o}static truncateString(t,e){return t.length<=e?t:t.slice(0,e)+"..."}static unwrapString(t){let e=t.substring(1);return e.substring(0,e.length-1)}static getLastLine(t){let e=X.breakByNewLine(t);return e.length==0?"":e[e.length-1]}static getFirstLine(t){let e=X.breakByNewLine(t);return e.length==0?"":e[0]}}});function Ve(i){return i==null?!1:i=='"'||i=="'"}var An=Ot(()=>{"use strict"});function Jn(i){let t=i.getCurrent();for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=it.String_EscapeCharacter));i.incrementIndex());}function Fi(i){let t=i.getCurrent(),e=[];for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),!(i.getCurrent()==t&&i.getPrev()!=it.String_EscapeCharacter));i.incrementIndex())e.push(i.getCurrent());return{value:e.join(""),endedOn:i.getCurrentIndex()}}var In=Ot(()=>{"use strict";Ki()});var Gs,fc=Ot(()=>{"use strict";ai();An();In();Gs=class{constructor(){this.chars=[];this.cur=null;this.prev=null;this.next=null;this.currentIndex=0;this.inputLen=0;this.currentContent=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return""}static fromText(t){return new Gs().remove(t)}remove(t){for(this.chars=t.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Ve(this.cur)){let s=Fi(this);if(this.currentIndex=s.endedOn,this.currentIndex==this.inputLen-1)break;continue}this.currentContent.push(this.cur)}let e=[];for(let s=0;s<this.currentContent.length;s++){let o=this.currentContent[s];if(s==0&&o=="@"){e.push(o);continue}if(o!="."&&X.ctypePunct(o))break;e.push(o)}return e.join("")}}});var Fa=V(wa=>{"use strict";Object.defineProperty(wa,"__esModule",{value:!0});wa.default=EN;var kN=xN(require("crypto"));function xN(i){return i&&i.__esModule?i:{default:i}}var to=new Uint8Array(256),Zr=to.length;function EN(){return Zr>to.length-16&&(kN.default.randomFillSync(to),Zr=0),to.slice(Zr,Zr+=16)}});var dc=V(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.default=void 0;var vN=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;eo.default=vN});var ur=V(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.default=void 0;var yN=CN(dc());function CN(i){return i&&i.__esModule?i:{default:i}}function NN(i){return typeof i=="string"&&yN.default.test(i)}var bN=NN;io.default=bN});var cr=V(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.default=void 0;var AN=IN(ur());function IN(i){return i&&i.__esModule?i:{default:i}}var hi=[];for(let i=0;i<256;++i)hi.push((i+256).toString(16).substr(1));function SN(i,t=0){let e=(hi[i[t+0]]+hi[i[t+1]]+hi[i[t+2]]+hi[i[t+3]]+"-"+hi[i[t+4]]+hi[i[t+5]]+"-"+hi[i[t+6]]+hi[i[t+7]]+"-"+hi[i[t+8]]+hi[i[t+9]]+"-"+hi[i[t+10]]+hi[i[t+11]]+hi[i[t+12]]+hi[i[t+13]]+hi[i[t+14]]+hi[i[t+15]]).toLowerCase();if(!(0,AN.default)(e))throw TypeError("Stringified UUID is invalid");return e}var ON=SN;no.default=ON});var mc=V(so=>{"use strict";Object.defineProperty(so,"__esModule",{value:!0});so.default=void 0;var LN=_c(Fa()),PN=_c(cr());function _c(i){return i&&i.__esModule?i:{default:i}}var pc,Ba,Ua=0,Ma=0;function DN(i,t,e){let s=t&&e||0,o=t||new Array(16);i=i||{};let h=i.node||pc,c=i.clockseq!==void 0?i.clockseq:Ba;if(h==null||c==null){let C=i.random||(i.rng||LN.default)();h==null&&(h=pc=[C[0]|1,C[1],C[2],C[3],C[4],C[5]]),c==null&&(c=Ba=(C[6]<<8|C[7])&16383)}let u=i.msecs!==void 0?i.msecs:Date.now(),f=i.nsecs!==void 0?i.nsecs:Ma+1,k=u-Ua+(f-Ma)/1e4;if(k<0&&i.clockseq===void 0&&(c=c+1&16383),(k<0||u>Ua)&&i.nsecs===void 0&&(f=0),f>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Ua=u,Ma=f,Ba=c,u+=122192928e5;let x=((u&268435455)*1e4+f)%4294967296;o[s++]=x>>>24&255,o[s++]=x>>>16&255,o[s++]=x>>>8&255,o[s++]=x&255;let M=u/4294967296*1e4&268435455;o[s++]=M>>>8&255,o[s++]=M&255,o[s++]=M>>>24&15|16,o[s++]=M>>>16&255,o[s++]=c>>>8|128,o[s++]=c&255;for(let C=0;C<6;++C)o[s+C]=h[C];return t||(0,PN.default)(o)}var RN=DN;so.default=RN});var Ha=V(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.default=void 0;var wN=FN(ur());function FN(i){return i&&i.__esModule?i:{default:i}}function BN(i){if(!(0,wN.default)(i))throw TypeError("Invalid UUID");let t,e=new Uint8Array(16);return e[0]=(t=parseInt(i.slice(0,8),16))>>>24,e[1]=t>>>16&255,e[2]=t>>>8&255,e[3]=t&255,e[4]=(t=parseInt(i.slice(9,13),16))>>>8,e[5]=t&255,e[6]=(t=parseInt(i.slice(14,18),16))>>>8,e[7]=t&255,e[8]=(t=parseInt(i.slice(19,23),16))>>>8,e[9]=t&255,e[10]=(t=parseInt(i.slice(24,36),16))/1099511627776&255,e[11]=t/4294967296&255,e[12]=t>>>24&255,e[13]=t>>>16&255,e[14]=t>>>8&255,e[15]=t&255,e}var UN=BN;ro.default=UN});var Va=V(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.default=GN;xs.URL=xs.DNS=void 0;var MN=Tc(cr()),HN=Tc(Ha());function Tc(i){return i&&i.__esModule?i:{default:i}}function VN(i){i=unescape(encodeURIComponent(i));let t=[];for(let e=0;e<i.length;++e)t.push(i.charCodeAt(e));return t}var gc="6ba7b810-9dad-11d1-80b4-00c04fd430c8";xs.DNS=gc;var kc="6ba7b811-9dad-11d1-80b4-00c04fd430c8";xs.URL=kc;function GN(i,t,e){function s(o,h,c,u){if(typeof o=="string"&&(o=VN(o)),typeof h=="string"&&(h=(0,HN.default)(h)),h.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+o.length);if(f.set(h),f.set(o,h.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){u=u||0;for(let k=0;k<16;++k)c[u+k]=f[k];return c}return(0,MN.default)(f)}try{s.name=i}catch{}return s.DNS=gc,s.URL=kc,s}});var xc=V(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.default=void 0;var qN=WN(require("crypto"));function WN(i){return i&&i.__esModule?i:{default:i}}function YN(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),qN.default.createHash("md5").update(i).digest()}var QN=YN;oo.default=QN});var vc=V(ao=>{"use strict";Object.defineProperty(ao,"__esModule",{value:!0});ao.default=void 0;var jN=Ec(Va()),KN=Ec(xc());function Ec(i){return i&&i.__esModule?i:{default:i}}var zN=(0,jN.default)("v3",48,KN.default),$N=zN;ao.default=$N});var Cc=V(ho=>{"use strict";Object.defineProperty(ho,"__esModule",{value:!0});ho.default=void 0;var JN=yc(Fa()),XN=yc(cr());function yc(i){return i&&i.__esModule?i:{default:i}}function ZN(i,t,e){i=i||{};let s=i.random||(i.rng||JN.default)();if(s[6]=s[6]&15|64,s[8]=s[8]&63|128,t){e=e||0;for(let o=0;o<16;++o)t[e+o]=s[o];return t}return(0,XN.default)(s)}var tb=ZN;ho.default=tb});var Nc=V(lo=>{"use strict";Object.defineProperty(lo,"__esModule",{value:!0});lo.default=void 0;var eb=ib(require("crypto"));function ib(i){return i&&i.__esModule?i:{default:i}}function nb(i){return Array.isArray(i)?i=Buffer.from(i):typeof i=="string"&&(i=Buffer.from(i,"utf8")),eb.default.createHash("sha1").update(i).digest()}var sb=nb;lo.default=sb});var Ac=V(uo=>{"use strict";Object.defineProperty(uo,"__esModule",{value:!0});uo.default=void 0;var rb=bc(Va()),ob=bc(Nc());function bc(i){return i&&i.__esModule?i:{default:i}}var ab=(0,rb.default)("v5",80,ob.default),hb=ab;uo.default=hb});var Ic=V(co=>{"use strict";Object.defineProperty(co,"__esModule",{value:!0});co.default=void 0;var lb="00000000-0000-0000-0000-000000000000";co.default=lb});var Sc=V(fo=>{"use strict";Object.defineProperty(fo,"__esModule",{value:!0});fo.default=void 0;var ub=cb(ur());function cb(i){return i&&i.__esModule?i:{default:i}}function fb(i){if(!(0,ub.default)(i))throw TypeError("Invalid UUID");return parseInt(i.substr(14,1),16)}var db=fb;fo.default=db});var Oc=V(an=>{"use strict";Object.defineProperty(an,"__esModule",{value:!0});Object.defineProperty(an,"v1",{enumerable:!0,get:function(){return pb.default}});Object.defineProperty(an,"v3",{enumerable:!0,get:function(){return _b.default}});Object.defineProperty(an,"v4",{enumerable:!0,get:function(){return mb.default}});Object.defineProperty(an,"v5",{enumerable:!0,get:function(){return Tb.default}});Object.defineProperty(an,"NIL",{enumerable:!0,get:function(){return gb.default}});Object.defineProperty(an,"version",{enumerable:!0,get:function(){return kb.default}});Object.defineProperty(an,"validate",{enumerable:!0,get:function(){return xb.default}});Object.defineProperty(an,"stringify",{enumerable:!0,get:function(){return Eb.default}});Object.defineProperty(an,"parse",{enumerable:!0,get:function(){return vb.default}});var pb=Sn(mc()),_b=Sn(vc()),mb=Sn(Cc()),Tb=Sn(Ac()),gb=Sn(Ic()),kb=Sn(Sc()),xb=Sn(ur()),Eb=Sn(cr()),vb=Sn(Ha());function Sn(i){return i&&i.__esModule?i:{default:i}}});var fn,yI,CI,Lc,NI,bI,AI,II,SI,OI,Pc=Ot(()=>{fn=$n(Oc(),1),yI=fn.default.v1,CI=fn.default.v3,Lc=fn.default.v4,NI=fn.default.v5,bI=fn.default.NIL,AI=fn.default.version,II=fn.default.validate,SI=fn.default.stringify,OI=fn.default.parse});function Dc(){return X.replaceAllInString(Lc(),"-","_")}var fr,po,Pe,Es,_o,On,re,Ln,Bi,mo,_t,vs,Ci,zi,dr,$i,xi,Xn,Zn,To,pr,ts,_r,qs,mr,ys,Cs,Re=Ot(()=>{"use strict";Pc();ai();fr=class{constructor(){this.startPosition=null;this.endPosition=null;this.index=0;this.embeddedIndex=0;this.refId=null;this.parameters=[];this.isSelfClosing=!1;this.isClosingFragment=!1;this.name="";this.containsStructures=!1;this.refId=Dc()}},po=class{constructor(){this.startPosition=null;this.endPosition=null}},Pe=class{constructor(){this.parser=null;this.refId=null;this.startPosition=null;this.endPosition=null;this.sourceContent="";this.index=0;this.parentIndex=-1;this.parentTypeIndex=-1;this.parent=null;this.originalAbstractNode=null;this.fragment=null;this.fragmentPosition=3;this.containsAnyFragments=!1;this.containsChildStructures=!1;this.offset=null;this.errors=[];this.isInScriptTag=!1;this.isInStyleTag=!1;this.prevNode=null;this.nextNode=null;this.refId=Dc()}isEmbedded(){return this.isInScriptTag||this.isInStyleTag}getErrors(){return this.errors}pushError(t){this.parent!=null?this.parent.pushError(t):this.parser!=null&&this.parser.pushError(t),this.errors.push(t)}relativeOffset(t){var e,s;return t+((s=(e=this.startPosition)==null?void 0:e.index)!=null?s:0)}withParser(t){return this.parser=t,this}getParser(){return this.parser}},Es=class extends Pe{constructor(){super(...arguments);this.name="";this.realName="";this.value="";this.terminatorStyle='"';this.wrappedValue="";this.content="";this.type=0;this.directive=null;this.inlineEcho=null;this.namePosition=null;this.valuePosition=null;this.isEscapedExpression=!1;this.isExpression=!1}},_o=class extends Pe{constructor(){super(...arguments);this.name="";this.inlineName=""}},On=class extends Pe{constructor(){super(...arguments);this.name=null;this.isClosingTag=!1;this.isSelfClosing=!1;this.innerContent="";this.parameterContent="";this.receivesAttributeBag=!1;this.hasParameters=!1;this.parameters=[]}getComponentName(){if(this.name==null)return"";let e=this.name.name.trim();return this.name.inlineName.trim().length>0&&(e+=":"+this.name.inlineName.trim()),e}hasParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return!0;return!1}getParameter(e){for(let s=0;s<this.parameters.length;s++)if(this.parameters[s].realName==e)return this.parameters[s];return null}getParametersExcept(e){return this.parameters.filter(s=>!e.includes(s.realName))}},re=class extends Pe{constructor(){super(...arguments);this.content=""}getOutputContent(){let e=X.replaceAllInString(this.content,"@{","{");return e=X.replaceAllInString(e,"@@","@"),e}},Ln=class extends Pe{constructor(){super(...arguments);this.innerContentPosition=null;this.innerContent=""}isMultiline(){return this.sourceContent.includes(`
`)}},Bi=class extends Pe{constructor(){super(...arguments);this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInline=!1}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.sourceContent,!1),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},mo=class extends Bi{},_t=class extends Pe{constructor(){super(...arguments);this.name="";this.directiveName="";this.namePosition=null;this.hasDirectiveParameters=!1;this.directiveParameters="";this.directiveParametersPosition=null;this.children=[];this.childrenDocument=null;this.childTypeCounts=new Map;this._conditionParserAbandonPairing=!1;this.hasJsonParameters=!1;this.ref=0;this.isClosedBy=null;this.isOpenedBy=null;this.isClosingDirective=!1;this.innerContent="";this.documentContent="";this.nodeContent="";this.cachedHasValidJson=null;this.cachedHasValidPhp=null;this.cachedPhpLastError=null}hasValidJson(){if(this.hasJsonParameters==!1&&(this.cachedHasValidJson=!1),this.cachedHasValidJson==null)try{let e=this.getPhpContent().trim();e.startsWith("(")&&e.endsWith(")")&&(e=e.substring(1),e=e.substring(0,e.length-1)),JSON.parse(e),this.cachedHasValidJson=!0}catch{this.cachedHasValidJson=!1}return this.cachedHasValidJson}hasValidPhp(){var e;if(this.hasJsonParameters&&(this.cachedHasValidPhp=!1),this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.getPhpContent(),!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}isFirstOfType(){return this.parentTypeIndex==1}hasInnerExpression(){return this.hasDirectiveParameters?this.getInnerContent().length>0:!1}getInnerContent(){let e=this.directiveParameters.trim().substring(1);return e=e.substring(0,e.length-1),e}getImmediateChildren(){var s;let e=[];for(let o=0;o<this.children.length;o++){let h=this.children[o];if(((s=h.parent)==null?void 0:s.refId)==this.refId){if(h==this.isClosedBy)break;e.push(h)}}return e}getPhpContent(){return this.directiveName.toLowerCase()=="forelse"?"foreach ("+this.getInnerContent()+"):endforeach;":this.directiveParameters}getChildren(){if(this.isClosedBy==null)return[];let e=[];for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof _t&&o.refId==this.isClosedBy.refId)break;e.push(o)}return e}hasChildDirectiveOfType(e){return this.findFirstChildDirectiveOfType(e)!=null}findFirstChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof _t&&o.directiveName==e)return o}return null}findFirstDirectChildDirectiveOfType(e){for(let s=0;s<this.children.length;s++){let o=this.children[s];if(o instanceof _t&&o.directiveName==e&&o.parent!=null&&o.parent.refId==this.refId)return o}return null}findDirectivesOfType(e){let s=[];return this.children.forEach(o=>{o instanceof _t&&o.directiveName==e&&s.push(o)}),s}findDirectChildDirectivesOfType(e){let s=[];return this.children.forEach(o=>{o instanceof _t&&o.directiveName==e&&o.parent!=null&&o.parent.refId==this.refId&&s.push(o)}),s}clone(){let e=new _t;e.children=[...this.children],e.directiveName=this.directiveName,e.directiveParameters=this.directiveParameters,e.directiveParametersPosition=this.directiveParametersPosition,e.documentContent=this.documentContent,e.endPosition=this.endPosition,e.hasDirectiveParameters=this.hasDirectiveParameters,e.index=this.index,e.innerContent=this.innerContent,e.isClosedBy=this.isClosedBy,e.isClosingDirective=this.isClosingDirective,e.isOpenedBy=this.isOpenedBy,e.name=this.name,e.namePosition=this.namePosition,e.parent=this.parent,e.refId=this.refId,e.sourceContent=this.sourceContent,e.startPosition=this.startPosition;let s=this.getParser();return s!=null&&e.withParser(s),e.originalAbstractNode=this,e.containsAnyFragments=this.containsAnyFragments,e.containsChildStructures=this.containsChildStructures,e.isInScriptTag=this.isInScriptTag,e.isInStyleTag=this.isInStyleTag,e}getFinalClosingDirective(){return this.isClosedBy==null?this:this.isClosedBy.getFinalClosingDirective()}},vs=class extends Pe{constructor(){super(...arguments);this.head=null;this.tail=null;this.nodes=[];this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},Ci=class extends _t{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.logicBranches=[];this.chain=[]}getParent(){return this.logicBranches.length>0&&this.logicBranches[0].head!=null&&this.logicBranches[0].head.parent!=null&&this.logicBranches[0].head.parent instanceof _t?this.logicBranches[0].head.parent:null}},zi=class extends Pe{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.tail=null;this.cases=[]}},dr=class extends Pe{constructor(){super(...arguments);this.order=0;this.leadingNodes=[];this.leadingDocument=null;this.head=null;this.children=[];this.isDefault=!1;this.isClosedBy=null;this.childDocument=null;this.documentContent="";this.innerContent="";this.innerOffset=null}},$i=class extends Pe{constructor(){super(...arguments);this.constructedFrom=null;this.nodeContent="";this.originalNode=null;this.truthNodes=[];this.elseNode=null;this.falseNodes=[];this.tailNode=null;this.truthDocument=null;this.falseDocument=null;this.documentContent="";this.truthDocumentContent="";this.truthInnerContent="";this.truthDocumentOffset=null;this.truthInnerOffset=null;this.falseDocumentContent="";this.falseInnerContent="";this.falseDocumentOffset=null;this.falseInnerOffset=null}},xi=class extends Pe{constructor(){super(...arguments);this.content="";this.cachedHasValidPhp=null;this.cachedPhpLastError=null;this.isInlineEcho=!1}hasValidPhp(){var e;if(this.cachedHasValidPhp==null){let s=(e=this.getParser())==null?void 0:e.getPhpValidator();s!=null?(this.cachedHasValidPhp=s.isValid(this.content,!0),this.cachedPhpLastError=s.getLastError()):this.cachedHasValidPhp=!1}return this.cachedHasValidPhp}getPhpError(){return this.cachedPhpLastError}},Xn=class extends xi{},Zn=class extends xi{},To=class extends Pe{},pr=class extends Pe{},ts=class extends Pe{constructor(){super(...arguments);this.tokenLength=0}},_r=class extends Pe{},qs=class extends Pe{},mr=class extends Pe{},ys=class extends Pe{constructor(){super(...arguments);this.key=null;this.value=null;this.isLast=!1}},Cs=class extends Pe{constructor(){super(...arguments);this.elements=[];this.containsKeys=!1;this.maxKeyLength=0}}});var xt,Ns=Ot(()=>{"use strict";xt=class{};xt.Verbatim="verbatim",xt.EndVerbatim="endverbatim",xt.Php="php",xt.EndPhp="endphp",xt.If="if",xt.ElseIf="elseif",xt.Else="else",xt.Unless="unless",xt.ForElse="forelse",xt.EndForElse="endforelse",xt.Switch="switch",xt.EndSwitch="endswitch",xt.Default="default",xt.Case="case"});var Ge,Tr=Ot(()=>{"use strict";Re();Ge=class{static clearSpeculativeConditions(){this.speculativeConditions.clear()}static clearSpeculativeEndIfs(){this.speculativeEndIfs.clear()}static getSpeculativeConditions(){return this.speculativeConditions}static getSpeculativeEndIfs(){return this.speculativeEndIfs}static isSpeculativeCondition(t){return this.speculativeConditions.has(t)}static isSpeculativeEndIf(t){return this.speculativeEndIfs.has(t)}static registerSpeculativeCondition(t){this.speculativeConditions.set(t,1)}static registerSpeculativeEndIf(t){this.speculativeEndIfs.set(t,1)}static canClose(t){let e="end"+t.directiveName.toLowerCase();return this.possibleClosingNode.has(e)}static shouldRewrite(t){return!!(this.customIfs.has(t.name)||this.alwaysRewrite.includes(t.name)||this.speculativeEndIfs.has(t.directiveName)||this.speculativeConditions.has(t.name))}static determineCandidates(t){let e=new Map;t.forEach(s=>{if(!(s instanceof _t))return;let o=s;o.directiveName.toLowerCase().startsWith("end")||e.set(o.directiveName.toLowerCase(),1)}),t.forEach(s=>{if(!(s instanceof _t))return;let o=s;if(o.directiveName.toLowerCase().startsWith("unless")){let h=o.directiveName.substring(6);h.length>0&&(this.speculativeConditions.set(o.directiveName,1),this.speculativeEndIfs.set("end"+h,1))}if(this.speculativeEndIfs.has(o.directiveName)&&(o.isClosingDirective=!0),o.directiveName.toLowerCase().startsWith("else")){let h=o.directiveName.substring(4);h!="if"&&h.length>0&&this.speculativeConditions.set(h,1)}if(o.directiveName.toLowerCase().startsWith("end")){let h=o.directiveName.substring(3).toLowerCase();e.has(h)&&(this.possibleClosingNode.set(o.directiveName.toLowerCase(),1),o.isClosingDirective=!0)}})}};Ge.possibleClosingNode=new Map,Ge.alwaysRewrite=["unless","sectionMissing","hasSection","can","auth","env","isset","guest","cannot","canany","hasSection","production"],Ge.customIfs=new Map,Ge.speculativeConditions=new Map,Ge.speculativeEndIfs=new Map});var go,Rc=Ot(()=>{"use strict";Re();Ns();Tr();go=class{static getNewName(t){if(t.name==xt.Unless)return xt.If;if(Ge.isSpeculativeEndIf(t.directiveName))return xt.If;if(t.name=="can")return xt.If;if(Ge.isSpeculativeCondition(t.name))return xt.If;if(Ge.customIfs.has(t.name)){let e=t.directiveName.toLowerCase();return e.startsWith("else")?(t.isClosingDirective=!0,xt.ElseIf):e.startsWith("end")?(t.isClosingDirective=!0,xt.If):xt.If}return t.directiveName=="auth"?xt.If:t.name}static rewrite(t){let e=[];return t.forEach(s=>{if(s instanceof _t)if(Ge.shouldRewrite(s)){let o=s.clone();o.name=this.getNewName(s),e.push(o)}else e.push(s);else e.push(s)}),e}}});function Ni(i){return i.length==0?null:i[0].startPosition}var Ws=Ot(()=>{"use strict"});function wc(i,t){let e=new Set(i),s=new Set(t),o=new Set([...e].filter(h=>s.has(h)));return Array.from(o)}var Fc=Ot(()=>{"use strict"});var Ie,Ga=Ot(()=>{"use strict";Ie=class{constructor(){this.node=null;this.errorCode="";this.message="";this.level=0;this.range=null}hash(){var e,s,o,h;let t="";return this.node!=null&&(t=((s=(e=this.node.endPosition)==null?void 0:e.offset)!=null?s:0).toString()+"|"+((h=(o=this.node.startPosition)==null?void 0:o.offset)!=null?h:0).toString()+"|"),t+"|"+this.errorCode}static makeSyntaxError(t,e,s,o){o==null&&(o=0);let h=new Ie;return h.errorCode=t,h.node=e,h.message=s,h.level=o,h}}});var Ht,qa=Ot(()=>{"use strict";Ht=class{};Ht.TYPE_UNEXPECTED_END_OF_INPUT="BLADE_001",Ht.TYPE_PARSE_UNCLOSED_CONDITION="BLADE_002",Ht.TYPE_PARSE_UNCLOSED_SWITCH="BLADE_003",Ht.TYPE_UNPAIRED_CLOSING_DIRECTIVE="BLADE_004",Ht.TYPE_UNCLOSED_COMMENT="BLADE_005",Ht.TYPE_UNCLOSED_PHP_DIRECTIVE="BLADE_006",Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE="BLADE_007",Ht.TYPE_UNCLOSED_VERBATIM="BLADE_008",Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE="BLADE_009",Ht.TYPE_UNCLOSED_FOR_DIRECTIVE="BLADE_010",Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE="BLADE_011",Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE="BLADE_012",Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE="BLADE_013",Ht.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE="BLADE_014"});var Ji,Ys,Bc=Ot(()=>{"use strict";Ga();qa();Re();Ns();Ji=class{static isConditionalStructure(t){if(!(t instanceof _t))return!1;let e=t,s=e.name;return s==xt.If||s==xt.ElseIf||s==xt.Else}static requiresClose(t){let e=t.name;return e==xt.ElseIf||e==xt.Else?t.isClosedBy==null:!(t.isClosingDirective||t.isClosedBy!=null)}static getValidClosingPairs(t){return t==xt.If||t==xt.ElseIf?Ji.conditionClosingPairs:[]}static findClosestStructurePair(t,e,s){let o=[],h=t.length,c=new Map;o.push({node:e,index:s});for(let u=0;u<h;u+=1){let f=t[u];if(f instanceof _t){let k=f.name;if(f.isClosingDirective&&k==xt.If){c.set(u,u);continue}else if(k==xt.ElseIf||k==xt.Else){c.set(u,u);continue}}}for(;o.length>0;){let u=o.pop();if(u==null)continue;if(u.node._conditionParserAbandonPairing)break;let f=u.node,k=Ji.getValidClosingPairs(f.name),x=u.index,M=!1;for(let C=x;C<h;C++){let y=t[C];if(y instanceof _t&&Ji.isConditionalStructure(y)){if(Ji.requiresClose(y)){if(C==h-1){M=!1;break}o.push(u),o.push({node:y,index:C+1}),M=!0;break}if(f.isClosedBy!=null)continue;let I=y.name,F=!1;if(y.ref==0&&(y.isClosingDirective&&I==xt.If||k.includes(I))&&(F=!0),y.refId==f.refId&&(F=!1),F){c.delete(C),f.isClosedBy=y,y.isOpenedBy=f,y.ref+=1,M=!0;break}}}if(!M&&f instanceof _t){let C=f.name;(C==xt.ElseIf||C==xt.Else)&&f.isOpenedBy==null&&(f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0),f.isClosedBy==null&&Ji.requiresClose(f)&&(f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,f,"Unpaired condition control structure")),f._conditionParserAbandonPairing=!0)}}}static pairConditionals(t){for(let e=0;e<t.length;e+=1){let s=t[e];s instanceof _t&&Ji.isConditionalStructure(s)&&Ji.requiresClose(s)&&Ji.findClosestStructurePair(t,s,e+1)}return t.forEach(e=>{if(e instanceof _t&&Ji.isConditionalStructure(e)){let s=e.name;if((s==xt.ElseIf||s==xt.Else)&&e.isOpenedBy==null){e.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}if(e.isClosedBy==null&&Ji.requiresClose(e)){e.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_CONDITION,e,"Unpaired condition control structure")),e._conditionParserAbandonPairing=!0;return}}}),t}},Ys=Ji;Ys.conditionClosingPairs=["elseif","else"]});var ko,Uc=Ot(()=>{"use strict";Pn();Ws();Re();Ns();ko=class{static associate(t,e){let s=[];return t.forEach(o=>{o instanceof _t&&o.name.toLowerCase()==xt.ForElse&&o.directiveName.toLowerCase()!=xt.EndForElse?s.push(this.createForElseNode(o,e)):s.push(o)}),s}static createForElseNode(t,e){var f,k,x,M,C,y,I,F,$,ht,ct,J,z,at,B,Y,dt,rt,Ft,Bt,Dt,Mt,kt,Rt,ue,Tt,mt,ne,At,Gt,he,A,D,tt,lt;let s=new $i;s.withParser(e),s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.constructedFrom=t;let o=t.findFirstDirectChildDirectiveOfType("empty");if(o==null){s.tailNode=t.children.pop(),s.truthNodes=t.children;let Lt=((k=(f=t.startPosition)==null?void 0:f.index)!=null?k:0)-1,Z=((C=(M=(x=t.isClosedBy)==null?void 0:x.startPosition)==null?void 0:M.index)!=null?C:0)-1,U=Z-Lt,W=((I=(y=t.endPosition)==null?void 0:y.index)!=null?I:0)+1,H=((ht=($=(F=t.isClosedBy)==null?void 0:F.startPosition)==null?void 0:$.index)!=null?ht:0)-1,et=H-W;s.truthDocumentContent=e.getText(Lt,Z),s.truthDocumentOffset={start:Lt,end:Z,length:U},s.truthInnerContent=e.getText(W,H),s.truthInnerOffset={start:W,end:H,length:et}}else{let Lt=t.children,Z=[],U=[];s.elseNode=o;for(let zt=0;zt<Lt.length;zt++){let Ct=Lt[zt];if(Ct.refId==o.refId){U=Lt.slice(zt+1);break}else Z.push(Ct)}s.truthNodes=Z,U.length>0&&(s.tailNode=U.pop()),s.falseNodes=U;let W=((J=(ct=t.startPosition)==null?void 0:ct.index)!=null?J:0)-1,H=((at=(z=o.startPosition)==null?void 0:z.index)!=null?at:0)-1,et=H-W,nt=((Y=(B=t.endPosition)==null?void 0:B.index)!=null?Y:0)+1,K=((rt=(dt=o.startPosition)==null?void 0:dt.index)!=null?rt:0)-1,Q=K-nt;s.truthDocumentContent=e.getText(W,H),s.truthDocumentOffset={start:W,end:H,length:et},s.truthInnerContent=e.getText(nt,K),s.truthInnerOffset={start:nt,end:K,length:Q};let q=((Bt=(Ft=o.startPosition)==null?void 0:Ft.index)!=null?Bt:0)-1,gt=((kt=(Mt=(Dt=t.isClosedBy)==null?void 0:Dt.startPosition)==null?void 0:Mt.index)!=null?kt:0)-1,Kt=gt-q,qt=((ue=(Rt=o.endPosition)==null?void 0:Rt.index)!=null?ue:0)+1,Et=((ne=(mt=(Tt=t.isClosedBy)==null?void 0:Tt.startPosition)==null?void 0:mt.index)!=null?ne:0)-1,Pt=Et-qt;s.falseDocumentContent=e.getText(q,gt),s.falseDocumentOffset={start:q,end:gt,length:Kt},s.falseInnerContent=e.getText(qt,Et),s.falseInnerOffset={start:qt,end:Et,length:Pt}}s.truthDocument=be.childFromText(e.getNodeText(s.truthNodes),e,Ni(s.truthNodes)),s.falseDocument=be.childFromText(e.getNodeText(s.falseNodes),e,Ni(s.falseNodes));let h=((Gt=(At=t.startPosition)==null?void 0:At.index)!=null?Gt:0)-1,c=(lt=(A=(he=t.isClosedBy)==null?void 0:he.endPosition)==null?void 0:A.index)!=null?lt:0-((tt=(D=t.startPosition)==null?void 0:D.index)!=null?tt:0),u=c-h;return s.nodeContent=e.getText(h,c),s.documentContent=e.getText(h,c),s.offset={start:h,end:c,length:u},s}}});var xo,Mc=Ot(()=>{"use strict";Pn();Ws();Re();Tr();xo=class{static analyze(t,e){let s=[];return t.forEach(o=>{if(o instanceof _t&&o.isClosedBy!=null){let h=o.findFirstChildDirectiveOfType("else");h!=null&&h.isClosedBy==null?s.push(this.convertToConditionalNode(o,h,e)):s.push(o)}else s.push(o)}),s}static convertToConditionalNode(t,e,s){var Mt,kt,Rt,ue,Tt,mt,ne,At,Gt,he,A,D,tt,lt,Lt,Z,U,W,H,et,nt,K,Q,q,gt,Kt;let o=new Ci,h=t.getFinalClosingDirective(),c=t.children,u=[],f=[],k=c.pop();o.withParser(s),o.parent=t.parent,o.startPosition=t.startPosition,o.endPosition=h.endPosition,o.constructedFrom=t;let x=((kt=(Mt=t.startPosition)==null?void 0:Mt.index)!=null?kt:0)-1,M=(mt=(Rt=h==null?void 0:h.endPosition)==null?void 0:Rt.index)!=null?mt:0-((Tt=(ue=t.startPosition)==null?void 0:ue.index)!=null?Tt:0),C=x+M;o.nodeContent=s.getText(x,M),o.offset={start:x,end:C,length:M};for(let qt=0;qt<c.length;qt++){let Et=c[qt];if(Et instanceof _t&&Et.refId==e.refId){f=c.slice(qt+1);break}else u.push(Et)}let y=new vs,I=new vs;y.withParser(s),I.withParser(s),t.isClosedBy=e,e.isOpenedBy=t,k.isOpenedBy=e,e.isClosedBy=k;let F=[...u],$=[...f];u.push(e),y.head=t,y.nodes=u,y.index=t.index;let ht=(At=(ne=t.endPosition)==null?void 0:ne.index)!=null?At:0,ct=((A=(he=(Gt=t.isClosedBy)==null?void 0:Gt.startPosition)==null?void 0:he.index)!=null?A:0)-1,J=ct-ht,z=((tt=(D=t.startPosition)==null?void 0:D.index)!=null?tt:0)-1,at=((Z=(Lt=(lt=t.isClosedBy)==null?void 0:lt.startPosition)==null?void 0:Lt.index)!=null?Z:0)-1,B=at-z;y.innerContent=s.getText(ht,ct),y.documentContent=s.getText(z,at),y.innerOffset={start:ht,end:ct,length:J},y.offset={start:z,end:at,length:B},f.push(k),I.head=e,I.nodes=f,I.index=e.index;let Y=(W=(U=e.endPosition)==null?void 0:U.index)!=null?W:0,dt=((nt=(et=(H=e.isClosedBy)==null?void 0:H.startPosition)==null?void 0:et.index)!=null?nt:0)-1,rt=dt-Y,Ft=((Q=(K=e.startPosition)==null?void 0:K.index)!=null?Q:0)-1,Bt=((Kt=(gt=(q=e.isClosedBy)==null?void 0:q.startPosition)==null?void 0:gt.index)!=null?Kt:0)-1,Dt=Bt-Ft;return I.innerContent=s.getText(Y,dt),I.documentContent=s.getText(Ft,Bt),I.innerOffset={start:Y,end:dt,length:rt},I.offset={start:Ft,end:Bt,length:Dt},o.chain=[t.index,e.index],o.logicBranches.push(y),o.logicBranches.push(I),y.startPosition=y.nodes[0].startPosition,y.endPosition=y.nodes[y.nodes.length-1].startPosition,y.childDocument=be.childFromText(s.getNodeText(F),s,Ni(F)),I.childDocument=be.childFromText(s.getNodeText($),s,Ni($)),I.startPosition=I.nodes[0].startPosition,I.endPosition=I.nodes[I.nodes.length-1].startPosition,Ge.registerSpeculativeCondition(t.directiveName),o}}});var Eo,Hc=Ot(()=>{"use strict";Pn();Ws();Re();Ns();Eo=class{static associate(t,e){let s=[];return t.forEach(o=>{o instanceof _t&&o.directiveName.toLowerCase()==xt.Switch?s.push(this.createSwitchNode(o,e)):s.push(o)}),s}static createSwitchNode(t,e){var k,x,M,C,y,I,F,$,ht,ct,J,z,at,B,Y,dt,rt,Ft,Bt,Dt,Mt,kt,Rt,ue,Tt,mt,ne,At,Gt,he,A,D;let s=new zi,o=t.children;s.originalNode=t,s.startPosition=t.startPosition,s.endPosition=t.getFinalClosingDirective().endPosition,s.parent=t.parent,s.withParser(e),s.constructedFrom=t;let h=[];for(let tt=0;tt<o.length;tt++){let lt=o[tt];if(lt instanceof _t&&lt.name==xt.Switch&&(tt+=lt.children.length),lt instanceof _t&&lt.name==xt.Case){let Lt=this.collectUntil(t,o.slice(tt+1),[xt.Case,xt.Default,xt.EndSwitch]),Z=new dr;if(Z.parent=lt.parent,s.cases.length==0&&h.length>0){if(Z.leadingNodes=h,h.length>0){let Q=h[0],q=h[h.length-1],gt=(x=(k=Q.startPosition)==null?void 0:k.index)!=null?x:0,Kt=((C=(M=q.endPosition)==null?void 0:M.index)!=null?C:0)+1,qt=e.getText(gt,Kt);Z.leadingDocument=be.childFromText(qt,e,Q.startPosition)}h=[]}if(Z.refId=lt.refId,Z.index=lt.index,Z.startPosition=lt.startPosition,Z.endPosition=lt.endPosition,Z.order=s.cases.length,Z.head=lt,Z.isDefault=!1,Z.children=Lt.children,Z.withParser(e),Z.isClosedBy=Lt.brokeOn,lt.isClosedBy=Lt.brokeOn,Z.children.length>0){let Q=Z.children[Z.children.length-1];Q instanceof _t&&Q==t.isClosedBy&&Z.children.pop()}Z.childDocument=be.childFromText(e.getNodeText(Z.children),e,Ni(Z.children)),Lt.brokeOn!=null&&(Z.endPosition=Lt.brokeOn.startPosition);let U=((I=(y=Z.startPosition)==null?void 0:y.index)!=null?I:0)-1,W=((ht=($=(F=Z.isClosedBy)==null?void 0:F.startPosition)==null?void 0:$.index)!=null?ht:0)-1,H=W-U,et=((J=(ct=lt.endPosition)==null?void 0:ct.index)!=null?J:0)+1,nt=((B=(at=(z=Z.isClosedBy)==null?void 0:z.startPosition)==null?void 0:at.index)!=null?B:0)-1,K=nt-et;Z.documentContent=e.getText(U,W),Z.innerContent=e.getText(et,nt),Z.offset={start:U,end:W,length:H},Z.innerOffset={start:et,end:nt,length:K},s.cases.push(Z)}else if(lt instanceof _t&&lt.name==xt.Default){let Lt=o.slice(tt+1),Z=new dr;Z.parent=lt.parent,Z.refId=lt.refId,Z.index=lt.index,Z.startPosition=lt.startPosition,Z.endPosition=t.startPosition,Z.order=s.cases.length,Z.head=lt,Z.isDefault=!0,Z.children=Lt,Z.withParser(e),Z.isClosedBy=t.isClosedBy,lt.isClosedBy=t.isClosedBy;let U=[...Z.children],W=U[U.length-1];W instanceof _t&&W.refId==((Y=t.isClosedBy)==null?void 0:Y.refId)&&U.pop();let H=((rt=(dt=Z.startPosition)==null?void 0:dt.index)!=null?rt:0)-1,et=((Dt=(Bt=(Ft=Z.isClosedBy)==null?void 0:Ft.startPosition)==null?void 0:Bt.index)!=null?Dt:0)-1,nt=et-H,K=((kt=(Mt=lt.endPosition)==null?void 0:Mt.index)!=null?kt:0)+1,Q=((Tt=(ue=(Rt=Z.isClosedBy)==null?void 0:Rt.startPosition)==null?void 0:ue.index)!=null?Tt:0)-1,q=Q-K;Z.documentContent=e.getText(H,et),Z.innerContent=e.getText(K,Q),Z.offset={start:H,end:et,length:nt},Z.innerOffset={start:K,end:Q,length:q},Z.childDocument=be.childFromText(e.getNodeText(U),e,Ni(U)),s.cases.push(Z);break}else h.push(lt)}if(s.cases.length>0){let tt=s.cases[s.cases.length-1];tt.children.length>0&&(s.tail=tt.children.pop())}if(s.cases.length==0){let tt=[...t.children];tt.length>0&&tt[tt.length-1]==t.isClosedBy&&tt.pop(),t.childrenDocument=be.childFromText(e.getNodeText(tt),e,Ni(tt))}let c=((ne=(mt=t.startPosition)==null?void 0:mt.index)!=null?ne:0)-1,u=(D=(Gt=(At=t.isClosedBy)==null?void 0:At.endPosition)==null?void 0:Gt.index)!=null?D:0-((A=(he=t.startPosition)==null?void 0:he.index)!=null?A:0),f=c+u;if(s.nodeContent=e.getText(c,u),s.offset={start:c,end:f,length:u},s.cases.length>0){let tt=s.cases[s.cases.length-1];tt.isClosedBy==null&&(tt.isClosedBy=t.isClosedBy)}return s}static collectUntil(t,e,s){var c;let o=[],h=null;for(let u=0;u<e.length;u++){let f=e[u];if(f instanceof _t&&s.includes(f.name)&&((c=f.parent)==null?void 0:c.refId)==t.refId){h=f;break}o.push(f)}return{children:o,brokeOn:h}}}});var Wa,gr,Vc=Ot(()=>{"use strict";Pn();Ws();Re();Ns();Fc();Bc();Uc();Tr();Mc();Hc();Wa=class{constructor(){this.document=null;this.parentNode=null;this.openDirectiveIndexCount=new Map;this.closingDirectiveIndex=new Map;this.closingDirectiveIndexCount=new Map;this.closingDirectiveNames=new Map;this.createdExecutionBranches=[];this.stackCount=0}buildCloseIndex(t){var e,s,o;t.forEach(h=>{var k,x,M,C,y,I,F,$;if(!(h instanceof _t))return;let c=h;if(c.isClosingDirective==!1)return;this.closingDirectiveIndex.has(this.stackCount)==!1&&this.closingDirectiveIndex.set(this.stackCount,new Map),this.closingDirectiveIndexCount.has(this.stackCount)==!1&&this.closingDirectiveIndexCount.set(this.stackCount,new Map);let u=c.name;((k=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:k.has(u))==!1&&((x=this.closingDirectiveIndex.get(this.stackCount))==null||x.set(u,[]),(M=this.closingDirectiveIndexCount.get(this.stackCount))==null||M.set(u,0)),(y=(C=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:C.get(u))==null||y.push(h);let f=(F=(I=this.closingDirectiveIndexCount.get(this.stackCount))==null?void 0:I.get(u))!=null?F:0;($=this.closingDirectiveIndexCount.get(this.stackCount))==null||$.set(u,f+1)}),this.closingDirectiveNames.has(this.stackCount)==!1&&this.closingDirectiveNames.set(this.stackCount,[]),this.closingDirectiveIndex.has(this.stackCount)&&(this.closingDirectiveNames.set(this.stackCount,Array.from((s=(e=this.closingDirectiveIndex.get(this.stackCount))==null?void 0:e.keys())!=null?s:[])),(o=this.closingDirectiveIndex.get(this.stackCount))==null||o.forEach((h,c)=>{var k,x,M,C,y;let u=h.length;if(u==0)return;let f=h[u-1];for(let I=0;I<u;I++){let F=t[I];if(F instanceof _t){if(F.index>=f.index)break;let $=F.name;if(F.isClosingDirective==!1&&$==c){this.openDirectiveIndexCount.has(this.stackCount)==!1&&this.openDirectiveIndexCount.set(this.stackCount,new Map),((k=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:k.has(c))==!1&&((x=this.openDirectiveIndexCount.get(this.stackCount))==null||x.set(c,0));let ht=(C=(M=this.openDirectiveIndexCount.get(this.stackCount))==null?void 0:M.get(c))!=null?C:0;(y=this.openDirectiveIndexCount.get(this.stackCount))==null||y.set(c,ht+1)}}}}))}getClosingCandidates(t){let e=[];return e.push(t.name),e}getScanForList(t){if(t.isClosingDirective==!1){let e=this.getClosingCandidates(t),s=this.closingDirectiveNames.get(this.stackCount);return wc(e,s)}return[]}associate(t,e,s=null){var c;this.document=e;let o=[],h=[{documentNodes:t,parent:s}];for(;h.length>0;){let u=h.pop();if(u==null)continue;let f=u.documentNodes;this.parentNode=u.parent,this.stackCount+=1,this.buildCloseIndex(f),f=Ys.pairConditionals(f),f.forEach(C=>{if(C instanceof _t&&Ge.canClose(C)){if(Ys.isConditionalStructure(C))return;let y=this.getScanForList(C);this.findClosingPair(f,C,y)}});let k=f.length;for(let C=0;C<k;C++){let y=f[C];if(y instanceof _t&&y.isClosedBy!=null)for(let I=C+1;I<k;I++){let F=f[I];if(F.index>y.isClosedBy.index)break;if(F.parent=y,y.children.push(F),F instanceof _t&&F.index==y.index){F.parent=y;break}}}f.forEach(C=>{if(C instanceof _t&&C.children.length>0){let y=[],I=[];C.children.forEach(F=>{if(F.parent!=null&&F.parent.index==C.index){let $=F.refId;if(!I.includes($))F.parent=C,y.push(F),I.push($);else return}}),h.push({documentNodes:y,parent:C})}});let x=[];f.forEach(C=>{var y;this.parentNode==null?C.parent==null&&x.push(C):((y=C.parent)==null?void 0:y.refId)==this.parentNode.refId&&x.push(C)}),x=this.reduceConditions(x,e),x=Eo.associate(x,e),x=ko.associate(x,e),x=xo.analyze(x,e),x=this.cleanNodes(x);let M=new Map;f.forEach(C=>{var y,I,F,$;if(C instanceof _t&&C.isClosedBy!=null&&this.document!=null){let ht=this.document.getText((I=(y=C.endPosition)==null?void 0:y.index)!=null?I:0,(($=(F=C.isClosedBy.startPosition)==null?void 0:F.index)!=null?$:0)-1);C.documentContent=ht,(C.name=="php"||C.name=="verbatim")&&C.innerContent.trim().length==0&&(C.innerContent=C.documentContent)}});for(let C=0;C<x.length;C++){let y=x[C],I=(c=y.refId)!=null?c:"";M.set(I,1)}if(this.parentNode!=null&&this.parentNode instanceof _t&&(this.parentNode.children=this.cleanNodes(x),this.parentNode.parent!=null&&this.parentNode.parent instanceof _t)){let C=this.parentNode.parent.children,y=[];C.forEach(I=>{var F;M.has((F=I.refId)!=null?F:"")==!1&&y.push(I)}),this.parentNode.parent.children=this.cleanNodes(y)}this.stackCount<=1&&(o=this.cleanNodes(x))}return o}cleanNodes(t){let e=[],s=[];for(let o=0;o<t.length;o++){let h=t[o],c=h.refId;if(s.includes(c))break;e.push(h),s.push(c)}return e}reduceConditions(t,e){var o,h,c,u,f,k,x,M,C,y,I,F,$,ht,ct,J,z;let s=[];for(let at=0;at<t.length;at++){let B=t[at];if(B instanceof _t&&B.isClosingDirective==!1&&B.isClosedBy!=null)if(B.name==xt.If){let dt=new Ci,rt=B.getFinalClosingDirective();dt.withParser(e),dt.index=B.index,dt.chain.push(B.index),dt.startPosition=B.startPosition,dt.endPosition=rt.endPosition,dt.constructedFrom=B;let Ft=((h=(o=B.startPosition)==null?void 0:o.index)!=null?h:0)-1,Bt=(k=(c=rt==null?void 0:rt.endPosition)==null?void 0:c.index)!=null?k:0-((f=(u=B.startPosition)==null?void 0:u.index)!=null?f:0),Dt=Ft+Bt;dt.nodeContent=e.getText(Ft,Bt),dt.offset={start:Ft,end:Dt,length:Bt},this.parentNode!=null&&(dt.parent=this.parentNode);let Mt=null,kt=!0,Rt=0;for(;kt;){if(Rt+=1,Rt>Wa.ForceBreakLimit){kt=!1;break}if(B instanceof _t){let ue=this.findEndOfBranch(t.slice(at+1),B,at),Tt=new vs;Tt.withParser(e);let mt=ue.tail;Tt.head=B,Tt.tail=mt,Tt.nodes=this.cleanNodes(B.children);let ne=[...Tt.nodes],At=ne[ne.length-1];At instanceof _t&&At.refId==((x=B.isClosedBy)==null?void 0:x.refId)&&ne.pop();let Gt=(C=(M=B.endPosition)==null?void 0:M.index)!=null?C:0,he=((F=(I=(y=B.isClosedBy)==null?void 0:y.startPosition)==null?void 0:I.index)!=null?F:0)-1,A=he-Gt,D=((ht=($=B.startPosition)==null?void 0:$.index)!=null?ht:0)-1,tt=((z=(J=(ct=B.isClosedBy)==null?void 0:ct.startPosition)==null?void 0:J.index)!=null?z:0)-1,lt=tt-D;if(Tt.innerContent=e.getText(Gt,he),Tt.documentContent=e.getText(D,tt),Tt.innerOffset={start:Gt,end:he,length:A},Tt.offset={start:D,end:tt,length:lt},Tt.childDocument=be.childFromText(e.getNodeText(ne),e,Ni(ne)),mt==null&&(mt=Tt.head.isClosedBy),mt!=null&&mt.startPosition!=null&&(Tt.startPosition=mt.startPosition),mt!=null&&(Tt.index=mt.index),Tt.nodes.length>0){let Lt=Tt.nodes[Tt.nodes.length-1];Lt.endPosition!=null&&(Tt.endPosition=Lt.endPosition)}else mt!=null&&mt.endPosition!=null&&(Tt.endPosition=mt.endPosition);if(this.createdExecutionBranches.push(Tt),dt.logicBranches.push(Tt),(mt==null?void 0:mt.isClosingDirective)&&mt.name==xt.If){Mt=ue.offset,kt=!1;break}else mt!=null&&dt.chain.push(mt.index),at=ue.offset,mt instanceof _t&&(B=mt)}else kt=!1}if(s.push(dt),Mt!=null&&Mt==t.length)break}else s.push(B);else s.push(B)}return s}findEndOfBranch(t,e,s){let o=[],h=s,c=null;for(let u=0;u<t.length;u++){let f=t[u];if(f instanceof _t&&f.isOpenedBy!=null&&f.isOpenedBy==e){c=f;break}else o.push(f)}return{children:o,tail:c,offset:h}}findClosingPair(t,e,s){let o=t.length,h=0;for(let c=0;c<o;c++){let u=t[c];if(!(u instanceof _t)||u.startPosition==null||e.endPosition==null||!e.endPosition.isBefore(u.startPosition))continue;let f=u;if(f.isClosingDirective&&f.isOpenedBy!=null||!f.isClosingDirective&&f.isClosedBy!=null)continue;let k=f.name;if(!f.isClosingDirective&&s.includes(k)){h+=1;continue}if(s.includes(k)&&h>0){h-=1;continue}if(h==0&&s.includes(k)){f.isOpenedBy=e,e.isClosedBy=f;break}}}},gr=Wa;gr.ForceBreakLimit=1e5});var vo,Gc=Ot(()=>{"use strict";Re();vo=class{static setChildTypeCounts(t){t.forEach(e=>{if(!(e instanceof _t))return;let s=e;s.getImmediateChildren().forEach(o=>{let h="*unknown",c=0;o instanceof re?h="*literal":o instanceof Zn?h="*entities_echo":o instanceof Xn?h="*escaped_echo":o instanceof xi?h="*echo":o instanceof To?h="*verbatim":o instanceof _t&&(h=o.directiveName),s.childTypeCounts.has(h)==!1&&s.childTypeCounts.set(h,0);let u=s.childTypeCounts.get(h),f=u+1;s.childTypeCounts.set(h,f),o.parentTypeIndex=f,o.parentIndex=c,c+=1})})}}});var yo,Wc=Ot(()=>{"use strict";Re();yo=class{constructor(t,e){this.documentParser=t,this.fragmentsParser=e}doesContainFragments(t){var o,h,c,u,f;let e=(h=(o=t.endPosition)==null?void 0:o.index)!=null?h:0,s=(f=(u=(c=t.isClosedBy)==null?void 0:c.startPosition)==null?void 0:u.index)!=null?f:0;return this.fragmentsParser.getFragmentsBetween(e,s).length>0}analyze(){let t=this.documentParser.getNodes();!this.fragmentsParser.hasFragments()||(this.fragmentsParser.getFragments().forEach(e=>{let s=e.name.toLowerCase();if(e.isClosingFragment==!1&&e.isSelfClosing==!1&&(s=="script"||s=="style")){let o=this.fragmentsParser.getClosingFragmentAfter(e);if(o==null)return;e.endPosition!=null&&o.startPosition!=null&&this.documentParser.getNodesBetween(e.endPosition,o.startPosition).forEach(c=>{(c instanceof Ci||c instanceof $i||c instanceof On||c instanceof zi||c instanceof _t&&c.isClosedBy!=null)&&(e.containsStructures=!0),s=="style"?c.isInStyleTag=!0:c.isInScriptTag=!0})}}),t.forEach(e=>{var c,u,f,k,x,M;if(e instanceof re||e.startPosition==null)return;e instanceof _t&&!e.isClosingDirective&&e.isClosedBy!=null&&(e.containsAnyFragments=this.doesContainFragments(e));let s=this.fragmentsParser.getFragmentContaining(e.startPosition);if(s==null)return;if(e.fragment=s,e.startPosition.index-((u=(c=s.startPosition)==null?void 0:c.index)!=null?u:0)<=3){e.fragmentPosition=0;return}if(s.parameters.length==0){e.fragmentPosition=2;return}let h=!1;for(let C=0;C<s.parameters.length;C++){let y=s.parameters[C];if(((k=(f=y.startPosition)==null?void 0:f.index)!=null?k:0)<e.startPosition.index&&((M=(x=y.endPosition)==null?void 0:x.index)!=null?M:0)>e.startPosition.index){e.fragmentPosition=1,h=!0;break}}h||(e.fragmentPosition=2)}))}}});var Co,Yc=Ot(()=>{"use strict";Re();ai();Co=class{static analyze(t){t.forEach(e=>{if(e instanceof xi){let s=!1,o=!1;if(e.nextNode==null)s=!0;else if(e.nextNode instanceof re){let h=X.getFirstLine(e.nextNode.content);X.trimLeft(h," 	").startsWith(`
`)==!1&&h.trim().length>0&&(s=!0)}if(e.prevNode==null)o=!0;else if(e.prevNode instanceof re){let h=X.getLastLine(e.prevNode.content);X.trimRight(h," 	").endsWith(`
`)==!1&&h.trim().length>0&&(o=!0)}e.isInlineEcho=s||o}})}}});var No,Qc=Ot(()=>{"use strict";Re();ai();No=class{static analyze(t){t.forEach(e=>{var s,o;if(e instanceof Bi){if(((s=e.startPosition)==null?void 0:s.line)!=((o=e.endPosition)==null?void 0:o.line))return;let h=!1,c=!1;if(e.nextNode==null)h=!0;else if(e.nextNode instanceof re){let u=X.getFirstLine(e.nextNode.content);X.trimLeft(u," 	").startsWith(`
`)==!1&&u.trim().length>0&&(h=!0)}if(e.prevNode==null)c=!0;else if(e.prevNode instanceof re){let u=X.getLastLine(e.prevNode.content);X.trimRight(u," 	").endsWith(`
`)==!1&&u.trim().length>0&&(c=!0)}e.isInline=h&&c}})}}});var dn,jc=Ot(()=>{"use strict";Ki();ai();dn=class{static findRightBeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t+1;h<e.length;h++){let c=e[h];if(X.ctypeSpace(c)&&(o=!0),o&&(X.ctypeAlpha(c)||X.ctypeDigit(c)))return null;if(X.ctypePunct(c)||c==it.String_Terminator_SingleQuote||c==it.String_Terminator_DoubleQuote)return c}return null}static findRightNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t+1;h<e.length;h++){let c=e[h];if((X.ctypeSpace(c)||X.ctypePunct(c)&&c!=it.Punctuation_Underscore)&&(o=!0),o&&(X.ctypeAlpha(c)||X.ctypeDigit(c)))return h+1}return null}static findLeftNeighboringNextPunctuation(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t-2;h>=0;h--){let c=e[h];if(X.ctypeSpace(c)&&(o=!0),o&&(X.ctypeAlpha(c)||X.ctypeDigit(c)))return null;if(X.ctypePunct(c))return c}return null}static findLeftNeighboringNextAlphaNumeric(t,e,s=4){e=e.replace("	"," ".repeat(s));let o=!1;for(let h=t-1;h>=0;h--){let c=e[h];if((X.ctypeSpace(c)||X.ctypePunct(c)&&c!=it.Punctuation_Underscore)&&(o=!0),o&&(X.ctypeAlpha(c)||X.ctypeDigit(c)))return h+1}return null}static scanWordAt(t,e,s=4){if(e=e.replace("	"," ".repeat(s)),t<0||t>e.length)return null;let o=[],h=[];for(let c=t-1;c>=0;c--){let u=e[c];if(X.ctypePunct(u)&&u!=it.Punctuation_Underscore||X.ctypeSpace(u))break;o.push(u)}for(let c=t;c<e.length;c++){let u=e[c];if(X.ctypePunct(u)&&u!=it.Punctuation_Underscore||X.ctypeSpace(u))break;h.push(u)}return o.reverse().join("")+h.join("")}}});var pn,Ya=Ot(()=>{"use strict";pn=class{constructor(){this.index=-1;this.offset=0;this.line=0;this.char=0}shiftRight(t){let e=new pn;return e.offset=this.offset+t,e.index=this.index+t,e.line=this.line,e.char=this.char+t,e}isBefore(t){return t==null?!1:t.line>this.line||t.line==this.line&&this.offset<t.offset}isWithin(t,e,s=0){return t==null||e==null?!1:this.index>=t.index&&this.index<=e.index+s}isWithinRange(t){return t==null?!1:t.start!=null&&t.end!=null?this.isWithin(t.start,t.end):!1}}});function Qs(i){for(let t=i.getCurrentIndex()+1;t<i.inputLength();t++){let e=i.getChar(t);if(!X.ctypeSpace(e))return{didFind:!0,index:t,char:e}}return{didFind:!1,index:null,char:""}}var Qa=Ot(()=>{"use strict";ai()});function Ui(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength()&&(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()!=it.NewLine);i.incrementIndex());}var bs=Ot(()=>{"use strict";Ki()});function Mi(i,t){for(i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex())if(i.checkCurrentOffsets(),t&&i.pushChar(i.getCurrent()),i.getCurrent()==it.Punctuation_Asterisk&&i.getNext()==it.Punctuation_ForwardSlash){t&&i.pushChar(it.Punctuation_ForwardSlash),i.incrementIndex(),i.checkCurrentOffsets();break}}var As=Ot(()=>{"use strict";Ki()});function js(i){let t=i.getCurrentIndex()+i.getSeedOffset(),e=0,s=0;for(i.incrementIndex(),i.getCurrentIndex();i.getCurrentIndex()<i.inputLength();i.incrementIndex()){if(i.checkCurrentOffsets(),Ve(i.getCurrent())){Jn(i);continue}if(i.getCurrent()==it.Punctuation_ForwardSlash&&i.getNext()==it.Punctuation_Asterisk){Mi(i,!1);continue}if(i.getCurrent()==it.Punctuation_ForwardSlash&&i.getNext()==it.Punctuation_ForwardSlash){Ui(i,!1);continue}if(i.getCurrent()==it.LeftParen){s+=1;continue}if(i.getCurrent()==it.RightParen){if(s>0){s-=1;continue}e=i.getCurrentIndex()+i.getSeedOffset()+1;break}if(i.getCurrent()==null)break}let o=i.getContentSubstring(t,e-t);return{start:t,end:e,content:o}}var ja=Ot(()=>{"use strict";Ki();An();bs();As();In()});var bo,Kc=Ot(()=>{"use strict";Re();ai();Ki();An();Qa();ja();bs();As();In();bo=class{constructor(t){this.content="";this.inputLen=0;this.chars=[];this.currentContent=[];this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.hasFoundName=!1;this.nameStartsOn=0;this.nameEndsOn=-1;this.name="";this.parameterContent="";this.activeComponent=null;this.document=t}pushChar(t){this.currentContent.push(t)}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.name="",this.parameterContent="",this.hasFoundName=!1,this.nameStartsOn=0,this.nameEndsOn=-1,this.currentIndex=0,this.content="",this.chars=[],this.currentContent=[],this.inputLen=0,this.prev=null,this.cur=null,this.next=null,this}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}makeDirective(t,e,s){let o=new _t,h=this.getComponentOffset();o.withParser(this.document),t.startsWith("@")&&(t=t.substring(1)),o.directiveName=t.trim(),o.name=t.trim(),t.startsWith("end")?o.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(o.name="elseif");let c=this.document.positionFromOffset(h+e,h+e),u=this.document.positionFromOffset(h+s,h+s);if(o.startPosition=c,o.endPosition=u,o.namePosition={start:c,end:u},o.hasDirectiveParameters=!1,o.startPosition!=null&&o.endPosition!=null){let f=o.startPosition.index,k=o.endPosition.index-o.startPosition.index,x=f+k;o.sourceContent=this.document.getContentSubstring(f,k),o.offset={start:f,end:x,length:k}}return o}getComponentOffset(){var t,e,s;return((s=(e=(t=this.activeComponent)==null?void 0:t.startPosition)==null?void 0:e.offset)!=null?s:0)+3}makeDirectiveWithParameters(t,e,s,o){var x,M;let h=this.makeDirective(t,e,s),c=this.getComponentOffset();h.hasDirectiveParameters=!0,h.directiveParameters=o.content;let u=o.content.trim();u.startsWith("(")&&u.endsWith(")")&&(u=u.substring(1),u=u.substring(0,u.length-1),u=u.trim(),h.hasJsonParameters=u.startsWith("{")&&u.endsWith("}"));let f=this.document.positionFromOffset(o.start+c,o.start+c),k=this.document.positionFromOffset(o.end+c,o.end+c);if(h.startPosition=(M=(x=h.namePosition)==null?void 0:x.start)!=null?M:null,h.endPosition=k,h.directiveParametersPosition={start:f,end:k},h.startPosition!=null&&h.endPosition!=null){let C=h.startPosition.index,y=h.endPosition.index-h.startPosition.index,I=C+y;h.sourceContent=this.document.getContentSubstring(C,y),h.offset={start:C,end:I,length:y}}return h}prepare(t){return this.content=X.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this}scanToEndOfDirective(){let t=this.currentIndex,e=!1,s="",o=0,h=null;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==it.NewLine){o=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}else if(this.next==null){this.currentContent.push(this.cur),o=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}let c=Qs(this);if(this.cur!=it.LeftParen&&c.didFind&&X.ctypePunct(c.char)&&c.char!=it.LeftParen&&c.char!=it.Punctuation_Minus){this.currentContent.push(this.cur),o=this.currentIndex+1,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}if(X.ctypeSpace(this.cur)){let u=Qs(this);if(u.didFind&&u.char==it.LeftParen){o=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[],this.currentIndex=u.index,this.checkCurrentOffsets();let f=js(this);h=this.makeDirectiveWithParameters(s,t,o,f);break}else{o=this.currentIndex,s=this.currentContent.join(""),this.currentContent=[],h=this.makeDirective(s,t,o);break}}else if(this.cur==it.LeftParen){o=this.currentIndex-1,s=this.currentContent.join(""),this.currentContent=[];let u=js(this);h=this.makeDirectiveWithParameters(s,t,o,u);break}if(this.cur==null)break;this.currentContent.push(this.cur)}return h}nextPunctuation(){for(let t=this.currentIndex+1;t<this.inputLen;t++){let e=this.chars[t];if(X.ctypePunct(e))return e}return null}scanToEndOfBladeEcho(t){let e=this.getComponentOffset(),s=new xi;for(this.currentContent.unshift(),this.currentContent.unshift(),this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==it.RightBrace&&this.next==it.RightBrace){let o=this.currentIndex+1;s.startPosition=this.document.positionFromOffset(t+e,t+e),s.endPosition=this.document.positionFromOffset(o+e,o+e),s.withParser(this.document);let h=s.startPosition.index-5,c=s.endPosition.index-s.startPosition.index+3,u=h+c;s.sourceContent=this.content.substr(h,c),s.offset={start:h,end:u,length:c},s.content=this.currentContent.join("");break}if(this.cur==null)break;this.currentContent.push(this.cur)}return s}parse(t){var f;this.resetState().prepare(t.innerContent),this.activeComponent=t;let e=t.getParser(),s=!1,o=-1,h=-1,c=-1,u='"';for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.hasFoundName&&this.cur==it.LeftBrace&&this.next==it.LeftBrace){this.currentIndex+=2;let k=this.scanToEndOfBladeEcho(this.currentIndex);if(k!=null){let x=new Es;x.type=1,x.startPosition=k.startPosition,x.endPosition=k.endPosition,x.inlineEcho=k,x.type=3,t.hasParameters=!0,t.parameters.push(x),this.currentContent=[],this.currentIndex+=1;continue}}if(this.hasFoundName&&this.cur==it.AtChar&&this.currentContent.length==0&&this.nextPunctuation()!=it.Punctuation_Equals){let k=this.scanToEndOfDirective();if(k!=null){let x=new Es;x.type=1,x.startPosition=k.startPosition,x.endPosition=k.endPosition,x.name=k.directiveName,x.directive=k,t.hasParameters=!0,t.parameters.push(x);continue}}if(this.hasFoundName){if(X.ctypeSpace(this.cur)||this.next==null){if(this.currentContent.length>0){let k=new Es,x=this.getComponentOffset();k.type=2,this.next==null&&!X.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),k.name=this.currentContent.join("");let M=this.currentIndex+x-k.name.length;k.startPosition=this.document.positionFromCursor(M,M),k.endPosition=this.document.positionFromCursor(this.currentIndex+x,this.currentIndex+x),k.namePosition={start:k.startPosition,end:k.endPosition},t.parameters.push(k),t.hasParameters=!0,this.currentContent=[];continue}continue}else s||(s=!0,o=this.currentIndex);if(this.cur==it.Punctuation_Equals&&Ve(this.next)){u=this.next,h=this.currentIndex-1,this.currentIndex+=1,this.checkCurrentOffsets(),c=this.currentIndex;let k=Fi(this),x=new Es;x.withParser(e),x.name=this.currentContent.join(""),x.value=k.value;let M=t.relativeOffset(o+3),C=t.relativeOffset(h+3),y=t.relativeOffset(c+3),I=t.relativeOffset(k.endedOn+3);x.namePosition={start:e.positionFromOffset(M,M),end:e.positionFromOffset(C,C)},x.valuePosition={start:e.positionFromOffset(y,y),end:e.positionFromOffset(I,I)},x.terminatorStyle=u,x.wrappedValue=u+x.value+u,x.content=x.name+"="+x.wrappedValue,x.realName=x.name,x.realName.startsWith(":")&&(x.isExpression=!0,x.realName=x.realName.substring(1),x.realName.startsWith(":")&&(x.isExpression=!1,x.realName=x.realName.substring(1),x.isEscapedExpression=!0)),t.hasParameters=!0,t.parameters.push(x),this.currentContent=[],s=!1,o=-1,h=-1,c=-1,u='"';continue}}else if((X.ctypeSpace(this.cur)||this.next==null)&&this.hasFoundName==!1){this.next==null&&!X.ctypeSpace(this.cur)&&this.currentContent.push(this.cur),this.name=this.currentContent.join(""),this.nameEndsOn=this.currentIndex-1,this.hasFoundName=!0,this.currentContent=[],this.parameterContent=this.chars.slice(this.currentIndex).join("");continue}this.currentContent.push(this.cur)}if(t.name=this.makeComponentName(t),t.parameterContent=this.parameterContent,t.hasParameters)for(let k=0;k<t.parameters.length;k++){let x=t.parameters[k];if(x.type==3&&((f=x.inlineEcho)==null?void 0:f.content.trim()).toLowerCase().startsWith("$attributes")){t.receivesAttributeBag=!0;break}}}makeComponentName(t){let e=t.getParser(),s=new _o,o=t.relativeOffset(this.nameStartsOn+3),h=t.relativeOffset(this.nameEndsOn+3);if(s.withParser(e),s.name=this.name,t.isClosingTag&&(s.name=t.innerContent.trim().substring(1)),s.name.includes(":")){let c=s.name.split(":");s.name=c[0],s.inlineName=c.slice(1).join(":")}return s.startPosition=e.positionFromOffset(o,o),s.endPosition=e.positionFromOffset(h,h),s}}});var Ao,zc=Ot(()=>{"use strict";Re();Ya();ai();Ki();An();bs();As();In();Ao=class{constructor(){this.content="";this.nodeIndex=[];this.fragmentStartIndex=[];this.charLen=0;this.documentOffsets=new Map;this.inputLen=0;this.seedOffset=0;this.shiftLine=0;this.chars=[];this.currentIndex=0;this.lastDocumentOffsetKey=null;this.cur=null;this.next=null;this.prev=null;this.chunkSize=5;this.currentChunkOffset=0;this.fragments=[];this.isScript=!1;this.fragmentOpeningIndex=new Map;this.indexedFragments=new Map;this.embeddedIndexedFragments=new Map}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}pushChar(t){}getChar(t){return this.chars[t]}getSeedOffset(){return this.seedOffset}setDocumentOffsets(t,e){return this.documentOffsets=t,this.lastDocumentOffsetKey=e,this}getClosingFragmentAfter(t){let e=t.name.toLowerCase();for(let s=0;s<this.fragments.length;s++){let o=this.fragments[s];if(o.isClosingFragment&&!o.isSelfClosing&&o.name.toLowerCase()==e&&o.index>t.index)return o}return null}getContentSubstring(t,e){return this.content.substr(t,e)}resetState(){return this.fragments=[],this.inputLen=0,this.fragmentStartIndex=[],this.fragmentOpeningIndex.clear(),this}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.seedOffset=0,this.cur=null,this.next=null,this.prev=null}positionFromOffset(t,e,s=!1){let o=0,h=0;if(this.documentOffsets.has(t)){let u=this.documentOffsets.get(t);o=u.line,h=u.char}else if(this.documentOffsets.size==0)o=1,h=t+1;else{let u=null,f=null,k=null,x=null;for(let M of this.documentOffsets.keys()){if(M>=t){x!=null&&t>x?(u=k,f=x):(u=this.documentOffsets.get(M),f=M);break}k=this.documentOffsets.get(M),x=M}u==null&&(u=k,f=x),u!=null?(h=t-(f!=null?f:0),o=u.line,t<=(f!=null?f:0)?(o=u.line,h=t+1):o=u.line+1):this.lastDocumentOffsetKey!=null&&(o=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let c=new pn;return c.index=e,c.offset=t,c.line=o+this.shiftLine,c.char=h,c}getFragments(){return this.fragments}getFragmentsBetween(t,e){let s=[];return this.fragments.forEach(o=>{var u,f,k,x;let h=(f=(u=o.startPosition)==null?void 0:u.index)!=null?f:0,c=(x=(k=o.endPosition)==null?void 0:k.index)!=null?x:0;h>t&&c<e&&s.push(o)}),s}getFragmentContaining(t){var e,s,o,h;for(let c=0;c<this.fragments.length;c++){let u=this.fragments[c];if(((s=(e=u.startPosition)==null?void 0:e.index)!=null?s:0)<t.index&&((h=(o=u.endPosition)==null?void 0:o.index)!=null?h:0)>t.index)return u}return null}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}if(this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen){let t=!0;if(this.currentIndex==this.charLen-1){let e=X.split(X.substring(this.content,this.currentChunkOffset+this.chunkSize,this.chunkSize));this.currentChunkOffset+=this.chunkSize,this.currentChunkOffset==this.inputLen&&(t=!1),e.forEach(s=>{this.chars.push(s),this.charLen+=1})}t&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}}processInputText(t){this.content=t,this.inputLen=this.content.length;let e=[...this.content.matchAll(/(<(?!\?[php|\?=]))/gm)],s=[];e.forEach(o=>{var c;let h=(c=o.index)!=null?c:0;for(let u=0;u<this.nodeIndex.length;u++){let f=this.nodeIndex[u];if(h>=f.start&&h<=f.end)return}s.push(h)}),this.fragmentStartIndex=s}setIndexRanges(t){return this.nodeIndex=t,this}fetchAt(t,e){return this.content.substr(t,e)}getFragmentsContainingStructures(){let t=[];return this.fragments.forEach(e=>{if(!e.isClosingFragment&&!e.isSelfClosing&&e.containsStructures){let s=this.getClosingFragmentAfter(e);s!=null&&t.push({start:e,end:s})}}),t}parse(t){if(this.resetState().processInputText(t),this.fragmentStartIndex.length==0)return[];for(let h=0;h<this.fragmentStartIndex.length;h++){let c=this.fragmentStartIndex[h];if(this.resetIntermediateState(),this.seedOffset=c,this.currentChunkOffset=c,this.parseIntermediateText(),this.isScript){let u=!1;for(let f=h+1;f<this.fragmentStartIndex.length;f++){let k=this.fragmentStartIndex[f];if(this.fetchAt(k,8).toLowerCase()=="<\/script"){h=f-1,this.isScript=!1,u=!0;break}}if(!u)break}}let s=0,o=0;return this.fragments.forEach(h=>{let c=h.name.toLowerCase();(c=="script"||c=="style")&&(h.embeddedIndex=o,this.embeddedIndexedFragments.set(o,h),o+=1),h.index=s,this.indexedFragments.set(s,h),s+=1}),this.fragments}getFragment(t){return this.indexedFragments.get(t)}getEmbeddedFragment(t){return this.embeddedIndexedFragments.get(t)}hasFragments(){return this.fragments.length>0}skipToEndOfPhp(){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Ve(this.cur)&&Jn(this),this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur==it.Punctuation_QuestionMark&&this.next==it.Punctuation_GreaterThan||this.next==null)break}}parseIntermediateText(){this.chars=this.content.substr(this.currentChunkOffset,this.chunkSize).split(""),this.charLen=this.chars.length;let t=this.currentIndex,e=[],s=[],o=!1,h=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),X.ctypeSpace(this.cur)&&(o=!0),this.next==it.Punctuation_LessThan){let c=1;this.cur==it.Punctuation_ForwardSlash&&(c=2);let u=this.fetchAt(this.currentChunkOffset+c,5);if(u.toLowerCase()=="<?php"||u.startsWith("<?=")){this.skipToEndOfPhp();continue}}if(this.currentIndex>0&&this.cur==it.Punctuation_LessThan||this.next==null&&this.cur!=it.Punctuation_GreaterThan)break;if(!o&&this.cur==it.Punctuation_LessThan&&this.next==it.Punctuation_ForwardSlash&&(h=!0),!o&&this.cur!=it.Punctuation_LessThan&&this.cur!=it.Punctuation_ForwardSlash&&this.cur!=it.Punctuation_GreaterThan&&s.push(this.cur),Ve(this.cur)){let c=this.currentIndex;Jn(this);let u=new po;u.startPosition=this.positionFromOffset(c+this.seedOffset,c+this.seedOffset),u.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),e.push(u);continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_GreaterThan){let c=new fr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset+1,this.currentIndex+this.seedOffset+1),c.parameters=e,c.isSelfClosing=!0,c.name=s.join(""),c.isClosingFragment=h,this.fragments.push(c),h?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1);break}if(this.cur==it.Punctuation_GreaterThan){let c=new fr;c.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),c.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset),c.parameters=e,c.name=s.join(""),c.isClosingFragment=h,this.fragments.push(c),h?this.fragmentOpeningIndex.set(c.startPosition.index+1,1):this.fragmentOpeningIndex.set(c.startPosition.index,1),c.name.toLowerCase()=="script"&&c.isClosingFragment==!1&&(this.isScript=!0);break}}}}});var kr,Ka=Ot(()=>{"use strict";kr=["media","charset","import","namespace","supports","document","page","font-face","keyframes","viewport","counter-style","font-feature-values","swash","ornaments","annotation","stylistic","styleset","character-variant","font-variant-alternates","property","color-profile"]});var Io,za=Ot(()=>{"use strict";Io=["click","submit","scroll","keydown","keypress","keyup","blur","change","contextmenu","copy","cut","paste","dblclick","drag","dragend","dragenter","dragleave","dragover","dragstart","drop","focus","focusin","focusout","input","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","mousewheel","resize","select","touchcancel","touchend","touchmove","touchstart","wheel"]});function $c(){return Cb}var Cb,Jc=Ot(()=>{"use strict";Ka();za();Cb={ignoreDirectives:[...kr,...Io],directives:[],customIfs:[]}});var yt,it,Ki=Ot(()=>{"use strict";fc();Rc();Vc();Gc();Wc();Yc();Qc();Tr();Pn();jc();Ga();qa();Ws();Re();Ya();ai();Ns();Kc();zc();Jc();An();Qa();ja();bs();As();In();yt=class{constructor(){this.nodes=[];this.renderNodes=[];this.chars=[];this.currentIndex=0;this.currentContent=[];this.cur=null;this.next=null;this.prev=null;this.charLen=0;this.inputLen=0;this.maxLine=1;this.chunkSize=5;this.currentChunkOffset=0;this.parsingOffset=0;this.isVerbatim=!1;this.isPhpNode=!1;this.bladeStartIndex=[];this.bladeStartPositionIndex=new Map;this.lastBladeEndIndex=-1;this.lastNode=null;this.documentOffsets=new Map;this.lineIndex=new Map;this.lastDocumentOffsetKey=null;this.content="";this.originalContent="";this.seedOffset=0;this.seedStartLine=1;this.shiftLine=0;this.isParsingComponent=!1;this.shouldIgnoreStructures=!1;this.pushedErrors=new Map;this.errors=[];this.structureErrors=[];this.doesHaveUnclosedIfStructures=!1;this.doesHaveUnclosedSwitchStructures=!1;this.doesHaveUnclosedComments=!1;this.doesHaveUnclosedRegions=!1;this.phpValidator=null;this.unclosedRegionErrors=[Ht.TYPE_UNEXPECTED_END_OF_INPUT,Ht.TYPE_UNCLOSED_PHP_DIRECTIVE,Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_VERBATIM,Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_FOR_DIRECTIVE,Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE];this.componentParser=new bo(this),this.fragmentsParser=new Ao,this.fragmentsAnalyzer=new yo(this,this.fragmentsParser),this.parserOptions=$c()}withPhpValidator(t){return this.phpValidator=t,this}getPhpValidator(){return this.phpValidator}withParserOptions(t){return this.parserOptions=t,this}hasUnclosedIfStructures(){return this.doesHaveUnclosedIfStructures}hasUnclosedSwitchStructures(){return this.doesHaveUnclosedSwitchStructures}hasUnclosedComments(){return this.doesHaveUnclosedComments}hasUnclosedRegions(){return this.doesHaveUnclosedRegions}hasUnclosedStructures(){return this.doesHaveUnclosedComments||this.doesHaveUnclosedIfStructures||this.doesHaveUnclosedSwitchStructures||this.doesHaveUnclosedRegions}getErrors(){return this.errors}getStructureErrors(){return this.structureErrors}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}incrementIndex(){this.currentIndex+=1}getCurrentIndex(){return this.currentIndex}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}getChar(t){return this.chars[t]}pushChar(t){this.currentContent.push(t)}getSeedOffset(){return this.seedOffset}getContentSubstring(t,e){return this.content.substr(t,e)}resetIntermediateState(){this.chars=[],this.charLen=0,this.currentIndex=0,this.currentContent=[],this.cur=null,this.next=null,this.prev=null}setSeedPosition(t){return t==null?this.shiftLine=0:this.shiftLine=t.line,this}resetState(){this.nodes=[],this.renderNodes=[],this.charLen=0,this.bladeStartIndex=[],this.lastBladeEndIndex=-1}isStartingPhp(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,5).toLowerCase()=="<?php":!1}isStartingShorthandPhp(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_QuestionMark?this.fetchAt(this.currentChunkOffset,3).toLowerCase()=="<?=":!1}isStartingDirective(){return this.next!=null&&!X.ctypeAlpha(this.next)?!1:this.cur==yt.AtChar&&this.next!=null&&this.prev!=yt.AtChar}isClosingComponent(){return this.cur==yt.Punctuation_GreaterThan&&this.prev!=yt.Punctuation_Minus&&this.prev!=yt.Punctuation_Equals}isStartingClosingComponentTag(){return this.cur==yt.Punctuation_LessThan&&this.next==yt.Punctuation_ForwardSlash&&this.peekRelative(2)=="x"&&(this.peekRelative(3)==yt.Punctuation_Minus||this.peekRelative(3)==yt.Punctuation_Colon)}isStartingOpeningComponentTag(){return this.cur==yt.Punctuation_LessThan&&this.next=="x"&&(this.peekRelative(2)==yt.Punctuation_Minus||this.peekRelative(2)==yt.Punctuation_Colon)}isStartingEscapedEcho(){return(this.prev==null||this.prev!=null&&this.prev!=yt.AtChar)&&this.next==yt.Punctuation_Exclamation&&this.cur==yt.LeftBrace&&this.peek(2)==yt.Punctuation_Exclamation}isStartingBladeNodeStructure(){return(this.prev==null||this.prev!=null&&this.prev!=yt.AtChar)&&this.next==yt.LeftBrace&&this.cur==yt.LeftBrace&&this.next==yt.LeftBrace}hasEncounteredAnotherStructure(){return this.shouldIgnoreStructures?!1:this.isStartingOpeningComponentTag()?!0:this.isParsingComponent?!1:!!(this.isStartingClosingComponentTag()||this.isStartingDirective()||this.isStartingEscapedEcho()||this.isStartingBladeNodeStructure())}endsWithTld(t){return/\.[a-z]{2,63}$/i.test(t)}processInputText(t){var M;this.originalContent=t,this.content=X.normalizeLineEndings(t),this.inputLen=this.content.length;let e=[...this.content.matchAll(/(\n)/gm)],s=e.length,o=this.seedStartLine,h=null,c=0,u=0;for(let C=0;C<s;C++){let y=e[C],I=(M=y.index)!=null?M:0,F=I;h!=null?F=I-h:F=F+1,this.documentOffsets.set(I,{char:F,line:o});let $=0,ht=0;C==0?(ht=F-1,$=0):($=u+1,ht=I),this.lineIndex.set(o,{char:F,line:o,startIndex:$,endIndex:ht}),this.lastDocumentOffsetKey=I,this.maxLine=o,o+=1,h=I,u=ht,c=$}this.maxLine+=1;let f=[...this.content.matchAll(/(@?{{|<\?php|<\?=|@?{!!|@|<x-|<\/x-|<x:|<\/x:)/gm)],k=0,x=!1;return f.forEach(C=>{let y=C[0],I=this.content.indexOf(y,k),F=this.content.substr(I,10);if(F.startsWith("@@")||F.startsWith("@{{")){k=this.content.indexOf(y,k),x=!0;return}let $=this.content.indexOf(y,k);if(x&&k==$){k=$;return}let ht=3,ct=!1,J=!1,z=[],at=[];this.parserOptions.ignoreDirectives.length>0&&(this.parserOptions.ignoreDirectives.forEach(Y=>{z.push(Y.toLowerCase()),Y.length>ht&&(ht=Y.length)}),ht+=5,ct=!0),this.parserOptions.directives.length>0&&(ht=3,this.parserOptions.directives.forEach(Y=>{at.push(Y.toLowerCase()),Y.length>ht&&(ht=Y.length)}),ht+=5,ct=!1,J=!0);let B=this.fetchAt($,ht);if(B.includes(".")){let Y=B;B.includes(`
`)&&(Y=X.breakByNewLine(Y)[0]);let dt=Gs.fromText(Y);if(dt.includes(".")&&this.endsWithTld(dt))return}if(B.startsWith("@{")==!1){let Y=B.substring(0,1),dt=B.substring(1,2);if(Y=="@"&&X.ctypeAlpha(dt))if(J){let rt=this.breakPreFetch(B).toLowerCase();at.includes(rt)&&this.bladeStartIndex.push($)}else if(ct){let rt=this.breakPreFetch(B).toLowerCase();z.includes(rt)||this.bladeStartIndex.push($)}else this.bladeStartIndex.push($);else Y!="@"&&this.bladeStartIndex.push($)}this.bladeStartPositionIndex.set($,1),k=$+2,x=!1}),this.fragmentsParser.setDocumentOffsets(this.documentOffsets,this.lastDocumentOffsetKey),!0}breakPreFetch(t){let o=X.replaceAllInString(X.normalizeLineEndings(t),`
`," ").split(" ")[0].split("(")[0].trim();return o.startsWith("@")&&(o=o.substring(1)),o.toLowerCase()}fetchAt(t,e){return this.content.substr(t,e)}shouldSkipForward(){return this.lastNode==null?!0:!(this.lastNode instanceof _t&&(this.lastNode.directiveName==xt.Verbatim||this.lastNode.directiveName==xt.Php))}pushError(t){let e=t.hash();this.pushedErrors.has(e)||(t.errorCode==Ht.TYPE_PARSE_UNCLOSED_CONDITION?(this.doesHaveUnclosedIfStructures=!0,this.structureErrors.push(t)):t.errorCode==Ht.TYPE_PARSE_UNCLOSED_SWITCH?(this.doesHaveUnclosedSwitchStructures=!0,this.structureErrors.push(t)):t.errorCode==Ht.TYPE_UNCLOSED_COMMENT?(this.doesHaveUnclosedComments=!0,this.structureErrors.push(t)):this.unclosedRegionErrors.includes(t.errorCode)&&(this.doesHaveUnclosedRegions=!0,this.structureErrors.push(t)),this.pushedErrors.set(e,t),this.errors.push(t))}getContent(){return this.content}getOriginalContent(){return this.originalContent}getFragments(){return this.fragmentsParser.getFragments()}getFragmentsParser(){return this.fragmentsParser}getFragmentsContainingStructures(){return this.fragmentsParser.getFragmentsContainingStructures()}charLeftAt(t){return t==null||t.char<=1?null:this.charAt(this.positionFromCursor(t.line,t.char-1))}charLeftAtCursor(t,e){return this.charLeftAt(this.positionFromCursor(t,e))}charRightAt(t){return t==null?null:this.charAt(this.positionFromCursor(t.line,t.char+1))}charRightAtCursor(t,e){return this.charRightAt(this.positionFromCursor(t,e))}punctuationLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:dn.findLeftNeighboringNextPunctuation(t.char,s,e)}punctuationLeftAtCursor(t,e,s=4){return this.punctuationLeftAt(this.positionFromCursor(t,e),s)}punctuationRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:dn.findRightBeighboringNextPunctuation(t.char,s,e)}punctuationRightAtCursor(t,e,s=4){return this.punctuationRightAt(this.positionFromCursor(t,e),s)}wordRightAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let o=dn.findRightNeighboringNextAlphaNumeric(t.char,s,e);return o==null?null:dn.scanWordAt(o,s,e)}wordRightAtCursor(t,e,s=4){return this.wordRightAt(this.positionFromCursor(t,e),s)}wordLeftAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);if(s==null)return null;let o=dn.findLeftNeighboringNextAlphaNumeric(t.char,s,e);return o==null?null:dn.scanWordAt(o,s,e)}wordLeftAtCursor(t,e,s=4){return this.wordLeftAt(this.positionFromCursor(t,e),s)}wordAt(t,e=4){if(t==null)return null;let s=this.getLineText(t.line);return s==null?null:dn.scanWordAt(t.char,s,e)}getLineText(t){let e=this.getLineIndex(t);return e!=null?X.trimRight(this.getContent().substring(e.start,e.end+1)):null}wordAtCursor(t,e,s=4){return this.wordAt(this.positionFromCursor(t,e),s)}charAt(t){return t==null?null:this.content.substr(t.offset,1)}getLinesAround(t){var h;let e=new Map,s=t-3,o=t+3;s<1&&(s=1),o>this.maxLine&&(o=this.maxLine);for(let c=s;c<=o;c++)e.set(c,(h=this.getLineText(c))!=null?h:"");return e}charAtCursor(t,e){return this.charAt(this.positionFromCursor(t,e))}getLineIndex(t){if(t==this.maxLine){let s=this.lineIndex.get(t-1);if(s!=null){let o=s.endIndex+1;return{end:this.inputLen-1,start:o}}return null}let e=this.lineIndex.get(t);return e!=null?{start:e.startIndex,end:e.endIndex}:null}positionFromCursor(t,e){if(t==this.maxLine){let o=this.lineIndex.get(t-1);if(o!=null){let h=o.endIndex+1,c=h+(e-1),u=new pn;return u.offset=c,u.line=t,u.char=e,u.index=c,u}return null}let s=this.lineIndex.get(t);if(s!=null){let o=new pn;return o.offset=s.startIndex+(e-1),o.line=s.line,o.char=e,o.index=s.startIndex+(e-1),o}return null}parse(t){if(Ge.customIfs.clear(),this.parserOptions.customIfs.forEach(u=>{Ge.customIfs.set(u,1)}),!this.processInputText(t))return[];let e=this.bladeStartIndex.length,s=e-1;if(e==0&&!this.isVerbatim){let u=new re;u.withParser(this),u.content=this.prepareLiteralContent(this.content),u.startPosition=this.positionFromOffset(0,0),u.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(u)}else for(let u=0;u<e;u+=1){let f=this.bladeStartIndex[u];if(this.seedOffset=f,u==0&&f>0&&!this.isVerbatim){let x=new re;x.withParser(this),x.content=this.prepareLiteralContent(this.content.substr(0,f)),x.content.length>0&&(x.startPosition=this.positionFromOffset(0,0),x.endPosition=this.positionFromOffset(f,f-1),this.nodes.push(x))}if(f<this.lastBladeEndIndex)continue;if(this.currentChunkOffset=f,this.parsingOffset=f,this.resetIntermediateState(),this.parseIntermediateText(f),this.isVerbatim){let x=!1;for(let M=u+1;M<this.bladeStartIndex.length;M++){let C=this.bladeStartIndex[M];if(this.fetchAt(C,12)=="@endverbatim"){u=M-1,this.isVerbatim=!1,x=!0;break}}if(x)continue}if(this.isPhpNode){let x=!1;for(let M=u+1;M<this.bladeStartIndex.length;M++){let C=this.bladeStartIndex[M];if(this.fetchAt(C,7)=="@endphp"){u=M-1,this.isPhpNode=!1,x=!0;break}}if(x)continue}if(this.lastNode instanceof Ln||this.lastNode instanceof Bi){let x=-1;for(let M=u;M<this.bladeStartIndex.length;M++){let C=this.bladeStartIndex[M];if(C>this.lastBladeEndIndex){x=C;break}}if(x!=-1){let M=1;this.lastNode instanceof Bi&&(M=0);let C=this.lastBladeEndIndex+M,y=this.content.substr(this.lastBladeEndIndex+M,x-this.lastBladeEndIndex-M),I=x-1,F=new re;F.withParser(this),F.startPosition=this.positionFromOffset(C,C),F.endPosition=this.positionFromOffset(I,I),F.content=y,this.nodes.push(F),this.lastNode=F,this.lastBladeEndIndex=I;continue}}this.lastNode instanceof On&&(f-=2);let k=!1;if(this.bladeStartPositionIndex.has(this.currentChunkOffset)?this.lastBladeEndIndex<this.currentChunkOffset&&(k=!0):k=!0,k){if(u+1<e){let x=this.bladeStartIndex[u+1],M=1;this.lastNode instanceof Bi&&(M=0);let C=this.lastBladeEndIndex+M;if(x<C)if(this.lastBladeEndIndex>x)u+2<e&&(x=this.bladeStartIndex[u+2]);else continue;if(this.shouldSkipForward())for(let y=u;y<this.bladeStartIndex.length;y++){let I=this.bladeStartIndex[y];if(I>this.lastBladeEndIndex){x=I;break}}if(u+1==s&&x<=this.lastBladeEndIndex){if(this.isVerbatim)break;let y=this.currentChunkOffset,I=this.content.substr(C),F=new re;F.withParser(this),F.content=this.prepareLiteralContent(I),F.content.length>0&&(F.startPosition=this.positionFromOffset(y,y),F.endPosition=this.positionFromOffset(x,x-1),this.nodes.push(F));break}else{let y=x-this.lastBladeEndIndex-1;if(y==0||this.isVerbatim)continue;let I=this.content.substr(C,y),F=new re;F.withParser(this),F.content=this.prepareLiteralContent(I),F.content.length>0&&(F.startPosition=this.positionFromOffset(C,C),F.endPosition=this.positionFromOffset(x,x-1),this.nodes.push(F))}continue}if(u!==s&&this.lastNode!=null&&this.lastNode.endPosition!=null&&this.positionFromOffset(f,f).isBefore(this.lastNode.endPosition)){if(u+1<e){if(this.bladeStartIndex[u+1]<this.lastNode.endPosition.offset)continue}else if(u+1!=s)continue}if(u==s){let x=this.currentIndex+f;if(x<this.inputLen&&!this.isVerbatim){let M=new re;M.withParser(this),M.content=this.prepareLiteralContent(this.content.substr(x)),M.content.length>0&&(M.startPosition=this.positionFromOffset(x,x),M.endPosition=this.positionFromOffset(this.inputLen-1,this.inputLen-1),this.nodes.push(M));break}}}}let o=0;this.nodes.forEach(u=>{u.index=o,o+=1});let h=null;for(let u=0;u<this.nodes.length;u++){let f=this.nodes[u],k=null;u+1<this.nodes.length&&(k=this.nodes[u+1]),f.prevNode=h,f.nextNode=k,h=f}Ge.determineCandidates(this.nodes),this.nodes=go.rewrite(this.nodes);let c=new gr;return this.renderNodes=c.associate(this.nodes,this),Co.analyze(this.nodes),No.analyze(this.nodes),this.nodes.forEach(u=>{if(u instanceof _t){let f=u,k=f.directiveName.toLowerCase();if(f.isClosedBy!=null){let x=f.getImmediateChildren();for(let M=0;M<x.length;M++){let C=x[M];if(C instanceof _t&&C!=f.isClosedBy&&C.isClosedBy!=null){f.containsChildStructures=!0;break}else if(C instanceof Ci||C instanceof zi||C instanceof $i){f.containsChildStructures=!0;break}}}k=="switch"&&f.isClosedBy==null||k=="endswitch"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_PARSE_UNCLOSED_SWITCH,f,"Unclosed switch control structure",0)):k=="php"?f.hasDirectiveParameters==!1&&f.isClosedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_PHP_DIRECTIVE,f,"Unclosed @php directive",0)):k=="endphp"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_PHP_CLOSING_DIRECTIVE,f,"Unpaired @endphp directive",0)):k=="verbatim"&&f.isClosedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_VERBATIM,f,"Unclosed @verbatim directive",0)):k=="endverbatim"&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_VERBATIM_CLOSING_DIRECTIVE,f,"Unpaired @endverbatim directive",0)):k=="for"&&f.isClosedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_FOR_DIRECTIVE,f,"Unclosed @for directive",0)):k=="for"&&f.isClosingDirective==!0&&f.isOpenedBy==null?f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_FOR_CLOSING_DIRECTIVE,f,"Unpaired @endfor directive",0)):k=="forelse"?(f.isClosedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_FOR_ELSE_DIRECTIVE,f,"Unclosed @forelse directive",0)),f.findFirstDirectChildDirectiveOfType("empty")==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_FOR_ELSE_MISSING_EMPTY_DIRECTIVE,f,"@forelse missing @empty directive",1))):k=="endforelse"&&f.isOpenedBy==null&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNPAIRED_FOR_ELSE_CLOSING_DIRECTIVE,f,"Unpaired @endforelse directive",0))}}),this.createChildDocuments(this.renderNodes),this.content.length>0&&this.fragmentsParser.setIndexRanges(this.getNodeIndexRanges()).parse(this.content),this.fragmentsAnalyzer.analyze(),this.renderNodes.forEach(u=>{var f,k,x,M,C,y,I,F,$,ht,ct,J;u instanceof Ci?(u.fragment=(k=(f=u.constructedFrom)==null?void 0:f.fragment)!=null?k:null,u.fragmentPosition=(M=(x=u.constructedFrom)==null?void 0:x.fragmentPosition)!=null?M:3):u instanceof $i?(u.fragment=(y=(C=u.constructedFrom)==null?void 0:C.fragment)!=null?y:null,u.fragmentPosition=(F=(I=u.constructedFrom)==null?void 0:I.fragmentPosition)!=null?F:3):u instanceof zi&&(u.fragment=(ht=($=u.constructedFrom)==null?void 0:$.fragment)!=null?ht:null,u.fragmentPosition=(J=(ct=u.constructedFrom)==null?void 0:ct.fragmentPosition)!=null?J:3)}),vo.setChildTypeCounts(this.nodes),this.renderNodes}getNodeIndexRanges(){let t=[];return this.nodes.forEach(e=>{var s,o,h,c;e instanceof re||t.push({start:(o=(s=e.startPosition)==null?void 0:s.index)!=null?o:0,end:(c=(h=e.endPosition)==null?void 0:h.index)!=null?c:0})}),t}createChildDocuments(t){t.forEach(e=>{var s,o,h,c,u,f,k,x;if(e instanceof _t&&e.isClosedBy!=null){let M=e.isClosedBy,C=((o=(s=e.startPosition)==null?void 0:s.index)!=null?o:0)-1,y=((c=(h=M.endPosition)==null?void 0:h.index)!=null?c:0)-C;e.nodeContent=this.content.substr(C,y);let I=(f=(u=e.endPosition)==null?void 0:u.index)!=null?f:0,F=((x=(k=M.startPosition)==null?void 0:k.index)!=null?x:0)-1-I,$=this.content.substr(I,F);e.childrenDocument=be.childFromText($,this,Ni(e.getChildren()))}})}checkCurrentOffsets(){if(this.currentIndex>this.chars.length){this.cur=null,this.prev=null,this.next=null;return}let t=Math.ceil(this.currentIndex/5);t>0&&(this.currentChunkOffset=this.parsingOffset+this.chunkSize*t),this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&this.currentIndex+1<this.chars.length&&(this.next=this.chars[this.currentIndex+1])}parseIntermediateText(t){this.currentContent=[],this.chars=this.content.substring(t).split(""),this.charLen=this.chars.length;let e=!1;for(this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.isStartingShorthandPhp()){this.scanToEndOfPhp(this.currentIndex,!0),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingPhp()){this.scanToEndOfPhp(this.currentIndex),this.currentIndex+=2,this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.currentContent=[];break}if(this.isStartingDirective()){this.currentIndex+=1,this.scanToEndOfDirective(),this.currentContent=[],this.currentIndex+=1,e=!0;break}if(this.isStartingClosingComponentTag()){let s=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!0),this.isParsingComponent=!1,this.currentIndex+=3,this.currentContent=[],e=!0;break}if(this.isStartingOpeningComponentTag()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.isParsingComponent=!0,this.scanToEndOfComponentTag(s,!1),this.isParsingComponent=!1,this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingEscapedEcho()){let s=this.currentIndex;this.currentIndex+=3,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfEscapedEcho(s),this.currentContent=[],this.currentIndex+=3,e=!0;break}if(this.isStartingBladeNodeStructure()){let s=this.peek(2),o=this.peek(3);if(s==yt.Punctuation_Minus&&o==yt.Punctuation_Minus){let h=this.currentIndex;this.currentIndex+=4,this.currentContent=[],this.checkCurrentOffsets(),this.scanToEndOfComment(h),this.currentContent=[],this.currentIndex+=4,e=!0;break}else if(s==yt.LeftBrace){let h=this.currentIndex;this.currentIndex+=3,this.scanToEndOfBladeEntitiesEcho(h+1),this.currentContent=[],this.currentIndex+=3,e=!0;break}else{let h=this.currentIndex;this.currentIndex+=2,this.scanToEndOfBladeEcho(h+1),this.currentContent=[],this.currentIndex+=2,e=!0;break}}}return e}peek(t){return this.chars[t]}peekRelative(t){return this.peek(this.currentIndex+t)}scanToEndOfPhp(t,e=!1){for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),Ve(this.cur)&&Jn(this),this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Ui(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Mi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_QuestionMark&&this.next==yt.Punctuation_GreaterThan||this.next==null){let s=new Bi;e&&(s=new mo),s.withParser(this),s.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),s.endPosition=this.positionFromOffset(this.currentIndex+1+this.seedOffset,this.currentIndex+1+this.seedOffset);let o=s.startPosition.index,h=s.endPosition.index-s.startPosition.index+1;s.sourceContent=this.content.substr(o,h),this.nodes.push(s),this.lastNode=s;break}}}scanToEndOfComponentTag(t,e){let s=!1,o=!1,h=-1,c=-1,u=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!s&&(s=!0,h=this.currentIndex),X.ctypeSpace(this.cur)&&!o&&(o=!0,c=this.currentIndex),Ve(this.cur)){this.shouldIgnoreStructures=!0,Jn(this),this.shouldIgnoreStructures=!1;continue}let f=this.isClosingComponent();if((this.hasEncounteredAnotherStructure()||this.next==null&&!f)&&(u=!0,h!=-1?(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2)):c!=-1&&(this.currentIndex=c-2,this.currentContent=this.currentContent.slice(0,c-2))),f||u){let k=new On;k.withParser(this),k.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),k.endPosition=this.positionFromOffset(this.currentIndex+this.seedOffset,this.currentIndex+this.seedOffset);let x=k.startPosition.index,M=k.endPosition.index-k.startPosition.index+1,C=x+M;k.sourceContent=this.content.substr(x,M),k.isClosingTag=e,k.isSelfClosing=this.prev==yt.Punctuation_ForwardSlash,k.offset={start:x,end:C,length:M};let y=3;k.isSelfClosing&&(y+=1),k.innerContent=this.content.substr(k.startPosition.index+3,k.endPosition.index-k.startPosition.index-y),u&&k.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,k,"Unexpected end of input while parsing component tag",0)),this.componentParser.parse(k),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+this.seedOffset,this.lastNode=k,this.nodes.push(k);break}}}scanToEndOfEscapedEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,o=this.currentIndex),X.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),(this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.Punctuation_Exclamation&&this.next==yt.Punctuation_Exclamation&&this.peekRelative(2)==yt.RightBrace||c){let u=this.currentIndex+2,f=new Xn;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let k=f.startPosition.index,x=f.endPosition.index-f.startPosition.index+1,M=k+x;f.sourceContent=this.content.substr(k,x),f.offset={start:k,end:M,length:x},c&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfComment(t){var u,f,k,x,M,C,y,I,F;let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,o=this.currentIndex),X.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),this.next==null&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.Punctuation_Minus&&this.next==yt.Punctuation_Minus||this.next==null){let $=this.peekRelative(2),ht=this.peekRelative(3);if($==yt.RightBrace&&ht==yt.RightBrace||this.next==null){let ct=this.currentIndex+3,J=new Ln;J.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),J.endPosition=this.positionFromOffset(ct+this.seedOffset,ct+this.seedOffset),J.innerContentPosition={start:this.positionFromOffset(t+4+this.seedOffset,t+4+this.seedOffset),end:this.positionFromOffset(ct-4+this.seedOffset,ct-4+this.seedOffset)},J.withParser(this);let z=J.startPosition.index,at=J.endPosition.index-J.startPosition.index+1,B=z+at;J.sourceContent=this.content.substr(z,at),J.offset={start:z,end:B,length:at},c&&J.pushError(Ie.makeSyntaxError(Ht.TYPE_UNCLOSED_COMMENT,J,"Unexpected end of input while parsing comment",0)),J.innerContent=this.content.substr((k=(f=(u=J.innerContentPosition)==null?void 0:u.start)==null?void 0:f.index)!=null?k:0,((C=(M=(x=J.innerContentPosition)==null?void 0:x.end)==null?void 0:M.index)!=null?C:0)-((F=(I=(y=J.innerContentPosition)==null?void 0:y.start)==null?void 0:I.index)!=null?F:0)+1),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+3+this.seedOffset,this.lastNode=J,this.nodes.push(J);break}else{this.cur!=null&&this.currentContent.push(this.cur);continue}}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEntitiesEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,o=this.currentIndex),X.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),Ve(this.cur)){let u=this.cur;this.shouldIgnoreStructures=!0;let f=Fi(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(u),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(u),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.RightBrace&&this.next==yt.RightBrace&&this.peekRelative(2)==yt.RightBrace||c){let u=this.currentIndex+1,f=new Zn;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let k=f.startPosition.index-1,x=f.endPosition.index-f.startPosition.index+3,M=k+x;f.sourceContent=this.content.substr(k,x),f.offset={start:k,end:M,length:x},c&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+2+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}scanToEndOfBladeEcho(t){let e=!1,s=!1,o=-1,h=-1,c=!1;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.NewLine&&!e&&(e=!0,o=this.currentIndex),X.ctypeSpace(this.cur)&&!s&&(s=!0,h=this.currentIndex),Ve(this.cur)){let u=this.cur;this.shouldIgnoreStructures=!0;let f=Fi(this);this.shouldIgnoreStructures=!1,this.currentIndex=f.endedOn,this.currentContent.push(u),this.currentContent=this.currentContent.concat(f.value.split("")),this.currentContent.push(u),this.currentIndex=f.endedOn;continue}if((this.hasEncounteredAnotherStructure()||this.next==null)&&(c=!0,o!=-1?(this.currentIndex=o-2,this.currentContent=this.currentContent.slice(0,o-2)):h!=-1&&(this.currentIndex=h-2,this.currentContent=this.currentContent.slice(0,h-2))),this.cur==yt.RightBrace&&this.next==yt.RightBrace||c){let u=this.currentIndex+1,f=new xi;f.startPosition=this.positionFromOffset(t+this.seedOffset,t+this.seedOffset),f.endPosition=this.positionFromOffset(u+this.seedOffset,u+this.seedOffset),f.withParser(this);let k=f.startPosition.index-1,x=f.endPosition.index-f.startPosition.index+2,M=k+x;f.sourceContent=this.content.substr(k,x),f.offset={start:k,end:M,length:x},c&&f.pushError(Ie.makeSyntaxError(Ht.TYPE_UNEXPECTED_END_OF_INPUT,f,"Unexpected end of input while parsing echo",0)),f.content=this.currentContent.join(""),this.currentContent=[],this.lastBladeEndIndex=this.currentIndex+1+this.seedOffset,this.lastNode=f,this.nodes.push(f);break}if(this.cur==null)break;this.currentContent.push(this.cur)}}makeDirective(t,e,s){let o=new _t;if(o.withParser(this),t==xt.Verbatim)this.isVerbatim=!0;else if(t==xt.Php)this.isPhpNode=!0;else if((t==xt.EndVerbatim||t==xt.EndPhp)&&this.nodes[this.nodes.length-1]instanceof re){let k=this.nodes.pop();if(this.nodes[this.nodes.length-1]instanceof _t){let x=this.nodes[this.nodes.length-1];(x.directiveName==xt.Verbatim||x.directiveName==xt.Php)&&(x.innerContent=k.content)}}o.directiveName=t.trim(),o.name=t.trim();let h=o.name.toLowerCase();h=="endcan"||h=="endcannot"||h=="endauth"||h=="endguest"||h=="endenv"||h=="endproduction"?(o.name="if",o.isClosingDirective=!0):t.startsWith("end")?o.name=t.substring(3):t.startsWith("else")&&t!="elseif"&&t!="else"&&(o.name="elseif");let c=this.positionFromOffset(this.seedOffset+e,this.seedOffset+e),u=this.positionFromOffset(this.seedOffset+s,this.seedOffset+s);if(o.startPosition=c,o.endPosition=u,o.namePosition={start:c,end:u},o.hasDirectiveParameters=!1,o.startPosition!=null&&o.endPosition!=null){let f=o.startPosition.index-1,k=o.endPosition.index-o.startPosition.index+1,x=f+k;o.sourceContent=this.content.substr(f,k),o.offset={start:f,end:x,length:k}}return o}makeDirectiveWithParameters(t,e,s,o){var k,x;let h=this.makeDirective(t.trim(),e,s);this.isPhpNode&&t==xt.Php&&(this.isPhpNode=!1),h.hasDirectiveParameters=!0,h.directiveParameters=o.content;let c=o.content.trim();c.startsWith("(")&&c.endsWith(")")&&(c=c.substring(1),c=c.substring(0,c.length-1),c=c.trim(),h.hasJsonParameters=c.startsWith("{")&&c.endsWith("}"));let u=this.positionFromOffset(o.start,o.start),f=this.positionFromOffset(o.end,o.end);if(h.startPosition=(x=(k=h.namePosition)==null?void 0:k.start)!=null?x:null,h.endPosition=f,h.directiveParametersPosition={start:u,end:f},h.startPosition!=null&&h.endPosition!=null){let M=h.startPosition.index-1,C=h.endPosition.index-h.startPosition.index+1,y=M+C;h.sourceContent=this.content.substr(M,C),h.offset={start:M,end:y,length:C}}return h}scanToEndOfDirective(){let t=this.currentIndex,e="",s=0;for(this.currentIndex;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_Asterisk){this.shouldIgnoreStructures=!0,Mi(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.Punctuation_ForwardSlash&&this.next==yt.Punctuation_ForwardSlash){this.shouldIgnoreStructures=!0,Ui(this,!0),this.shouldIgnoreStructures=!1;continue}if(this.cur==yt.NewLine){s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-1;break}else if(this.next==null){this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let h=this.makeDirective(e.trim(),t,s);this.lastNode=h,this.nodes.push(h),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}let o=Qs(this);if(this.cur!=yt.LeftParen&&o.didFind&&X.ctypePunct(o.char)&&o.char!=yt.LeftParen&&o.char!=yt.Punctuation_Minus){let h=0,c=!1;X.ctypeSpace(this.cur)?(h=1,c=!0):this.currentContent.push(this.cur),s=this.currentIndex+1,e=this.currentContent.join(""),this.currentContent=[];let u=this.makeDirective(e.trim(),t,s-h);this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset-h,c&&(this.currentIndex-=1);break}if(X.ctypeSpace(this.cur)){let h=Qs(this);if(h.didFind&&h.char==yt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[],this.currentIndex=h.index,this.checkCurrentOffsets();let c=js(this),u=this.makeDirectiveWithParameters(e.trim(),t,s,c);this.lastNode=u,this.nodes.push(u),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}else{s=this.currentIndex,e=this.currentContent.join(""),this.currentContent=[];let c=this.makeDirective(e.trim(),t,s);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}}else if(this.cur==yt.LeftParen){s=this.currentIndex-1,e=this.currentContent.join(""),this.currentContent=[];let h=js(this),c=this.makeDirectiveWithParameters(e.trim(),t,s,h);this.lastNode=c,this.nodes.push(c),this.lastBladeEndIndex=this.currentIndex+this.seedOffset;break}if(this.cur==null)break;this.currentContent.push(this.cur)}}getText(t,e){return this.content.substr(t,e-t)}getNodeText(t){let e="";return t.forEach(s=>{var o,h,c,u,f;if(s instanceof re)e+=s.content;else if(s instanceof $i)e+=s.nodeContent;else if(s instanceof zi)e+=s.nodeContent;else if(s instanceof Ci)e+=s.nodeContent;else if(s instanceof _t)if((s.name=="php"||s.name=="verbatim")&&s.isClosedBy!=null){if(s.documentContent.trim().length==0){let k=(f=s.getParser())==null?void 0:f.getText((h=(o=s.endPosition)==null?void 0:o.index)!=null?h:0,((u=(c=s.isClosedBy.startPosition)==null?void 0:c.index)!=null?u:0)-1);e+=s.sourceContent,e+=k}}else e+=s.sourceContent;else e+=s.sourceContent}),e}getNodes(){return this.nodes}getNodesBetween(t,e){let s=[];return this.nodes.forEach(o=>{var h,c,u,f;((c=(h=o.startPosition)==null?void 0:h.offset)!=null?c:0)>t.offset&&((f=(u=o.endPosition)==null?void 0:u.offset)!=null?f:0)<e.offset&&s.push(o)}),s}getRenderNodes(){return this.renderNodes}prepareLiteralContent(t){return t}positionFromOffset(t,e,s=!1){let o=0,h=0;if(this.documentOffsets.has(t)){let u=this.documentOffsets.get(t);o=u.line,h=u.char}else if(this.documentOffsets.size==0)o=1,h=t+1;else{let u=null,f=null,k=null,x=null;for(let M of this.documentOffsets.keys()){if(M>=t){x!=null&&t>x?(u=k,f=x):(u=this.documentOffsets.get(M),f=M);break}k=this.documentOffsets.get(M),x=M}u==null&&(u=k,f=x),u!=null?(h=t-(f!=null?f:0),o=u.line,t<=(f!=null?f:0)?(o=u.line,h=t+1):o=u.line+1):this.lastDocumentOffsetKey!=null&&(o=this.documentOffsets.get(this.lastDocumentOffsetKey).line+1,h=t+this.lastDocumentOffsetKey)}let c=new pn;return c.index=e,c.offset=t,c.line=o+this.shiftLine,c.char=h,c}},it=yt;it.K_CHAR="char",it.K_LINE="line",it.NewLine=`
`,it.AtChar="@",it.Punctuation_Colon=":",it.Punctuation_QuestionMark="?",it.LeftParen="(",it.RightParen=")",it.LeftBrace="{",it.RightBrace="}",it.String_Terminator_DoubleQuote='"',it.String_Terminator_SingleQuote="'",it.Punctuation_LessThan="<",it.Punctuation_GreaterThan=">",it.Punctuation_Equals="=",it.Punctuation_Exclamation="!",it.LeftBracket="[",it.RightBracket="]",it.Punctuation_Comma=",",it.Punctuation_Minus="-",it.Punctuation_Asterisk="*",it.Punctuation_ForwardSlash="/",it.Punctuation_Underscore="_",it.String_EscapeCharacter="\\"});var qe,$a=Ot(()=>{"use strict";Re();qe=class{static findNodeAfterPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let o=e[s];if(!qe.isLiteralType(o)&&o.startPosition!=null&&o.startPosition.index>t.index)return o}return null}static findNodeBeforePosition(t,e){if(t==null)return null;let s=null;for(let o=0;o<e.length;o++){let h=e[o];if(!qe.isLiteralType(h)&&h.startPosition!=null){if(h.startPosition.index>t.index)break;s=h}}return s}static findNodeAtPosition(t,e){if(t==null)return null;for(let s=0;s<e.length;s++){let o=e[s];if(!qe.isLiteralType(o)&&o.startPosition!=null&&o.endPosition!=null&&t.index>=o.startPosition.index&&t.index<=o.endPosition.index)return o}return null}static isLiteralType(t){return t instanceof re}static findNodesBeforePosition(t,e){let s=[];if(t==null)return s;for(let o=0;o<e.length;o++){let h=e[o];if(!qe.isLiteralType(h)&&h.startPosition!=null&&h.endPosition!=null){if(h.startPosition.index>t.index)break;s.push(h)}}return s}static findNodesAfterPosition(t,e){let s=[];if(t==null)return s;for(let o=0;o<e.length;o++){let h=e[o];qe.isLiteralType(h)||h.startPosition!=null&&h.startPosition.index>t.index&&s.push(h)}return s}}});var So,Xc=Ot(()=>{"use strict";$a();So=class{constructor(t){this.doc=t}getNodeAt(t,e){return qe.findNodeAtPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeBefore(t,e){return qe.findNodeBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodeAfter(t,e){return qe.findNodeAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesBefore(t,e){return qe.findNodesBeforePosition(this.position(t,e),this.doc.getParser().getNodes())}getNodesAfter(t,e){return qe.findNodesAfterPosition(this.position(t,e),this.doc.getParser().getNodes())}position(t,e){return this.doc.getParser().positionFromCursor(t,e)}charLeftAt(t,e){return this.doc.getParser().charLeftAtCursor(t,e)}charAt(t,e){return this.doc.getParser().charAtCursor(t,e)}charRightAt(t,e){return this.doc.getParser().charRightAtCursor(t,e)}wordLeftAt(t,e,s=4){return this.doc.getParser().wordLeftAtCursor(t,e,s)}wordRightAt(t,e,s=4){return this.doc.getParser().wordRightAtCursor(t,e,s)}wordAt(t,e,s=4){return this.doc.getParser().wordAtCursor(t,e,s)}punctuationLeftAt(t,e,s=4){return this.doc.getParser().punctuationLeftAtCursor(t,e,s)}punctuationRightAt(t,e,s=4){return this.doc.getParser().punctuationRightAtCursor(t,e,s)}}});var Oo,Zc=Ot(()=>{"use strict";Oo=class{constructor(t){this.doc=t}hasStructureErrors(){return this.doc.getParser().getStructureErrors().length>0}getFirstStructureError(){return this.doc.getParser().getStructureErrors()[0]}hasAny(){return this.all().length>0}all(){let t=[],e=[];return this.doc.getAllNodes().forEach(s=>{s.getErrors().forEach(o=>{t.includes(o.hash())==!1&&(t.push(o.hash()),e.push(o))})}),this.doc.getParser().getErrors().forEach(s=>{t.includes(s.hash())==!1&&(t.push(s.hash()),e.push(s))}),e}}});var Lo,tf=Ot(()=>{"use strict";Re();$a();Lo=class{constructor(t){this.doc=t}firstDirectiveOfType(t){let e=this.doc.getAllNodes();for(let s=0;s<e.length;s++){let o=e[s];if(o instanceof _t&&o.directiveName==t)return o}return null}getNodeAt(t){return qe.findNodeAtPosition(t,this.doc.getParser().getNodes())}getNodesBefore(t){return qe.findNodesBeforePosition(t,this.doc.getParser().getNodes())}getNodeBefore(t){return qe.findNodeBeforePosition(t,this.doc.getParser().getNodes())}getNodeAfter(t){return qe.findNodeAfterPosition(t,this.doc.getParser().getNodes())}getNodesAfter(t){return qe.findNodesAfterPosition(t,this.doc.getParser().getNodes())}filter(t){return this.doc.getParser().getNodes().filter(t)}getComments(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof Ln&&t.push(e)}),t}getAllLiteralNodes(){let t=[];return this.doc.getAllNodes().forEach(e=>{e instanceof re&&t.push(e)}),t}}});var Ks,Ja=Ot(()=>{"use strict";Re();ai();Ki();An();In();Ks=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[];this.createdArrays=[];this.keyValueTokens=0;this.elements=0}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getNumberOfElements(){return this.elements}getNumberOfKeyValuePairs(){return this.keyValueTokens}getIsAssoc(){return this.elements==this.keyValueTokens}checkCurrentContent(){if(this.currentContent.length>0){let t=this.currentContent.join(""),e=new Pe;if(t.trim().length==0){this.currentContent=[];return}e.sourceContent=t,this.tokens.push(e),this.currentContent=[]}}parse(t){for(this.content=X.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1)if(this.checkCurrentOffsets(),!X.ctypeSpace(this.cur)){if(Ve(this.cur)){let s=this.cur,o=Fi(this);this.pushChar(s),this.currentContent=this.currentContent.concat(o.value.split("")),this.pushChar(s),this.currentIndex=o.endedOn;continue}if(this.cur==it.LeftBracket){this.checkCurrentContent(),this.tokens.push(new ts);continue}else if(this.cur==it.RightBracket)this.checkCurrentContent(),this.tokens.push(new _r);else if(this.cur==it.Punctuation_Comma)this.checkCurrentContent(),this.tokens.push(new qs),this.currentContent=[];else if(this.cur==it.Punctuation_Equals&&this.next==it.Punctuation_GreaterThan){this.checkCurrentContent(),this.currentIndex+=1,this.tokens.push(new mr);continue}else this.currentContent.push(this.cur)}let e=this.parseArrays(this.tokens);return this.fillArrayDetails(),e==null||e.elements.filter(function(s){return!(s.value instanceof qs)}).forEach(s=>{this.elements+=1,s.key!=null&&s.value!=null&&(this.keyValueTokens+=1)}),e}fillArrayDetails(){this.createdArrays.forEach(t=>{t.elements.forEach((e,s)=>{e.key!=null&&(t.containsKeys=!0,e.key.sourceContent.length>t.maxKeyLength&&(t.maxKeyLength=e.key.sourceContent.length)),e.isLast=s==t.elements.length-1})})}parseArrays(t){for(let e=0;e<t.length;e++)if(t[e]instanceof ts){let o=this.findEndOfArray(t.slice(e));return e+=o.length,o.shift(),o.pop(),this.createArray(o,!0)}return null}createArray(t,e){let s=new Cs;this.createdArrays.push(s);for(let o=0;o<t.length;o++){let h=t[o],c=null;if(o+1<t.length&&(c=t[o+1]),c instanceof qs||c==null){let u=new ys;u.value=h,s.elements.push(u),o+=1;continue}else if(c instanceof mr){let u=t[o+2];if(u instanceof ts){let f=this.findEndOfArray(t.slice(o+2)),k=new ys;o+=f.length+1,f.shift(),f.pop(),k.key=h,k.value=this.createArray(f,!1),s.elements.push(k);continue}else{let f=new ys;f.key=h,f.value=u,s.elements.push(f),o+=3;continue}}else if(h instanceof ts){let u=this.findEndOfArray(t.slice(o)),f=new ys;o+=u.length,u.shift(),u.pop(),f.value=this.createArray(u,!1);continue}}return s}findEndOfArray(t){let e=[],s=0;for(let o=0;o<t.length;o++){let h=t[o];if(e.push(h),h instanceof ts){s+=1;continue}else if(h instanceof _r){if(s-=1,s<=0)break;continue}}return e}}});var Po,ef=Ot(()=>{"use strict";Po=class{constructor(t,e){this.tabSize=0;this.content="";this.activeIndentLevel=0;this.tabSize=t,this.activeIndentLevel=e}appendNoRepeat(t){return this.content.trimEnd().endsWith(t)==!1?this.append(t):this}append(t){return this.content+=t,this}getContents(){return this.content}newLine(){return this.content+=`
`,this}indent(){return this.content+=" ".repeat(this.tabSize*this.activeIndentLevel),this}outdent(){let t=this.activeIndentLevel-1;return t<1&&(t=1),this.content+=" ".repeat(this.tabSize*t),this}}});var Dn,Xa=Ot(()=>{"use strict";Re();ef();Dn=class{static print(t,e,s){let o=new Po(e,s);if(o.append("[").newLine(),t.elements.length>0){let h="";o.indent(),t.elements.forEach(c=>{t.maxKeyLength>0&&c.key!=null&&(h=""),c.key!=null?(o.append(c.key.sourceContent+h).append(" => "),c.value!=null&&(c.value instanceof Cs?c.value.elements.length==0?o.append("[],"):o.append(Dn.print(c.value,e,s+1)):o.append(c.value.sourceContent))):c.value!=null&&(c.value instanceof Cs?o.append(Dn.print(c.value,e,s+1)):o.append(c.value.sourceContent)),o.appendNoRepeat(",").newLine(),c.isLast||o.indent()})}return s>1&&o.outdent(),o.append("]"),o.getContents()}}});var xr,nf=Ot(()=>{"use strict";ai();xr=class{static printComment(t,e,s){if(t.isMultiline()){let o=X.breakByNewLine(t.innerContent.trim()),h=[];o.forEach(f=>{h.push(" ".repeat(e+s)+f.trim())});let c=h.join(`
`),u=`{{--
`;return u+=c,u+=`
`+" ".repeat(s)+"--}}",u}return"{{-- "+t.innerContent.trim()+" --}}"}}});var Do,Xi,Za=Ot(()=>{"use strict";Re();Ki();An();bs();As();In();ai();Do=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return Do.breakOperators.some(e=>t.includes(e))}parse(t){for(this.tokens=[],this.content=X.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),X.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(Ve(this.cur)){let e=this.cur,s=Fi(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur!=null)if(this.cur==="!"&&this.next!=="="){if(this.currentContent.length>0){let s=new re;s.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(s)}let e=new pr;e.sourceContent=this.cur,this.tokens.push(e),this.currentContent=[];continue}else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new re;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="",s=!1;return this.tokens.forEach(o=>{if(o instanceof pr){s=!0,e+=o.sourceContent+" ";return}o instanceof re&&(s?e+=o.content.trimLeft():e+=o.content),s=!1}),e}},Xi=Do;Xi.breakOperators=["!"],Xi.instance=new Do});var rf=V((Ro,sf)=>{(function(i,t){typeof Ro=="object"&&typeof sf<"u"?t(Ro,require("prettier/standalone")):typeof define=="function"&&define.amd?define(["exports","prettier/standalone"],t):t(((i=typeof globalThis<"u"?globalThis:i||self).prettierPlugins=i.prettierPlugins||{},i.prettierPlugins.php={}),i.prettier)})(Ro,function(i,t){"use strict";function e(n){return n&&typeof n=="object"&&"default"in n?n:{default:n}}var s=e(t),o={matchST_ATTRIBUTE:function(){var n=0,r=this.input();if(this.is_WHITESPACE()){do r=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(r){case"]":return n===0?this.popState():n--,"]";case"(":case")":case":":case"=":return this.consume_TOKEN();case"[":return n++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":if(this._input[this.offset]==="/")return this.T_COMMENT();if(this._input[this.offset]==="*")return this.input(),this.T_DOC_COMMENT()}if(this.is_LABEL_START()||r==="\\"){for(;this.offset<this.size;){var a=this.input();if(!this.is_LABEL()&&a!=="\\"){a&&this.unput(1);break}}return this.tok.T_STRING}if(this.is_NUM())return this.consume_NUM();throw new Error('Bad terminal sequence "'.concat(r,'" at line ').concat(this.yylineno," (offset ").concat(this.offset,")"))}};o.matchST_ATTRIBUTE;var h={T_COMMENT:function(){for(;this.offset<this.size;){var n=this.input();if(n===`
`||n==="\r")return this.tok.T_COMMENT;if(n==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(n==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){var n=this.input(),r=this.tok.T_COMMENT;if(n==="*"){if(n=this.input(),this.is_WHITESPACE()&&(r=this.tok.T_DOC_COMMENT),n==="/")return r;this.unput(1)}for(;this.offset<this.size;)if((n=this.input())==="*"&&this._input[this.offset]==="/"){this.input();break}return r}};h.T_COMMENT,h.T_DOC_COMMENT;var c={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){var n=this.input();if(n=="<"){if((n=this.ahead(1))=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}if(this.tryMatchCaseless("?php")&&((n=this._input[this.offset+4])===" "||n==="	"||n===`
`||n==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&n=="%"){if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0&&this.tok.T_INLINE_HTML}};c.nextINITIAL,c.matchINITIAL;var u={consume_NUM:function(){var n=this.yytext[0],r=n===".";if(n==="0")if((n=this.input())==="x"||n==="X"){if((n=this.input())!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(n?2:1)}else if(n==="b"||n==="B"){if((n=this.input())!=="_"&&n==="0"||n==="1")return this.consume_BNUM();this.unput(n?2:1)}else this.is_NUM()||n&&this.unput(1);for(;this.offset<this.size;){var a=n;if((n=this.input())==="_"){if(a==="_"){this.unput(2);break}if(a==="."){this.unput(1);break}if(a==="e"||a==="E"){this.unput(2);break}}else{if(n==="."){if(r){this.unput(1);break}if(a==="_"){this.unput(2);break}r=!0;continue}if(n==="e"||n==="E"){if(a==="_"){this.unput(1);break}var l=2;if((n=this.input())!=="+"&&n!=="-"||(l=3,n=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(n?l:l-1);break}}if(!this.is_NUM()){n&&this.unput(1);break}}return r?this.tok.T_DNUMBER:this.yytext.length<9||this.yytext.length<10||this.yytext.length==10&&this.yytext<"2147483648"?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_HEX()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_NUM()){n&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){for(var n;this.offset<this.size;)if((n=this.input())!=="0"&&n!=="1"&&n!=="_"){n&&this.unput(1);break}return this.tok.T_LNUMBER}};u.consume_NUM,u.consume_HNUM,u.consume_LNUM,u.consume_BNUM;var f={matchST_LOOKING_FOR_PROPERTY:function(){var n=this.input();if(n==="-"){if((n=this.input())===">")return this.tok.T_OBJECT_OPERATOR;n&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),n&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){var n=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),(n=this.input())==="["||n==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else n&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){var n=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(n==="]")return this.popState(),"]";if(n==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||n==="\\"||n==="'"||n==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(n==="["||n==="{"||n==="}"||n==='"'||n==="`"||this.is_TOKEN())return n;throw new Error("Unexpected terminal")}};f.matchST_LOOKING_FOR_PROPERTY,f.matchST_LOOKING_FOR_VARNAME,f.matchST_VAR_OFFSET;var k={matchST_IN_SCRIPTING:function(){var n=this.input();switch(n){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this._input[this.offset]==="["?(this.input(),this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();var r=this._input[this.offset];return r!==`
`&&r!=="\r"||this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),(n=this._input[this.offset])!==`
`&&n!=="\r"||this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(n==="."){if(n=this.input(),this.is_NUM_START())return this.consume_NUM();n&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+n+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){var n=this.input();if(n!==" "&&n!=="	"&&n!==`
`&&n!=="\r"){n&&this.unput(1);break}}return this.tok.T_WHITESPACE}};k.matchST_IN_SCRIPTING,k.T_WHITESPACE;var x=[`
`,"\r"],M=[`
`,"\r",";"],C=M.concat(["	"," ",",","]",")","/","=","!"]),y={T_CONSTANT_ENCAPSED_STRING:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else if(n=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){var n=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,this.is_TABSPACE()););var r=this._input[this.offset-1];if(r==="'"||r==='"'?this.offset++:r=null,this.is_LABEL_START()){for(var a=this.offset-1;this.offset<this.size&&(this.offset++,this.is_LABEL()););var l=this._input.substring(a,this.offset-1);if((!r||r===this._input[this.offset-1])&&(r&&this.offset++,x.includes(this._input[this.offset-1])))return this.heredoc_label.label=l,this.heredoc_label.length=l.length,this.heredoc_label.finished=!1,a=this.offset-n,this.offset=n,this.consume(a),r==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=n,!1},ST_DOUBLE_QUOTES:function(){for(var n;this.offset<this.size;)if((n=this.input())=="\\")this.input();else{if(n=='"')break;if(n=="$"){if((n=this.input())=="{"||this.is_LABEL_START()){this.unput(2);break}n&&this.unput(1)}else if(n=="{"){if((n=this.input())=="$"){this.unput(2);break}n&&this.unput(1)}}if(n=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;var r=1;return this.yytext[0]!=="b"&&this.yytext[0]!=="B"||(r=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-r),this.unput(this.yytext.length-r),this.begin("ST_DOUBLE_QUOTES"),this.yytext},isDOC_MATCH:function(n,r){var a=this._input[n-2];if(!x.includes(a))return!1;var l=!1,d=!1,T=0,b=this._input[n-1];if(this.version>=703){for(;b==="	"||b===" ";)b===" "?l=!0:b==="	"&&(d=!0),b=this._input[n+T],T++;if(n+=T,x.includes(this._input[n-1]))return!1}if(this._input.substring(n-1,n-1+this.heredoc_label.length)===this.heredoc_label.label){var _=this._input[n-1+this.heredoc_label.length];if((this.version>=703?C:M).includes(_)){if(r){if(this.consume(T),l&&d)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=T,this.heredoc_label.indentation_uses_spaces=l,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;for(var n=this.offset+1;n<this._input.length;){if(this.isDOC_MATCH(n,!1))return;if(!x.includes(this._input[n-1]))for(;!x.includes(this._input[n++])&&n<this._input.length;);n++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;for(var n=this._input[this.offset-1];this.offset<this.size;)if(x.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){var n=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(n==="\\"&&(n=this.input(),x.includes(n)||(n=this.input())),x.includes(n)){if(n=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else n=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();var n=this.input();if(n=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(n==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else n&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==="`")return this.popState(),"`";for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}continue}if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){var n=this.input();if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(n==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(n==='"')return this.popState(),'"';for(;this.offset<this.size;){if(n==="\\")this.input();else{if(n==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}if(n==="$"){if((n=this.input())==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){var r=this.offset,a=this.consume_VARIABLE();return this.yytext.length>this.offset-r+2?(this.appendToken(a,this.offset-r+2),this.unput(this.offset-r+2),this.tok.T_ENCAPSED_AND_WHITESPACE):a}n&&this.unput(1)}else if(n==="{"){if((n=this.input())==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);n&&this.unput(1)}}n=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}};y.T_CONSTANT_ENCAPSED_STRING,y.is_HEREDOC,y.ST_DOUBLE_QUOTES,y.isDOC_MATCH,y.prematch_ENDOFDOC,y.matchST_NOWDOC,y.matchST_HEREDOC,y.consume_VARIABLE,y.matchST_BACKQUOTE,y.matchST_DOUBLE_QUOTES;var I={T_STRING:function(){var n=this.yytext.toLowerCase(),r=this.keywords[n];if(typeof r!="number"){if(n==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),r=this.tok.T_YIELD_FROM):r=this.tok.T_YIELD;else if(r=this.tok.T_STRING,n==="b"||n==="B"){var a=this.input(1);if(a==='"')return this.ST_DOUBLE_QUOTES();if(a==="'")return this.T_CONSTANT_ENCAPSED_STRING();a&&this.unput(1)}}return r},consume_TOKEN:function(){var n=this._input[this.offset-1],r=this.tokenTerminals[n];return r?r.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){var n=this._input[this.offset];return n===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):n==="-"?(this.input(),this.tok.T_DEC):n==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){var n=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){var r=this.yytext.length;this.consume_LABEL();var a=this.yytext.substring(r-1).toLowerCase(),l=this.castKeywords[a];if(typeof l=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return l}return this.unput(this.offset-n),"("},"=":function(){var n=this._input[this.offset];return n===">"?(this.input(),this.tok.T_DOUBLE_ARROW):n==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){var n=this._input[this.offset];return n==="+"?(this.input(),this.tok.T_INC):n==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){var n=this._input[this.offset];return n==="<"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SL_EQUAL):n==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL):n==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):n===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):n===">"?(n=this._input[this.offset+1])==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR):">"},"*":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_MUL_EQUAL):n==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_CONCAT_EQUAL):n==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_AND_EQUAL):n==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){var n=this._input[this.offset];return n==="="?(this.input(),this.tok.T_OR_EQUAL):n==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}};I.T_STRING,I.consume_TOKEN,I.tokenTerminals;var F={is_NUM:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n===95},is_NUM_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58},is_LABEL:function(){var n=this._input.charCodeAt(this.offset-1);return n>96&&n<123||n>64&&n<91||n===95||n>47&&n<58||n>126},is_LABEL_START:function(){var n=this._input.charCodeAt(this.offset-1);return n>64&&n<91||n>96&&n<123||n===95||n>126},consume_LABEL:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_LABEL()){n&&this.unput(1);break}}return this},is_TOKEN:function(){var n=this._input[this.offset-1];return";:,.\\[]()|^&+-/*=%!~$<>?@".indexOf(n)!==-1},is_WHITESPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"||n===`
`||n==="\r"},is_TABSPACE:function(){var n=this._input[this.offset-1];return n===" "||n==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){var n=this.input();if(!this.is_TABSPACE()){n&&this.unput(1);break}}return this},is_HEX:function(){var n=this._input.charCodeAt(this.offset-1);return n>47&&n<58||n>64&&n<71||n>96&&n<103||n===95}};F.is_NUM,F.is_NUM_START,F.is_LABEL,F.is_LABEL_START,F.consume_LABEL,F.is_TOKEN,F.is_WHITESPACE,F.is_TABSPACE,F.consume_TABSPACE,F.is_HEX;var $=function(n){this.engine=n,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=800,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};$.prototype.setInput=function(n){return this._input=n,this.size=n.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this},$.prototype.input=function(){var n=this._input[this.offset];return n?(this.yytext+=n,this.offset++,n==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),n===`
`||n==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,n):""},$.prototype.unput=function(n){if(n===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,n++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-n);else if(n>0)if(this.offset-=n,n<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-n),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(var r=0;r<this.yytext.length;r++){var a=this.yytext[r];a==="\r"?(a=this.yytext[++r],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,a!==`
`&&(a==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):a===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this},$.prototype.tryMatch=function(n){return n===this.ahead(n.length)},$.prototype.tryMatchCaseless=function(n){return n===this.ahead(n.length).toLowerCase()},$.prototype.ahead=function(n){var r=this._input.substring(this.offset,this.offset+n);return r[r.length-1]==="\r"&&this._input[this.offset+n+1]===`
`&&(r+=`
`),r},$.prototype.consume=function(n){for(var r=0;r<n;r++){var a=this._input[this.offset];if(!a)break;this.yytext+=a,this.offset++,a==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,r++),a===`
`||a==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this},$.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}},$.prototype.setState=function(n){return this.yytext=n.yytext,this.offset=n.offset,this.yylineno=n.yylineno,this.yyprevcol=n.yyprevcol,this.yylloc=n.yylloc,n.heredoc_label&&(this.heredoc_label=n.heredoc_label),this},$.prototype.appendToken=function(n,r){return this.tokens.push([n,r]),this},$.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;var n=this.next()||this.lex();if(!this.all_tokens){for(;n===this.tok.T_WHITESPACE||!this.comment_tokens&&(n===this.tok.T_COMMENT||n===this.tok.T_DOC_COMMENT)||n===this.tok.T_OPEN_TAG;)n=this.next()||this.lex();if(n==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(n===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),n},$.prototype.begin=function(n){if(this.conditionStack.push(n),this.curCondition=n,this.stateCb=this["match"+n],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+n+'"');return this},$.prototype.popState=function(){var n=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return n},$.prototype.next=function(){var n;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(typeof(n=this.tokens.shift())[1]=="object"?this.setState(n[1]):this.consume(n[1]),n=n[0]):n=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){var r=n;r=typeof r=="number"?this.engine.tokens.values[r]:'"'+r+'"';var a=new Error(r+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(a.stack)}return n},[o,h,c,u,f,k,y,I,F].forEach(function(n){for(var r in n)$.prototype[r]=n[r]});var ht=$,ct=function(n,r,a){this.line=n,this.column=r,this.offset=a},J={read_array:function(){var n=null,r=!1,a=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),n=")"):(r=!0,n="]");var l=[];return this.next().token!==n&&(l=this.read_array_pair_list(r)),this.expect(n),this.next(),a(r,l)},read_array_pair_list:function(n){var r=this;return this.read_list(function(){return r.read_array_pair(n)},",",!0)},read_array_pair:function(n){if(!(!n&&this.token===")"||n&&this.token==="]")){if(this.token===",")return this.node("noop")();var r=this.node("entry"),a=null,l=null,d=!1,T=!1;if(this.token==="&")this.next(),d=!0,l=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),T=!0,l=this.read_expr();else{var b=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),a=b,this.token==="&"?(this.next(),d=!0,l=this.read_variable(!0,!1)):l=this.read_expr()):l=b}return r(a,l,d,T)}}};function z(n,r,a){return r in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,n}function at(n,r){var a=Object.keys(n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);r&&(l=l.filter(function(d){return Object.getOwnPropertyDescriptor(n,d).enumerable})),a.push.apply(a,l)}return a}function B(n){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?at(Object(a),!0).forEach(function(l){z(n,l,a[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(a)):at(Object(a)).forEach(function(l){Object.defineProperty(n,l,Object.getOwnPropertyDescriptor(a,l))})}return n}function Y(n,r){return function(a){if(Array.isArray(a))return a}(n)||function(a,l){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(a)))){var d=[],T=!0,b=!1,_=void 0;try{for(var S,O=a[Symbol.iterator]();!(T=(S=O.next()).done)&&(d.push(S.value),!l||d.length!==l);T=!0);}catch(E){b=!0,_=E}finally{try{T||O.return==null||O.return()}finally{if(b)throw _}}return d}}(n,r)||rt(n,r)||function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function dt(n){return function(r){if(Array.isArray(r))return Ft(r)}(n)||function(r){if(typeof Symbol<"u"&&Symbol.iterator in Object(r))return Array.from(r)}(n)||rt(n)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function rt(n,r){if(n){if(typeof n=="string")return Ft(n,r);var a=Object.prototype.toString.call(n).slice(8,-1);return a==="Object"&&n.constructor&&(a=n.constructor.name),a==="Map"||a==="Set"?Array.from(a):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Ft(n,r):void 0}}function Ft(n,r){(r==null||r>n.length)&&(r=n.length);for(var a=0,l=new Array(r);a<r;a++)l[a]=n[a];return l}function Bt(n){if(typeof Symbol>"u"||n[Symbol.iterator]==null){if(Array.isArray(n)||(n=rt(n))){var r=0,a=function(){};return{s:a,n:function(){return r>=n.length?{done:!0}:{done:!1,value:n[r++]}},e:function(_){throw _},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l,d,T=!0,b=!1;return{s:function(){l=n[Symbol.iterator]()},n:function(){var _=l.next();return T=_.done,_},e:function(_){b=!0,d=_},f:function(){try{T||l.return==null||l.return()}finally{if(b)throw d}}}}J.read_array,J.read_array_pair_list,J.read_array_pair;var Dt={read_class_declaration_statement:function(n){var r=this.node("class"),a=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);var l=this.node("identifier"),d=this.text();this.next(),l=l(d);var T=this.read_extends_from(),b=this.read_implements_list();this.expect("{");var _=r(l,T,b,this.next().read_class_body(),a);return n&&(_.attrGroups=n),_},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(){for(var n=[],r=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT)if(this.token!==this.tok.T_USE){this.token===this.tok.T_ATTRIBUTE&&(r=this.read_attr_list());var a=this.position(),l=this.read_member_flags(!1);if(this.token!==this.tok.T_CONST)if(this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),l[0]=null,l[1]=0),this.token===this.tok.T_FUNCTION)n.push(this.read_function(!1,l,r,a)),r=[];else if(this.token===this.tok.T_VARIABLE||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE)){var d=this.read_variable_list(l,r);r=[],this.expect(";"),this.next(),n=n.concat(d)}else this.error([this.tok.T_CONST,this.tok.T_VARIABLE,this.tok.T_FUNCTION]),this.next();else{var T=this.read_constant_list(l,r);this.expect(";")&&this.next(),n=n.concat(T)}}else n=n.concat(this.read_trait_use_statement());else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}"),this.next(),n},read_variable_list:function(n,r){var a=this.node("propertystatement"),l=this.read_list(function(){var d=this.node("property"),T=Y(this.read_optional_type(),2),b=T[0],_=T[1];this.expect(this.tok.T_VARIABLE);var S=this.node("identifier"),O=this.text().substring(1);return this.next(),S=S(O),this.token===";"||this.token===","?d(S,null,b,_,r||[]):this.token==="="?d(S,this.next().read_expr(),b,_,r||[]):(this.expect([",",";","="]),d(S,null,b,_,r||[]))},",");return a(null,l,n)},read_constant_list:function(n,r){this.expect(this.tok.T_CONST)&&this.next();var a=this.node("classconstant"),l=this.read_list(function(){var d=this.node("constant"),T=null,b=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){T=this.node("identifier");var _=this.text();this.next(),T=T(_)}else this.expect("IDENTIFIER");return this.expect("=")&&(b=this.next().read_expr()),d(T,b)},",");return a(null,l,n,r||[])},read_member_flags:function(n){var r=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){var a=0,l=0;do{switch(this.token){case this.tok.T_PUBLIC:a=0,l=0;break;case this.tok.T_PROTECTED:a=0,l=1;break;case this.tok.T_PRIVATE:a=0,l=2;break;case this.tok.T_STATIC:a=1,l=1;break;case this.tok.T_ABSTRACT:a=2,l=1;break;case this.tok.T_FINAL:a=2,l=2}n&&(a==0&&l==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),l=-1):a==2&&l==1&&(this.error(),l=-1)),r[a]!==-1?this.error():l!==-1&&(r[a]=l)}while(this.next().is("T_MEMBER_FLAGS"))}return r[1]==-1&&(r[1]=0),r[2]==-1&&(r[2]=0),r},read_optional_type:function(){var n=!1;this.token==="?"&&(n=!0,this.next());var r=this.read_types();if(n&&!r&&this.raiseError("Expecting a type definition combined with nullable operator"),!n&&!r)return[!1,null];if(this.token==="|"){r=[r];do{this.next();var a=this.read_type();if(!a){this.raiseError("Expecting a type definition");break}r.push(a)}while(this.token==="|")}return[n,r]},read_interface_declaration_statement:function(n){var r=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);var a=this.node("identifier"),l=this.text();this.next(),a=a(l);var d=this.read_interface_extends_list();return this.expect("{"),r(a,d,this.next().read_interface_body(),n||[])},read_interface_body:function(){for(var n=[],r=[];this.token!==this.EOF&&this.token!=="}";)if(this.token!==this.tok.T_COMMENT)if(this.token!==this.tok.T_DOC_COMMENT){var a=this.position();r=this.read_attr_list();var l=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){var d=this.read_constant_list(l,r);this.expect(";")&&this.next(),n=n.concat(d),r=[]}else if(this.token===this.tok.T_FUNCTION){var T=this.read_function_declaration(2,l,r,a);T.parseFlags(l),n.push(T),this.expect(";")&&this.next(),r=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}else n.push(this.read_doc_comment());else n.push(this.read_comment());return this.expect("}")&&this.next(),n},read_trait_declaration_statement:function(){var n=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);var r=this.node("identifier"),a=this.text();return this.next(),r=r(a),this.expect("{"),n(r,this.next().read_class_body())},read_trait_use_statement:function(){var n=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();for(var r=[this.read_namespace_name()],a=null;this.token===",";)r.push(this.next().read_namespace_name());if(this.token==="{"){for(a=[];this.next().token!==this.EOF&&this.token!=="}";)a.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return n(r,a)},read_trait_use_alias:function(){var n,r=this.node(),a=null;if(this.is("IDENTIFIER")){n=this.node("identifier");var l=this.text();this.next(),n=n(l)}else if(n=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){a=n,n=this.node("identifier");var d=this.text();this.next(),n=n(d)}else this.expect(this.tok.T_STRING);else n=n.name;if(this.token===this.tok.T_INSTEADOF)return r("traitprecedence",a,n,this.next().read_name_list());if(this.token===this.tok.T_AS){var T=null,b=null;if(this.next().is("T_MEMBER_FLAGS")&&(T=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){b=this.node("identifier");var _=this.text();this.next(),b=b(_)}else T===!1&&this.expect(this.tok.T_STRING);return r("traitalias",a,n,b,T)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),r("traitalias",a,n,null,null)}};Dt.read_class_declaration_statement,Dt.read_class_modifiers,Dt.read_class_modifier,Dt.read_class_body,Dt.read_variable_list,Dt.read_constant_list,Dt.read_member_flags,Dt.read_optional_type,Dt.read_interface_declaration_statement,Dt.read_interface_body,Dt.read_trait_declaration_statement,Dt.read_trait_use_statement,Dt.read_trait_use_alias;var Mt={read_comment:function(){var n=this.text(),r=this.ast.prepare(n.substring(0,2)==="/*"?"commentblock":"commentline",null,this),a=this.lexer.yylloc.first_offset,l=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(r=r(n)).offset=a,this.prev=l,r},read_doc_comment:function(){var n=this.ast.prepare("commentblock",null,this),r=this.lexer.yylloc.first_offset,a=this.text(),l=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),(n=n(a)).offset=r,this.prev=l,n}};Mt.read_comment,Mt.read_doc_comment;var kt={read_expr:function(n){var r=this.node();if(this.token==="@")return n||(n=this.next().read_expr()),r("silent",n);if(n||(n=this.read_expr_item()),this.token==="|")return r("bin","|",n,this.next().read_expr());if(this.token==="&")return r("bin","&",n,this.next().read_expr());if(this.token==="^")return r("bin","^",n,this.next().read_expr());if(this.token===".")return r("bin",".",n,this.next().read_expr());if(this.token==="+")return r("bin","+",n,this.next().read_expr());if(this.token==="-")return r("bin","-",n,this.next().read_expr());if(this.token==="*")return r("bin","*",n,this.next().read_expr());if(this.token==="/")return r("bin","/",n,this.next().read_expr());if(this.token==="%")return r("bin","%",n,this.next().read_expr());if(this.token===this.tok.T_POW)return r("bin","**",n,this.next().read_expr());if(this.token===this.tok.T_SL)return r("bin","<<",n,this.next().read_expr());if(this.token===this.tok.T_SR)return r("bin",">>",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return r("bin","||",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return r("bin","or",n,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return r("bin","&&",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return r("bin","and",n,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return r("bin","xor",n,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return r("bin","===",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return r("bin","!==",n,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return r("bin","==",n,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return r("bin","!=",n,this.next().read_expr());if(this.token==="<")return r("bin","<",n,this.next().read_expr());if(this.token===">")return r("bin",">",n,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return r("bin","<=",n,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return r("bin",">=",n,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return r("bin","<=>",n,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(n=r("bin","instanceof",n,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(n=this.read_expr(n))),this.token===this.tok.T_COALESCE)return r("bin","??",n,this.next().read_expr());if(this.token==="?"){var a=null;return this.next().token!==":"&&(a=this.read_expr()),this.expect(":")&&this.next(),r("retif",n,a,this.read_expr())}return r.destroy(n),n},read_expr_cast:function(n){return this.node("cast")(n,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){var n=null;switch(this.token){case this.tok.T_ISSET:n=this.node("isset"),this.next().expect("(")&&this.next();var r=this.read_isset_variables();this.expect(")")&&this.next(),n=n(r);break;case this.tok.T_EMPTY:n=this.node("empty"),this.next().expect("(")&&this.next();var a=this.read_expr();this.expect(")")&&this.next(),n=n(a);break;case this.tok.T_INCLUDE:n=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:n=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:n=this.node("eval"),this.next().expect("(")&&this.next();var l=this.read_expr();this.expect(")")&&this.next(),n=n(l);break;case this.tok.T_REQUIRE:n=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:n=this.node("include")(!0,!0,this.next().read_expr())}return n},read_optional_expr:function(n){return this.token!==n?this.read_expr():null},read_exit_expr:function(){var n=null;return this.token==="("&&(this.next(),n=this.read_optional_expr(")"),this.expect(")")&&this.next()),n},read_expr_item:function(){var n,r,a=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return(r=this.next().read_expr()).parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(r);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){var l=null,d=this.innerList;n=this.node("list"),d||(l=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);var T=this.read_array_pair_list(!1);this.expect(")")&&this.next();for(var b=!1,_=0;_<T.length;_++)if(T[_]!==null&&T[_].kind!=="noop"){b=!0;break}return b||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),d?n(T,!1):(this.innerList=!1,this.expect("=")?l(n(T,!1),this.next().read_expr(),"="):n(T,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(a=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:return this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression"),this.node("throw")(this.next().read_expr());case this.tok.T_EXIT:var S=this.lexer.yytext.toLowerCase()==="die";return n=this.node("exit"),this.next(),n(this.read_exit_expr(),S);case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:var O=null,E=null;return n=this.node("yield"),this.next().is("EXPR")&&(O=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(E=O,O=this.next().read_expr())),n(O,E);case this.tok.T_YIELD_FROM:return(n=this.node("yieldfrom"))(r=this.next().read_expr());case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,a);case this.tok.T_STATIC:var Vt=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],a);this.lexer.tokens.push(Vt),this.next()}if(this.is("VARIABLE")){n=this.node();var Yt=(r=this.read_variable(!1,!1)).kind==="identifier"||r.kind==="staticlookup"&&r.offset.kind==="identifier";switch(this.token){case"=":return Yt&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(n,r):n("assign",r,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return Yt&&this.error("VARIABLE"),n("assign",r,this.next().read_expr(),"??=");case this.tok.T_INC:return Yt&&this.error("VARIABLE"),this.next(),n("post","+",r);case this.tok.T_DEC:return Yt&&this.error("VARIABLE"),this.next(),n("post","-",r);default:n.destroy(r)}}else{if(this.is("SCALAR")){if(n=this.node(),(r=this.read_scalar()).kind==="array"&&r.shortForm&&this.token==="="){var ae=this.convertToList(r);return r.loc&&(ae.loc=r.loc),n("assign",ae,this.next().read_expr(),"=")}return n.destroy(r),this.handleDereferencable(r)}this.error("EXPR"),this.next()}return r},convertToList:function(n){var r=this,a=n.items.map(function(d){return d.value&&d.value.kind==="array"&&d.value.shortForm&&(d.value=r.convertToList(d.value)),d}),l=this.node("list")(a,!0);return n.loc&&(l.loc=n.loc),n.leadingComments&&(l.leadingComments=n.leadingComments),n.trailingComments&&(l.trailingComments=n.trailingComments),l},read_assignref:function(n,r){var a;return this.next(),this.token===this.tok.T_NEW?(this.version>=700&&this.error(),a=this.read_new_expr()):a=this.read_variable(!1,!1),n("assignref",r,a)},read_inline_function:function(n,r){if(this.token===this.tok.T_FUNCTION){var a=this.read_function(!0,n,r);return a.attrGroups=r,a}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");var l=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();var d=this.is_reference();this.expect("(")&&this.next();var T=this.read_parameter_list();this.expect(")")&&this.next();var b=!1,_=null;this.token===":"&&(this.next().token==="?"&&(b=!0,this.next()),_=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();var S=l(T,d,this.read_expr(),_,b,!!n);return S.attrGroups=r,S},read_match_expression:function(){var n=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");var r,a;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),a=this.read_match_arms(),this.expect("}")&&this.next(),n(r,a)},read_match_arms:function(){var n=this;return this.read_list(function(){return n.read_match_arm()},",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){var n=[];if(this.token===this.tok.T_DEFAULT)n=null,this.next();else for(n.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),n;n.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),n},read_attribute(){var n=this.text(),r=[];return this.next(),this.token==="("&&(r=this.read_argument_list()),this.node("attribute")(n,r)},read_attr_list(){var n=[];if(this.token===this.tok.T_ATTRIBUTE)do{var r=this.node("attrgroup")([]);for(this.next(),r.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&r.attrs.push(this.read_attribute());n.push(r),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return n},read_new_expr:function(){var n=this.node("new");this.expect(this.tok.T_NEW)&&this.next();var r=[],a=this.read_attr_list();if(this.token===this.tok.T_CLASS){var l=this.node("class");this.next().token==="("&&(r=this.read_argument_list());var d=this.read_extends_from(),T=this.read_implements_list(),b=null;this.expect("{")&&(b=this.next().read_class_body());var _=l(null,d,T,b,[0,0,0]);return _.attrGroups=a,n(_,r)}var S=this.read_new_class_name();return this.token==="("&&(r=this.read_argument_list()),n(S,r)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){var n=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(n=this.read_static_getter(n)),n}if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])},handleDereferencable:function(n){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)n=this.recursive_variable_chain_scan(n,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")n=this.read_dereferencable(n);else{if(this.token!=="(")return n;n=this.node("call")(n,this.read_argument_list())}return n}};kt.read_expr,kt.read_expr_cast,kt.read_isset_variable,kt.read_isset_variables,kt.read_internal_functions_in_yacc,kt.read_optional_expr,kt.read_exit_expr,kt.read_expr_item,kt.convertToList,kt.read_assignref,kt.read_inline_function,kt.read_match_expression,kt.read_match_arms,kt.read_match_arm,kt.read_match_arm_conds,kt.read_attribute,kt.read_attr_list,kt.read_new_expr,kt.read_new_class_name,kt.handleDereferencable;var Rt={is_reference:function(){return this.token=="&"&&(this.next(),!0)},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS&&(this.next(),!0)},read_function:function(n,r,a,l){var d=this.read_function_declaration(n?1:r?2:0,r&&r[1]===1,a||[],l);return r&&r[2]==1?(d.parseFlags(r),this.expect(";")&&this.next()):(this.expect("{")&&(d.body=this.read_code_block(!1),d.loc&&d.body.loc&&(d.loc.end=d.body.loc.end)),!n&&r&&d.parseFlags(r)),d},read_function_declaration:function(n,r,a,l){var d=this,T="function";n===1?T="closure":n===2&&(T="method");var b=this.node(T);this.expect(this.tok.T_FUNCTION)&&this.next();var _=this.is_reference(),S=!1,O=[],E=null,Vt=!1;if(n!==1){var Yt=this.node("identifier");n===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(S=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(S=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(S=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(S=this.text()),this.next()),S=Yt(S)}this.expect("(")&&this.next();var ae=this.read_parameter_list();this.expect(")")&&this.next(),n===1&&(O=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(Vt=!0,this.next()),E=this.read_types());var ge=function(wt){return wt.attrGroups=a||[],l&&wt.loc&&(wt.loc.start=l,wt.loc.source&&(wt.loc.source=d.lexer._input.substr(wt.loc.start.offset,wt.loc.end.offset-wt.loc.start.offset))),wt};return ge(n===1?b(ae,_,O,E,Vt,r):b(S,ae,_,E,Vt))},read_lexical_vars:function(){var n=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),n=this.read_lexical_var_list(),this.expect(")")&&this.next()),n},read_list_with_dangling_comma:function(n){for(var r=[];this.token!=this.EOF;){if(r.push(n()),this.token!=","){if(this.token==")")break;this.error([",",")"]);break}if(this.next(),this.version>=800&&this.token===")")return r}return r},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));var n=this.node("variable");this.expect(this.tok.T_VARIABLE);var r=this.text().substring(1);return this.next(),n(r,!1)},read_parameter_list:function(){return this.token!=")"?this.read_list_with_dangling_comma(this.read_parameter.bind(this)):[]},read_parameter:function(){var n,r=this.node("parameter"),a=null,l=null,d=!1,T=[];this.token===this.tok.T_ATTRIBUTE&&(T=this.read_attr_list());var b=this.read_promoted();this.token==="?"&&(this.next(),d=!0),n=this.read_types(),d&&!n&&this.raiseError("Expecting a type definition combined with nullable operator");var _=this.is_reference(),S=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){a=this.node("identifier");var O=this.text().substring(1);this.next(),a=a(O)}this.token=="="&&(l=this.next().read_expr());var E=r(a,n,l,_,S,d,b);return T&&(E.attrGroups=T),E},read_types(){var n=[],r=this.node("uniontype"),a=this.read_type();if(!a)return null;for(n.push(a);this.token==="|";)this.next(),a=this.read_type(),n.push(a);return n.length===1?n[0]:r(n)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){var n=[];return this.expect("(")&&this.next(),this.token!==")"&&(n=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),n},read_non_empty_argument_list:function(){var n=!1;return this.read_function_list(function(){var r=this.read_argument();return r&&(n&&this.raiseError("Unexpected argument after a variadic argument"),r.kind==="variadic"&&(n=!0)),r}.bind(this),",")},read_argument:function(){if(this.token===this.tok.T_ELLIPSIS)return this.node("variadic")(this.next().read_expr());if(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token)){var n=this.lexer.getState(),r=this.lexer.lex();if(this.lexer.setState(n),r===":")return this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())}return this.read_expr()},read_type:function(){var n=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){var r=this.text();return this.next(),n("typereference",r.toLowerCase(),r)}if(this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){var a=this.text(),l=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(a.toLowerCase())>-1?n("typereference",a.toLowerCase(),a):(this.lexer.tokens.push(l),this.next(),n.destroy(),this.read_namespace_name())}return this.token===this.tok.T_NAMESPACE||this.token===this.tok.T_NS_SEPARATOR?(n.destroy(),this.read_namespace_name()):(n.destroy(),null)}};Rt.is_reference,Rt.is_variadic,Rt.read_function,Rt.read_function_declaration,Rt.read_lexical_vars,Rt.read_list_with_dangling_comma,Rt.read_lexical_var_list,Rt.read_lexical_var,Rt.read_parameter_list,Rt.read_parameter,Rt.read_types,Rt.read_promoted,Rt.read_argument_list,Rt.read_non_empty_argument_list,Rt.read_argument,Rt.read_type;var ue={read_if:function(){var n=this.node("if"),r=this.next().read_if_expr(),a=null,l=null,d=!1;if(this.token===":"){d=!0,this.next(),a=this.node("block");for(var T=[];this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){l=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){l=this.read_else_short();break}T.push(this.read_inner_statement())}a=a(null,T),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else a=this.read_statement(),this.token===this.tok.T_ELSEIF?l=this.read_if():this.token===this.tok.T_ELSE&&(l=this.next().read_statement());return n(r,a,l,d)},read_if_expr:function(){this.expect("(")&&this.next();var n=this.read_expr();return this.expect(")")&&this.next(),n},read_elseif_short:function(){var n=null,r=this.node("if"),a=this.next().read_if_expr();this.expect(":")&&this.next();for(var l=this.node("block"),d=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){n=this.read_elseif_short();break}if(this.token===this.tok.T_ELSE){n=this.read_else_short();break}d.push(this.read_inner_statement())}return r(a,l(null,d),n,!0)},read_else_short:function(){this.next().expect(":")&&this.next();for(var n=this.node("block"),r=[];this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)r.push(this.read_inner_statement());return n(null,r)}};ue.read_if,ue.read_if_expr,ue.read_elseif_short,ue.read_else_short;var Tt={read_while:function(){var n=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();var r,a=null,l=!1;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(l=!0,a=this.read_short_form(this.tok.T_ENDWHILE)):a=this.read_statement(),n(r,a,l)},read_do:function(){var n=this.node("do");this.expect(this.tok.T_DO)&&this.next();var r,a=null;return r=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),a=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),n(a,r)},read_for:function(){var n=this.node("for");this.expect(this.tok.T_FOR)&&this.next();var r=[],a=[],l=[],d=null,T=!1;return this.expect("(")&&this.next(),this.token!==";"?(r=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(a=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(l=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOR)):d=this.read_statement(),n(r,a,l,d,T)},read_foreach:function(){var n=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();var r,a=null,l=null,d=null,T=!1;return this.expect("(")&&this.next(),r=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),l=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(a=l,l=this.next().read_foreach_variable())),a&&a.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(T=!0,d=this.read_short_form(this.tok.T_ENDFOREACH)):d=this.read_statement(),n(r,a,l,d,T)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){var n=this.token==="[",r=this.node("list");this.next(),!n&&this.expect("(")&&this.next();var a=this.read_array_pair_list(n);return this.expect(n?"]":")")&&this.next(),r(a,n)}return this.read_variable(!1,!1)}};Tt.read_while,Tt.read_do,Tt.read_for,Tt.read_foreach,Tt.read_foreach_variable;var mt={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}};mt.read_start;var ne={read_namespace:function(){var n,r,a=this.node("namespace");return this.expect(this.tok.T_NAMESPACE)&&this.next(),r=this.token=="{"?{name:[""]}:this.read_namespace_name(),this.currentNamespace=r,this.token==";"?(this.currentNamespace=r,n=this.next().read_top_statements(),this.expect(this.EOF),a(r.name,n,!1)):this.token=="{"?(this.currentNamespace=r,n=this.next().read_top_statements(),this.expect("}")&&this.next(),n.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&n.push(this.node("noop")()),a(r.name,n,!0)):this.token==="("?(r.resolution=this.ast.reference.RELATIVE_NAME,r.name=r.name.substring(1),a.destroy(),this.node("call")(r,this.read_argument_list())):(this.error(["{",";"]),this.currentNamespace=r,n=this.read_top_statements(),this.expect(this.EOF),a(r,n,!1))},read_namespace_name:function(n){var r=this.node(),a=!1;this.token===this.tok.T_NAMESPACE&&(this.next().expect(this.tok.T_NS_SEPARATOR)&&this.next(),a=!0);var l=this.read_list(this.tok.T_STRING,this.tok.T_NS_SEPARATOR,!0);if(!a&&l.length===1&&(n||this.token!=="(")){if(l[0].toLowerCase()==="parent")return r("parentreference",l[0]);if(l[0].toLowerCase()==="self")return r("selfreference",l[0])}return r("name",l,a)},read_use_statement:function(){var n=this.node("usegroup"),r=[],a=null;this.expect(this.tok.T_USE)&&this.next();var l=this.read_use_type();return r.push(this.read_use_declaration(!1)),this.token===","?r=r.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(a=r[0].name,r=this.next().read_use_declarations(l===null),this.expect("}")&&this.next()),n=n(a,l,r),this.expect(";")&&this.next(),n},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(n){var r=this.node("useitem"),a=null;n&&(a=this.read_use_type());var l=this.read_namespace_name(),d=this.read_use_alias();return r(l.name,d,a)},read_use_declarations:function(n){for(var r=[this.read_use_declaration(n)];this.token===",";){if(this.next(),n){if(this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;r.push(this.read_use_declaration(n))}return r},read_use_alias:function(){var n=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){var r=this.node("identifier"),a=this.text();this.next(),n=r(a)}return n},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}};ne.read_namespace,ne.read_namespace_name,ne.read_use_statement,ne.read_class_name_reference,ne.read_use_declaration,ne.read_use_declarations,ne.read_use_alias,ne.read_use_type;var At={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)},Gt={resolve_special_chars:function(n,r){return r?n.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,function(a,l,d){return At[l]?At[l]:l[0]==="x"||l[0]==="X"?String.fromCodePoint(parseInt(l.substr(1),16)):l[0]==="u"?String.fromCodePoint(parseInt(d,16)):String.fromCodePoint(parseInt(l,8))}):n.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(n,r,a,l){if(r===0)return n;this.check_heredoc_indentation_level(n,r,a,l);var d=a?" ":"	",T=new RegExp("\\n".concat(d,"{").concat(r,"}"),"g"),b=new RegExp("^".concat(d,"{").concat(r,"}"));return l&&(n=n.replace(b,"")),n.replace(T,`
`)},check_heredoc_indentation_level:function(n,r,a,l){var d=n.length,T=0,b=0,_=!0,S=a?" ":"	",O=!1;if(!l){if((T=n.indexOf(`
`))===-1)return;T++}for(;T<d;)_?n[T]===S?b++:O=!0:_=!1,n[T]!==`
`&&O&&b<r?this.raiseError("Invalid body indentation level (expecting an indentation at least ".concat(r,")")):O=!1,n[T]===`
`&&(_=!0,b=0),T++},read_dereferencable_scalar:function(){var n=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:var r=this.node("string"),a=this.text(),l=0;a[0]!=="b"&&a[0]!=="B"||(l=1);var d=a[l]==='"';this.next(),r=r(d,this.resolve_special_chars(a.substring(l+1,a.length-1),d),l===1,a),n=this.token===this.tok.T_DOUBLE_COLON?this.read_static_getter(r):r;break;case this.tok.T_ARRAY:case"[":n=this.read_array()}return n},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();var n,r;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:var a=this.node("number");return n=this.text(),this.next(),a(n,null);case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){var l=this.lexer.yylloc.first_offset;r=this.node("nowdoc"),n=this.next().text(),this.lexer.heredoc_label.indentation>0&&(n=n.substring(0,n.length-this.lexer.heredoc_label.indentation));var d=n[n.length-1];d===`
`?n=n[n.length-2]==="\r"?n.substring(0,n.length-2):n.substring(0,n.length-1):d==="\r"&&(n=n.substring(0,n.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();var T=this.lexer._input.substring(l,this.lexer.yylloc.first_offset);return r=r(this.remove_heredoc_leading_whitespace_chars(n,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),T,this.lexer.heredoc_label.label)}return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:var b=this.error("SCALAR");return this.next(),b}},read_dereferencable:function(n){var r,a,l=this.node("offsetlookup");return this.token==="["?(a=this.next().read_expr(),this.expect("]")&&this.next(),r=l(n,a)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(r=l(n,a=this.read_encapsed_string_item(!1))),r},read_encapsed_string_item:function(n){var r,a,l,d=this.node("encapsedpart"),T=null,b=!1,_=this.node();if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){var S=this.text();this.next(),_=_("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(S,n),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):S,!1,S)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(T="simple",b=!0,l=null,this.next().token===this.tok.T_STRING_VARNAME){l=this.node("variable");var O=this.text();this.next(),this.token==="["?(l=l(O,!1),a=this.node("offsetlookup"),r=this.next().read_expr(),this.expect("]")&&this.next(),_=a(l,r)):_=l(O,!1)}else _=_("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)T="complex",_.destroy(),_=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(T="simple",_.destroy(),_=this.read_simple_variable(),this.token==="["&&(a=this.node("offsetlookup"),r=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),_=a(_,r)),this.token===this.tok.T_OBJECT_OPERATOR){a=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);var E=this.node("identifier");l=this.text(),this.next(),_=a(_,E(l))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);var Vt=this.text();this.next(),_.destroy(),_=_("string",!1,Vt,!1,Vt)}return this.lexer.heredoc_label.first_encaps_node=!1,d(_,T,b)},read_encapsed_string:function(n){var r=arguments.length>1&&arguments[1]!==void 0&&arguments[1],a=this.lexer.yylloc.first_offset,l=this.node("encapsed");this.next();var d=this.lexer.yylloc.prev_offset-(r?1:0),T=[],b=null;for(b=n==="`"?this.ast.encapsed.TYPE_SHELL:n==='"'?this.ast.encapsed.TYPE_STRING:this.ast.encapsed.TYPE_HEREDOC;this.token!==n&&this.token!==this.EOF;)T.push(this.read_encapsed_string_item(!0));if(T.length>0&&T[T.length-1].kind==="encapsedpart"&&T[T.length-1].expression.kind==="string"){var _=T[T.length-1].expression,S=_.value[_.value.length-1];S===`
`?_.value[_.value.length-2]==="\r"?_.value=_.value.substring(0,_.value.length-2):_.value=_.value.substring(0,_.value.length-1):S==="\r"&&(_.value=_.value.substring(0,_.value.length-1))}this.expect(n)&&this.next();var O=this.lexer._input.substring(b==="heredoc"?a:d-1,this.lexer.yylloc.first_offset);return l=l(T,O,b),n===this.tok.T_END_HEREDOC&&(l.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),l},get_magic_constant:function(){var n=this.node("magic"),r=this.text();return this.next(),n(r.toUpperCase(),r)}};Gt.resolve_special_chars,Gt.remove_heredoc_leading_whitespace_chars,Gt.check_heredoc_indentation_level,Gt.read_dereferencable_scalar,Gt.read_scalar,Gt.read_dereferencable,Gt.read_encapsed_string_item,Gt.read_encapsed_string,Gt.get_magic_constant;var he={read_top_statements:function(){for(var n=[];this.token!==this.EOF&&this.token!=="}";){var r=this.read_top_statement();r&&(Array.isArray(r)?n=n.concat(r):n.push(r))}return n},read_top_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,n);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(n);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(n);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:var r=this.node("constantstatement"),a=this.next().read_const_list();return this.expectEndOfStatement(),r(null,a);case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:var l=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,l(this.lexer._input.substring(this.lexer.offset));default:return this.read_statement()}},read_inner_statements:function(){for(var n=[];this.token!=this.EOF&&this.token!=="}";){var r=this.read_inner_statement();r&&(Array.isArray(r)?n=n.concat(r):n.push(r))}return n},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);var n=this.node("constant"),r=this.node("identifier"),a=this.text();return this.next(),r=r(a),this.expect("=")?n(r,this.next().read_expr()):n(r,null)},",",!1)},read_declare_list:function(){for(var n=[];this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);var r=this.node("declaredirective"),a=this.node("identifier"),l=this.text();this.next(),a=a(l);var d=null;if(this.expect("=")&&(d=this.next().read_expr()),n.push(r(a,d)),this.token!==",")break;this.next()}return n},read_inner_statement:function(){var n=[];switch(this.token===this.tok.T_ATTRIBUTE&&(n=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:var r=this.read_function(!1,!1);return r.attrGroups=n,r;case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_HALT_COMPILER:this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");var a=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),a=a(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),a;default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:var n=this.node("return");this.next();var r=this.read_optional_expr(";");return this.expectEndOfStatement(),n(r);case this.tok.T_BREAK:case this.tok.T_CONTINUE:var a=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();var l=this.read_optional_expr(";");return this.expectEndOfStatement(),a(l);case this.tok.T_GLOBAL:var d=this.node("global"),T=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),d(T);case this.tok.T_STATIC:var b=[this.token,this.lexer.getState()],_=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(b);var S=this.next().read_expr();return this.expectEndOfStatement(S),_("expressionstatement",S)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);var O=this.read_variable_declarations();return this.expectEndOfStatement(),_("static",O);case this.tok.T_ECHO:var E=this.node("echo"),Vt=this.text(),Yt=Vt==="<?="||Vt==="<%=",ae=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),E(ae,Yt);case this.tok.T_INLINE_HTML:var ge=this.text(),wt=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,_e=wt==="\r"||wt===`
`;_e&&wt===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(wt=`\r
`);var ie=this.node("inline");return this.next(),ie(ge,_e?wt+ge:ge);case this.tok.T_UNSET:var Fe=this.node("unset");this.next().expect("(")&&this.next();var De=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),Fe(De);case this.tok.T_DECLARE:var me,Zt=this.node("declare"),Ce=[];this.next().expect("(")&&this.next();var Me=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),me=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)Ce.push(this.read_top_statement());Ce.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&Ce.push(this.node("noop")()),this.expect("}")&&this.next(),me=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),me=this.ast.declare.MODE_NONE;return Zt(Me,Ce,me);case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:var jn=this.node("throw"),ki=this.next().read_expr();return this.expectEndOfStatement(),jn(ki);case";":return this.next(),null;case this.tok.T_STRING:var Di=this.node(),ps=[this.token,this.lexer.getState()],_s=this.text(),Yi=this.node("identifier");if(this.next().token===":")return Yi=Yi(_s),this.next(),Di("label",Yi);Yi.destroy(),Di.destroy(),this.lexer.tokens.push(ps);var Cn=this.node("expressionstatement"),Ri=this.next().read_expr();return this.expectEndOfStatement(Ri),Cn(Ri);case this.tok.T_GOTO:var ms=this.node("goto"),wi=null;if(this.next().expect(this.tok.T_STRING)){wi=this.node("identifier");var Kn=this.text();this.next(),wi=wi(Kn),this.expectEndOfStatement()}return ms(wi);default:var Qi=this.node("expressionstatement"),Nn=this.read_expr();return this.expectEndOfStatement(Nn),Qi(Nn)}},read_code_block:function(n){var r=this.node("block");this.expect("{")&&this.next();var a=n?this.read_top_statements():this.read_inner_statements();return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect("}")&&this.next(),r(null,a)}};he.read_top_statements,he.read_top_statement,he.read_inner_statements,he.read_const_list,he.read_declare_list,he.read_inner_statement,he.read_statement,he.read_code_block;var A={read_switch:function(){var n=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();var r=this.read_expr();this.expect(")")&&this.next();var a=this.token===":";return n(r,this.read_switch_case_list(),a)},read_switch_case_list:function(){var n=null,r=this.node("block"),a=[];for(this.token==="{"?n="}":this.token===":"?n=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==n;)a.push(this.read_case_list(n));return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),n===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),r(null,a)},read_case_list:function(n){var r=this.node("case"),a=null;this.token===this.tok.T_CASE?a=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();for(var l=this.node("block"),d=[];this.token!==this.EOF&&this.token!==n&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)d.push(this.read_inner_statement());return r(a,l(null,d))}};A.read_switch,A.read_switch_case_list,A.read_case_list;var D={read_try:function(){this.expect(this.tok.T_TRY);for(var n=this.node("try"),r=null,a=[],l=this.next().read_statement();this.token===this.tok.T_CATCH;){var d=this.node("catch");this.next().expect("(")&&this.next();var T=this.read_list(this.read_namespace_name,"|",!1),b=null;this.token===this.tok.T_VARIABLE&&(b=this.read_variable(!0,!1)),this.expect(")"),a.push(d(this.next().read_statement(),T,b))}return this.token===this.tok.T_FINALLY&&(r=this.next().read_statement()),n(l,a,r)}};D.read_try;var tt={read_short_form:function(n){var r=this.node("block"),a=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==n;)a.push(this.read_inner_statement());return a.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&a.push(this.node("noop")()),this.expect(n)&&this.next(),this.expectEndOfStatement(),r(null,a)},read_function_list:function(n,r){var a=[];do{if(this.token==r&&this.version>=703&&a.length>0){a.push(this.node("noop")());break}if(a.push(n.apply(this,[])),this.token!=r||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return a},read_list:function(n,r,a){var l=[];if(this.token==r&&(a&&l.push(typeof n=="function"?this.node("noop")():null),this.next()),typeof n=="function")do{var d=n.apply(this,[]);if(d&&l.push(d),this.token!=r)break}while(this.next().token!=this.EOF);else{if(!this.expect(n))return[];for(l.push(this.text());this.next().token!=this.EOF&&this.token==r&&this.next().token==n;)l.push(this.text())}return l},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(n){var r=this.node("byref");this.next(),r=r(null);var a=n();return a&&(this.ast.swapLocations(a,r,a,this),a.byref=!0),a},read_variable_declarations:function(){return this.read_list(function(){var n=this.node("staticvariable"),r=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){var a=this.text().substring(1);this.next(),r=r(a,!1)}else r=r("#ERR",!1);return this.token==="="?n(r,this.next().read_expr()):r},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}};tt.read_short_form,tt.read_function_list,tt.read_list,tt.read_name_list,tt.read_byref,tt.read_variable_declarations,tt.read_extends_from,tt.read_interface_extends_list,tt.read_implements_list;var lt={read_variable:function(n,r){var a;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,n,r));if(this.is([this.tok.T_VARIABLE,"$"]))a=this.read_reference_variable(r);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE])){a=this.node();var l=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(l.kind)===-1){var d=l.name.toLowerCase();d==="true"?a=l.destroy(a("boolean",!0,l.name)):d==="false"?a=l.destroy(a("boolean",!1,l.name)):d==="null"?a=l.destroy(a("nullkeyword",l.name)):(a.destroy(l),a=l)}else a.destroy(l),a=l}else if(this.token===this.tok.T_STATIC){a=this.node("staticreference");var T=this.text();this.next(),a=a(T)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(a=this.read_static_getter(a,r)),this.recursive_variable_chain_scan(a,n,r)},read_static_getter:function(n,r){var a,l,d=this.node("staticlookup");return this.next().is([this.tok.T_VARIABLE,"$"])?a=this.read_reference_variable(r):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(a=this.node("identifier"),l=this.text(),this.next(),a=a(l)):this.token==="{"?(a=this.node("literal"),l=this.next().read_expr(),this.expect("}")&&this.next(),a=a("literal",l,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),a=this.node("identifier"),l=this.text(),this.next(),a=a(l)),d(n,a)},read_what:function(){var n=arguments.length>0&&arguments[0]!==void 0&&arguments[0],r=null,a=null;switch(this.next().token){case this.tok.T_STRING:r=this.node("identifier"),a=this.text(),this.next(),r=r(a),n&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:r=this.node("variable"),a=this.text().substring(1),this.next(),r=r(a,!1);break;case"$":r=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(a=this.next().read_expr(),this.expect("}")&&this.next(),r=r("variable",a,!0)):r=r("variable",a=this.read_expr(),!1);break;case"{":r=this.node("encapsedpart"),a=this.next().read_expr(),this.expect("}")&&this.next(),r=r(a,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),r=this.node("identifier"),a=this.text(),this.next(),r=r(a)}return r},recursive_variable_chain_scan:function(n,r,a){var l,d;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(r)return n;n=this.node("call")(n,this.read_argument_list());break;case"[":case"{":var T=this.token==="[";l=this.node("offsetlookup"),this.next(),d=!1,a?(d=this.read_encaps_var_offset(),this.expect(T?"]":"}")&&this.next()):(T?this.token!=="]":this.token!=="}")?(d=this.read_expr(),this.expect(T?"]":"}")&&this.next()):this.next(),n=l(n,d);break;case this.tok.T_DOUBLE_COLON:n.kind==="staticlookup"&&n.offset.kind==="identifier"&&this.error(),n=(l=this.node("staticlookup"))(n,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:n=(l=this.node("propertylookup"))(n,this.read_what());break;case this.tok.T_NULLSAFE_OBJECT_OPERATOR:n=(l=this.node("nullsafepropertylookup"))(n,this.read_what());break;default:break t}return n},read_encaps_var_offset:function(){var n=this.node();if(this.token===this.tok.T_STRING){var r=this.text();this.next(),n=n("identifier",r)}else if(this.token===this.tok.T_NUM_STRING){var a=this.text();this.next(),n=n("number",a,null)}else if(this.token==="-"){this.next();var l=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),n=n("number",l,null)}else if(this.token===this.tok.T_VARIABLE){var d=this.text().substring(1);this.next(),n=n("variable",d,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);var T=this.text();this.next(),n=n("identifier",T)}return n},read_reference_variable:function(n){for(var r,a=this.read_simple_variable();this.token!=this.EOF;){var l=this.node();if(this.token!="{"||n){l.destroy();break}r=this.next().read_expr(),this.expect("}")&&this.next(),a=l("offsetlookup",a,r)}return a},read_simple_variable:function(){var n,r=this.node("variable");if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)n=this.text().substring(1),this.next(),r=r(n,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":var a=this.next().read_expr();this.expect("}")&&this.next(),r=r(a,!0);break;case"$":r=r(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:n=this.text().substring(1);var l=this.node("variable");this.next(),r=r(l(n,!1),!1);break;default:this.error(["{","$",this.tok.T_VARIABLE]),n=this.text(),this.next(),r=r(n,!1)}return r}};function Lt(n){return n!="."&&n!=","&&!isNaN(parseFloat(n))&&isFinite(n)}lt.read_variable,lt.read_static_getter,lt.read_what,lt.recursive_variable_chain_scan,lt.read_encaps_var_offset,lt.read_reference_variable,lt.read_simple_variable;var Z=function(n,r){this.lexer=n,this.ast=r,this.tok=n.tok,this.EOF=n.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=800,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;var a=function(l){return[l,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(a)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(a)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(a)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(a)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(a)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(a))}};Z.prototype.getTokenName=function(n){return Lt(n)?n==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[n]:"'"+n+"'"},Z.prototype.parse=function(n,r){this._errors=[],this.filename=r||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(n),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;var a=this.node("program"),l=[];for(this.next();this.token!=this.EOF;)l.push(this.read_start());l.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&l.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];var d=a(l,this._errors,this._docs,this._tokens);if(this.debug){var T=this.ast.checkNodes();if(T.length>0)throw T.forEach(function(b){b.position&&console.log("Node at line "+b.position.line+", column "+b.position.column),console.log(b.stack.join(`
`))}),new Error("Some nodes are not closed")}return d},Z.prototype.raiseError=function(n,r,a,l){if(n+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){var d=new SyntaxError(n,this.filename,this.lexer.yylloc.first_line);throw d.lineNumber=this.lexer.yylloc.first_line,d.fileName=this.filename,d.columnNumber=this.lexer.yylloc.first_column,d}var T=this.ast.prepare("error",null,this)(n,l,this.lexer.yylloc.first_line,a);return this._errors.push(T),T},Z.prototype.error=function(n){var r="Parse Error : syntax error",a=this.getTokenName(this.token),l="";if(this.token!==this.EOF){if(Lt(this.token)){var d=this.text();d.length>10&&(d=d.substring(0,7)+"..."),a="'"+d+"' ("+a+")"}r+=", unexpected "+a}return n&&!Array.isArray(n)&&((Lt(n)||n.length===1)&&(l=", expecting "+this.getTokenName(n)),r+=l),this.raiseError(r,l,n,a)},Z.prototype.position=function(){return new ct(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)},Z.prototype.node=function(n){if(this.extractDoc){var r=null;this._docIndex<this._docs.length&&(r=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+n)),console.log(r)));var a=this.ast.prepare(n,r,this);return a.postBuild=function(l){if(this._docIndex<this._docs.length)if(this._lastNode){for(var d=this.prev[2],T=this._docIndex;T<this._docs.length&&!(this._docs[T].offset>d);T++);T>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,T)),this._docIndex=T)}else this.token===this.EOF&&(l.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=l}.bind(this),a}return this.ast.prepare(n,null,this)},Z.prototype.expectEndOfStatement=function(n){if(this.token===";")n&&this.lexer.yytext===";"&&n.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var U=["parser.next","parser.node","parser.showlog"];Z.prototype.showlog=function(){for(var n,r=new Error().stack.split(`
`),a=2;a<r.length;a++){n=r[a].trim();for(var l=!1,d=0;d<U.length;d++)if(n.substring(3,3+U[d].length)===U[d]){l=!0;break}if(!l)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+n),this},Z.prototype.expect=function(n){if(Array.isArray(n)){if(n.indexOf(this.token)===-1)return this.error(n),!1}else if(this.token!=n)return this.error(n),!1;return!0},Z.prototype.text=function(){return this.lexer.yytext},Z.prototype.next=function(){if(this.token===";"&&this.lexer.yytext!==";"||(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this},Z.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;var n=this.lexer.yytext;if(n=this.lexer.engine.tokens.values.hasOwnProperty(this.token)?[this.lexer.engine.tokens.values[this.token],n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:[null,n,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(n),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this},Z.prototype.is=function(n){return Array.isArray(n)?n.indexOf(this.token)!==-1:this.entries[n].has(this.token)},[J,Dt,Mt,kt,Rt,ue,Tt,mt,ne,Gt,he,A,D,tt,lt].forEach(function(n){for(var r in n){if(Z.prototype.hasOwnProperty(r))throw new Error("Function "+r+" is already defined - collision");Z.prototype[r]=n[r]}});var W=Z,H={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238}},et=function(n,r,a){this.source=n,this.start=r,this.end=a},nt=function(n,r,a){this.kind=n,r&&(this.leadingComments=r),a&&(this.loc=a)};nt.prototype.setTrailingComments=function(n){this.trailingComments=n},nt.prototype.destroy=function(n){if(!n)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(n.leadingComments?n.leadingComments=Array.concat(this.leadingComments,n.leadingComments):n.leadingComments=this.leadingComments),this.trailingComments&&(n.trailingComments?n.trailingComments=Array.concat(this.trailingComments,n.trailingComments):n.trailingComments=this.trailingComments),n},nt.prototype.includeToken=function(n){return this.loc&&(this.loc.end&&(this.loc.end.line=n.lexer.yylloc.last_line,this.loc.end.column=n.lexer.yylloc.last_column,this.loc.end.offset=n.lexer.offset),n.ast.withSource&&(this.loc.source=n.lexer._input.substring(this.loc.start.offset,n.lexer.offset))),this},nt.extends=function(n,r){return r.prototype=Object.create(this.prototype),r.extends=this.extends,r.prototype.constructor=r,r.kind=n,r};var K=nt,Q="expression",q=K.extends(Q,function(n,r,a){K.apply(this,[n||Q,r,a])}),gt="array",Kt=q.extends(gt,function(n,r,a,l){q.apply(this,[gt,a,l]),this.items=r,this.shortForm=n}),qt="arrowfunc",Et=q.extends(qt,function(n,r,a,l,d,T,b,_){q.apply(this,[qt,b,_]),this.arguments=n,this.byref=r,this.body=a,this.type=l,this.nullable=d,this.isStatic=T||!1}),Pt="assign",zt=q.extends(Pt,function(n,r,a,l,d){q.apply(this,[Pt,l,d]),this.left=n,this.right=r,this.operator=a}),Ct="assignref",Ye=q.extends(Ct,function(n,r,a,l){q.apply(this,[Ct,a,l]),this.left=n,this.right=r}),Ti="attribute",Ze=K.extends(Ti,function(n,r,a,l){K.apply(this,[Ti,a,l]),this.name=n,this.args=r}),we="attrgroup",Qe=K.extends(we,function(n,r,a){K.apply(this,[we,r,a]),this.attrs=n||[]}),Gi="operation",je=q.extends(Gi,function(n,r,a){q.apply(this,[n||Gi,r,a])}),ss=je.extends("bin",function(n,r,a,l,d){je.apply(this,["bin",l,d]),this.type=n,this.left=r,this.right=a}),ft="statement",Nt=K.extends(ft,function(n,r,a){K.apply(this,[n||ft,r,a])}),rs="block",Ke=Nt.extends(rs,function(n,r,a,l){Nt.apply(this,[n||rs,a,l]),this.children=r.filter(Boolean)}),Fn="literal",Ee=q.extends(Fn,function(n,r,a,l,d){q.apply(this,[n||Fn,l,d]),this.value=r,a&&(this.raw=a)}),Oi="boolean",m=Ee.extends(Oi,function(n,r,a,l){Ee.apply(this,[Oi,n,r,a,l])}),L="break",R=Nt.extends(L,function(n,r,a){Nt.apply(this,[L,r,a]),this.level=n}),P="byref",p=q.extends(P,function(n,r,a){q.apply(this,[P,r,a]),this.what=n}),g="call",N=q.extends(g,function(n,r,a,l){q.apply(this,[g,a,l]),this.what=n,this.arguments=r}),w="case",G=Nt.extends(w,function(n,r,a,l){Nt.apply(this,[w,a,l]),this.test=n,this.body=r}),j="cast",ot=je.extends(j,function(n,r,a,l,d){je.apply(this,[j,l,d]),this.type=n,this.raw=r,this.expr=a}),bt="catch",Wt=Nt.extends(bt,function(n,r,a,l,d){Nt.apply(this,[bt,l,d]),this.body=n,this.what=r,this.variable=a}),$t="declaration",oe=Nt.extends($t,function(n,r,a,l){Nt.apply(this,[n||$t,a,l]),this.name=r});oe.prototype.parseFlags=function(n){this.isAbstract=n[2]===1,this.isFinal=n[2]===2,this.kind!=="class"&&(n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1)};var Qt=oe,ce="class",ze=Qt.extends(ce,function(n,r,a,l,d,T,b){Qt.apply(this,[ce,n,T,b]),this.isAnonymous=!n,this.extends=r,this.implements=a,this.body=l,this.attrGroups=[],this.parseFlags(d)}),de="constantstatement",ei=Nt.extends(de,function(n,r,a,l){Nt.apply(this,[n||de,a,l]),this.constants=r}),qi="classconstant",ui=ei.extends(qi,function(n,r,a,l,d,T){ei.apply(this,[n||qi,r,d,T]),this.parseFlags(a),this.attrGroups=l});ui.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private")};var Bn=ui,Se="clone",os=q.extends(Se,function(n,r,a){q.apply(this,[Se,r,a]),this.what=n}),hn="closure",Un=q.extends(hn,function(n,r,a,l,d,T,b,_){q.apply(this,[hn,b,_]),this.uses=a,this.arguments=n,this.byref=r,this.type=l,this.nullable=d,this.isStatic=T||!1,this.body=null,this.attrGroups=[]}),as=K.extends("comment",function(n,r,a,l){K.apply(this,[n,a,l]),this.value=r}),Ir="commentblock",$o=as.extends(Ir,function(n,r,a){as.apply(this,[Ir,n,r,a])}),Zs="commentline",Jt=as.extends(Zs,function(n,r,a){as.apply(this,[Zs,n,r,a])}),$e="constant",hs=K.extends($e,function(n,r,a,l){K.apply(this,[$e,a,l]),this.name=n,this.value=r}),tr="continue",Jo=Nt.extends(tr,function(n,r,a){Nt.apply(this,[tr,r,a]),this.level=n}),ls="declare",xn=Ke.extends(ls,function(n,r,a,l,d){Ke.apply(this,[ls,r,l,d]),this.directives=n,this.mode=a});xn.MODE_SHORT="short",xn.MODE_BLOCK="block",xn.MODE_NONE="none";var Ut=xn,ve="declaredirective",ti=K.extends(ve,function(n,r,a,l){K.apply(this,[ve,a,l]),this.key=n,this.value=r}),ye=Nt.extends("do",function(n,r,a,l){Nt.apply(this,["do",a,l]),this.test=n,this.body=r}),ii="echo",ln=Nt.extends(ii,function(n,r,a,l){Nt.apply(this,[ii,a,l]),this.shortForm=r,this.expressions=n}),ni="empty",En=q.extends(ni,function(n,r,a){q.apply(this,[ni,r,a]),this.expression=n}),ci="encapsed",si=Ee.extends(ci,function(n,r,a,l,d){Ee.apply(this,[ci,n,r,l,d]),this.type=a});si.TYPE_STRING="string",si.TYPE_SHELL="shell",si.TYPE_HEREDOC="heredoc",si.TYPE_OFFSET="offset";var Ue=si,fi="encapsedpart",Sr=q.extends(fi,function(n,r,a,l,d){q.apply(this,[fi,l,d]),this.expression=n,this.syntax=r,this.curly=a}),He="entry",Ps=q.extends(He,function(n,r,a,l,d,T){q.apply(this,[He,d,T]),this.key=n,this.value=r,this.byRef=a,this.unpack=l}),Mn="error",en=K.extends(Mn,function(n,r,a,l,d,T){K.apply(this,[Mn,d,T]),this.message=n,this.token=r,this.line=a,this.expected=l}),us="eval",Hn=q.extends(us,function(n,r,a){q.apply(this,[us,r,a]),this.source=n}),yh="exit",uv=q.extends(yh,function(n,r,a,l){q.apply(this,[yh,a,l]),this.expression=n,this.useDie=r}),Ch="expressionstatement",cv=Nt.extends(Ch,function(n,r,a){Nt.apply(this,[Ch,r,a]),this.expression=n}),fv=Nt.extends("for",function(n,r,a,l,d,T,b){Nt.apply(this,["for",T,b]),this.init=n,this.test=r,this.increment=a,this.shortForm=d,this.body=l}),Nh="foreach",dv=Nt.extends(Nh,function(n,r,a,l,d,T,b){Nt.apply(this,[Nh,T,b]),this.source=n,this.key=r,this.value=a,this.shortForm=d,this.body=l}),bh="function",Xo=Qt.extends(bh,function(n,r,a,l,d,T,b){Qt.apply(this,[bh,n,T,b]),this.arguments=r,this.byref=a,this.type=l,this.nullable=d,this.body=null,this.attrGroups=[]}),Ah="global",pv=Nt.extends(Ah,function(n,r,a){Nt.apply(this,[Ah,r,a]),this.items=n}),Ih="goto",_v=Nt.extends(Ih,function(n,r,a){Nt.apply(this,[Ih,r,a]),this.label=n}),Sh="halt",mv=Nt.extends(Sh,function(n,r,a){Nt.apply(this,[Sh,r,a]),this.after=n}),Oh="identifier",Tv=K.extends(Oh,function(n,r,a){K.apply(this,[Oh,r,a]),this.name=n}),gv=Nt.extends("if",function(n,r,a,l,d,T){Nt.apply(this,["if",d,T]),this.test=n,this.body=r,this.alternate=a,this.shortForm=l}),Lh="include",kv=q.extends(Lh,function(n,r,a,l,d){q.apply(this,[Lh,l,d]),this.once=n,this.require=r,this.target=a}),Ph="inline",xv=Ee.extends(Ph,function(n,r,a,l){Ee.apply(this,[Ph,n,r,a,l])}),Dh="interface",Ev=Qt.extends(Dh,function(n,r,a,l,d,T){Qt.apply(this,[Dh,n,d,T]),this.extends=r,this.body=a,this.attrGroups=l}),Rh="isset",vv=q.extends(Rh,function(n,r,a){q.apply(this,[Rh,r,a]),this.variables=n}),wh="label",yv=Nt.extends(wh,function(n,r,a){Nt.apply(this,[wh,r,a]),this.name=n}),Fh="list",Cv=q.extends(Fh,function(n,r,a,l){q.apply(this,[Fh,a,l]),this.items=n,this.shortForm=r}),Bh="lookup",vn=q.extends(Bh,function(n,r,a,l,d){q.apply(this,[n||Bh,l,d]),this.what=r,this.offset=a}),Uh="magic",Nv=Ee.extends(Uh,function(n,r,a,l){Ee.apply(this,[Uh,n,r,a,l])}),Mh="match",bv=q.extends(Mh,function(n,r,a,l){q.apply(this,[Mh,a,l]),this.cond=n,this.arms=r}),Hh="matcharm",Av=q.extends(Hh,function(n,r,a,l){q.apply(this,[Hh,a,l]),this.conds=n,this.body=r}),Vh="method",Iv=Xo.extends(Vh,function(){Xo.apply(this,arguments),this.kind=Vh}),Gh="reference",nn=K.extends(Gh,function(n,r,a){K.apply(this,[n||Gh,r,a])}),qh="name",er=nn.extends(qh,function n(r,a,l,d){nn.apply(this,[qh,l,d]),a?this.resolution=n.RELATIVE_NAME:r.length===1?this.resolution=n.UNQUALIFIED_NAME:r[0]?this.resolution=n.QUALIFIED_NAME:this.resolution=n.FULL_QUALIFIED_NAME,this.name=r.join("\\")});er.UNQUALIFIED_NAME="uqn",er.QUALIFIED_NAME="qn",er.FULL_QUALIFIED_NAME="fqn",er.RELATIVE_NAME="rn";var Sv=er,Wh="namespace",Ov=Ke.extends(Wh,function(n,r,a,l,d){Ke.apply(this,[Wh,r,l,d]),this.name=n,this.withBrackets=a||!1}),Yh="namedargument",Lv=q.extends(Yh,function(n,r,a,l){q.apply(this,[Yh,a,l]),this.name=n,this.value=r}),Pv=q.extends("new",function(n,r,a,l){q.apply(this,["new",a,l]),this.what=n,this.arguments=r}),Qh="noop",Dv=K.extends(Qh,function(n,r){K.apply(this,[Qh,n,r])}),jh="nowdoc",Rv=Ee.extends(jh,function(n,r,a,l,d){Ee.apply(this,[jh,n,r,l,d]),this.label=a}),Kh="nullkeyword",wv=K.extends(Kh,function(n,r,a){K.apply(this,[Kh,r,a]),this.raw=n}),zh="nullsafepropertylookup",Fv=vn.extends(zh,function(n,r,a,l){vn.apply(this,[zh,n,r,a,l])}),$h="number",Bv=Ee.extends($h,function(n,r,a,l){Ee.apply(this,[$h,n,r,a,l])}),Jh="offsetlookup",Uv=vn.extends(Jh,function(n,r,a,l){vn.apply(this,[Jh,n,r,a,l])}),Xh="parameter",Mv=Qt.extends(Xh,function(n,r,a,l,d,T,b,_,S){Qt.apply(this,[Xh,n,_,S]),this.value=a,this.type=r,this.byref=l,this.variadic=d,this.nullable=T,this.flags=b||0,this.attrGroups=[]}),Zh="parentreference",Hv=nn.extends(Zh,function(n,r,a){nn.apply(this,[Zh,r,a]),this.raw=n}),tl="post",Vv=je.extends(tl,function(n,r,a,l){je.apply(this,[tl,a,l]),this.type=n,this.what=r}),Gv=je.extends("pre",function(n,r,a,l){je.apply(this,["pre",a,l]),this.type=n,this.what=r}),el="print",qv=q.extends(el,function(n,r,a){q.apply(this,[el,r,a]),this.expression=n}),il="program",Wv=Ke.extends(il,function(n,r,a,l,d,T){Ke.apply(this,[il,n,d,T]),this.errors=r,a&&(this.comments=a),l&&(this.tokens=l)}),nl="property",Yv=Nt.extends(nl,function(n,r,a,l,d,T,b){Nt.apply(this,[nl,T,b]),this.name=n,this.value=r,this.nullable=a,this.type=l,this.attrGroups=d}),sl="propertylookup",Qv=vn.extends(sl,function(n,r,a,l){vn.apply(this,[sl,n,r,a,l])}),rl="propertystatement",ol=Nt.extends(rl,function(n,r,a,l,d){Nt.apply(this,[rl,l,d]),this.properties=r,this.parseFlags(a)});ol.prototype.parseFlags=function(n){n[0]===-1?this.visibility="":n[0]===null?this.visibility=null:n[0]===0?this.visibility="public":n[0]===1?this.visibility="protected":n[0]===2&&(this.visibility="private"),this.isStatic=n[1]===1};var jv=ol,al="retif",Kv=q.extends(al,function(n,r,a,l,d){q.apply(this,[al,l,d]),this.test=n,this.trueExpr=r,this.falseExpr=a}),hl="return",zv=Nt.extends(hl,function(n,r,a){Nt.apply(this,[hl,r,a]),this.expr=n}),ll="selfreference",$v=nn.extends(ll,function(n,r,a){nn.apply(this,[ll,r,a]),this.raw=n}),ul="silent",Jv=q.extends(ul,function(n,r,a){q.apply(this,[ul,r,a]),this.expr=n}),cl="static",Xv=Nt.extends(cl,function(n,r,a){Nt.apply(this,[cl,r,a]),this.variables=n}),fl="staticvariable",Zv=K.extends(fl,function(n,r,a,l){K.apply(this,[fl,a,l]),this.variable=n,this.defaultValue=r}),dl="staticlookup",ty=vn.extends(dl,function(n,r,a,l){vn.apply(this,[dl,n,r,a,l])}),pl="staticreference",ey=nn.extends(pl,function(n,r,a){nn.apply(this,[pl,r,a]),this.raw=n}),_l="string",iy=Ee.extends(_l,function(n,r,a,l,d,T){Ee.apply(this,[_l,r,l,d,T]),this.unicode=a,this.isDoubleQuote=n}),ml="switch",ny=Nt.extends(ml,function(n,r,a,l,d){Nt.apply(this,[ml,l,d]),this.test=n,this.body=r,this.shortForm=a}),Tl="throw",sy=Nt.extends(Tl,function(n,r,a){Nt.apply(this,[Tl,r,a]),this.what=n}),gl="trait",ry=Qt.extends(gl,function(n,r,a,l){Qt.apply(this,[gl,n,a,l]),this.body=r}),kl="traitalias",oy=K.extends(kl,function(n,r,a,l,d,T){K.apply(this,[kl,d,T]),this.trait=n,this.method=r,this.as=a,this.visibility="",l&&(l[0]===0?this.visibility="public":l[0]===1?this.visibility="protected":l[0]===2&&(this.visibility="private"))}),xl="traitprecedence",ay=K.extends(xl,function(n,r,a,l,d){K.apply(this,[xl,l,d]),this.trait=n,this.method=r,this.instead=a}),El="traituse",hy=K.extends(El,function(n,r,a,l){K.apply(this,[El,a,l]),this.traits=n,this.adaptations=r}),ly=Nt.extends("try",function(n,r,a,l,d){Nt.apply(this,["try",l,d]),this.body=n,this.catches=r,this.always=a}),vl="typereference",yl=nn.extends(vl,function(n,r,a,l){nn.apply(this,[vl,a,l]),this.name=n,this.raw=r});yl.types=["int","float","string","bool","object","array","callable","iterable","void","static"];var uy=yl,Cl="unary",cy=je.extends(Cl,function(n,r,a,l){je.apply(this,[Cl,a,l]),this.type=n,this.what=r}),Nl="uniontype",fy=Qt.extends(Nl,function(n,r,a){Qt.apply(this,[Nl,null,r,a]),this.types=n}),bl="unset",dy=Nt.extends(bl,function(n,r,a){Nt.apply(this,[bl,r,a]),this.variables=n}),Al="usegroup",py=Nt.extends(Al,function(n,r,a,l,d){Nt.apply(this,[Al,l,d]),this.name=n,this.type=r,this.items=a}),Il="useitem",Zo=Nt.extends(Il,function(n,r,a,l,d){Nt.apply(this,[Il,l,d]),this.name=n,this.alias=r,this.type=a});Zo.TYPE_CONST="const",Zo.TYPE_FUNCTION="function";var _y=Zo,Sl="variable",my=q.extends(Sl,function(n,r,a,l){q.apply(this,[Sl,a,l]),this.name=n,this.curly=r||!1}),Ol="variadic",Ty=q.extends(Ol,function(n,r,a){q.apply(this,[Ol,r,a]),this.what=n}),Ll="while",gy=Nt.extends(Ll,function(n,r,a,l,d){Nt.apply(this,[Ll,l,d]),this.test=n,this.body=r,this.shortForm=a}),Pl="yield",ky=q.extends(Pl,function(n,r,a,l){q.apply(this,[Pl,a,l]),this.value=n,this.key=r}),Dl="yieldfrom",xy=q.extends(Dl,function(n,r,a){q.apply(this,[Dl,r,a]),this.value=n}),ke=function(n,r){this.withPositions=n,this.withSource=r};ke.precedence={},[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(n,r){n.forEach(function(a){ke.precedence[a]=r+1})}),ke.prototype.isRightAssociative=function(n){return n==="**"||n==="??"},ke.prototype.swapLocations=function(n,r,a,l){this.withPositions&&(n.loc.start=r.loc.start,n.loc.end=a.loc.end,this.withSource&&(n.loc.source=l.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},ke.prototype.resolveLocations=function(n,r,a,l){this.withPositions&&(n.loc.start.offset>r.loc.start.offset&&(n.loc.start=r.loc.start),n.loc.end.offset<a.loc.end.offset&&(n.loc.end=a.loc.end),this.withSource&&(n.loc.source=l.lexer._input.substring(n.loc.start.offset,n.loc.end.offset)))},ke.prototype.resolvePrecedence=function(n,r){var a,l,d;return n.kind==="call"?this.resolveLocations(n,n.what,n,r):n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"&&n.offset?this.resolveLocations(n,n.what,n.offset,r):n.kind==="bin"?n.right&&!n.right.parenthesizedExpression&&(n.right.kind==="bin"?(l=ke.precedence[n.type],d=ke.precedence[n.right.type],l&&d&&d<=l&&(n.type!==n.right.type||!this.isRightAssociative(n.type))&&(a=n.right,n.right=n.right.left,this.swapLocations(n,n.left,n.right,r),a.left=this.resolvePrecedence(n,r),this.swapLocations(a,a.left,a.right,r),n=a)):n.right.kind==="retif"&&(l=ke.precedence[n.type],d=ke.precedence["?"],l&&d&&d<=l&&(a=n.right,n.right=n.right.test,this.swapLocations(n,n.left,n.right,r),a.test=this.resolvePrecedence(n,r),this.swapLocations(a,a.test,a.falseExpr,r),n=a))):n.kind!=="silent"&&n.kind!=="cast"||!n.expr||n.expr.parenthesizedExpression?n.kind==="unary"?n.what&&!n.what.parenthesizedExpression&&(n.what.kind==="bin"?(a=n.what,n.what=n.what.left,this.swapLocations(n,n,n.what,r),a.left=this.resolvePrecedence(n,r),this.swapLocations(a,a.left,a.right,r),n=a):n.what.kind==="retif"&&(a=n.what,n.what=n.what.test,this.swapLocations(n,n,n.what,r),a.test=this.resolvePrecedence(n,r),this.swapLocations(a,a.test,a.falseExpr,r),n=a)):n.kind==="retif"?n.falseExpr&&n.falseExpr.kind==="retif"&&!n.falseExpr.parenthesizedExpression&&(a=n.falseExpr,n.falseExpr=a.test,this.swapLocations(n,n.test,n.falseExpr,r),a.test=this.resolvePrecedence(n,r),this.swapLocations(a,a.test,a.falseExpr,r),n=a):n.kind==="assign"?n.right&&n.right.kind==="bin"&&!n.right.parenthesizedExpression&&(l=ke.precedence["="],d=ke.precedence[n.right.type],l&&d&&d<l&&(a=n.right,n.right=n.right.left,a.left=n,this.swapLocations(a,a.left,n.right,r),n=a)):n.kind==="expressionstatement"&&this.swapLocations(n,n.expression,n,r):n.expr.kind==="bin"?(a=n.expr,n.expr=n.expr.left,this.swapLocations(n,n,n.expr,r),a.left=this.resolvePrecedence(n,r),this.swapLocations(a,a.left,a.right,r),n=a):n.expr.kind==="retif"&&(a=n.expr,n.expr=n.expr.test,this.swapLocations(n,n,n.expr,r),a.test=this.resolvePrecedence(n,r),this.swapLocations(a,a.test,a.falseExpr,r),n=a),n},ke.prototype.prepare=function(n,r,a){var l=null;(this.withPositions||this.withSource)&&(l=a.position());var d=this,T=function b(){var _=null,S=Array.prototype.slice.call(arguments);if(S.push(r),d.withPositions||d.withSource){var O=null;d.withSource&&(O=a.lexer._input.substring(l.offset,a.prev[2])),_=new et(O,l,new ct(a.prev[0],a.prev[1],a.prev[2])),S.push(_)}n||(n=S.shift());var E=d[n];if(typeof E!="function")throw new Error('Undefined node "'+n+'"');var Vt=Object.create(E.prototype);return E.apply(Vt,S),b.instance=Vt,b.trailingComments&&(Vt.trailingComments=b.trailingComments),typeof b.postBuild=="function"&&b.postBuild(Vt),a.debug&&delete ke.stack[b.stackUid],d.resolvePrecedence(Vt,a)};return a.debug&&(ke.stack||(ke.stack={},ke.stackUid=1),ke.stack[++ke.stackUid]={position:l,stack:new Error().stack.split(`
`).slice(3,5)},T.stackUid=ke.stackUid),T.setTrailingComments=function(b){T.instance?T.instance.setTrailingComments(b):T.trailingComments=b},T.destroy=function(b){r&&(b?b.leadingComments?b.leadingComments=r.concat(b.leadingComments):b.leadingComments=r:a._docIndex=a._docs.length-r.length),a.debug&&delete ke.stack[T.stackUid]},T},ke.prototype.checkNodes=function(){var n=[];for(var r in ke.stack)ke.stack.hasOwnProperty(r)&&n.push(ke.stack[r]);return ke.stack={},n},[Kt,Et,zt,Ye,Ze,Qe,ss,Ke,m,R,p,N,G,ot,Wt,ze,Bn,os,Un,as,$o,Jt,hs,ei,Jo,Qt,Ut,ti,ye,ln,En,Ue,Sr,Ps,en,Hn,uv,q,cv,fv,dv,Xo,pv,_v,mv,Tv,gv,kv,xv,Ev,vv,yv,Cv,Ee,vn,Nv,bv,Av,Iv,Sv,Ov,Lv,Pv,K,Dv,Rv,wv,Fv,Bv,Uv,je,Mv,Hv,Vv,Gv,qv,Wv,Yv,Qv,jv,nn,Kv,zv,$v,Jv,Nt,Xv,Zv,ty,ey,iy,ny,sy,ry,oy,ay,hy,ly,uy,cy,fy,dy,py,_y,my,Ty,gy,ky,xy].forEach(function(n){ke.prototype[n.kind]=n});var Rl=ke;function ta(n,r){for(var a=Object.keys(n),l=a.length;l--;){var d=a[l],T=n[d];T===null?delete r[d]:typeof T=="function"?r[d]=T.bind(r):Array.isArray(T)?r[d]=Array.isArray(r[d])?r[d].concat(T):T:r[d]=typeof T=="object"&&typeof r[d]=="object"?ta(T,r[d]):T}return r}var Li=function(n){if(typeof this=="function")return new this(n);if(this.tokens=H,this.lexer=new ht(this),this.ast=new Rl,this.parser=new W(this.lexer,this.ast),n&&typeof n=="object"){if(n.parser&&(n.lexer||(n.lexer={}),n.parser.version)){if(typeof n.parser.version=="string"){var r=n.parser.version.split(".");if(r=100*parseInt(r[0])+parseInt(r[1]),isNaN(r))throw new Error("Bad version number : "+n.parser.version);n.parser.version=r}else if(typeof n.parser.version!="number")throw new Error("Expecting a number for version");if(n.parser.version<500||n.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}ta(n,this),this.lexer.version=this.parser.version}},ea=function(n){return typeof n.write=="function"?n.toString():n};Li.create=function(n){return new Li(n)},Li.parseEval=function(n,r){return new Li(r).parseEval(n)},Li.prototype.parseEval=function(n){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,n=ea(n),this.parser.parse(n,"eval")},Li.parseCode=function(n,r,a){return typeof r!="object"||a||(a=r,r="unknown"),new Li(a).parseCode(n,r)},Li.prototype.parseCode=function(n,r){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,n=ea(n),this.parser.parse(n,r)},Li.tokenGetAll=function(n,r){return new Li(r).tokenGetAll(n)},Li.prototype.tokenGetAll=function(n){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,n=ea(n);var r=this.lexer.EOF,a=this.tokens.values;this.lexer.setInput(n);for(var l=this.lexer.lex()||r,d=[];l!=r;){var T=this.lexer.yytext;a.hasOwnProperty(l)&&(T=[a[l],T,this.lexer.yylloc.first_line]),d.push(T),l=this.lexer.lex()||r}return d};var cs=Li,Ey=H,vy=ht,yy=Rl,Cy=W,Ny=ta,by=Li;cs.tokens=Ey,cs.lexer=vy,cs.AST=yy,cs.parser=Cy,cs.combine=Ny,cs.default=by;var wl=function(n,r,a){var l=a&&a.parentParser==="markdown";if(!n&&l)return"";n=n.replace(/\?>\r?\n<\?/g,`?>
___PSEUDO_INLINE_PLACEHOLDER___<?`);var d,T=new cs({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}}),b=n.indexOf("<?php")!==-1,_=l&&!b;try{d=_?T.parseEval(n):T.parseCode(n)}catch(S){throw S instanceof SyntaxError&&"lineNumber"in S&&(S.loc={start:{line:S.lineNumber,column:S.columnNumber}},delete S.lineNumber,delete S.columnNumber),S}return d.extra={parseAsEval:_},d.comments.forEach(function(S){S.value[S.value.length-1]==="\r"&&(S.value=S.value.slice(0,-1),S.loc.end.offset=S.loc.end.offset-1),S.value[S.value.length-1]===`
`&&(S.value=S.value.slice(0,-1),S.loc.end.offset=S.loc.end.offset-1)}),d},Ds=s.default.util,Ay=Ds.hasNewline,Iy=Ds.skipEverythingButNewLine,Sy=Ds.skipNewline,Oy=Ds.isNextLineEmpty,Ly=Ds.isPreviousLineEmpty,Py=Ds.getNextNonSpaceNonCommentCharacterIndex,Dy=s.default.version;function ia(n,r){return parseInt(Dy[0])>1?n[r]:n}var Fl={};function na(n){return Fl[n]}[["or"],["xor"],["and"],["=","+=","-=","*=","**=","/=",".=","%=","&=","|=","^=","<<=",">>="],["??"],["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!==","<>","<=>"],["<",">","<=",">="],[">>","<<"],["+","-","."],["*","/","%"],["!"],["instanceof"],["++","--","~"],["**"]].forEach(function(n,r){n.forEach(function(a){Fl[a]=r})});var Bl=["==","!=","===","!==","<>","<=>"],Or=["*","/","%"],sa=[">>","<<"];function Ul(n){return["block","program","namespace","class","interface","trait","traituse","declare"].includes(n.kind)}function Ml(n){var r=n.body;return r?(r.kind==="block"&&(r=r.children),r[0]):null}function Vn(n){var r=n.children||n.body||n.adaptations;return Array.isArray(r)?r:null}function Hl(n){var r=n.getParentNode();return r?Vn(r):null}function Lr(n){return n.length>0?n[n.length-1]:null}function ra(n){var r=n.getValue();if(r.kind==="program"){var a=Vn(r);return!(!a||a.length===0)&&a[0].kind==="inline"}if(r.kind==="switch"){if(!r.body)return!1;var l=Vn(r.body);if(l.length===0)return!1;var d=Y(l,1)[0];if(!d.body)return!1;var T=Vn(d.body);return T.length!==0&&T[0].kind==="inline"}var b=Ml(r);return!!b&&b.kind==="inline"}var Vl=["__construct","__destruct","__call","__callStatic","__get","__set","__isset","__unset","__sleep","__wakeup","__toString","__invoke","__set_state","__clone","__debugInfo"].reduce(function(n,r){return n[r.toLowerCase()]=r,n},{}),se={printNumber:function(n){return n.toLowerCase().replace(/^([+-]?[\d.]+e)(?:\+|(-))?0*(\d)/,"$1$2$3").replace(/^([+-]?[\d.]+)e[+-]?0+$/,"$1").replace(/^([+-])?\./,"$10.").replace(/(\.\d+?)0+(?=e|$)/,"$1").replace(/\.(?=e)/,"")},getPrecedence:na,isBitwiseOperator:function(n){return!!sa[n]||n==="|"||n==="^"||n==="&"},shouldFlatten:function(n,r){return na(r)===na(n)&&n!=="**"&&(!Bl.includes(n)||!Bl.includes(r))&&!(r==="%"&&Or.includes(n)||n==="%"&&Or.includes(r))&&(r===n||!Or.includes(r)||!Or.includes(n))&&(!sa.includes(n)||!sa.includes(r))},nodeHasStatement:Ul,getNodeListProperty:Vn,getParentNodeListProperty:Hl,getLast:Lr,getPenultimate:function(n){return n.length>1?n[n.length-2]:null},isLastStatement:function(n){var r=Hl(n);if(!r)return!0;var a=n.getValue();return r[r.length-1]===a},getBodyFirstChild:Ml,lineShouldEndWithSemicolon:function(n){var r=n.getValue(),a=n.getParentNode();if(!a)return!1;if(["for","foreach","while","do","if","switch"].includes(a.kind)&&r.kind!=="block"&&r.kind!=="if"&&(a.body===r||a.alternate===r))return!0;if(!Ul(a)||r.kind==="echo"&&r.shortForm)return!1;if(r.kind==="traituse")return!r.adaptations;if(r.kind==="method"&&r.isAbstract)return!0;if(r.kind==="method"){var l=n.getParentNode();if(l&&l.kind==="interface")return!0}return["expressionstatement","do","usegroup","classconstant","propertystatement","traitprecedence","traitalias","goto","constantstatement","global","static","echo","unset","return","break","continue","throw"].includes(r.kind)},fileShouldEndWithHardline:function(n){var r=n.getValue(),a=r.kind==="program",l=r.children&&Lr(r.children);if(!a||l&&["halt","inline"].includes(l.kind))return!1;if(l&&(l.kind==="declare"||l.kind==="namespace")){var d=l.children.length>0&&Lr(l.children);if(d&&["halt","inline"].includes(d.kind))return!1}return!0},maybeStripLeadingSlashFromUse:function(n){var r=n.replace(/^\\/,"");return r.indexOf("\\")!==-1?r:n},hasDanglingComments:function(n){return n.comments&&n.comments.some(function(r){return!r.leading&&!r.trailing})},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(r){return r.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(r){return r.trailing})},docShouldHaveTrailingNewline:function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,l=r.getNode(a),d=r.getNode(a+1),T=r.getNode(a+2);if(!d)return!1;if(T&&["call","new","echo"].includes(T.kind)&&!["call","array"].includes(d.kind)||d.kind==="parameter"){var b=T.arguments.length-1,_=T.arguments.indexOf(d);return _!==b}if(T&&T.kind==="for"){var S=T.init.indexOf(d);if(S!==-1)return S!==T.init.length-1;var O=T.test.indexOf(d);if(O!==-1)return O!==T.test.length-1;var E=T.increment.indexOf(d);if(E!==-1)return E!==T.increment.length-1}if(d.kind==="bin")return d.left===l||n(r,a+1);if(d.kind==="case"&&d.test===l)return!0;if(d.kind==="staticvariable"){var Vt=T.variables.length-1,Yt=T.variables.indexOf(d);return Yt!==Vt}if(d.kind==="entry"){if(d.key===l)return!0;var ae=T.items.length-1,ge=T.items.indexOf(d);return ge!==ae}if(["call","new"].includes(d.kind)){var wt=d.arguments.length-1,_e=d.arguments.indexOf(l);return _e!==wt}if(d.kind==="echo"){var ie=d.expressions.length-1,Fe=d.expressions.indexOf(l);return Fe!==ie}if(d.kind==="array"){var De=d.items.length-1,me=d.items.indexOf(l);return me!==De}return d.kind==="retif"&&n(r,a+1)},isLookupNode:function(n){return n.kind==="propertylookup"||n.kind==="staticlookup"||n.kind==="offsetlookup"},isFirstChildrenInlineNode:ra,shouldPrintHardLineAfterStartInControlStructure:function(n){var r=n.getValue();return!["try","catch"].includes(r.kind)&&ra(n)},shouldPrintHardLineBeforeEndInControlStructure:function(n){var r=n.getValue();if(["try","catch"].includes(r.kind))return!0;if(r.kind==="switch"){var a=Vn(r.body);if(a.length===0)return!0;var l=Lr(a);if(!l.body)return!0;var d=Vn(l.body);return d.length===0||d[0].kind!=="inline"}return!ra(n)},getAlignment:function(n){var r=n.split(`
`).pop();return r.length-r.trimLeft().length+1},isProgramLikeNode:function(n){return["program","declare","namespace"].includes(n.kind)},isReferenceLikeNode:function(n){return["name","parentreference","selfreference","staticreference"].includes(n.kind)},getNodeKindIncludingLogical:function(n){return n.kind==="bin"&&["||","&&"].includes(n.type)?"logical":n.kind},useDoubleQuote:function(n,r){if(n.isDoubleQuote===r.singleQuote){var a=n.raw.slice(n.raw[0]==="b"?2:1,-1).match(/\\([$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})|\r?\n|'|"|\$/);return n.isDoubleQuote?a:!a}return n.isDoubleQuote},hasEmptyBody:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"body",a=n.getValue();return a[r]&&a[r].children&&a[r].children.length===0&&(!a[r].comments||a[r].comments.length===0)},isNextLineEmptyAfterNamespace:function(n,r,a){var l=a(r);return l=Iy(n,l),l=Sy(n,l),Ay(n,l)},shouldPrintHardlineBeforeTrailingComma:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"||n.kind==="entry"&&(n.value.kind==="nowdoc"||n.value.kind==="encapsed"&&n.value.type==="heredoc")},isDocNode:function(n){return n.kind==="nowdoc"||n.kind==="encapsed"&&n.type==="heredoc"},getAncestorNode:function(n,r){var a=function(l,d){for(var T,b=[].concat(d),_=-1;T=l.getParentNode(++_);)if(b.indexOf(T.kind)!==-1)return _;return-1}(n,r);return a===-1?null:n.getParentNode(a)},getNextNode:function(n,r){var a=n.getParentNode(),l=Vn(a);if(!l)return null;var d=l.indexOf(r);return d===-1?null:a.children[d+1]},normalizeMagicMethodName:function(n){var r=n.toLowerCase();return Vl[r]?Vl[r]:n},isPreviousLineEmpty:function(n,r,a){return Ly(n,r,ia(a,"locStart"))},isNextLineEmpty:function(n,r,a){return Oy(n,r,ia(a,"locEnd"))},getNextNonSpaceNonCommentCharacterIndex:function(n,r,a){return Py(n,r,ia(a,"locEnd"))}},Rs=s.default.util,sn=Rs.addLeadingComment,vi=Rs.addDanglingComment,rn=Rs.addTrailingComment,Ry=Rs.skipNewline,Pr=Rs.hasNewline,wy=Rs.hasNewlineInRange,fs=s.default.doc.builders,Gn=fs.concat,Gl=fs.join,Fy=fs.indent,un=fs.hardline,ql=fs.cursor,Wl=fs.lineSuffix,By=fs.breakParent,ir=se.getNextNonSpaceNonCommentCharacterIndex,Uy=se.isNextLineEmpty,My=se.isPreviousLineEmpty,Hy=se.isLookupNode;function Dr(n,r){var a=n.children;a.length===0?vi(n,r):sn(a[0],r)}function oa(n,r){n.kind==="block"?Dr(n,r):sn(n,r)}function Yl(n,r,a,l,d,T){var b=ir(n,d,T),_=n.charAt(b);return r&&r.kind==="identifier"&&a&&(a.kind==="function"||a.kind==="method")&&_===")"?(rn(a,d),!0):!(!a||a.kind!=="function"&&a.kind!=="method"||!l||l.kind!=="block")&&(Dr(l,d),!0)}function aa(n,r,a,l,d,T){if(!a||a.kind!=="if"||!l)return!1;var b=ir(n,d,T);return n.charAt(b)===")"?(rn(r,d),!0):r===a.body&&l===a.alternate?(vi(a,d),!0):l.kind==="if"?(oa(l.body,d),!0):a.body===l&&(sn(l,d),!0)}function ha(n,r,a){if(n&&["class","interface","trait"].includes(n.kind)){if(r&&n.extends){if(Array.isArray(n.extends)){if(n.extends.some(function(l){if(r&&r===l)return vi(r,a),!0}))return!0}else if(r===n.extends)return vi(r,a),!0}if(r&&n.implements&&n.implements.some(function(l){if(r&&r===l)return vi(r,a),!0}))return!0;if(!(n.body&&n.body.length>0))return vi(n,a),!0}return!!(r&&r.kind==="class"&&r.isAnonymous&&r.leadingComments&&a.kind==="commentblock")}function la(n,r,a,l,d){if(r&&(r.kind==="function"||r.kind==="method")){for(var T=0,b=0;b<r.arguments.length;b++)T=d.locEnd(r.arguments[b])>T?d.locEnd(r.arguments[b]):T;var _=r.body&&d.locStart(l)>T&&d.locEnd(l)<d.locStart(r.body),S=ir(n,l,d);if(r.type&&_&&n.charAt(S)!==")")return d.locEnd(l)<d.locStart(r.type)?(vi(r.type,l),!0):(rn(r.type,l),!0)}return!1}function ua(n,r,a,l,d){return!(!a||!["function","method","parameter"].includes(a.kind))&&r.kind==="typereference"&&l.kind==="identifier"&&(rn(r,d),!0)}function Ql(n,r){return!(!n||!["label","goto"].includes(n.kind))&&(rn(n,r),!0)}function ca(n,r,a,l){return a&&a.kind==="inline"?(a.leadingComments||(a.leadingComments=[]),a.leadingComments.includes(l)||a.leadingComments.push(l),!0):!(n||a||!r||r.kind!=="inline")&&(vi(r,l),!0)}function jl(n,r,a){return!(!n||n.kind!=="try"||!r)&&(r.kind==="block"?(Dr(r,a),!0):r.kind==="try"?(oa(r.always,a),!0):r.kind==="catch"&&(oa(r.body,a),!0))}function Kl(n,r,a,l){return a||r||!n||n.kind!=="namespace"||n.withBrackets?!(r||!n||n.kind!=="namespace"||n.withBrackets)&&(vi(n,l),!0):(rn(n,l),!0)}function zl(n,r,a,l){return!(!n||n.kind!=="declare")&&(!r||r.kind!=="noop")&&(a&&n.directives[0]!==a?!(!a||!r)&&(sn(a,l),!0):(n.mode==="none"?rn(n,l):vi(n,l),!0))}function fa(n,r,a,l,d,T){if(!a||a.kind!=="while"||!l)return!1;var b=ir(n,d,T);return n.charAt(b)===")"?(rn(r,d),!0):l.kind==="block"&&(Dr(l,d),!0)}function da(n,r){return n.getValue().printed=!0,r.printer.printComment(n,r)}function $l(n,r,a){return n.getNode()===r.cursorNode&&n.getValue()?Gn([ql,a,ql]):a}var te={handleOwnLineComment:function(n,r,a){var l=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return Yl(r,l,d,T,n,a)||function(b,_,S){return b&&Hy(b)&&_&&["identifier","variable","encapsed"].includes(_.kind)?(sn(b,S),!0):!1}(d,T,n)||aa(r,l,d,T,n,a)||fa(r,l,d,T,n,a)||jl(d,T,n)||ha(d,T,n)||ua(r,l,d,T,n)||la(r,d,T,n,a)||function(b,_,S,O){return!S&&b&&(b.kind==="for"||b.kind==="foreach")?(b.body&&b.body.kind!=="block"?sn(S,O):sn(b,O),!0):!1}(d,0,T,n)||ca(d,l,T,n)||zl(d,l,T,n)},handleEndOfLineComment:function(n,r,a){var l=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return function(b,_,S,O,E){return!_&&!O&&S&&S.kind==="array"?(rn(S,E),!0):!1}(0,l,d,T,n)||function(b,_,S,O,E){return S&&S.kind==="return"&&!S.expr?(rn(S,E),!0):!1}(0,0,d,0,n)||Yl(r,l,d,T,n,a)||function(b,_,S,O,E,Vt){var Yt=_&&!wy(E,Vt.locEnd(_),Vt.locStart(O));return(!_||!Yt)&&b&&b.kind==="retif"&&S?(sn(S,O),!0):!1}(d,l,T,n,r,a)||aa(r,l,d,T,n,a)||fa(r,l,d,T,n,a)||jl(d,T,n)||ha(d,T,n)||ua(r,l,d,T,n)||la(r,d,T,n,a)||function(b,_){return b&&b.kind==="entry"?(sn(b,_),!0):!1}(d,n)||function(b,_,S){return _&&_.kind==="call"&&b&&_.what===b&&_.arguments.length>0?(sn(_.arguments[0],S),!0):!1}(l,d,n)||function(b,_,S){if(b&&b.kind==="assign"&&_){var O=b.loc.start.offset+b.loc.source.indexOf("=");if(S.loc.start.offset>O)return sn(_,S),!0}return!1}(d,T,n)||ca(d,l,T,n)||Kl(d,l,T,n)||zl(d,l,T,n)||Ql(d,n)},handleRemainingComment:function(n,r,a){var l=n.precedingNode,d=n.enclosingNode,T=n.followingNode;return aa(r,l,d,T,n,a)||fa(r,l,d,T,n,a)||function(b,_,S,O){var E=ir(b,S,O);return b.charAt(E)!==")"?!1:_&&(_.kind==="function"||_.kind==="closure"||_.kind==="method"||_.kind==="call"||_.kind==="new")&&_.arguments.length===0?(vi(_,S),!0):!1}(r,d,n,a)||ha(d,T,n)||function(b,_,S){return b&&b.kind==="traituse"&&b.adaptations&&!b.adaptations.length?(vi(b,S),!0):!1}(d,0,n)||ua(r,l,d,T,n)||la(r,d,T,n,a)||Ql(d,n)||function(b,_,S,O){return _&&_.kind==="halt"?(vi(_,O),!0):b&&b.kind==="halt"?(vi(b,O),!0):!1}(l,d,0,n)||function(b,_){return b&&(b.kind==="continue"||b.kind==="break")&&!b.label?(rn(b,_),!0):!1}(d,n)||ca(d,l,T,n)||Kl(d,l,T,n)},getCommentChildNodes:function(n){return typeof n!="object"?[]:function(r){return Object.keys(r).filter(function(a){return a!=="kind"&&a!=="loc"&&a!=="errors"&&a!=="extra"&&a!=="comments"&&a!=="leadingComments"&&a!=="enclosingNode"&&a!=="precedingNode"&&a!=="followingNode"}).map(function(a){return r[a]})}(n)},canAttachComment:function(n){return n.kind&&n.kind!=="commentblock"&&n.kind!=="commentline"},isBlockComment:function(n){return n.kind==="commentblock"},printDanglingComments:function(n,r,a,l){var d=[],T=n.getValue();return T&&T.comments?(n.each(function(b){var _=b.getValue();!_||_.leading||_.trailing||l&&!l(_)||d.push(da(b,r))},"comments"),d.length===0?"":a?Gl(un,d):Fy(Gn([un,Gl(un,d)]))):""},hasLeadingComment:function(n){return n.comments&&n.comments.some(function(r){return r.leading})},hasTrailingComment:function(n){return n.comments&&n.comments.some(function(r){return r.trailing})},hasLeadingOwnLineComment:function(n,r,a){return r.comments&&r.comments.some(function(l){return l.leading&&Pr(n,a.locEnd(l))})},printComments:function(n,r){var a=[];return n.forEach(function(l,d,T){l.printed=!0;var b=T.length===d+1;a.push(l.value),b||a.push(un),Uy(r.originalText,l,r)&&!b&&a.push(un)}),Gn(a)},printAllComments:function(n,r,a,l){var d=n.getValue(),T=r(n),b=d&&d.comments;if(!b||b.length===0)return $l(n,a,T);var _=[],S=[l?";":"",T];return n.each(function(O){var E=O.getValue(),Vt=E.leading,Yt=E.trailing;if(Vt){var ae=function(wt,_e,ie){var Fe=wt.getValue(),De=da(wt,ie);if(!De)return"";var me=ie.printer.isBlockComment&&ie.printer.isBlockComment(Fe);return Gn(me?[De,Pr(ie.originalText,ie.locEnd(Fe))?un:" "]:[De,un])}(O,0,a);if(!ae)return;_.push(ae);var ge=a.originalText;Pr(ge,Ry(ge,a.locEnd(E)))&&_.push(un)}else Yt&&S.push(function(wt,_e,ie){var Fe=wt.getValue(),De=da(wt,ie);if(!De)return"";var me=ie.printer.isBlockComment&&ie.printer.isBlockComment(Fe);if(Pr(ie.originalText,ie.locStart(Fe),{backwards:!0})){var Zt=My(ie.originalText,Fe,ie);return Wl(Gn([un,Zt?un:"",De]))}return Gn(me?[" ",De]:[Wl(Gn([" ",De])),me?"":By])}(O,0,a))},"comments"),$l(n,a,Gn(_.concat(S)))}};function Jl(){}Jl.strictEqual=function(){};var Vy=Jl,Xl=se.getPrecedence,Gy=se.shouldFlatten,qy=se.isBitwiseOperator,Zl=function(n){var r=n.getParentNode();if(!r)return!1;var a=n.getName(),l=n.getNode();if(["program","expressionstatement","namespace","declare","block","include","print","return","echo"].includes(r.kind))return!1;switch(l.kind){case"pre":case"post":if(r.kind==="unary")return l.kind==="pre"&&(l.type==="+"&&r.type==="+"||l.type==="-"&&r.type==="-");case"unary":switch(r.kind){case"unary":return l.type===r.type&&(l.type==="+"||l.type==="-");case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;case"bin":return r.type==="**"&&a==="left";default:return!1}case"bin":switch(r.kind){case"assign":case"retif":return["and","xor","or"].includes(l.type);case"silent":case"cast":return l.parenthesizedExpression;case"pre":case"post":case"unary":return!0;case"call":case"propertylookup":case"staticlookup":case"offsetlookup":return a==="what"&&r.what===l;case"bin":var d=r.type,T=Xl(d),b=l.type,_=Xl(b);return T>_||d==="||"&&b==="&&"||(T===_&&a==="right"?(Vy.strictEqual(r.right,l),!0):T===_&&!Gy(d,b)||(T<_&&b==="%"?d==="+"||d==="-":!!qy(d)));default:return!1}case"propertylookup":case"staticlookup":switch(r.kind){case"call":return a==="what"&&r.what===l&&l.parenthesizedExpression;default:return!1}case"clone":case"new":switch(r.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;default:return!1}case"yield":switch(r.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;case"retif":return r.test===l;default:return!(!l.key&&!l.value)}case"assign":return(r.kind!=="for"||!r.init.includes(l)&&!r.increment.includes(l))&&r.kind!=="assign"&&r.kind!=="static"&&!["if","do","while","foreach","switch"].includes(r.kind)&&r.kind!=="silent"&&r.kind!=="call";case"retif":switch(r.kind){case"cast":return!0;case"unary":case"bin":case"retif":return!(a==="test"&&!r.trueExpr);case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return a==="what"&&r.what===l;default:return!1}case"closure":switch(r.kind){case"call":return a==="what"&&r.what===l;case"propertylookup":return!0;default:return!1}case"silence":case"cast":return l.parenthesizedExpression;case"string":case"array":switch(r.kind){case"propertylookup":case"staticlookup":case"offsetlookup":case"call":return(!["string","array"].includes(l.kind)||r.kind!=="offsetlookup")&&a==="what"&&r.what===l;default:return!1}case"print":case"include":return r.kind==="bin"}return!1},gi=s.default.doc.builders,tu=gi.breakParent,v=gi.concat,Je=gi.join,pe=gi.line,Wy=gi.lineSuffix,vt=gi.group,ws=gi.conditionalGroup,St=gi.indent,Yy=gi.dedent,qn=gi.ifBreak,pt=gi.hardline,Xt=gi.softline,Fs=gi.literalline,Qy=gi.align,jy=gi.dedentToRoot,Wn=s.default.doc.utils.willBreak,pa=s.default.util,Ky=pa.isNextLineEmptyAfterIndex,zy=pa.hasNewline,eu=pa.hasNewlineInRange,Yn=se.getLast,$y=se.getPenultimate,iu=se.isLastStatement,Jy=se.lineShouldEndWithSemicolon,Xy=se.printNumber,nu=se.shouldFlatten,su=se.maybeStripLeadingSlashFromUse,Zy=se.fileShouldEndWithHardline,Pi=se.hasDanglingComments,ru=se.hasLeadingComment,ou=se.hasTrailingComment,au=se.docShouldHaveTrailingNewline,yi=se.isLookupNode,_a=se.isFirstChildrenInlineNode,tC=se.shouldPrintHardLineAfterStartInControlStructure,eC=se.shouldPrintHardLineBeforeEndInControlStructure,iC=se.getAlignment,ma=se.isProgramLikeNode,Bs=se.getNodeKindIncludingLogical,nC=se.useDoubleQuote,hu=se.hasEmptyBody,sC=se.isNextLineEmptyAfterNamespace,lu=se.shouldPrintHardlineBeforeTrailingComma,Ta=se.isDocNode,ga=se.getAncestorNode,ka=se.isReferenceLikeNode,rC=se.getNextNode,oC=se.normalizeMagicMethodName,aC=se.getNextNonSpaceNonCommentCharacterIndex,ds=se.isNextLineEmpty;function Us(n,r){return parseFloat(n)>=parseFloat(r)}function Rr(n,r){return!!n.trailingCommaPHP&&Us(n.phpVersion,r)}function xa(n){switch(n.braceStyle){case"1tbs":return!1;case"psr-2":default:return!0}}function Ea(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return v([l?"?":"","->",n.call(a,"offset")])}function uu(n,r,a){return Ea(n,r,a,!0)}function cu(n,r,a){var l=n.getValue(),d=!["variable","identifier"].includes(l.offset.kind);return v(["::",d?"{":"",n.call(a,"offset"),d?"}":""])}function fu(n,r,a){var l=n.getValue(),d=l.offset&&l.offset.kind==="number"||ga(n,"encapsed");return v(["[",l.offset?vt(v([St(v([d?"":Xt,n.call(a,"offset")])),d?"":Xt])):"","]"])}function du(n){return n.kind==="array"&&(n.items.length>0||n.comments)||n.kind==="function"||n.kind==="method"||n.kind==="closure"}function hC(n){var r=Yn(n),a=$y(n);return!ru(r)&&!ou(r)&&du(r)&&(!a||a.kind!==r.kind)}function lC(n){if(n.length!==2)return!1;var r=Y(n,2),a=r[0],l=r[1];return!(a.comments&&a.comments.length||a.kind!=="function"&&a.kind!=="method"&&a.kind!=="closure"||l.kind==="retif"||du(l))}function cn(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"arguments",d=n.getValue()[l];if(d.length===0)return v(["(",te.printDanglingComments(n,r,!0),")"]);var T=!1,b=!1,_=d.length-1,S=n.map(function(me,Zt){var Ce=me.getNode(),Me=[a(me)];return Zt===_||(ds(r.originalText,Ce,r)?(Zt===0&&(b=!0),T=!0,Me.push(",",pt,pt)):Me.push(",",pe)),v(Me)},l),O=n.getValue(),E=Yn(d),Vt=Rr(r,"7.3")&&["call","new","unset","isset"].includes(O.kind)||Rr(r,"8.0")&&["function","closure","method","arrowfunc"].includes(O.kind)?St(v([E&&lu(E)?pt:"",","])):"";function Yt(){return vt(v(["(",St(v([pe,v(S)])),Vt,pe,")"]),{shouldBreak:!0})}var ae=lC(d),ge=hC(d);if(ae||ge){var wt,_e=(ae?S.slice(1).some(Wn):S.slice(0,-1).some(Wn))||T,ie=0;n.each(function(me){ae&&ie===0&&(wt=[v([me.call(function(Zt){return a(Zt,{expandFirstArg:!0})}),S.length>1?",":"",b?pt:pe,b?pt:""])].concat(S.slice(1))),ge&&ie===d.length-1&&(wt=S.slice(0,-1).concat(me.call(function(Zt){return a(Zt,{expandLastArg:!0})}))),ie++},l);var Fe=S.some(Wn),De=v(["(",v(wt),")"]);return v([Fe?tu:"",ws([Fe?qn(Yt(),De):De,v(ae?["(",vt(wt[0],{shouldBreak:!0}),v(wt.slice(1)),")"]:["(",v(S.slice(0,-1)),vt(Yn(wt),{shouldBreak:!0}),")"]),vt(v(["(",St(v([pe,v(S)])),qn(Vt),pe,")"]),{shouldBreak:!0})],{shouldBreak:_e})])}return vt(v(["(",St(v([Xt,v(S)])),qn(Vt),Xt,")"]),{shouldBreak:S.some(Wn)||T})}function pu(n){return n.kind==="array"&&n.items.length!==0}function nr(n){return n.right.kind==="array"&&n.right.items.length!==0}function _u(n,r,a){var l=n.getValue();switch(l.kind){case"propertylookup":return Ea(n,r,a);case"nullsafepropertylookup":return uu(n,r,a);case"staticlookup":return cu(n,0,a);case"offsetlookup":return fu(n,0,a);default:return"Have not implemented lookup kind ".concat(l.kind," yet.")}}function mu(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.opening,l=a===void 0||a;if(n.type==="heredoc")return l?"<<<".concat(n.label):n.label;var d={string:'"',shell:"`"};return d[n.type]?d[n.type]:"Unimplemented encapsed type ".concat(n.type)}function uC(n,r,a){var l=[],d=[];return n.each(function(T){l.push(v(d)),l.push(vt(a(T))),d=[",",pe],T.getValue()&&ds(r.originalText,T.getValue(),r)&&d.push(Xt)},"items"),v(l)}function cC(n,r){if(r.length===0)return n;var a=0;return r.reduce(function(l,d){var T=d.start,b=d.end,_=d.alignment,S=d.before,O=d.after,E=v([S||"",v(n.slice(T,b)),O||""]),Vt=l.concat(n.slice(a,T),_?jy(vt(v([Qy(new Array(_).join(" "),E)]))):vt(E),b===n.length-1?n.slice(b):"");return a=b,Vt},[])}function sr(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"children",d=n.getValue(),T=n.getParentNode(),b=-1,_=[],S=[];n.map(function(me,Zt){var Ce=me.getValue(),Me=Ce.kind==="inline",jn=a(me),ki=d[l],Di=ki[Zt+1],ps=!iu(me)&&!Me&&(Di&&Di.kind==="case"?!_a(n):Di&&Di.kind!=="inline"),_s=v([jn,ps?pt:"",ps&&ds(r.originalText,Ce,r)?pt:""]),Yi=Zt===0,Cn=ki.length-1===Zt,Ri=d.kind==="block"&&T&&["function","closure","method","try","catch"].includes(T.kind),ms=Ri&&Yi?"":" ";if(Me||!Me&&Cn&&b>=0){var wi=b;if(Me&&(b=Zt),Me&&!Yi||!Me&&Cn){var Kn=(Me?wi:b)+1,Qi=Cn&&!Me?Zt+1:Zt,Nn=ki[Me?wi:b],Hr=Nn?iC(Nn.raw):"",rr=Qi-Kn>1,or=rr?Ri&&!Nn||ma(d)&&Kn===0?"":pt:"",zn=rr&&Ce.kind!=="halt"?Ri&&Cn?"":pt:"";rr&&(ms=""),S.push({start:Kn,end:Qi,alignment:Hr,before:or,after:zn})}}if(Me){var Ts=Di&&Di.kind==="echo"&&Di.shortForm?"<?=":"<?php",Vr=Ce.leadingComments&&Ce.leadingComments.length?v([Yi&&d.kind!=="namespace"&&!Ri?"<?php":"",d.kind!=="namespace"&&Ri?"":pt,te.printComments(Ce.leadingComments,r),pt,"?>"]):ma(d)&&Yi&&d.kind!=="namespace"?"":v([ms,"?>"]),bn=n.getNode(Zt+1),gs=bn&&bn.children&&bn.children.length,Na=Ce.comments&&Ce.comments.length?v([Ts,pt,gs?te.printComments(Ce.comments,r):"",pt,gs?"?>":""]):ma(d)&&Cn?"":v([Ts," "]);_s=v([Vr,_s,Na])}_.push(_s)},l);var O=cC(_,S);if(d.kind==="program"&&!d.extra.parseAsEval){var E=[],Vt=Y(d.children,1),Yt=Vt[0],ae=!Yt||Yt.kind!=="inline";if(ae){var ge=r.originalText.trim().match(/^<\?(php|=)(\s+)?\S/),wt=v([ge&&ge[2]&&ge[2].includes(`
`)?v([pt,ge[2].split(`
`).length>2?pt:""]):" ",d.comments?te.printComments(d.comments,r):""]),_e=Yt&&Yt.kind==="echo"&&Yt.shortForm;E.push(v([_e?"<?=":"<?php",wt]))}E.push(v(O));var ie=r.originalText.trim().endsWith("?>");if(ie){var Fe=Yn(d.children),De=Fe?v([eu(r.originalText.trimEnd(),r.locEnd(Fe),r.locEnd(d))?pt:" ",ds(r.originalText,Fe,r)?pt:""]):d.comments?pt:"";E.push(Wy(v([De,"?>"])))}return v(E)}return v(O)}function Tu(n,r,a,l){return v(n.map(function(d){var T=[];return T.push(a(d)),iu(d)||(T.push(pt),ds(r.originalText,d.getValue(),r)&&T.push(pt)),v(T)},l))}function Wi(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"extends",d=arguments.length>4&&arguments[4]!==void 0?arguments[4]:" ",T=arguments.length>5&&arguments[5]!==void 0?arguments[5]:" ",b=n.getValue(),_=Pi(b[l])?v([pt,n.call(function(O){return te.printDanglingComments(O,r,!0)},l),pt]):d,S=Array.isArray(b[l])?vt(v([Je(",",n.map(function(O){var E=a(O);return Pi(O.getValue())?v([pt,te.printDanglingComments(O,r,!0),pt,E]):v([T,E])},l))])):v([T,n.call(a,l)]);return St(v([_,l,Wn(_)?St(S):S]))}function Qn(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},d=l.inline,T=d!==void 0&&d,b=[];return n.getValue().attrGroups?(n.each(function(_){var S=["#["];b.length>0&&b.push(T?" ":pt),S.push(qn(Xt)),_.each(function(O){var E=O.getValue();S.length>2&&S.push(",",qn(Xt," "));var Vt=[E.name];E.args.length>0&&Vt.push(cn(O,r,a,"args")),S.push(vt(v(Vt)))},"attrs"),b.push(vt(v([St(v(S)),qn(Xt),"]",Xt,T?" ":""])))},"attrGroups"),b.length===0?[]:[v([].concat(b,[T?"":pt]))]):[]}function yn(n,r,a){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"body",d=n.getValue();if(!d[l])return";";var T=n.call(a,l);return v([d.shortForm?":":" {",St(v([d[l].kind!=="block"||d[l].children&&d[l].children.length>0||d[l].comments&&d[l].comments.length>0?v([tC(n)?d.kind==="switch"?" ":"":pt,T]):""])),d.kind==="if"&&l==="body"?"":v([eC(n)?pt:"",d.shortForm?v(["end",d.kind,";"]):"}"])])}function wr(n,r,a,l,d,T,b){if(!l)return r;var _=va(n,l,d,T,b);return vt(v([r,a,_]))}function va(n,r,a,l,d){var T=l?"&":"";if(te.hasLeadingOwnLineComment(d.originalText,r,d))return St(v([pt,T,a]));var b=r.kind==="cast"?r.expr:r;return b.kind==="bin"&&!nr(b)||b.kind==="retif"&&(!b.trueExpr&&!pu(b.falseExpr)||b.test.kind==="bin"&&!nr(b.test))||(n.kind==="variable"||n.kind==="string"||yi(n))&&(b.kind==="string"&&!gu(b)||function _(S){return!!yi(S)&&(!(S.what.kind!=="variable"&&!ka(S.what))||_(S.what))}(b))?vt(St(v([pe,T,a]))):v([" ",T,a])}function gu(n){return n.raw.includes(`
`)}function Fr(n,r,a){return(n.kind==="string"||n.kind==="encapsed"&&(n.type==="string"||n.type==="shell"))&&gu(n)&&!zy(r,a.locStart(n),{backwards:!0})}var fC=function(n,r,a){var l=n.getValue();if(!l)return"";if(typeof l=="string")return l;var d=function(_,S,O){var E=_.getValue();switch(E.kind){case"program":return vt(v([sr(_,S,O),te.printDanglingComments(_,S,!0,function(st){return!st.printed})]));case"expressionstatement":return _.call(O,"expression");case"block":return v([sr(_,S,O),te.printDanglingComments(_,S,!0)]);case"declare":var Vt=function(st){return Je(", ",st.map(function(It){return v([O(It)])},"directives"))};if(["block","short"].includes(E.mode))return v(["declare(",Vt(_),")",E.mode==="block"?" {":":",E.children.length>0?St(v([pt,sr(_,S,O)])):"",te.printDanglingComments(_,S),pt,E.mode==="block"?"}":"enddeclare;"]);var Yt=rC(_,E);return v(["declare(",Vt(_),")",Yt&&Yt.kind==="inline"?"":";"]);case"declaredirective":return v([_.call(O,"key"),"=",_.call(O,"value")]);case"namespace":return v(["namespace ",E.name&&typeof E.name=="string"?v([E.name,E.withBrackets?" ":""]):"",E.withBrackets?"{":";",Pi(E)?v([" ",te.printDanglingComments(_,S,!0)]):"",E.children.length>0?E.withBrackets?St(v([pt,sr(_,S,O)])):v([E.children[0].kind==="inline"?"":v([pt,sC(S.originalText,E,S.locStart)?pt:""]),sr(_,S,O)]):"",E.withBrackets?v([pt,"}"]):""]);case"usegroup":return vt(v(["use ",E.type?v([E.type," "]):"",St(v([E.name?v([su(E.name),"\\{",Xt]):"",Je(v([",",pe]),_.map(function(st){return v([O(st)])},"items"))])),E.name?v([qn(Rr(S,"7.2")?",":""),Xt,"}"]):""]));case"useitem":return v([E.type?v([E.type," "]):"",su(E.name),Pi(E)?v([" ",te.printDanglingComments(_,S,!0)]):"",E.alias?v([" as ",_.call(O,"alias")]):""]);case"class":case"interface":case"trait":return function(st,It,jt){var ut=st.getValue(),Ne=ut.kind==="class"&&ut.isAnonymous,ri=Qn(st,It,jt,{inline:Ne}),Be=Ne?[]:dt(ri);ut.isFinal&&Be.push("final "),ut.isAbstract&&Be.push("abstract "),Be.push(Ne?"":ut.kind),ut.name&&Be.push(" ",st.call(jt,"name")),ut.extends&&ut.implements?Be.push(ws([v([Wi(st,It,jt,"extends"),Wi(st,It,jt,"implements")]),v([Wi(st,It,jt,"extends"),Wi(st,It,jt,"implements"," ",pt)]),v([Wi(st,It,jt,"extends",pt," "),Wi(st,It,jt,"implements",pt,ut.implements.length>1?pt:" ")])],{shouldBreak:Pi(ut.extends)})):(ut.extends&&Be.push(ws([Wi(st,It,jt,"extends"),Wi(st,It,jt,"extends"," ",pt),Wi(st,It,jt,"extends",pt,ut.extends.length>1?pt:" ")])),ut.implements&&Be.push(ws([Wi(st,It,jt,"implements"),Wi(st,It,jt,"implements"," ",pt),Wi(st,It,jt,"implements",pt,ut.implements.length>1?pt:" ")])));var le=vt(v([vt(v(Be)),xa(It)?Ne?pe:pt:" "])),Oe=ut.body&&ut.body.length===0&&!Pi(ut),oi=v(["{",St(v([Oe?"":pt,Tu(st,It,jt,"body")])),te.printDanglingComments(st,It,!0),Ne&&Oe?Xt:pt,"}"]);return v([le,oi])}(_,S,O);case"traitprecedence":return v([_.call(O,"trait"),"::",_.call(O,"method")," insteadof ",Je(", ",_.map(O,"instead"))]);case"traitalias":return v([E.trait?v([_.call(O,"trait"),"::"]):"",E.method?_.call(O,"method"):""," as ",Je(" ",[].concat(dt(E.visibility?[E.visibility]:[]),dt(E.as?[_.call(O,"as")]:[])))]);case"traituse":return vt(v(["use ",St(vt(Je(v([",",pe]),_.map(O,"traits")))),E.adaptations?v([" {",E.adaptations.length>0?v([St(v([pt,Tu(_,S,O,"adaptations")])),pt]):Pi(E)?v([pe,te.printDanglingComments(_,S,!0),pe]):"","}"]):""]));case"function":case"closure":case"method":return function(st,It,jt){var ut=st.getValue(),Ne=dt(Qn(st,It,jt,{inline:ut.kind==="closure"}));ut.isFinal&&Ne.push("final "),ut.isAbstract&&Ne.push("abstract "),ut.visibility&&Ne.push(ut.visibility," "),ut.isStatic&&Ne.push("static "),Ne.push("function "),ut.byref&&Ne.push("&"),ut.name&&Ne.push(st.call(jt,"name")),Ne.push(cn(st,It,jt)),ut.uses&&ut.uses.length>0&&Ne.push(vt(v([" use ",cn(st,It,jt,"uses")]))),ut.type&&Ne.push(v([": ",Pi(ut.type)?v([st.call(function(Oe){return te.printDanglingComments(Oe,It,!0)},"type")," "]):"",ut.nullable?"?":"",st.call(jt,"type")]));var ri=v(Ne);if(!ut.body)return ri;var Be=ut.kind==="closure",le=v(["{",St(v([hu(st)?"":pt,st.call(jt,"body")])),Be&&hu(st)?"":pt,"}"]);return Be?v([ri," ",le]):ut.arguments.length===0?v([ri,xa(It)?pt:" ",le]):Ne.some(Wn)?v([ri," ",le]):ws([v([ri,xa(It)?pt:" ",le]),v([ri," ",le])])}(_,S,O);case"arrowfunc":return v([].concat(dt(Qn(_,S,O,{inline:!0})),[E.isStatic?"static ":"","fn",cn(_,S,O),E.type?v([": ",E.nullable?"?":"",_.call(O,"type")]):""," => ",_.call(O,"body")]));case"parameter":var ae="";E.flags===1?ae="public ":E.flags===2?ae="protected ":E.flags===4&&(ae="private ");var ge=v([].concat(dt(Qn(_,S,O,{inline:!0})),[ae,E.nullable?"?":"",E.type?v([_.call(O,"type")," "]):"",E.byref?"&":"",E.variadic?"...":"","$",_.call(O,"name")]));return E.value?vt(v([ge,Pi(E)?" ":"",te.printDanglingComments(_,S,!0),v([" =",va(E.name,E.value,_.call(O,"value"),!1,S)])])):ge;case"variadic":return v(["...",_.call(O,"what")]);case"property":return vt(v([E.type?v([E.nullable?"?":"",_.call(O,"type")," "]):"","$",_.call(O,"name"),E.value?v([" =",va(E.name,E.value,_.call(O,"value"),!1,S)]):""]));case"propertystatement":var wt=[];_.map(function(st){return wt.push.apply(wt,dt(Qn(st,S,O)))},"properties");var _e,ie=_.map(function(st){return O(st)},"properties"),Fe=E.properties.some(function(st){return st.value});ie.length!==1||E.properties[0].comments?ie.length>0&&(_e=St(ie[0])):_e=Y(ie,1)[0];var De=E.visibility||E.visibility===null;return vt(v([].concat(wt,[De?v([E.visibility===null?"var":E.visibility,""]):"",E.isStatic?v([De?" ":"","static"]):"",_e?v([" ",_e]):"",St(v(ie.slice(1).map(function(st){return v([",",Fe?pt:pe,st])})))])));case"if":var me=[],Zt=yn(_,S,O,"body"),Ce=vt(v(["if (",vt(v([St(v([Xt,_.call(O,"test")])),Xt])),")",Zt]));if(me.push(Ce,_a(_)||!E.body?"":pt),E.alternate){me.push(E.shortForm?"":"} ");var Me=ou(E.body)&&E.body.comments.some(function(st){return st.trailing&&!te.isBlockComment(st)})||function(st){if(!st.comments)return!1;var It=Yn(st.comments.filter(function(jt){return!jt.leading&&!jt.trailing}));return It&&!te.isBlockComment(It)}(E),jn=!Me;me.push(jn?"":pt),Pi(E)&&me.push(ds(S.originalText,E.body,S)?pt:"",te.printDanglingComments(_,S,!0),Me?pt:" "),me.push("else",vt(E.alternate.kind==="if"?_.call(O,"alternate"):yn(_,S,O,"alternate")))}else me.push(E.body?E.shortForm?"endif;":"}":"");return v(me);case"do":return v(["do",yn(_,S,O,"body")," while (",vt(v([St(v([Xt,_.call(O,"test")])),Xt])),")"]);case"while":case"switch":return vt(v([E.kind," (",vt(v([St(v([Xt,_.call(O,"test")])),Xt])),")",yn(_,S,O,"body")]));case"for":var ki=yn(_,S,O,"body"),Di=te.printDanglingComments(_,S,!0),ps=Di?v([Di,Xt]):"";return E.init.length||E.test.length||E.increment.length?v([ps,vt(v(["for (",vt(v([St(v([Xt,vt(v([Je(v([",",pe]),_.map(O,"init"))])),";",pe,vt(v([Je(v([",",pe]),_.map(O,"test"))])),";",pe,vt(Je(v([",",pe]),_.map(O,"increment")))])),Xt])),")",ki]))]):v([ps,vt(v(["for (;;)",ki]))]);case"foreach":var _s=yn(_,S,O,"body"),Yi=te.printDanglingComments(_,S,!0),Cn=Yi?v([Yi,Xt]):"";return v([Cn,vt(v(["foreach (",vt(v([St(v([Xt,_.call(O,"source"),pe,"as ",vt(E.key?St(Je(v([" =>",pe]),[_.call(O,"key"),_.call(O,"value")])):_.call(O,"value"))])),Xt])),")",_s]))]);case"try":var Ri=[];return Ri.push("try",yn(_,S,O,"body")),E.catches&&Ri.push(v(_.map(O,"catches"))),E.always&&Ri.push(" finally",yn(_,S,O,"always")),v(Ri);case"catch":return v([" catch",E.what?v([" (",Je(" | ",_.map(O,"what")),E.variable?v([" ",_.call(O,"variable")]):"",")"]):"",yn(_,S,O,"body")]);case"case":return v([E.test?v(["case ",E.test.comments?St(_.call(O,"test")):_.call(O,"test"),":"]):"default:",E.body&&E.body.children&&E.body.children.length?St(v([_a(_)?"":pt,_.call(O,"body")])):""]);case"break":case"continue":return E.level&&E.level.kind==="number"&&E.level.value!=="1"?v(["".concat(E.kind," "),_.call(O,"level")]):E.kind;case"call":return E.arguments.length===1&&Fr(E.arguments[0],S.originalText,S)?v([_.call(O,"what"),v(["(",Je(", ",_.map(O,"arguments")),")"])]):yi(E.what)?function(st,It,jt){var ut=[];function Ne(ee){var Le=It.originalText,Xe=aC(Le,ee,It);return Le.charAt(Xe)===")"?Ky(Le,Xe+1,It):ds(Le,ee,It)}function ri(ee){var Le=ee.getValue();if(Le.kind!=="call"||!yi(Le.what)&&Le.what.kind!=="call")if(yi(Le)){var Xe=null;Xe=Le.kind==="propertylookup"?Ea(ee,It,jt):Le.kind==="nullsafepropertylookup"?uu(ee,It,jt):Le.kind==="staticlookup"?cu(ee,It,jt):fu(ee,It,jt),ut.unshift({node:Le,needsParens:Zl(ee),printed:te.printAllComments(ee,function(){return Xe},It)}),ee.call(function(lr){return ri(lr)},"what")}else ut.unshift({node:Le,printed:ee.call(jt)});else ut.unshift({node:Le,printed:v([te.printAllComments(ee,function(){return v([cn(ee,It,jt)])},It),Ne(Le)?pt:""])}),ee.call(function(lr){return ri(lr)},"what")}var Be=st.getValue();ut.unshift({node:Be,printed:cn(st,It,jt)}),st.call(function(ee){return ri(ee)},"what");for(var le=0;le<ut.length;++le)ut[le].node.kind==="call"&&ut[le-1]&&["propertylookup","staticlookup"].includes(ut[le-1].node.kind)&&ut[le-1].needsParens&&(ut[0].printed=v(["(",ut[0].printed]),ut[le-1].printed=v([ut[le-1].printed,")"]));for(var Oe=[],oi=[ut[0]],Ae=1;Ae<ut.length&&(ut[Ae].node.kind==="call"||yi(ut[Ae].node)&&ut[Ae].node.offset&&ut[Ae].node.offset.kind==="number");++Ae)oi.push(ut[Ae]);if(ut[0].node.kind!=="call")for(;Ae+1<ut.length&&yi(ut[Ae].node)&&yi(ut[Ae+1].node);++Ae)oi.push(ut[Ae]);Oe.push(oi),oi=[];for(var Vs=!1;Ae<ut.length;++Ae){if(Vs&&yi(ut[Ae].node)){if(ut[Ae].node.kind==="offsetlookup"&&ut[Ae].node.offset&&ut[Ae].node.offset.kind==="number"){oi.push(ut[Ae]);continue}Oe.push(oi),oi=[],Vs=!1}ut[Ae].node.kind==="call"&&(Vs=!0),oi.push(ut[Ae]),ut[Ae].node.comments&&te.hasTrailingComment(ut[Ae].node)&&(Oe.push(oi),oi=[],Vs=!1)}oi.length>0&&Oe.push(oi);function La(ee){var Le=ee[1].length&&ee[1][0].node.kind==="offsetlookup";if(ee[0].length===1){var Xe=ee[0][0].node;return Xe.kind==="variable"&&(Xe.name==="this"||Pa&&lr(Xe.name))||ka(Xe)}function lr(cN){return cN.length<It.tabWidth}var Ra=Yn(ee[0]).node;return yi(Ra)&&(Ra.offset.kind==="identifier"||Ra.offset.kind==="variable")&&Le}var Pa=st.getParentNode().kind==="expressionstatement",$r=Oe.length>=2&&!Oe[1][0].node.comments&&La(Oe);function Jr(ee){for(var Le=[],Xe=0;Xe<ee.length;Xe++)ee[Xe+1]&&ee[Xe+1].needsParens?(Le.push("(",ee[Xe].printed,ee[Xe+1].printed,")"),Xe++):Le.push(ee[Xe].printed);return v(Le)}function hN(ee){return ee.length===0?"":St(vt(v([pt,Je(pt,ee.map(Jr))])))}var nc=Oe.map(Jr),Da=v(nc),Xr=$r?3:2,sc=Oe.slice(0,Xr).reduce(function(ee,Le){return ee.concat(Le)},[]),rc=sc.slice(1,-1).some(function(ee){return te.hasLeadingComment(ee.node)})||sc.slice(0,-1).some(function(ee){return te.hasTrailingComment(ee.node)})||Oe[Xr]&&te.hasLeadingComment(Oe[Xr][0].node),lN=ga(st,"encapsed");if(Oe.length<=Xr&&!rc||lN)return vt(Da);var oc=Yn($r?Oe.slice(1,2)[0]:Oe[0]).node,ac=oc.kind!=="call"&&Ne(oc),hc=v([Jr(Oe[0]),$r?v(Oe.slice(1,2).map(Jr)):"",ac?pt:"",hN(Oe.slice($r?2:1))]),uN=ut.filter(function(ee){return ee.node.kind==="call"}).length;return rc||uN>=3||nc.slice(0,-1).some(Wn)?vt(hc):v([Wn(Da)||ac?tu:"",ws([Da,hc])])}(_,S,O):v([_.call(O,"what"),cn(_,S,O)]);case"new":var ms=E.what&&E.what.kind==="class"&&E.what.isAnonymous;if(!ms&&E.arguments.length===1&&Fr(E.arguments[0],S.originalText,S))return v(["new "].concat(dt(_.call(Qn,"what")),[_.call(O,"what"),"(",Je(", ",_.map(O,"arguments")),")"]));var wi=[];if(wi.push("new "),ms)wi.push.apply(wi,[E.what.leadingComments&&E.what.leadingComments[0].kind==="commentblock"?v([te.printComments(E.what.leadingComments,S)," "]):""].concat(dt(_.call(function(st,It,jt){return Qn(st,It,jt,{inline:!0})},"what")),["class",E.arguments.length>0?v([" ",cn(_,S,O)]):"",vt(_.call(O,"what"))]));else{var Kn=v([_.call(O,"what"),cn(_,S,O)]);wi.push(ru(E.what)?St(Kn):Kn)}return v(wi);case"clone":return v(["clone ",E.what.comments?St(_.call(O,"what")):_.call(O,"what")]);case"propertylookup":case"nullsafepropertylookup":case"staticlookup":case"offsetlookup":var Qi,Nn=_.getParentNode(),Hr=0;do Qi=_.getParentNode(Hr),Hr++;while(Qi&&yi(Qi));var rr=ga(_,"encapsed")||Qi&&(Qi.kind==="new"||Qi.kind==="assign"&&Qi.left.kind!=="variable")||E.kind==="offsetlookup"||(ka(E.what)||E.what.kind==="variable")&&["identifier","variable","encapsedpart"].includes(E.offset.kind)&&Nn&&!yi(Nn);return v([_.call(O,"what"),rr?_u(_,S,O):vt(St(v([Xt,_u(_,S,O)])))]);case"exit":return vt(v([E.useDie?"die":"exit","(",E.expression?Fr(E.expression,S.originalText,S)?_.call(O,"expression"):v([St(v([Xt,_.call(O,"expression")])),Xt]):te.printDanglingComments(_,S),")"]));case"global":return vt(v(["global ",St(v([Je(v([",",pe]),_.map(O,"items"))]))]));case"include":return v([E.require?"require":"include",E.once?"_once":""," ",E.target.comments?St(_.call(O,"target")):_.call(O,"target")]);case"label":return v([_.call(O,"name"),":"]);case"goto":return v(["goto ",_.call(O,"label")]);case"throw":return v(["throw ",E.what.comments?St(_.call(O,"what")):_.call(O,"what")]);case"silent":return v(["@",_.call(O,"expr")]);case"halt":return v([Pi(E)?v([te.printDanglingComments(_,S,!0),pt]):"","__halt_compiler();",E.after]);case"eval":return vt(v(["eval(",Fr(E.source,S.originalText,S)?_.call(O,"source"):v([St(v([Xt,_.call(O,"source")])),Xt]),")"]));case"echo":var or,zn=_.map(function(st){return O(st)},"expressions");return zn.length!==1||E.expressions[0].comments?zn.length>0&&(or=Ta(E.expressions[0])||E.expressions[0].comments?St(zn[0]):Yy(zn[0])):or=Y(zn,1)[0],vt(v([E.shortForm?"":"echo ",or||"",St(v(zn.slice(1).map(function(st){return v([",",pe,st])})))]));case"print":return v(["print ",E.expression.comments?St(_.call(O,"expression")):_.call(O,"expression")]);case"return":var Ts=[];if(Ts.push("return"),E.expr){var Vr=_.call(O,"expr");Ts.push(" ",E.expr.comments?St(Vr):Vr)}return Pi(E)&&Ts.push(" ",te.printDanglingComments(_,S,!0)),v(Ts);case"isset":case"unset":return vt(v([E.kind,cn(_,S,O,"variables")]));case"empty":return vt(v(["empty(",St(v([Xt,_.call(O,"expression")])),Xt,")"]));case"variable":var bn=_.getParentNode(),gs=_.getParentNode(1),Na=bn.kind==="assign"?"":E.byref?"&":"",WC=bn.kind==="encapsedpart"&&bn.syntax==="simple"&&bn.curly||gs&&bn.kind==="offsetlookup"&&gs.kind==="encapsedpart"&&gs.syntax==="simple"&&gs.curly?"":"$",YC=E.curly?"{":"",QC=E.curly?"}":"";return v([Na,WC,YC,_.call(O,"name"),QC]);case"constantstatement":case"classconstant":var Gr,jC=Qn(_,S,O),ar=_.map(function(st){return O(st)},"constants");return ar.length!==1||E.constants[0].comments?ar.length>0&&(Gr=St(ar[0])):Gr=Y(ar,1)[0],vt(v([].concat(dt(jC),[E.visibility?v([E.visibility," "]):"","const",Gr?v([" ",Gr]):"",St(v(ar.slice(1).map(function(st){return v([",",pt,st])})))])));case"constant":return wr(E.name,_.call(O,"name")," =",E.value,_.call(O,"value"),!1,S);case"static":var qr,hr=_.map(function(st){return O(st)},"variables"),KC=E.variables.some(function(st){return st.defaultValue});return hr.length!==1||E.variables[0].comments?hr.length>0&&(qr=St(hr[0])):qr=Y(hr,1)[0],vt(v(["static",qr?v([" ",qr]):"",St(v(hr.slice(1).map(function(st){return v([",",KC?pt:pe,st])})))]));case"staticvariable":return wr(E.variable,_.call(O,"variable")," =",E.defaultValue,_.call(O,"defaultValue"),!1,S);case"list":case"array":var Vu=E.kind==="array"&&Us(S.phpVersion,"5.4")||E.kind==="list"&&(E.shortForm||Us(S.phpVersion,"7.1")),ba=Vu?"[":v([E.kind,"("]),Aa=Vu?"]":")";if(E.items.length===0)return Pi(E)?vt(v([ba,te.printDanglingComments(_,S),Xt,Aa])):v([ba,Aa]);var Wr=Yn(E.items),Gu=Wr&&Wr.kind==="noop",Yr=Y(E.items.filter(function(st){return st.kind!=="noop"}).sort(function(st,It){return S.locStart(st)-S.locStart(It)}),1)[0],zC=!(!Yr||!Yr.key)&&Yr&&eu(S.originalText,S.locStart(E),S.locStart(Yr));return vt(v([ba,St(v([Xt,uC(_,S,O)])),Gu?",":"",qn(!Gu&&Rr(S,"5.0")?v([Wr&&lu(Wr)?pt:"",","]):""),te.printDanglingComments(_,S,!0),Xt,Aa]),{shouldBreak:zC});case"entry":var qu=E.byRef?"&":"",$C=E.unpack?"...":"";return E.key?wr(E.key,_.call(O,"key")," =>",E.value,_.call(O,"value"),qu,S):v([qu,$C,_.call(O,"value")]);case"yield":var Wu=v([E.key?v([_.call(O,"key")," => "]):"",_.call(O,"value")]);return v(["yield",E.key||E.value?" ":"",E.value&&E.value.comments?St(Wu):Wu]);case"yieldfrom":return v(["yield from ",E.value.comments?St(_.call(O,"value")):_.call(O,"value")]);case"unary":return v([E.type,_.call(O,"what")]);case"pre":return v([E.type+E.type,_.call(O,"what")]);case"post":return v([_.call(O,"what"),E.type+E.type]);case"cast":return v(["(",E.type,") ",E.expr.comments?St(_.call(O,"expr")):_.call(O,"expr")]);case"assignref":case"assign":var Yu=E.kind==="assignref";return wr(E.left,_.call(O,"left"),v([" ",Yu?"=":E.operator]),E.right,_.call(O,"right"),Yu,S);case"bin":var ji=_.getParentNode(),Qu=_.getParentNode(1),ju=E!==ji.body&&(ji.kind==="if"||ji.kind==="while"||ji.kind==="switch"||ji.kind==="do"),Hs=function st(It,jt,ut,Ne,ri){var Be=[],le=It.getValue();if(le.kind==="bin"){nu(le.type,le.left.type)?Be=Be.concat(It.call(function(Pa){return st(Pa,jt,ut,!0,ri)},"left")):Be.push(It.call(jt,"left"));var Oe=nr(le),oi=v(Oe?[le.type," ",It.call(jt,"right")]:[le.type,pe,It.call(jt,"right")]),Ae=It.getParentNode(),Vs=!(ri&&["||","&&"].includes(le.type))&&Bs(Ae)!==Bs(le)&&Bs(le.left)!==Bs(le)&&Bs(le.right)!==Bs(le),La=Ta(le.left)||le.left.kind==="bin"&&Ta(le.left.right);Be.push(La?"":" ",Vs?vt(oi):oi),Ne&&le.comments&&(Be=te.printAllComments(It,function(){return v(Be)},ut))}else Be.push(It.call(jt));return Be}(_,O,S,!1,ju);if(ju)return v(Hs);if(ji.kind==="unary"||yi(ji)&&ji.kind!=="offsetlookup")return vt(v([St(v([Xt,v(Hs)])),Xt]));var JC=E!==ji.body&&ji.kind==="for"||ji.kind==="retif"&&Qu&&Qu.kind!=="return",XC=["assign","property","constant","staticvariable","entry"].includes(ji.kind),ZC=E.left.kind==="bin"&&nu(E.type,E.left.type);if(JC||nr(E)&&!ZC||!nr(E)&&XC)return vt(v(Hs));var tN=v(Hs.slice(1));return vt(v([Hs.length>0?Hs[0]:"",St(tN)]));case"retif":var Qr,jr=[],Kr=_.getParentNode(),Ku=0;do Qr=_.getParentNode(Ku),Ku++;while(Qr&&Qr.kind==="retif");var zu=Qr||Kr,$u=E.falseExpr.kind==="bin"?St(_.call(O,"falseExpr")):_.call(O,"falseExpr"),eN=v([E.trueExpr?pe:" ","?",E.trueExpr?v([" ",E.trueExpr.kind==="bin"?St(_.call(O,"trueExpr")):_.call(O,"trueExpr"),pe]):"",":",E.trueExpr?v([" ",$u]):v([pu(E.falseExpr)?" ":pe,$u])]);jr.push(eN);var Ju=function(st){return Kr===zu?vt(st):st},Xu=_.getParentNode(1),ks=Kr.kind==="cast"&&Xu?Xu:Kr,iN=["propertylookup","staticlookup"].includes(ks.kind),Ia=_.call(O,"test");if(!E.trueExpr){var Zu=v([Ia,ks.kind==="bin"||["print","echo","return","include"].includes(zu.kind)?St(v(jr)):v(jr)]);return ks.kind==="call"&&ks.what===E||ks.kind==="unary"||yi(ks)&&ks.kind!=="offsetlookup"?vt(v([St(v([Xt,Zu])),Xt])):Ju(Zu)}return Ju(v([E.test.kind==="retif"?St(Ia):Ia,St(v(jr)),iN?Xt:""]));case"boolean":return E.value?"true":"false";case"number":return Xy(E.value);case"string":if(_.getParentNode().kind==="encapsedpart"){var tc=_.getParentNode(1),Sa=0,nN=Us(S.phpVersion,"7.3"),ec=Fs;if(tc.type==="heredoc"){ec=nN?pt:Fs;var zr=tc.raw.split(/\r?\n/g);(Sa=zr[zr.length-1].search(/\S/))===-1&&(Sa=zr[zr.length-2].search(/\S/))}return Je(ec,E.raw.split(/\r?\n/g).map(function(st,It){return It>0||E.loc.start.column===0?st.substring(Sa):st}))}var ic=nC(E,S)?'"':"'",on=E.raw;return E.raw[0]==="b"&&(on=on.slice(1)),['"',"'"].includes(on[0])&&(on=on.substr(1)),['"',"'"].includes(on[on.length-1])&&(on=on.substr(0,on.length-1)),v([E.raw[0]==="b"?"b":"",ic,Je(Fs,on.split(/\r?\n/g)),ic]);case"uniontype":return vt(v(_.map(function(st,It){return v(It===0?[_.call(O)]:["|",_.call(O)])},"types")));case"encapsedpart":var sN=E.syntax==="simple"&&E.curly||E.syntax==="complex"?v([E.curly?"$":"","{"]):"",rN=E.syntax==="simple"&&E.curly||E.syntax==="complex"?"}":"";return v([sN,_.call(O,"expression"),rN]);case"encapsed":switch(E.type){case"string":case"shell":case"heredoc":var oN=Us(S.phpVersion,"7.3")?pt:Fs;return v([mu(E),E.type==="heredoc"?oN:"",v(_.map(O,"value")),mu(E,{opening:!1}),E.type==="heredoc"&&au(_)?pt:""]);default:return"Have not implemented kind ".concat(E.type," yet.")}case"inline":return Je(Fs,E.raw.replace("___PSEUDO_INLINE_PLACEHOLDER___","").split(/\r?\n/g));case"magic":return E.value;case"nowdoc":var Oa=Us(S.phpVersion,"7.3")?pt:Fs;return v(["<<<'",E.label,"'",Oa,Je(Oa,E.value.split(/\r?\n/g)),Oa,E.label,au(_)?pt:""]);case"name":return v([E.resolution==="rn"?"namespace\\":"",E.name]);case"literal":return _.call(O,"value");case"parentreference":return"parent";case"selfreference":return"self";case"staticreference":return"static";case"typereference":return E.name;case"nullkeyword":return"null";case"identifier":return _.getParentNode().kind==="method"&&(E.name=oC(E.name)),_.call(O,"name");case"match":var aN=_.map(function(st,It){var jt=st.getValue().conds===null?"default":v(st.map(function(Ne,ri){return vt(v(ri>0?[",",pe,O(Ne)]:[O(Ne)]))},"conds")),ut=st.call(O,"body");return v(It>0?[", ",pe,jt," => ",ut]:[pe,jt," => ",ut])},"arms");return vt(v(["match (",vt(v([Xt,St(v([_.call(O,"cond")])),Xt])),") {",St(v(aN))," ",Xt,"}"]));case"noop":return E.comments?te.printComments(_.getValue().comments,S):"";case"namedargument":return v([E.name,": ",_.call(O,"value")]);case"error":default:return"Have not implemented kind ".concat(E.kind," yet.")}}(n,r,a),T=[],b=Zl(n);return b&&T.unshift("("),T.push(d),b&&T.push(")"),Jy(n)&&T.push(";"),Zy(n)&&T.push(pt),v(T)},dC=function(n,r){if(["loc","range","raw","comments","leadingComments","trailingComments","parenthesizedExpression","parent","prev","start","end","tokens","errors","extra"].forEach(function(l){delete r[l]}),n.kind==="string"&&delete r.isDoubleQuote,["array","list"].includes(n.kind)&&delete r.shortForm,n.kind==="inline"){if(n.value.includes("___PSEUDO_INLINE_PLACEHOLDER___"))return null;r.value=r.value.replace(/\r\n?|\n/g,"")}if((n.kind==="continue"||n.kind==="break")&&n.level){var a=r.level;a.kind==="number"&&(r.level=a.value==="1"?null:a)}if(n.kind==="block"&&n.children.length===1&&n.children[0].kind==="block")for(;r.children[0].kind==="block";)r.children=r.children[0].children;if(n.kind==="number"&&(r.value=se.printNumber(n.value)),["foreach","for","if","while","do"].includes(n.kind)&&(n.body&&n.body.kind!=="block"?r.body={kind:"block",children:[r.body]}:r.body=r.body?r.body:null,n.alternate&&n.alternate.kind!=="block"?r.alternate={kind:"block",children:[r.alternate]}:r.alternate=r.alternate?r.alternate:null),n.kind==="usegroup"&&typeof n.name=="string"&&(r.name=r.name.replace(/^\\/,"")),n.kind==="useitem"&&(r.name=r.name.replace(/^\\/,"")),n.kind==="method"&&n.name.kind==="identifier"&&(r.name.name=se.normalizeMagicMethodName(r.name.name)),n.kind==="noop")return null},ya="PHP",pC={phpVersion:{since:"0.13.0",category:ya,type:"choice",default:"7.0",description:"Minimum target PHP version.",choices:[{value:"5.0"},{value:"5.1"},{value:"5.2"},{value:"5.3"},{value:"5.4"},{value:"5.5"},{value:"5.6"},{value:"7.0"},{value:"7.1"},{value:"7.2"},{value:"7.3"},{value:"7.4"},{value:"8.0"}]},trailingCommaPHP:{since:"0.0.0",category:ya,type:"boolean",default:!0,description:"Print trailing commas wherever possible when multi-line."},braceStyle:{since:"0.10.0",category:ya,type:"choice",default:"psr-2",description:"Print one space or newline for code blocks (classes and functions).",choices:[{value:"psr-2",description:"Use PSR-2 brace style."},{value:"1tbs",description:"Use 1tbs brace style."}]}},_C=function(n,r,a,l){if(a!=="length"&&a!=="prototype"&&a!=="arguments"&&a!=="caller"){var d=Object.getOwnPropertyDescriptor(n,a),T=Object.getOwnPropertyDescriptor(r,a);!mC(d,T)&&l||Object.defineProperty(n,a,T)}},mC=function(n,r){return n===void 0||n.configurable||n.writable===r.writable&&n.enumerable===r.enumerable&&n.configurable===r.configurable&&(n.writable||n.value===r.value)},TC=function(n,r){var a=Object.getPrototypeOf(r);a!==Object.getPrototypeOf(n)&&Object.setPrototypeOf(n,a)},gC=function(n,r){return"/* Wrapped ".concat(n,`*/
`).concat(r)},kC=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),xC=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),EC=function(n,r,a){var l=a===""?"":"with ".concat(a.trim(),"() "),d=gC.bind(null,l,r.toString());Object.defineProperty(d,"name",xC),Object.defineProperty(n,"toString",B(B({},kC),{},{value:d}))},vC=function(n,r){var a,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=l.ignoreNonConfigurable,T=d!==void 0&&d,b=n.name,_=Bt(Reflect.ownKeys(r));try{for(_.s();!(a=_.n()).done;){var S=a.value;_C(n,r,S,T)}}catch(O){_.e(O)}finally{_.f()}return TC(n,r),EC(n,r,b),n},Br=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ku(n){return n&&n.default||n}var Ur,yC=function(){var n={};return n.promise=new Promise(function(r,a){n.resolve=r,n.reject=a}),n},xu=function(n,r){return n(r={exports:{}},r.exports),r.exports}(function(n,r){var a=Br&&Br.__awaiter||function(b,_,S,O){return new(S||(S=Promise))(function(E,Vt){function Yt(wt){try{ge(O.next(wt))}catch(_e){Vt(_e)}}function ae(wt){try{ge(O.throw(wt))}catch(_e){Vt(_e)}}function ge(wt){wt.done?E(wt.value):new S(function(_e){_e(wt.value)}).then(Yt,ae)}ge((O=O.apply(b,_||[])).next())})},l=Br&&Br.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(r,"__esModule",{value:!0});var d=l(yC);function T(b){var _,S,O,E=this,Vt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"maxAge",Yt=function(){return a(E,void 0,void 0,regeneratorRuntime.mark(function wt(){var _e,ie,Fe,De,me=this;return regeneratorRuntime.wrap(function(Zt){for(;;)switch(Zt.prev=Zt.next){case 0:if(_===void 0){Zt.next=2;break}return Zt.abrupt("return");case 2:_e=function(Ce){return a(me,void 0,void 0,regeneratorRuntime.mark(function Me(){var jn;return regeneratorRuntime.wrap(function(ki){for(;;)switch(ki.prev=ki.next){case 0:if(O=d.default(),!((jn=Ce[1][Vt]-Date.now())<=0)){ki.next=6;break}return b.delete(Ce[0]),O.resolve(),ki.abrupt("return");case 6:return _=Ce[0],typeof(S=setTimeout(function(){b.delete(Ce[0]),O&&O.resolve()},jn)).unref=="function"&&S.unref(),ki.abrupt("return",O.promise);case 10:case"end":return ki.stop()}},Me)}))},Zt.prev=3,ie=Bt(b),Zt.prev=5,ie.s();case 7:if((Fe=ie.n()).done){Zt.next=13;break}return De=Fe.value,Zt.next=11,_e(De);case 11:Zt.next=7;break;case 13:Zt.next=18;break;case 15:Zt.prev=15,Zt.t0=Zt.catch(5),ie.e(Zt.t0);case 18:return Zt.prev=18,ie.f(),Zt.finish(18);case 21:Zt.next=25;break;case 23:Zt.prev=23,Zt.t1=Zt.catch(3);case 25:_=void 0;case 26:case"end":return Zt.stop()}},wt,null,[[3,23],[5,15,18,21]])}))},ae=function(){_=void 0,S!==void 0&&(clearTimeout(S),S=void 0),O!==void 0&&(O.reject(void 0),O=void 0)},ge=b.set.bind(b);return b.set=function(wt,_e){b.has(wt)&&b.delete(wt);var ie=ge(wt,_e);return _&&_===wt&&ae(),Yt(),ie},Yt(),b}r.default=T,n.exports=T,n.exports.default=T});(Ur=xu)&&Ur.__esModule&&Object.prototype.hasOwnProperty.call(Ur,"default")&&Ur.default;var CC=xu,Ca=new WeakMap,Eu=new WeakMap,Mr=function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=r.cacheKey,l=r.cache,d=l===void 0?new Map:l,T=r.maxAge;typeof T=="number"&&CC(d);var b=function(){for(var _=arguments.length,S=new Array(_),O=0;O<_;O++)S[O]=arguments[O];var E=a?a(S):S[0],Vt=d.get(E);if(Vt)return Vt.data;var Yt=n.apply(this,S);return d.set(E,{data:Yt,maxAge:T?Date.now()+T:Number.POSITIVE_INFINITY}),Yt};return vC(b,n,{ignoreNonConfigurable:!0}),Eu.set(b,d),b};Mr.decorator=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return function(r,a,l){var d=r[a];if(typeof d!="function")throw new TypeError("The decorated value must be a function");delete l.value,delete l.writable,l.get=function(){if(!Ca.has(this)){var T=Mr(d,n);return Ca.set(this,T),T}return Ca.get(this)}}},Mr.clear=function(n){var r=Eu.get(n);if(!r)throw new TypeError("Can't clear a function that was not memoized!");if(typeof r.clear!="function")throw new TypeError("The cache Map can't be cleared!");r.clear()};var vu=/@prettier|@format/,yu=Mr(function(n){var r=wl(n),a=Y(r.children,1)[0],l=Y(r.comments.filter(function(d){return d.kind==="commentblock"}),1)[0];if(a&&l&&l.loc.start.line<a.loc.start.line)return l}),NC=function(n){if(!vu.test(n))return!1;var r=yu(n);if(r){var a=r.value;return vu.test(a)}return!1},bC=function(n){var r=yu(n);if(r){var a=r.loc,l=a.start.offset,d=a.end.offset,T=n.substring(0,l),b=n.substring(d);return"".concat(T).concat(function(Vt,Yt){var ae=Vt.split(/\r?\n/g);if(ae.length===1){var ge=Y(/\/*\*\*(.*)\*\//.exec(ae[0]),2)[1];ae=["/**"," * ".concat(ge.trim())," */"]}var wt=ae.findIndex(function(_e){return/@\S/.test(_e)})||1;return ae.splice(wt,0," * @format"),ae.join(function(_e){var ie=_e.indexOf(`
`);return ie>=0&&_e.charAt(ie-1)==="\r"?`\r
`:`
`}(Yt))}(r.value,n)).concat(b)}var _="<?php";if(!n.startsWith(_))return n;var S=_.length,O=n.substring(0,S),E=n.substring(S);return"".concat(O,`
/** 
 * @format 
 */
`).concat(E)},Cu="programming",Nu="text.html.php",bu="application/x-httpd-php",Au="#4F5D95",Iu=[".php",".aw",".ctp",".fcgi",".inc",".php3",".php4",".php5",".phps",".phpt"],Su=[".php",".php_cs",".php_cs.dist","Phakefile"],Ou=["php"],Lu=["inc"],AC={name:"PHP",type:Cu,tmScope:Nu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:bu,color:Au,extensions:Iu,filenames:Su,interpreters:Ou,aliases:Lu,languageId:272},IC=Object.freeze({__proto__:null,name:"PHP",type:Cu,tmScope:Nu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:bu,color:Au,extensions:Iu,filenames:Su,interpreters:Ou,aliases:Lu,languageId:272,default:AC}),Pu="HTML+PHP",Du="markup",Ru="text.html.php",wu="HTML",Fu=[".phtml"],Bu="application/x-httpd-php",SC={name:Pu,type:Du,tmScope:Ru,group:wu,extensions:Fu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Bu,languageId:151},OC=Object.freeze({__proto__:null,name:Pu,type:Du,tmScope:Ru,group:wu,extensions:Fu,aceMode:"php",codemirrorMode:"php",codemirrorMimeType:Bu,languageId:151,default:SC}),LC=ku(IC),PC=ku(OC),Uu=s.default.doc.builders,DC=Uu.join,RC=Uu.hardline,wC=NC,FC=bC;function Mu(n,r){var a=r.extend,l=r.override,d={};for(var T in n)d[T==="languageId"?"linguistLanguageId":T]=n[T];if(a)for(var b in a)d[b]=(d[b]||[]).concat(a[b]);for(var _ in l)d[_]=l[_];return d}var BC=[Mu(LC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}}),Mu(PC,{override:{parsers:["php"],vscodeLanguageIds:["php"]}})],Hu=function(n){return function(r){return r.loc&&r.loc[n]&&r.loc[n].offset}},UC={php:{parse:wl,astFormat:"php",locStart:Hu("start"),locEnd:Hu("end"),hasPragma:wC}},Ms={languages:BC,printers:{php:{print:fC,insertPragma:FC,massageAstNode:dC,getCommentChildNodes:te.getCommentChildNodes,canAttachComment:te.canAttachComment,isBlockComment:te.isBlockComment,handleComments:{ownLine:te.handleOwnLineComment,endOfLine:te.handleEndOfLineComment,remaining:te.handleRemainingComment},willPrintOwnComments(n){var r=n.getValue();return r&&r.kind==="noop"},printComment(n){var r=n.getValue();switch(r.kind){case"commentblock":if(!r.value.includes(`
`))return r.value;var a=r.value.split(/\r?\n/g);return a.slice(1,a.length-1).every(function(l){return l.trim()[0]==="*"})?DC(RC,a.map(function(l,d){return(d>0?" ":"")+(d<a.length-1?l.trim():l.trimLeft())})):r.value;case"commentline":return r.value.trimRight();default:throw new Error("Not a comment: ".concat(JSON.stringify(r)))}},hasPrettierIgnore(n){var r=function(d){return d.value.includes("prettier-ignore")&&!d.value.includes("prettier-ignore-start")&&!d.value.includes("prettier-ignore-end")},a=n.getParentNode(),l=n.getNode();return l&&l.kind!=="classconstant"&&l.comments&&l.comments.length>0&&l.comments.some(r)||l&&l.kind==="constant"&&a&&a.kind==="classconstant"&&a.comments&&a.comments.length>0&&a.comments.some(r)}}},parsers:UC,options:pC,defaultOptions:{tabWidth:4}},MC=Ms.languages,HC=Ms.printers,VC=Ms.parsers,GC=Ms.options,qC=Ms.defaultOptions;i.default=Ms,i.defaultOptions=qC,i.languages=MC,i.options=GC,i.parsers=VC,i.printers=HC,Object.defineProperty(i,"__esModule",{value:!0})})});var af=V((of,th)=>{(function(i){if(typeof of=="object"&&typeof th<"u")th.exports=i();else if(typeof define=="function"&&define.amd)define([],i);else{var t;typeof window<"u"?t=window:typeof global<"u"?t=global:typeof self<"u"?t=self:t=this,t.jsonata=i()}})(function(){var i,t,e;return function(){function s(o,h,c){function u(x,M){if(!h[x]){if(!o[x]){var C=typeof require=="function"&&require;if(!M&&C)return C(x,!0);if(f)return f(x,!0);var y=new Error("Cannot find module '"+x+"'");throw y.code="MODULE_NOT_FOUND",y}var I=h[x]={exports:{}};o[x][0].call(I.exports,function(F){var $=o[x][1][F];return u($||F)},I,I.exports,s,o,h,c)}return h[x].exports}for(var f=typeof require=="function"&&require,k=0;k<c.length;k++)u(c[k]);return u}return s}()({1:[function(s,o,h){let c=s("./utils"),u=function(){"use strict";let f=c.stringToArray,k=["Zero","One","Two","Three","Four","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"],x=["Zeroth","First","Second","Third","Fourth","Fifth","Sixth","Seventh","Eighth","Ninth","Tenth","Eleventh","Twelfth","Thirteenth","Fourteenth","Fifteenth","Sixteenth","Seventeenth","Eighteenth","Nineteenth"],M=["Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety","Hundred"],C=["Thousand","Million","Billion","Trillion"];function y(U,W){var H=function(nt,K,Q){var q="";if(nt<=19)q=(K?" and ":"")+(Q?x[nt]:k[nt]);else if(nt<100){let Kt=Math.floor(nt/10),qt=nt%10;q=(K?" and ":"")+M[Kt-2],qt>0?q+="-"+H(qt,!1,Q):Q&&(q=q.substring(0,q.length-1)+"ieth")}else if(nt<1e3){let Kt=Math.floor(nt/100),qt=nt%100;q=(K?", ":"")+k[Kt]+" Hundred",qt>0?q+=H(qt,!0,Q):Q&&(q+="th")}else{var gt=Math.floor(Math.log10(nt)/3);gt>C.length&&(gt=C.length);let Kt=Math.pow(10,gt*3),qt=Math.floor(nt/Kt),Et=nt-qt*Kt;q=(K?", ":"")+H(qt,!1,!1)+" "+C[gt-1],Et>0?q+=H(Et,!0,Q):Q&&(q+="th")}return q},et=H(U,!1,W);return et}let I={};k.forEach(function(U,W){I[U.toLowerCase()]=W}),x.forEach(function(U,W){I[U.toLowerCase()]=W}),M.forEach(function(U,W){let H=U.toLowerCase();I[H]=(W+2)*10,I[H.substring(0,U.length-1)+"ieth"]=I[H]}),I.hundredth=100,C.forEach(function(U,W){let H=U.toLowerCase(),et=Math.pow(10,(W+1)*3);I[H]=et,I[H+"th"]=et});function F(U){let H=U.split(/,\s|\sand\s|[\s\\-]/).map(K=>I[K]),et=[0];return H.forEach(K=>{if(K<100){let Q=et.pop();Q>=1e3&&(et.push(Q),Q=0),et.push(Q+K)}else et.push(et.pop()*K)}),et.reduce((K,Q)=>K+Q,0)}let $=[[1e3,"m"],[900,"cm"],[500,"d"],[400,"cd"],[100,"c"],[90,"xc"],[50,"l"],[40,"xl"],[10,"x"],[9,"ix"],[5,"v"],[4,"iv"],[1,"i"]],ht={M:1e3,D:500,C:100,L:50,X:10,V:5,I:1};function ct(U){for(var W=0;W<$.length;W++){let H=$[W];if(U>=H[0])return H[1]+ct(U-H[0])}return""}function J(U){for(var W=0,H=1,et=U.length-1;et>=0;et--){let nt=U[et],K=ht[nt];K<H?W-=K:(H=K,W+=K)}return W}function z(U,W){for(var H=[],et=W.charCodeAt(0);U>0;)H.unshift(String.fromCharCode((U-1)%26+et)),U=Math.floor((U-1)/26);return H.join("")}function at(U,W){for(var H=W.charCodeAt(0),et=0,nt=0;nt<U.length;nt++)et+=(U.charCodeAt(U.length-nt-1)-H+1)*Math.pow(26,nt);return et}function B(U,W){if(typeof U>"u")return;U=Math.floor(U);let H=Bt(W);return rt(U,H)}let Y={DECIMAL:"decimal",LETTERS:"letters",ROMAN:"roman",WORDS:"words",SEQUENCE:"sequence"},dt={UPPER:"upper",LOWER:"lower",TITLE:"title"};function rt(U,W){let H,et=U<0;switch(U=Math.abs(U),W.primary){case Y.LETTERS:H=z(U,W.case===dt.UPPER?"A":"a");break;case Y.ROMAN:H=ct(U),W.case===dt.UPPER&&(H=H.toUpperCase());break;case Y.WORDS:H=y(U,W.ordinal),W.case===dt.UPPER?H=H.toUpperCase():W.case===dt.LOWER&&(H=H.toLowerCase());break;case Y.DECIMAL:H=""+U;var nt=W.mandatoryDigits-H.length;if(nt>0){var K=new Array(nt+1).join("0");H=K+H}if(W.zeroCode!==48&&(H=f(H).map(Kt=>String.fromCodePoint(Kt.codePointAt(0)+W.zeroCode-48)).join("")),W.regular){let Kt=Math.floor((H.length-1)/W.groupingSeparators.position);for(let qt=Kt;qt>0;qt--){let Et=H.length-qt*W.groupingSeparators.position;H=H.substr(0,Et)+W.groupingSeparators.character+H.substr(Et)}}else W.groupingSeparators.reverse().forEach(Kt=>{let qt=H.length-Kt.position;H=H.substr(0,qt)+Kt.character+H.substr(qt)});if(W.ordinal){var Q={1:"st",2:"nd",3:"rd"},q=H[H.length-1],gt=Q[q];(!gt||H.length>1&&H[H.length-2]==="1")&&(gt="th"),H=H+gt}break;case Y.SEQUENCE:throw{code:"D3130",value:W.token}}return et&&(H="-"+H),H}let Ft=[48,1632,1776,1984,2406,2534,2662,2790,2918,3046,3174,3302,3430,3558,3664,3792,3872,4160,4240,6112,6160,6470,6608,6784,6800,6992,7088,7232,7248,42528,43216,43264,43472,43504,43600,44016,65296];function Bt(U){let W={type:"integer",primary:Y.DECIMAL,case:dt.LOWER,ordinal:!1},H,et,nt=U.lastIndexOf(";");switch(nt===-1?H=U:(H=U.substring(0,nt),et=U.substring(nt+1),et[0]==="o"&&(W.ordinal=!0)),H){case"A":W.case=dt.UPPER;case"a":W.primary=Y.LETTERS;break;case"I":W.case=dt.UPPER;case"i":W.primary=Y.ROMAN;break;case"W":W.case=dt.UPPER,W.primary=Y.WORDS;break;case"Ww":W.case=dt.TITLE,W.primary=Y.WORDS;break;case"w":W.primary=Y.WORDS;break;default:{let K=null,Q=0,q=0,gt=[],Kt=0;if(f(H).map(Et=>Et.codePointAt(0)).reverse().forEach(Et=>{let Pt=!1;for(let zt=0;zt<Ft.length;zt++){let Ct=Ft[zt];if(Et>=Ct&&Et<=Ct+9){if(Pt=!0,Q++,Kt++,K===null)K=Ct;else if(Ct!==K)throw{code:"D3131"};break}}Pt||(Et===35?(Kt++,q++):gt.push({position:Kt,character:String.fromCodePoint(Et)}))}),Q>0){W.primary=Y.DECIMAL,W.zeroCode=K,W.mandatoryDigits=Q,W.optionalDigits=q;let Pt=function(zt){if(zt.length===0)return 0;let Ct=zt[0].character;for(let we=1;we<zt.length;we++)if(zt[we].character!==Ct)return 0;let Ye=zt.map(we=>we.position),Ti=function(we,Qe){return Qe===0?we:Ti(Qe,we%Qe)},Ze=Ye.reduce(Ti);for(let we=1;we<=Ye.length;we++)if(Ye.indexOf(we*Ze)===-1)return 0;return Ze}(gt);Pt>0?(W.regular=!0,W.groupingSeparators={position:Pt,character:gt[0].character}):(W.regular=!1,W.groupingSeparators=gt)}else W.primary=Y.SEQUENCE,W.token=H}}return W}let Dt={Y:"1",M:"1",D:"1",d:"1",F:"n",W:"1",w:"1",X:"1",x:"1",H:"1",h:"1",P:"n",m:"01",s:"01",f:"1",Z:"01:01",z:"01:01",C:"n",E:"n"};function Mt(U){var W=[];let H={type:"datetime",parts:W},et=function(Pt,zt){if(zt>Pt){let Ct=U.substring(Pt,zt);Ct=Ct.split("]]").join("]"),W.push({type:"literal",value:Ct})}};for(var nt=0,K=0;K<U.length;){if(U.charAt(K)==="["){if(U.charAt(K+1)==="["){et(nt,K),W.push({type:"literal",value:"["}),K+=2,nt=K;continue}if(et(nt,K),nt=K,K=U.indexOf("]",nt),K===-1)throw{code:"D3135"};let Pt=U.substring(nt+1,K);Pt=Pt.split(/\s+/).join("");var Q={type:"marker",component:Pt.charAt(0)},q=Pt.lastIndexOf(","),gt;if(q!==-1){let zt=Pt.substring(q+1),Ct=zt.indexOf("-"),Ye,Ti,Ze=function(Qe){if(!(typeof Qe>"u"||Qe==="*"))return parseInt(Qe)};Ct===-1?Ye=zt:(Ye=zt.substring(0,Ct),Ti=zt.substring(Ct+1));let we={min:Ze(Ye),max:Ze(Ti)};Q.width=we,gt=Pt.substring(1,q)}else gt=Pt.substring(1);if(gt.length===1)Q.presentation1=gt;else if(gt.length>1){var Kt=gt.charAt(gt.length-1);"atco".indexOf(Kt)!==-1?(Q.presentation2=Kt,Kt==="o"&&(Q.ordinal=!0),Q.presentation1=gt.substring(0,gt.length-1)):Q.presentation1=gt}else Q.presentation1=Dt[Q.component];if(typeof Q.presentation1>"u")throw{code:"D3132",value:Q.component};if(Q.presentation1[0]==="n")Q.names=dt.LOWER;else if(Q.presentation1[0]==="N")Q.presentation1[1]==="n"?Q.names=dt.TITLE:Q.names=dt.UPPER;else if("YMDdFWwXxHhmsf".indexOf(Q.component)!==-1){var qt=Q.presentation1;if(Q.presentation2&&(qt+=";"+Q.presentation2),Q.integerFormat=Bt(qt),Q.width&&Q.width.min!==void 0&&Q.integerFormat.mandatoryDigits<Q.width.min&&(Q.integerFormat.mandatoryDigits=Q.width.min),"YMD".indexOf(Q.component)!==-1)if(Q.n=-1,Q.width&&Q.width.max!==void 0)Q.n=Q.width.max,Q.integerFormat.mandatoryDigits=Q.n;else{var Et=Q.integerFormat.mandatoryDigits+Q.integerFormat.optionalDigits;Et>=2&&(Q.n=Et)}}(Q.component==="Z"||Q.component==="z")&&(Q.integerFormat=Bt(Q.presentation1)),W.push(Q),nt=K+1}K++}return et(nt,K),H}let kt=["","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],Rt=["January","February","March","April","May","June","July","August","September","October","November","December"],ue=1e3*60*60*24,Tt=function(U){let W=Date.UTC(U.year,U.month);var H=new Date(W).getUTCDay();return H===0&&(H=7),H>4?W+(8-H)*ue:W-(H-1)*ue},mt=function(U,W){return{year:U,month:W,nextMonth:function(){return W===11?mt(U+1,0):mt(U,W+1)},previousMonth:function(){return W===0?mt(U-1,11):mt(U,W-1)},nextYear:function(){return mt(U+1,W)},previousYear:function(){return mt(U-1,W)}}},ne=function(U,W){return(W-U)/(ue*7)+1},At=(U,W)=>{let H;switch(W){case"Y":H=U.getUTCFullYear();break;case"M":H=U.getUTCMonth()+1;break;case"D":H=U.getUTCDate();break;case"d":{let et=Date.UTC(U.getUTCFullYear(),U.getUTCMonth(),U.getUTCDate()),nt=Date.UTC(U.getUTCFullYear(),0);H=(et-nt)/ue+1;break}case"F":H=U.getUTCDay(),H===0&&(H=7);break;case"W":{let et=mt(U.getUTCFullYear(),0),nt=Tt(et),K=Date.UTC(et.year,U.getUTCMonth(),U.getUTCDate()),Q=ne(nt,K);if(Q>52){let q=Tt(et.nextYear());K>=q&&(Q=1)}else if(Q<1){let q=Tt(et.previousYear());Q=ne(q,K)}H=Math.floor(Q);break}case"w":{let et=mt(U.getUTCFullYear(),U.getUTCMonth()),nt=Tt(et),K=Date.UTC(et.year,et.month,U.getUTCDate()),Q=ne(nt,K);if(Q>4){let q=Tt(et.nextMonth());K>=q&&(Q=1)}else if(Q<1){let q=Tt(et.previousMonth());Q=ne(q,K)}H=Math.floor(Q);break}case"X":{let et=mt(U.getUTCFullYear(),0),nt=Tt(et),K=Tt(et.nextYear()),Q=U.getTime();Q<nt?H=et.year-1:Q>=K?H=et.year+1:H=et.year;break}case"x":{let et=mt(U.getUTCFullYear(),U.getUTCMonth()),nt=Tt(et),K=et.nextMonth(),Q=Tt(K),q=U.getTime();q<nt?H=et.previousMonth().month+1:q>=Q?H=K.month+1:H=et.month+1;break}case"H":H=U.getUTCHours();break;case"h":H=U.getUTCHours(),H=H%12,H===0&&(H=12);break;case"P":H=U.getUTCHours()>=12?"pm":"am";break;case"m":H=U.getUTCMinutes();break;case"s":H=U.getUTCSeconds();break;case"f":H=U.getUTCMilliseconds();break;case"Z":case"z":break;case"C":H="ISO";break;case"E":H="ISO";break}return H},Gt=null;function he(U,W,H){var et=0,nt=0;if(typeof H<"u"){let qt=parseInt(H);et=Math.floor(qt/100),nt=qt%100}var K=function(qt,Et){var Pt=At(qt,Et.component);if("YMDdFWwXxHhms".indexOf(Et.component)!==-1)if(Et.component==="Y"&&Et.n!==-1&&(Pt=Pt%Math.pow(10,Et.n)),Et.names){if(Et.component==="M"||Et.component==="x")Pt=Rt[Pt-1];else if(Et.component==="F")Pt=kt[Pt];else throw{code:"D3133",value:Et.component};Et.names===dt.UPPER?Pt=Pt.toUpperCase():Et.names===dt.LOWER&&(Pt=Pt.toLowerCase()),Et.width&&Pt.length>Et.width.max&&(Pt=Pt.substring(0,Et.width.max))}else Pt=rt(Pt,Et.integerFormat);else if(Et.component==="f")Pt=rt(Pt,Et.integerFormat);else if(Et.component==="Z"||Et.component==="z"){let zt=et*100+nt;if(Et.integerFormat.regular)Pt=rt(zt,Et.integerFormat);else{let Ct=Et.integerFormat.mandatoryDigits;if(Ct===1||Ct===2)Pt=rt(et,Et.integerFormat),nt!==0&&(Pt+=":"+B(nt,"00"));else if(Ct===3||Ct===4)Pt=rt(zt,Et.integerFormat);else throw{code:"D3134",value:Ct}}zt>=0&&(Pt="+"+Pt),Et.component==="z"&&(Pt="GMT"+Pt),zt===0&&Et.presentation2==="t"&&(Pt="Z")}return Pt};let Q;typeof W>"u"?(Gt===null&&(Gt=Mt("[Y0001]-[M01]-[D01]T[H01]:[m01]:[s01].[f001][Z01:01t]")),Q=Gt):Q=Mt(W);let q=(60*et+nt)*60*1e3,gt=new Date(U+q),Kt="";return Q.parts.forEach(function(qt){qt.type==="literal"?Kt+=qt.value:Kt+=K(gt,qt)}),Kt}function A(U){var W={};if(U.type==="datetime")W.type="datetime",W.parts=U.parts.map(function(H){var et={};if(H.type==="literal")et.regex=H.value.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");else if(H.component==="Z"||H.component==="z"){let K;Array.isArray(H.integerFormat.groupingSeparators)||(K=H.integerFormat.groupingSeparators),et.regex="",H.component==="z"&&(et.regex="GMT"),et.regex+="[-+][0-9]+",K&&(et.regex+=K.character+"[0-9]+"),et.parse=function(Q){H.component==="z"&&(Q=Q.substring(3));let q=0,gt=0;return K?(q=Number.parseInt(Q.substring(0,Q.indexOf(K.character))),gt=Number.parseInt(Q.substring(Q.indexOf(K.character)+1))):Q.length-1<=2?q=Number.parseInt(Q):(q=Number.parseInt(Q.substring(0,3)),gt=Number.parseInt(Q.substring(3))),q*60+gt}}else if(H.integerFormat)H.integerFormat.n=H.n,et=A(H.integerFormat);else{et.regex="[a-zA-Z]+";var nt={};if(H.component==="M"||H.component==="x")Rt.forEach(function(K,Q){H.width&&H.width.max?nt[K.substring(0,H.width.max)]=Q+1:nt[K]=Q+1});else if(H.component==="F")kt.forEach(function(K,Q){Q>0&&(H.width&&H.width.max?nt[K.substring(0,H.width.max)]=Q:nt[K]=Q)});else if(H.component==="P")nt={am:0,AM:0,pm:1,PM:1};else throw{code:"D3133",value:H.component};et.parse=function(K){return nt[K]}}return et.component=H.component,et});else{W.type="integer";let H=U.case===dt.UPPER,et;switch(U.n&&U.n>0?U.optionalDigits===0?et=`{${U.n}}`:et=`{${U.n-U.optionalDigits},${U.n}}`:et="+",U.primary){case Y.LETTERS:W.regex=H?"[A-Z]+":"[a-z]+",W.parse=function(nt){return at(nt,H?"A":"a")};break;case Y.ROMAN:W.regex=H?"[MDCLXVI]+":"[mdclxvi]+",W.parse=function(nt){return J(H?nt:nt.toUpperCase())};break;case Y.WORDS:W.regex="(?:"+Object.keys(I).concat("and","[\\-, ]").join("|")+")+",W.parse=function(nt){return F(nt.toLowerCase())};break;case Y.DECIMAL:W.regex=`[0-9]${et}`,U.ordinal&&(W.regex+="(?:th|st|nd|rd)"),W.parse=function(nt){let K=nt;return U.ordinal&&(K=nt.substring(0,nt.length-2)),U.regular?K=K.split(",").join(""):U.groupingSeparators.forEach(Q=>{K=K.split(Q.character).join("")}),U.zeroCode!==48&&(K=K.split("").map(Q=>String.fromCodePoint(Q.codePointAt(0)-U.zeroCode+48)).join("")),parseInt(K)};break;case Y.SEQUENCE:throw{code:"D3130",value:U.token}}}return W}function D(U,W){if(typeof U>"u")return;let H=Bt(W);return A(H).parse(U)}function tt(U,W){let H=Mt(W),et=A(H),nt="^"+et.parts.map(gt=>"("+gt.regex+")").join("")+"$";var Q=new RegExp(nt,"i").exec(U);if(Q!==null){let Ct={};for(let m=1;m<Q.length;m++){let L=et.parts[m-1];L.parse&&(Ct[L.component]=L.parse(Q[m]))}if(Object.getOwnPropertyNames(Ct).length===0)return;let Ye=0,Ti=m=>{Ye<<=1,Ye+=m?1:0},Ze=m=>!(~m&Ye)&&!!(m&Ye);"YXMxWwdD".split("").forEach(m=>Ti(Ct[m]));let Qe=!Ze(161)&&Ze(130),Gi=Ze(84),je=!Gi&&Ze(72);Ye=0,"PHhmsf".split("").forEach(m=>Ti(Ct[m]));let ft=!Ze(23)&&Ze(47),Ke=(Qe?"YD":Gi?"XxwF":je?"XWF":"YMD")+(ft?"Phmsf":"Hmsf"),Fn=this.environment.timestamp,Ee=!1,Oi=!1;if(Ke.split("").forEach(m=>{if(typeof Ct[m]>"u")Ee?(Ct[m]="MDd".indexOf(m)!==-1?1:0,Oi=!0):Ct[m]=At(Fn,m);else if(Ee=!0,Oi)throw{code:"D3136"}}),Ct.M>0?Ct.M-=1:Ct.M=0,Qe){let m=Date.UTC(Ct.Y,0),L=(Ct.d-1)*1e3*60*60*24,R=new Date(m+L);Ct.M=R.getUTCMonth(),Ct.D=R.getUTCDate()}if(Gi)throw{code:"D3136"};if(je)throw{code:"D3136"};ft&&(Ct.H=Ct.h===12?0:Ct.h,Ct.P===1&&(Ct.H+=12));var q=Date.UTC(Ct.Y,Ct.M,Ct.D,Ct.H,Ct.m,Ct.s,Ct.f);return(Ct.Z||Ct.z)&&(q-=(Ct.Z||Ct.z)*60*1e3),q}}var lt=new RegExp("^\\d{4}(-[01]\\d)*(-[0-3]\\d)*(T[0-2]\\d:[0-5]\\d:[0-5]\\d)*(\\.\\d+)?([+-][0-2]\\d:?[0-5]\\d|Z)?$");function Lt(U,W){if(!(typeof U>"u"))if(typeof W>"u"){if(!lt.test(U))throw{stack:new Error().stack,code:"D3110",value:U};return Date.parse(U)}else return tt.call(this,U,W)}function Z(U,W,H){if(!(typeof U>"u"))return he.call(this,U,W,H)}return{formatInteger:B,parseInteger:D,fromMillis:Z,toMillis:Lt}}();o.exports=u},{"./utils":6}],2:[function(s,o,h){(function(c){(function(){var u=s("./utils");let f=(()=>{"use strict";var k=u.isNumeric,x=u.isArrayOfStrings,M=u.isArrayOfNumbers,C=u.createSequence,y=u.isSequence,I=u.isFunction,F=u.isLambda,$=u.isIterable,ht=u.getFunctionArity,ct=u.isDeepEqual,J=u.stringToArray;function z(p){if(!(typeof p>"u")){var g=0;return p.forEach(function(N){g+=N}),g}}function at(p){return typeof p>"u"?0:p.length}function B(p){if(!(typeof p>"u"||p.length===0))return Math.max.apply(Math,p)}function Y(p){if(!(typeof p>"u"||p.length===0))return Math.min.apply(Math,p)}function dt(p){if(!(typeof p>"u"||p.length===0)){var g=0;return p.forEach(function(N){g+=N}),g/p.length}}function rt(p,g=!1){if(!(typeof p>"u")){var N;if(typeof p=="string")N=p;else if(I(p))N="";else{if(typeof p=="number"&&!isFinite(p))throw{code:"D3001",value:p,stack:new Error().stack};var w=g?2:0;Array.isArray(p)&&p.outerWrapper&&(p=p[0]),N=JSON.stringify(p,function(G,j){return typeof j<"u"&&j!==null&&j.toPrecision&&k(j)?Number(j.toPrecision(15)):j&&I(j)?"":j},w)}return N}}function Ft(p,g,N){if(!(typeof p>"u")){var w=J(p),G=w.length;if(G+g<0&&(g=0),typeof N<"u"){if(N<=0)return"";var j=g>=0?g+N:G+g+N;return w.slice(g,j).join("")}return w.slice(g).join("")}}function Bt(p,g){if(!(typeof p>"u")){var N=p.indexOf(g);return N>-1?p.substr(0,N):p}}function Dt(p,g){if(!(typeof p>"u")){var N=p.indexOf(g);return N>-1?p.substr(N+g.length):p}}function Mt(p){if(!(typeof p>"u"))return p.toLowerCase()}function kt(p){if(!(typeof p>"u"))return p.toUpperCase()}function Rt(p){if(!(typeof p>"u"))return J(p).length}function ue(p){if(!(typeof p>"u")){var g=p.replace(/[ \t\n\r]+/gm," ");return g.charAt(0)===" "&&(g=g.substring(1)),g.charAt(g.length-1)===" "&&(g=g.substring(0,g.length-1)),g}}function Tt(p,g,N){if(!(typeof p>"u")){(typeof N>"u"||N.length===0)&&(N=" ");var w,G=Math.abs(g)-Rt(p);if(G>0){var j=new Array(G+1).join(N);N.length>1&&(j=Ft(j,0,G)),g>0?w=p+j:w=j+p}else w=p;return w}}function*mt(p,g){var N=p.apply(this,[g]);if($(N)&&(N=yield*N),N&&!(typeof N.start=="number"||N.end==="number"||Array.isArray(N.groups)||I(N.next)))throw{code:"T1010",stack:new Error().stack};return N}function*ne(p,g){if(!(typeof p>"u")){var N;if(typeof g=="string")N=p.indexOf(g)!==-1;else{var w=yield*mt(g,p);N=typeof w<"u"}return N}}function*At(p,g,N){if(!(typeof p>"u")){if(N<0)throw{stack:new Error().stack,value:N,code:"D3040",index:3};var w=C();if(typeof N>"u"||N>0){var G=0,j=yield*mt(g,p);if(typeof j<"u")for(;typeof j<"u"&&(typeof N>"u"||G<N);)w.push({match:j.match,index:j.start,groups:j.groups}),j=yield*mt(j.next),G++}return w}}function*Gt(p,g,N,w){if(!(typeof p>"u")){var G=this;if(g==="")throw{code:"D3010",stack:new Error().stack,value:g,index:2};if(w<0)throw{code:"D3011",stack:new Error().stack,value:w,index:4};var j;typeof N=="string"?j=function(ce){for(var ze="",de=0,ei=N.indexOf("$",de);ei!==-1&&de<N.length;){ze+=N.substring(de,ei),de=ei+1;var qi=N.charAt(de);if(qi==="$")ze+="$",de++;else if(qi==="0")ze+=ce.match,de++;else{var ui;if(ce.groups.length===0?ui=1:ui=Math.floor(Math.log(ce.groups.length)*Math.LOG10E)+1,ei=parseInt(N.substring(de,de+ui),10),ui>1&&ei>ce.groups.length&&(ei=parseInt(N.substring(de,de+ui-1),10)),isNaN(ei))ze+="$";else{if(ce.groups.length>0){var Bn=ce.groups[ei-1];typeof Bn<"u"&&(ze+=Bn)}de+=ei.toString().length}}ei=N.indexOf("$",de)}return ze+=N.substring(de),ze}:j=N;var ot="",bt=0;if(typeof w>"u"||w>0){var Wt=0;if(typeof g=="string"){for(var $t=p.indexOf(g,bt);$t!==-1&&(typeof w>"u"||Wt<w);)ot+=p.substring(bt,$t),ot+=N,bt=$t+g.length,Wt++,$t=p.indexOf(g,bt);ot+=p.substring(bt)}else{var oe=yield*mt(g,p);if(typeof oe<"u"){for(;typeof oe<"u"&&(typeof w>"u"||Wt<w);){ot+=p.substring(bt,oe.start);var Qt=j.apply(G,[oe]);if($(Qt)&&(Qt=yield*Qt),typeof Qt=="string")ot+=Qt;else throw{code:"D3012",stack:new Error().stack,value:Qt};bt=oe.start+oe.match.length,Wt++,oe=yield*mt(oe.next)}ot+=p.substring(bt)}else ot=p}}else ot=p;return ot}}function he(p){if(!(typeof p>"u")){var g=typeof window<"u"?window.btoa:function(N){return new c.Buffer.from(N,"binary").toString("base64")};return g(p)}}function A(p){if(!(typeof p>"u")){var g=typeof window<"u"?window.atob:function(N){return new c.Buffer.from(N,"base64").toString("binary")};return g(p)}}function D(p){if(!(typeof p>"u")){var g;try{g=encodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrlComponent"}}return g}}function tt(p){if(!(typeof p>"u")){var g;try{g=encodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"encodeUrl"}}return g}}function lt(p){if(!(typeof p>"u")){var g;try{g=decodeURIComponent(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrlComponent"}}return g}}function Lt(p){if(!(typeof p>"u")){var g;try{g=decodeURI(p)}catch{throw{code:"D3140",stack:new Error().stack,value:p,functionName:"decodeUrl"}}return g}}function*Z(p,g,N){if(!(typeof p>"u")){if(N<0)throw{code:"D3020",stack:new Error().stack,value:N,index:3};var w=[];if(typeof N>"u"||N>0)if(typeof g=="string")w=p.split(g,N);else{var G=0,j=yield*mt(g,p);if(typeof j<"u"){for(var ot=0;typeof j<"u"&&(typeof N>"u"||G<N);)w.push(p.substring(ot,j.start)),ot=j.end,j=yield*mt(j.next),G++;(typeof N>"u"||G<N)&&w.push(p.substring(ot))}else w.push(p)}return w}}function U(p,g){if(!(typeof p>"u"))return typeof g>"u"&&(g=""),p.join(g)}function W(p,g,N){if(!(typeof p>"u")){var w={"decimal-separator":".","grouping-separator":",","exponent-separator":"e",infinity:"Infinity","minus-sign":"-",NaN:"NaN",percent:"%","per-mille":"\u2030","zero-digit":"0",digit:"#","pattern-separator":";"},G=w;typeof N<"u"&&Object.keys(N).forEach(function(Ut){G[Ut]=N[Ut]});for(var j=[],ot=G["zero-digit"].charCodeAt(0),bt=ot;bt<ot+10;bt++)j.push(String.fromCharCode(bt));var Wt=j.concat([G["decimal-separator"],G["exponent-separator"],G["grouping-separator"],G.digit,G["pattern-separator"]]),$t=g.split(G["pattern-separator"]);if($t.length>2)throw{code:"D3080",stack:new Error().stack};var oe=function(Ut){var ve=function(){for(var Ue,fi=0;fi<Ut.length;fi++)if(Ue=Ut.charAt(fi),Wt.indexOf(Ue)!==-1&&Ue!==G["exponent-separator"])return Ut.substring(0,fi)}(),ti=function(){for(var Ue,fi=Ut.length-1;fi>=0;fi--)if(Ue=Ut.charAt(fi),Wt.indexOf(Ue)!==-1&&Ue!==G["exponent-separator"])return Ut.substring(fi+1)}(),ye=Ut.substring(ve.length,Ut.length-ti.length),ii,ln,ni,En,ci=Ut.indexOf(G["exponent-separator"],ve.length);ci===-1||ci>Ut.length-ti.length?(ii=ye,ln=void 0):(ii=ye.substring(0,ci),ln=ye.substring(ci+1));var si=ii.indexOf(G["decimal-separator"]);return si===-1?(ni=ii,En=ti):(ni=ii.substring(0,si),En=ii.substring(si+1)),{prefix:ve,suffix:ti,activePart:ye,mantissaPart:ii,exponentPart:ln,integerPart:ni,fractionalPart:En,subpicture:Ut}},Qt=function(Ut){var ve,ti,ye=Ut.subpicture,ii=ye.indexOf(G["decimal-separator"]);ii!==ye.lastIndexOf(G["decimal-separator"])&&(ve="D3081"),ye.indexOf(G.percent)!==ye.lastIndexOf(G.percent)&&(ve="D3082"),ye.indexOf(G["per-mille"])!==ye.lastIndexOf(G["per-mille"])&&(ve="D3083"),ye.indexOf(G.percent)!==-1&&ye.indexOf(G["per-mille"])!==-1&&(ve="D3084");var ln=!1;for(ti=0;ti<Ut.mantissaPart.length;ti++){var ni=Ut.mantissaPart.charAt(ti);if(j.indexOf(ni)!==-1||ni===G.digit){ln=!0;break}}ln||(ve="D3085");var En=Ut.activePart.split("").map(function(Ue){return Wt.indexOf(Ue)===-1?"p":"a"}).join("");En.indexOf("p")!==-1&&(ve="D3086"),ii!==-1?(ye.charAt(ii-1)===G["grouping-separator"]||ye.charAt(ii+1)===G["grouping-separator"])&&(ve="D3087"):Ut.integerPart.charAt(Ut.integerPart.length-1)===G["grouping-separator"]&&(ve="D3088"),ye.indexOf(G["grouping-separator"]+G["grouping-separator"])!==-1&&(ve="D3089");var ci=Ut.integerPart.indexOf(G.digit);ci!==-1&&Ut.integerPart.substring(0,ci).split("").filter(function(Ue){return j.indexOf(Ue)>-1}).length>0&&(ve="D3090"),ci=Ut.fractionalPart.lastIndexOf(G.digit),ci!==-1&&Ut.fractionalPart.substring(ci).split("").filter(function(Ue){return j.indexOf(Ue)>-1}).length>0&&(ve="D3091");var si=typeof Ut.exponentPart=="string";if(si&&Ut.exponentPart.length>0&&(ye.indexOf(G.percent)!==-1||ye.indexOf(G["per-mille"])!==-1)&&(ve="D3092"),si&&(Ut.exponentPart.length===0||Ut.exponentPart.split("").filter(function(Ue){return j.indexOf(Ue)===-1}).length>0)&&(ve="D3093"),ve)throw{code:ve,stack:new Error().stack}},ce=function(Ut){var ve=function(He,Ps){for(var Mn=[],en=He.indexOf(G["grouping-separator"]);en!==-1;){var us=(Ps?He.substring(0,en):He.substring(en)).split("").filter(function(Hn){return j.indexOf(Hn)!==-1||Hn===G.digit}).length;Mn.push(us),en=Ut.integerPart.indexOf(G["grouping-separator"],en+1)}return Mn},ti=ve(Ut.integerPart),ye=function(He){if(He.length===0)return 0;for(var Ps=function(us,Hn){return Hn===0?us:Ps(Hn,us%Hn)},Mn=He.reduce(Ps),en=1;en<=He.length;en++)if(He.indexOf(en*Mn)===-1)return 0;return Mn},ii=ye(ti),ln=ve(Ut.fractionalPart,!0),ni=Ut.integerPart.split("").filter(function(He){return j.indexOf(He)!==-1}).length,En=ni,ci=Ut.fractionalPart.split(""),si=ci.filter(function(He){return j.indexOf(He)!==-1}).length,Ue=ci.filter(function(He){return j.indexOf(He)!==-1||He===G.digit}).length,fi=typeof Ut.exponentPart=="string";ni===0&&Ue===0&&(fi?(si=1,Ue=1):ni=1),fi&&ni===0&&Ut.integerPart.indexOf(G.digit)!==-1&&(ni=1),ni===0&&si===0&&(si=1);var Sr=0;return fi&&(Sr=Ut.exponentPart.split("").filter(function(He){return j.indexOf(He)!==-1}).length),{integerPartGroupingPositions:ti,regularGrouping:ii,minimumIntegerPartSize:ni,scalingFactor:En,prefix:Ut.prefix,fractionalPartGroupingPositions:ln,minimumFactionalPartSize:si,maximumFactionalPartSize:Ue,minimumExponentSize:Sr,suffix:Ut.suffix,picture:Ut.subpicture}},ze=$t.map(oe);ze.forEach(Qt);var de=ze.map(ce),ei=G["minus-sign"],qi=G["zero-digit"],ui=G["decimal-separator"],Bn=G["grouping-separator"];de.length===1&&(de.push(JSON.parse(JSON.stringify(de[0]))),de[1].prefix=ei+de[1].prefix);var Se;p>=0?Se=de[0]:Se=de[1];var os;Se.picture.indexOf(G.percent)!==-1?os=p*100:Se.picture.indexOf(G["per-mille"])!==-1?os=p*1e3:os=p;var hn,Un;if(Se.minimumExponentSize===0)hn=os;else{var as=Math.pow(10,Se.scalingFactor),Ir=Math.pow(10,Se.scalingFactor-1);for(hn=os,Un=0;hn<Ir;)hn*=10,Un-=1;for(;hn>as;)hn/=10,Un+=1}var $o=q(hn,Se.maximumFactionalPartSize),Zs=function(Ut,ve){var ti=Math.abs(Ut).toFixed(ve);return qi!=="0"&&(ti=ti.split("").map(function(ye){return ye>="0"&&ye<="9"?j[ye.charCodeAt(0)-48]:ye}).join("")),ti},Jt=Zs($o,Se.maximumFactionalPartSize),$e=Jt.indexOf(".");for($e===-1?Jt=Jt+ui:Jt=Jt.replace(".",ui);Jt.charAt(0)===qi;)Jt=Jt.substring(1);for(;Jt.charAt(Jt.length-1)===qi;)Jt=Jt.substring(0,Jt.length-1);$e=Jt.indexOf(ui);var hs=Se.minimumIntegerPartSize-$e,tr=Se.minimumFactionalPartSize-(Jt.length-$e-1);if(Jt=(hs>0?new Array(hs+1).join(qi):"")+Jt,Jt=Jt+(tr>0?new Array(tr+1).join(qi):""),$e=Jt.indexOf(ui),Se.regularGrouping>0)for(var Jo=Math.floor(($e-1)/Se.regularGrouping),ls=1;ls<=Jo;ls++)Jt=[Jt.slice(0,$e-ls*Se.regularGrouping),Bn,Jt.slice($e-ls*Se.regularGrouping)].join("");else Se.integerPartGroupingPositions.forEach(function(Ut){Jt=[Jt.slice(0,$e-Ut),Bn,Jt.slice($e-Ut)].join(""),$e++});if($e=Jt.indexOf(ui),Se.fractionalPartGroupingPositions.forEach(function(Ut){Jt=[Jt.slice(0,Ut+$e+1),Bn,Jt.slice(Ut+$e+1)].join("")}),$e=Jt.indexOf(ui),(Se.picture.indexOf(ui)===-1||$e===Jt.length-1)&&(Jt=Jt.substring(0,Jt.length-1)),typeof Un<"u"){var xn=Zs(Un,0);hs=Se.minimumExponentSize-xn.length,hs>0&&(xn=new Array(hs+1).join(qi)+xn),Jt=Jt+G["exponent-separator"]+(Un<0?ei:"")+xn}return Jt=Se.prefix+Jt+Se.suffix,Jt}}function H(p,g){if(!(typeof p>"u")){if(p=q(p),typeof g>"u"?g=10:g=q(g),g<2||g>36)throw{code:"D3100",stack:new Error().stack,value:g};var N=p.toString(g);return N}}function et(p){var g;if(!(typeof p>"u")){if(typeof p=="number")g=p;else if(typeof p=="string"&&/^-?[0-9]+(\.[0-9]+)?([Ee][-+]?[0-9]+)?$/.test(p)&&!isNaN(parseFloat(p))&&isFinite(p))g=parseFloat(p);else if(p===!0)g=1;else if(p===!1)g=0;else throw{code:"D3030",value:p,stack:new Error().stack,index:1};return g}}function nt(p){var g;if(!(typeof p>"u"))return g=Math.abs(p),g}function K(p){var g;if(!(typeof p>"u"))return g=Math.floor(p),g}function Q(p){var g;if(!(typeof p>"u"))return g=Math.ceil(p),g}function q(p,g){var N;if(!(typeof p>"u")){if(g){var w=p.toString().split("e");p=+(w[0]+"e"+(w[1]?+w[1]+g:g))}N=Math.round(p);var G=N-p;return Math.abs(G)===.5&&Math.abs(N%2)===1&&(N=N-1),g&&(w=N.toString().split("e"),N=+(w[0]+"e"+(w[1]?+w[1]-g:-g))),Object.is(N,-0)&&(N=0),N}}function gt(p){var g;if(!(typeof p>"u")){if(p<0)throw{stack:new Error().stack,code:"D3060",index:1,value:p};return g=Math.sqrt(p),g}}function Kt(p,g){var N;if(!(typeof p>"u")){if(N=Math.pow(p,g),!isFinite(N))throw{stack:new Error().stack,code:"D3061",index:1,value:p,exp:g};return N}}function qt(){return Math.random()}function Et(p){if(!(typeof p>"u")){var g=!1;if(Array.isArray(p)){if(p.length===1)g=Et(p[0]);else if(p.length>1){var N=p.filter(function(w){return Et(w)});g=N.length>0}}else typeof p=="string"?p.length>0&&(g=!0):k(p)?p!==0&&(g=!0):p!==null&&typeof p=="object"?Object.keys(p).length>0&&(g=!0):typeof p=="boolean"&&p===!0&&(g=!0);return g}}function Pt(p){if(!(typeof p>"u"))return!Et(p)}function zt(p,g,N,w){var G=[g],j=ht(p);return j>=2&&G.push(N),j>=3&&G.push(w),G}function*Ct(p,g){if(!(typeof p>"u")){for(var N=C(),w=0;w<p.length;w++){var G=zt(g,p[w],w,p),j=yield*g.apply(this,G);typeof j<"u"&&N.push(j)}return N}}function*Ye(p,g){if(!(typeof p>"u")){for(var N=C(),w=0;w<p.length;w++){var G=p[w],j=zt(g,G,w,p),ot=yield*g.apply(this,j);Et(ot)&&N.push(G)}return N}}function*Ti(p,g){if(!(typeof p>"u")){for(var N=!1,w,G=0;G<p.length;G++){var j=p[G],ot=!0;if(typeof g<"u"){var bt=zt(g,j,G,p),Wt=yield*g.apply(this,bt);ot=Et(Wt)}if(ot)if(!N)w=j,N=!0;else throw{stack:new Error().stack,code:"D3138",index:G}}if(!N)throw{stack:new Error().stack,code:"D3139"};return w}}function Ze(){for(var p=[],g=Array.prototype.slice.call(arguments),N=Math.min.apply(Math,g.map(function(j){return Array.isArray(j)?j.length:0})),w=0;w<N;w++){var G=g.map(j=>j[w]);p.push(G)}return p}function*we(p,g,N){if(!(typeof p>"u")){var w,G=ht(g);if(G<2)throw{stack:new Error().stack,code:"D3050",index:1};var j;for(typeof N>"u"&&p.length>0?(w=p[0],j=1):(w=N,j=0);j<p.length;){var ot=[w,p[j]];G>=3&&ot.push(j),G>=4&&ot.push(p),w=yield*g.apply(this,ot),j++}return w}}function Qe(p){var g=C();if(Array.isArray(p)){var N={};p.forEach(function(w){var G=Qe(w);G.forEach(function(j){N[j]=!0})}),g=Qe(N)}else p!==null&&typeof p=="object"&&!F(p)&&Object.keys(p).forEach(w=>g.push(w));return g}function Gi(p,g){var N;if(Array.isArray(p)){N=C();for(var w=0;w<p.length;w++){var G=Gi(p[w],g);typeof G<"u"&&(Array.isArray(G)?G.forEach(j=>N.push(j)):N.push(G))}}else p!==null&&typeof p=="object"&&(N=p[g]);return N}function je(p,g){return typeof p>"u"?g:typeof g>"u"?p:(Array.isArray(p)||(p=C(p)),Array.isArray(g)||(g=[g]),p.concat(g))}function ss(p){return!(typeof p>"u")}function ft(p){var g=C();if(Array.isArray(p))p.forEach(function(G){g=je(g,ft(G))});else if(p!==null&&typeof p=="object"&&!F(p))for(var N in p){var w={};w[N]=p[N],g.push(w)}else g=p;return g}function Nt(p){if(!(typeof p>"u")){var g={};return p.forEach(function(N){for(var w in N)g[w]=N[w]}),g}}function rs(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var g=p.length,N=new Array(g),w=0;w<g;w++)N[g-w-1]=p[w];return N}}function*Ke(p,g){var N=C();for(var w in p){var G=zt(g,p[w],w,p),j=yield*g.apply(this,G);typeof j<"u"&&N.push(j)}return N}function Fn(p){throw{code:"D3137",stack:new Error().stack,message:p||"$error() function evaluated"}}function Ee(p,g){if(!p)throw{code:"D3141",stack:new Error().stack,message:g||"$assert() statement failed"}}function Oi(p){if(p!==void 0)return p===null?"null":k(p)?"number":typeof p=="string"?"string":typeof p=="boolean"?"boolean":Array.isArray(p)?"array":I(p)?"function":"object"}function*m(p,g){if(!(typeof p>"u")){if(p.length<=1)return p;var N;if(typeof g>"u"){if(!M(p)&&!x(p))throw{stack:new Error().stack,code:"D3070",index:1};N=function*(ot,bt){return ot>bt}}else N=g;var w=function*(ot,bt){var Wt=function*(oe,Qt,ce){Qt.length===0?Array.prototype.push.apply(oe,ce):ce.length===0?Array.prototype.push.apply(oe,Qt):(yield*N(Qt[0],ce[0]))?(oe.push(ce[0]),yield*Wt(oe,Qt,ce.slice(1))):(oe.push(Qt[0]),yield*Wt(oe,Qt.slice(1),ce))},$t=[];return yield*Wt($t,ot,bt),$t},G=function*(ot){if(!Array.isArray(ot)||ot.length<=1)return ot;var bt=Math.floor(ot.length/2),Wt=ot.slice(0,bt),$t=ot.slice(bt);return Wt=yield*G(Wt),$t=yield*G($t),yield*w(Wt,$t)},j=yield*G(p);return j}}function L(p){if(!(typeof p>"u")){if(p.length<=1)return p;for(var g=new Array(p.length),N=0;N<p.length;N++){var w=Math.floor(Math.random()*(N+1));N!==w&&(g[N]=g[w]),g[w]=p[N]}return g}}function R(p){if(!(typeof p>"u")){if(!Array.isArray(p)||p.length<=1)return p;for(var g=y(p)?C():[],N=0;N<p.length;N++){for(var w=p[N],G=!1,j=0;j<g.length;j++)if(ct(w,g[j])){G=!0;break}G||g.push(w)}return g}}function*P(p,g){var N={};for(var w in p){var G=p[w],j=zt(g,G,w,p),ot=yield*g.apply(this,j);Et(ot)&&(N[w]=G)}return Object.keys(N).length===0&&(N=void 0),N}return{sum:z,count:at,max:B,min:Y,average:dt,string:rt,substring:Ft,substringBefore:Bt,substringAfter:Dt,lowercase:Mt,uppercase:kt,length:Rt,trim:ue,pad:Tt,match:At,contains:ne,replace:Gt,split:Z,join:U,formatNumber:W,formatBase:H,number:et,floor:K,ceil:Q,round:q,abs:nt,sqrt:gt,power:Kt,random:qt,boolean:Et,not:Pt,map:Ct,zip:Ze,filter:Ye,single:Ti,foldLeft:we,sift:P,keys:Qe,lookup:Gi,append:je,exists:ss,spread:ft,merge:Nt,reverse:rs,each:Ke,error:Fn,assert:Ee,type:Oi,sort:m,shuffle:L,distinct:R,base64encode:he,base64decode:A,encodeUrlComponent:D,encodeUrl:tt,decodeUrlComponent:lt,decodeUrl:Lt}})();o.exports=f}).call(this)}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{"./utils":6}],3:[function(s,o,h){var c=s("./datetime"),u=s("./functions"),f=s("./utils"),k=s("./parser"),x=s("./signature"),M=function(){"use strict";var C=f.isNumeric,y=f.isArrayOfStrings,I=f.isArrayOfNumbers,F=f.createSequence,$=f.isSequence,ht=f.isFunction,ct=f.isLambda,J=f.isIterable,z=f.getFunctionArity,at=f.isDeepEqual,B=Ke(null);function*Y(m,L,R){var P,p=R.lookup("__evaluate_entry");switch(p&&p(m,L,R),m.type){case"path":P=yield*dt(m,L,R);break;case"binary":P=yield*kt(m,L,R);break;case"unary":P=yield*Rt(m,L,R);break;case"name":P=ue(m,L,R);break;case"string":case"number":case"value":P=Tt(m,L,R);break;case"wildcard":P=mt(m,L,R);break;case"descendant":P=At(m,L,R);break;case"parent":P=R.lookup(m.slot.label);break;case"condition":P=yield*nt(m,L,R);break;case"block":P=yield*K(m,L,R);break;case"bind":P=yield*et(m,L,R);break;case"regex":P=Q(m,L,R);break;case"function":P=yield*Pt(m,L,R);break;case"variable":P=q(m,L,R);break;case"lambda":P=Ye(m,L,R);break;case"partial":P=yield*Ti(m,L,R);break;case"apply":P=yield*Et(m,L,R);break;case"transform":P=Kt(m,L,R);break}if(R.async&&(typeof P>"u"||P===null||typeof P.then!="function")&&(P=Promise.resolve(P)),R.async&&typeof P.then=="function"&&m.nextFunction&&typeof P[m.nextFunction]=="function"||(P=yield P),Object.prototype.hasOwnProperty.call(m,"predicate"))for(var g=0;g<m.predicate.length;g++)P=yield*Mt(m.predicate[g].expr,P,R);m.type!=="path"&&Object.prototype.hasOwnProperty.call(m,"group")&&(P=yield*U(m.group,P,R));var N=R.lookup("__evaluate_exit");return N&&N(m,L,R,P),P&&$(P)&&!P.tupleStream&&(m.keepArray&&(P.keepSingleton=!0),P.length===0?P=void 0:P.length===1&&(P=P.keepSingleton?P:P[0])),P}function*dt(m,L,R){var P;Array.isArray(L)&&m.steps[0].type!=="variable"?P=L:P=F(L);for(var p,g=!1,N=void 0,w=0;w<m.steps.length;w++){var G=m.steps[w];if(G.tuple&&(g=!0),w===0&&G.consarray?p=yield*Y(G,P,R):g?N=yield*Dt(G,P,N,R):p=yield*Ft(G,P,R,w===m.steps.length-1),!g&&(typeof p>"u"||p.length===0))break;typeof G.focus>"u"&&(P=p)}if(g)if(m.tuple)p=N;else for(p=F(),w=0;w<N.length;w++)p.push(N[w]["@"]);return m.keepSingletonArray&&(Array.isArray(p)&&p.cons&&!p.sequence&&(p=F(p)),p.keepSingleton=!0),m.hasOwnProperty("group")&&(p=yield*U(m.group,g?N:p,R)),p}function rt(m,L){var R=Ke(m);for(let P in L)R.bind(P,L[P]);return R}function*Ft(m,L,R,P){var p;if(m.type==="sort")return p=yield*gt(m,L,R),m.stages&&(p=yield*Bt(m.stages,p,R)),p;p=F();for(var g=0;g<L.length;g++){var N=yield*Y(m,L[g],R);if(m.stages)for(var w=0;w<m.stages.length;w++)N=yield*Mt(m.stages[w].expr,N,R);typeof N<"u"&&p.push(N)}var G=F();return P&&p.length===1&&Array.isArray(p[0])&&!$(p[0])?G=p[0]:p.forEach(function(j){!Array.isArray(j)||j.cons?G.push(j):j.forEach(ot=>G.push(ot))}),G}function*Bt(m,L,R){for(var P=L,p=0;p<m.length;p++){var g=m[p];switch(g.type){case"filter":P=yield*Mt(g.expr,P,R);break;case"index":for(var N=0;N<P.length;N++){var w=P[N];w[g.value]=N}break}}return P}function*Dt(m,L,R,P){var p;if(m.type==="sort"){if(R)p=yield*gt(m,R,P);else{var g=yield*gt(m,L,P);p=F(),p.tupleStream=!0;for(var N=0;N<g.length;N++){var w={"@":g[N]};w[m.index]=N,p.push(w)}}return m.stages&&(p=yield*Bt(m.stages,p,P)),p}p=F(),p.tupleStream=!0;var G=P;R===void 0&&(R=L.map(Wt=>({"@":Wt})));for(var j=0;j<R.length;j++){G=rt(P,R[j]);var ot=yield*Y(m,R[j]["@"],G);if(typeof ot<"u"){Array.isArray(ot)||(ot=[ot]);for(var bt=0;bt<ot.length;bt++)w={},Object.assign(w,R[j]),ot.tupleStream?Object.assign(w,ot[bt]):(m.focus?(w[m.focus]=ot[bt],w["@"]=R[j]["@"]):w["@"]=ot[bt],m.index&&(w[m.index]=bt),m.ancestor&&(w[m.ancestor.label]=R[j]["@"])),p.push(w)}}return m.stages&&(p=yield*Bt(m.stages,p,P)),p}function*Mt(m,L,R){var P=F();if(L&&L.tupleStream&&(P.tupleStream=!0),Array.isArray(L)||(L=F(L)),m.type==="number"){var p=Math.floor(m.value);p<0&&(p=L.length+p);var g=L[p];typeof g<"u"&&(Array.isArray(g)?P=g:P.push(g))}else for(p=0;p<L.length;p++){var g=L[p],N=g,w=R;L.tupleStream&&(N=g["@"],w=rt(R,g));var G=yield*Y(m,N,w);C(G)&&(G=[G]),I(G)?G.forEach(function(ot){var bt=Math.floor(ot);bt<0&&(bt=L.length+bt),bt===p&&P.push(g)}):u.boolean(G)&&P.push(g)}return P}function*kt(m,L,R){var P,p=yield*Y(m.lhs,L,R),g=m.value,N=function*(){return yield*Y(m.rhs,L,R)};if(g==="and"||g==="or")try{return yield*lt(p,N,g)}catch(G){throw G.position=m.position,G.token=g,G}var w=yield*N();try{switch(g){case"+":case"-":case"*":case"/":case"%":P=he(p,w,g);break;case"=":case"!=":P=A(p,w,g);break;case"<":case"<=":case">":case">=":P=D(p,w,g);break;case"&":P=Z(p,w);break;case"..":P=H(p,w);break;case"in":P=tt(p,w);break}}catch(G){throw G.position=m.position,G.token=g,G}return P}function*Rt(m,L,R){var P;switch(m.value){case"-":if(P=yield*Y(m.expression,L,R),typeof P>"u")P=void 0;else if(C(P))P=-P;else throw{code:"D1002",stack:new Error().stack,position:m.position,token:m.value,value:P};break;case"[":P=[];for(var p=0;p<m.expressions.length;p++){var g=m.expressions[p],N=yield*Y(g,L,R);typeof N<"u"&&(g.value==="["?P.push(N):P=u.append(P,N))}m.consarray&&Object.defineProperty(P,"cons",{enumerable:!1,configurable:!1,value:!0});break;case"{":P=yield*U(m,L,R);break}return P}function ue(m,L,R){return u.lookup(L,m.value)}function Tt(m){return m.value}function mt(m,L){var R=F();return Array.isArray(L)&&L.outerWrapper&&L.length>0&&(L=L[0]),L!==null&&typeof L=="object"&&Object.keys(L).forEach(function(P){var p=L[P];Array.isArray(p)?(p=ne(p),R=u.append(R,p)):R.push(p)}),R}function ne(m,L){return typeof L>"u"&&(L=[]),Array.isArray(m)?m.forEach(function(R){ne(R,L)}):L.push(m),L}function At(m,L){var R,P=F();return typeof L<"u"&&(Gt(L,P),P.length===1?R=P[0]:R=P),R}function Gt(m,L){Array.isArray(m)||L.push(m),Array.isArray(m)?m.forEach(function(R){Gt(R,L)}):m!==null&&typeof m=="object"&&Object.keys(m).forEach(function(R){Gt(m[R],L)})}function he(m,L,R){var P;if(typeof m<"u"&&!C(m))throw{code:"T2001",stack:new Error().stack,value:m};if(typeof L<"u"&&!C(L))throw{code:"T2002",stack:new Error().stack,value:L};if(typeof m>"u"||typeof L>"u")return P;switch(R){case"+":P=m+L;break;case"-":P=m-L;break;case"*":P=m*L;break;case"/":P=m/L;break;case"%":P=m%L;break}return P}function A(m,L,R){var P,p=typeof m,g=typeof L;if(p==="undefined"||g==="undefined")return!1;switch(R){case"=":P=at(m,L);break;case"!=":P=!at(m,L);break}return P}function D(m,L,R){var P,p=typeof m,g=typeof L,N=p==="undefined"||p==="string"||p==="number",w=g==="undefined"||g==="string"||g==="number";if(!N||!w)throw{code:"T2010",stack:new Error().stack,value:p==="string"||p==="number"?L:m};if(!(p==="undefined"||g==="undefined")){if(p!==g)throw{code:"T2009",stack:new Error().stack,value:m,value2:L};switch(R){case"<":P=m<L;break;case"<=":P=m<=L;break;case">":P=m>L;break;case">=":P=m>=L;break}return P}}function tt(m,L){var R=!1;if(typeof m>"u"||typeof L>"u")return!1;Array.isArray(L)||(L=[L]);for(var P=0;P<L.length;P++)if(L[P]===m){R=!0;break}return R}function*lt(m,L,R){var P,p=Lt(m);switch(R){case"and":P=p&&Lt(yield*L());break;case"or":P=p||Lt(yield*L());break}return P}function Lt(m){var L=u.boolean(m);return typeof L>"u"?!1:L}function Z(m,L){var R,P="",p="";return typeof m<"u"&&(P=u.string(m)),typeof L<"u"&&(p=u.string(L)),R=P.concat(p),R}function*U(m,L,R){var P={},p={},g=!!(L&&L.tupleStream);Array.isArray(L)||(L=F(L)),L.length===0&&L.push(void 0);for(var N=0;N<L.length;N++)for(var w=L[N],G=g?rt(R,w):R,j=0;j<m.lhs.length;j++){var ot=m.lhs[j],bt=yield*Y(ot[0],g?w["@"]:w,G);if(typeof bt!="string"&&bt!==void 0)throw{code:"T1003",stack:new Error().stack,position:m.position,value:bt};if(bt!==void 0){var Wt={data:w,exprIndex:j};if(p.hasOwnProperty(bt)){if(p[bt].exprIndex!==j)throw{code:"D1009",stack:new Error().stack,position:m.position,value:bt};p[bt].data=u.append(p[bt].data,w)}else p[bt]=Wt}}for(bt in p){Wt=p[bt];var $t=Wt.data,G=R;if(g){var oe=W(Wt.data);$t=oe["@"],delete oe["@"],G=rt(R,oe)}var Qt=yield*Y(m.lhs[Wt.exprIndex][1],$t,G);typeof Qt<"u"&&(P[bt]=Qt)}return P}function W(m){if(!Array.isArray(m))return m;var L={};Object.assign(L,m[0]);for(var R=1;R<m.length;R++)for(let P in m[R])L[P]=u.append(L[P],m[R][P]);return L}function H(m,L){var R;if(typeof m<"u"&&!Number.isInteger(m))throw{code:"T2003",stack:new Error().stack,value:m};if(typeof L<"u"&&!Number.isInteger(L))throw{code:"T2004",stack:new Error().stack,value:L};if(typeof m>"u"||typeof L>"u"||m>L)return R;var P=L-m+1;if(P>1e7)throw{code:"D2014",stack:new Error().stack,value:P};R=new Array(P);for(var p=m,g=0;p<=L;p++,g++)R[g]=p;return R.sequence=!0,R}function*et(m,L,R){var P=yield*Y(m.rhs,L,R);return R.bind(m.lhs.value,P),P}function*nt(m,L,R){var P,p=yield*Y(m.condition,L,R);return u.boolean(p)?P=yield*Y(m.then,L,R):typeof m.else<"u"&&(P=yield*Y(m.else,L,R)),P}function*K(m,L,R){for(var P,p=Ke(R),g=0;g<m.expressions.length;g++)P=yield*Y(m.expressions[g],L,p);return P}function Q(m){var L=new Oi.RegexEngine(m.value),R=function(P,p){var g;L.lastIndex=p||0;var N=L.exec(P);if(N!==null){if(g={match:N[0],start:N.index,end:N.index+N[0].length,groups:[]},N.length>1)for(var w=1;w<N.length;w++)g.groups.push(N[w]);g.next=function(){if(!(L.lastIndex>=P.length)){var G=R(P,L.lastIndex);if(G&&G.match==="")throw{code:"D1004",stack:new Error().stack,position:m.position,value:m.value.source};return G}}}return g};return R}function q(m,L,R){var P;return m.value===""?P=L&&L.outerWrapper?L[0]:L:P=R.lookup(m.value),P}function*gt(m,L,R){var P,p=L,g=!!L.tupleStream,N=function*(G,j){for(var ot=0,bt=0;ot===0&&bt<m.terms.length;bt++){var Wt=m.terms[bt],$t=G,oe=R;g&&($t=G["@"],oe=rt(R,G));var Qt=yield*Y(Wt.expression,$t,oe);$t=j,oe=R,g&&($t=j["@"],oe=rt(R,j));var ce=yield*Y(Wt.expression,$t,oe),ze=typeof Qt,de=typeof ce;if(ze==="undefined"){ot=de==="undefined"?0:1;continue}if(de==="undefined"){ot=-1;continue}if(!(ze==="string"||ze==="number")||!(de==="string"||de==="number"))throw{code:"T2008",stack:new Error().stack,position:m.position,value:ze==="string"||ze==="number"?ce:Qt};if(ze!==de)throw{code:"T2007",stack:new Error().stack,position:m.position,value:Qt,value2:ce};Qt!==ce&&(Qt<ce?ot=-1:ot=1,Wt.descending===!0&&(ot=-ot))}return ot===1},w={environment:R,input:L};return P=yield*u.sort.apply(w,[p,N]),P}function Kt(m,L,R){var P=function*(p){if(!(typeof p>"u")){var g=R.lookup("clone");if(!ht(g))throw{code:"T2013",stack:new Error().stack,position:m.position};var N=yield*zt(g,[p],null,R),w=yield*Y(m.pattern,N,R);if(typeof w<"u"){Array.isArray(w)||(w=[w]);for(var G=0;G<w.length;G++){var j=w[G],ot=yield*Y(m.update,j,R),bt=typeof ot;if(bt!=="undefined"){if(bt!=="object"||ot===null||Array.isArray(ot))throw{code:"T2011",stack:new Error().stack,position:m.update.position,value:ot};for(var Wt in ot)j[Wt]=ot[Wt]}if(typeof m.delete<"u"){var $t=yield*Y(m.delete,j,R);if(typeof $t<"u"){var oe=$t;if(Array.isArray($t)||($t=[$t]),!y($t))throw{code:"T2012",stack:new Error().stack,position:m.delete.position,value:oe};for(var Qt=0;Qt<$t.length;Qt++)typeof j=="object"&&j!==null&&delete j[$t[Qt]]}}}}return N}};return ft(P,"<(oa):o>")}var qt=k("function($f, $g) { function($x){ $g($f($x)) } }");function*Et(m,L,R){var P,p=yield*Y(m.lhs,L,R);if(m.rhs.type==="function")P=yield*Pt(m.rhs,L,R,{context:p});else{var g=yield*Y(m.rhs,L,R);if(!ht(g))throw{code:"T2006",stack:new Error().stack,position:m.position,value:g};if(ht(p)){var N=yield*Y(qt,null,R);P=yield*zt(N,[p,g],null,R)}else P=yield*zt(g,[p],null,R)}return P}function*Pt(m,L,R,P){var p,g=yield*Y(m.procedure,L,R);if(typeof g>"u"&&m.procedure.type==="path"&&R.lookup(m.procedure.steps[0].value))throw{code:"T1005",stack:new Error().stack,position:m.position,token:m.procedure.steps[0].value};var N=[];typeof P<"u"&&N.push(P.context);for(var w=0;w<m.arguments.length;w++){let j=yield*Y(m.arguments[w],L,R);if(ht(j)){let ot=function*(...bt){return yield*zt(j,bt,null,R)};ot.arity=z(j),N.push(ot)}else N.push(j)}var G=m.procedure.type==="path"?m.procedure.steps[0].value:m.procedure.value;try{typeof g=="object"&&(g.token=G,g.position=m.position),p=yield*zt(g,N,L,R)}catch(j){throw j.position||(j.position=m.position),j.token||(j.token=G),j}return p}function*zt(m,L,R,P){var p;for(p=yield*Ct(m,L,R,P);ct(p)&&p.thunk===!0;){var g=yield*Y(p.body.procedure,p.input,p.environment);p.body.procedure.type==="variable"&&(g.token=p.body.procedure.value),g.position=p.body.procedure.position;for(var N=[],w=0;w<p.body.arguments.length;w++)N.push(yield*Y(p.body.arguments[w],p.input,p.environment));p=yield*Ct(g,N,R,P)}return p}function*Ct(m,L,R,P){var p;try{var g=L;if(m&&(g=Ze(m.signature,L,R)),ct(m))p=yield*we(m,g);else if(m&&m._jsonata_function===!0){var N={environment:P,input:R};p=m.implementation.apply(N,g),J(p)&&(p=yield*p)}else if(typeof m=="function")p=m.apply(R,g),J(p)&&(p=yield*p);else throw{code:"T1006",stack:new Error().stack}}catch(w){throw m&&(typeof w.token>"u"&&typeof m.token<"u"&&(w.token=m.token),w.position=m.position),w}return p}function Ye(m,L,R){var P={_jsonata_lambda:!0,input:L,environment:R,arguments:m.arguments,signature:m.signature,body:m.body};return m.thunk===!0&&(P.thunk=!0),P.apply=function*(p,g){return yield*zt(P,g,L,p.environment)},P}function*Ti(m,L,R){for(var P,p=[],g=0;g<m.arguments.length;g++){var N=m.arguments[g];N.type==="operator"&&N.value==="?"?p.push(N):p.push(yield*Y(N,L,R))}var w=yield*Y(m.procedure,L,R);if(typeof w>"u"&&m.procedure.type==="path"&&R.lookup(m.procedure.steps[0].value))throw{code:"T1007",stack:new Error().stack,position:m.position,token:m.procedure.steps[0].value};if(ct(w))P=Qe(w,p);else if(w&&w._jsonata_function===!0)P=Gi(w.implementation,p);else if(typeof w=="function")P=Gi(w,p);else throw{code:"T1008",stack:new Error().stack,position:m.position,token:m.procedure.type==="path"?m.procedure.steps[0].value:m.procedure.value};return P}function Ze(m,L,R){if(typeof m>"u")return L;var P=m.validate(L,R);return P}function*we(m,L){var R,P=Ke(m.environment);return m.arguments.forEach(function(p,g){P.bind(p.value,L[g])}),typeof m.body=="function"?R=yield*je(m.body,P):R=yield*Y(m.body,m.input,P),R}function Qe(m,L){var R=Ke(m.environment),P=[];m.arguments.forEach(function(g,N){var w=L[N];w&&w.type==="operator"&&w.value==="?"?P.push(g):R.bind(g.value,w)});var p={_jsonata_lambda:!0,input:m.input,environment:R,arguments:P,body:m.body};return p}function Gi(m,L){var R=ss(m);R=R.map(function(N){return"$"+N.trim()});var P="function("+R.join(", ")+"){ _ }",p=k(P);p.body=m;var g=Qe(p,L);return g}function*je(m,L){var R=ss(m),P=R.map(function(N){return L.lookup(N.trim())}),p={environment:L},g=m.apply(p,P);return J(g)&&(g=yield*g),g}function ss(m){var L=m.toString(),R=/\(([^)]*)\)/.exec(L)[1],P=R.split(",");return P}function ft(m,L){var R={_jsonata_function:!0,implementation:m};return typeof L<"u"&&(R.signature=x(L)),R}function*Nt(m,L){if(!(typeof m>"u")){var R=this.input;typeof L<"u"&&(R=L,Array.isArray(R)&&!$(R)&&(R=F(R),R.outerWrapper=!0));try{var P=k(m,!1)}catch(g){throw Ee(g),{stack:new Error().stack,code:"D3120",value:g.message,error:g}}try{var p=yield*Y(P,R,this.environment)}catch(g){throw Ee(g),{stack:new Error().stack,code:"D3121",value:g.message,error:g}}return p}}function rs(m){if(!(typeof m>"u"))return JSON.parse(u.string(m))}function Ke(m){var L={};return{bind:function(R,P){L[R]=P},lookup:function(R){var P;return L.hasOwnProperty(R)?P=L[R]:m&&(P=m.lookup(R)),P},timestamp:m?m.timestamp:null,async:m?m.async:!1,global:m?m.global:{ancestry:[null]}}}B.bind("sum",ft(u.sum,"<a<n>:n>")),B.bind("count",ft(u.count,"<a:n>")),B.bind("max",ft(u.max,"<a<n>:n>")),B.bind("min",ft(u.min,"<a<n>:n>")),B.bind("average",ft(u.average,"<a<n>:n>")),B.bind("string",ft(u.string,"<x-b?:s>")),B.bind("substring",ft(u.substring,"<s-nn?:s>")),B.bind("substringBefore",ft(u.substringBefore,"<s-s:s>")),B.bind("substringAfter",ft(u.substringAfter,"<s-s:s>")),B.bind("lowercase",ft(u.lowercase,"<s-:s>")),B.bind("uppercase",ft(u.uppercase,"<s-:s>")),B.bind("length",ft(u.length,"<s-:n>")),B.bind("trim",ft(u.trim,"<s-:s>")),B.bind("pad",ft(u.pad,"<s-ns?:s>")),B.bind("match",ft(u.match,"<s-f<s:o>n?:a<o>>")),B.bind("contains",ft(u.contains,"<s-(sf):b>")),B.bind("replace",ft(u.replace,"<s-(sf)(sf)n?:s>")),B.bind("split",ft(u.split,"<s-(sf)n?:a<s>>")),B.bind("join",ft(u.join,"<a<s>s?:s>")),B.bind("formatNumber",ft(u.formatNumber,"<n-so?:s>")),B.bind("formatBase",ft(u.formatBase,"<n-n?:s>")),B.bind("formatInteger",ft(c.formatInteger,"<n-s:s>")),B.bind("parseInteger",ft(c.parseInteger,"<s-s:n>")),B.bind("number",ft(u.number,"<(nsb)-:n>")),B.bind("floor",ft(u.floor,"<n-:n>")),B.bind("ceil",ft(u.ceil,"<n-:n>")),B.bind("round",ft(u.round,"<n-n?:n>")),B.bind("abs",ft(u.abs,"<n-:n>")),B.bind("sqrt",ft(u.sqrt,"<n-:n>")),B.bind("power",ft(u.power,"<n-n:n>")),B.bind("random",ft(u.random,"<:n>")),B.bind("boolean",ft(u.boolean,"<x-:b>")),B.bind("not",ft(u.not,"<x-:b>")),B.bind("map",ft(u.map,"<af>")),B.bind("zip",ft(u.zip,"<a+>")),B.bind("filter",ft(u.filter,"<af>")),B.bind("single",ft(u.single,"<af?>")),B.bind("reduce",ft(u.foldLeft,"<afj?:j>")),B.bind("sift",ft(u.sift,"<o-f?:o>")),B.bind("keys",ft(u.keys,"<x-:a<s>>")),B.bind("lookup",ft(u.lookup,"<x-s:x>")),B.bind("append",ft(u.append,"<xx:a>")),B.bind("exists",ft(u.exists,"<x:b>")),B.bind("spread",ft(u.spread,"<x-:a<o>>")),B.bind("merge",ft(u.merge,"<a<o>:o>")),B.bind("reverse",ft(u.reverse,"<a:a>")),B.bind("each",ft(u.each,"<o-f:a>")),B.bind("error",ft(u.error,"<s?:x>")),B.bind("assert",ft(u.assert,"<bs?:x>")),B.bind("type",ft(u.type,"<x:s>")),B.bind("sort",ft(u.sort,"<af?:a>")),B.bind("shuffle",ft(u.shuffle,"<a:a>")),B.bind("distinct",ft(u.distinct,"<x:x>")),B.bind("base64encode",ft(u.base64encode,"<s-:s>")),B.bind("base64decode",ft(u.base64decode,"<s-:s>")),B.bind("encodeUrlComponent",ft(u.encodeUrlComponent,"<s-:s>")),B.bind("encodeUrl",ft(u.encodeUrl,"<s-:s>")),B.bind("decodeUrlComponent",ft(u.decodeUrlComponent,"<s-:s>")),B.bind("decodeUrl",ft(u.decodeUrl,"<s-:s>")),B.bind("eval",ft(Nt,"<sx?:x>")),B.bind("toMillis",ft(c.toMillis,"<s-s?:n>")),B.bind("fromMillis",ft(c.fromMillis,"<n-s?s?:s>")),B.bind("clone",ft(rs,"<(oa)-:o>"));var Fn={S0101:"String literal must be terminated by a matching quote",S0102:"Number out of range: {{token}}",S0103:"Unsupported escape sequence: \\{{token}}",S0104:"The escape sequence \\u must be followed by 4 hex digits",S0105:"Quoted property name must be terminated with a backquote (`)",S0106:"Comment has no closing tag",S0201:"Syntax error: {{token}}",S0202:"Expected {{value}}, got {{token}}",S0203:"Expected {{value}} before end of expression",S0204:"Unknown operator: {{token}}",S0205:"Unexpected token: {{token}}",S0206:"Unknown expression type: {{token}}",S0207:"Unexpected end of expression",S0208:"Parameter {{value}} of function definition must be a variable name (start with $)",S0209:"A predicate cannot follow a grouping expression in a step",S0210:"Each step can only have one grouping expression",S0211:"The symbol {{token}} cannot be used as a unary operator",S0212:"The left side of := must be a variable name (start with $)",S0213:"The literal value {{value}} cannot be used as a step within a path expression",S0214:"The right side of {{token}} must be a variable name (start with $)",S0215:"A context variable binding must precede any predicates on a step",S0216:"A context variable binding must precede the 'order-by' clause on a step",S0217:"The object representing the 'parent' cannot be derived from this expression",S0301:"Empty regular expressions are not allowed",S0302:"No terminating / in regular expression",S0402:"Choice groups containing parameterized types are not supported",S0401:"Type parameters can only be applied to functions and arrays",S0500:"Attempted to evaluate an expression containing syntax error(s)",T0410:"Argument {{index}} of function {{token}} does not match function signature",T0411:"Context value is not a compatible type with argument {{index}} of function {{token}}",T0412:"Argument {{index}} of function {{token}} must be an array of {{type}}",D1001:"Number out of range: {{value}}",D1002:"Cannot negate a non-numeric value: {{value}}",T1003:"Key in object structure must evaluate to a string; got: {{value}}",D1004:"Regular expression matches zero length string",T1005:"Attempted to invoke a non-function. Did you mean ${{{token}}}?",T1006:"Attempted to invoke a non-function",T1007:"Attempted to partially apply a non-function. Did you mean ${{{token}}}?",T1008:"Attempted to partially apply a non-function",D1009:"Multiple key definitions evaluate to same key: {{value}}",T1010:"The matcher function argument passed to function {{token}} does not return the correct object structure",T2001:"The left side of the {{token}} operator must evaluate to a number",T2002:"The right side of the {{token}} operator must evaluate to a number",T2003:"The left side of the range operator (..) must evaluate to an integer",T2004:"The right side of the range operator (..) must evaluate to an integer",D2005:"The left side of := must be a variable name (start with $)",T2006:"The right side of the function application operator ~> must be a function",T2007:"Type mismatch when comparing values {{value}} and {{value2}} in order-by clause",T2008:"The expressions within an order-by clause must evaluate to numeric or string values",T2009:"The values {{value}} and {{value2}} either side of operator {{token}} must be of the same data type",T2010:"The expressions either side of operator {{token}} must evaluate to numeric or string values",T2011:"The insert/update clause of the transform expression must evaluate to an object: {{value}}",T2012:"The delete clause of the transform expression must evaluate to a string or array of strings: {{value}}",T2013:"The transform expression clones the input object using the $clone() function.  This has been overridden in the current scope by a non-function.",D2014:"The size of the sequence allocated by the range operator (..) must not exceed 1e6.  Attempted to allocate {{value}}.",D3001:"Attempting to invoke string function on Infinity or NaN",D3010:"Second argument of replace function cannot be an empty string",D3011:"Fourth argument of replace function must evaluate to a positive number",D3012:"Attempted to replace a matched string with a non-string value",D3020:"Third argument of split function must evaluate to a positive number",D3030:"Unable to cast value to a number: {{value}}",D3040:"Third argument of match function must evaluate to a positive number",D3050:"The second argument of reduce function must be a function with at least two arguments",D3060:"The sqrt function cannot be applied to a negative number: {{value}}",D3061:"The power function has resulted in a value that cannot be represented as a JSON number: base={{value}}, exponent={{exp}}",D3070:"The single argument form of the sort function can only be applied to an array of strings or an array of numbers.  Use the second argument to specify a comparison function",D3080:"The picture string must only contain a maximum of two sub-pictures",D3081:"The sub-picture must not contain more than one instance of the 'decimal-separator' character",D3082:"The sub-picture must not contain more than one instance of the 'percent' character",D3083:"The sub-picture must not contain more than one instance of the 'per-mille' character",D3084:"The sub-picture must not contain both a 'percent' and a 'per-mille' character",D3085:"The mantissa part of a sub-picture must contain at least one character that is either an 'optional digit character' or a member of the 'decimal digit family'",D3086:"The sub-picture must not contain a passive character that is preceded by an active character and that is followed by another active character",D3087:"The sub-picture must not contain a 'grouping-separator' character that appears adjacent to a 'decimal-separator' character",D3088:"The sub-picture must not contain a 'grouping-separator' at the end of the integer part",D3089:"The sub-picture must not contain two adjacent instances of the 'grouping-separator' character",D3090:"The integer part of the sub-picture must not contain a member of the 'decimal digit family' that is followed by an instance of the 'optional digit character'",D3091:"The fractional part of the sub-picture must not contain an instance of the 'optional digit character' that is followed by a member of the 'decimal digit family'",D3092:"A sub-picture that contains a 'percent' or 'per-mille' character must not contain a character treated as an 'exponent-separator'",D3093:"The exponent part of the sub-picture must comprise only of one or more characters that are members of the 'decimal digit family'",D3100:"The radix of the formatBase function must be between 2 and 36.  It was given {{value}}",D3110:"The argument of the toMillis function must be an ISO 8601 formatted timestamp. Given {{value}}",D3120:"Syntax error in expression passed to function eval: {{value}}",D3121:"Dynamic error evaluating the expression passed to function eval: {{value}}",D3130:"Formatting or parsing an integer as a sequence starting with {{value}} is not supported by this implementation",D3131:"In a decimal digit pattern, all digits must be from the same decimal group",D3132:"Unknown component specifier {{value}} in date/time picture string",D3133:"The 'name' modifier can only be applied to months and days in the date/time picture string, not {{value}}",D3134:"The timezone integer format specifier cannot have more than four digits",D3135:"No matching closing bracket ']' in date/time picture string",D3136:"The date/time picture string is missing specifiers required to parse the timestamp",D3137:"{{{message}}}",D3138:"The $single() function expected exactly 1 matching result.  Instead it matched more.",D3139:"The $single() function expected exactly 1 matching result.  Instead it matched 0.",D3140:"Malformed URL passed to ${{{functionName}}}(): {{value}}",D3141:"{{{message}}}"};function Ee(m){var L=Fn[m.code];if(typeof L<"u"){var R=L.replace(/\{\{\{([^}]+)}}}/g,function(){return m[arguments[1]]});R=R.replace(/\{\{([^}]+)}}/g,function(){return JSON.stringify(m[arguments[1]])}),m.message=R}}function Oi(m,L){var R,P;try{R=k(m,L&&L.recover),P=R.errors,delete R.errors}catch(N){throw Ee(N),N}var p=Ke(B),g=new Date;return p.bind("now",ft(function(N,w){return c.fromMillis(g.getTime(),N,w)},"<s?s?:s>")),p.bind("millis",ft(function(){return g.getTime()},"<:n>")),L&&L.RegexEngine?Oi.RegexEngine=L.RegexEngine:Oi.RegexEngine=RegExp,{evaluate:function(N,w,G){if(typeof P<"u"){var j={code:"S0500",position:0};throw Ee(j),j}if(typeof w<"u"){var ot;ot=Ke(p);for(var bt in w)ot.bind(bt,w[bt])}else ot=p;ot.bind("$",N),g=new Date,ot.timestamp=g,Array.isArray(N)&&!$(N)&&(N=F(N),N.outerWrapper=!0);var Wt,$t;if(typeof G=="function"){ot.async=!0;var oe=function(ce){Ee(ce),G(ce,null)},Qt=function(ce){Wt=$t.next(ce),Wt.done?G(null,Wt.value):Wt.value.then(Qt).catch(oe)};$t=Y(R,N,ot),Wt=$t.next(),Wt.value.then(Qt).catch(oe)}else try{for($t=Y(R,N,ot),Wt=$t.next();!Wt.done;)Wt=$t.next(Wt.value);return Wt.value}catch(ce){throw Ee(ce),ce}},assign:function(N,w){p.bind(N,w)},registerFunction:function(N,w,G){var j=ft(w,G);p.bind(N,j)},ast:function(){return R},errors:function(){return P}}}return Oi.parser=k,Oi}();o.exports=M},{"./datetime":1,"./functions":2,"./parser":4,"./signature":5,"./utils":6}],4:[function(s,o,h){var c=s("./signature");let u=(()=>{"use strict";var f={".":75,"[":80,"]":0,"{":70,"}":0,"(":80,")":0,",":0,"@":80,"#":80,";":80,":":80,"?":20,"+":50,"-":50,"*":60,"/":60,"%":60,"|":20,"=":40,"<":40,">":40,"^":40,"**":60,"..":20,":=":10,"!=":40,"<=":40,">=":40,"~>":40,and:30,or:25,in:40,"&":50,"!":0,"~":0},k={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},x=function(C){var y=0,I=C.length,F=function(ct,J){var z={type:ct,value:J,position:y};return z},$=function(){for(var ct=y,J=0,z,at;y<I;){var B=C.charAt(y);if(B==="/"&&C.charAt(y-1)!=="\\"&&J===0){if(z=C.substring(ct,y),z==="")throw{code:"S0301",stack:new Error().stack,position:y};for(y++,B=C.charAt(y),ct=y;B==="i"||B==="m";)y++,B=C.charAt(y);return at=C.substring(ct,y)+"g",new RegExp(z,at)}(B==="("||B==="["||B==="{")&&C.charAt(y-1)!=="\\"&&J++,(B===")"||B==="]"||B==="}")&&C.charAt(y-1)!=="\\"&&J--,y++}throw{code:"S0302",stack:new Error().stack,position:y}},ht=function(ct){if(y>=I)return null;for(var J=C.charAt(y);y<I&&` 	
\r\v`.indexOf(J)>-1;)y++,J=C.charAt(y);if(J==="/"&&C.charAt(y+1)==="*"){var z=y;for(y+=2,J=C.charAt(y);!(J==="*"&&C.charAt(y+1)==="/");)if(J=C.charAt(++y),y>=I)throw{code:"S0106",stack:new Error().stack,position:z};return y+=2,J=C.charAt(y),ht(ct)}if(ct!==!0&&J==="/")return y++,F("regex",$());if(J==="."&&C.charAt(y+1)===".")return y+=2,F("operator","..");if(J===":"&&C.charAt(y+1)==="=")return y+=2,F("operator",":=");if(J==="!"&&C.charAt(y+1)==="=")return y+=2,F("operator","!=");if(J===">"&&C.charAt(y+1)==="=")return y+=2,F("operator",">=");if(J==="<"&&C.charAt(y+1)==="=")return y+=2,F("operator","<=");if(J==="*"&&C.charAt(y+1)==="*")return y+=2,F("operator","**");if(J==="~"&&C.charAt(y+1)===">")return y+=2,F("operator","~>");if(Object.prototype.hasOwnProperty.call(f,J))return y++,F("operator",J);if(J==='"'||J==="'"){var at=J;y++;for(var B="";y<I;){if(J=C.charAt(y),J==="\\")if(y++,J=C.charAt(y),Object.prototype.hasOwnProperty.call(k,J))B+=k[J];else if(J==="u"){var Y=C.substr(y+1,4);if(/^[0-9a-fA-F]+$/.test(Y)){var dt=parseInt(Y,16);B+=String.fromCharCode(dt),y+=4}else throw{code:"S0104",stack:new Error().stack,position:y}}else throw{code:"S0103",stack:new Error().stack,position:y,token:J};else{if(J===at)return y++,F("string",B);B+=J}y++}throw{code:"S0101",stack:new Error().stack,position:y}}var rt=/^-?(0|([1-9][0-9]*))(\.[0-9]+)?([Ee][-+]?[0-9]+)?/,Ft=rt.exec(C.substring(y));if(Ft!==null){var Bt=parseFloat(Ft[0]);if(!isNaN(Bt)&&isFinite(Bt))return y+=Ft[0].length,F("number",Bt);throw{code:"S0102",stack:new Error().stack,position:y,token:Ft[0]}}var Dt;if(J==="`"){y++;var Mt=C.indexOf("`",y);if(Mt!==-1)return Dt=C.substring(y,Mt),y=Mt+1,F("name",Dt);throw y=I,{code:"S0105",stack:new Error().stack,position:y}}for(var kt=y,Rt;;)if(Rt=C.charAt(kt),kt===I||` 	
\r\v`.indexOf(Rt)>-1||Object.prototype.hasOwnProperty.call(f,Rt)){if(C.charAt(y)==="$")return Dt=C.substring(y+1,kt),y=kt,F("variable",Dt);switch(Dt=C.substring(y,kt),y=kt,Dt){case"or":case"in":case"and":return F("operator",Dt);case"true":return F("value",!0);case"false":return F("value",!1);case"null":return F("value",null);default:return y===I&&Dt===""?null:F("name",Dt)}}else kt++};return ht},M=function(C,y){var I,F,$={},ht=[],ct=function(){var A=[];I.id!=="(end)"&&A.push({type:I.type,value:I.value,position:I.position});for(var D=F();D!==null;)A.push(D),D=F();return A},J={nud:function(){var A={code:"S0211",token:this.value,position:this.position};if(y)return A.remaining=ct(),A.type="error",ht.push(A),A;throw A.stack=new Error().stack,A}},z=function(A,D){var tt=$[A];return D=D||0,tt?D>=tt.lbp&&(tt.lbp=D):(tt=Object.create(J),tt.id=tt.value=A,tt.lbp=D,$[A]=tt),tt},at=function(A){if(y){A.remaining=ct(),ht.push(A);var D=$["(error)"];return I=Object.create(D),I.error=A,I.type="(error)",I}else throw A.stack=new Error().stack,A},B=function(A,D){if(A&&I.id!==A){var tt;I.id==="(end)"?tt="S0203":tt="S0202";var lt={code:tt,position:I.position,token:I.value,value:A};return at(lt)}var Lt=F(D);if(Lt===null)return I=$["(end)"],I.position=C.length,I;var Z=Lt.value,U=Lt.type,W;switch(U){case"name":case"variable":W=$["(name)"];break;case"operator":if(W=$[Z],!W)return at({code:"S0204",stack:new Error().stack,position:Lt.position,token:Z});break;case"string":case"number":case"value":W=$["(literal)"];break;case"regex":U="regex",W=$["(regex)"];break;default:return at({code:"S0205",stack:new Error().stack,position:Lt.position,token:Z})}return I=Object.create(W),I.value=Z,I.type=U,I.position=Lt.position,I},Y=function(A){var D,tt=I;for(B(null,!0),D=tt.nud();A<I.lbp;)tt=I,B(),D=tt.led(D);return D},dt=function(A){var D=z(A,0);D.nud=function(){return this}},rt=function(A,D,tt){var lt=D||f[A],Lt=z(A,lt);return Lt.led=tt||function(Z){return this.lhs=Z,this.rhs=Y(lt),this.type="binary",this},Lt},Ft=function(A,D,tt){var lt=z(A,D);return lt.led=tt,lt},Bt=function(A,D){var tt=z(A);return tt.nud=D||function(){return this.expression=Y(70),this.type="unary",this},tt};dt("(end)"),dt("(name)"),dt("(literal)"),dt("(regex)"),z(":"),z(";"),z(","),z(")"),z("]"),z("}"),z(".."),rt("."),rt("+"),rt("-"),rt("*"),rt("/"),rt("%"),rt("="),rt("<"),rt(">"),rt("!="),rt("<="),rt(">="),rt("&"),rt("and"),rt("or"),rt("in"),dt("and"),dt("or"),dt("in"),Bt("-"),rt("~>"),Ft("(error)",10,function(A){return this.lhs=A,this.error=I.error,this.remaining=ct(),this.type="error",this}),Bt("*",function(){return this.type="wildcard",this}),Bt("**",function(){return this.type="descendant",this}),Bt("%",function(){return this.type="parent",this}),rt("(",f["("],function(A){if(this.procedure=A,this.type="function",this.arguments=[],I.id!==")")for(;I.type==="operator"&&I.id==="?"?(this.type="partial",this.arguments.push(I),B("?")):this.arguments.push(Y(0)),I.id===",";)B(",");if(B(")",!0),A.type==="name"&&(A.value==="function"||A.value==="\u03BB")){if(this.arguments.forEach(function(Z,U){if(Z.type!=="variable")return at({code:"S0208",stack:new Error().stack,position:Z.position,token:Z.value,value:U+1})}),this.type="lambda",I.id==="<"){for(var D=I.position,tt=1,lt="<";tt>0&&I.id!=="{"&&I.id!=="(end)";){var Lt=B();Lt.id===">"?tt--:Lt.id==="<"&&tt++,lt+=Lt.value}B(">");try{this.signature=c(lt)}catch(Z){return Z.position=D+Z.offset,at(Z)}}B("{"),this.body=Y(0),B("}")}return this}),Bt("(",function(){for(var A=[];I.id!==")"&&(A.push(Y(0)),I.id===";");)B(";");return B(")",!0),this.type="block",this.expressions=A,this}),Bt("[",function(){var A=[];if(I.id!=="]")for(;;){var D=Y(0);if(I.id===".."){var tt={type:"binary",value:"..",position:I.position,lhs:D};B(".."),tt.rhs=Y(0),D=tt}if(A.push(D),I.id!==",")break;B(",")}return B("]",!0),this.expressions=A,this.type="unary",this}),rt("[",f["["],function(A){if(I.id==="]"){for(var D=A;D&&D.type==="binary"&&D.value==="[";)D=D.lhs;return D.keepArray=!0,B("]"),A}else return this.lhs=A,this.rhs=Y(f["]"]),this.type="binary",B("]",!0),this}),rt("^",f["^"],function(A){B("(");for(var D=[];;){var tt={descending:!1};if(I.id==="<"?B("<"):I.id===">"&&(tt.descending=!0,B(">")),tt.expression=Y(0),D.push(tt),I.id!==",")break;B(",")}return B(")"),this.lhs=A,this.rhs=D,this.type="binary",this});var Dt=function(A){var D=[];if(I.id!=="}")for(;;){var tt=Y(0);B(":");var lt=Y(0);if(D.push([tt,lt]),I.id!==",")break;B(",")}return B("}",!0),typeof A>"u"?(this.lhs=D,this.type="unary"):(this.lhs=A,this.rhs=D,this.type="binary"),this};Bt("{",Dt),rt("{",f["{"],Dt),Ft(":=",f[":="],function(A){return A.type!=="variable"?at({code:"S0212",stack:new Error().stack,position:A.position,token:A.value}):(this.lhs=A,this.rhs=Y(f[":="]-1),this.type="binary",this)}),rt("@",f["@"],function(A){return this.lhs=A,this.rhs=Y(f["@"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"@"}):(this.type="binary",this)}),rt("#",f["#"],function(A){return this.lhs=A,this.rhs=Y(f["#"]),this.rhs.type!=="variable"?at({code:"S0214",stack:new Error().stack,position:this.rhs.position,token:"#"}):(this.type="binary",this)}),rt("?",f["?"],function(A){return this.type="condition",this.condition=A,this.then=Y(0),I.id===":"&&(B(":"),this.else=Y(0)),this}),Bt("|",function(){return this.type="transform",this.pattern=Y(0),B("|"),this.update=Y(0),I.id===","&&(B(","),this.delete=Y(0)),B("|"),this});var Mt=function(A){var D;if(A.type==="function"&&!A.predicate){var tt={type:"lambda",thunk:!0,arguments:[],position:A.position};tt.body=A,D=tt}else if(A.type==="condition")A.then=Mt(A.then),typeof A.else<"u"&&(A.else=Mt(A.else)),D=A;else if(A.type==="block"){var lt=A.expressions.length;lt>0&&(A.expressions[lt-1]=Mt(A.expressions[lt-1])),D=A}else D=A;return D},kt=0,Rt=0,ue=[],Tt=function(A,D){switch(A.type){case"name":case"wildcard":D.level--,D.level===0&&(typeof A.ancestor>"u"||(ue[D.index].slot.label=A.ancestor.label),A.ancestor=D,A.tuple=!0);break;case"parent":D.level++;break;case"block":A.expressions.length>0&&(A.tuple=!0,D=Tt(A.expressions[A.expressions.length-1],D));break;case"path":A.tuple=!0;var tt=A.steps.length-1;for(D=Tt(A.steps[tt--],D);D.level>0&&tt>=0;)D=Tt(A.steps[tt--],D);break;default:throw{code:"S0217",token:A.type,position:A.position}}return D},mt=function(A,D){if(typeof D.seekingParent<"u"||D.type==="parent"){var tt=typeof D.seekingParent<"u"?D.seekingParent:[];D.type==="parent"&&tt.push(D.slot),typeof A.seekingParent>"u"?A.seekingParent=tt:Array.prototype.push.apply(A.seekingParent,tt)}},ne=function(A){var D=A.steps.length-1,tt=A.steps[D],lt=typeof tt.seekingParent<"u"?tt.seekingParent:[];tt.type==="parent"&&lt.push(tt.slot);for(var Lt=0;Lt<lt.length;Lt++){var Z=lt[Lt];for(D=A.steps.length-2;Z.level>0;){if(D<0){typeof A.seekingParent>"u"?A.seekingParent=[Z]:A.seekingParent.push(Z);break}for(var U=A.steps[D--];D>=0&&U.focus&&A.steps[D].focus;)U=A.steps[D--];Z=Tt(U,Z)}}},At=function(A){var D;switch(A.type){case"binary":switch(A.value){case".":var tt=At(A.lhs);tt.type==="path"?D=tt:D={type:"path",steps:[tt]},tt.type==="parent"&&(D.seekingParent=[tt.slot]);var lt=At(A.rhs);lt.type==="function"&&lt.procedure.type==="path"&&lt.procedure.steps.length===1&&lt.procedure.steps[0].type==="name"&&D.steps[D.steps.length-1].type==="function"&&(D.steps[D.steps.length-1].nextFunction=lt.procedure.steps[0].value),lt.type==="path"?Array.prototype.push.apply(D.steps,lt.steps):(typeof lt.predicate<"u"&&(lt.stages=lt.predicate,delete lt.predicate),D.steps.push(lt)),D.steps.filter(function(q){if(q.type==="number"||q.type==="value")throw{code:"S0213",stack:new Error().stack,position:q.position,value:q.value};return q.type==="string"}).forEach(function(q){q.type="name"}),D.steps.filter(function(q){return q.keepArray===!0}).length>0&&(D.keepSingletonArray=!0);var Lt=D.steps[0];Lt.type==="unary"&&Lt.value==="["&&(Lt.consarray=!0);var Z=D.steps[D.steps.length-1];Z.type==="unary"&&Z.value==="["&&(Z.consarray=!0),ne(D);break;case"[":D=At(A.lhs);var U=D,W="predicate";if(D.type==="path"&&(U=D.steps[D.steps.length-1],W="stages"),typeof U.group<"u")throw{code:"S0209",stack:new Error().stack,position:A.position};typeof U[W]>"u"&&(U[W]=[]);var H=At(A.rhs);typeof H.seekingParent<"u"&&(H.seekingParent.forEach(q=>{q.level===1?Tt(U,q):q.level--}),mt(U,H)),U[W].push({type:"filter",expr:H,position:A.position});break;case"{":if(D=At(A.lhs),typeof D.group<"u")throw{code:"S0210",stack:new Error().stack,position:A.position};D.group={lhs:A.rhs.map(function(q){return[At(q[0]),At(q[1])]}),position:A.position};break;case"^":D=At(A.lhs),D.type!=="path"&&(D={type:"path",steps:[D]});var et={type:"sort",position:A.position};et.terms=A.rhs.map(function(q){var gt=At(q.expression);return mt(et,gt),{descending:q.descending,expression:gt}}),D.steps.push(et),ne(D);break;case":=":D={type:"bind",value:A.value,position:A.position},D.lhs=At(A.lhs),D.rhs=At(A.rhs),mt(D,D.rhs);break;case"@":if(D=At(A.lhs),U=D,D.type==="path"&&(U=D.steps[D.steps.length-1]),typeof U.stages<"u"||typeof U.predicate<"u")throw{code:"S0215",stack:new Error().stack,position:A.position};if(U.type==="sort")throw{code:"S0216",stack:new Error().stack,position:A.position};A.keepArray&&(U.keepArray=!0),U.focus=A.rhs.value,U.tuple=!0;break;case"#":D=At(A.lhs),U=D,D.type==="path"?U=D.steps[D.steps.length-1]:(D={type:"path",steps:[D]},typeof U.predicate<"u"&&(U.stages=U.predicate,delete U.predicate)),typeof U.stages>"u"?U.index=A.rhs.value:U.stages.push({type:"index",value:A.rhs.value,position:A.position}),U.tuple=!0;break;case"~>":D={type:"apply",value:A.value,position:A.position},D.lhs=At(A.lhs),D.rhs=At(A.rhs);break;default:D={type:A.type,value:A.value,position:A.position},D.lhs=At(A.lhs),D.rhs=At(A.rhs),mt(D,D.lhs),mt(D,D.rhs)}break;case"unary":D={type:A.type,value:A.value,position:A.position},A.value==="["?D.expressions=A.expressions.map(function(q){var gt=At(q);return mt(D,gt),gt}):A.value==="{"?D.lhs=A.lhs.map(function(q){var gt=At(q[0]);mt(D,gt);var Kt=At(q[1]);return mt(D,Kt),[gt,Kt]}):(D.expression=At(A.expression),A.value==="-"&&D.expression.type==="number"?(D=D.expression,D.value=-D.value):mt(D,D.expression));break;case"function":case"partial":D={type:A.type,name:A.name,value:A.value,position:A.position},D.arguments=A.arguments.map(function(q){var gt=At(q);return mt(D,gt),gt}),D.procedure=At(A.procedure);break;case"lambda":D={type:A.type,arguments:A.arguments,signature:A.signature,position:A.position};var nt=At(A.body);D.body=Mt(nt);break;case"condition":D={type:A.type,position:A.position},D.condition=At(A.condition),mt(D,D.condition),D.then=At(A.then),mt(D,D.then),typeof A.else<"u"&&(D.else=At(A.else),mt(D,D.else));break;case"transform":D={type:A.type,position:A.position},D.pattern=At(A.pattern),D.update=At(A.update),typeof A.delete<"u"&&(D.delete=At(A.delete));break;case"block":D={type:A.type,position:A.position},D.expressions=A.expressions.map(function(q){var gt=At(q);return mt(D,gt),(gt.consarray||gt.type==="path"&&gt.steps[0].consarray)&&(D.consarray=!0),gt});break;case"name":D={type:"path",steps:[A]},A.keepArray&&(D.keepSingletonArray=!0);break;case"parent":D={type:"parent",slot:{label:"!"+kt++,level:1,index:Rt++}},ue.push(D);break;case"string":case"number":case"value":case"wildcard":case"descendant":case"variable":case"regex":D=A;break;case"operator":if(A.value==="and"||A.value==="or"||A.value==="in")A.type="name",D=At(A);else if(A.value==="?")D=A;else throw{code:"S0201",stack:new Error().stack,position:A.position,token:A.value};break;case"error":D=A,A.lhs&&(D=At(A.lhs));break;default:var K="S0206";A.id==="(end)"&&(K="S0207");var Q={code:K,position:A.position,token:A.value};if(y)return ht.push(Q),{type:"error",error:Q};throw Q.stack=new Error().stack,Q}return A.keepArray&&(D.keepArray=!0),D};F=x(C),B();var Gt=Y(0);if(I.id!=="(end)"){var he={code:"S0201",position:I.position,token:I.value};at(he)}if(Gt=At(Gt),Gt.type==="parent"||typeof Gt.seekingParent<"u")throw{code:"S0217",token:Gt.type,position:Gt.position};return ht.length>0&&(Gt.errors=ht),Gt};return M})();o.exports=u},{"./signature":5}],5:[function(s,o,h){var c=s("./utils");let u=(()=>{"use strict";var f={a:"arrays",b:"booleans",f:"functions",n:"numbers",o:"objects",s:"strings"};function k(x){for(var M=1,C=[],y={},I=y;M<x.length;){var F=x.charAt(M);if(F===":")break;var $=function(){C.push(y),I=y,y={}},ht=function(rt,Ft,Bt,Dt){for(var Mt=1,kt=Ft;kt<rt.length;)if(kt++,F=rt.charAt(kt),F===Dt){if(Mt--,Mt===0)break}else F===Bt&&Mt++;return kt};switch(F){case"s":case"n":case"b":case"l":case"o":y.regex="["+F+"m]",y.type=F,$();break;case"a":y.regex="[asnblfom]",y.type=F,y.array=!0,$();break;case"f":y.regex="f",y.type=F,$();break;case"j":y.regex="[asnblom]",y.type=F,$();break;case"x":y.regex="[asnblfom]",y.type=F,$();break;case"-":I.context=!0,I.contextRegex=new RegExp(I.regex),I.regex+="?";break;case"?":case"+":I.regex+=F;break;case"(":var ct=ht(x,M,"(",")"),J=x.substring(M+1,ct);if(J.indexOf("<")===-1)y.regex="["+J+"m]";else throw{code:"S0402",stack:new Error().stack,value:J,offset:M};y.type="("+J+")",M=ct,$();break;case"<":if(I.type==="a"||I.type==="f"){var z=ht(x,M,"<",">");I.subtype=x.substring(M+1,z),M=z}else throw{code:"S0401",stack:new Error().stack,value:I.type,offset:M};break}M++}var at="^"+C.map(function(rt){return"("+rt.regex+")"}).join("")+"$",B=new RegExp(at),Y=function(rt){var Ft;if(c.isFunction(rt))Ft="f";else{var Bt=typeof rt;switch(Bt){case"string":Ft="s";break;case"number":Ft="n";break;case"boolean":Ft="b";break;case"object":rt===null?Ft="l":Array.isArray(rt)?Ft="a":Ft="o";break;case"undefined":default:Ft="m"}}return Ft},dt=function(rt,Ft){for(var Bt="^",Dt=0,Mt=0;Mt<C.length;Mt++){Bt+=C[Mt].regex;var kt=Ft.match(Bt);if(kt===null)throw{code:"T0410",stack:new Error().stack,value:rt[Dt],index:Dt+1};Dt=kt[0].length}throw{code:"T0410",stack:new Error().stack,value:rt[Dt],index:Dt+1}};return{definition:x,validate:function(rt,Ft){var Bt="";rt.forEach(function(Rt){Bt+=Y(Rt)});var Dt=B.exec(Bt);if(Dt){var Mt=[],kt=0;return C.forEach(function(Rt,ue){var Tt=rt[kt],mt=Dt[ue+1];if(mt==="")if(Rt.context&&Rt.contextRegex){var ne=Y(Ft);if(Rt.contextRegex.test(ne))Mt.push(Ft);else throw{code:"T0411",stack:new Error().stack,value:Ft,index:kt+1}}else Mt.push(Tt),kt++;else mt.split("").forEach(function(At){if(Rt.type==="a"){if(At==="m")Tt=void 0;else{Tt=rt[kt];var Gt=!0;if(typeof Rt.subtype<"u"){if(At!=="a"&&mt!==Rt.subtype)Gt=!1;else if(At==="a"&&Tt.length>0){var he=Y(Tt[0]);if(he!==Rt.subtype.charAt(0))Gt=!1;else{var A=Tt.filter(function(D){return Y(D)!==he});Gt=A.length===0}}}if(!Gt)throw{code:"T0412",stack:new Error().stack,value:Tt,index:kt+1,type:f[Rt.subtype]};At!=="a"&&(Tt=[Tt])}Mt.push(Tt),kt++}else Mt.push(Tt),kt++})}),Mt}dt(rt,Bt)}}}return k})();o.exports=u},{"./utils":6}],6:[function(s,o,h){let c=(()=>{"use strict";function u(z){var at=!1;if(typeof z=="number"&&(at=!isNaN(z),at&&!isFinite(z)))throw{code:"D1001",value:z,stack:new Error().stack};return at}function f(z){var at=!1;return Array.isArray(z)&&(at=z.filter(function(B){return typeof B!="string"}).length===0),at}function k(z){var at=!1;return Array.isArray(z)&&(at=z.filter(function(B){return!u(B)}).length===0),at}function x(){var z=[];return z.sequence=!0,arguments.length===1&&z.push(arguments[0]),z}function M(z){return z.sequence===!0&&Array.isArray(z)}function C(z){return z&&(z._jsonata_function===!0||z._jsonata_lambda===!0)||typeof z=="function"}function y(z){var at=typeof z.arity=="number"?z.arity:typeof z.implementation=="function"?z.implementation.length:typeof z.length=="number"?z.length:z.arguments.length;return at}function I(z){return z&&z._jsonata_lambda===!0}var F=typeof Symbol=="function"?Symbol:{},$=F.iterator||"@@iterator";function ht(z){return typeof z=="object"&&z!==null&&$ in z&&"next"in z&&typeof z.next=="function"}function ct(z,at){if(z===at)return!0;if(typeof z=="object"&&typeof at=="object"&&z!==null&&at!==null){if(Array.isArray(z)&&Array.isArray(at)){if(z.length!==at.length)return!1;for(var B=0;B<z.length;B++)if(!ct(z[B],at[B]))return!1;return!0}var Y=Object.getOwnPropertyNames(z),dt=Object.getOwnPropertyNames(at);if(Y.length!==dt.length)return!1;for(Y=Y.sort(),dt=dt.sort(),B=0;B<Y.length;B++)if(Y[B]!==dt[B])return!1;for(B=0;B<Y.length;B++){var rt=Y[B];if(!ct(z[rt],at[rt]))return!1}return!0}return!1}function J(z){var at=[];for(let B of z)at.push(B);return at}return{isNumeric:u,isArrayOfStrings:f,isArrayOfNumbers:k,createSequence:x,isSequence:M,isFunction:C,isLambda:I,isIterable:ht,getFunctionArity:y,isDeepEqual:ct,stringToArray:J}})();o.exports=c},{}]},{},[3])(3)})});var eh=V(_n=>{"use strict";var Nb=_n&&_n.__importDefault||function(i){return i&&i.__esModule?i:{default:i}};Object.defineProperty(_n,"__esModule",{value:!0});_n.locEnd=_n.locStart=_n.parse=void 0;var bb=Nb(af()),Ab=i=>{try{let t=[],e=i.matchAll(/\/\*((\*(?!\/)|[^*])*)\*\//g);for(let o of e){let h=o.index;if(h===void 0)continue;let c=o[1];!c||t.push({position:h,value:c.trim()})}let s=(0,bb.default)(i).ast();return Object.assign(Object.assign({},s),{jsonataComments:t})}catch(t){let e=t,o=["code","position","token"].filter(c=>e[c]!==void 0).map(c=>`${c}: ${e[c]}`),h=[e.message,...o].join(", ");throw new Error(h)}};_n.parse=Ab;var Ib=i=>i.position;_n.locStart=Ib;var Sb=()=>0;_n.locEnd=Sb});var ff=V(gn=>{"use strict";var Ob=gn&&gn.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),Lb=gn&&gn.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),Pb=gn&&gn.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&Ob(t,i,e);return Lb(t,i),t};Object.defineProperty(gn,"__esModule",{value:!0});gn.print=void 0;var Db=Pb(require("prettier")),hf=[],wo=-1,Rb=(i,t,e)=>{var s,o;let h=i.getValue();"jsonataComments"in h&&(wo=-1,hf=h.jsonataComments);let c=(o=h.type==="path"?(s=h.steps[0])===null||s===void 0?void 0:s.position:h.position)!==null&&o!==void 0?o:wo,u=hf.filter(x=>x.position>wo&&x.position<c);wo=c;let f=u.map(Fb),k=wb(h,i,t,e);return f.length>0?xe([f,k]):k};gn.print=Rb;var wb=(i,...t)=>{if(i.type==="binary")return Bb(i,...t);if(i.type==="function")return lf(i,...t);if(i.type==="partial")return lf(i,...t);if(i.type==="variable")return Gb(i,...t);if(i.type==="wildcard")return Wb(i,...t);if(i.type==="descendant")return Yb(i,...t);if(i.type==="operator")return qb(i,...t);if(i.type==="number")return Mb(i,...t);if(i.type==="string")return Hb(i,...t);if(i.type==="name")return Ub(i,...t);if(i.type==="filter")return Qb(i,...t);if(i.type==="bind")return jb(i,...t);if(i.type==="lambda")return Kb(i,...t);if(i.type==="condition")return zb(i,...t);if(i.type==="value")return $b(i,...t);if(i.type==="block")return Xb(i,...t);if(i.type==="path")return Vb(i,...t);if(i.type==="apply")return Zb(i,...t);if(i.type==="sort")return tA(i,...t);if(i.type==="unary")return iA(i,...t);if(i.type==="parent")return aA(i,...t);if(i.type==="regex")return lA(i,...t);throw new Error(`Unknown node type: ${i.type}`)},{group:xe,indent:Ei,join:zs,line:mn,hardline:Is,breakParent:ih,softline:Tn}=Db.doc.builders,Fb=i=>xe(["/* ",i.value," */",Is]),Bb=(i,t,e,s)=>i.value===".."?xe([s("lhs"),Ei([Tn,i.value,s("rhs")])]):xe([s("lhs"),Ei([mn,i.value," ",s("rhs")])]),Ub=(i,t,e,s)=>xe([uA(i.value),Ii(i,t,e,s),Hi(i),Vi(i),Fo(i,t,e,s),bi(i,t,e,s),Ai(i)]),Mb=(i,t,e,s)=>xe([JSON.stringify(i.value),Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),Hb=(i,t,e,s)=>xe([JSON.stringify(i.value),Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),Vb=(i,t,e,s)=>{let o=i.steps.flatMap((h,c)=>c===0?s(["steps",c]):h.type==="sort"?Ei(["^",s(["steps",c])]):Ei([Tn,".",s(["steps",c])]));return xe([...o,Ii(i,t,e,s)])},lf=(i,t,e,s)=>xe([s("procedure"),"(",uf(i,t,e,s),")",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),uf=(i,t,e,s)=>{var o;if(!(!((o=i.arguments)===null||o===void 0)&&o.length))return"";if(i.arguments.length===1)return s(["arguments",0]);let h=zs([",",mn],t.map(s,"arguments"));return[Ei([Tn,h]),Tn]},Gb=(i,t,e,s)=>xe(["$",i.value,Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i),Fo(i,t,e,s)]),qb=i=>i.value,Wb=i=>i.value,Yb=i=>i.value,Qb=(i,t,e,s)=>xe(["[",Ei([Tn,s("expr")]),Tn,"]"]),jb=(i,t,e,s)=>xe([s("lhs")," ",i.value," ",s("rhs")]),Kb=(i,t,e,s)=>i.thunk?s("body"):xe(["function(",uf(i,t,e,s),") {",Ei([mn,s("body")]),mn,"}",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),zb=(i,t,e,s)=>{let o=t.getParentNode(),c=o?.type==="condition"?[Is,ih]:mn;return xe([s("condition"),Ei([c,"? ",s("then")]),i.else?Ei([c,": ",s("else")]):""])},$b=(i,t,e,s)=>xe([Jb(i,t,e,s),Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),Jb=i=>i.value===null?"null":i.value===!1?"false":i.value===!0?"true":JSON.stringify(i.value),Xb=(i,t,e,s)=>{if(i.expressions.length===0)return xe(["()",bi(i,t,e,s),Ai(i)]);if(i.expressions.length===1)return xe(["(",s(["expressions",0]),")",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i),Fo(i,t,e,s)]);let o=zs([";",Is],t.map(s,"expressions"));return xe(["(",Ei([Is,o]),Is,")",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)])},Zb=(i,t,e,s)=>xe([s("lhs"),Ei([mn,i.value," ",s("rhs")])]),tA=(i,t,e,s)=>{let o=i.terms.map((c,u)=>[eA(c),s(["terms",u,"expression"])]),h=zs([",",mn],o);return xe(["(",Ei([Tn,h]),Tn,")"])},eA=i=>i.descending?">":"<",iA=(i,t,e,s)=>{if(i.value==="{")return nA(i,t,e,s);if(i.value==="[")return rA(i,t,e,s);if(i.value==="-")return oA(i,t,e,s);throw new Error("Unhandled unary node "+i.value)},nA=(i,t,e,s)=>xe(["{",sA(i,t,e,s),"}",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)]),sA=(i,t,e,s)=>{if(i.lhs.length===0)return"";let o=i.lhs.map((f,k)=>xe([s(["lhs",k,0]),": ",s(["lhs",k,1])])),c=i.lhs.some(f=>cf(f[1]))?[Is,ih]:mn,u=zs([",",c],o);return[Ei([c,u]),c]},cf=i=>{if(i.type!=="unary")return!1;if(i.value==="["||i.value==="{")return!0},rA=(i,t,e,s)=>{let o=zs([",",mn],t.map(s,"expressions"));return xe(["[",Ei([Tn,o]),Tn,"]",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)])},oA=(i,t,e,s)=>xe(["-",s("expression")]),aA=(i,t,e,s)=>xe(["%",Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i),Fo(i,t,e,s)]),hA=["i","m"],lA=(i,t,e,s)=>{let o=hA.filter(h=>i.value.flags.includes(h)).join("");return xe([`/${i.value.source}/${o}`,Ii(i,t,e,s),Hi(i),Vi(i),bi(i,t,e,s),Ai(i)])},Hi=i=>i.focus?"@$"+i.focus:"",Vi=i=>i.index?"#$"+i.index:"",bi=(i,t,e,s)=>i.predicate?t.map(s,"predicate"):"",Fo=(i,t,e,s)=>i.stages?t.map(s,"stages"):"",Ai=i=>i.keepArray?"[]":"",Ii=(i,t,e,s)=>{if(i.group===void 0)return"";if(i.group.lhs.length===0)return"{}";let o=i.group.lhs.map((f,k)=>xe([s(["group","lhs",k,0]),": ",s(["group","lhs",k,1])])),c=i.group.lhs.some(f=>cf(f[1]))?[Is,ih]:mn,u=zs([",",c],o);return xe(["{",Ei([c,u]),c,"}"])},uA=i=>i.startsWith("`")&&i.endsWith("`")?i:i.startsWith('"')&&i.endsWith('"')?`\`${i.slice(1,-1)}\``:/\s/.test(i)?`\`${i}\``:["null","false","true"].includes(i)?`\`${i}\``:/^\d+/.test(i)?`\`${i}\``:/[^a-zA-Z_[\]\d]/.test(i)?`\`${i}\``:i});var df=V(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.printers=di.parsers=di.languages=di.AST_FORMAT_NAME=di.AST_PARSER_NAME=void 0;var nh=eh(),cA=ff();di.AST_PARSER_NAME="JSONata";di.AST_FORMAT_NAME="JSONataASTNode";di.languages=[{name:"JSONata",extensions:["jsonata","JSONata"],parsers:[di.AST_PARSER_NAME]}];di.parsers={[di.AST_PARSER_NAME]:{astFormat:di.AST_FORMAT_NAME,parse:nh.parse,locStart:nh.locStart,locEnd:nh.locEnd}};di.printers={[di.AST_FORMAT_NAME]:{print:cA.print}}});var Tf=V(Zi=>{"use strict";var fA=Zi&&Zi.__createBinding||(Object.create?function(i,t,e,s){s===void 0&&(s=e),Object.defineProperty(i,s,{enumerable:!0,get:function(){return t[e]}})}:function(i,t,e,s){s===void 0&&(s=e),i[s]=t[e]}),dA=Zi&&Zi.__setModuleDefault||(Object.create?function(i,t){Object.defineProperty(i,"default",{enumerable:!0,value:t})}:function(i,t){i.default=t}),_f=Zi&&Zi.__importStar||function(i){if(i&&i.__esModule)return i;var t={};if(i!=null)for(var e in i)e!=="default"&&Object.prototype.hasOwnProperty.call(i,e)&&fA(t,i,e);return dA(t,i),t};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.serializeJsonata=Zi.formatJsonata=void 0;var $s=_f(df()),Bo=_f(require("prettier")),pf=eh();function pA(i,t){return mf(),Bo.format(i,Object.assign({parser:$s.AST_PARSER_NAME,plugins:[$s],printWidth:150,tabWidth:2,useTabs:!1},t))}Zi.formatJsonata=pA;function _A(i,t){let e=mA(i);return mf(),Bo.format("ignore text input",Object.assign({parser:$s.AST_PARSER_NAME,plugins:[e],printWidth:150,tabWidth:2,useTabs:!1},t))}Zi.serializeJsonata=_A;var mA=i=>Object.assign(Object.assign({},$s),{parsers:{[$s.AST_PARSER_NAME]:{astFormat:$s.AST_FORMAT_NAME,parse:()=>i,locStart:pf.locStart,locEnd:pf.locEnd}}});function mf(){"clearConfigCache"in Bo&&Bo.clearConfigCache()}});function kf(i){if(gf!=null)return gf;let t=kA(i);if(t==null||Er.existsSync(t)==!1)return sh;let e=Er.readFileSync(t,{encoding:"utf8"});try{let s=JSON.parse(e);return gA(s)}catch(s){console.log(s)}return sh}function gA(i){let t=kr,e=0,s=1,o=4,h=!0,c=!0,u=!0,f=[],k=[],x=null;return typeof i.ignoreDirectives!="undefined"&&i.ignoreDirectives!==null&&(t=i.ignoreDirectives),typeof i.spacesAfterDirective!="undefined"&&i.spacesAfterDirective!==null&&(e=i.spacesAfterDirective),typeof i.spacesAfterControlDirective!="undefined"&&i.spacesAfterControlDirective!==null&&(s=i.spacesAfterControlDirective),typeof i.tabSize!="undefined"&&i.tabSize!==null&&(o=i.tabSize),typeof i.formatDirectivePhpParameters!="undefined"&&i.formatDirectivePhpParameters!==null&&(h=i.formatDirectivePhpParameters),typeof i.formatDirectiveJsonParameters!="undefined"&&i.formatDirectiveJsonParameters!==null&&(c=i.formatDirectiveJsonParameters),typeof i.customIfs!="undefined"&&i.customIfs!==null&&(f=i.customIfs),typeof i.directives!="undefined"&&i.directives!==null&&(k=i.directives),typeof i.formatInsideEcho!="undefined"&&i.formatInsideEcho!==null&&(u=i.formatInsideEcho),typeof i.phpOptions!="undefined"&&(x=i.phpOptions),e<0&&(e=0),s<0&&(s=1),e>3&&(e=3),s>3&&(s=3),{ignoreDirectives:t,spacesAfterDirective:e,spacesAfterControlDirective:s,tabSize:o,formatDirectivePhpParameters:h,formatDirectiveJsonParameters:c,formatInsideEcho:u,customIfs:f,directives:k,phpOptions:x}}function kA(i){let t=Ss.dirname(i);t=="."&&(t=process.cwd());let e=t.split(Ss.sep);for(;e.length>0;){let s=e.join(Ss.sep),o=Ss.join(s,TA);if(Er.existsSync(o))return o;e.pop()}return null}var Er,Ss,TA,sh,gf,rh=Ot(()=>{"use strict";Er=$n(require("fs")),Ss=$n(require("path"));za();Ka();TA=".blade.format.json",sh={ignoreDirectives:[...kr,...Io],spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,customIfs:[],directives:[]}});function Ef(){return lh}function Mo(){return Uo}function oh(i){return["cursorOffset","rangeEnd","rangeStart","locEnd","locStat","printer","originalText","astFormat"].forEach(t=>{delete i[t]}),i}function vf(){return hh}function yf(i){return(0,xf.formatJsonata)(i,{printWidth:20})}function Ho(i){hh=oh(Object.assign({},i,{htmlWhitespaceSensitivity:"ignore",parser:"html",plugins:i.plugins})),Uo=oh(Object.assign({},i,{parser:"php",plugins:[ah.default]})),lh=oh(Object.assign({},i,{parser:"php",plugins:[ah.default],printWidth:1/0}))}function Cf(i){return vr.default.format(i,hh)}function uh(i,t,e=null){let s=i;if(e!=null&&(s=e),typeof t.phpOptions!="undefined"&&t.phpOptions!=null){let o=t.phpOptions;s={...s,...o}}else s={...s,phpVersion:"8.0"};return s}function Nf(i,t,e=null){let s=uh(lh,t,e),o=vr.default.format(i,s).trim();return o=o.substring(5),i.endsWith(";")==!1&&o.endsWith(";")&&(o=o.substring(0,o.length-1)),o.trim()}function bf(i,t,e=null){let s=uh(Uo,t,e),o=vr.default.format(i,s).trim();return o=o.substring(5),i.endsWith(";")==!1&&o.endsWith(";")&&(o=o.substring(0,o.length-1)),o.trim()}function Af(i,t,e=null){let s=uh(Uo,t,e);return vr.default.format(i,s).trim().trim()}var vr,KO,ah,xf,Uo,hh,lh,yr=Ot(()=>{"use strict";vr=$n(require("prettier")),KO=$n(If()),ah=$n(rf()),xf=$n(Tf());rh()});var ch,tn,fh=Ot(()=>{"use strict";Re();Ki();An();bs();As();In();ai();ch=class{constructor(){this.content="";this.chars=[];this.inputLen=0;this.prev=null;this.cur=null;this.next=null;this.currentIndex=0;this.currentContent=[];this.tokens=[]}updateIndex(t){this.currentIndex=t}inputLength(){return this.inputLen}getCurrentIndex(){return this.currentIndex}incrementIndex(){this.currentIndex+=1}getCurrent(){return this.cur}getNext(){return this.next}getPrev(){return this.prev}checkCurrentOffsets(){this.cur=this.chars[this.currentIndex],this.prev=null,this.next=null,this.currentIndex>0&&(this.prev=this.chars[this.currentIndex-1]),this.currentIndex+1<this.inputLen&&(this.next=this.chars[this.currentIndex+1])}pushChar(t){this.currentContent.push(t)}getChar(t){return this.chars[t]}getSeedOffset(){return 0}getContentSubstring(t,e){return this.content.substr(t,e)}getTokens(){return this.tokens}static couldReflow(t){return t.includes("fn(")&&t.includes("=>")}parse(t){for(this.tokens=[],this.content=X.normalizeLineEndings(t),this.chars=this.content.split(""),this.inputLen=this.chars.length,this.currentIndex=0;this.currentIndex<this.inputLen;this.currentIndex+=1){if(this.checkCurrentOffsets(),X.ctypeSpace(this.cur)){this.currentContent.push(this.cur);continue}if(Ve(this.cur)){let e=this.cur,s=Fi(this);this.pushChar(e),this.currentContent=this.currentContent.concat(s.value.split("")),this.pushChar(e),this.currentIndex=s.endedOn;continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_ForwardSlash){Ui(this,!0);continue}if(this.cur==it.Punctuation_ForwardSlash&&this.next==it.Punctuation_Asterisk){Mi(this,!0);continue}if(this.cur!=null)if(this.cur==="f"&&this.next=="n")if(X.ctypePunct(this.prev)||X.ctypeSpace(this.prev)||this.prev==null){this.currentContent.push(this.cur),this.currentContent.push(this.next),this.currentContent.push(" "),this.currentIndex+=1;continue}else this.currentContent.push(this.cur);else this.currentContent.push(this.cur)}if(this.currentContent.length>0){let e=new re;e.content=this.currentContent.join(""),this.currentContent=[],this.tokens.push(e)}}reflow(t){try{this.parse(t)}catch{return t}let e="";return this.tokens.forEach(s=>{s instanceof re&&(e+=s.content)}),e}},tn=ch;tn.breakOperators=["!"],tn.instance=new ch});var pi,Vo=Ot(()=>{"use strict";ai();pi=class{static indentRelative(t,e){let s=X.breakByNewLine(t),o=[];for(let u=0;u<s.length;u++)if(s[u].trim().length>0){o=s.slice(u);break}for(let u=o.length-1;u>=0&&o[u].trim().length==0;u--)o.pop();let h=-1,c="";for(let u=0;u<o.length;u++){let f=o[u],k=f.trimLeft(),x=f.length-k.length;(u==0||x<h)&&(h=x,c=f)}if(h>=0){let u=" ".repeat(e);for(let f=0;f<o.length;f++){let k=o[f];if(k.trim().length==0){o[f]="";continue}let x=k.substring(h);if(f==0){o[f]=k.trimLeft();continue}else o[f]=u+x}}return o.join(`
`)}static shiftIndent(t,e,s=!1){let o=X.breakByNewLine(t.trim()),h=[];if(o.length>1){let c=!0;for(let u=1;u<o.length;u++){let f=o[u],k=f.length-f.trim().length;if(e-k!=0){c=!1;break}}if(c)return t.trim()}for(let c=0;c<o.length;c++){if(c==0&&s){h.push(o[c]);continue}let u=o[c];u.trim().length==0?h.push(""):h.push(" ".repeat(e)+u)}return h.join(`
`)}static shiftClean(t,e){let s=X.breakByNewLine(t),o=[],h=" ".repeat(e),c=!1;return s.forEach(u=>{u.trim().length>0&&(c=!0),c&&(u.trim().length==0?o.push(""):o.push(h+u))}),o.join(`
`)}static inferIndentLevel(t,e,s){let o=0,h=-1;for(let c=0;c<t.length;c++){let u=t[c];if(u.includes(e)){let f=u.trimLeft();o=u.length-f.length,h=c;break}}if(h>0)for(let c=h-1;c>=0;c--){let u=t[c],f=u.trim(),k=u.trimLeft(),x=u.length-f.length;if(k.length!=0&&x!=o&&x<o){let M=o-x;return{targetLevel:o,referenceLevel:x,sourceTabSize:M}}}return{targetLevel:o,referenceLevel:o,sourceTabSize:s}}static indent(t,e,s){let o=pi.inferIndentLevel(t,e,s);return" ".repeat(o.targetLevel)}}});function xA(i){let t="",e=X.breakByNewLine(i);for(let s=0;s<e.length;s++)t+=e[s].trim();return t}var es,Js,Sf=Ot(()=>{"use strict";Za();yr();fh();Ja();ai();Xa();Vo();es=class{static getReasonableDirectivePhpOptions(t,e){return es.defaultControlDirectiveNames.includes(t.name)?{...e,trailingCommaPHP:!1}:e}static printDirective(t,e,s,o,h){var f,k,x,M;let c=t.directiveName.trim(),u="@"+c;if(t.hasDirectiveParameters){let C=t.directiveParameters;if(t.hasJsonParameters){if(e.formatDirectiveJsonParameters&&o&&t.hasValidJson()){let I=t.getPhpContent().trim();I.startsWith("(")&&I.endsWith(")")&&(I=I.substring(1),I=I.substring(0,I.length-1));let F=o(I);C="("+F+")"}}else if(e.formatDirectivePhpParameters&&s!=null&&t.hasValidPhp()){let I=t.getPhpContent().trim();I.startsWith("(")&&I.endsWith(")")&&(I=I.substring(1),I=I.substring(0,I.length-1));let F=I,$=!1;if(I.startsWith("[")&&I.endsWith("]")&&((f=t.startPosition)==null?void 0:f.line)!=((k=t.endPosition)==null?void 0:k.line)){F=s("<?php "+I,e,es.getReasonableDirectivePhpOptions(t,Mo()));let ht=new Ks,ct=ht.parse(X.replaceAllInString(F,`
`," ")),J=0;return ht.getIsAssoc()?F="@"+c+" ".repeat(e.spacesAfterDirective)+"("+F+")":ct!=null&&(F=Dn.print(ct,e.tabSize,1),J>0&&(F=X.removeEmptyNewLines(pi.shiftIndent(F,J,!0))),F="@"+c+" ".repeat(e.spacesAfterDirective)+"("+F+")"),F}else try{let ht=Mo();((x=t.startPosition)==null?void 0:x.line)==((M=t.endPosition)==null?void 0:M.line)&&(ht={...Mo(),printWidth:1/0},$=!0),F=s("<?php "+I,e,es.getReasonableDirectivePhpOptions(t,ht))}catch{}t.directiveName.toLowerCase()=="forelse"&&(F=F.substring(9),F=F.substring(0,F.length-14)),Xi.couldReflow(F)&&(F=Xi.instance.reflow(F)),tn.couldReflow(F)&&(F=tn.instance.reflow(F)),F.includes(`
`)&&!$?C="("+pi.shiftIndent(F,h,!0)+")":($&&(F=xA(F)),C="("+F+")")}let y=e.spacesAfterDirective;(es.defaultControlDirectiveNames.includes(c)||!es.ignoreSpeculativeConditions.includes(c)&&es.defaultControlDirectiveNames.includes(t.name))&&(y=e.spacesAfterControlDirective),u+=" ".repeat(y)+C}return u}},Js=es;Js.defaultControlDirectiveNames=["if","elseif","unless","while","for","foreach","forelse"],Js.ignoreSpeculativeConditions=["can","canany","elsecan","elsecanany","cannot"]});var is,Of=Ot(()=>{"use strict";Za();yr();fh();Re();Vo();is=class{static printEcho(t,e,s,o){var k,x;let h="{{ ",c=" }}";t instanceof Xn?(h="{!! ",c=" !!}"):t instanceof Zn&&(h="{{{ ",c=" }}}");let u=h,f=t.content.trim();if(e.formatInsideEcho&&s!=null&&t.hasValidPhp()){let M=Ef(),C=f;if(((k=t.startPosition)==null?void 0:k.line)!=((x=t.endPosition)==null?void 0:x.line))return M={...M,printWidth:45},C=s("<?php "+f,e,M),Xi.couldReflow(C)&&(C=Xi.instance.reflow(C)),tn.couldReflow(C)&&(C=tn.instance.reflow(C)),h.trim()+`
`+pi.shiftIndent(C,o+e.tabSize,!1)+`
`+" ".repeat(o)+c.trim();C=s("<?php "+f,e,M),Xi.couldReflow(C)&&(C=Xi.instance.reflow(C)),tn.couldReflow(C)&&(C=tn.instance.reflow(C)),f=C}return u+=f+c,u}}});var Go,Lf=Ot(()=>{"use strict";Re();Ja();ai();Pn();Xa();nf();Sf();Of();Vo();Go=class{constructor(t){this.inlineDirectiveBlocks=new Map;this.contentDirectives=new Map;this.dynamicEchoBlocks=new Map;this.pairedDirectives=new Map;this.dynamicInlineDirectives=new Map;this.inlineDirectives=new Map;this.inlineEchos=new Map;this.spanEchos=new Map;this.inlinePhpNodes=new Map;this.echoBlockSlugs=new Map;this.parentTransformer=null;this.forElseWithEmpty=[];this.forElseNoEmpty=[];this.conditions=[];this.switchStatements=[];this.removeLines=[];this.virtualStructureOpens=[];this.virtualStructureClose=[];this.inlineComments=new Map;this.blockComments=[];this.blockPhpNodes=new Map;this.breakDirectives=new Map;this.dynamicElementDirectives=new Map;this.dynamicElementDirectiveNodes=new Map;this.dynamicElementConditions=new Map;this.dynamicElementConditionNodes=new Map;this.dynamicElementSwitch=new Map;this.dynamicElementSwitchNodes=new Map;this.dynamicElementForElse=new Map;this.dynamicElementForElseNodes=new Map;this.dynamicElementPhpNodes=new Map;this.dynamicElementPhp=new Map;this.embeddedEchos=new Map;this.embeddedDirectives=new Map;this.structureLines=[];this.directiveParameters=new Map;this.expressionParameters=new Map;this.echoParameters=new Map;this.slugs=[];this.extractedEmbeddedDocuments=new Map;this.propDirectives=new Map;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.transformOptions={spacesAfterDirective:0,spacesAfterControlDirective:1,tabSize:4,formatDirectiveJsonParameters:!0,formatDirectivePhpParameters:!0,formatInsideEcho:!0,phpOptions:null};this.forceCleanLines=["@endphp","@elseif","@else","@endif","@endswitch","@endverbatim","@case","@default"];this.doc=t}setParentTransformer(t){return this.parentTransformer=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}removeBlade(){let t=this.doc.getAllNodes(),e="";return t.forEach(s=>{s instanceof re?e+=s.getOutputContent():s instanceof Bi?e+=s.sourceContent:s instanceof _t&&s.directiveName=="verbatim"&&(e+=s.innerContent)}),e}close(t){return"</"+t+">"}open(t){return"<"+t+">"}selfClosing(t){return"<"+t+" />"}pair(t,e=""){return"<"+t+">"+e+"</"+t+">"}printDirective(t,e){return Js.printDirective(t,this.transformOptions,this.phpFormatter,this.jsonFormatter,e)}makeSlug(t){t<=2&&(t=7);let e="",s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=s.length;for(let c=0;c<t-1;c++)e+=s.charAt(Math.floor(Math.random()*o));let h="B"+e+"B";return this.slugs.includes(h)?this.makeSlug(t+1):(this.slugs.push(h),h)}registerDirectiveParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerDirectiveParameter(t,e):this.directiveParameters.set(t,e)}registerEchoParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerEchoParameter(t,e):this.echoParameters.set(t,e)}registerExpressionParameter(t,e){this.parentTransformer!=null?this.parentTransformer.registerExpressionParameter(t,e):this.expressionParameters.set(t,e)}registerCondition(t){this.parentTransformer!=null?this.parentTransformer.registerCondition(t):this.conditions.push(t)}registerSwitchStatement(t){this.parentTransformer!=null?this.parentTransformer.registerSwitchStatement(t):this.switchStatements.push(t)}registerPairedDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerPairedDirective(t,e):e.isInline==!1?this.pairedDirectives.set(t,e):(this.inlineDirectives.set(e.slug,e),this.dynamicInlineDirectives.set(e.directive.nodeContent,e.slug))}registerInlineDirectiveBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerInlineDirectiveBlock(t,e):this.inlineDirectiveBlocks.set(t,e)}registerContentDirective(t,e){this.parentTransformer!=null?this.parentTransformer.registerContentDirective(t,e):this.contentDirectives.set(t,e)}registerComment(t,e){this.parentTransformer!=null?this.parentTransformer.registerComment(t,e):this.inlineComments.set(t,e)}registerDynamicDirective(t,e){this.parentTransformer!=null?(this.dynamicElementDirectives.set(e.nodeContent,t),this.parentTransformer.registerDynamicDirective(t,e)):(this.dynamicElementDirectives.set(e.nodeContent,t),this.dynamicElementDirectiveNodes.set(t,e))}prepareConditionalDirective(t){if(this.dynamicElementDirectives.has(t.nodeContent))return this.dynamicElementDirectives.get(t.nodeContent);let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicDirective(e,t),e}prepareInlineBlockDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerInlineDirectiveBlock(e,t),this.selfClosing(e)}prepareContentDirective(t){let e=this.makeSlug(t.sourceContent.length);return this.registerContentDirective(e,t),e}registerPhpBlock(t,e){this.parentTransformer!=null?this.parentTransformer.registerPhpBlock(t,e):(this.removeLines.push(this.close(t)),this.blockPhpNodes.set(t,e))}registerConditionalPhpBlock(t,e){this.parentTransformer!=null?(this.dynamicElementPhp.set(e.sourceContent,t),this.parentTransformer.registerConditionalPhpBlock(t,e)):(this.dynamicElementPhp.set(e.sourceContent,t),this.dynamicElementPhpNodes.set(t,e))}prepareConditionalPhpBlock(t){if(this.dynamicElementPhp.has(t.sourceContent))return this.dynamicElementPhp.get(t.sourceContent);let e=this.makeSlug(t.sourceContent.length);return this.registerConditionalPhpBlock(e,t),e}registerInlinePhpBlock(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlinePhpBlock(t);{let e=this.makeSlug(t.sourceContent.length);return this.inlinePhpNodes.set(e,t),e}}prepareInlinePhpBlock(t){return this.registerInlinePhpBlock(t)}preparePhpBlock(t){if(t.fragmentPosition==0)return this.prepareConditionalPhpBlock(t);if(t.isInline)return this.prepareInlinePhpBlock(t);let e=this.makeSlug(35);this.registerPhpBlock(e,t);let s=this.open(e),o=this.close(e);return`
`+s+o+`
`}transformPhpBlock(t){let e=t;return this.blockPhpNodes.forEach((s,o)=>{let h=this.open(o),c=this.indentLevel(h),u=s.sourceContent;this.phpTagFormatter!=null&&s.hasValidPhp()&&(u=this.phpTagFormatter(u,this.transformOptions,null),u=pi.shiftIndent(u,c,!0)),e=e.replace(h,u)}),this.dynamicElementPhpNodes.forEach((s,o)=>{e=X.replaceAllInString(e,o,this.printInlinePhp(s))}),this.inlinePhpNodes.forEach((s,o)=>{e=e.replace(o,this.printInlinePhp(s))}),e}printInlinePhp(t){let e=t.sourceContent;return this.phpTagFormatter&&t.hasValidPhp()&&(e=this.phpTagFormatter(e,this.transformOptions,null),e=X.replaceAllInString(e,`
`," ")),e}shouldCreateVirutal(t){let e=t.getImmediateChildren();if(e.length==0)return!0;let s=!0,o=!0,h=0,c=0,u=0,f=!0;for(let k=0;k<e.length;k++){let x=e[k];x instanceof xi&&x.isInlineEcho?(s=!1,h+=1,c+=1):x instanceof re?(u+=1,x.content.trim().length>0&&(o=!1)):c+=1}return h==0&&(f=!0),c>0&&s==!0?!1:(o==!1&&c==0&&(f=!0),o==!0&&c==0&&(f=!0),f)}preparePairedDirective(t){var c;let e=this.makeSlug(t.sourceContent.length),s=t.directiveName.toLowerCase(),o=(c=t.childrenDocument)==null?void 0:c.document.transform().setParentTransformer(this).toStructure();if(t.fragmentPosition!=0){let u="",f=`${this.open(e)}
`;return s=="php"||s=="verbatim"?(u=this.makeSlug(15),f+=this.pair(u)):this.shouldCreateVirutal(t)&&t.containsChildStructures==!1&&t.containsAnyFragments==!1?(u=this.makeSlug(15),f+=this.pair(u,o)):f+=o,f+=`${this.close(e)}
`,this.virtualStructureOpens.push(this.open(u)),this.virtualStructureClose.push(this.close(u)),this.virtualStructureClose.push(this.close(e)),this.registerPairedDirective(e,{innerDoc:o,slug:e,directive:t,virtualElementSlug:u,isInline:!1}),f}if(this.dynamicInlineDirectives.has(t.nodeContent))return this.dynamicInlineDirectives.get(t.nodeContent)+" ";let h=this.makeSlug(t.nodeContent.length);return this.registerPairedDirective(e,{innerDoc:o,slug:h,directive:t,virtualElementSlug:"",isInline:!0}),h+" "}registerForElseWithEmpty(t){this.parentTransformer!=null?this.parentTransformer.registerForElseWithEmpty(t):this.forElseWithEmpty.push(t)}prepareForElse(t){var s,o,h,c,u,f,k,x,M;if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.elseNode!=null){let ct=this.makeSlug((o=(s=t.constructedFrom)==null?void 0:s.sourceContent.length)!=null?o:0),J=this.makeSlug((c=(h=t.elseNode)==null?void 0:h.sourceContent.length)!=null?c:0),z=(u=t.truthDocument)==null?void 0:u.document.transform().setParentTransformer(this).toStructure(),at=(f=t.falseDocument)==null?void 0:f.document.transform().setParentTransformer(this).toStructure(),B={truthDoc:z,falseDoc:at,forElse:t,truthClose:this.close(ct),emptyOpen:this.open(J),pairClose:this.close(J),truthSlug:ct,falseSlug:J},Y=this.open(ct);return Y+=z,Y+=B.truthClose,Y+=`
`+B.emptyOpen+`
`,Y+=at+"",Y+=B.pairClose,this.registerForElseWithEmpty(B),Y}let C=t.constructedFrom,y=(k=t.truthDocument)==null?void 0:k.document.transform().setParentTransformer(this).toStructure(),I=this.makeSlug(C.sourceContent.length),F=this.makeSlug((M=(x=C.isClosedBy)==null?void 0:x.sourceContent.length)!=null?M:0),$={truthDoc:y,falseDoc:"",forElse:t,truthSlug:I,falseSlug:"",pairClose:this.close(F),emptyOpen:"",truthClose:""};this.forElseNoEmpty.push($);let ht=this.open(I);return ht+=y,ht+=this.close(I),ht}if(this.dynamicElementForElse.has(t.nodeContent))return this.dynamicElementForElse.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementForElse(e,t),e+" "}registerBreak(t,e){this.parentTransformer!=null?this.parentTransformer.registerBreak(t,e):this.breakDirectives.set(t,e)}registerProps(t,e){this.parentTransformer!=null?this.parentTransformer.registerProps(t,e):this.propDirectives.set(t,e)}preparePropsDirective(t){let e=this.makeSlug(10);return this.registerProps(e,t),`

${this.pair(e)}`}prepareBreakDirective(t){let e=this.makeSlug(10);return this.registerBreak(e,t),`

${this.pair(e)}`}registerEmbeddedDirective(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedDirective(t);let e=this.makeSlug(t.nodeContent.length);return this.embeddedDirectives.set(e,t),e}registerEmbeddedDocument(t,e,s){return this.parentTransformer!=null?this.parentTransformer.registerEmbeddedDocument(t,e,s):(this.extractedEmbeddedDocuments.set(t,{slug:t,content:e,isScript:s}),t)}prepareDirective(t){return t.isEmbedded()?this.registerEmbeddedDirective(t):t.directiveName.trim().toLowerCase()=="break"?this.prepareBreakDirective(t):t.directiveName.trim().toLowerCase()=="props"?this.preparePropsDirective(t):t.isClosedBy!=null?this.preparePairedDirective(t):t.fragmentPosition==3?this.prepareInlineBlockDirective(t):t.fragmentPosition==0?this.prepareConditionalDirective(t):this.prepareContentDirective(t)}registerVirtualComment(t){this.parentTransformer!=null?this.parentTransformer.registerVirtualComment(t):this.blockComments.push(t)}prepareComment(t){if(t.isMultiline()){let s=this.makeSlug(10),o=this.makeSlug(10),h={node:t,pairOpen:this.open(s),pairClose:this.close(s),virtualElement:this.selfClosing(o)};return this.registerVirtualComment(h),h.pairOpen+`
`+h.virtualElement+`
`+h.pairClose}let e=this.makeSlug(t.sourceContent.length);return this.registerComment(e,t),this.selfClosing(e)}registerDynamicFragmentEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerDynamicFragmentEcho(t);if(this.echoBlockSlugs.has(t.sourceContent))return this.echoBlockSlugs.get(t.sourceContent);{let e=this.makeSlug(t.sourceContent.length);return this.dynamicEchoBlocks.set(e,t),this.echoBlockSlugs.set(t.sourceContent,e),e}}registerInlineEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerInlineEcho(t);{let e=this.makeSlug(t.sourceContent.length);return t.isInlineEcho?(this.spanEchos.set(e,t),e):(this.inlineEchos.set(e,t),this.selfClosing(e))}}prepareComponent(t){var s,o;if(t.isClosingTag)return((s=t.name)==null?void 0:s.name)=="slot"?"</x-slot>":"</x-"+t.getComponentName()+">";let e="<x-";if(((o=t.name)==null?void 0:o.name)=="slot"&&t.isSelfClosing==!1)if(t.name.inlineName.trim().length>0){let h=t.name.inlineName;h.startsWith(":")&&(h=h.substring(1)),e+='slot name="'+h+'"'}else e+=t.getComponentName();else e+=t.getComponentName();return t.hasParameters&&(e+=" ",t.parameters.forEach(h=>{var c,u;if(h.type==0)if(h.isExpression){let f=this.makeSlug(h.content.length);this.registerExpressionParameter(f,h),e+=f+" "}else e+=h.content+" ";else if(h.type==2)e+=h.name+" ";else if(h.type==1){let f=this.makeSlug((u=(c=h.directive)==null?void 0:c.sourceContent.length)!=null?u:0);this.registerDirectiveParameter(f,h),e+=f+" "}else if(h.type==3&&h.inlineEcho!=null){let f=this.makeSlug(h.inlineEcho.content.length);this.registerEchoParameter(f,h),e+=f+" "}})),t.isSelfClosing?e+=" />":e+=">",e}registerEmbeddedEcho(t){if(this.parentTransformer!=null)return this.parentTransformer.registerEmbeddedEcho(t);let e=this.makeSlug(t.sourceContent.length);return this.embeddedEchos.set(e,t),e}prepareEcho(t){return t.isEmbedded()?this.registerEmbeddedEcho(t):t.fragmentPosition==0?this.registerDynamicFragmentEcho(t):t.fragmentPosition==2||t.fragmentPosition==1?this.registerDynamicFragmentEcho(t):this.registerInlineEcho(t)}prepareSwitch(t){if(t.fragmentPosition==3||t.fragmentPosition==2){let s=[],o="";t.cases.forEach((C,y)=>{var J,z;let I=C.head,F=(J=C.childDocument)==null?void 0:J.document.transform().setParentTransformer(this).toStructure(),$=this.makeSlug(I.sourceContent.length),ht=this.makeSlug(5),ct={case:C,slug:$,doc:F,virtualOpen:this.selfClosing(ht),virtualClose:this.close(ht),pairOpen:this.open($),pairClose:this.close($),isFirst:y==0,isLast:y==t.cases.length-1,leadingClose:"",leadingOpen:""};if(C.leadingDocument!=null){let at=this.makeSlug(25);ct.leadingOpen=this.open(at),ct.leadingClose=this.close(at),o+=`
`+C.leadingDocument.document.transform().setParentTransformer(this).toStructure()+`
`}o+=ct.pairOpen,((z=C.head)==null?void 0:z.directiveName)=="default"&&(o+=ct.virtualOpen),o+=F,o+=ct.pairClose,s.push(ct)});let h=s[0].pairOpen,c=s[s.length-1].pairClose,u=this.makeSlug(10),f=this.open(u),k=this.close(u),x={switchNode:t,pairOpen:h,pairClose:c,structures:s,virtualSwitchClose:k,virtualSwitchOpen:f},M=`
`+f+`
`+o+`
`+k;return this.registerSwitchStatement(x),M}if(this.dynamicElementSwitch.has(t.nodeContent))return this.dynamicElementSwitch.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementSwitch(e,t),e+" "}registerDynamicElementSwitch(t,e){this.parentTransformer!=null?(this.dynamicElementSwitch.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementSwitch(t,e)):(this.dynamicElementSwitch.set(e.nodeContent,t),this.dynamicElementSwitchNodes.set(t,e))}registerDynamicElementCondition(t,e){this.parentTransformer!=null?(this.dynamicElementConditions.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementCondition(t,e)):(this.dynamicElementConditions.set(e.nodeContent,t),this.dynamicElementConditionNodes.set(t,e))}registerDynamicElementForElse(t,e){this.parentTransformer!=null?(this.dynamicElementForElse.set(e.nodeContent,t),this.parentTransformer.registerDynamicElementForElse(t,e)):(this.dynamicElementForElse.set(e.nodeContent,t),this.dynamicElementForElseNodes.set(t,e))}prepareConditions(t){if(t.fragmentPosition==3||t.fragmentPosition==2){if(t.chain.length==1&&t.constructedFrom!=null){let f=t.constructedFrom.clone();return f.childrenDocument=t.logicBranches[0].childDocument,this.preparePairedDirective(f)}let s=[],o="";t.logicBranches.forEach((f,k)=>{var F,$,ht,ct,J,z,at,B;let x=f.head,M=(F=f.childDocument)==null?void 0:F.document.transform().setParentTransformer(this).toStructure(),C=this.makeSlug(x.sourceContent.length),y=this.makeSlug(10),I={branch:f,slug:C,doc:M,pairOpen:this.open(C),pairClose:this.close(C),virtualOpen:this.open(y),virtualClose:this.close(y),isFirst:k==0,isLast:k==t.logicBranches.length-1,virtualBreakClose:"",virtualBreakOpen:""};if((($=f.head)==null?void 0:$.directiveName)=="else"){o+=`
`+I.pairOpen;let Y=this.makeSlug(25);f.head.containsChildStructures==!1&&f.head.containsAnyFragments==!1&&(((ht=f.head)==null?void 0:ht.children.length)<=2||((ct=f.head)==null?void 0:ct.children.length)>4)?(I.virtualBreakOpen=this.open(Y),I.virtualBreakClose=this.close(Y),o+=`
`+I.virtualBreakOpen+`
`,o+=M,o+=`
`+I.virtualBreakClose+`
`+I.pairClose):(I.virtualBreakOpen=this.selfClosing(Y),o+=I.virtualBreakOpen+`
`,o+=M,o+=`
`+I.pairClose)}else if(((J=f.head)==null?void 0:J.containsAnyFragments)==!1&&((z=f.head)==null?void 0:z.containsChildStructures)==!1&&(((at=f.head)==null?void 0:at.children.length)<=2||((B=f.head)==null?void 0:B.children.length)>4)){let Y=this.makeSlug(25);I.virtualBreakOpen=this.open(Y),I.virtualBreakClose=this.close(Y),o+=I.pairOpen,o+=`
`+I.virtualBreakOpen,o+=M,o+=`
`+I.virtualBreakClose,o+=I.pairClose}else o+=I.pairOpen,o+=`
`,o+=M,o+=`
`,o+=I.pairClose;s.push(I)});let h=s[0].pairOpen,c=s[s.length-1].pairClose,u={pairOpen:h,pairClose:c,structures:s,condition:t};return this.registerCondition(u),o}if(this.dynamicElementConditions.has(t.nodeContent))return this.dynamicElementConditions.get(t.nodeContent)+" ";let e=this.makeSlug(t.nodeContent.length);return this.registerDynamicElementCondition(e,t),e+" "}toStructure(){let t="";this.doc.getRenderNodes().forEach(s=>{s instanceof re?t+=s.content:s instanceof zi?s.cases.length>0?t+=this.prepareSwitch(s):t+=this.preparePairedDirective(s.constructedFrom):s instanceof Ci?t+=this.prepareConditions(s):s instanceof _t?t+=this.prepareDirective(s):s instanceof xi?t+=this.prepareEcho(s):s instanceof $i?t+=this.prepareForElse(s):s instanceof Ln?t+=this.prepareComment(s):s instanceof On?t+=this.prepareComponent(s):s instanceof Bi&&(t+=this.preparePhpBlock(s))});let e=this.doc.getParser().getFragmentsContainingStructures();if(e.length>0){let s=be.fromText(t);e.forEach(o=>{var C,y,I,F,$,ht,ct,J;let h=this.doc.getParser().getText(((y=(C=o.start.endPosition)==null?void 0:C.offset)!=null?y:0)+1,(F=(I=o.end.startPosition)==null?void 0:I.offset)!=null?F:0),c=s.getParser().getFragmentsParser().getEmbeddedFragment(o.start.embeddedIndex),u=s.getParser().getFragmentsParser().getClosingFragmentAfter(c),f=s.getParser().getText(((ht=($=c.endPosition)==null?void 0:$.offset)!=null?ht:0)+1,(J=(ct=u==null?void 0:u.startPosition)==null?void 0:ct.offset)!=null?J:0),k=this.makeSlug(16),x=o.start.name.toLowerCase()=="script",M=k;x?M="//"+k:M="/*"+k+"*/",t=t.replace(f,M),this.registerEmbeddedDocument(k,h,x)})}return t}withOptions(t){return this.transformOptions=t,this}transformInlineDirectives(t){let e=t;return this.inlineDirectiveBlocks.forEach((s,o)=>{let h=this.selfClosing(o),c=this.printDirective(s,this.indentLevel(h));e=e.replace(h,c)}),e}transformContentDirectives(t){let e=t;return this.contentDirectives.forEach((s,o)=>{let h=this.printDirective(s,0);if(h.includes(`
`)){let c=this.indentLevel(o);c>0&&(h=pi.shiftIndent(h,c,!0))}e=e.replace(o,h)}),e}transformDynamicEcho(t){let e=t;return this.dynamicEchoBlocks.forEach((s,o)=>{let h=is.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o));e=X.replaceAllInString(e,o,h)}),e}transformDynamicDirectives(t){let e=t;return this.dynamicElementDirectiveNodes.forEach((s,o)=>{let h=this.printDirective(s,this.indentLevel(o));e=X.replaceAllInString(e,o,h)}),e}transformBlockPhp(t,e){if(this.blockPhpFormatter==null)return t;let s=t.trim();return s.startsWith("<?php")==!1&&(s="<?php "+s),s=this.blockPhpFormatter(s,this.transformOptions,null),e&&(s=`
`+s+`
`),s}transformPairedDirectives(t){let e=t;return this.pairedDirectives.forEach((s,o)=>{var f;let h=s.directive;if(s.virtualElementSlug.length>0){let k=this.open(s.virtualElementSlug),x=this.close(s.virtualElementSlug);this.virtualStructureOpens.push(k),this.removeLines.push(k),this.removeLines.push(x)}let c=this.open(o),u=this.close(o);if(h.directiveName.trim().toLowerCase()=="php"){let k=this.open(s.virtualElementSlug),x=this.indentLevel(k),M=s.directive.sourceContent,C=pi.shiftIndent(this.transformBlockPhp(h.innerContent,!0),x,!0);e=e.replace(c,M),e=e.replace(k,C)}else if(h.directiveName.trim().toLowerCase()=="verbatim"){let k=s.directive.sourceContent+`
`+pi.shiftClean(h.innerContent,this.transformOptions.tabSize);e=e.replace(c,k)}else e=e.replace(c,this.printDirective(s.directive,this.indentLevel(c)));e=e.replace(u,(f=s.directive.isClosedBy)==null?void 0:f.sourceContent)}),this.inlineDirectives.forEach((s,o)=>{e=X.replaceAllInString(e,o,s.directive.nodeContent)}),e}transformForElseWithNoEmpty(t){let e=t;return this.forElseNoEmpty.forEach(s=>{var k;let o=s.forElse.constructedFrom,h=this.open(s.truthSlug),c=this.close(s.truthSlug),u=this.printDirective(o,this.indentLevel(h)),f=(k=o.isClosedBy)==null?void 0:k.sourceContent;e=e.replace(h,u),e=e.replace(c,f)}),e}transformForElseWithEmpty(t){let e=t;return this.forElseWithEmpty.forEach(s=>{var u,f;let o=this.open(s.truthSlug),h=s.forElse.constructedFrom,c=this.printDirective(h,this.indentLevel(o));e=e.replace(o,c),e=e.replace(s.pairClose,(u=h.isClosedBy)==null?void 0:u.sourceContent),e=e.replace(s.emptyOpen,(f=s.forElse.elseNode)==null?void 0:f.sourceContent),this.removeLines.push(s.truthClose)}),e}transformInlineEcho(t){let e=t;return this.inlineEchos.forEach((s,o)=>{let h=this.selfClosing(o);e=e.replace(h,is.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),this.spanEchos.forEach((s,o)=>{e=e.replace(o,is.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),e}transformConditions(t){let e=t;return this.conditions.forEach(s=>{s.structures.forEach(o=>{let h=o.branch.head;if(o.virtualBreakOpen.length>0&&this.removeLines.push(o.virtualBreakOpen),o.virtualBreakClose.length>0&&(e=e.replace(o.virtualBreakClose,o.virtualBreakClose+`
`),this.removeLines.push(o.virtualBreakClose)),this.virtualStructureOpens.push(o.virtualOpen),this.removeLines.push(o.virtualOpen),this.removeLines.push(o.virtualClose),!o.isLast)this.removeLines.push(o.pairClose),e=e.replace(o.pairOpen,this.printDirective(h,this.indentLevel(o.pairOpen)));else{e=e.replace(o.pairOpen,this.printDirective(h,this.indentLevel(o.pairOpen)));let c=h.isClosedBy;e=e.replace(o.pairClose,this.printDirective(c,this.indentLevel(o.pairClose)))}})}),e}transformSwitchStatements(t){let e=t;return this.switchStatements.forEach(s=>{let o=s.switchNode.constructedFrom;e=e.replace(s.virtualSwitchOpen,this.printDirective(o,this.indentLevel(s.virtualSwitchOpen)));let h=o.isClosedBy;e=e.replace(s.virtualSwitchClose,h.sourceContent),s.structures.forEach(c=>{let u=c.case.head;this.removeLines.push(c.virtualClose),this.removeLines.push(c.virtualOpen),c.isLast?(e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen))),this.removeLines.push(c.pairClose)):c.isFirst?(this.removeLines.push(c.pairClose),e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen)))):(this.removeLines.push(c.pairClose),e=e.replace(c.pairOpen,this.printDirective(u,this.indentLevel(c.pairOpen))))})}),e}transformProps(t){let e=t;return this.propDirectives.forEach((s,o)=>{let h=this.close(o),c=this.open(o);this.removeLines.push(h);let u=s.sourceContent;try{if(this.transformOptions.formatDirectivePhpParameters&&this.phpFormatter!=null&&s.hasValidPhp()){let f=s.getPhpContent().trim();f.startsWith("(")&&f.endsWith(")")&&(f=f.substring(1),f=f.substring(0,f.length-1));let k=this.phpFormatter("<?php "+f,this.transformOptions,null),x=new Ks,M=x.parse(X.replaceAllInString(k,`
`," ")),C=this.indentLevel(c);x.getIsAssoc()?u="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+k+")":M!=null&&(k=Dn.print(M,this.transformOptions.tabSize,1),C>0&&(k=X.removeEmptyNewLines(pi.shiftIndent(k,C,!0))),u="@props"+" ".repeat(this.transformOptions.spacesAfterDirective)+"("+k+")")}}catch{u=s.sourceContent}e=e.replace(c,u)}),e}transformBreaks(t){let e=t;return this.breakDirectives.forEach((s,o)=>{let h=this.close(o),c=this.open(o);this.removeLines.push(h),e=e.replace(c,s.sourceContent)}),e}transformComments(t){let e=t;return this.inlineComments.forEach((s,o)=>{let h=this.selfClosing(o);e=e.replace(h,xr.printComment(s,this.transformOptions.tabSize,0))}),e}indentLevel(t){for(let e=0;e<this.structureLines.length;e++){let s=this.structureLines[e];if(s.includes(t)){let o=s.trimLeft();return s.length-o.length}}return 0}transformVirtualComments(t){let e=t;return this.blockComments.forEach(s=>{let o=s.node;e=e.replace(s.pairOpen,xr.printComment(o,this.transformOptions.tabSize,this.indentLevel(s.pairOpen))),this.removeLines.push(s.pairClose),this.removeLines.push(s.virtualElement)}),e}transformDynamicElementForElse(t){let e=t;return this.dynamicElementForElseNodes.forEach((s,o)=>{e=X.replaceAllInString(e,o,s.nodeContent)}),e}transformDynamicElementConditions(t){let e=t;return this.dynamicElementConditionNodes.forEach((s,o)=>{e=X.replaceAllInString(e,o,s.nodeContent)}),e}transformDynamicElementSwitch(t){let e=t;return this.dynamicElementSwitchNodes.forEach((s,o)=>{e=X.replaceAllInString(e,o,s.nodeContent)}),e}transformDirectiveParameters(t){let e=t;return this.directiveParameters.forEach((s,o)=>{let h=s.directive;e=e.replace(o,this.printDirective(h,this.indentLevel(o)))}),e}transformExpressionParameters(t){let e=t;return this.expressionParameters.forEach((s,o)=>{e=e.replace(o,s.content)}),e}transformEchoParameters(t){let e=t;return this.echoParameters.forEach((s,o)=>{s.inlineEcho!=null?e=e.replace(o,is.printEcho(s.inlineEcho,this.transformOptions,this.phpFormatter,0)):e=e.replace(o,"")}),e}transformEmbeddedEcho(t){let e=t;return this.embeddedEchos.forEach((s,o)=>{e=e.replace(o,is.printEcho(s,this.transformOptions,this.phpFormatter,this.indentLevel(o)))}),e}transformEmbeddedDirectives(t){let e=t;return this.embeddedDirectives.forEach((s,o)=>{e=e.replace(o,this.printDirective(s,this.indentLevel(o)))}),e}transformExtractedDocuments(t){let e=t;return this.extractedEmbeddedDocuments.forEach((s,o)=>{let h="",c=0;s.isScript?h="//"+o:h="/*"+o+"*/",c=this.indentLevel(h),e.includes(h)&&(e=e.replace(h,pi.indentRelative(s.content,c)))}),e}removeVirtualStructures(t){let e=t;return this.removeLines.forEach(s=>{e=e.replace(s,"")}),e}shouldCleanAfter(t){for(let e=0;e<this.removeLines.length;e++)if(t.startsWith(this.removeLines[e]))return!0;return!1}shouldCleanLine(t){for(let e=0;e<this.forceCleanLines.length;e++)if(t.startsWith(this.forceCleanLines[e]))return!0;return!1}cleanVirtualStructures(t){let e=[],s=X.breakByNewLine(t),o=!1;for(let h=0;h<s.length;h++){let c=s[h].trim();if(o){if(c.length==0)continue;o=!1}else o=this.shouldCleanAfter(c);if(this.shouldCleanLine(c))for(let u=e.length-1;u>0&&e[u].trim().length==0;u--)e.pop();if(!this.removeLines.includes(c)){let u=s[h];this.removeLines.forEach(f=>{u.includes(f)&&(u=u.replace(f,""))}),e.push(u)}}return e.join(`
`)}reflowSlugs(t){let e=t;return this.slugs.forEach(s=>{let o=this.open(s),h=this.close(s),c=this.selfClosing(s),u="/<"+s+"(.*?)>/gms",f="/</"+s+"(.*?)>/gms",k="/<"+s+"(.*?)/>/gms";e=e.replace(u,o),e=e.replace(f,h),e=e.replace(k,c)}),e}fromStructure(t){let e=this.reflowSlugs(t);this.structureLines=X.breakByNewLine(e);let s=this.transformInlineDirectives(e);return s=this.transformContentDirectives(s),s=this.transformDynamicEcho(s),s=this.transformPairedDirectives(s),s=this.transformForElseWithEmpty(s),s=this.transformForElseWithNoEmpty(s),s=this.transformDynamicElementForElse(s),s=this.transformInlineEcho(s),s=this.transformConditions(s),s=this.transformDynamicElementConditions(s),s=this.transformSwitchStatements(s),s=this.transformDynamicElementSwitch(s),s=this.transformBreaks(s),s=this.transformProps(s),s=this.transformComments(s),s=this.transformVirtualComments(s),s=this.transformDirectiveParameters(s),s=this.transformExpressionParameters(s),s=this.transformEchoParameters(s),s=this.transformDynamicDirectives(s),s=this.cleanVirtualStructures(s),s=this.removeVirtualStructures(s),s=this.transformEmbeddedEcho(s),s=this.transformEmbeddedDirectives(s),s=this.transformExtractedDocuments(s),s=this.transformPhpBlock(s),s}}});var be,Pn=Ot(()=>{"use strict";Ki();Xc();Zc();tf();Lf();be=class{constructor(){this.documentParser=new it;this.transformer=null;this.cursor=new So(this);this.nodes=new Lo(this);this.errors=new Oo(this)}static fromText(t,e=null){let s=new be;return e!=null&&s.getParser().setSeedPosition(e),s.loadString(t)}static childFromText(t,e,s=null){let o=new be;return s!=null&&o.getParser().setSeedPosition(s),o.getParser().withPhpValidator(e.getPhpValidator()),o.loadString(t),{renderNodes:o.getRenderNodes(),content:t,document:o}}isValid(){return!this.documentParser.hasUnclosedStructures()}transform(){return this.transformer==null&&(this.transformer=new Go(this)),this.transformer}loadString(t){return this.documentParser.parse(t),this}getLinesAround(t){return this.documentParser.getLinesAround(t)}getContent(){return this.documentParser.getContent()}getOriginalContent(){return this.documentParser.getOriginalContent()}getAllNodes(){return this.documentParser.getNodes()}getRenderNodes(){return this.documentParser.getRenderNodes()}getFragments(){return this.documentParser.getFragments()}getParser(){return this.documentParser}getText(t,e){return this.documentParser.getText(t,e)}charLeftAt(t){return this.documentParser.charLeftAt(t)}charAt(t){return this.documentParser.charAt(t)}charRightAt(t){return this.documentParser.charRightAt(t)}getLineIndex(t){return this.documentParser.getLineIndex(t)}getLineText(t){return this.documentParser.getLineText(t)}wordAt(t,e=4){return this.documentParser.wordAt(t,e)}wordLeftAt(t,e=4){return this.documentParser.wordLeftAt(t,e)}wordRightAt(t,e=4){return this.documentParser.wordRightAt(t,e)}punctuationLeftAt(t,e=4){return this.documentParser.punctuationLeftAt(t,e)}punctuationRightAt(t,e=4){return this.documentParser.punctuationRightAt(t,e)}getLineChars(t){let e=this.getLineText(t);return e!=null?e.split(""):null}}});var Df=V((W1,Pf)=>{"use strict";Pf.exports={attributeIndex:0,attributeListDepth:{},matchST_ATTRIBUTE:function(){let i=this.input();if(this.is_WHITESPACE()){do i=this.input();while(this.is_WHITESPACE());return this.unput(1),null}switch(i){case"]":return this.attributeListDepth[this.attributeIndex]===0?(delete this.attributeListDepth[this.attributeIndex],this.attributeIndex--,this.popState()):this.attributeListDepth[this.attributeIndex]--,"]";case"(":case")":case":":case"=":case"|":case"&":case"^":case"-":case"+":case"*":case"%":case"~":case"<":case">":case"!":return this.consume_TOKEN();case"[":return this.attributeListDepth[this.attributeIndex]++,"[";case",":return",";case'"':return this.ST_DOUBLE_QUOTES();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN()}if(this.is_LABEL_START()||i==="\\"){for(;this.offset<this.size;){let t=this.input();if(!(this.is_LABEL()||t==="\\")){t&&this.unput(1);break}}return this.T_STRING()}else if(this.is_NUM())return this.consume_NUM();throw new Error(`Bad terminal sequence "${i}" at line ${this.yylineno} (offset ${this.offset})`)}}});var wf=V((Y1,Rf)=>{"use strict";Rf.exports={T_COMMENT:function(){for(;this.offset<this.size;){let i=this.input();if(i===`
`||i==="\r")return this.tok.T_COMMENT;if(i==="?"&&!this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT;if(i==="%"&&this.aspTagMode&&this._input[this.offset]===">")return this.unput(1),this.tok.T_COMMENT}return this.tok.T_COMMENT},T_DOC_COMMENT:function(){let i=this.input(),t=this.tok.T_COMMENT;if(i==="*"){if(i=this.input(),this.is_WHITESPACE()&&(t=this.tok.T_DOC_COMMENT),i==="/")return t;this.unput(1)}for(;this.offset<this.size;)if(i=this.input(),i==="*"&&this._input[this.offset]==="/"){this.input();break}return t}}});var Bf=V((Q1,Ff)=>{"use strict";Ff.exports={nextINITIAL:function(){return this.conditionStack.length>1&&this.conditionStack[this.conditionStack.length-1]==="INITIAL"?this.popState():this.begin("ST_IN_SCRIPTING"),this},matchINITIAL:function(){for(;this.offset<this.size;){let i=this.input();if(i=="<"){if(i=this.ahead(1),i=="?"){if(this.tryMatch("?=")){this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else if(this.tryMatchCaseless("?php")&&(i=this._input[this.offset+4],i===" "||i==="	"||i===`
`||i==="\r")){this.unput(1).appendToken(this.tok.T_OPEN_TAG,6).nextINITIAL();break}if(this.short_tags){this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}else if(this.asp_tags&&i=="%")if(this.tryMatch("%=")){this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG_WITH_ECHO,3).nextINITIAL();break}else{this.aspTagMode=!0,this.unput(1).appendToken(this.tok.T_OPEN_TAG,2).nextINITIAL();break}}}return this.yytext.length>0?this.tok.T_INLINE_HTML:!1}}});var Hf=V((j1,Mf)=>{"use strict";var qo=10,Uf="2147483648";process.arch=="x64"&&(qo=19,Uf="9223372036854775808");Mf.exports={consume_NUM:function(){let i=this.yytext[0],t=i===".";if(i==="0")if(i=this.input(),i==="x"||i==="X"){if(i=this.input(),i!=="_"&&this.is_HEX())return this.consume_HNUM();this.unput(i?2:1)}else if(i==="b"||i==="B"){if(i=this.input(),i!=="_"&&i==="0"||i==="1")return this.consume_BNUM();this.unput(i?2:1)}else this.is_NUM()||i&&this.unput(1);for(;this.offset<this.size;){let e=i;if(i=this.input(),i==="_"){if(e==="_"){this.unput(2);break}if(e==="."){this.unput(1);break}if(e==="e"||e==="E"){this.unput(2);break}}else if(i==="."){if(t){this.unput(1);break}if(e==="_"){this.unput(2);break}t=!0;continue}else if(i==="e"||i==="E"){if(e==="_"){this.unput(1);break}let s=2;if(i=this.input(),(i==="+"||i==="-")&&(s=3,i=this.input()),this.is_NUM_START())return this.consume_LNUM(),this.tok.T_DNUMBER;this.unput(i?s:s-1);break}if(!this.is_NUM()){i&&this.unput(1);break}}return t?this.tok.T_DNUMBER:this.yytext.length<qo-1?this.tok.T_LNUMBER:this.yytext.length<qo||this.yytext.length==qo&&this.yytext<Uf?this.tok.T_LNUMBER:this.tok.T_DNUMBER},consume_HNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_HEX()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_LNUM:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_NUM()){i&&this.unput(1);break}}return this.tok.T_LNUMBER},consume_BNUM:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i!=="0"&&i!=="1"&&i!=="_"){i&&this.unput(1);break}return this.tok.T_LNUMBER}}});var Gf=V((K1,Vf)=>{"use strict";Vf.exports={matchST_LOOKING_FOR_PROPERTY:function(){let i=this.input();if(i==="-"){if(i=this.input(),i===">")return this.tok.T_OBJECT_OPERATOR;i&&this.unput(1)}else{if(this.is_WHITESPACE())return this.tok.T_WHITESPACE;if(this.is_LABEL_START())return this.consume_LABEL(),this.popState(),this.tok.T_STRING}return this.popState(),i&&this.unput(1),!1},matchST_LOOKING_FOR_VARNAME:function(){let i=this.input();if(this.popState(),this.begin("ST_IN_SCRIPTING"),this.is_LABEL_START()){if(this.consume_LABEL(),i=this.input(),i==="["||i==="}")return this.unput(1),this.tok.T_STRING_VARNAME;this.unput(this.yytext.length)}else i&&this.unput(1);return!1},matchST_VAR_OFFSET:function(){let i=this.input();if(this.is_NUM_START())return this.consume_NUM(),this.tok.T_NUM_STRING;if(i==="]")return this.popState(),"]";if(i==="$"){if(this.input(),this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_VARIABLE;throw new Error("Unexpected terminal")}else{if(this.is_LABEL_START())return this.consume_LABEL(),this.tok.T_STRING;if(this.is_WHITESPACE()||i==="\\"||i==="'"||i==="#")return this.tok.T_ENCAPSED_AND_WHITESPACE;if(i==="["||i==="{"||i==="}"||i==='"'||i==="`"||this.is_TOKEN())return i;throw new Error("Unexpected terminal")}}}});var Wf=V((z1,qf)=>{"use strict";qf.exports={matchST_IN_SCRIPTING:function(){let i=this.input();switch(i){case" ":case"	":case`
`:case"\r":case`\r
`:return this.T_WHITESPACE();case"#":return this.version>=800&&this._input[this.offset]==="["?(this.input(),this.attributeListDepth[++this.attributeIndex]=0,this.begin("ST_ATTRIBUTE"),this.tok.T_ATTRIBUTE):this.T_COMMENT();case"/":return this._input[this.offset]==="/"?this.T_COMMENT():this._input[this.offset]==="*"?(this.input(),this.T_DOC_COMMENT()):this.consume_TOKEN();case"'":return this.T_CONSTANT_ENCAPSED_STRING();case'"':return this.ST_DOUBLE_QUOTES();case"`":return this.begin("ST_BACKQUOTE"),"`";case"?":if(!this.aspTagMode&&this.tryMatch(">")){this.input();let t=this._input[this.offset];return(t===`
`||t==="\r")&&this.input(),this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG}return this.consume_TOKEN();case"%":return this.aspTagMode&&this._input[this.offset]===">"?(this.input(),i=this._input[this.offset],(i===`
`||i==="\r")&&this.input(),this.aspTagMode=!1,this.conditionStack.length>1&&this.begin("INITIAL"),this.tok.T_CLOSE_TAG):this.consume_TOKEN();case"{":return this.begin("ST_IN_SCRIPTING"),"{";case"}":return this.conditionStack.length>2&&this.popState(),"}";default:if(i==="."){if(i=this.input(),this.is_NUM_START())return this.consume_NUM();i&&this.unput(1)}if(this.is_NUM_START())return this.consume_NUM();if(this.is_LABEL_START())return this.consume_LABEL().T_STRING();if(this.is_TOKEN())return this.consume_TOKEN()}throw new Error('Bad terminal sequence "'+i+'" at line '+this.yylineno+" (offset "+this.offset+")")},T_WHITESPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!(i===" "||i==="	"||i===`
`||i==="\r")){i&&this.unput(1);break}}return this.tok.T_WHITESPACE}}});var jf=V(($1,Qf)=>{"use strict";var ns=[`
`,"\r"],Yf=[`
`,"\r",";"],EA=Yf.concat(["	"," ",",","]",")","/","=","!"]);Qf.exports={T_CONSTANT_ENCAPSED_STRING:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else if(i=="'")break;return this.tok.T_CONSTANT_ENCAPSED_STRING},is_HEREDOC:function(){let i=this.offset;if(this._input[this.offset-1]==="<"&&this._input[this.offset]==="<"&&this._input[this.offset+1]==="<"){if(this.offset+=3,this.is_TABSPACE())for(;this.offset<this.size&&(this.offset++,!!this.is_TABSPACE()););let t=this._input[this.offset-1];if(t==="'"||t==='"'?this.offset++:t=null,this.is_LABEL_START()){let e=this.offset-1;for(;this.offset<this.size&&(this.offset++,!!this.is_LABEL()););let s=this._input.substring(e,this.offset-1);if((!t||t===this._input[this.offset-1])&&(t&&this.offset++,ns.includes(this._input[this.offset-1])))return this.heredoc_label.label=s,this.heredoc_label.length=s.length,this.heredoc_label.finished=!1,e=this.offset-i,this.offset=i,this.consume(e),t==="'"?this.begin("ST_NOWDOC"):this.begin("ST_HEREDOC"),this.prematch_ENDOFDOC(),this.tok.T_START_HEREDOC}}return this.offset=i,!1},ST_DOUBLE_QUOTES:function(){let i;for(;this.offset<this.size;)if(i=this.input(),i=="\\")this.input();else{if(i=='"')break;if(i=="$"){if(i=this.input(),i=="{"||this.is_LABEL_START()){this.unput(2);break}i&&this.unput(1)}else if(i=="{"){if(i=this.input(),i=="$"){this.unput(2);break}i&&this.unput(1)}}if(i=='"')return this.tok.T_CONSTANT_ENCAPSED_STRING;{let t=1;return(this.yytext[0]==="b"||this.yytext[0]==="B")&&(t=2),this.yytext.length>2&&this.appendToken(this.tok.T_ENCAPSED_AND_WHITESPACE,this.yytext.length-t),this.unput(this.yytext.length-t),this.begin("ST_DOUBLE_QUOTES"),this.yytext}},isDOC_MATCH:function(i,t){let e=this._input[i-2];if(!ns.includes(e))return!1;let s=!1,o=!1,h=0,c=this._input[i-1];if(this.version>=703){for(;c==="	"||c===" ";)c===" "?s=!0:c==="	"&&(o=!0),c=this._input[i+h],h++;if(i=i+h,ns.includes(this._input[i-1]))return!1}if(this._input.substring(i-1,i-1+this.heredoc_label.length)===this.heredoc_label.label){let u=this._input[i-1+this.heredoc_label.length];if((this.version>=703?EA:Yf).includes(u)){if(t){if(this.consume(h),s&&o)throw new Error("Parse error:  mixing spaces and tabs in ending marker at line "+this.yylineno+" (offset "+this.offset+")")}else this.heredoc_label.indentation=h,this.heredoc_label.indentation_uses_spaces=s,this.heredoc_label.first_encaps_node=!0;return!0}}return!1},prematch_ENDOFDOC:function(){this.heredoc_label.indentation_uses_spaces=!1,this.heredoc_label.indentation=0,this.heredoc_label.first_encaps_node=!0;let i=this.offset+1;for(;i<this._input.length;){if(this.isDOC_MATCH(i,!1))return;if(!ns.includes(this._input[i-1]))for(;!ns.includes(this._input[i++])&&i<this._input.length;);i++}},matchST_NOWDOC:function(){if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length),this.popState(),this.tok.T_END_HEREDOC;let i=this._input[this.offset-1];for(;this.offset<this.size;)if(ns.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_HEREDOC:function(){let i=this.input();if(this.isDOC_MATCH(this.offset,!0))return this.consume(this.heredoc_label.length-1),this.popState(),this.tok.T_END_HEREDOC;for(;this.offset<this.size;)if(i==="\\"&&(i=this.input(),ns.includes(i)||(i=this.input())),ns.includes(i)){if(i=this.input(),this.isDOC_MATCH(this.offset,!0))return this.unput(1).popState(),this.appendToken(this.tok.T_END_HEREDOC,this.heredoc_label.length),this.tok.T_ENCAPSED_AND_WHITESPACE}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN)}else i=this.input();return this.tok.T_ENCAPSED_AND_WHITESPACE},consume_VARIABLE:function(){this.consume_LABEL();let i=this.input();if(i=="[")return this.unput(1),this.begin("ST_VAR_OFFSET"),this.tok.T_VARIABLE;if(i==="-"){if(this.input()===">")return this.input(),this.is_LABEL_START()&&this.begin("ST_LOOKING_FOR_PROPERTY"),this.unput(3),this.tok.T_VARIABLE;this.unput(2)}else i&&this.unput(1);return this.tok.T_VARIABLE},matchST_BACKQUOTE:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==="`")return this.popState(),"`";for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==="`"){this.unput(1),this.popState(),this.appendToken("`",1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}continue}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);continue}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE},matchST_DOUBLE_QUOTES:function(){let i=this.input();if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START())return this.consume_VARIABLE()}else if(i==="{"){if(this._input[this.offset]==="$")return this.begin("ST_IN_SCRIPTING"),this.tok.T_CURLY_OPEN}else if(i==='"')return this.popState(),'"';for(;this.offset<this.size;){if(i==="\\")this.input();else if(i==='"'){this.unput(1),this.popState(),this.appendToken('"',1);break}else if(i==="$"){if(i=this.input(),i==="{")return this.begin("ST_LOOKING_FOR_VARNAME"),this.yytext.length>2?(this.appendToken(this.tok.T_DOLLAR_OPEN_CURLY_BRACES,2),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):this.tok.T_DOLLAR_OPEN_CURLY_BRACES;if(this.is_LABEL_START()){let t=this.offset,e=this.consume_VARIABLE();return this.yytext.length>this.offset-t+2?(this.appendToken(e,this.offset-t+2),this.unput(this.offset-t+2),this.tok.T_ENCAPSED_AND_WHITESPACE):e}i&&this.unput(1)}else if(i==="{"){if(i=this.input(),i==="$")return this.begin("ST_IN_SCRIPTING"),this.yytext.length>2?(this.appendToken(this.tok.T_CURLY_OPEN,1),this.unput(2),this.tok.T_ENCAPSED_AND_WHITESPACE):(this.unput(1),this.tok.T_CURLY_OPEN);i&&this.unput(1)}i=this.input()}return this.tok.T_ENCAPSED_AND_WHITESPACE}}});var zf=V((J1,Kf)=>{"use strict";Kf.exports={T_STRING:function(){let i=this.yytext.toLowerCase(),t=this.keywords[i];if(typeof t!="number"){if(i==="yield")this.version>=700&&this.tryMatch(" from")?(this.consume(5),t=this.tok.T_YIELD_FROM):t=this.tok.T_YIELD;else if(t=this.tok.T_STRING,i==="b"||i==="B"){let e=this.input();if(e==='"')return this.ST_DOUBLE_QUOTES();if(e==="'")return this.T_CONSTANT_ENCAPSED_STRING();e&&this.unput(1)}}if(t===this.tok.T_ENUM){if(this.version<801)return this.tok.T_STRING;let e=this.offset,s=this.input();for(;s==" ";)s=this.input();let o=!1;if(this.is_LABEL_START()){for(;this.is_LABEL();)s+=this.input();let h=s.slice(0,-1).toLowerCase();o=h!=="extends"&&h!=="implements"}return this.unput(this.offset-e),o?this.tok.T_ENUM:this.tok.T_STRING}if(this.offset<this.size&&t!==this.tok.T_YIELD_FROM){let e=this.input();if(e==="\\"){t=i==="namespace"?this.tok.T_NAME_RELATIVE:this.tok.T_NAME_QUALIFIED;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),e=this.input()}while(e==="\\")}e&&this.unput(1)}return t},consume_TOKEN:function(){let i=this._input[this.offset-1],t=this.tokenTerminals[i];return t?t.apply(this,[]):this.yytext},tokenTerminals:{$:function(){return this.offset++,this.is_LABEL_START()?(this.offset--,this.consume_LABEL(),this.tok.T_VARIABLE):(this.offset--,"$")},"-":function(){let i=this._input[this.offset];return i===">"?(this.begin("ST_LOOKING_FOR_PROPERTY").input(),this.tok.T_OBJECT_OPERATOR):i==="-"?(this.input(),this.tok.T_DEC):i==="="?(this.input(),this.tok.T_MINUS_EQUAL):"-"},"\\":function(){if(this.offset<this.size)if(this.input(),this.is_LABEL_START()){let i;do{if(this._input[this.offset]==="{"){this.input();break}this.consume_LABEL(),i=this.input()}while(i==="\\");return this.unput(1),this.tok.T_NAME_FULLY_QUALIFIED}else this.unput(1);return this.tok.T_NS_SEPARATOR},"/":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_DIV_EQUAL):"/"},":":function(){return this._input[this.offset]===":"?(this.input(),this.tok.T_DOUBLE_COLON):":"},"(":function(){let i=this.offset;if(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this.is_LABEL_START()){let t=this.yytext.length;this.consume_LABEL();let e=this.yytext.substring(t-1).toLowerCase(),s=this.castKeywords[e];if(typeof s=="number"&&(this.input(),this.is_TABSPACE()&&this.consume_TABSPACE().input(),this._input[this.offset-1]===")"))return s}return this.unput(this.offset-i),"("},"=":function(){let i=this._input[this.offset];return i===">"?(this.input(),this.tok.T_DOUBLE_ARROW):i==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_IDENTICAL):(this.input(),this.tok.T_IS_EQUAL):"="},"+":function(){let i=this._input[this.offset];return i==="+"?(this.input(),this.tok.T_INC):i==="="?(this.input(),this.tok.T_PLUS_EQUAL):"+"},"!":function(){return this._input[this.offset]==="="?this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_IS_NOT_IDENTICAL):(this.input(),this.tok.T_IS_NOT_EQUAL):"!"},"?":function(){return this.version>=700&&this._input[this.offset]==="?"?this.version>=704&&this._input[this.offset+1]==="="?(this.consume(2),this.tok.T_COALESCE_EQUAL):(this.input(),this.tok.T_COALESCE):this.version>=800&&this._input[this.offset]==="-"&&this._input[this.offset+1]===">"?(this.consume(2),this.tok.T_NULLSAFE_OBJECT_OPERATOR):"?"},"<":function(){let i=this._input[this.offset];return i==="<"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SL_EQUAL):i==="<"&&this.is_HEREDOC()?this.tok.T_START_HEREDOC:(this.input(),this.tok.T_SL)):i==="="?(this.input(),this.version>=700&&this._input[this.offset]===">"?(this.input(),this.tok.T_SPACESHIP):this.tok.T_IS_SMALLER_OR_EQUAL):i===">"?(this.input(),this.tok.T_IS_NOT_EQUAL):"<"},">":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_IS_GREATER_OR_EQUAL):i===">"?(i=this._input[this.offset+1],i==="="?(this.consume(2),this.tok.T_SR_EQUAL):(this.input(),this.tok.T_SR)):">"},"*":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_MUL_EQUAL):i==="*"?(this.input(),this._input[this.offset]==="="?(this.input(),this.tok.T_POW_EQUAL):this.tok.T_POW):"*"},".":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_CONCAT_EQUAL):i==="."&&this._input[this.offset+1]==="."?(this.consume(2),this.tok.T_ELLIPSIS):"."},"%":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_MOD_EQUAL):"%"},"&":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_AND_EQUAL):i==="&"?(this.input(),this.tok.T_BOOLEAN_AND):"&"},"|":function(){let i=this._input[this.offset];return i==="="?(this.input(),this.tok.T_OR_EQUAL):i==="|"?(this.input(),this.tok.T_BOOLEAN_OR):"|"},"^":function(){return this._input[this.offset]==="="?(this.input(),this.tok.T_XOR_EQUAL):"^"}}}});var Jf=V((X1,$f)=>{"use strict";var vA=";:,.\\[]()|^&+-/*=%!~$<>?@";$f.exports={is_NUM:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i===95},is_NUM_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58},is_LABEL:function(){let i=this._input.charCodeAt(this.offset-1);return i>96&&i<123||i>64&&i<91||i===95||i>47&&i<58||i>126},is_LABEL_START:function(){let i=this._input.charCodeAt(this.offset-1);return i>64&&i<91||i>96&&i<123||i===95||i>126},consume_LABEL:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_LABEL()){i&&this.unput(1);break}}return this},is_TOKEN:function(){let i=this._input[this.offset-1];return vA.indexOf(i)!==-1},is_WHITESPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"||i===`
`||i==="\r"},is_TABSPACE:function(){let i=this._input[this.offset-1];return i===" "||i==="	"},consume_TABSPACE:function(){for(;this.offset<this.size;){let i=this.input();if(!this.is_TABSPACE()){i&&this.unput(1);break}}return this},is_HEX:function(){let i=this._input.charCodeAt(this.offset-1);return i>47&&i<58||i>64&&i<71||i>96&&i<103||i===95}}});var Zf=V((Z1,Xf)=>{"use strict";var _i=function(i){this.engine=i,this.tok=this.engine.tokens.names,this.EOF=1,this.debug=!1,this.all_tokens=!0,this.comment_tokens=!1,this.mode_eval=!1,this.asp_tags=!1,this.short_tags=!1,this.version=801,this.yyprevcol=0,this.keywords={__class__:this.tok.T_CLASS_C,__trait__:this.tok.T_TRAIT_C,__function__:this.tok.T_FUNC_C,__method__:this.tok.T_METHOD_C,__line__:this.tok.T_LINE,__file__:this.tok.T_FILE,__dir__:this.tok.T_DIR,__namespace__:this.tok.T_NS_C,exit:this.tok.T_EXIT,die:this.tok.T_EXIT,function:this.tok.T_FUNCTION,const:this.tok.T_CONST,return:this.tok.T_RETURN,try:this.tok.T_TRY,catch:this.tok.T_CATCH,finally:this.tok.T_FINALLY,throw:this.tok.T_THROW,if:this.tok.T_IF,elseif:this.tok.T_ELSEIF,endif:this.tok.T_ENDIF,else:this.tok.T_ELSE,while:this.tok.T_WHILE,endwhile:this.tok.T_ENDWHILE,do:this.tok.T_DO,for:this.tok.T_FOR,endfor:this.tok.T_ENDFOR,foreach:this.tok.T_FOREACH,endforeach:this.tok.T_ENDFOREACH,declare:this.tok.T_DECLARE,enddeclare:this.tok.T_ENDDECLARE,instanceof:this.tok.T_INSTANCEOF,as:this.tok.T_AS,switch:this.tok.T_SWITCH,endswitch:this.tok.T_ENDSWITCH,case:this.tok.T_CASE,default:this.tok.T_DEFAULT,break:this.tok.T_BREAK,continue:this.tok.T_CONTINUE,goto:this.tok.T_GOTO,echo:this.tok.T_ECHO,print:this.tok.T_PRINT,class:this.tok.T_CLASS,interface:this.tok.T_INTERFACE,trait:this.tok.T_TRAIT,enum:this.tok.T_ENUM,extends:this.tok.T_EXTENDS,implements:this.tok.T_IMPLEMENTS,new:this.tok.T_NEW,clone:this.tok.T_CLONE,var:this.tok.T_VAR,eval:this.tok.T_EVAL,include:this.tok.T_INCLUDE,include_once:this.tok.T_INCLUDE_ONCE,require:this.tok.T_REQUIRE,require_once:this.tok.T_REQUIRE_ONCE,namespace:this.tok.T_NAMESPACE,use:this.tok.T_USE,insteadof:this.tok.T_INSTEADOF,global:this.tok.T_GLOBAL,isset:this.tok.T_ISSET,empty:this.tok.T_EMPTY,__halt_compiler:this.tok.T_HALT_COMPILER,static:this.tok.T_STATIC,abstract:this.tok.T_ABSTRACT,final:this.tok.T_FINAL,private:this.tok.T_PRIVATE,protected:this.tok.T_PROTECTED,public:this.tok.T_PUBLIC,unset:this.tok.T_UNSET,list:this.tok.T_LIST,array:this.tok.T_ARRAY,callable:this.tok.T_CALLABLE,or:this.tok.T_LOGICAL_OR,and:this.tok.T_LOGICAL_AND,xor:this.tok.T_LOGICAL_XOR,match:this.tok.T_MATCH,readonly:this.tok.T_READ_ONLY},this.castKeywords={int:this.tok.T_INT_CAST,integer:this.tok.T_INT_CAST,real:this.tok.T_DOUBLE_CAST,double:this.tok.T_DOUBLE_CAST,float:this.tok.T_DOUBLE_CAST,string:this.tok.T_STRING_CAST,binary:this.tok.T_STRING_CAST,array:this.tok.T_ARRAY_CAST,object:this.tok.T_OBJECT_CAST,bool:this.tok.T_BOOL_CAST,boolean:this.tok.T_BOOL_CAST,unset:this.tok.T_UNSET_CAST}};_i.prototype.setInput=function(i){return this._input=i,this.size=i.length,this.yylineno=1,this.offset=0,this.yyprevcol=0,this.yytext="",this.yylloc={first_offset:0,first_line:1,first_column:0,prev_offset:0,prev_line:1,prev_column:0,last_line:1,last_column:0},this.tokens=[],this.version>703?this.keywords.fn=this.tok.T_FN:delete this.keywords.fn,this.done=this.offset>=this.size,!this.all_tokens&&this.mode_eval?(this.conditionStack=["INITIAL"],this.begin("ST_IN_SCRIPTING")):(this.conditionStack=[],this.begin("INITIAL")),this.heredoc_label={label:"",length:0,indentation:0,indentation_uses_spaces:!1,finished:!1,first_encaps_node:!1,toString:function(){this.label}},this};_i.prototype.input=function(){let i=this._input[this.offset];return i?(this.yytext+=i,this.offset++,i==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++),i===`
`||i==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++,i):""};_i.prototype.unput=function(i){if(i===1)this.offset--,this._input[this.offset]===`
`&&this._input[this.offset-1]==="\r"&&(this.offset--,i++),this._input[this.offset]==="\r"||this._input[this.offset]===`
`?(this.yylloc.last_line--,this.yylineno--,this.yylloc.last_column=this.yyprevcol):this.yylloc.last_column--,this.yytext=this.yytext.substring(0,this.yytext.length-i);else if(i>0)if(this.offset-=i,i<this.yytext.length){this.yytext=this.yytext.substring(0,this.yytext.length-i),this.yylloc.last_line=this.yylloc.first_line,this.yylloc.last_column=this.yyprevcol=this.yylloc.first_column;for(let t=0;t<this.yytext.length;t++){let e=this.yytext[t];e==="\r"?(e=this.yytext[++t],this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0,e!==`
`&&(e==="\r"?this.yylloc.last_line++:this.yylloc.last_column++)):e===`
`?(this.yyprevcol=this.yylloc.last_column,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++}this.yylineno=this.yylloc.last_line}else this.yytext="",this.yylloc.last_line=this.yylineno=this.yylloc.first_line,this.yylloc.last_column=this.yylloc.first_column;return this};_i.prototype.tryMatch=function(i){return i===this.ahead(i.length)};_i.prototype.tryMatchCaseless=function(i){return i===this.ahead(i.length).toLowerCase()};_i.prototype.ahead=function(i){let t=this._input.substring(this.offset,this.offset+i);return t[t.length-1]==="\r"&&this._input[this.offset+i+1]===`
`&&(t+=`
`),t};_i.prototype.consume=function(i){for(let t=0;t<i;t++){let e=this._input[this.offset];if(!e)break;this.yytext+=e,this.offset++,e==="\r"&&this._input[this.offset]===`
`&&(this.yytext+=`
`,this.offset++,t++),e===`
`||e==="\r"?(this.yylloc.last_line=++this.yylineno,this.yyprevcol=this.yylloc.last_column,this.yylloc.last_column=0):this.yylloc.last_column++}return this};_i.prototype.getState=function(){return{yytext:this.yytext,offset:this.offset,yylineno:this.yylineno,yyprevcol:this.yyprevcol,yylloc:{first_offset:this.yylloc.first_offset,first_line:this.yylloc.first_line,first_column:this.yylloc.first_column,last_line:this.yylloc.last_line,last_column:this.yylloc.last_column},heredoc_label:this.heredoc_label}};_i.prototype.setState=function(i){return this.yytext=i.yytext,this.offset=i.offset,this.yylineno=i.yylineno,this.yyprevcol=i.yyprevcol,this.yylloc=i.yylloc,i.heredoc_label&&(this.heredoc_label=i.heredoc_label),this};_i.prototype.appendToken=function(i,t){return this.tokens.push([i,t]),this};_i.prototype.lex=function(){this.yylloc.prev_offset=this.offset,this.yylloc.prev_line=this.yylloc.last_line,this.yylloc.prev_column=this.yylloc.last_column;let i=this.next()||this.lex();if(!this.all_tokens){for(;i===this.tok.T_WHITESPACE||!this.comment_tokens&&(i===this.tok.T_COMMENT||i===this.tok.T_DOC_COMMENT)||i===this.tok.T_OPEN_TAG;)i=this.next()||this.lex();if(i==this.tok.T_OPEN_TAG_WITH_ECHO)return this.tok.T_ECHO;if(i===this.tok.T_CLOSE_TAG)return";"}return this.yylloc.prev_offset||(this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column),i};_i.prototype.begin=function(i){if(this.conditionStack.push(i),this.curCondition=i,this.stateCb=this["match"+i],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+i+'"');return this};_i.prototype.popState=function(){let t=this.conditionStack.length-1>0?this.conditionStack.pop():this.conditionStack[0];if(this.curCondition=this.conditionStack[this.conditionStack.length-1],this.stateCb=this["match"+this.curCondition],typeof this.stateCb!="function")throw new Error('Undefined condition state "'+this.curCondition+'"');return t};_i.prototype.next=function(){let i;if(this._input||(this.done=!0),this.yylloc.first_offset=this.offset,this.yylloc.first_line=this.yylloc.last_line,this.yylloc.first_column=this.yylloc.last_column,this.yytext="",this.done)return this.yylloc.prev_offset=this.yylloc.first_offset,this.yylloc.prev_line=this.yylloc.first_line,this.yylloc.prev_column=this.yylloc.first_column,this.EOF;if(this.tokens.length>0?(i=this.tokens.shift(),typeof i[1]=="object"?this.setState(i[1]):this.consume(i[1]),i=i[0]):i=this.stateCb.apply(this,[]),this.offset>=this.size&&this.tokens.length===0&&(this.done=!0),this.debug){let t=i;typeof t=="number"?t=this.engine.tokens.values[t]:t='"'+t+'"';let e=new Error(t+"	from "+this.yylloc.first_line+","+this.yylloc.first_column+"	 - to "+this.yylloc.last_line+","+this.yylloc.last_column+'	"'+this.yytext+'"');console.error(e.stack)}return i};[Df(),wf(),Bf(),Hf(),Gf(),Wf(),jf(),zf(),Jf()].forEach(function(i){for(let t in i)_i.prototype[t]=i[t]});Xf.exports=_i});var dh=V((tL,td)=>{"use strict";var yA=function(i,t,e){this.line=i,this.column=t,this.offset=e};td.exports=yA});var id=V((eL,ed)=>{"use strict";ed.exports={read_array:function(){let i=null,t=!1,e=this.node("array");this.token===this.tok.T_ARRAY?(this.next().expect("("),i=")"):(t=!0,i="]");let s=[];return this.next().token!==i&&(s=this.read_array_pair_list(t)),this.expect(i),this.next(),e(t,s)},read_array_pair_list:function(i){let t=this;return this.read_list(function(){return t.read_array_pair(i)},",",!0)},read_array_pair:function(i){if(!i&&this.token===")"||i&&this.token==="]")return;if(this.token===",")return this.node("noop")();let t=this.node("entry"),e=null,s=null,o=!1,h=!1;if(this.token==="&")this.next(),o=!0,s=this.read_variable(!0,!1);else if(this.token===this.tok.T_ELLIPSIS&&this.version>=704)this.next(),this.token==="&"&&this.error(),h=!0,s=this.read_expr();else{let c=this.read_expr();this.token===this.tok.T_DOUBLE_ARROW?(this.next(),e=c,this.token==="&"?(this.next(),o=!0,s=this.read_variable(!0,!1)):s=this.read_expr()):s=c}return t(e,s,o,h)}}});var sd=V((iL,nd)=>{"use strict";nd.exports={read_class_declaration_statement:function(i){let t=this.node("class"),e=this.read_class_modifiers();if(this.token!==this.tok.T_CLASS)return this.error(this.tok.T_CLASS),this.next(),null;this.next().expect(this.tok.T_STRING);let s=this.node("identifier"),o=this.text();this.next(),s=s(o);let h=this.read_extends_from(),c=this.read_implements_list();this.expect("{");let u=this.next().read_class_body(!0,!1),f=t(s,h,c,u,e);return i&&(f.attrGroups=i),f},read_class_modifiers:function(){return[0,0,this.read_class_modifier()]},read_class_modifier:function(){return this.token===this.tok.T_ABSTRACT?(this.next(),1):this.token===this.tok.T_FINAL?(this.next(),2):0},read_class_body:function(i,t){let e=[],s=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){e.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){e.push(this.read_doc_comment());continue}if(this.token===this.tok.T_USE){e=e.concat(this.read_trait_use_statement());continue}if(t&&this.token===this.tok.T_CASE){let c=this.read_enum_case();this.expect(";")&&this.next(),e=e.concat(c);continue}this.token===this.tok.T_ATTRIBUTE&&(s=this.read_attr_list());let o=this.position(),h=this.read_member_flags(!1);if(this.token===this.tok.T_CONST){let c=this.read_constant_list(h,s);this.expect(";")&&this.next(),e=e.concat(c);continue}if(i&&this.token===this.tok.T_VAR&&(this.next().expect(this.tok.T_VARIABLE),h[0]=null,h[1]=0),this.token===this.tok.T_FUNCTION)e.push(this.read_function(!1,h,s,o)),s=[];else if(i&&(this.token===this.tok.T_VARIABLE||this.version>=801&&this.token===this.tok.T_READ_ONLY||this.version>=704&&(this.token==="?"||this.token===this.tok.T_CALLABLE||this.token===this.tok.T_ARRAY||this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE))){let c=this.read_variable_list(h,s);s=[],this.expect(";"),this.next(),e=e.concat(c)}else this.error([this.tok.T_CONST,...i?[this.tok.T_VARIABLE]:[],...t?[this.tok.T_CASE]:[],this.tok.T_FUNCTION]),this.next()}return this.expect("}"),this.next(),e},read_variable_list:function(i,t){let e=this.node("propertystatement"),s=this.read_list(function(){let h=this.node("property"),c=!1;this.token===this.tok.T_READ_ONLY&&(c=!0,this.next());let[u,f]=this.read_optional_type();this.expect(this.tok.T_VARIABLE);let k=this.node("identifier"),x=this.text().substring(1);return this.next(),k=k(x),this.token===";"||this.token===","?h(k,null,c,u,f,t||[]):this.token==="="?h(k,this.next().read_expr(),c,u,f,t||[]):(this.expect([",",";","="]),h(k,null,u,f,t||[]))},",");return e(null,s,i)},read_constant_list:function(i,t){this.expect(this.tok.T_CONST)&&this.next();let e=this.node("classconstant"),s=this.read_list(function(){let h=this.node("constant"),c=null,u=null;if(this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){c=this.node("identifier");let f=this.text();this.next(),c=c(f)}else this.expect("IDENTIFIER");return this.expect("=")&&(u=this.next().read_expr()),h(c,u)},",");return e(null,s,i,t||[])},read_member_flags:function(i){let t=[-1,-1,-1];if(this.is("T_MEMBER_FLAGS")){let e=0,s=0;do{switch(this.token){case this.tok.T_PUBLIC:e=0,s=0;break;case this.tok.T_PROTECTED:e=0,s=1;break;case this.tok.T_PRIVATE:e=0,s=2;break;case this.tok.T_STATIC:e=1,s=1;break;case this.tok.T_ABSTRACT:e=2,s=1;break;case this.tok.T_FINAL:e=2,s=2;break}i&&(e==0&&s==2?(this.expect([this.tok.T_PUBLIC,this.tok.T_PROTECTED]),s=-1):e==2&&s==1&&(this.error(),s=-1)),t[e]!==-1?this.error():s!==-1&&(t[e]=s)}while(this.next().is("T_MEMBER_FLAGS"))}return t[1]==-1&&(t[1]=0),t[2]==-1&&(t[2]=0),t},read_optional_type:function(){let i=!1;this.token==="?"&&(i=!0,this.next());let t=this.read_types();if(i&&!t&&this.raiseError("Expecting a type definition combined with nullable operator"),!i&&!t)return[!1,null];if(this.token==="|"){t=[t];do{this.next();let e=this.read_type();if(!e){this.raiseError("Expecting a type definition");break}t.push(e)}while(this.token==="|")}return[i,t]},read_interface_declaration_statement:function(i){let t=this.node("interface");if(this.token!==this.tok.T_INTERFACE)return this.error(this.tok.T_INTERFACE),this.next(),null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=this.read_interface_extends_list();this.expect("{");let h=this.next().read_interface_body();return t(e,o,h,i||[])},read_interface_body:function(){let i=[],t=[];for(;this.token!==this.EOF&&this.token!=="}";){if(this.token===this.tok.T_COMMENT){i.push(this.read_comment());continue}if(this.token===this.tok.T_DOC_COMMENT){i.push(this.read_doc_comment());continue}let e=this.position();t=this.read_attr_list();let s=this.read_member_flags(!0);if(this.token==this.tok.T_CONST){let o=this.read_constant_list(s,t);this.expect(";")&&this.next(),i=i.concat(o),t=[]}else if(this.token===this.tok.T_FUNCTION){let o=this.read_function_declaration(2,s,t,e);o.parseFlags(s),i.push(o),this.expect(";")&&this.next(),t=[]}else this.error([this.tok.T_CONST,this.tok.T_FUNCTION]),this.next()}return this.expect("}")&&this.next(),i},read_trait_declaration_statement:function(){let i=this.node("trait");if(this.token!==this.tok.T_TRAIT)return this.error(this.tok.T_TRAIT),this.next(),null;this.next().expect(this.tok.T_STRING);let t=this.node("identifier"),e=this.text();this.next(),t=t(e),this.expect("{");let s=this.next().read_class_body(!0,!1);return i(t,s)},read_trait_use_statement:function(){let i=this.node("traituse");this.expect(this.tok.T_USE)&&this.next();let t=[this.read_namespace_name()],e=null;for(;this.token===",";)t.push(this.next().read_namespace_name());if(this.token==="{"){for(e=[];this.next().token!==this.EOF&&this.token!=="}";)e.push(this.read_trait_use_alias()),this.expect(";");this.expect("}")&&this.next()}else this.expect(";")&&this.next();return i(t,e)},read_trait_use_alias:function(){let i=this.node(),t=null,e;if(this.is("IDENTIFIER")){e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else if(e=this.read_namespace_name(),this.token===this.tok.T_DOUBLE_COLON)if(this.next(),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){t=e,e=this.node("identifier");let s=this.text();this.next(),e=e(s)}else this.expect(this.tok.T_STRING);else e=e.name;if(this.token===this.tok.T_INSTEADOF)return i("traitprecedence",t,e,this.next().read_name_list());if(this.token===this.tok.T_AS){let s=null,o=null;if(this.next().is("T_MEMBER_FLAGS")&&(s=this.read_member_flags()),this.token===this.tok.T_STRING||this.version>=700&&this.is("IDENTIFIER")){o=this.node("identifier");let h=this.text();this.next(),o=o(h)}else s===!1&&this.expect(this.tok.T_STRING);return i("traitalias",t,e,o,s)}return this.expect([this.tok.T_AS,this.tok.T_INSTEADOF]),i("traitalias",t,e,null,null)}}});var od=V((nL,rd)=>{"use strict";rd.exports={read_comment:function(){let i=this.text(),t=this.ast.prepare(i.substring(0,2)==="/*"?"commentblock":"commentline",null,this),e=this.lexer.yylloc.first_offset,s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),t=t(i),t.offset=e,this.prev=s,t},read_doc_comment:function(){let i=this.ast.prepare("commentblock",null,this),t=this.lexer.yylloc.first_offset,e=this.text(),s=this.prev;return this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset],this.lex(),i=i(e),i.offset=t,this.prev=s,i}}});var hd=V((sL,ad)=>{"use strict";ad.exports={read_expr:function(i){let t=this.node();if(this.token==="@")return i||(i=this.next().read_expr()),t("silent",i);if(i||(i=this.read_expr_item()),this.token==="|")return t("bin","|",i,this.next().read_expr());if(this.token==="&")return t("bin","&",i,this.next().read_expr());if(this.token==="^")return t("bin","^",i,this.next().read_expr());if(this.token===".")return t("bin",".",i,this.next().read_expr());if(this.token==="+")return t("bin","+",i,this.next().read_expr());if(this.token==="-")return t("bin","-",i,this.next().read_expr());if(this.token==="*")return t("bin","*",i,this.next().read_expr());if(this.token==="/")return t("bin","/",i,this.next().read_expr());if(this.token==="%")return t("bin","%",i,this.next().read_expr());if(this.token===this.tok.T_POW)return t("bin","**",i,this.next().read_expr());if(this.token===this.tok.T_SL)return t("bin","<<",i,this.next().read_expr());if(this.token===this.tok.T_SR)return t("bin",">>",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_OR)return t("bin","||",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_OR)return t("bin","or",i,this.next().read_expr());if(this.token===this.tok.T_BOOLEAN_AND)return t("bin","&&",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_AND)return t("bin","and",i,this.next().read_expr());if(this.token===this.tok.T_LOGICAL_XOR)return t("bin","xor",i,this.next().read_expr());if(this.token===this.tok.T_IS_IDENTICAL)return t("bin","===",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_IDENTICAL)return t("bin","!==",i,this.next().read_expr());if(this.token===this.tok.T_IS_EQUAL)return t("bin","==",i,this.next().read_expr());if(this.token===this.tok.T_IS_NOT_EQUAL)return t("bin","!=",i,this.next().read_expr());if(this.token==="<")return t("bin","<",i,this.next().read_expr());if(this.token===">")return t("bin",">",i,this.next().read_expr());if(this.token===this.tok.T_IS_SMALLER_OR_EQUAL)return t("bin","<=",i,this.next().read_expr());if(this.token===this.tok.T_IS_GREATER_OR_EQUAL)return t("bin",">=",i,this.next().read_expr());if(this.token===this.tok.T_SPACESHIP)return t("bin","<=>",i,this.next().read_expr());if(this.token===this.tok.T_INSTANCEOF&&(i=t("bin","instanceof",i,this.next().read_class_name_reference()),this.token!==";"&&this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF&&(i=this.read_expr(i))),this.token===this.tok.T_COALESCE)return t("bin","??",i,this.next().read_expr());if(this.token==="?"){let e=null;return this.next().token!==":"&&(e=this.read_expr()),this.expect(":")&&this.next(),t("retif",i,e,this.read_expr())}else t.destroy(i);return i},read_expr_cast:function(i){return this.node("cast")(i,this.text(),this.next().read_expr())},read_isset_variable:function(){return this.read_expr()},read_isset_variables:function(){return this.read_function_list(this.read_isset_variable,",")},read_internal_functions_in_yacc:function(){let i=null;switch(this.token){case this.tok.T_ISSET:{i=this.node("isset"),this.next().expect("(")&&this.next();let t=this.read_isset_variables();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_EMPTY:{i=this.node("empty"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_INCLUDE:i=this.node("include")(!1,!1,this.next().read_expr());break;case this.tok.T_INCLUDE_ONCE:i=this.node("include")(!0,!1,this.next().read_expr());break;case this.tok.T_EVAL:{i=this.node("eval"),this.next().expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next(),i=i(t)}break;case this.tok.T_REQUIRE:i=this.node("include")(!1,!0,this.next().read_expr());break;case this.tok.T_REQUIRE_ONCE:i=this.node("include")(!0,!0,this.next().read_expr());break}return i},read_optional_expr:function(i){return this.token!==i?this.read_expr():null},read_exit_expr:function(){let i=null;return this.token==="("&&(this.next(),i=this.read_optional_expr(")"),this.expect(")")&&this.next()),i},read_expr_item:function(){let i,t,e=[];if(this.token==="+")return this.node("unary")("+",this.next().read_expr());if(this.token==="-")return this.node("unary")("-",this.next().read_expr());if(this.token==="!")return this.node("unary")("!",this.next().read_expr());if(this.token==="~")return this.node("unary")("~",this.next().read_expr());if(this.token==="(")return t=this.next().read_expr(),t.parenthesizedExpression=!0,this.expect(")")&&this.next(),this.handleDereferencable(t);if(this.token==="`")return this.read_encapsed_string("`");if(this.token===this.tok.T_LIST){let s=null,o=this.innerList;i=this.node("list"),o||(s=this.node("assign")),this.next().expect("(")&&this.next(),this.innerList||(this.innerList=!0);let h=this.read_array_pair_list(!1);this.expect(")")&&this.next();let c=!1;for(let u=0;u<h.length;u++)if(h[u]!==null&&h[u].kind!=="noop"){c=!0;break}return c||this.raiseError("Fatal Error :  Cannot use empty list on line "+this.lexer.yylloc.first_line),o?i(h,!1):(this.innerList=!1,this.expect("=")?s(i(h,!1),this.next().read_expr(),"="):i(h,!1))}if(this.token===this.tok.T_ATTRIBUTE&&(e=this.read_attr_list()),this.token===this.tok.T_CLONE)return this.node("clone")(this.next().read_expr());switch(this.token){case this.tok.T_INC:return this.node("pre")("+",this.next().read_variable(!1,!1));case this.tok.T_DEC:return this.node("pre")("-",this.next().read_variable(!1,!1));case this.tok.T_NEW:return this.read_new_expr();case this.tok.T_ISSET:case this.tok.T_EMPTY:case this.tok.T_INCLUDE:case this.tok.T_INCLUDE_ONCE:case this.tok.T_EVAL:case this.tok.T_REQUIRE:case this.tok.T_REQUIRE_ONCE:return this.read_internal_functions_in_yacc();case this.tok.T_MATCH:return this.read_match_expression();case this.tok.T_INT_CAST:return this.read_expr_cast("int");case this.tok.T_DOUBLE_CAST:return this.read_expr_cast("float");case this.tok.T_STRING_CAST:return this.read_expr_cast(this.text().indexOf("binary")!==-1?"binary":"string");case this.tok.T_ARRAY_CAST:return this.read_expr_cast("array");case this.tok.T_OBJECT_CAST:return this.read_expr_cast("object");case this.tok.T_BOOL_CAST:return this.read_expr_cast("bool");case this.tok.T_UNSET_CAST:return this.read_expr_cast("unset");case this.tok.T_THROW:{this.version<800&&this.raiseError("PHP 8+ is required to use throw as an expression");let s=this.node("throw"),o=this.next().read_expr();return s(o)}case this.tok.T_EXIT:{let s=this.lexer.yytext.toLowerCase()==="die";i=this.node("exit"),this.next();let o=this.read_exit_expr();return i(o,s)}case this.tok.T_PRINT:return this.node("print")(this.next().read_expr());case this.tok.T_YIELD:{let s=null,o=null;return i=this.node("yield"),this.next().is("EXPR")&&(s=this.read_expr(),this.token===this.tok.T_DOUBLE_ARROW&&(o=s,s=this.next().read_expr())),i(s,o)}case this.tok.T_YIELD_FROM:return i=this.node("yieldfrom"),t=this.next().read_expr(),i(t);case this.tok.T_FN:case this.tok.T_FUNCTION:return this.read_inline_function(void 0,e);case this.tok.T_STATIC:{let s=[this.token,this.lexer.getState()];if(this.next(),this.token===this.tok.T_FUNCTION||this.version>=704&&this.token===this.tok.T_FN)return this.read_inline_function([0,1,0],e);this.lexer.tokens.push(s),this.next()}}if(this.is("VARIABLE")){i=this.node(),t=this.read_variable(!1,!1);let s=t.kind==="identifier"||t.kind==="staticlookup"&&t.offset.kind==="identifier";switch(this.token){case"=":return s&&this.error("VARIABLE"),this.next().token=="&"?this.read_assignref(i,t):i("assign",t,this.read_expr(),"=");case this.tok.T_PLUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"+=");case this.tok.T_MINUS_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"-=");case this.tok.T_MUL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"*=");case this.tok.T_POW_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"**=");case this.tok.T_DIV_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"/=");case this.tok.T_CONCAT_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),".=");case this.tok.T_MOD_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"%=");case this.tok.T_AND_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"&=");case this.tok.T_OR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"|=");case this.tok.T_XOR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"^=");case this.tok.T_SL_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"<<=");case this.tok.T_SR_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),">>=");case this.tok.T_COALESCE_EQUAL:return s&&this.error("VARIABLE"),i("assign",t,this.next().read_expr(),"??=");case this.tok.T_INC:return s&&this.error("VARIABLE"),this.next(),i("post","+",t);case this.tok.T_DEC:return s&&this.error("VARIABLE"),this.next(),i("post","-",t);default:i.destroy(t)}}else if(this.is("SCALAR")){if(i=this.node(),t=this.read_scalar(),t.kind==="array"&&t.shortForm&&this.token==="="){let s=this.convertToList(t);t.loc&&(s.loc=t.loc);let o=this.next().read_expr();return i("assign",s,o,"=")}else i.destroy(t);return this.handleDereferencable(t)}else this.error("EXPR"),this.next();return t},convertToList:function(i){let t=i.items.map(s=>(s.value&&s.value.kind==="array"&&s.value.shortForm&&(s.value=this.convertToList(s.value)),s)),e=this.node("list")(t,!0);return i.loc&&(e.loc=i.loc),i.leadingComments&&(e.leadingComments=i.leadingComments),i.trailingComments&&(e.trailingComments=i.trailingComments),e},read_assignref:function(i,t){this.next();let e;return this.token===this.tok.T_NEW?(this.version>=700&&this.error(),e=this.read_new_expr()):e=this.read_variable(!1,!1),i("assignref",t,e)},read_inline_function:function(i,t){if(this.token===this.tok.T_FUNCTION){let k=this.read_function(!0,i,t);return k.attrGroups=t,k}!this.version>=704&&this.raiseError("Arrow Functions are not allowed");let e=this.node("arrowfunc");this.expect(this.tok.T_FN)&&this.next();let s=this.is_reference();this.expect("(")&&this.next();let o=this.read_parameter_list();this.expect(")")&&this.next();let h=!1,c=null;this.token===":"&&(this.next().token==="?"&&(h=!0,this.next()),c=this.read_types()),this.expect(this.tok.T_DOUBLE_ARROW)&&this.next();let u=this.read_expr(),f=e(o,s,u,c,h,!!i);return f.attrGroups=t,f},read_match_expression:function(){let i=this.node("match");this.expect(this.tok.T_MATCH)&&this.next(),this.version<800&&this.raiseError("Match statements are not allowed before PHP 8");let t=null,e=[];return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect("{")&&this.next(),e=this.read_match_arms(),this.expect("}")&&this.next(),i(t,e)},read_match_arms:function(){return this.read_list(()=>this.read_match_arm(),",",!0)},read_match_arm:function(){if(this.token!=="}")return this.node("matcharm")(this.read_match_arm_conds(),this.read_expr())},read_match_arm_conds:function(){let i=[];if(this.token===this.tok.T_DEFAULT)i=null,this.next();else for(i.push(this.read_expr());this.token===",";){if(this.next(),this.token===this.tok.T_DOUBLE_ARROW)return this.next(),i;i.push(this.read_expr())}return this.expect(this.tok.T_DOUBLE_ARROW)&&this.next(),i},read_attribute(){let i=this.text(),t=[];return this.next(),this.token==="("&&(t=this.read_argument_list()),this.node("attribute")(i,t)},read_attr_list(){let i=[];if(this.token===this.tok.T_ATTRIBUTE)do{let t=this.node("attrgroup")([]);for(this.next(),t.attrs.push(this.read_attribute());this.token===",";)this.next(),this.token!=="]"&&t.attrs.push(this.read_attribute());i.push(t),this.expect("]"),this.next()}while(this.token===this.tok.T_ATTRIBUTE);return i},read_new_expr:function(){let i=this.node("new");this.expect(this.tok.T_NEW)&&this.next();let t=[],e=this.read_attr_list();if(this.token===this.tok.T_CLASS){let o=this.node("class");this.next().token==="("&&(t=this.read_argument_list());let h=this.read_extends_from(),c=this.read_implements_list(),u=null;this.expect("{")&&(u=this.next().read_class_body(!0,!1));let f=o(null,h,c,u,[0,0,0]);return f.attrGroups=e,i(f,t)}let s=this.read_new_class_name();for(;this.token==="[";){let o=this.node("offsetlookup"),h=this.next().read_encaps_var_offset();this.expect("]")&&this.next(),s=o(s,h)}return this.token==="("&&(t=this.read_argument_list()),i(s,t)},read_new_class_name:function(){if(this.token===this.tok.T_NS_SEPARATOR||this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_NAMESPACE){let i=this.read_namespace_name(!0);return this.token===this.tok.T_DOUBLE_COLON&&(i=this.read_static_getter(i)),i}else{if(this.is("VARIABLE"))return this.read_variable(!0,!1);this.expect([this.tok.T_STRING,"VARIABLE"])}},handleDereferencable:function(i){for(;this.token!==this.EOF;)if(this.token===this.tok.T_OBJECT_OPERATOR||this.token===this.tok.T_DOUBLE_COLON)i=this.recursive_variable_chain_scan(i,!1,!1,!0);else if(this.token===this.tok.T_CURLY_OPEN||this.token==="[")i=this.read_dereferencable(i);else if(this.token==="(")i=this.node("call")(i,this.read_argument_list());else return i;return i}}});var ud=V((rL,ld)=>{"use strict";ld.exports={read_enum_declaration_statement:function(i){let t=this.node("enum");if(!this.expect(this.tok.T_ENUM))return null;this.next().expect(this.tok.T_STRING);let e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=this.read_enum_value_type(),h=this.read_implements_list();this.expect("{");let c=this.next().read_class_body(!1,!0),u=t(e,o,h,c);return i&&(u.attrGroups=i),u},read_enum_value_type:function(){return this.token===":"?this.next().read_namespace_name():null},read_enum_case:function(){this.expect(this.tok.T_CASE);let i=this.node("enumcase"),t=this.node("identifier"),e=this.next().text();this.next(),t=t(e);let s=this.token==="="?this.next().read_expr():null;return this.expect(";"),i(t,s)}}});var fd=V((oL,cd)=>{"use strict";cd.exports={is_reference:function(){return this.token==="&"?(this.next(),!0):!1},is_variadic:function(){return this.token===this.tok.T_ELLIPSIS?(this.next(),!0):!1},read_function:function(i,t,e,s){let o=this.read_function_declaration(i?1:t?2:0,t&&t[1]===1,e||[],s);return t&&t[2]==1?(o.parseFlags(t),this.expect(";")&&this.next()):(this.expect("{")&&(o.body=this.read_code_block(!1),o.loc&&o.body.loc&&(o.loc.end=o.body.loc.end)),!i&&t&&o.parseFlags(t)),o},read_function_declaration:function(i,t,e,s){let o="function";i===1?o="closure":i===2&&(o="method");let h=this.node(o);this.expect(this.tok.T_FUNCTION)&&this.next();let c=this.is_reference(),u=!1,f=[],k=null,x=!1;if(i!==1){let y=this.node("identifier");i===2?this.version>=700?this.token===this.tok.T_STRING||this.is("IDENTIFIER")?(u=this.text(),this.next()):this.version<704&&this.error("IDENTIFIER"):this.token===this.tok.T_STRING?(u=this.text(),this.next()):this.error("IDENTIFIER"):this.version>=700?this.token===this.tok.T_STRING?(u=this.text(),this.next()):this.version>=704?this.expect("(")||this.next():(this.error(this.tok.T_STRING),this.next()):(this.expect(this.tok.T_STRING)&&(u=this.text()),this.next()),u=y(u)}this.expect("(")&&this.next();let M=this.read_parameter_list(u.name==="__construct");this.expect(")")&&this.next(),i===1&&(f=this.read_lexical_vars()),this.token===":"&&(this.next().token==="?"&&(x=!0,this.next()),k=this.read_types());let C=y=>(y.attrGroups=e||[],s&&y.loc&&(y.loc.start=s,y.loc.source&&(y.loc.source=this.lexer._input.substr(y.loc.start.offset,y.loc.end.offset-y.loc.start.offset))),y);return C(i===1?h(M,c,f,k,x,t):h(u,M,c,k,x))},read_lexical_vars:function(){let i=[];return this.token===this.tok.T_USE&&(this.next(),this.expect("(")&&this.next(),i=this.read_lexical_var_list(),this.expect(")")&&this.next()),i},read_list_with_dangling_comma:function(i){let t=[];for(;this.token!=this.EOF;)if(t.push(i()),this.token==","){if(this.next(),this.version>=800&&this.token===")")return t}else{if(this.token==")")break;this.error([",",")"]);break}return t},read_lexical_var_list:function(){return this.read_list_with_dangling_comma(this.read_lexical_var.bind(this))},read_lexical_var:function(){if(this.token==="&")return this.read_byref(this.read_lexical_var.bind(this));let i=this.node("variable");this.expect(this.tok.T_VARIABLE);let t=this.text().substring(1);return this.next(),i(t,!1)},read_parameter_list:function(i){if(this.token!==")"){let t=!1;return this.read_list_with_dangling_comma(function(){let e=this.read_parameter(i);return e&&(t&&this.raiseError("Unexpected parameter after a variadic parameter"),e.variadic&&(t=!0)),e}.bind(this),",")}return[]},read_parameter:function(i){let t=this.node("parameter"),e=null,s=null,o=null,h=!1,c=!1,u=[];this.token===this.tok.T_ATTRIBUTE&&(u=this.read_attr_list());let f=this.read_promoted();this.version>=801&&this.token===this.tok.T_READ_ONLY&&(i?(this.next(),c=!0):this.raiseError("readonly properties can be used only on class constructor")),this.token==="?"&&(this.next(),h=!0),o=this.read_types(),h&&!o&&this.raiseError("Expecting a type definition combined with nullable operator");let k=this.is_reference(),x=this.is_variadic();if(this.expect(this.tok.T_VARIABLE)){e=this.node("identifier");let C=this.text().substring(1);this.next(),e=e(C)}this.token=="="&&(s=this.next().read_expr());let M=t(e,o,s,k,x,c,h,f);return u&&(M.attrGroups=u),M},read_types(){let i="unset",t="union",e="intersection",s=[],o=i,h=this.read_type();if(!h)return null;for(s.push(h);this.token==="|"||this.version>=801&&this.token==="&";){let c=this.peek();if(c===this.tok.T_ELLIPSIS||c===this.tok.T_VARIABLE)break;o===i?o=this.token==="|"?t:e:(o===t&&this.token!=="|"||o===e&&this.token!=="&")&&this.raiseError('Unexpect token "'+this.token+'", "|" and "&" can not be mixed'),this.next(),s.push(this.read_type())}return s.length===1?s[0]:o===e?this.node("intersectiontype")(s):this.node("uniontype")(s)},read_promoted(){return this.token===this.tok.T_PUBLIC?(this.next(),1):this.token===this.tok.T_PROTECTED?(this.next(),2):this.token===this.tok.T_PRIVATE?(this.next(),4):0},read_argument_list:function(){let i=[];return this.expect("(")&&this.next(),this.version>=801&&this.token===this.tok.T_ELLIPSIS&&this.peek()===")"?(i.push(this.node("variadicplaceholder")()),this.next()):this.token!==")"&&(i=this.read_non_empty_argument_list()),this.expect(")")&&this.next(),i},read_non_empty_argument_list:function(){let i=!1;return this.read_function_list(function(){let t=this.read_argument();if(t){let e=t.kind==="variadic";i&&!e&&this.raiseError("Unexpected non-variadic argument after a variadic argument"),e&&(i=!0)}return t}.bind(this),",")},read_argument:function(){return this.token===this.tok.T_ELLIPSIS?this.node("variadic")(this.next().read_expr()):(this.token===this.tok.T_STRING||Object.values(this.lexer.keywords).includes(this.token))&&this.peek()===":"?(this.version<800&&this.raiseError("PHP 8+ is required to use named arguments"),this.node("namedargument")(this.text(),this.next().next().read_expr())):this.read_expr()},read_type:function(){let i=this.node();if(this.token===this.tok.T_ARRAY||this.token===this.tok.T_CALLABLE){let t=this.text();return this.next(),i("typereference",t.toLowerCase(),t)}else if(this.token===this.tok.T_NAME_RELATIVE||this.token===this.tok.T_NAME_QUALIFIED||this.token===this.tok.T_NAME_FULLY_QUALIFIED||this.token===this.tok.T_STRING||this.token===this.tok.T_STATIC){let t=this.text(),e=[this.token,this.lexer.getState()];return this.next(),this.token!==this.tok.T_NS_SEPARATOR&&this.ast.typereference.types.indexOf(t.toLowerCase())>-1?i("typereference",t.toLowerCase(),t):(this.lexer.tokens.push(e),this.next(),i.destroy(),this.read_namespace_name())}return i.destroy(),null}}});var pd=V((aL,dd)=>{"use strict";dd.exports={read_if:function(){let i=this.node("if"),t=this.next().read_if_expr(),e=null,s=null,o=!1;if(this.token===":"){o=!0,this.next(),e=this.node("block");let h=[];for(;this.token!==this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){s=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){s=this.read_else_short();break}h.push(this.read_inner_statement())}e=e(null,h),this.expect(this.tok.T_ENDIF)&&this.next(),this.expectEndOfStatement()}else e=this.read_statement(),this.token===this.tok.T_ELSEIF?s=this.read_if():this.token===this.tok.T_ELSE&&(s=this.next().read_statement());return i(t,e,s,o)},read_if_expr:function(){this.expect("(")&&this.next();let i=this.read_expr();return this.expect(")")&&this.next(),i},read_elseif_short:function(){let i=null,t=this.node("if"),e=this.next().read_if_expr();this.expect(":")&&this.next();let s=this.node("block"),o=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;){if(this.token===this.tok.T_ELSEIF){i=this.read_elseif_short();break}else if(this.token===this.tok.T_ELSE){i=this.read_else_short();break}o.push(this.read_inner_statement())}return t(e,s(null,o),i,!0)},read_else_short:function(){this.next().expect(":")&&this.next();let i=this.node("block"),t=[];for(;this.token!=this.EOF&&this.token!==this.tok.T_ENDIF;)t.push(this.read_inner_statement());return i(null,t)}}});var md=V((hL,_d)=>{"use strict";_d.exports={read_while:function(){let i=this.node("while");this.expect(this.tok.T_WHILE)&&this.next();let t=null,e=null,s=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.token===":"?(s=!0,e=this.read_short_form(this.tok.T_ENDWHILE)):e=this.read_statement(),i(t,e,s)},read_do:function(){let i=this.node("do");this.expect(this.tok.T_DO)&&this.next();let t=null,e=null;return e=this.read_statement(),this.expect(this.tok.T_WHILE)&&(this.next().expect("(")&&this.next(),t=this.read_expr(),this.expect(")")&&this.next(),this.expect(";")&&this.next()),i(t,e)},read_for:function(){let i=this.node("for");this.expect(this.tok.T_FOR)&&this.next();let t=[],e=[],s=[],o=null,h=!1;return this.expect("(")&&this.next(),this.token!==";"?(t=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==";"?(e=this.read_list(this.read_expr,","),this.expect(";")&&this.next()):this.next(),this.token!==")"?(s=this.read_list(this.read_expr,","),this.expect(")")&&this.next()):this.next(),this.token===":"?(h=!0,o=this.read_short_form(this.tok.T_ENDFOR)):o=this.read_statement(),i(t,e,s,o,h)},read_foreach:function(){let i=this.node("foreach");this.expect(this.tok.T_FOREACH)&&this.next();let t=null,e=null,s=null,o=null,h=!1;return this.expect("(")&&this.next(),t=this.read_expr(),this.expect(this.tok.T_AS)&&(this.next(),s=this.read_foreach_variable(),this.token===this.tok.T_DOUBLE_ARROW&&(e=s,s=this.next().read_foreach_variable())),e&&e.kind==="list"&&this.raiseError("Fatal Error : Cannot use list as key element"),this.expect(")")&&this.next(),this.token===":"?(h=!0,o=this.read_short_form(this.tok.T_ENDFOREACH)):o=this.read_statement(),i(t,e,s,o,h)},read_foreach_variable:function(){if(this.token===this.tok.T_LIST||this.token==="["){let i=this.token==="[",t=this.node("list");this.next(),!i&&this.expect("(")&&this.next();let e=this.read_array_pair_list(i);return this.expect(i?"]":")")&&this.next(),t(e,i)}else return this.read_variable(!1,!1)}}});var gd=V((lL,Td)=>{"use strict";Td.exports={read_start:function(){return this.token==this.tok.T_NAMESPACE?this.read_namespace():this.read_top_statement()}}});var xd=V((uL,kd)=>{"use strict";kd.exports={read_namespace:function(){let i=this.node("namespace"),t;this.expect(this.tok.T_NAMESPACE)&&this.next();let e;return this.token==="{"?e={name:[""]}:e=this.read_namespace_name(),this.currentNamespace=e,this.token===";"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect(this.EOF),i(e.name,t,!1)):this.token==="{"?(this.currentNamespace=e,t=this.next().read_top_statements(),this.expect("}")&&this.next(),t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),i(e.name,t,!0)):(this.error(["{",";"]),this.currentNamespace=e,t=this.read_top_statements(),this.expect(this.EOF),i(e,t,!1))},read_namespace_name:function(i){let t=this.node(),e,s=this.text();switch(this.token){case this.tok.T_NAME_RELATIVE:e=this.ast.name.RELATIVE_NAME,s=s.replace(/^namespace\\/,"");break;case this.tok.T_NAME_QUALIFIED:e=this.ast.name.QUALIFIED_NAME;break;case this.tok.T_NAME_FULLY_QUALIFIED:e=this.ast.name.FULL_QUALIFIED_NAME;break;default:if(e=this.ast.name.UNQUALIFIED_NAME,!this.expect(this.tok.T_STRING))return t("name","",this.ast.name.FULL_QUALIFIED_NAME)}if(this.next(),i||this.token!=="("){if(s.toLowerCase()==="parent")return t("parentreference",s);if(s.toLowerCase()==="self")return t("selfreference",s)}return t("name",s,e)},read_use_statement:function(){let i=this.node("usegroup"),t=[],e=null;this.expect(this.tok.T_USE)&&this.next();let s=this.read_use_type();return t.push(this.read_use_declaration(!1)),this.token===","?t=t.concat(this.next().read_use_declarations(!1)):this.token==="{"&&(e=t[0].name,t=this.next().read_use_declarations(s===null),this.expect("}")&&this.next()),i=i(e,s,t),this.expect(";")&&this.next(),i},read_class_name_reference:function(){return this.read_variable(!0,!1)},read_use_declaration:function(i){let t=this.node("useitem"),e=null;i&&(e=this.read_use_type());let s=this.read_namespace_name(),o=this.read_use_alias();return t(s.name,o,e)},read_use_declarations:function(i){let t=[this.read_use_declaration(i)];for(;this.token===",";){if(this.next(),i){if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_FUNCTION&&this.token!==this.tok.T_CONST&&this.token!==this.tok.T_STRING)break}else if(this.token!==this.tok.T_NAME_RELATIVE&&this.token!==this.tok.T_NAME_QUALIFIED&&this.token!==this.tok.T_NAME_FULLY_QUALIFIED&&this.token!==this.tok.T_STRING&&this.token!==this.tok.T_NS_SEPARATOR)break;t.push(this.read_use_declaration(i))}return t},read_use_alias:function(){let i=null;if(this.token===this.tok.T_AS&&this.next().expect(this.tok.T_STRING)){let t=this.node("identifier"),e=this.text();this.next(),i=t(e)}return i},read_use_type:function(){return this.token===this.tok.T_FUNCTION?(this.next(),this.ast.useitem.TYPE_FUNCTION):this.token===this.tok.T_CONST?(this.next(),this.ast.useitem.TYPE_CONST):null}}});var yd=V((cL,vd)=>{"use strict";var Ed={"\\":"\\",$:"$",n:`
`,r:"\r",t:"	",f:String.fromCharCode(12),v:String.fromCharCode(11),e:String.fromCharCode(27)};vd.exports={resolve_special_chars:function(i,t){return t?i.replace(/\\"/,'"').replace(/\\([\\$nrtfve]|[xX][0-9a-fA-F]{1,2}|[0-7]{1,3}|u{([0-9a-fA-F]+)})/g,(e,s,o)=>Ed[s]?Ed[s]:s[0]==="x"||s[0]==="X"?String.fromCodePoint(parseInt(s.substr(1),16)):s[0]==="u"?String.fromCodePoint(parseInt(o,16)):String.fromCodePoint(parseInt(s,8))):i.replace(/\\\\/g,"\\").replace(/\\'/g,"'")},remove_heredoc_leading_whitespace_chars:function(i,t,e,s){if(t===0)return i;this.check_heredoc_indentation_level(i,t,e,s);let o=e?" ":"	",h=new RegExp(`\\n${o}{${t}}`,"g"),c=new RegExp(`^${o}{${t}}`);return s&&(i=i.replace(c,"")),i.replace(h,`
`)},check_heredoc_indentation_level:function(i,t,e,s){let o=i.length,h=0,c=0,u=!0,f=e?" ":"	",k=!1;if(!s){if(h=i.indexOf(`
`),h===-1)return;h++}for(;h<o;)u?i[h]===f?c++:k=!0:u=!1,i[h]!==`
`&&k&&c<t?this.raiseError(`Invalid body indentation level (expecting an indentation at least ${t})`):k=!1,i[h]===`
`&&(u=!0,c=0),h++},read_dereferencable_scalar:function(){let i=null;switch(this.token){case this.tok.T_CONSTANT_ENCAPSED_STRING:{let t=this.node("string"),e=this.text(),s=0;(e[0]==="b"||e[0]==="B")&&(s=1);let o=e[s]==='"';this.next();let h=this.resolve_special_chars(e.substring(s+1,e.length-1),o);t=t(o,h,s===1,e),this.token===this.tok.T_DOUBLE_COLON?i=this.read_static_getter(t):i=t}break;case this.tok.T_ARRAY:i=this.read_array();break;case"[":i=this.read_array();break}return i},read_scalar:function(){if(this.is("T_MAGIC_CONST"))return this.get_magic_constant();{let i,t;switch(this.token){case this.tok.T_LNUMBER:case this.tok.T_DNUMBER:{let e=this.node("number");return i=this.text(),this.next(),e(i,null)}case this.tok.T_START_HEREDOC:if(this.lexer.curCondition==="ST_NOWDOC"){let e=this.lexer.yylloc.first_offset;t=this.node("nowdoc"),i=this.next().text(),this.lexer.heredoc_label.indentation>0&&(i=i.substring(0,i.length-this.lexer.heredoc_label.indentation));let s=i[i.length-1];s===`
`?i[i.length-2]==="\r"?i=i.substring(0,i.length-2):i=i.substring(0,i.length-1):s==="\r"&&(i=i.substring(0,i.length-1)),this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE)&&this.next(),this.expect(this.tok.T_END_HEREDOC)&&this.next();let o=this.lexer._input.substring(e,this.lexer.yylloc.first_offset);return t=t(this.remove_heredoc_leading_whitespace_chars(i,this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node),o,this.lexer.heredoc_label.label),this.lexer.heredoc_label.finished=!0,t}else return this.read_encapsed_string(this.tok.T_END_HEREDOC);case'"':return this.read_encapsed_string('"');case'b"':case'B"':return this.read_encapsed_string('"',!0);case this.tok.T_CONSTANT_ENCAPSED_STRING:case this.tok.T_ARRAY:case"[":return this.read_dereferencable_scalar();default:{let e=this.error("SCALAR");return this.next(),e}}}},read_dereferencable:function(i){let t,e,s=this.node("offsetlookup");return this.token==="["?(e=this.next().read_expr(),this.expect("]")&&this.next(),t=s(i,e)):this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES&&(e=this.read_encapsed_string_item(!1),t=s(i,e)),t},read_encapsed_string_item:function(i){let t=this.node("encapsedpart"),e=null,s=!1,o=this.node(),h,c,u;if(this.token===this.tok.T_ENCAPSED_AND_WHITESPACE){let f=this.text();this.next(),o=o("string",!1,this.version>=703&&!this.lexer.heredoc_label.finished?this.remove_heredoc_leading_whitespace_chars(this.resolve_special_chars(f,i),this.lexer.heredoc_label.indentation,this.lexer.heredoc_label.indentation_uses_spaces,this.lexer.heredoc_label.first_encaps_node):f,!1,f)}else if(this.token===this.tok.T_DOLLAR_OPEN_CURLY_BRACES){if(e="simple",s=!0,u=null,this.next().token===this.tok.T_STRING_VARNAME){u=this.node("variable");let f=this.text();this.next(),o.destroy(),this.token==="["?(u=u(f,!1),c=this.node("offsetlookup"),h=this.next().read_expr(),this.expect("]")&&this.next(),o=c(u,h)):o=u(f,!1)}else o=o("variable",this.read_expr(),!1);this.expect("}")&&this.next()}else if(this.token===this.tok.T_CURLY_OPEN)e="complex",o.destroy(),o=this.next().read_variable(!1,!1),this.expect("}")&&this.next();else if(this.token===this.tok.T_VARIABLE){if(e="simple",o.destroy(),o=this.read_simple_variable(),this.token==="["&&(c=this.node("offsetlookup"),h=this.next().read_encaps_var_offset(),this.expect("]")&&this.next(),o=c(o,h)),this.token===this.tok.T_OBJECT_OPERATOR){c=this.node("propertylookup"),this.next().expect(this.tok.T_STRING);let f=this.node("identifier");u=this.text(),this.next(),o=c(o,f(u))}}else{this.expect(this.tok.T_ENCAPSED_AND_WHITESPACE);let f=this.text();this.next(),o.destroy(),o=o("string",!1,f,!1,f)}return this.lexer.heredoc_label.first_encaps_node=!1,t(o,e,s)},read_encapsed_string:function(i,t=!1){let e=this.lexer.yylloc.first_offset,s=this.node("encapsed");this.next();let o=this.lexer.yylloc.prev_offset-(t?1:0),h=[],c=null;for(i==="`"?c=this.ast.encapsed.TYPE_SHELL:i==='"'?c=this.ast.encapsed.TYPE_STRING:c=this.ast.encapsed.TYPE_HEREDOC;this.token!==i&&this.token!==this.EOF;)h.push(this.read_encapsed_string_item(!0));if(h.length>0&&h[h.length-1].kind==="encapsedpart"&&h[h.length-1].expression.kind==="string"){let f=h[h.length-1].expression,k=f.value[f.value.length-1];k===`
`?f.value[f.value.length-2]==="\r"?f.value=f.value.substring(0,f.value.length-2):f.value=f.value.substring(0,f.value.length-1):k==="\r"&&(f.value=f.value.substring(0,f.value.length-1))}this.expect(i)&&this.next();let u=this.lexer._input.substring(c==="heredoc"?e:o-1,this.lexer.yylloc.first_offset);return s=s(h,u,c),i===this.tok.T_END_HEREDOC&&(s.label=this.lexer.heredoc_label.label,this.lexer.heredoc_label.finished=!0),s},get_magic_constant:function(){let i=this.node("magic"),t=this.text();return this.next(),i(t.toUpperCase(),t)}}});var Nd=V((fL,Cd)=>{"use strict";Cd.exports={read_top_statements:function(){let i=[];for(;this.token!==this.EOF&&this.token!=="}";){let t=this.read_top_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_top_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:return this.read_function(!1,!1,i);case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement(i);case this.tok.T_INTERFACE:return this.read_interface_declaration_statement(i);case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement(i);case this.tok.T_USE:return this.read_use_statement();case this.tok.T_CONST:{let t=this.node("constantstatement"),e=this.next().read_const_list();return this.expectEndOfStatement(),t(null,e)}case this.tok.T_NAMESPACE:return this.read_namespace();case this.tok.T_HALT_COMPILER:{let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),this.expect(";"),this.lexer.done=!0,t(this.lexer._input.substring(this.lexer.offset))}default:return this.read_statement()}},read_inner_statements:function(){let i=[];for(;this.token!=this.EOF&&this.token!=="}";){let t=this.read_inner_statement();t&&(Array.isArray(t)?i=i.concat(t):i.push(t))}return i},read_const_list:function(){return this.read_list(function(){this.expect(this.tok.T_STRING);let i=this.node("constant"),t=this.node("identifier"),e=this.text();return this.next(),t=t(e),this.expect("=")?i(t,this.next().read_expr()):i(t,null)},",",!1)},read_declare_list:function(){let i=[];for(;this.token!=this.EOF&&this.token!==")";){this.expect(this.tok.T_STRING);let t=this.node("declaredirective"),e=this.node("identifier"),s=this.text();this.next(),e=e(s);let o=null;if(this.expect("=")&&(o=this.next().read_expr()),i.push(t(e,o)),this.token!==",")break;this.next()}return i},read_inner_statement:function(){let i=[];switch(this.token===this.tok.T_ATTRIBUTE&&(i=this.read_attr_list()),this.token){case this.tok.T_FUNCTION:{let t=this.read_function(!1,!1);return t.attrGroups=i,t}case this.tok.T_ABSTRACT:case this.tok.T_FINAL:case this.tok.T_CLASS:return this.read_class_declaration_statement();case this.tok.T_INTERFACE:return this.read_interface_declaration_statement();case this.tok.T_TRAIT:return this.read_trait_declaration_statement();case this.tok.T_ENUM:return this.read_enum_declaration_statement();case this.tok.T_HALT_COMPILER:{this.raiseError("__HALT_COMPILER() can only be used from the outermost scope");let t=this.node("halt");return this.next().expect("(")&&this.next(),this.expect(")")&&this.next(),t=t(this.lexer._input.substring(this.lexer.offset)),this.expect(";")&&this.next(),t}default:return this.read_statement()}},read_statement:function(){switch(this.token){case"{":return this.read_code_block(!1);case this.tok.T_IF:return this.read_if();case this.tok.T_SWITCH:return this.read_switch();case this.tok.T_FOR:return this.read_for();case this.tok.T_FOREACH:return this.read_foreach();case this.tok.T_WHILE:return this.read_while();case this.tok.T_DO:return this.read_do();case this.tok.T_COMMENT:return this.read_comment();case this.tok.T_DOC_COMMENT:return this.read_doc_comment();case this.tok.T_RETURN:{let i=this.node("return");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_BREAK:case this.tok.T_CONTINUE:{let i=this.node(this.token===this.tok.T_CONTINUE?"continue":"break");this.next();let t=this.read_optional_expr(";");return this.expectEndOfStatement(),i(t)}case this.tok.T_GLOBAL:{let i=this.node("global"),t=this.next().read_list(this.read_simple_variable,",");return this.expectEndOfStatement(),i(t)}case this.tok.T_STATIC:{let i=[this.token,this.lexer.getState()],t=this.node();if(this.next().token===this.tok.T_DOUBLE_COLON){this.lexer.tokens.push(i);let s=this.next().read_expr();return this.expectEndOfStatement(s),t("expressionstatement",s)}if(this.token===this.tok.T_FUNCTION)return this.read_function(!0,[0,1,0]);let e=this.read_variable_declarations();return this.expectEndOfStatement(),t("static",e)}case this.tok.T_ECHO:{let i=this.node("echo"),t=this.text(),e=t==="<?="||t==="<%=",s=this.next().read_function_list(this.read_expr,",");return this.expectEndOfStatement(),i(s,e)}case this.tok.T_INLINE_HTML:{let i=this.text(),t=this.lexer.yylloc.first_offset>0?this.lexer._input[this.lexer.yylloc.first_offset-1]:null,e=t==="\r"||t===`
`;e&&t===`
`&&this.lexer.yylloc.first_offset>1&&this.lexer._input[this.lexer.yylloc.first_offset-2]==="\r"&&(t=`\r
`);let s=this.node("inline");return this.next(),s(i,e?t+i:i)}case this.tok.T_UNSET:{let i=this.node("unset");this.next().expect("(")&&this.next();let t=this.read_function_list(this.read_variable,",");return this.expect(")")&&this.next(),this.expect(";")&&this.next(),i(t)}case this.tok.T_DECLARE:{let i=this.node("declare"),t=[],e;this.next().expect("(")&&this.next();let s=this.read_declare_list();if(this.expect(")")&&this.next(),this.token===":"){for(this.next();this.token!=this.EOF&&this.token!==this.tok.T_ENDDECLARE;)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect(this.tok.T_ENDDECLARE)&&this.next(),this.expectEndOfStatement(),e=this.ast.declare.MODE_SHORT}else if(this.token==="{"){for(this.next();this.token!=this.EOF&&this.token!=="}";)t.push(this.read_top_statement());t.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&t.push(this.node("noop")()),this.expect("}")&&this.next(),e=this.ast.declare.MODE_BLOCK}else this.expect(";")&&this.next(),e=this.ast.declare.MODE_NONE;return i(s,t,e)}case this.tok.T_TRY:return this.read_try();case this.tok.T_THROW:{let i=this.node("throw"),t=this.next().read_expr();return this.expectEndOfStatement(),i(t)}case";":return this.next(),null;case this.tok.T_STRING:{let i=this.node(),t=[this.token,this.lexer.getState()],e=this.text(),s=this.node("identifier");if(this.next().token===":")return s=s(e),this.next(),i("label",s);s.destroy(),i.destroy(),this.lexer.tokens.push(t);let o=this.node("expressionstatement"),h=this.next().read_expr();return this.expectEndOfStatement(h),o(h)}case this.tok.T_GOTO:{let i=this.node("goto"),t=null;if(this.next().expect(this.tok.T_STRING)){t=this.node("identifier");let e=this.text();this.next(),t=t(e),this.expectEndOfStatement()}return i(t)}default:{let i=this.node("expressionstatement"),t=this.read_expr();return this.expectEndOfStatement(t),i(t)}}},read_code_block:function(i){let t=this.node("block");this.expect("{")&&this.next();let e=i?this.read_top_statements():this.read_inner_statements();return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect("}")&&this.next(),t(null,e)}}});var Ad=V((dL,bd)=>{"use strict";bd.exports={read_switch:function(){let i=this.node("switch");this.expect(this.tok.T_SWITCH)&&this.next(),this.expect("(")&&this.next();let t=this.read_expr();this.expect(")")&&this.next();let e=this.token===":",s=this.read_switch_case_list();return i(t,s,e)},read_switch_case_list:function(){let i=null,t=this.node("block"),e=[];for(this.token==="{"?i="}":this.token===":"?i=this.tok.T_ENDSWITCH:this.expect(["{",":"]),this.next(),this.token===";"&&this.next();this.token!==this.EOF&&this.token!==i;)e.push(this.read_case_list(i));return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),i===this.tok.T_ENDSWITCH&&this.expectEndOfStatement(),t(null,e)},read_case_list:function(i){let t=this.node("case"),e=null;this.token===this.tok.T_CASE?e=this.next().read_expr():this.token===this.tok.T_DEFAULT?this.next():this.expect([this.tok.T_CASE,this.tok.T_DEFAULT]),this.expect([":",";"])&&this.next();let s=this.node("block"),o=[];for(;this.token!==this.EOF&&this.token!==i&&this.token!==this.tok.T_CASE&&this.token!==this.tok.T_DEFAULT;)o.push(this.read_inner_statement());return t(e,s(null,o))}}});var Sd=V((pL,Id)=>{"use strict";Id.exports={read_try:function(){this.expect(this.tok.T_TRY);let i=this.node("try"),t=null,e=[],s=this.next().read_statement();for(;this.token===this.tok.T_CATCH;){let o=this.node("catch");this.next().expect("(")&&this.next();let h=this.read_list(this.read_namespace_name,"|",!1),c=null;(this.version<800||this.token===this.tok.T_VARIABLE)&&(c=this.read_variable(!0,!1)),this.expect(")"),e.push(o(this.next().read_statement(),h,c))}return this.token===this.tok.T_FINALLY&&(t=this.next().read_statement()),i(s,e,t)}}});var Ld=V((_L,Od)=>{"use strict";Od.exports={read_short_form:function(i){let t=this.node("block"),e=[];for(this.expect(":")&&this.next();this.token!=this.EOF&&this.token!==i;)e.push(this.read_inner_statement());return e.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&e.push(this.node("noop")()),this.expect(i)&&this.next(),this.expectEndOfStatement(),t(null,e)},read_function_list:function(i,t){let e=[];do{if(this.token==t&&this.version>=703&&e.length>0){e.push(this.node("noop")());break}if(e.push(i.apply(this,[])),this.token!=t||this.next().token==")"&&this.version>=703)break}while(this.token!=this.EOF);return e},read_list:function(i,t,e){let s=[];if(this.token==t&&(e&&s.push(typeof i=="function"?this.node("noop")():null),this.next()),typeof i=="function")do{let o=i.apply(this,[]);if(o&&s.push(o),this.token!=t)break}while(this.next().token!=this.EOF);else{if(this.expect(i))s.push(this.text());else return[];for(;this.next().token!=this.EOF&&!(this.token!=t||this.next().token!=i);)s.push(this.text())}return s},read_name_list:function(){return this.read_list(this.read_namespace_name,",",!1)},read_byref:function(i){let t=this.node("byref");this.next(),t=t(null);let e=i();return e&&(this.ast.swapLocations(e,t,e,this),e.byref=!0),e},read_variable_declarations:function(){return this.read_list(function(){let i=this.node("staticvariable"),t=this.node("variable");if(this.expect(this.tok.T_VARIABLE)){let e=this.text().substring(1);this.next(),t=t(e,!1)}else t=t("#ERR",!1);return this.token==="="?i(t,this.next().read_expr()):t},",")},read_extends_from:function(){return this.token===this.tok.T_EXTENDS?this.next().read_namespace_name():null},read_interface_extends_list:function(){return this.token===this.tok.T_EXTENDS?this.next().read_name_list():null},read_implements_list:function(){return this.token===this.tok.T_IMPLEMENTS?this.next().read_name_list():null}}});var Dd=V((mL,Pd)=>{"use strict";Pd.exports={read_variable:function(i,t){let e;if(this.token==="&")return this.read_byref(this.read_variable.bind(this,i,t));if(this.is([this.tok.T_VARIABLE,"$"]))e=this.read_reference_variable(t);else if(this.is([this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE])){e=this.node();let s=this.read_namespace_name();if(this.token!=this.tok.T_DOUBLE_COLON&&this.token!="("&&["parentreference","selfreference"].indexOf(s.kind)===-1){let o=s.name.toLowerCase();o==="true"?e=s.destroy(e("boolean",!0,s.name)):o==="false"?e=s.destroy(e("boolean",!1,s.name)):o==="null"?e=s.destroy(e("nullkeyword",s.name)):(e.destroy(s),e=s)}else e.destroy(s),e=s}else if(this.token===this.tok.T_STATIC){e=this.node("staticreference");let s=this.text();this.next(),e=e(s)}else this.expect("VARIABLE");return this.token===this.tok.T_DOUBLE_COLON&&(e=this.read_static_getter(e,t)),this.recursive_variable_chain_scan(e,i,t)},read_static_getter:function(i,t){let e=this.node("staticlookup"),s,o;return this.next().is([this.tok.T_VARIABLE,"$"])?s=this.read_reference_variable(t):this.token===this.tok.T_STRING||this.token===this.tok.T_CLASS||this.version>=700&&this.is("IDENTIFIER")?(s=this.node("identifier"),o=this.text(),this.next(),s=s(o)):this.token==="{"?(s=this.node("literal"),o=this.next().read_expr(),this.expect("}")&&this.next(),s=s("literal",o,null),this.expect("(")):(this.error([this.tok.T_VARIABLE,this.tok.T_STRING]),s=this.node("identifier"),o=this.text(),this.next(),s=s(o)),e(i,s)},read_what:function(i=!1){let t=null,e=null;switch(this.next().token){case this.tok.T_STRING:t=this.node("identifier"),e=this.text(),this.next(),t=t(e),i&&this.token===this.tok.T_OBJECT_OPERATOR&&this.error();break;case this.tok.T_VARIABLE:t=this.node("variable"),e=this.text().substring(1),this.next(),t=t(e,!1);break;case"$":t=this.node(),this.next().expect(["$","{",this.tok.T_VARIABLE]),this.token==="{"?(e=this.next().read_expr(),this.expect("}")&&this.next(),t=t("variable",e,!0)):(e=this.read_expr(),t=t("variable",e,!1));break;case"{":t=this.node("encapsedpart"),e=this.next().read_expr(),this.expect("}")&&this.next(),t=t(e,"complex",!1);break;default:this.error([this.tok.T_STRING,this.tok.T_VARIABLE,"$","{"]),t=this.node("identifier"),e=this.text(),this.next(),t=t(e);break}return t},recursive_variable_chain_scan:function(i,t,e){let s,o;t:for(;this.token!=this.EOF;)switch(this.token){case"(":if(t)return i;i=this.node("call")(i,this.read_argument_list());break;case"[":case"{":{let c=this.token==="[";s=this.node("offsetlookup"),this.next(),o=!1,e?(o=this.read_encaps_var_offset(),this.expect(c?"]":"}")&&this.next()):(c?this.token!=="]":this.token!=="}")?(o=this.read_expr(),this.expect(c?"]":"}")&&this.next()):this.next(),i=s(i,o);break}case this.tok.T_DOUBLE_COLON:i.kind==="staticlookup"&&i.offset.kind==="identifier"&&this.error(),s=this.node("staticlookup"),i=s(i,this.read_what(!0));break;case this.tok.T_OBJECT_OPERATOR:{s=this.node("propertylookup"),i=s(i,this.read_what());break}case this.tok.T_NULLSAFE_OBJECT_OPERATOR:{s=this.node("nullsafepropertylookup"),i=s(i,this.read_what());break}default:break t}return i},read_encaps_var_offset:function(){let i=this.node();if(this.token===this.tok.T_STRING){let t=this.text();this.next(),i=i("identifier",t)}else if(this.token===this.tok.T_NUM_STRING){let t=this.text();this.next(),i=i("number",t,null)}else if(this.token==="-"){this.next();let t=-1*this.text();this.expect(this.tok.T_NUM_STRING)&&this.next(),i=i("number",t,null)}else if(this.token===this.tok.T_VARIABLE){let t=this.text().substring(1);this.next(),i=i("variable",t,!1)}else{this.expect([this.tok.T_STRING,this.tok.T_NUM_STRING,"-",this.tok.T_VARIABLE]);let t=this.text();this.next(),i=i("identifier",t)}return i},read_reference_variable:function(i){let t=this.read_simple_variable(),e;for(;this.token!=this.EOF;){let s=this.node();if(this.token=="{"&&!i)e=this.next().read_expr(),this.expect("}")&&this.next(),t=s("offsetlookup",t,e);else{s.destroy();break}}return t},read_simple_variable:function(){let i=this.node("variable"),t;if(this.expect([this.tok.T_VARIABLE,"$"])&&this.token===this.tok.T_VARIABLE)t=this.text().substring(1),this.next(),i=i(t,!1);else switch(this.token==="$"&&this.next(),this.token){case"{":{let e=this.next().read_expr();this.expect("}")&&this.next(),i=i(e,!0);break}case"$":i=i(this.read_simple_variable(),!1);break;case this.tok.T_VARIABLE:{t=this.text().substring(1);let e=this.node("variable");this.next(),i=i(e(t,!1),!1);break}default:this.error(["{","$",this.tok.T_VARIABLE]),t=this.text(),this.next(),i=i(t,!1)}return i}}});var wd=V((TL,Rd)=>{"use strict";var CA=dh();function _h(i){return i!="."&&i!=","&&!isNaN(parseFloat(i))&&isFinite(i)}var li=function(i,t){this.lexer=i,this.ast=t,this.tok=i.tok,this.EOF=i.EOF,this.token=null,this.prev=null,this.debug=!1,this.version=801,this.extractDoc=!1,this.extractTokens=!1,this.suppressErrors=!1;let e=function(s){return[s,null]};this.entries={IDENTIFIER:new Map([this.tok.T_ABSTRACT,this.tok.T_ARRAY,this.tok.T_AS,this.tok.T_BREAK,this.tok.T_CALLABLE,this.tok.T_CASE,this.tok.T_CATCH,this.tok.T_CLASS,this.tok.T_CLASS_C,this.tok.T_CLONE,this.tok.T_CONST,this.tok.T_CONTINUE,this.tok.T_DECLARE,this.tok.T_DEFAULT,this.tok.T_DIR,this.tok.T_DO,this.tok.T_ECHO,this.tok.T_ELSE,this.tok.T_ELSEIF,this.tok.T_EMPTY,this.tok.T_ENDDECLARE,this.tok.T_ENDFOR,this.tok.T_ENDFOREACH,this.tok.T_ENDIF,this.tok.T_ENDSWITCH,this.tok.T_ENDWHILE,this.tok.T_ENUM,this.tok.T_EVAL,this.tok.T_EXIT,this.tok.T_EXTENDS,this.tok.T_FILE,this.tok.T_FINAL,this.tok.T_FINALLY,this.tok.T_FN,this.tok.T_FOR,this.tok.T_FOREACH,this.tok.T_FUNC_C,this.tok.T_FUNCTION,this.tok.T_GLOBAL,this.tok.T_GOTO,this.tok.T_IF,this.tok.T_IMPLEMENTS,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_INSTANCEOF,this.tok.T_INSTEADOF,this.tok.T_INTERFACE,this.tok.T_ISSET,this.tok.T_LINE,this.tok.T_LIST,this.tok.T_LOGICAL_AND,this.tok.T_LOGICAL_OR,this.tok.T_LOGICAL_XOR,this.tok.T_MATCH,this.tok.T_METHOD_C,this.tok.T_NAMESPACE,this.tok.T_NEW,this.tok.T_NS_C,this.tok.T_PRINT,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_PUBLIC,this.tok.T_READ_ONLY,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_RETURN,this.tok.T_STATIC,this.tok.T_SWITCH,this.tok.T_THROW,this.tok.T_TRAIT,this.tok.T_TRY,this.tok.T_UNSET,this.tok.T_USE,this.tok.T_VAR,this.tok.T_WHILE,this.tok.T_YIELD].map(e)),VARIABLE:new Map([this.tok.T_VARIABLE,"$","&",this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_NAMESPACE,this.tok.T_STATIC].map(e)),SCALAR:new Map([this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e)),T_MAGIC_CONST:new Map([this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C].map(e)),T_MEMBER_FLAGS:new Map([this.tok.T_PUBLIC,this.tok.T_PRIVATE,this.tok.T_PROTECTED,this.tok.T_STATIC,this.tok.T_ABSTRACT,this.tok.T_FINAL].map(e)),EOS:new Map([";",this.EOF,this.tok.T_INLINE_HTML].map(e)),EXPR:new Map(["@","-","+","!","~","(","`",this.tok.T_LIST,this.tok.T_CLONE,this.tok.T_INC,this.tok.T_DEC,this.tok.T_NEW,this.tok.T_ISSET,this.tok.T_EMPTY,this.tok.T_MATCH,this.tok.T_INCLUDE,this.tok.T_INCLUDE_ONCE,this.tok.T_REQUIRE,this.tok.T_REQUIRE_ONCE,this.tok.T_EVAL,this.tok.T_INT_CAST,this.tok.T_DOUBLE_CAST,this.tok.T_STRING_CAST,this.tok.T_ARRAY_CAST,this.tok.T_OBJECT_CAST,this.tok.T_BOOL_CAST,this.tok.T_UNSET_CAST,this.tok.T_EXIT,this.tok.T_PRINT,this.tok.T_YIELD,this.tok.T_STATIC,this.tok.T_FUNCTION,this.tok.T_FN,this.tok.T_VARIABLE,"$",this.tok.T_NS_SEPARATOR,this.tok.T_STRING,this.tok.T_NAME_RELATIVE,this.tok.T_NAME_QUALIFIED,this.tok.T_NAME_FULLY_QUALIFIED,this.tok.T_STRING,this.tok.T_CONSTANT_ENCAPSED_STRING,this.tok.T_START_HEREDOC,this.tok.T_LNUMBER,this.tok.T_DNUMBER,this.tok.T_ARRAY,"[",this.tok.T_CLASS_C,this.tok.T_TRAIT_C,this.tok.T_FUNC_C,this.tok.T_METHOD_C,this.tok.T_LINE,this.tok.T_FILE,this.tok.T_DIR,this.tok.T_NS_C,'"','b"','B"',"-",this.tok.T_NS_SEPARATOR].map(e))}};li.prototype.getTokenName=function(i){return _h(i)?i==this.EOF?"the end of file (EOF)":this.lexer.engine.tokens.values[i]:"'"+i+"'"};li.prototype.parse=function(i,t){this._errors=[],this.filename=t||"eval",this.currentNamespace=[""],this.extractDoc?this._docs=[]:this._docs=null,this.extractTokens?this._tokens=[]:this._tokens=null,this._docIndex=0,this._lastNode=null,this.lexer.setInput(i),this.lexer.all_tokens=this.extractTokens,this.lexer.comment_tokens=this.extractDoc,this.length=this.lexer._input.length,this.innerList=!1,this.innerListForm=!1;let e=this.node("program"),s=[];for(this.next();this.token!=this.EOF;)s.push(this.read_start());s.length===0&&this.extractDoc&&this._docs.length>this._docIndex&&s.push(this.node("noop")()),this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset];let o=e(s,this._errors,this._docs,this._tokens);if(this.debug){let h=this.ast.checkNodes();if(h.length>0)throw h.forEach(function(c){c.position&&console.log("Node at line "+c.position.line+", column "+c.position.column),console.log(c.stack.join(`
`))}),new Error("Some nodes are not closed")}return o};li.prototype.raiseError=function(i,t,e,s){if(i+=" on line "+this.lexer.yylloc.first_line,!this.suppressErrors){let h=new SyntaxError(i,this.filename,this.lexer.yylloc.first_line);throw h.lineNumber=this.lexer.yylloc.first_line,h.fileName=this.filename,h.columnNumber=this.lexer.yylloc.first_column,h}let o=this.ast.prepare("error",null,this)(i,s,this.lexer.yylloc.first_line,e);return this._errors.push(o),o};li.prototype.error=function(i){let t="Parse Error : syntax error",e=this.getTokenName(this.token),s="";if(this.token!==this.EOF){if(_h(this.token)){let o=this.text();o.length>10&&(o=o.substring(0,7)+"..."),e="'"+o+"' ("+e+")"}t+=", unexpected "+e}return i&&!Array.isArray(i)&&((_h(i)||i.length===1)&&(s=", expecting "+this.getTokenName(i)),t+=s),this.raiseError(t,s,i,e)};li.prototype.position=function(){return new CA(this.lexer.yylloc.first_line,this.lexer.yylloc.first_column,this.lexer.yylloc.first_offset)};li.prototype.node=function(i){if(this.extractDoc){let t=null;this._docIndex<this._docs.length&&(t=this._docs.slice(this._docIndex),this._docIndex=this._docs.length,this.debug&&(console.log(new Error("Append docs on "+i)),console.log(t)));let e=this.ast.prepare(i,t,this);return e.postBuild=function(s){if(this._docIndex<this._docs.length)if(this._lastNode){let o=this.prev[2],h=this._docIndex;for(;h<this._docs.length&&!(this._docs[h].offset>o);h++);h>this._docIndex&&(this._lastNode.setTrailingComments(this._docs.slice(this._docIndex,h)),this._docIndex=h)}else this.token===this.EOF&&(s.setTrailingComments(this._docs.slice(this._docIndex)),this._docIndex=this._docs.length);this._lastNode=s}.bind(this),e}return this.ast.prepare(i,null,this)};li.prototype.expectEndOfStatement=function(i){if(this.token===";")i&&this.lexer.yytext===";"&&i.includeToken(this);else if(this.token!==this.tok.T_INLINE_HTML&&this.token!==this.EOF)return this.error(";"),!1;return this.next(),!0};var ph=["parser.next","parser.node","parser.showlog"];li.prototype.showlog=function(){let i=new Error().stack.split(`
`),t;for(let e=2;e<i.length;e++){t=i[e].trim();let s=!1;for(let o=0;o<ph.length;o++)if(t.substring(3,3+ph[o].length)===ph[o]){s=!0;break}if(!s)break}return console.log("Line "+this.lexer.yylloc.first_line+" : "+this.getTokenName(this.token)+">"+this.lexer.yytext+"< @-->"+t),this};li.prototype.expect=function(i){if(Array.isArray(i)){if(i.indexOf(this.token)===-1)return this.error(i),!1}else if(this.token!=i)return this.error(i),!1;return!0};li.prototype.text=function(){return this.lexer.yytext};li.prototype.next=function(){if((this.token!==";"||this.lexer.yytext===";")&&(this.prev=[this.lexer.yylloc.last_line,this.lexer.yylloc.last_column,this.lexer.offset]),this.lex(),this.debug&&this.showlog(),this.extractDoc)for(;this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT;)this.token===this.tok.T_COMMENT?this._docs.push(this.read_comment()):this._docs.push(this.read_doc_comment());return this};li.prototype.peek=function(){let i=this.lexer.getState(),t=this.lexer.lex();return this.lexer.setState(i),t};li.prototype.lex=function(){if(this.extractTokens)do{if(this.token=this.lexer.lex()||this.EOF,this.token===this.EOF)return this;let i=this.lexer.yytext;if(Object.prototype.hasOwnProperty.call(this.lexer.engine.tokens.values,this.token)?i=[this.lexer.engine.tokens.values[this.token],i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset]:i=[null,i,this.lexer.yylloc.first_line,this.lexer.yylloc.first_offset,this.lexer.offset],this._tokens.push(i),this.token===this.tok.T_CLOSE_TAG)return this.token=";",this;if(this.token===this.tok.T_OPEN_TAG_WITH_ECHO)return this.token=this.tok.T_ECHO,this}while(this.token===this.tok.T_WHITESPACE||!this.extractDoc&&(this.token===this.tok.T_COMMENT||this.token===this.tok.T_DOC_COMMENT)||this.token===this.tok.T_OPEN_TAG);else this.token=this.lexer.lex()||this.EOF;return this};li.prototype.is=function(i){return Array.isArray(i)?i.indexOf(this.token)!==-1:this.entries[i].has(this.token)};[id(),sd(),od(),hd(),ud(),fd(),pd(),md(),gd(),xd(),yd(),Nd(),Ad(),Sd(),Ld(),Dd()].forEach(function(i){for(let t in i){if(Object.prototype.hasOwnProperty.call(li.prototype,t))throw new Error("Function "+t+" is already defined - collision");li.prototype[t]=i[t]}});Rd.exports=li});var Bd=V((gL,Fd)=>{"use strict";var NA={values:{101:"T_HALT_COMPILER",102:"T_USE",103:"T_ENCAPSED_AND_WHITESPACE",104:"T_OBJECT_OPERATOR",105:"T_STRING",106:"T_DOLLAR_OPEN_CURLY_BRACES",107:"T_STRING_VARNAME",108:"T_CURLY_OPEN",109:"T_NUM_STRING",110:"T_ISSET",111:"T_EMPTY",112:"T_INCLUDE",113:"T_INCLUDE_ONCE",114:"T_EVAL",115:"T_REQUIRE",116:"T_REQUIRE_ONCE",117:"T_NAMESPACE",118:"T_NS_SEPARATOR",119:"T_AS",120:"T_IF",121:"T_ENDIF",122:"T_WHILE",123:"T_DO",124:"T_FOR",125:"T_SWITCH",126:"T_BREAK",127:"T_CONTINUE",128:"T_RETURN",129:"T_GLOBAL",130:"T_STATIC",131:"T_ECHO",132:"T_INLINE_HTML",133:"T_UNSET",134:"T_FOREACH",135:"T_DECLARE",136:"T_TRY",137:"T_THROW",138:"T_GOTO",139:"T_FINALLY",140:"T_CATCH",141:"T_ENDDECLARE",142:"T_LIST",143:"T_CLONE",144:"T_PLUS_EQUAL",145:"T_MINUS_EQUAL",146:"T_MUL_EQUAL",147:"T_DIV_EQUAL",148:"T_CONCAT_EQUAL",149:"T_MOD_EQUAL",150:"T_AND_EQUAL",151:"T_OR_EQUAL",152:"T_XOR_EQUAL",153:"T_SL_EQUAL",154:"T_SR_EQUAL",155:"T_INC",156:"T_DEC",157:"T_BOOLEAN_OR",158:"T_BOOLEAN_AND",159:"T_LOGICAL_OR",160:"T_LOGICAL_AND",161:"T_LOGICAL_XOR",162:"T_SL",163:"T_SR",164:"T_IS_IDENTICAL",165:"T_IS_NOT_IDENTICAL",166:"T_IS_EQUAL",167:"T_IS_NOT_EQUAL",168:"T_IS_SMALLER_OR_EQUAL",169:"T_IS_GREATER_OR_EQUAL",170:"T_INSTANCEOF",171:"T_INT_CAST",172:"T_DOUBLE_CAST",173:"T_STRING_CAST",174:"T_ARRAY_CAST",175:"T_OBJECT_CAST",176:"T_BOOL_CAST",177:"T_UNSET_CAST",178:"T_EXIT",179:"T_PRINT",180:"T_YIELD",181:"T_YIELD_FROM",182:"T_FUNCTION",183:"T_DOUBLE_ARROW",184:"T_DOUBLE_COLON",185:"T_ARRAY",186:"T_CALLABLE",187:"T_CLASS",188:"T_ABSTRACT",189:"T_TRAIT",190:"T_FINAL",191:"T_EXTENDS",192:"T_INTERFACE",193:"T_IMPLEMENTS",194:"T_VAR",195:"T_PUBLIC",196:"T_PROTECTED",197:"T_PRIVATE",198:"T_CONST",199:"T_NEW",200:"T_INSTEADOF",201:"T_ELSEIF",202:"T_ELSE",203:"T_ENDSWITCH",204:"T_CASE",205:"T_DEFAULT",206:"T_ENDFOR",207:"T_ENDFOREACH",208:"T_ENDWHILE",209:"T_CONSTANT_ENCAPSED_STRING",210:"T_LNUMBER",211:"T_DNUMBER",212:"T_LINE",213:"T_FILE",214:"T_DIR",215:"T_TRAIT_C",216:"T_METHOD_C",217:"T_FUNC_C",218:"T_NS_C",219:"T_START_HEREDOC",220:"T_END_HEREDOC",221:"T_CLASS_C",222:"T_VARIABLE",223:"T_OPEN_TAG",224:"T_OPEN_TAG_WITH_ECHO",225:"T_CLOSE_TAG",226:"T_WHITESPACE",227:"T_COMMENT",228:"T_DOC_COMMENT",229:"T_ELLIPSIS",230:"T_COALESCE",231:"T_POW",232:"T_POW_EQUAL",233:"T_SPACESHIP",234:"T_COALESCE_EQUAL",235:"T_FN",236:"T_NULLSAFE_OBJECT_OPERATOR",237:"T_MATCH",238:"T_ATTRIBUTE",239:"T_ENUM",240:"T_READ_ONLY",241:"T_NAME_RELATIVE",242:"T_NAME_QUALIFIED",243:"T_NAME_FULLY_QUALIFIED"},names:{T_HALT_COMPILER:101,T_USE:102,T_ENCAPSED_AND_WHITESPACE:103,T_OBJECT_OPERATOR:104,T_STRING:105,T_DOLLAR_OPEN_CURLY_BRACES:106,T_STRING_VARNAME:107,T_CURLY_OPEN:108,T_NUM_STRING:109,T_ISSET:110,T_EMPTY:111,T_INCLUDE:112,T_INCLUDE_ONCE:113,T_EVAL:114,T_REQUIRE:115,T_REQUIRE_ONCE:116,T_NAMESPACE:117,T_NS_SEPARATOR:118,T_AS:119,T_IF:120,T_ENDIF:121,T_WHILE:122,T_DO:123,T_FOR:124,T_SWITCH:125,T_BREAK:126,T_CONTINUE:127,T_RETURN:128,T_GLOBAL:129,T_STATIC:130,T_ECHO:131,T_INLINE_HTML:132,T_UNSET:133,T_FOREACH:134,T_DECLARE:135,T_TRY:136,T_THROW:137,T_GOTO:138,T_FINALLY:139,T_CATCH:140,T_ENDDECLARE:141,T_LIST:142,T_CLONE:143,T_PLUS_EQUAL:144,T_MINUS_EQUAL:145,T_MUL_EQUAL:146,T_DIV_EQUAL:147,T_CONCAT_EQUAL:148,T_MOD_EQUAL:149,T_AND_EQUAL:150,T_OR_EQUAL:151,T_XOR_EQUAL:152,T_SL_EQUAL:153,T_SR_EQUAL:154,T_INC:155,T_DEC:156,T_BOOLEAN_OR:157,T_BOOLEAN_AND:158,T_LOGICAL_OR:159,T_LOGICAL_AND:160,T_LOGICAL_XOR:161,T_SL:162,T_SR:163,T_IS_IDENTICAL:164,T_IS_NOT_IDENTICAL:165,T_IS_EQUAL:166,T_IS_NOT_EQUAL:167,T_IS_SMALLER_OR_EQUAL:168,T_IS_GREATER_OR_EQUAL:169,T_INSTANCEOF:170,T_INT_CAST:171,T_DOUBLE_CAST:172,T_STRING_CAST:173,T_ARRAY_CAST:174,T_OBJECT_CAST:175,T_BOOL_CAST:176,T_UNSET_CAST:177,T_EXIT:178,T_PRINT:179,T_YIELD:180,T_YIELD_FROM:181,T_FUNCTION:182,T_DOUBLE_ARROW:183,T_DOUBLE_COLON:184,T_ARRAY:185,T_CALLABLE:186,T_CLASS:187,T_ABSTRACT:188,T_TRAIT:189,T_FINAL:190,T_EXTENDS:191,T_INTERFACE:192,T_IMPLEMENTS:193,T_VAR:194,T_PUBLIC:195,T_PROTECTED:196,T_PRIVATE:197,T_CONST:198,T_NEW:199,T_INSTEADOF:200,T_ELSEIF:201,T_ELSE:202,T_ENDSWITCH:203,T_CASE:204,T_DEFAULT:205,T_ENDFOR:206,T_ENDFOREACH:207,T_ENDWHILE:208,T_CONSTANT_ENCAPSED_STRING:209,T_LNUMBER:210,T_DNUMBER:211,T_LINE:212,T_FILE:213,T_DIR:214,T_TRAIT_C:215,T_METHOD_C:216,T_FUNC_C:217,T_NS_C:218,T_START_HEREDOC:219,T_END_HEREDOC:220,T_CLASS_C:221,T_VARIABLE:222,T_OPEN_TAG:223,T_OPEN_TAG_WITH_ECHO:224,T_CLOSE_TAG:225,T_WHITESPACE:226,T_COMMENT:227,T_DOC_COMMENT:228,T_ELLIPSIS:229,T_COALESCE:230,T_POW:231,T_POW_EQUAL:232,T_SPACESHIP:233,T_COALESCE_EQUAL:234,T_FN:235,T_NULLSAFE_OBJECT_OPERATOR:236,T_MATCH:237,T_ATTRIBUTE:238,T_ENUM:239,T_READ_ONLY:240,T_NAME_RELATIVE:241,T_NAME_QUALIFIED:242,T_NAME_FULLY_QUALIFIED:243}};Fd.exports=Object.freeze(NA)});var Md=V((kL,Ud)=>{"use strict";var bA=function(i,t,e){this.source=i,this.start=t,this.end=e};Ud.exports=bA});var We=V((xL,Hd)=>{"use strict";var Cr=function(t,e,s){this.kind=t,e&&(this.leadingComments=e),s&&(this.loc=s)};Cr.prototype.setTrailingComments=function(i){this.trailingComments=i};Cr.prototype.destroy=function(i){if(!i)throw new Error("Node already initialized, you must swap with another node");return this.leadingComments&&(i.leadingComments?i.leadingComments=Array.concat(this.leadingComments,i.leadingComments):i.leadingComments=this.leadingComments),this.trailingComments&&(i.trailingComments?i.trailingComments=Array.concat(this.trailingComments,i.trailingComments):i.trailingComments=this.trailingComments),i};Cr.prototype.includeToken=function(i){return this.loc&&(this.loc.end&&(this.loc.end.line=i.lexer.yylloc.last_line,this.loc.end.column=i.lexer.yylloc.last_column,this.loc.end.offset=i.lexer.offset),i.ast.withSource&&(this.loc.source=i.lexer._input.substring(this.loc.start.offset,i.lexer.offset))),this};Cr.extends=function(i,t){return t.prototype=Object.create(this.prototype),t.extends=this.extends,t.prototype.constructor=t,t.kind=i,t};Hd.exports=Cr});var fe=V((EL,qd)=>{"use strict";var Vd=We(),Gd="expression";qd.exports=Vd.extends(Gd,function(t,e,s){Vd.apply(this,[t||Gd,e,s])})});var jd=V((vL,Qd)=>{"use strict";var Wd=fe(),Yd="array";Qd.exports=Wd.extends(Yd,function(t,e,s,o){Wd.apply(this,[Yd,s,o]),this.items=e,this.shortForm=t})});var Jd=V((yL,$d)=>{"use strict";var Kd=fe(),zd="arrowfunc";$d.exports=Kd.extends(zd,function(t,e,s,o,h,c,u,f){Kd.apply(this,[zd,u,f]),this.arguments=t,this.byref=e,this.body=s,this.type=o,this.nullable=h,this.isStatic=c||!1})});var ep=V((CL,tp)=>{"use strict";var Xd=fe(),Zd="assign";tp.exports=Xd.extends(Zd,function(t,e,s,o,h){Xd.apply(this,[Zd,o,h]),this.left=t,this.right=e,this.operator=s})});var rp=V((NL,sp)=>{"use strict";var ip=fe(),np="assignref";sp.exports=ip.extends(np,function(t,e,s,o){ip.apply(this,[np,s,o]),this.left=t,this.right=e})});var lp=V((bL,hp)=>{"use strict";var op=We(),ap="attribute";hp.exports=op.extends(ap,function(t,e,s,o){op.apply(this,[ap,s,o]),this.name=t,this.args=e})});var dp=V((AL,fp)=>{"use strict";var up=We(),cp="attrgroup";fp.exports=up.extends(cp,function(t,e,s){up.apply(this,[cp,e,s]),this.attrs=t||[]})});var Os=V((IL,mp)=>{"use strict";var pp=fe(),_p="operation";mp.exports=pp.extends(_p,function(t,e,s){pp.apply(this,[t||_p,e,s])})});var xp=V((SL,kp)=>{"use strict";var Tp=Os(),gp="bin";kp.exports=Tp.extends(gp,function(t,e,s,o,h){Tp.apply(this,[gp,o,h]),this.type=t,this.left=e,this.right=s})});var Te=V((OL,yp)=>{"use strict";var Ep=We(),vp="statement";yp.exports=Ep.extends(vp,function(t,e,s){Ep.apply(this,[t||vp,e,s])})});var Nr=V((LL,bp)=>{"use strict";var Cp=Te(),Np="block";bp.exports=Cp.extends(Np,function(t,e,s,o){Cp.apply(this,[t||Np,s,o]),this.children=e.filter(Boolean)})});var Rn=V((PL,Sp)=>{"use strict";var Ap=fe(),Ip="literal";Sp.exports=Ap.extends(Ip,function(t,e,s,o,h){Ap.apply(this,[t||Ip,o,h]),this.value=e,s&&(this.raw=s)})});var Dp=V((DL,Pp)=>{"use strict";var Op=Rn(),Lp="boolean";Pp.exports=Op.extends(Lp,function(t,e,s,o){Op.apply(this,[Lp,t,e,s,o])})});var Bp=V((RL,Fp)=>{"use strict";var Rp=Te(),wp="break";Fp.exports=Rp.extends(wp,function(t,e,s){Rp.apply(this,[wp,e,s]),this.level=t})});var Vp=V((wL,Hp)=>{"use strict";var Up=fe(),Mp="byref";Hp.exports=Up.extends(Mp,function(t,e,s){Up.apply(this,[Mp,e,s]),this.what=t})});var Yp=V((FL,Wp)=>{"use strict";var Gp=fe(),qp="call";Wp.exports=Gp.extends(qp,function(t,e,s,o){Gp.apply(this,[qp,s,o]),this.what=t,this.arguments=e})});var zp=V((BL,Kp)=>{"use strict";var Qp=Te(),jp="case";Kp.exports=Qp.extends(jp,function(t,e,s,o){Qp.apply(this,[jp,s,o]),this.test=t,this.body=e})});var Zp=V((UL,Xp)=>{"use strict";var $p=Os(),Jp="cast";Xp.exports=$p.extends(Jp,function(t,e,s,o,h){$p.apply(this,[Jp,o,h]),this.type=t,this.raw=e,this.expr=s})});var n_=V((ML,i_)=>{"use strict";var t_=Te(),e_="catch";i_.exports=t_.extends(e_,function(t,e,s,o,h){t_.apply(this,[e_,o,h]),this.body=t,this.what=e,this.variable=s})});var kn=V((HL,a_)=>{"use strict";var s_=Te(),r_="declaration",AA="",IA="public",SA="protected",OA="private",o_=s_.extends(r_,function(t,e,s,o){s_.apply(this,[t||r_,s,o]),this.name=e});o_.prototype.parseFlags=function(i){this.isAbstract=i[2]===1,this.isFinal=i[2]===2,this.kind!=="class"&&(i[0]===-1?this.visibility=AA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=IA:i[0]===1?this.visibility=SA:i[0]===2&&(this.visibility=OA),this.isStatic=i[1]===1)};a_.exports=o_});var c_=V((VL,u_)=>{"use strict";var h_=kn(),l_="class";u_.exports=h_.extends(l_,function(t,e,s,o,h,c,u){h_.apply(this,[l_,t,c,u]),this.isAnonymous=!t,this.extends=e,this.implements=s,this.body=o,this.attrGroups=[],this.parseFlags(h)})});var mh=V((GL,p_)=>{"use strict";var f_=Te(),d_="constantstatement";p_.exports=f_.extends(d_,function(t,e,s,o){f_.apply(this,[t||d_,s,o]),this.constants=e})});var k_=V((qL,g_)=>{"use strict";var __=mh(),m_="classconstant",LA="",PA="public",DA="protected",RA="private",T_=__.extends(m_,function(t,e,s,o,h,c){__.apply(this,[t||m_,e,h,c]),this.parseFlags(s),this.attrGroups=o});T_.prototype.parseFlags=function(i){i[0]===-1?this.visibility=LA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=PA:i[0]===1?this.visibility=DA:i[0]===2&&(this.visibility=RA)};g_.exports=T_});var y_=V((WL,v_)=>{"use strict";var x_=fe(),E_="clone";v_.exports=x_.extends(E_,function(t,e,s){x_.apply(this,[E_,e,s]),this.what=t})});var A_=V((YL,b_)=>{"use strict";var C_=fe(),N_="closure";b_.exports=C_.extends(N_,function(t,e,s,o,h,c,u,f){C_.apply(this,[N_,u,f]),this.uses=s,this.arguments=t,this.byref=e,this.type=o,this.nullable=h,this.isStatic=c||!1,this.body=null,this.attrGroups=[]})});var Wo=V((QL,S_)=>{"use strict";var I_=We();S_.exports=I_.extends("comment",function(t,e,s,o){I_.apply(this,[t,s,o]),this.value=e})});var D_=V((jL,P_)=>{"use strict";var O_=Wo(),L_="commentblock";P_.exports=O_.extends(L_,function(t,e,s){O_.apply(this,[L_,t,e,s])})});var B_=V((KL,F_)=>{"use strict";var R_=Wo(),w_="commentline";F_.exports=R_.extends(w_,function(t,e,s){R_.apply(this,[w_,t,e,s])})});var V_=V((zL,H_)=>{"use strict";var U_=We(),M_="constant";H_.exports=U_.extends(M_,function(t,e,s,o){U_.apply(this,[M_,s,o]),this.name=t,this.value=e})});var Y_=V(($L,W_)=>{"use strict";var G_=Te(),q_="continue";W_.exports=G_.extends(q_,function(t,e,s){G_.apply(this,[q_,e,s]),this.level=t})});var z_=V((JL,K_)=>{"use strict";var Q_=Nr(),j_="declare",Yo=Q_.extends(j_,function(t,e,s,o,h){Q_.apply(this,[j_,e,o,h]),this.directives=t,this.mode=s});Yo.MODE_SHORT="short";Yo.MODE_BLOCK="block";Yo.MODE_NONE="none";K_.exports=Yo});var Z_=V((XL,X_)=>{"use strict";var $_=We(),J_="declaredirective";X_.exports=$_.extends(J_,function(t,e,s,o){$_.apply(this,[J_,s,o]),this.key=t,this.value=e})});var nm=V((ZL,im)=>{"use strict";var tm=Te(),em="do";im.exports=tm.extends(em,function(t,e,s,o){tm.apply(this,[em,s,o]),this.test=t,this.body=e})});var am=V((tP,om)=>{"use strict";var sm=Te(),rm="echo";om.exports=sm.extends(rm,function(t,e,s,o){sm.apply(this,[rm,s,o]),this.shortForm=e,this.expressions=t})});var cm=V((eP,um)=>{"use strict";var hm=fe(),lm="empty";um.exports=hm.extends(lm,function(t,e,s){hm.apply(this,[lm,e,s]),this.expression=t})});var _m=V((iP,pm)=>{"use strict";var fm=Rn(),dm="encapsed",br=fm.extends(dm,function(t,e,s,o,h){fm.apply(this,[dm,t,e,o,h]),this.type=s});br.TYPE_STRING="string";br.TYPE_SHELL="shell";br.TYPE_HEREDOC="heredoc";br.TYPE_OFFSET="offset";pm.exports=br});var km=V((nP,gm)=>{"use strict";var mm=fe(),Tm="encapsedpart";gm.exports=mm.extends(Tm,function(t,e,s,o,h){mm.apply(this,[Tm,o,h]),this.expression=t,this.syntax=e,this.curly=s})});var ym=V((sP,vm)=>{"use strict";var xm=fe(),Em="entry";vm.exports=xm.extends(Em,function(t,e,s,o,h,c){xm.apply(this,[Em,h,c]),this.key=t,this.value=e,this.byRef=s,this.unpack=o})});var Am=V((rP,bm)=>{"use strict";var Cm=kn(),Nm="enum";bm.exports=Cm.extends(Nm,function(t,e,s,o,h,c){Cm.apply(this,[Nm,t,h,c]),this.valueType=e,this.implements=s,this.body=o,this.attrGroups=[]})});var Lm=V((oP,Om)=>{"use strict";var Im=We(),Sm="enumcase";Om.exports=Im.extends(Sm,function(t,e,s,o){Im.apply(this,[Sm,s,o]),this.name=t,this.value=e})});var wm=V((aP,Rm)=>{"use strict";var Pm=We(),Dm="error";Rm.exports=Pm.extends(Dm,function(t,e,s,o,h,c){Pm.apply(this,[Dm,h,c]),this.message=t,this.token=e,this.line=s,this.expected=o})});var Mm=V((hP,Um)=>{"use strict";var Fm=fe(),Bm="eval";Um.exports=Fm.extends(Bm,function(t,e,s){Fm.apply(this,[Bm,e,s]),this.source=t})});var qm=V((lP,Gm)=>{"use strict";var Hm=fe(),Vm="exit";Gm.exports=Hm.extends(Vm,function(t,e,s,o){Hm.apply(this,[Vm,s,o]),this.expression=t,this.useDie=e})});var jm=V((uP,Qm)=>{"use strict";var Wm=Te(),Ym="expressionstatement";Qm.exports=Wm.extends(Ym,function(t,e,s){Wm.apply(this,[Ym,e,s]),this.expression=t})});var Jm=V((cP,$m)=>{"use strict";var Km=Te(),zm="for";$m.exports=Km.extends(zm,function(t,e,s,o,h,c,u){Km.apply(this,[zm,c,u]),this.init=t,this.test=e,this.increment=s,this.shortForm=h,this.body=o})});var eT=V((fP,tT)=>{"use strict";var Xm=Te(),Zm="foreach";tT.exports=Xm.extends(Zm,function(t,e,s,o,h,c,u){Xm.apply(this,[Zm,c,u]),this.source=t,this.key=e,this.value=s,this.shortForm=h,this.body=o})});var Th=V((dP,sT)=>{"use strict";var iT=kn(),nT="function";sT.exports=iT.extends(nT,function(t,e,s,o,h,c,u){iT.apply(this,[nT,t,c,u]),this.arguments=e,this.byref=s,this.type=o,this.nullable=h,this.body=null,this.attrGroups=[]})});var hT=V((pP,aT)=>{"use strict";var rT=Te(),oT="global";aT.exports=rT.extends(oT,function(t,e,s){rT.apply(this,[oT,e,s]),this.items=t})});var fT=V((_P,cT)=>{"use strict";var lT=Te(),uT="goto";cT.exports=lT.extends(uT,function(t,e,s){lT.apply(this,[uT,e,s]),this.label=t})});var mT=V((mP,_T)=>{"use strict";var dT=Te(),pT="halt";_T.exports=dT.extends(pT,function(t,e,s){dT.apply(this,[pT,e,s]),this.after=t})});var xT=V((TP,kT)=>{"use strict";var TT=We(),gT="identifier",wA=TT.extends(gT,function(t,e,s){TT.apply(this,[gT,e,s]),this.name=t});kT.exports=wA});var CT=V((gP,yT)=>{"use strict";var ET=Te(),vT="if";yT.exports=ET.extends(vT,function(t,e,s,o,h,c){ET.apply(this,[vT,h,c]),this.test=t,this.body=e,this.alternate=s,this.shortForm=o})});var IT=V((kP,AT)=>{"use strict";var NT=fe(),bT="include";AT.exports=NT.extends(bT,function(t,e,s,o,h){NT.apply(this,[bT,o,h]),this.once=t,this.require=e,this.target=s})});var PT=V((xP,LT)=>{"use strict";var ST=Rn(),OT="inline";LT.exports=ST.extends(OT,function(t,e,s,o){ST.apply(this,[OT,t,e,s,o])})});var FT=V((EP,wT)=>{"use strict";var DT=kn(),RT="interface";wT.exports=DT.extends(RT,function(t,e,s,o,h,c){DT.apply(this,[RT,t,h,c]),this.extends=e,this.body=s,this.attrGroups=o})});var HT=V((vP,MT)=>{"use strict";var BT=kn(),UT="intersectiontype";MT.exports=BT.extends(UT,function(t,e,s){BT.apply(this,[UT,null,e,s]),this.types=t})});var WT=V((yP,qT)=>{"use strict";var VT=fe(),GT="isset";qT.exports=VT.extends(GT,function(t,e,s){VT.apply(this,[GT,e,s]),this.variables=t})});var KT=V((CP,jT)=>{"use strict";var YT=Te(),QT="label";jT.exports=YT.extends(QT,function(t,e,s){YT.apply(this,[QT,e,s]),this.name=t})});var XT=V((NP,JT)=>{"use strict";var zT=fe(),$T="list";JT.exports=zT.extends($T,function(t,e,s,o){zT.apply(this,[$T,s,o]),this.items=t,this.shortForm=e})});var Xs=V((bP,eg)=>{"use strict";var ZT=fe(),tg="lookup";eg.exports=ZT.extends(tg,function(t,e,s,o,h){ZT.apply(this,[t||tg,o,h]),this.what=e,this.offset=s})});var rg=V((AP,sg)=>{"use strict";var ig=Rn(),ng="magic";sg.exports=ig.extends(ng,function(t,e,s,o){ig.apply(this,[ng,t,e,s,o])})});var lg=V((IP,hg)=>{"use strict";var og=fe(),ag="match";hg.exports=og.extends(ag,function(t,e,s,o){og.apply(this,[ag,s,o]),this.cond=t,this.arms=e})});var dg=V((SP,fg)=>{"use strict";var ug=fe(),cg="matcharm";fg.exports=ug.extends(cg,function(t,e,s,o){ug.apply(this,[cg,s,o]),this.conds=t,this.body=e})});var Tg=V((OP,mg)=>{"use strict";var pg=Th(),_g="method";mg.exports=pg.extends(_g,function(){pg.apply(this,arguments),this.kind=_g})});var Ls=V((LP,xg)=>{"use strict";var gg=We(),kg="reference",FA=gg.extends(kg,function(t,e,s){gg.apply(this,[t||kg,e,s])});xg.exports=FA});var Cg=V((PP,yg)=>{"use strict";var Eg=Ls(),vg="name",Ar=Eg.extends(vg,function(t,e,s,o){Eg.apply(this,[vg,s,o]),this.name=t.replace(/\\$/,""),this.resolution=e});Ar.UNQUALIFIED_NAME="uqn";Ar.QUALIFIED_NAME="qn";Ar.FULL_QUALIFIED_NAME="fqn";Ar.RELATIVE_NAME="rn";yg.exports=Ar});var Ig=V((DP,Ag)=>{"use strict";var Ng=Nr(),bg="namespace";Ag.exports=Ng.extends(bg,function(t,e,s,o,h){Ng.apply(this,[bg,e,o,h]),this.name=t,this.withBrackets=s||!1})});var Pg=V((RP,Lg)=>{"use strict";var Sg=fe(),Og="namedargument";Lg.exports=Sg.extends(Og,function(t,e,s,o){Sg.apply(this,[Og,s,o]),this.name=t,this.value=e})});var Fg=V((wP,wg)=>{"use strict";var Dg=fe(),Rg="new";wg.exports=Dg.extends(Rg,function(t,e,s,o){Dg.apply(this,[Rg,s,o]),this.what=t,this.arguments=e})});var Hg=V((FP,Mg)=>{"use strict";var Bg=We(),Ug="noop";Mg.exports=Bg.extends(Ug,function(t,e){Bg.apply(this,[Ug,t,e])})});var Wg=V((BP,qg)=>{"use strict";var Vg=Rn(),Gg="nowdoc";qg.exports=Vg.extends(Gg,function(t,e,s,o,h){Vg.apply(this,[Gg,t,e,o,h]),this.label=s})});var Kg=V((UP,jg)=>{"use strict";var Yg=We(),Qg="nullkeyword";jg.exports=Yg.extends(Qg,function(t,e,s){Yg.apply(this,[Qg,e,s]),this.raw=t})});var Xg=V((MP,Jg)=>{"use strict";var zg=Xs(),$g="nullsafepropertylookup";Jg.exports=zg.extends($g,function(t,e,s,o){zg.apply(this,[$g,t,e,s,o])})});var ik=V((HP,ek)=>{"use strict";var Zg=Rn(),tk="number";ek.exports=Zg.extends(tk,function(t,e,s,o){Zg.apply(this,[tk,t,e,s,o])})});var ok=V((VP,rk)=>{"use strict";var nk=Xs(),sk="offsetlookup";rk.exports=nk.extends(sk,function(t,e,s,o){nk.apply(this,[sk,t,e,s,o])})});var uk=V((GP,lk)=>{"use strict";var ak=kn(),hk="parameter";lk.exports=ak.extends(hk,function(t,e,s,o,h,c,u,f,k,x){ak.apply(this,[hk,t,k,x]),this.value=s,this.type=e,this.byref=o,this.variadic=h,this.readonly=c,this.nullable=u,this.flags=f||0,this.attrGroups=[]})});var pk=V((qP,dk)=>{"use strict";var ck=Ls(),fk="parentreference",BA=ck.extends(fk,function(t,e,s){ck.apply(this,[fk,e,s]),this.raw=t});dk.exports=BA});var gk=V((WP,Tk)=>{"use strict";var _k=Os(),mk="post";Tk.exports=_k.extends(mk,function(t,e,s,o){_k.apply(this,[mk,s,o]),this.type=t,this.what=e})});var vk=V((YP,Ek)=>{"use strict";var kk=Os(),xk="pre";Ek.exports=kk.extends(xk,function(t,e,s,o){kk.apply(this,[xk,s,o]),this.type=t,this.what=e})});var bk=V((QP,Nk)=>{"use strict";var yk=fe(),Ck="print";Nk.exports=yk.extends(Ck,function(t,e,s){yk.apply(this,[Ck,e,s]),this.expression=t})});var Ok=V((jP,Sk)=>{"use strict";var Ak=Nr(),Ik="program";Sk.exports=Ak.extends(Ik,function(t,e,s,o,h,c){Ak.apply(this,[Ik,t,h,c]),this.errors=e,s&&(this.comments=s),o&&(this.tokens=o)})});var Rk=V((KP,Dk)=>{"use strict";var Lk=Te(),Pk="property";Dk.exports=Lk.extends(Pk,function(t,e,s,o,h,c,u,f){Lk.apply(this,[Pk,u,f]),this.name=t,this.value=e,this.readonly=s,this.nullable=o,this.type=h,this.attrGroups=c})});var Uk=V((zP,Bk)=>{"use strict";var wk=Xs(),Fk="propertylookup";Bk.exports=wk.extends(Fk,function(t,e,s,o){wk.apply(this,[Fk,t,e,s,o])})});var qk=V(($P,Gk)=>{"use strict";var Mk=Te(),Hk="propertystatement",UA="",MA="public",HA="protected",VA="private",Vk=Mk.extends(Hk,function(t,e,s,o,h){Mk.apply(this,[Hk,o,h]),this.properties=e,this.parseFlags(s)});Vk.prototype.parseFlags=function(i){i[0]===-1?this.visibility=UA:i[0]===null?this.visibility=null:i[0]===0?this.visibility=MA:i[0]===1?this.visibility=HA:i[0]===2&&(this.visibility=VA),this.isStatic=i[1]===1};Gk.exports=Vk});var jk=V((JP,Qk)=>{"use strict";var Wk=fe(),Yk="retif";Qk.exports=Wk.extends(Yk,function(t,e,s,o,h){Wk.apply(this,[Yk,o,h]),this.test=t,this.trueExpr=e,this.falseExpr=s})});var Jk=V((XP,$k)=>{"use strict";var Kk=Te(),zk="return";$k.exports=Kk.extends(zk,function(t,e,s){Kk.apply(this,[zk,e,s]),this.expr=t})});var ex=V((ZP,tx)=>{"use strict";var Xk=Ls(),Zk="selfreference",GA=Xk.extends(Zk,function(t,e,s){Xk.apply(this,[Zk,e,s]),this.raw=t});tx.exports=GA});var rx=V((tD,sx)=>{"use strict";var ix=fe(),nx="silent";sx.exports=ix.extends(nx,function(t,e,s){ix.apply(this,[nx,e,s]),this.expr=t})});var lx=V((eD,hx)=>{"use strict";var ox=Te(),ax="static";hx.exports=ox.extends(ax,function(t,e,s){ox.apply(this,[ax,e,s]),this.variables=t})});var dx=V((iD,fx)=>{"use strict";var ux=We(),cx="staticvariable";fx.exports=ux.extends(cx,function(t,e,s,o){ux.apply(this,[cx,s,o]),this.variable=t,this.defaultValue=e})});var Tx=V((nD,mx)=>{"use strict";var px=Xs(),_x="staticlookup";mx.exports=px.extends(_x,function(t,e,s,o){px.apply(this,[_x,t,e,s,o])})});var Ex=V((sD,xx)=>{"use strict";var gx=Ls(),kx="staticreference",qA=gx.extends(kx,function(t,e,s){gx.apply(this,[kx,e,s]),this.raw=t});xx.exports=qA});var Nx=V((rD,Cx)=>{"use strict";var vx=Rn(),yx="string";Cx.exports=vx.extends(yx,function(t,e,s,o,h,c){vx.apply(this,[yx,e,o,h,c]),this.unicode=s,this.isDoubleQuote=t})});var Sx=V((oD,Ix)=>{"use strict";var bx=Te(),Ax="switch";Ix.exports=bx.extends(Ax,function(t,e,s,o,h){bx.apply(this,[Ax,o,h]),this.test=t,this.body=e,this.shortForm=s})});var Dx=V((aD,Px)=>{"use strict";var Ox=Te(),Lx="throw";Px.exports=Ox.extends(Lx,function(t,e,s){Ox.apply(this,[Lx,e,s]),this.what=t})});var Bx=V((hD,Fx)=>{"use strict";var Rx=kn(),wx="trait";Fx.exports=Rx.extends(wx,function(t,e,s,o){Rx.apply(this,[wx,t,s,o]),this.body=e})});var Vx=V((lD,Hx)=>{"use strict";var Ux=We(),Mx="traitalias",WA="",YA="public",QA="protected",jA="private";Hx.exports=Ux.extends(Mx,function(t,e,s,o,h,c){Ux.apply(this,[Mx,h,c]),this.trait=t,this.method=e,this.as=s,this.visibility=WA,o&&(o[0]===0?this.visibility=YA:o[0]===1?this.visibility=QA:o[0]===2&&(this.visibility=jA))})});var Yx=V((uD,Wx)=>{"use strict";var Gx=We(),qx="traitprecedence";Wx.exports=Gx.extends(qx,function(t,e,s,o,h){Gx.apply(this,[qx,o,h]),this.trait=t,this.method=e,this.instead=s})});var zx=V((cD,Kx)=>{"use strict";var Qx=We(),jx="traituse";Kx.exports=Qx.extends(jx,function(t,e,s,o){Qx.apply(this,[jx,s,o]),this.traits=t,this.adaptations=e})});var Zx=V((fD,Xx)=>{"use strict";var $x=Te(),Jx="try";Xx.exports=$x.extends(Jx,function(t,e,s,o,h){$x.apply(this,[Jx,o,h]),this.body=t,this.catches=e,this.always=s})});var sE=V((dD,nE)=>{"use strict";var tE=Ls(),eE="typereference",iE=tE.extends(eE,function(t,e,s,o){tE.apply(this,[eE,s,o]),this.name=t,this.raw=e});iE.types=["int","float","string","bool","object","array","callable","iterable","void","static"];nE.exports=iE});var hE=V((pD,aE)=>{"use strict";var rE=Os(),oE="unary";aE.exports=rE.extends(oE,function(t,e,s,o){rE.apply(this,[oE,s,o]),this.type=t,this.what=e})});var fE=V((_D,cE)=>{"use strict";var lE=kn(),uE="uniontype";cE.exports=lE.extends(uE,function(t,e,s){lE.apply(this,[uE,null,e,s]),this.types=t})});var mE=V((mD,_E)=>{"use strict";var dE=Te(),pE="unset";_E.exports=dE.extends(pE,function(t,e,s){dE.apply(this,[pE,e,s]),this.variables=t})});var xE=V((TD,kE)=>{"use strict";var TE=Te(),gE="usegroup";kE.exports=TE.extends(gE,function(t,e,s,o,h){TE.apply(this,[gE,o,h]),this.name=t,this.type=e,this.items=s})});var CE=V((gD,yE)=>{"use strict";var EE=Te(),vE="useitem",gh=EE.extends(vE,function(t,e,s,o,h){EE.apply(this,[vE,o,h]),this.name=t,this.alias=e,this.type=s});gh.TYPE_CONST="const";gh.TYPE_FUNCTION="function";yE.exports=gh});var IE=V((kD,AE)=>{"use strict";var NE=fe(),bE="variable";AE.exports=NE.extends(bE,function(t,e,s,o){NE.apply(this,[bE,s,o]),this.name=t,this.curly=e||!1})});var PE=V((xD,LE)=>{"use strict";var SE=fe(),OE="variadic";LE.exports=SE.extends(OE,function(t,e,s){SE.apply(this,[OE,e,s]),this.what=t})});var FE=V((ED,wE)=>{"use strict";var DE=We(),RE="variadicplaceholder";wE.exports=DE.extends(RE,function(t,e){DE.apply(this,[RE,t,e])})});var HE=V((vD,ME)=>{"use strict";var BE=Te(),UE="while";ME.exports=BE.extends(UE,function(t,e,s,o,h){BE.apply(this,[UE,o,h]),this.test=t,this.body=e,this.shortForm=s})});var WE=V((yD,qE)=>{"use strict";var VE=fe(),GE="yield";qE.exports=VE.extends(GE,function(t,e,s,o){VE.apply(this,[GE,s,o]),this.value=t,this.key=e})});var KE=V((CD,jE)=>{"use strict";var YE=fe(),QE="yieldfrom";jE.exports=YE.extends(QE,function(t,e,s){YE.apply(this,[QE,e,s]),this.value=t})});var $E=V((ND,zE)=>{"use strict";var KA=Md(),zA=dh(),mi=function(i,t){this.withPositions=i,this.withSource=t};mi.precedence={};[["or"],["xor"],["and"],["="],["?"],["??"],["||"],["&&"],["|"],["^"],["&"],["==","!=","===","!==","<=>"],["<","<=",">",">="],["<<",">>"],["+","-","."],["*","/","%"],["!"],["instanceof"],["cast","silent"],["**"]].forEach(function(i,t){i.forEach(function(e){mi.precedence[e]=t+1})});mi.prototype.isRightAssociative=function(i){return i==="**"||i==="??"};mi.prototype.swapLocations=function(i,t,e,s){this.withPositions&&(i.loc.start=t.loc.start,i.loc.end=e.loc.end,this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};mi.prototype.resolveLocations=function(i,t,e,s){this.withPositions&&(i.loc.start.offset>t.loc.start.offset&&(i.loc.start=t.loc.start),i.loc.end.offset<e.loc.end.offset&&(i.loc.end=e.loc.end),this.withSource&&(i.loc.source=s.lexer._input.substring(i.loc.start.offset,i.loc.end.offset)))};mi.prototype.resolvePrecedence=function(i,t){let e,s,o;return i.kind==="call"?this.resolveLocations(i,i.what,i,t):i.kind==="propertylookup"||i.kind==="staticlookup"||i.kind==="offsetlookup"&&i.offset?this.resolveLocations(i,i.what,i.offset,t):i.kind==="bin"?i.right&&!i.right.parenthesizedExpression&&(i.right.kind==="bin"?(s=mi.precedence[i.type],o=mi.precedence[i.right.type],s&&o&&o<=s&&(i.type!==i.right.type||!this.isRightAssociative(i.type))&&(e=i.right,i.right=i.right.left,this.swapLocations(i,i.left,i.right,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e)):i.right.kind==="retif"&&(s=mi.precedence[i.type],o=mi.precedence["?"],s&&o&&o<=s&&(e=i.right,i.right=i.right.test,this.swapLocations(i,i.left,i.right,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e))):(i.kind==="silent"||i.kind==="cast")&&i.expr&&!i.expr.parenthesizedExpression?i.expr.kind==="bin"?(e=i.expr,i.expr=i.expr.left,this.swapLocations(i,i,i.expr,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.expr.kind==="retif"&&(e=i.expr,i.expr=i.expr.test,this.swapLocations(i,i,i.expr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="unary"?i.what&&!i.what.parenthesizedExpression&&(i.what.kind==="bin"?(e=i.what,i.what=i.what.left,this.swapLocations(i,i,i.what,t),e.left=this.resolvePrecedence(i,t),this.swapLocations(e,e.left,e.right,t),i=e):i.what.kind==="retif"&&(e=i.what,i.what=i.what.test,this.swapLocations(i,i,i.what,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e)):i.kind==="retif"?i.falseExpr&&i.falseExpr.kind==="retif"&&!i.falseExpr.parenthesizedExpression&&(e=i.falseExpr,i.falseExpr=e.test,this.swapLocations(i,i.test,i.falseExpr,t),e.test=this.resolvePrecedence(i,t),this.swapLocations(e,e.test,e.falseExpr,t),i=e):i.kind==="assign"?i.right&&i.right.kind==="bin"&&!i.right.parenthesizedExpression&&(s=mi.precedence["="],o=mi.precedence[i.right.type],s&&o&&o<s&&(e=i.right,i.right=i.right.left,e.left=i,this.swapLocations(e,e.left,i.right,t),i=e)):i.kind==="expressionstatement"&&this.swapLocations(i,i.expression,i,t),i};mi.prototype.prepare=function(i,t,e){let s=null;(this.withPositions||this.withSource)&&(s=e.position());let o=this,h=function(){let c=null,u=Array.prototype.slice.call(arguments);if(u.push(t),o.withPositions||o.withSource){let x=null;o.withSource&&(x=e.lexer._input.substring(s.offset,e.prev[2])),c=new KA(x,s,new zA(e.prev[0],e.prev[1],e.prev[2])),u.push(c)}i||(i=u.shift());let f=o[i];if(typeof f!="function")throw new Error('Undefined node "'+i+'"');let k=Object.create(f.prototype);return f.apply(k,u),h.instance=k,h.trailingComments&&(k.trailingComments=h.trailingComments),typeof h.postBuild=="function"&&h.postBuild(k),e.debug&&delete o.stack[h.stackUid],o.resolvePrecedence(k,e)};return e.debug&&(this.stack||(this.stack={},this.stackUid=1),this.stack[++this.stackUid]={position:s,stack:new Error().stack.split(`
`).slice(3,5)},h.stackUid=this.stackUid),h.setTrailingComments=function(c){h.instance?h.instance.setTrailingComments(c):h.trailingComments=c},h.destroy=function(c){t&&(c?c.leadingComments?c.leadingComments=t.concat(c.leadingComments):c.leadingComments=t:e._docIndex=e._docs.length-t.length),e.debug&&delete o.stack[h.stackUid]},h};mi.prototype.checkNodes=function(){let i=[];for(let t in this.stack)Object.prototype.hasOwnProperty.call(this.stack,t)&&(this.stack[t].key=t,i.push(this.stack[t]));return this.stack={},i};[jd(),Jd(),ep(),rp(),lp(),dp(),xp(),Nr(),Dp(),Bp(),Vp(),Yp(),zp(),Zp(),n_(),c_(),k_(),y_(),A_(),Wo(),D_(),B_(),V_(),mh(),Y_(),kn(),z_(),Z_(),nm(),am(),cm(),_m(),km(),ym(),Am(),Lm(),wm(),Mm(),qm(),fe(),jm(),Jm(),eT(),Th(),hT(),fT(),mT(),xT(),CT(),IT(),PT(),FT(),HT(),WT(),KT(),XT(),Rn(),Xs(),rg(),lg(),dg(),Tg(),Cg(),Ig(),Pg(),Fg(),We(),Hg(),Wg(),Kg(),Xg(),ik(),ok(),Os(),uk(),pk(),gk(),vk(),bk(),Ok(),Rk(),Uk(),qk(),Ls(),jk(),Jk(),ex(),rx(),Te(),lx(),dx(),Tx(),Ex(),Nx(),Sx(),Dx(),Bx(),Vx(),Yx(),zx(),Zx(),sE(),hE(),fE(),mE(),xE(),CE(),IE(),PE(),FE(),HE(),WE(),KE()].forEach(function(i){mi.prototype[i.kind]=i});zE.exports=mi});var ev=V((bD,wn)=>{"use strict";var JE=Zf(),XE=wd(),ZE=Bd(),tv=$E();function kh(i,t){let e=Object.keys(i),s=e.length;for(;s--;){let o=e[s],h=i[o];h===null?delete t[o]:typeof h=="function"?t[o]=h.bind(t):Array.isArray(h)?t[o]=Array.isArray(t[o])?t[o].concat(h):h:typeof h=="object"?t[o]=typeof t[o]=="object"?kh(h,t[o]):h:t[o]=h}return t}var Si=function(i){if(typeof this=="function")return new this(i);if(this.tokens=ZE,this.lexer=new JE(this),this.ast=new tv,this.parser=new XE(this.lexer,this.ast),i&&typeof i=="object"){if(i.parser&&(i.lexer||(i.lexer={}),i.parser.version)){if(typeof i.parser.version=="string"){let t=i.parser.version.split(".");if(t=parseInt(t[0])*100+parseInt(t[1]),isNaN(t))throw new Error("Bad version number : "+i.parser.version);i.parser.version=t}else if(typeof i.parser.version!="number")throw new Error("Expecting a number for version");if(i.parser.version<500||i.parser.version>900)throw new Error("Can only handle versions between 5.x to 8.x")}kh(i,this),this.lexer.version=this.parser.version}},xh=function(i){return typeof i.write=="function"?i.toString():i};Si.create=function(i){return new Si(i)};Si.parseEval=function(i,t){return new Si(t).parseEval(i)};Si.prototype.parseEval=function(i){return this.lexer.mode_eval=!0,this.lexer.all_tokens=!1,i=xh(i),this.parser.parse(i,"eval")};Si.parseCode=function(i,t,e){return typeof t=="object"&&!e&&(e=t,t="unknown"),new Si(e).parseCode(i,t)};Si.prototype.parseCode=function(i,t){return this.lexer.mode_eval=!1,this.lexer.all_tokens=!1,i=xh(i),this.parser.parse(i,t)};Si.tokenGetAll=function(i,t){return new Si(t).tokenGetAll(i)};Si.prototype.tokenGetAll=function(i){this.lexer.mode_eval=!1,this.lexer.all_tokens=!0,i=xh(i);let t=this.lexer.EOF,e=this.tokens.values;this.lexer.setInput(i);let s=this.lexer.lex()||t,o=[];for(;s!=t;){let h=this.lexer.yytext;Object.prototype.hasOwnProperty.call(e,s)&&(h=[e[s],h,this.lexer.yylloc.first_line]),o.push(h),s=this.lexer.lex()||t}return o};wn.exports=Si;wn.exports.tokens=ZE;wn.exports.lexer=JE;wn.exports.AST=tv;wn.exports.parser=XE;wn.exports.combine=kh;wn.exports.Engine=Si;wn.exports.default=Si});var iv,Qo,nv=Ot(()=>{"use strict";iv=$n(ev()),Qo=class{constructor(){this.lastError=null}isValid(t,e=!0){let s=new iv.Engine({parser:{extractDoc:!0},ast:{withPositions:!0,withSource:!0}});try{e?s.parseEval(t):s.parseCode(t,"test.php")}catch(o){return o instanceof SyntaxError&&(this.lastError=o),!1}return this.lastError=null,!0}getLastError(){return this.lastError}}});var jo,sv=Ot(()=>{"use strict";jo=class{static printError(t,e){var u,f;let s=t.message+`

`,o=(f=(u=t.node)==null?void 0:u.startPosition)==null?void 0:f.line,h=o;e.forEach((k,x)=>{h=x});let c=h.toString().length;return e.forEach((k,x)=>{let M=x.toString(),C="",y=0;y=c-M.length,o==x?C=" >"+"0".repeat(y)+M+"| ":C="  "+"0".repeat(y)+M+"| ",s+=C+k+`
`}),s}}});var Ko,rv=Ot(()=>{"use strict";Pn();Ko=class{constructor(){this.formattingOptions=null;this.transformOptions=null;this.htmlFormatter=null;this.phpFormatter=null;this.blockPhpFormatter=null;this.phpTagFormatter=null;this.jsonFormatter=null;this.preFormatter=null}withTransformOptions(t){return this.transformOptions=t,this}withFormattingOptions(t){return this.formattingOptions=t,this}withPreFormatter(t){return this.preFormatter=t,this}withHtmlFormatter(t){return this.htmlFormatter=t,this}withPhpFormatter(t){return this.phpFormatter=t,this}withBlockPhpFormatter(t){return this.blockPhpFormatter=t,this}withPhpTagFormatter(t){return this.phpTagFormatter=t,this}withJsonFormatter(t){return this.jsonFormatter=t,this}formatText(t){return this.formatDocument(be.fromText(t))}formatDocument(t){if(this.preFormatter!=null){let o=this.preFormatter(t);if(o!=null)return o}if(this.htmlFormatter==null||t.isValid()==!1)return t.getOriginalContent();t.transform().withBlockPhpFormatter(this.blockPhpFormatter).withPhpFormatter(this.phpFormatter).withPhpTagFormatter(this.phpTagFormatter).withJsonFormatter(this.jsonFormatter),this.transformOptions!=null&&t.transform().withOptions(this.transformOptions);let e=t.transform().toStructure(),s=this.htmlFormatter(e);return t.transform().fromStructure(s)}}});var zo,ov=Ot(()=>{"use strict";sv();rv();yr();zo=class extends Ko{constructor(t,e){super(),Ho(t),this.withHtmlFormatter(Cf).withPhpFormatter(Nf).withBlockPhpFormatter(bf).withPhpTagFormatter(Af).withJsonFormatter(yf).withTransformOptions(e).withPreFormatter(s=>{var o,h,c;if(s.errors.hasStructureErrors()){let u=s.errors.getFirstStructureError(),f=s.getLinesAround((c=(h=(o=u.node)==null?void 0:o.startPosition)==null?void 0:h.line)!=null?c:1),k=jo.printError(u,f);throw new SyntaxError(k)}return null})}}});var If=V((HD,lv)=>{Pn();nv();rh();ov();yr();var av,Eh,hv,vh=null,$A={languages:[{name:"Blade",parsers:["blade"],extensions:[".blade.php"],vscodeLanguageIds:["blade"]}],parsers:{blade:{parse:function(i,t,e){Ho(e),av=e,vh=kf(__dirname),Eh=vh,hv=vh,Eh.tabSize=vf().tabWidth;let s=new be;return s.getParser().withParserOptions(hv).withPhpValidator(new Qo),s.loadString(i)},locStart:()=>0,locEnd:()=>0,astFormat:"blade"}},printers:{blade:{print(i){let t=i.stack[0];return new zo(av,Eh).formatDocument(t)}}},defaultOptions:{tabWidth:4}};lv.exports=$A});module.exports=If();
